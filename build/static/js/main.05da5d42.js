/*! For license information please see main.05da5d42.js.LICENSE.txt */
(()=>{"use strict";var e={579(e,t,n){e.exports=n(1153)},1153(e,t,n){var a=n(5043),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,r={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,a)&&!l.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:i,type:e,key:c,ref:d,props:r,_owner:s.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},2284(e,t,n){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}n.d(t,{A:()=>a})},2730(e,t,n){var a=n(5043),i=n(8853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,a,i,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,a){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,a)&&(n=null),a||null===i?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,a=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),C=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var z,D=Object.assign;function E(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var O=!1;function B(e,t){if(!e||O)return"";O=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),r=a.stack.split("\n"),o=i.length-1,s=r.length-1;1<=o&&0<=s&&i[o]!==r[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==r[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==r[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{O=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?E(e):""}function q(e){switch(e.tag){case 5:return E(e.type);case 16:return E("Lazy");case 13:return E("Suspense");case 19:return E("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case j:return"Portal";case k:return"Profiler";case N:return"StrictMode";case F:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=U(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function V(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=U(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=W(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(a&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function re(e,t){var n=W(t.value),a=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),i=fe(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,Ne=null;function ke(e){if(e=bi(e)){if("function"!==typeof je)throw Error(r(280));var t=e.stateNode;t&&(t=Si(t),je(e.stateNode,e.type,t))}}function _e(e){we?Ne?Ne.push(e):Ne=[e]:we=e}function Ce(){if(we){var e=we,t=Ne;if(Ne=we=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Pe(e,t){return e(t)}function Fe(){}var Ae=!1;function Le(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Pe(e,t,n)}finally{Ae=!1,(null!==we||null!==Ne)&&(Fe(),Ce())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var a=Si(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Re=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){Re=!1}function Te(e,t,n,a,i,r,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var ze=!1,De=null,Ee=!1,Oe=null,Be={onError:function(e){ze=!0,De=e}};function qe(e,t,n,a,i,r,o,s,l){ze=!1,De=null,Te.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(r(188))}function Ue(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(a=i.return)){n=a;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===a)return We(i),t;o=o.sibling}throw Error(r(188))}if(n.return!==a.return)n=i,a=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,a=o;break}if(l===a){s=!0,a=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,a=i;break}if(l===a){s=!0,a=o,n=i;break}l=l.sibling}if(!s)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ve=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,$e=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,at=i.unstable_IdlePriority,it=null,rt=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,i=e.suspendedLanes,r=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?a=ut(s):0!==(r&=o)&&(a=ut(r))}else 0!==(o=n&~i)?a=ut(o):0!==r&&(a=ut(r));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(r=t&-t)||16===i&&0!==(4194240&r)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)i=1<<(n=31-ot(t)),a|=e[n],t&=~i;return a}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-ot(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,jt,wt,Nt,kt,_t=!1,Ct=[],Pt=null,Ft=null,At=null,Lt=new Map,Mt=new Map,Rt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function zt(e,t,n,a,i,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&jt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Dt(e){var t=yi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void kt(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Et(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&jt(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);xe=a,n.target.dispatchEvent(a),xe=null,t.shift()}return!0}function Ot(e,t,n){Et(e)&&n.delete(t)}function Bt(){_t=!1,null!==Pt&&Et(Pt)&&(Pt=null),null!==Ft&&Et(Ft)&&(Ft=null),null!==At&&Et(At)&&(At=null),Lt.forEach(Ot),Mt.forEach(Ot)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return qt(t,e)}if(0<Ct.length){qt(Ct[0],e);for(var n=1;n<Ct.length;n++){var a=Ct[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Pt&&qt(Pt,e),null!==Ft&&qt(Ft,e),null!==At&&qt(At,e),Lt.forEach(t),Mt.forEach(t),n=0;n<Rt.length;n++)(a=Rt[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Rt.shift()}var Gt=x.ReactCurrentBatchConfig,Wt=!0;function Ut(e,t,n,a){var i=bt,r=Gt.transition;Gt.transition=null;try{bt=1,Vt(e,t,n,a)}finally{bt=i,Gt.transition=r}}function Kt(e,t,n,a){var i=bt,r=Gt.transition;Gt.transition=null;try{bt=4,Vt(e,t,n,a)}finally{bt=i,Gt.transition=r}}function Vt(e,t,n,a){if(Wt){var i=Zt(e,t,n,a);if(null===i)Wa(e,t,a,Yt,n),Tt(e,a);else if(function(e,t,n,a,i){switch(t){case"focusin":return Pt=zt(Pt,e,t,n,a,i),!0;case"dragenter":return Ft=zt(Ft,e,t,n,a,i),!0;case"mouseover":return At=zt(At,e,t,n,a,i),!0;case"pointerover":var r=i.pointerId;return Lt.set(r,zt(Lt.get(r)||null,e,t,n,a,i)),!0;case"gotpointercapture":return r=i.pointerId,Mt.set(r,zt(Mt.get(r)||null,e,t,n,a,i)),!0}return!1}(i,e,t,n,a))a.stopPropagation();else if(Tt(e,a),4&t&&-1<It.indexOf(e)){for(;null!==i;){var r=bi(i);if(null!==r&&St(r),null===(r=Zt(e,t,n,a))&&Wa(e,t,a,Yt,n),r===i)break;i=r}null!==i&&a.stopPropagation()}else Wa(e,t,a,null,n)}}var Yt=null;function Zt(e,t,n,a){if(Yt=null,null!==(e=yi(e=Se(a))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Jt,a=n.length,i="value"in Qt?Qt.value:Qt.textContent,r=i.length;for(e=0;e<a&&n[e]===i[e];e++);var o=a-e;for(t=1;t<=o&&n[a-t]===i[r-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,i,r){for(var o in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:an,this.isPropagationStopped=an,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=D({},cn,{view:0,detail:0}),hn=rn(un),pn=D({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),mn=rn(pn),fn=rn(D({},pn,{dataTransfer:0})),gn=rn(D({},un,{relatedTarget:0})),vn=rn(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(yn),xn=rn(D({},cn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function kn(){return Nn}var _n=D({},un,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=rn(_n),Pn=rn(D({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Fn=rn(D({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=rn(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=D({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=rn(Ln),Rn=[9,13,27,32],In=d&&"CompositionEvent"in window,Tn=null;d&&"documentMode"in document&&(Tn=document.documentMode);var zn=d&&"TextEvent"in window&&!Tn,Dn=d&&(!In||Tn&&8<Tn&&11>=Tn),En=String.fromCharCode(32),On=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Un(e,t,n,a){_e(a),0<(t=Ka(t,"onChange")).length&&(n=new dn("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Kn=null,Vn=null;function Yn(e){Ea(e,0)}function Zn(e){if(V(xi(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(d){var Jn;if(d){var Xn="oninput"in document;if(!Xn){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Xn="function"===typeof ea.oninput}Jn=Xn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function ta(){Kn&&(Kn.detachEvent("onpropertychange",na),Vn=Kn=null)}function na(e){if("value"===e.propertyName&&Zn(Vn)){var t=[];Un(t,Vn,e,Se(e)),Le(Yn,t)}}function aa(e,t,n){"focusin"===e?(ta(),Vn=n,(Kn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ia(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Vn)}function ra(e,t){if("click"===e)return Zn(t)}function oa(e,t){if("input"===e||"change"===e)return Zn(t)}var sa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(sa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!u.call(t,i)||!sa(e[i],t[i]))return!1}return!0}function ca(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function da(e,t){var n,a=ca(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ca(a)}}function ua(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ua(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ha(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ma(e){var t=ha(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ua(n.ownerDocument.documentElement,n)){if(null!==a&&pa(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,r=Math.min(a.start,i);a=void 0===a.end?r:Math.min(a.end,i),!e.extend&&r>a&&(i=a,a=r,r=i),i=da(n,r);var o=da(n,a);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fa=d&&"documentMode"in document&&11>=document.documentMode,ga=null,va=null,ya=null,ba=!1;function xa(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ba||null==ga||ga!==Y(a)||("selectionStart"in(a=ga)&&pa(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ya&&la(ya,a)||(ya=a,0<(a=Ka(va,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function Sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ja={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},wa={},Na={};function ka(e){if(wa[e])return wa[e];if(!ja[e])return e;var t,n=ja[e];for(t in n)if(n.hasOwnProperty(t)&&t in Na)return wa[e]=n[t];return e}d&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);var _a=ka("animationend"),Ca=ka("animationiteration"),Pa=ka("animationstart"),Fa=ka("transitionend"),Aa=new Map,La="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(e,t){Aa.set(e,t),l(t,[e])}for(var Ra=0;Ra<La.length;Ra++){var Ia=La[Ra];Ma(Ia.toLowerCase(),"on"+(Ia[0].toUpperCase()+Ia.slice(1)))}Ma(_a,"onAnimationEnd"),Ma(Ca,"onAnimationIteration"),Ma(Pa,"onAnimationStart"),Ma("dblclick","onDoubleClick"),Ma("focusin","onFocus"),Ma("focusout","onBlur"),Ma(Fa,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),za=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Da(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,i,o,s,l,c){if(qe.apply(this,arguments),ze){if(!ze)throw Error(r(198));var d=De;ze=!1,De=null,Ee||(Ee=!0,Oe=d)}}(a,t,void 0,e),e.currentTarget=null}function Ea(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var o=a.length-1;0<=o;o--){var s=a[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==r&&i.isPropagationStopped())break e;Da(i,s,c),r=l}else for(o=0;o<a.length;o++){if(l=(s=a[o]).instance,c=s.currentTarget,s=s.listener,l!==r&&i.isPropagationStopped())break e;Da(i,s,c),r=l}}}if(Ee)throw e=Oe,Ee=!1,Oe=null,e}function Oa(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var a=e+"__bubble";n.has(a)||(Ga(t,e,2,!1),n.add(a))}function Ba(e,t,n){var a=0;t&&(a|=4),Ga(n,e,a,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Ha(e){if(!e[qa]){e[qa]=!0,o.forEach(function(t){"selectionchange"!==t&&(za.has(t)||Ba(t,!1,e),Ba(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qa]||(t[qa]=!0,Ba("selectionchange",!1,t))}}function Ga(e,t,n,a){switch($t(t)){case 1:var i=Ut;break;case 4:i=Kt;break;default:i=Vt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),a?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wa(e,t,n,a,i){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var o=a.tag;if(3===o||4===o){var s=a.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=a.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){a=r=o;continue e}s=s.parentNode}}a=a.return}Le(function(){var a=r,i=Se(n),o=[];e:{var s=Aa.get(e);if(void 0!==s){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Fn;break;case _a:case Ca:case Pa:l=vn;break;case Fa:l=An;break;case"scroll":l=hn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==s?s+"Capture":null:s;d=[];for(var p,m=a;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Me(m,h))&&d.push(Ua(m,f,p)))),u)break;m=m.return}0<d.length&&(s=new l(s,c,null,n,i),o.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[mi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Pn,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?s:xi(l),p=null==c?s:xi(c),(s=new d(f,m+"leave",l,n,i)).target=u,s.relatedTarget=p,f=null,yi(i)===a&&((d=new d(h,m+"enter",c,n,i)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Va(p))m++;for(p=0,f=h;f;f=Va(f))p++;for(;0<m-p;)d=Va(d),m--;for(;0<p-m;)h=Va(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Va(d),h=Va(h)}d=null}else d=null;null!==l&&Ya(o,s,l,d,!1),null!==c&&null!==u&&Ya(o,u,c,d,!0)}if("select"===(l=(s=a?xi(a):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=$n;else if(Wn(s))if(Qn)g=oa;else{g=ia;var v=aa}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ra);switch(g&&(g=g(e,a))?Un(o,g,n,i):(v&&v(e,s,a),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=a?xi(a):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(ga=v,va=a,ya=null);break;case"focusout":ya=va=ga=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,xa(o,n,i);break;case"selectionchange":if(fa)break;case"keydown":case"keyup":xa(o,n,i)}var y;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Hn=!0)),0<(v=Ka(a,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=qn(n))&&(b.data=y))),(y=zn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(On=!0,En);case"textInput":return(e=t.data)===En&&On?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!In&&Bn(e,t)?(e=en(),Xt=Jt=Qt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=Ka(a,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:a}),i.data=y))}Ea(o,t)})}function Ua(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ka(e,t){for(var n=t+"Capture",a=[];null!==e;){var i=e,r=i.stateNode;5===i.tag&&null!==r&&(i=r,null!=(r=Me(e,n))&&a.unshift(Ua(e,r,i)),null!=(r=Me(e,t))&&a.push(Ua(e,r,i))),e=e.return}return a}function Va(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ya(e,t,n,a,i){for(var r=t._reactName,o=[];null!==n&&n!==a;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===a)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Me(n,r))&&o.unshift(Ua(n,l,s)):i||null!=(l=Me(n,r))&&o.push(Ua(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Za=/\r\n?/g,$a=/\u0000|\uFFFD/g;function Qa(e){return("string"===typeof e?e:""+e).replace(Za,"\n").replace($a,"")}function Ja(e,t,n){if(t=Qa(t),Qa(e)!==t&&n)throw Error(r(425))}function Xa(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ai="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ri="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ri?function(e){return ri.resolve(null).then(e).catch(si)}:ai;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===a)return e.removeChild(i),void Ht(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,pi="__reactProps$"+ui,mi="__reactContainer$"+ui,fi="__reactEvents$"+ui,gi="__reactListeners$"+ui,vi="__reactHandles$"+ui;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function Si(e){return e[pi]||null}var ji=[],wi=-1;function Ni(e){return{current:e}}function ki(e){0>wi||(e.current=ji[wi],ji[wi]=null,wi--)}function _i(e,t){wi++,ji[wi]=e.current,e.current=t}var Ci={},Pi=Ni(Ci),Fi=Ni(!1),Ai=Ci;function Li(e,t){var n=e.type.contextTypes;if(!n)return Ci;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i,r={};for(i in n)r[i]=t[i];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){ki(Fi),ki(Pi)}function Ii(e,t,n){if(Pi.current!==Ci)throw Error(r(168));_i(Pi,t),_i(Fi,n)}function Ti(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var i in a=a.getChildContext())if(!(i in t))throw Error(r(108,G(e)||"Unknown",i));return D({},n,a)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=Pi.current,_i(Pi,e),_i(Fi,Fi.current),!0}function Di(e,t,n){var a=e.stateNode;if(!a)throw Error(r(169));n?(e=Ti(e,t,Ai),a.__reactInternalMemoizedMergedChildContext=e,ki(Fi),ki(Pi),_i(Pi,e)):ki(Fi),_i(Fi,n)}var Ei=null,Oi=!1,Bi=!1;function qi(e){null===Ei?Ei=[e]:Ei.push(e)}function Hi(){if(!Bi&&null!==Ei){Bi=!0;var e=0,t=bt;try{var n=Ei;for(bt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}Ei=null,Oi=!1}catch(i){throw null!==Ei&&(Ei=Ei.slice(e+1)),Ve(Xe,Hi),i}finally{bt=t,Bi=!1}}return null}var Gi=[],Wi=0,Ui=null,Ki=0,Vi=[],Yi=0,Zi=null,$i=1,Qi="";function Ji(e,t){Gi[Wi++]=Ki,Gi[Wi++]=Ui,Ui=e,Ki=t}function Xi(e,t,n){Vi[Yi++]=$i,Vi[Yi++]=Qi,Vi[Yi++]=Zi,Zi=e;var a=$i;e=Qi;var i=32-ot(a)-1;a&=~(1<<i),n+=1;var r=32-ot(t)+i;if(30<r){var o=i-i%5;r=(a&(1<<o)-1).toString(32),a>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|a,Qi=r+e}else $i=1<<r|n<<i|a,Qi=e}function er(e){null!==e.return&&(Ji(e,1),Xi(e,1,0))}function tr(e){for(;e===Ui;)Ui=Gi[--Wi],Gi[Wi]=null,Ki=Gi[--Wi],Gi[Wi]=null;for(;e===Zi;)Zi=Vi[--Yi],Vi[Yi]=null,Qi=Vi[--Yi],Vi[Yi]=null,$i=Vi[--Yi],Vi[Yi]=null}var nr=null,ar=null,ir=!1,rr=null;function or(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sr(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,ar=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,ar=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:$i,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,ar=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(ir){var t=ar;if(t){var n=t;if(!sr(e,t)){if(lr(e))throw Error(r(418));t=ci(n.nextSibling);var a=nr;t&&sr(e,t)?or(a,n):(e.flags=-4097&e.flags|2,ir=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,ir=!1,nr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function ur(e){if(e!==nr)return!1;if(!ir)return dr(e),ir=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ar)){if(lr(e))throw hr(),Error(r(418));for(;t;)or(e,t),t=ci(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ar=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ar=null}}else ar=nr?ci(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=ar;e;)e=ci(e.nextSibling)}function pr(){ar=nr=null,ir=!1}function mr(e){null===rr?rr=[e]:rr.push(e)}var fr=x.ReactCurrentBatchConfig;function gr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var a=n.stateNode}if(!a)throw Error(r(147,e));var i=a,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yr(e){return(0,e._init)(e._payload)}function br(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function o(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=zc(n,e.mode,a)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,a){var r=n.type;return r===w?u(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===M&&yr(r)===t.type)?((a=i(t,n.props)).ref=gr(e,t,n),a.return=e,a):((a=Rc(n.type,n.key,n.props,null,e.mode,a)).ref=gr(e,t,n),a.return=e,a)}function d(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,a)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,a,r){return null===t||7!==t.tag?((t=Ic(n,e.mode,a,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gr(e,null,t),n.return=e,n;case j:return(t=Dc(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||T(t))return(t=Ic(t,e.mode,n,null)).return=e,t;vr(e,t)}return null}function p(e,t,n,a){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?c(e,t,n,a):null;case j:return n.key===i?d(e,t,n,a):null;case M:return p(e,t,(i=n._init)(n._payload),a)}if(te(n)||T(n))return null!==i?null:u(e,t,n,a,null);vr(e,n)}return null}function m(e,t,n,a,i){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(n)||null,""+a,i);if("object"===typeof a&&null!==a){switch(a.$$typeof){case S:return c(t,e=e.get(null===a.key?n:a.key)||null,a,i);case j:return d(t,e=e.get(null===a.key?n:a.key)||null,a,i);case M:return m(e,t,n,(0,a._init)(a._payload),i)}if(te(a)||T(a))return u(t,e=e.get(n)||null,a,i,null);vr(t,a)}return null}function f(i,r,s,l){for(var c=null,d=null,u=r,f=r=0,g=null;null!==u&&f<s.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=p(i,u,s[f],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(i,u),r=o(v,r,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===s.length)return n(i,u),ir&&Ji(i,f),c;if(null===u){for(;f<s.length;f++)null!==(u=h(i,s[f],l))&&(r=o(u,r,f),null===d?c=u:d.sibling=u,d=u);return ir&&Ji(i,f),c}for(u=a(i,u);f<s.length;f++)null!==(g=m(u,i,f,s[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),r=o(g,r,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(i,e)}),ir&&Ji(i,f),c}function g(i,s,l,c){var d=T(l);if("function"!==typeof d)throw Error(r(150));if(null==(l=d.call(l)))throw Error(r(151));for(var u=d=null,f=s,g=s=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=p(i,f,y.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(i,f),s=o(b,s,g),null===u?d=b:u.sibling=b,u=b,f=v}if(y.done)return n(i,f),ir&&Ji(i,g),d;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,g),null===u?d=y:u.sibling=y,u=y);return ir&&Ji(i,g),d}for(f=a(i,f);!y.done;g++,y=l.next())null!==(y=m(f,i,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),s=o(y,s,g),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(i,e)}),ir&&Ji(i,g),d}return function e(a,r,o,l){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var c=o.key,d=r;null!==d;){if(d.key===c){if((c=o.type)===w){if(7===d.tag){n(a,d.sibling),(r=i(d,o.props.children)).return=a,a=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&yr(c)===d.type){n(a,d.sibling),(r=i(d,o.props)).ref=gr(a,d,o),r.return=a,a=r;break e}n(a,d);break}t(a,d),d=d.sibling}o.type===w?((r=Ic(o.props.children,a.mode,l,o.key)).return=a,a=r):((l=Rc(o.type,o.key,o.props,null,a.mode,l)).ref=gr(a,r,o),l.return=a,a=l)}return s(a);case j:e:{for(d=o.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(a,r.sibling),(r=i(r,o.children||[])).return=a,a=r;break e}n(a,r);break}t(a,r),r=r.sibling}(r=Dc(o,a.mode,l)).return=a,a=r}return s(a);case M:return e(a,r,(d=o._init)(o._payload),l)}if(te(o))return f(a,r,o,l);if(T(o))return g(a,r,o,l);vr(a,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==r&&6===r.tag?(n(a,r.sibling),(r=i(r,o)).return=a,a=r):(n(a,r),(r=zc(o,a.mode,l)).return=a,a=r),s(a)):n(a,r)}}var xr=br(!0),Sr=br(!1),jr=Ni(null),wr=null,Nr=null,kr=null;function _r(){kr=Nr=wr=null}function Cr(e){var t=jr.current;ki(jr),e._currentValue=t}function Pr(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Fr(e,t){wr=e,kr=Nr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ar(e){var t=e._currentValue;if(kr!==e)if(e={context:e,memoizedValue:t,next:null},null===Nr){if(null===wr)throw Error(r(308));Nr=e,wr.dependencies={lanes:0,firstContext:e}}else Nr=Nr.next=e;return t}var Lr=null;function Mr(e){null===Lr?Lr=[e]:Lr.push(e)}function Rr(e,t,n,a){var i=t.interleaved;return null===i?(n.next=n,Mr(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ir(e,a)}function Ir(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Tr=!1;function zr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Or(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Cl)){var i=a.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),a.pending=t,Ir(e,n)}return null===(i=a.interleaved)?(t.next=t,Mr(a)):(t.next=i.next,i.next=t),a.interleaved=t,Ir(e,n)}function Br(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}function qr(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var i=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?i=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?i=r=t:r=r.next=t}else i=r=t;return n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hr(e,t,n,a){var i=e.updateQueue;Tr=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?r=c:o.next=c,o=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=i.baseState;for(o=0,d=c=l=null,s=r;;){var h=s.lane,p=s.eventTime;if((a&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,f=s;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=D({},u,h);break e;case 2:Tr=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===r&&(i.shared.lanes=0);Tl|=o,e.lanes=o,e.memoizedState=u}}function Gr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],i=a.callback;if(null!==i){if(a.callback=null,a=n,"function"!==typeof i)throw Error(r(191,i));i.call(a)}}}var Wr={},Ur=Ni(Wr),Kr=Ni(Wr),Vr=Ni(Wr);function Yr(e){if(e===Wr)throw Error(r(174));return e}function Zr(e,t){switch(_i(Vr,t),_i(Kr,e),_i(Ur,Wr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Ur),_i(Ur,t)}function $r(){ki(Ur),ki(Kr),ki(Vr)}function Qr(e){Yr(Vr.current);var t=Yr(Ur.current),n=le(t,e.type);t!==n&&(_i(Kr,e),_i(Ur,n))}function Jr(e){Kr.current===e&&(ki(Ur),ki(Kr))}var Xr=Ni(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ao=x.ReactCurrentDispatcher,io=x.ReactCurrentBatchConfig,ro=0,oo=null,so=null,lo=null,co=!1,uo=!1,ho=0,po=0;function mo(){throw Error(r(321))}function fo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sa(e[n],t[n]))return!1;return!0}function go(e,t,n,a,i,o){if(ro=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?Xo:es,e=n(a,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(r(301));o+=1,lo=so=null,t.updateQueue=null,ao.current=ts,e=n(a,i)}while(uo)}if(ao.current=Jo,t=null!==so&&null!==so.next,ro=0,lo=so=oo=null,co=!1,t)throw Error(r(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(r(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function xo(e,t){return"function"===typeof t?t(e):t}function So(e){var t=bo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=so,i=a.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}a.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,a=a.baseState;var l=s=null,c=null,d=o;do{var u=d.lane;if((ro&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,s=a):c=c.next=h,oo.lanes|=u,Tl|=u}d=d.next}while(null!==d&&d!==o);null===c?s=a:c.next=l,sa(a,t.memoizedState)||(bs=!0),t.memoizedState=a,t.baseState=s,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Tl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function jo(e){var t=bo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sa(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function wo(){}function No(e,t){var n=oo,a=bo(),i=t(),o=!sa(a.memoizedState,i);if(o&&(a.memoizedState=i,bs=!0),a=a.queue,zo(Co.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Lo(9,_o.bind(null,n,a,i,t),void 0,null),null===Pl)throw Error(r(349));0!==(30&ro)||ko(n,t,i)}return i}function ko(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,a){t.value=n,t.getSnapshot=a,Po(t)&&Fo(e)}function Co(e,t,n){return n(function(){Po(t)&&Fo(e)})}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sa(e,n)}catch(a){return!0}}function Fo(e){var t=Ir(e,1);null!==t&&tc(t,e,1,-1)}function Ao(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Lo(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Mo(){return bo().memoizedState}function Ro(e,t,n,a){var i=yo();oo.flags|=e,i.memoizedState=Lo(1|t,n,void 0,void 0===a?null:a)}function Io(e,t,n,a){var i=bo();a=void 0===a?null:a;var r=void 0;if(null!==so){var o=so.memoizedState;if(r=o.destroy,null!==a&&fo(a,o.deps))return void(i.memoizedState=Lo(t,n,r,a))}oo.flags|=e,i.memoizedState=Lo(1|t,n,r,a)}function To(e,t){return Ro(8390656,8,e,t)}function zo(e,t){return Io(2048,8,e,t)}function Do(e,t){return Io(4,2,e,t)}function Eo(e,t){return Io(4,4,e,t)}function Oo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Io(4,4,Oo.bind(null,t,e),n)}function qo(){}function Ho(e,t){var n=bo();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&fo(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=bo();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&fo(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&ro)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sa(n,t)||(n=ft(),oo.lanes|=n,Tl|=n,e.baseState=!0),t)}function Uo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var a=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=a}}function Ko(){return bo().memoizedState}function Vo(e,t,n){var a=ec(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e))$o(t,n);else if(null!==(n=Rr(e,t,n,a))){tc(n,e,a,Xl()),Qo(n,t,a)}}function Yo(e,t,n){var a=ec(e),i={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))$o(t,i);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=r(o,n);if(i.hasEagerState=!0,i.eagerState=s,sa(s,o)){var l=t.interleaved;return null===l?(i.next=i,Mr(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rr(e,t,i,a))&&(tc(n,e,a,i=Xl()),Qo(n,t,a))}}function Zo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function $o(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qo(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Ar,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},Xo={readContext:Ar,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ar,useEffect:To,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Oo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=yo();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Vo.bind(null,oo,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ao,useDebugValue:qo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Uo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=oo,i=yo();if(ir){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Pl)throw Error(r(349));0!==(30&ro)||ko(a,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,To(Co.bind(null,a,o,e),[e]),a.flags|=2048,Lo(9,_o.bind(null,a,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Pl.identifierPrefix;if(ir){var n=Qi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ar,useCallback:Ho,useContext:Ar,useEffect:zo,useImperativeHandle:Bo,useInsertionEffect:Do,useLayoutEffect:Eo,useMemo:Go,useReducer:So,useRef:Mo,useState:function(){return So(xo)},useDebugValue:qo,useDeferredValue:function(e){return Wo(bo(),so.memoizedState,e)},useTransition:function(){return[So(xo)[0],bo().memoizedState]},useMutableSource:wo,useSyncExternalStore:No,useId:Ko,unstable_isNewReconciler:!1},ts={readContext:Ar,useCallback:Ho,useContext:Ar,useEffect:zo,useImperativeHandle:Bo,useInsertionEffect:Do,useLayoutEffect:Eo,useMemo:Go,useReducer:jo,useRef:Mo,useState:function(){return jo(xo)},useDebugValue:qo,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:Wo(t,so.memoizedState,e)},useTransition:function(){return[jo(xo)[0],bo().memoizedState]},useMutableSource:wo,useSyncExternalStore:No,useId:Ko,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function as(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Xl(),i=ec(e),r=Er(a,i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Or(e,r,i))&&(tc(t,e,i,a),Br(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Xl(),i=ec(e),r=Er(a,i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Or(e,r,i))&&(tc(t,e,i,a),Br(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xl(),a=ec(e),i=Er(n,a);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Or(e,i,a))&&(tc(t,e,a,n),Br(t,e,a))}};function rs(e,t,n,a,i,r,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!la(n,a)||!la(i,r))}function os(e,t,n){var a=!1,i=Ci,r=t.contextType;return"object"===typeof r&&null!==r?r=Ar(r):(i=Mi(t)?Ai:Pi.current,r=(a=null!==(a=t.contextTypes)&&void 0!==a)?Li(e,i):Ci),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),t}function ss(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,a){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},zr(e);var r=t.contextType;"object"===typeof r&&null!==r?i.context=Ar(r):(r=Mi(t)?Ai:Pi.current,i.context=Li(e,r)),i.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(as(e,t,r,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Hr(e,n,i,a),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",a=t;do{n+=q(a),a=a.return}while(a);var i=n}catch(r){i="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function us(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Er(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Gl||(Gl=!0,Wl=a),us(0,t)},n}function ms(e,t,n){(n=Er(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var i=t.value;n.payload=function(){return a(i)},n.callback=function(){us(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){us(0,t),"function"!==typeof a&&(null===Ul?Ul=new Set([this]):Ul.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new hs;var i=new Set;a.set(t,i)}else void 0===(i=a.get(t))&&(i=new Set,a.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,a,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Er(-1,1)).tag=2,Or(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,a){t.child=null===e?Sr(t,null,n,a):xr(t,e.child,n,a)}function Ss(e,t,n,a,i){n=n.render;var r=t.ref;return Fr(t,i),a=go(e,t,n,a,r,i),n=vo(),null===e||bs?(ir&&n&&er(t),t.flags|=1,xs(e,t,a,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function js(e,t,n,a,i){if(null===e){var r=n.type;return"function"!==typeof r||Lc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,a,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,ws(e,t,r,a,i))}if(r=e.child,0===(e.lanes&i)){var o=r.memoizedProps;if((n=null!==(n=n.compare)?n:la)(o,a)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Mc(r,a)).ref=t.ref,e.return=t,t.child=e}function ws(e,t,n,a,i){if(null!==e){var r=e.memoizedProps;if(la(r,a)&&e.ref===t.ref){if(bs=!1,t.pendingProps=a=r,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return _s(e,t,n,a,i)}function Ns(e,t,n){var a=t.pendingProps,i=a.children,r=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Ml,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Ml,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==r?r.baseLanes:n,_i(Ml,Ll),Ll|=a}else null!==r?(a=r.baseLanes|n,t.memoizedState=null):a=n,_i(Ml,Ll),Ll|=a;return xs(e,t,i,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,a,i){var r=Mi(n)?Ai:Pi.current;return r=Li(t,r),Fr(t,i),n=go(e,t,n,a,r,i),a=vo(),null===e||bs?(ir&&a&&er(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Cs(e,t,n,a,i){if(Mi(n)){var r=!0;zi(t)}else r=!1;if(Fr(t,i),null===t.stateNode)Hs(e,t),os(t,n,a),ls(t,n,a,i),a=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ar(c):c=Li(t,c=Mi(n)?Ai:Pi.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==a||l!==c)&&ss(t,o,a,c),Tr=!1;var h=t.memoizedState;o.state=h,Hr(t,a,o,i),l=t.memoizedState,s!==a||h!==l||Fi.current||Tr?("function"===typeof d&&(as(t,n,d,a),l=t.memoizedState),(s=Tr||rs(t,n,s,a,h,l,c))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),o.props=a,o.state=l,o.context=c,a=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,Dr(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),o.props=c,u=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ar(l):l=Li(t,l=Mi(n)?Ai:Pi.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==u||h!==l)&&ss(t,o,a,l),Tr=!1,h=t.memoizedState,o.state=h,Hr(t,a,o,i);var m=t.memoizedState;s!==u||h!==m||Fi.current||Tr?("function"===typeof p&&(as(t,n,p,a),m=t.memoizedState),(c=Tr||rs(t,n,c,a,h,m,l)||!1)?(d||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(a,m,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(a,m,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),o.props=a,o.state=m,o.context=l,a=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return Ps(e,t,n,a,r,i)}function Ps(e,t,n,a,i,r){ks(e,t);var o=0!==(128&t.flags);if(!a&&!o)return i&&Di(t,n,!1),Gs(e,t,r);a=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&o?(t.child=xr(t,e.child,null,r),t.child=xr(t,null,s,r)):xs(e,t,s,r),t.memoizedState=a.state,i&&Di(t,n,!0),t.child}function Fs(e){var t=e.stateNode;t.pendingContext?Ii(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ii(0,t.context,!1),Zr(e,t.containerInfo)}function As(e,t,n,a,i){return pr(),mr(i),t.flags|=256,xs(e,t,n,a),t.child}var Ls,Ms,Rs,Is={dehydrated:null,treeContext:null,retryLane:0};function Ts(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var a,i=t.pendingProps,o=Xr.current,s=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&o)),a?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_i(Xr,1&o),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Tc(l,i,0,null),e=Ic(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ts(n),t.memoizedState=Is,e):Ds(t,l));if(null!==(o=e.memoizedState)&&null!==(a=o.dehydrated))return function(e,t,n,a,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Es(e,t,s,a=ds(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=a.fallback,i=t.mode,a=Tc({mode:"visible",children:a.children},i,0,null),(o=Ic(o,i,s,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,0!==(1&t.mode)&&xr(t,e.child,null,s),t.child.memoizedState=Ts(s),t.memoizedState=Is,o);if(0===(1&t.mode))return Es(e,t,s,null);if("$!"===i.data){if(a=i.nextSibling&&i.nextSibling.dataset)var l=a.dgst;return a=l,Es(e,t,s,a=ds(o=Error(r(419)),a,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(a=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(a.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ir(e,i),tc(a,e,i,-1))}return mc(),Es(e,t,s,a=ds(Error(r(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ar=ci(i.nextSibling),nr=t,ir=!0,rr=null,null!==e&&(Vi[Yi++]=$i,Vi[Yi++]=Qi,Vi[Yi++]=Zi,$i=e.id,Qi=e.overflow,Zi=t),t=Ds(t,a.children),t.flags|=4096,t)}(e,t,l,i,a,o,n);if(s){s=i.fallback,l=t.mode,a=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Mc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==a?s=Mc(a,s):(s=Ic(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ts(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Is,i}return e=(s=e.child).sibling,i=Mc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ds(e,t){return(t=Tc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Es(e,t,n,a){return null!==a&&mr(a),xr(t,e.child,null,n),(e=Ds(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Os(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Pr(e.return,t,n)}function Bs(e,t,n,a,i){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=i)}function qs(e,t,n){var a=t.pendingProps,i=a.revealOrder,r=a.tail;if(xs(e,t,a.children,n),0!==(2&(a=Xr.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Os(e,n,t);else if(19===e.tag)Os(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(_i(Xr,a),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,r);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,r);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Us(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,a|=14680064&i.subtreeFlags,a|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Ks(e,t,n){var a=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Us(t),null;case 1:case 17:return Mi(t.type)&&Ri(),Us(t),null;case 3:return a=t.stateNode,$r(),ki(Fi),ki(Pi),no(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(rc(rr),rr=null))),Us(t),null;case 5:Jr(t);var i=Yr(Vr.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(r(166));return Us(t),null}if(e=Yr(Ur.current),ur(t)){a=t.stateNode,n=t.type;var o=t.memoizedProps;switch(a[hi]=t,a[pi]=o,e=0!==(1&t.mode),n){case"dialog":Oa("cancel",a),Oa("close",a);break;case"iframe":case"object":case"embed":Oa("load",a);break;case"video":case"audio":for(i=0;i<Ta.length;i++)Oa(Ta[i],a);break;case"source":Oa("error",a);break;case"img":case"image":case"link":Oa("error",a),Oa("load",a);break;case"details":Oa("toggle",a);break;case"input":$(a,o),Oa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},Oa("invalid",a);break;case"textarea":ie(a,o),Oa("invalid",a)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ja(a.textContent,c,e),i=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ja(a.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Oa("scroll",a)}switch(n){case"input":K(a),X(a,o,!0);break;case"textarea":K(a),oe(a);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(a.onclick=Xa)}a=i,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(n,{is:a.is}):(e=l.createElement(n),"select"===n&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=a,Ls(e,t),t.stateNode=e;e:{switch(l=be(n,a),n){case"dialog":Oa("cancel",e),Oa("close",e),i=a;break;case"iframe":case"object":case"embed":Oa("load",e),i=a;break;case"video":case"audio":for(i=0;i<Ta.length;i++)Oa(Ta[i],e);i=a;break;case"source":Oa("error",e),i=a;break;case"img":case"image":case"link":Oa("error",e),Oa("load",e),i=a;break;case"details":Oa("toggle",e),i=a;break;case"input":$(e,a),i=Z(e,a),Oa("invalid",e);break;case"option":default:i=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},i=D({},a,{value:void 0}),Oa("invalid",e);break;case"textarea":ie(e,a),i=ae(e,a),Oa("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?ge(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===o?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Oa("scroll",e):null!=d&&b(e,o,d,l))}switch(n){case"input":K(e),X(e,a,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=a.value&&e.setAttribute("value",""+W(a.value));break;case"select":e.multiple=!!a.multiple,null!=(o=a.value)?ne(e,!!a.multiple,o,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xa)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Us(t),null;case 6:if(e&&null!=t.stateNode)Rs(0,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(r(166));if(n=Yr(Vr.current),Yr(Ur.current),ur(t)){if(a=t.stateNode,n=t.memoizedProps,a[hi]=t,(o=a.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Ja(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ja(a.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[hi]=t,t.stateNode=a}return Us(t),null;case 13:if(ki(Xr),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ir&&null!==ar&&0!==(1&t.mode)&&0===(128&t.flags))hr(),pr(),t.flags|=98560,o=!1;else if(o=ur(t),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[hi]=t}else pr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Us(t),o=!1}else null!==rr&&(rc(rr),rr=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xr.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Us(t),null);case 4:return $r(),null===e&&Ha(t.stateNode.containerInfo),Us(t),null;case 10:return Cr(t.type._context),Us(t),null;case 19:if(ki(Xr),null===(o=t.memoizedState))return Us(t),null;if(a=0!==(128&t.flags),null===(l=o.rendering))if(a)Ws(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ws(o,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(Xr,1&Xr.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>ql&&(t.flags|=128,a=!0,Ws(o,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=eo(l))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ir)return Us(t),null}else 2*Qe()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,a=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=Xr.current,_i(Xr,a?1&n|2:1&n),t):(Us(t),null);case 22:case 23:return dc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Us(t),6&t.subtreeFlags&&(t.flags|=8192)):Us(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Vs(e,t){switch(tr(t),t.tag){case 1:return Mi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $r(),ki(Fi),ki(Pi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jr(t),null;case 13:if(ki(Xr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));pr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(Xr),null;case 4:return $r(),null;case 10:return Cr(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ls=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ms=function(e,t,n,a){var i=e.memoizedProps;if(i!==a){e=t.stateNode,Yr(Ur.current);var r,o=null;switch(n){case"input":i=Z(e,i),a=Z(e,a),o=[];break;case"select":i=D({},i,{value:void 0}),a=D({},a,{value:void 0}),o=[];break;case"textarea":i=ae(e,i),a=ae(e,a),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof a.onClick&&(e.onclick=Xa)}for(d in ye(n,a),n=null,i)if(!a.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(s.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in a){var c=a[d];if(l=null!=i?i[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(o||(o=[]),o.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(s.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Oa("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},Rs=function(e,t,n,a){n!==a&&(t.flags|=4)};var Ys=!1,Zs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){wc(e,t,a)}else n.current=null}function Xs(e,t,n){try{n()}catch(a){wc(e,t,a)}}var el=!1;function tl(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var i=a=a.next;do{if((i.tag&e)===e){var r=i.destroy;i.destroy=void 0,void 0!==r&&Xs(t,n,r)}i=i.next}while(i!==a)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[fi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function sl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xa));else if(4!==a&&null!==(e=e.child))for(sl(e,t,n),e=e.sibling;null!==e;)sl(e,t,n),e=e.sibling}function ll(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,dl=!1;function ul(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Zs||Js(n,t);case 6:var a=cl,i=dl;cl=null,ul(e,t,n),dl=i,null!==(cl=a)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(cl,n.stateNode));break;case 4:a=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,ul(e,t,n),cl=a,dl=i;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){i=a=a.next;do{var r=i,o=r.destroy;r=r.tag,void 0!==o&&(0!==(2&r)||0!==(4&r))&&Xs(n,t,o),i=i.next}while(i!==a)}ul(e,t,n);break;case 1:if(!Zs&&(Js(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(s){wc(n,t,s)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Zs=(a=Zs)||null!==n.memoizedState,ul(e,t,n),Zs=a):ul(e,t,n);break;default:ul(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach(function(t){var a=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var i=n[a];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(r(160));hl(o,s,i),cl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){wc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),gl(e),4&a){try{tl(3,e,e.return),nl(3,e)}catch(g){wc(e,e.return,g)}try{tl(5,e,e.return)}catch(g){wc(e,e.return,g)}}break;case 1:ml(t,e),gl(e),512&a&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),gl(e),512&a&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){wc(e,e.return,g)}}if(4&a&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(i,o),be(l,s);var d=be(l,o);for(s=0;s<c.length;s+=2){var u=c[s],h=c[s+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):b(i,u,h,d)}switch(l){case"input":J(i,o);break;case"textarea":re(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;null!=m?ne(i,!!o.multiple,m,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){wc(e,e.return,g)}}break;case 6:if(ml(t,e),gl(e),4&a){if(null===e.stateNode)throw Error(r(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){wc(e,e.return,g)}}break;case 3:if(ml(t,e),gl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){wc(e,e.return,g)}break;case 4:default:ml(t,e),gl(e);break;case 13:ml(t,e),gl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Qe())),4&a&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(d=Zs)||u,ml(t,e),Zs=d):ml(t,e),gl(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qs=e,u=e.child;null!==u;){for(h=Qs=u;null!==Qs;){switch(m=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:tl(4,p,p.return);break;case 1:Js(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){a=p,n=p.return;try{t=a,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){wc(a,n,g)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==m?(m.return=p,Qs=m):xl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",s))}catch(g){wc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){wc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),gl(e),4&a&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var a=n;break e}n=n.return}throw Error(r(160))}switch(a.tag){case 5:var i=a.stateNode;32&a.flags&&(he(i,""),a.flags&=-33),ll(e,ol(e),i);break;case 3:case 4:var o=a.stateNode.containerInfo;sl(e,ol(e),o);break;default:throw Error(r(161))}}catch(s){wc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qs=e,yl(e,t,n)}function yl(e,t,n){for(var a=0!==(1&e.mode);null!==Qs;){var i=Qs,r=i.child;if(22===i.tag&&a){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=Ys;var c=Zs;if(Ys=o,(Zs=l)&&!c)for(Qs=i;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Qs=l):Sl(i);for(;null!==r;)Qs=r,yl(r,t,n),r=r.sibling;Qs=i,Ys=s,Zs=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==r?(r.return=i,Qs=r):bl(e)}}function bl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||nl(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Zs)if(null===n)a.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);a.componentDidUpdate(i,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Gr(t,o,a);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Gr(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(r(163))}Zs||512&t.flags&&al(t)}catch(p){wc(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function xl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function Sl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){wc(t,n,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var i=t.return;try{a.componentDidMount()}catch(l){wc(t,i,l)}}var r=t.return;try{al(t)}catch(l){wc(t,r,l)}break;case 5:var o=t.return;try{al(t)}catch(l){wc(t,o,l)}}}catch(l){wc(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var jl,wl=Math.ceil,Nl=x.ReactCurrentDispatcher,kl=x.ReactCurrentOwner,_l=x.ReactCurrentBatchConfig,Cl=0,Pl=null,Fl=null,Al=0,Ll=0,Ml=Ni(0),Rl=0,Il=null,Tl=0,zl=0,Dl=0,El=null,Ol=null,Bl=0,ql=1/0,Hl=null,Gl=!1,Wl=null,Ul=null,Kl=!1,Vl=null,Yl=0,Zl=0,$l=null,Ql=-1,Jl=0;function Xl(){return 0!==(6&Cl)?Qe():-1!==Ql?Ql:Ql=Qe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==fr.transition?(0===Jl&&(Jl=ft()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function tc(e,t,n,a){if(50<Zl)throw Zl=0,$l=null,Error(r(185));vt(e,n,a),0!==(2&Cl)&&e===Pl||(e===Pl&&(0===(2&Cl)&&(zl|=n),4===Rl&&oc(e,Al)),nc(e,a),1===n&&0===Cl&&0===(1&t.mode)&&(ql=Qe()+500,Oi&&Hi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-ot(r),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&a)||(i[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),r&=~s}}(e,t);var a=ht(e,e===Pl?Al:0);if(0===a)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Oi=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi(function(){0===(6&Cl)&&Hi()}),n=null;else{switch(xt(a)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Ql=-1,Jl=0,0!==(6&Cl))throw Error(r(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var a=ht(e,e===Pl?Al:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=fc(e,a);else{t=a;var i=Cl;Cl|=2;var o=pc();for(Pl===e&&Al===t||(Hl=null,ql=Qe()+500,uc(e,t));;)try{vc();break}catch(l){hc(e,l)}_r(),Nl.current=o,Cl=i,null!==Fl?t=0:(Pl=null,Al=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(a=i,t=ic(e,i))),1===t)throw n=Il,uc(e,0),oc(e,a),nc(e,Qe()),n;if(6===t)oc(e,a);else{if(i=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var i=n[a],r=i.getSnapshot;i=i.value;try{if(!sa(r(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=fc(e,a))&&(0!==(o=mt(e))&&(a=o,t=ic(e,o))),1===t))throw n=Il,uc(e,0),oc(e,a),nc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:case 5:xc(e,Ol,Hl);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=Bl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&a)!==a){Xl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ai(xc.bind(null,e,Ol,Hl),t);break}xc(e,Ol,Hl);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,i=-1;0<a;){var s=31-ot(a);o=1<<s,(s=t[s])>i&&(i=s),a&=~o}if(a=i,10<(a=(120>(a=Qe()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*wl(a/1960))-a)){e.timeoutHandle=ai(xc.bind(null,e,Ol,Hl),a);break}xc(e,Ol,Hl);break;default:throw Error(r(329))}}}return nc(e,Qe()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=El;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Ol,Ol=n,null!==t&&rc(t)),e}function rc(e){null===Ol?Ol=e:Ol.push.apply(Ol,e)}function oc(e,t){for(t&=~Dl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),a=1<<n;e[n]=-1,t&=~a}}function sc(e){if(0!==(6&Cl))throw Error(r(327));Sc();var t=ht(e,0);if(0===(1&t))return nc(e,Qe()),null;var n=fc(e,t);if(0!==e.tag&&2===n){var a=mt(e);0!==a&&(t=a,n=ic(e,a))}if(1===n)throw n=Il,uc(e,0),oc(e,t),nc(e,Qe()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ol,Hl),nc(e,Qe()),null}function lc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(ql=Qe()+500,Oi&&Hi())}}function cc(e){null!==Vl&&0===Vl.tag&&0===(6&Cl)&&Sc();var t=Cl;Cl|=1;var n=_l.transition,a=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=a,_l.transition=n,0===(6&(Cl=t))&&Hi()}}function dc(){Ll=Ml.current,ki(Ml)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Fl)for(n=Fl.return;null!==n;){var a=n;switch(tr(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Ri();break;case 3:$r(),ki(Fi),ki(Pi),no();break;case 5:Jr(a);break;case 4:$r();break;case 13:case 19:ki(Xr);break;case 10:Cr(a.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Fl=e=Mc(e.current,null),Al=Ll=t,Rl=0,Il=null,Dl=zl=Tl=0,Ol=El=null,null!==Lr){for(t=0;t<Lr.length;t++)if(null!==(a=(n=Lr[t]).interleaved)){n.interleaved=null;var i=a.next,r=n.pending;if(null!==r){var o=r.next;r.next=i,a.next=o}n.pending=a}Lr=null}return e}function hc(e,t){for(;;){var n=Fl;try{if(_r(),ao.current=Jo,co){for(var a=oo.memoizedState;null!==a;){var i=a.queue;null!==i&&(i.pending=null),a=a.next}co=!1}if(ro=0,lo=so=oo=null,uo=!1,ho=0,kl.current=null,null===n||null===n.return){Rl=1,Il=t,Fl=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=gs(s);if(null!==m){m.flags&=-257,vs(m,s,l,0,t),1&m.mode&&fs(o,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fs(o,d,t),mc();break e}c=Error(r(426))}else if(ir&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mr(cs(c,l));break e}}o=c=cs(c,l),4!==Rl&&(Rl=2),null===El?El=[o]:El.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,qr(o,ps(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ul||!Ul.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,qr(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(x){t=x,Fl===n&&null!==n&&(Fl=n=n.return);continue}break}}function pc(){var e=Nl.current;return Nl.current=Jo,null===e?Jo:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||0===(268435455&Tl)&&0===(268435455&zl)||oc(Pl,Al)}function fc(e,t){var n=Cl;Cl|=2;var a=pc();for(Pl===e&&Al===t||(Hl=null,uc(e,t));;)try{gc();break}catch(i){hc(e,i)}if(_r(),Cl=n,Nl.current=a,null!==Fl)throw Error(r(261));return Pl=null,Al=0,Rl}function gc(){for(;null!==Fl;)yc(Fl)}function vc(){for(;null!==Fl&&!Ze();)yc(Fl)}function yc(e){var t=jl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?bc(e):Fl=t,kl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Ll)))return void(Fl=n)}else{if(null!==(n=Vs(n,t)))return n.flags&=32767,void(Fl=n);if(null===e)return Rl=6,void(Fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Fl=t);Fl=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var a=bt,i=_l.transition;try{_l.transition=null,bt=1,function(e,t,n,a){do{Sc()}while(null!==Vl);if(0!==(6&Cl))throw Error(r(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),r=1<<i;t[i]=0,a[i]=-1,e[i]=-1,n&=~r}}(e,o),e===Pl&&(Fl=Pl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Pc(tt,function(){return Sc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=_l.transition,_l.transition=null;var s=bt;bt=1;var l=Cl;Cl|=4,kl.current=null,function(e,t){if(ei=Wt,pa(e=ha())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var i=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var s=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==a&&3!==h.nodeType||(c=s+a),3===h.nodeType&&(s+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===i&&(l=s),p===o&&++u===a&&(c=s),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(r(163))}}catch(S){wc(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}f=el,el=!1}(e,n),fl(n,e),ma(ti),Wt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),$e(),Cl=l,bt=s,_l.transition=o}else e.current=n;if(Kl&&(Kl=!1,Vl=e,Yl=i),o=e.pendingLanes,0===o&&(Ul=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Qe()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],a(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===$l?Zl++:(Zl=0,$l=e):Zl=0,Hi()}(e,t,n,a)}finally{_l.transition=i,bt=a}return null}function Sc(){if(null!==Vl){var e=xt(Yl),t=_l.transition,n=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Vl)var a=!1;else{if(e=Vl,Vl=null,Yl=0,0!==(6&Cl))throw Error(r(331));var i=Cl;for(Cl|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qs=d;null!==Qs;){var u=Qs;switch(u.tag){case 0:case 11:case 15:tl(8,u,o)}var h=u.child;if(null!==h)h.return=u,Qs=h;else for(;null!==Qs;){var p=(u=Qs).sibling,m=u.return;if(il(u),u===d){Qs=null;break}if(null!==p){p.return=m,Qs=p;break}Qs=m}}}var f=o.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:tl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break e}Qs=o.return}}var b=e.current;for(Qs=b;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=b;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(j){wc(l,l.return,j)}if(l===s){Qs=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Qs=S;break e}Qs=l.return}}if(Cl=i,Hi(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(it,e)}catch(j){}a=!0}return a}finally{bt=n,_l.transition=t}}return!1}function jc(e,t,n){e=Or(e,t=ps(0,t=cs(n,t),1),1),t=Xl(),null!==e&&(vt(e,1,t),nc(e,t))}function wc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Ul||!Ul.has(a))){t=Or(t,e=ms(t,e=cs(n,e),1),1),e=Xl(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Nc(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=Xl(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Qe()-Bl?uc(e,0):Dl|=n),nc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=Xl();null!==(e=Ir(e,t))&&(vt(e,t,n),nc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(t),kc(e,n)}function Pc(e,t){return Ve(e,t)}function Fc(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,a){return new Fc(e,t,n,a)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,a,i,o){var s=2;if(a=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Ic(n.children,i,o,t);case N:s=8,i|=8;break;case k:return(e=Ac(12,n,t,2|i)).elementType=k,e.lanes=o,e;case F:return(e=Ac(13,n,t,i)).elementType=F,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Tc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case C:s=9;break e;case P:s=11;break e;case L:s=14;break e;case M:s=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Ac(s,n,t,i)).elementType=e,t.type=a,t.lanes=o,t}function Ic(e,t,n,a){return(e=Ac(7,e,a,t)).lanes=n,e}function Tc(e,t,n,a){return(e=Ac(22,e,a,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ec(e,t,n,a,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Oc(e,t,n,a,i,r,o,s,l){return e=new Ec(e,t,n,s,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Ac(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zr(r),e}function Bc(e){if(!e)return Ci;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Ti(e,n,t)}return t}function qc(e,t,n,a,i,r,o,s,l){return(e=Oc(n,a,!0,e,0,r,0,s,l)).context=Bc(null),n=e.current,(r=Er(a=Xl(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Or(n,r,i),e.current.lanes=i,vt(e,i,a),nc(e,a),e}function Hc(e,t,n,a){var i=t.current,r=Xl(),o=ec(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Er(r,o)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Or(i,t,o))&&(tc(e,i,o,r),Br(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Uc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fi.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Fs(t),pr();break;case 5:Qr(t);break;case 1:Mi(t.type)&&zi(t);break;case 4:Zr(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;_i(jr,a._currentValue),a._currentValue=i;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(_i(Xr,1&Xr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(_i(Xr,1&Xr.current),null!==(e=Gs(e,t,n))?e.sibling:null);_i(Xr,1&Xr.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(Xr,Xr.current),a)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n)}return Gs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ir&&0!==(1048576&t.flags)&&Xi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Hs(e,t),e=t.pendingProps;var i=Li(t,Pi.current);Fr(t,n),i=go(null,t,a,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(a)?(o=!0,zi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zr(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,a,e,n),t=Ps(null,t,a,!0,o,n)):(t.tag=0,ir&&o&&er(t),xs(null,t,i,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===L)return 14}return 2}(a),e=ns(a,e),i){case 0:t=_s(null,t,a,e,n);break e;case 1:t=Cs(null,t,a,e,n);break e;case 11:t=Ss(null,t,a,e,n);break e;case 14:t=js(null,t,a,ns(a.type,e),n);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,_s(e,t,a,i=t.elementType===a?i:ns(a,i),n);case 1:return a=t.type,i=t.pendingProps,Cs(e,t,a,i=t.elementType===a?i:ns(a,i),n);case 3:e:{if(Fs(t),null===e)throw Error(r(387));a=t.pendingProps,i=(o=t.memoizedState).element,Dr(e,t),Hr(t,a,null,n);var s=t.memoizedState;if(a=s.element,o.isDehydrated){if(o={element:a,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,a,n,i=cs(Error(r(423)),t));break e}if(a!==i){t=As(e,t,a,n,i=cs(Error(r(424)),t));break e}for(ar=ci(t.stateNode.containerInfo.firstChild),nr=t,ir=!0,rr=null,n=Sr(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),a===i){t=Gs(e,t,n);break e}xs(e,t,a,n)}t=t.child}return t;case 5:return Qr(t),null===e&&cr(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(a,i)?s=null:null!==o&&ni(a,o)&&(t.flags|=32),ks(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&cr(t),null;case 13:return zs(e,t,n);case 4:return Zr(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=xr(t,null,a,n):xs(e,t,a,n),t.child;case 11:return a=t.type,i=t.pendingProps,Ss(e,t,a,i=t.elementType===a?i:ns(a,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,_i(jr,a._currentValue),a._currentValue=s,null!==o)if(sa(o.value,s)){if(o.children===i.children&&!Fi.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===o.tag){(c=Er(-1,n&-n)).tag=2;var d=o.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Pr(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(r(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Pr(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,Fr(t,n),a=a(i=Ar(i)),t.flags|=1,xs(e,t,a,n),t.child;case 14:return i=ns(a=t.type,t.pendingProps),js(e,t,a,i=ns(a.type,i),n);case 15:return ws(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:ns(a,i),Hs(e,t),t.tag=1,Mi(a)?(e=!0,zi(t)):e=!1,Fr(t,n),os(t,a,i),ls(t,a,i,n),Ps(null,t,a,!0,e,n);case 19:return qs(e,t,n);case 22:return Ns(e,t,n)}throw Error(r(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Vc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,a,i){var r=n._reactRootContainer;if(r){var o=r;if("function"===typeof i){var s=i;i=function(){var e=Gc(o);s.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,a,i){if(i){if("function"===typeof a){var r=a;a=function(){var e=Gc(o);r.call(e)}}var o=qc(t,a,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[mi]=o.current,Ha(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof a){var s=a;a=function(){var e=Gc(l);s.call(e)}}var l=Oc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[mi]=l.current,Ha(8===e.nodeType?e.parentNode:e),cc(function(){Hc(t,l,n,a)}),l}(n,t,e,i,a);return Gc(o)}Yc.prototype.render=Vc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Hc(e,t,null,null)},Yc.prototype.unmount=Vc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Hc(null,e,null,null)}),t[mi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Dt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Qe()),0===(6&Cl)&&(ql=Qe()+500,Hi()))}break;case 13:cc(function(){var t=Ir(e,1);if(null!==t){var n=Xl();tc(t,e,1,n)}}),Uc(e,1)}},jt=function(e){if(13===e.tag){var t=Ir(e,134217728);if(null!==t)tc(t,e,134217728,Xl());Uc(e,134217728)}},wt=function(e){if(13===e.tag){var t=ec(e),n=Ir(e,t);if(null!==n)tc(n,e,t,Xl());Uc(e,t)}},Nt=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},je=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=Si(a);if(!i)throw Error(r(90));V(a),J(a,i)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=lc,Fe=cc;var Xc={usingClientEntryPoint:!1,Events:[bi,xi,Si,_e,Ce,lc]},ed={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},td={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ue(e))?null:e.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{it=nd.inject(td),rt=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(r(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(r(299));var n=!1,a="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Oc(e,1,!1,null,0,n,0,a,i),e[mi]=t.current,Ha(8===e.nodeType?e.parentNode:e),new Vc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ue(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(r(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(r(405));var a=null!=n&&n.hydratedSources||null,i=!1,o="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[mi]=t.current,Ha(e),a)for(e=0;e<a.length;e++)i=(i=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(r(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(r(40));return!!e._reactRootContainer&&(cc(function(){Jc(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!$c(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Jc(e,t,n,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},4202(e,t){var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,f(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray,j=Object.prototype.hasOwnProperty,w={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,a){var i,r={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)j.call(t,i)&&!N.hasOwnProperty(i)&&(r[i]=t[i]);var l=arguments.length-2;if(1===l)r.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:r,_owner:w.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function F(e,t,i,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case a:l=!0}}if(l)return o=o(l=e),e=""===r?"."+P(l,0):r,S(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),F(o,t,i,"",function(e){return e})):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",S(e))for(var c=0;c<e.length;c++){var d=r+P(s=e[c],c);l+=F(s,t,i,d,o)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(s=e.next()).done;)l+=F(s=s.value,t,i,d=r+P(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var a=[],i=0;return F(e,a,"","",function(e){return t.call(n,e,i++)}),a}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},R={transition:null},I={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};function T(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=T,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),r=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:r,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=T,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},4391(e,t,n){var a=n(7950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},4980(e,t,n){n.d(t,{A:()=>r});var a=n(2284);function i(e){var t=function(e,t){if("object"!=(0,a.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,a.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,a.A)(t)?t:t+""}function r(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5043(e,t,n){e.exports=n(4202)},7234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,i=e[a];if(!(0<r(i,t)))break e;e[a]=t,e[n]=i,n=a}}function a(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,i=e.length,o=i>>>1;a<o;){var s=2*(a+1)-1,l=e[s],c=s+1,d=e[c];if(0>r(l,n))c<i&&0>r(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[s]=n,a=s);else{if(!(c<i&&0>r(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=a(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=a(d)}}function S(e){if(g=!1,x(e),!f)if(null!==a(c))f=!0,R(j);else{var t=a(d);null!==t&&I(S,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,y(_),_=-1),m=!0;var r=p;try{for(x(n),h=a(c);null!==h&&(!(h.expirationTime>n)||e&&!F());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===a(c)&&i(c),x(n)}else i(c);h=a(c)}if(null!==h)var l=!0;else{var u=a(d);null!==u&&I(S,u.startTime-n),l=!1}return l}finally{h=null,p=r,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,N=!1,k=null,_=-1,C=5,P=-1;function F(){return!(t.unstable_now()-P<C)}function A(){if(null!==k){var e=t.unstable_now();P=e;var n=!0;try{n=k(!0,e)}finally{n?w():(N=!1,k=null)}}else N=!1}if("function"===typeof b)w=function(){b(A)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,M=L.port2;L.port1.onmessage=A,w=function(){M.postMessage(null)}}else w=function(){v(A,0)};function R(e){k=e,N||(N=!0,w())}function I(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,R(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,r){var o=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:r,expirationTime:s=r+s,sortIndex:-1},r>o?(e.sortIndex=r,n(d,e),null===a(c)&&e===a(d)&&(g?(y(_),_=-1):g=!0,I(S,r-o))):(e.sortIndex=s,n(c,e),f||m||(f=!0,R(j))),e},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8143(e,t,n){var a=n(5043),i=n(4391),r=n(4980);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=["color","size","strokeWidth","absoluteStrokeWidth","children"];var d=(e,t)=>{const n=(0,a.forwardRef)((n,i)=>{let{color:r="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:u,children:h}=n,p=function(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,c);return(0,a.createElement)("svg",s(s({ref:i},l),{},{width:o,height:o,stroke:r,strokeWidth:u?24*Number(d)/Number(o):d,className:"lucide lucide-".concat((m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...(Array.isArray(h)?h:[h])||[]]);var m});return n.displayName="".concat(e),n};const u=d("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),h=d("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),p=d("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),m=d("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),f=d("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),g=d("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),v=d("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),y=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b=d("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),x=d("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),S=d("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),j=d("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),w=d("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),N=d("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),k=d("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),_=d("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),C=d("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),P=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),F=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),A=d("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),L=d("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),M=d("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);const R=new class{constructor(){this.baseUrl="https://website.not-4.sale/api"}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(this.baseUrl).concat(e),a=s(s({},{headers:{"Content-Type":"application/json"}}),t);try{const e=await fetch(n,a);if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.error||"HTTP error ".concat(e.status))}return await e.json()}catch(i){throw console.error("API Error [".concat(e,"]:"),i),i}}async getProjects(){return this.request("/projects.php")}async getProject(e){return this.request("/projects.php?id=".concat(encodeURIComponent(e)))}async createProject(e){return this.request("/projects.php",{method:"POST",body:JSON.stringify(e)})}async updateProject(e,t){return this.request("/projects.php?id=".concat(encodeURIComponent(e),"&action=update"),{method:"POST",body:JSON.stringify(t)})}async deleteProject(e){return this.request("/projects.php?id=".concat(encodeURIComponent(e),"&action=delete"),{method:"POST",body:JSON.stringify({})})}async getState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?"/state.php?key=".concat(encodeURIComponent(e)):"/state.php";return this.request(t)}async setState(e,t){return this.request("/state.php",{method:"POST",body:JSON.stringify({key:e,value:t})})}async deleteState(e){return this.request("/state.php?key=".concat(encodeURIComponent(e),"&action=delete"),{method:"POST",body:JSON.stringify({})})}async setupDatabase(){return this.request("/setup.php")}async healthCheck(){try{return await this.getState("_health"),{status:"ok",database:"connected"}}catch(e){return{status:"error",message:e.message}}}},I=R;var T=n(579);const z={portfolioContext:{principalFirstName:"",principalLastName:"",principalEmail:"",principalPhone:"",secondaryFirstName:"",secondaryLastName:"",secondaryEmail:"",familyOfficeContact:"",familyOfficeAuthorityLevel:null,authorityLevelConfirmed:!1,domainDelegationNotes:"",currentPropertyCount:null,primaryResidences:[],thisPropertyRole:"",investmentHorizon:"",exitStrategy:"",lifeStage:"",decisionTimeline:""},familyHousehold:{familyMembers:[],pets:"",petGroomingRoom:!1,petDogRun:!1,staffingLevel:"",liveInStaff:null,staffAccommodationRequired:!1,multigenerationalNeeds:!1,anticipatedFamilyChanges:""},projectParameters:{projectCity:"",projectCountry:"",specificAddress:"",propertyType:"",targetGSF:null,bedroomCount:null,bathroomCount:null,floors:null,hasBasement:!1,sfCapConstraint:null,timeline:"",complexityFactors:[],architecturalIntegration:"",localKnowledgeCritical:"",levelsAboveArrival:1,levelsBelowArrival:0,hasGuestHouse:!1,hasPoolHouse:!1},budgetFramework:{totalProjectBudget:null,interiorBudget:null,perSFExpectation:null,budgetFlexibility:"",architectFeeStructure:"",interiorDesignerFeeStructure:"",interiorQualityTier:"",artBudgetSeparate:!1,artBudgetAmount:null},designIdentity:{axisContemporaryTraditional:5,axisMinimalLayered:5,axisWarmCool:5,axisOrganicGeometric:5,axisRefinedEclectic:5,axisArchMinimalOrnate:5,axisArchRegionalInternational:5,inspirationImages:[],aspirationKeywords:[],antiInspiration:"",benchmarkProperties:[],architectureStyleTags:[],interiorStyleTags:[],materialAffinities:[],materialAversions:[],colorPreferences:"",exteriorMaterialPreferences:[],massingPreference:"",roofFormPreference:"",structuralAmbition:"",clientType:"",clientBaseName:"",principalName:"",secondaryName:"",principalTasteResults:null,secondaryTasteResults:null},lifestyleLiving:{dailyRoutinesSummary:"",workFromHome:"",wfhPeopleCount:null,hobbies:[],hobbyDetails:"",entertainingFrequency:"",typicalGuestCount:"",entertainingStyle:"",wellnessPriorities:[],lateNightMediaUse:!1,privacyLevelRequired:3,noiseSensitivity:3,indoorOutdoorLiving:3},spaceRequirements:{mustHaveSpaces:[],niceToHaveSpaces:[],currentSpacePainPoints:"",viewPriorityRooms:[],adjacencyRequirements:"",storageNeeds:"",accessibilityRequirements:"",technologyRequirements:[],sustainabilityPriorities:[],wantsSeparateFamilyRoom:!1,wantsSecondFormalLiving:!1,wantsBar:!1,wantsBunkRoom:!1,wantsBreakfastNook:!1},culturalContext:{culturalBackground:"",regionalSensibilities:[],religiousObservances:"",entertainingCulturalNorms:"",crossCulturalRequirements:"",languagesPreferred:[]},workingPreferences:{communicationStyle:"",decisionCadence:"",collaborationStyle:"",principalInvolvementRequired:"",presentationFormat:"",previousDesignerExperience:"",redFlagsToAvoid:"",existingIndustryConnections:"",architectCelebrityPreference:3,interiorDesignerCelebrityPreference:3,caRequirement:"",contractorRelationshipPreference:"",earlyContractorInvolvement:!1},advisorAssessed:{visionFlexibilityIndex:null,profileCompleteness:0,dataConfidenceScore:null,divergenceLog:[],sessionNotes:""}},D={brief:null,completedAt:null,settings:{targetSF:15e3,deltaPct:10,circulationPct:.14,lockToTarget:!0,programTier:"15k",hasBasement:!1},selections:{},mvpChecklistState:{},mvpAdjacencyDecisions:{},mvpAdjacencyConfig:{tier:null,decisionAnswers:{},questionnaireCompletedAt:null,validationRunAt:null,validationResults:null}},E={moduleChecklistState:{},adjacencyDecisions:{},briefGenerated:null,validationResults:null,completedAt:null},O=()=>({id:null,clientData:{projectName:"",projectCode:"",createdAt:null,lastUpdated:null},kycData:{principal:JSON.parse(JSON.stringify(z)),secondary:JSON.parse(JSON.stringify(z)),advisor:JSON.parse(JSON.stringify(z))},fyiData:JSON.parse(JSON.stringify(D)),mvpData:JSON.parse(JSON.stringify(E)),activeRespondent:"principal"}),B=(0,a.createContext)(null),q=["designIdentity","lifestyleLiving","spaceRequirements"],H={portfolioContext:["principalFirstName","principalLastName","thisPropertyRole"],familyHousehold:[],projectParameters:["projectCity","projectCountry","propertyType","targetGSF","bedroomCount"],budgetFramework:["totalProjectBudget"],designIdentity:[],lifestyleLiving:[],spaceRequirements:[],culturalContext:[],workingPreferences:[]},G=e=>{let{children:t}=e;const[n,i]=(0,a.useState)(!0),[r,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[m,f]=(0,a.useState)([]),[g,v]=(0,a.useState)(null),[y,b]=(0,a.useState)(O),[x,S]=(0,a.useState)("principal"),[j,w]=(0,a.useState)(0),[N,k]=(0,a.useState)("mvp"),_=y.clientData,C=y.kycData,P=y.fyiData,F=y.mvpData||E;(0,a.useEffect)(()=>{let e=!0;return(async()=>{i(!0),console.log("[APP] Loading data from server...");try{const i=await I.getProjects();if(!e)return;const r=(Array.isArray(i)?i:[]).map(e=>({id:e.id,name:e.project_name||e.name||"Untitled",code:e.project_code||e.code,createdAt:e.created_at||e.createdAt,lastUpdated:e.updated_at||e.lastUpdated}));f(r),console.log("[APP] Loaded projects:",(null===r||void 0===r?void 0:r.length)||0);let o={};try{o=await I.getState()||{}}catch(a){console.warn("[APP] Could not load state:",a)}if(!e)return;o.disclosureTier&&k(o.disclosureTier);const l=o.activeProjectId;if(l&&"null"!==l&&"undefined"!==l)try{const a=await I.getProject(l);if(!e)return;var t,n;if(a)console.log("[APP] Loaded project:",l),console.log("[APP] FYI selections:",null===(t=a.fyiData)||void 0===t?void 0:t.selections),console.log("[APP] MVP checklist:",null===(n=a.fyiData)||void 0===n?void 0:n.mvpChecklistState),v(l),b(s(s(s({},O()),a),{},{fyiData:s(s({},D),a.fyiData),mvpData:s(s({},E),a.mvpData)})),S(a.activeRespondent||"principal")}catch(a){console.error("[APP] Failed to load project:",a)}}catch(r){console.error("[APP] Failed to load from server:",r)}finally{e&&(i(!1),console.log("[APP] Initial load complete"))}})(),()=>{e=!1}},[]);const A=(0,a.useCallback)(async()=>{var e,t;if(!g)return console.warn("[APP] No project to save"),!1;o(!0),u(null);const n=s(s({},y),{},{id:g,activeRespondent:x});console.log("[APP] Saving to server..."),console.log("[APP] FYI selections being saved:",null===(e=n.fyiData)||void 0===e?void 0:e.selections),console.log("[APP] MVP checklist being saved:",null===(t=n.fyiData)||void 0===t?void 0:t.mvpChecklistState);try{return await I.updateProject(g,n),c(new Date),p(!1),console.log("[APP] Save successful!"),!0}catch(a){return console.error("[APP] Save failed:",a),u(a.message||"Save failed"),!1}finally{o(!1)}},[g,y,x]),L=(0,a.useCallback)(async e=>{if(e!==g){if(i(!0),p(!1),!e)return v(null),b(O()),void i(!1);try{const n=await I.getProject(e);var t;if(n)console.log("[APP] Switched to project:",e),console.log("[APP] MVP data:",n.mvpData),console.log("[APP] MVP checklist:",null===(t=n.fyiData)||void 0===t?void 0:t.mvpChecklistState),v(e),b(s(s(s({},O()),n),{},{fyiData:s(s({},D),n.fyiData),mvpData:s(s({},E),n.mvpData)})),S(n.activeRespondent||"principal"),await I.setState("activeProjectId",e)}catch(n){console.error("[APP] Failed to load project:",n)}finally{i(!1)}}},[g]),M=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t="proj_"+Date.now().toString(36)+Math.random().toString(36).substr(2,5),n=(new Date).toISOString(),a=s(s({},O()),{},{id:t,clientData:{projectName:e||"Untitled Project",projectCode:t.substring(5,10).toUpperCase(),createdAt:n,lastUpdated:n}});try{return await I.createProject(a),await I.setState("activeProjectId",t),f(a=>[...a,{id:t,name:e||"Untitled Project",createdAt:n}]),v(t),b(a),S("principal"),p(!1),console.log("[APP] Created project:",t),t}catch(i){throw console.error("[APP] Failed to create project:",i),i}},[]),R=(0,a.useCallback)(async e=>{try{if(await I.deleteProject(e),f(t=>t.filter(t=>t.id!==e)),e===g){const t=m.filter(t=>t.id!==e);t.length>0?await L(t[0].id):(v(null),b(O()),await I.deleteState("activeProjectId"))}}catch(t){console.error("[APP] Failed to delete project:",t)}},[g,m,L]),z=(0,a.useCallback)(()=>{p(!0)},[]),G=(0,a.useCallback)(e=>{b(t=>s(s({},t),{},{clientData:s(s(s({},t.clientData),e),{},{lastUpdated:(new Date).toISOString()})})),z()},[z]),W=(0,a.useCallback)((e,t,n)=>{console.log("[APP] updateKYCData:",e,t,n),b(a=>{var i;return s(s({},a),{},{kycData:s(s({},a.kycData),{},{[e]:s(s({},a.kycData[e]),{},{[t]:s(s({},null===(i=a.kycData[e])||void 0===i?void 0:i[t]),n)})})})}),z()},[z]),U=(0,a.useCallback)(e=>{console.log("[APP] updateFYIData:",e),b(t=>{const n=s({},t.fyiData);return void 0!==e.selections&&(n.selections=s(s({},t.fyiData.selections),e.selections)),void 0!==e.settings&&(n.settings=s(s({},t.fyiData.settings),e.settings)),Object.keys(e).forEach(t=>{"selections"!==t&&"settings"!==t&&(n[t]=e[t])}),s(s({},t),{},{fyiData:n})}),z()},[z]),K=(0,a.useCallback)((e,t)=>{console.log("[APP] updateFYISelection:",e,t),b(n=>s(s({},n),{},{fyiData:s(s({},n.fyiData),{},{selections:s(s({},n.fyiData.selections),{},{[e]:s(s({},n.fyiData.selections[e]),t)})})})),z()},[z]),V=(0,a.useCallback)(e=>{console.log("[APP] updateFYISettings:",e),b(t=>s(s({},t),{},{fyiData:s(s({},t.fyiData),{},{settings:s(s({},t.fyiData.settings),e)})})),z()},[z]),Y=(0,a.useCallback)(e=>{console.log("[APP] initializeFYISelections with",Object.keys(e).length,"spaces"),b(t=>s(s({},t),{},{fyiData:s(s({},t.fyiData),{},{selections:e})})),z()},[z]),Z=(0,a.useCallback)(e=>{console.log("[APP] updateMVPData:",e),b(t=>{const n=s({},t.fyiData);var a,i;void 0!==e.mvpChecklistState&&(n.mvpChecklistState=s(s({},null===(a=t.fyiData)||void 0===a?void 0:a.mvpChecklistState),e.mvpChecklistState));void 0!==e.mvpAdjacencyDecisions&&(n.mvpAdjacencyDecisions=s(s({},null===(i=t.fyiData)||void 0===i?void 0:i.mvpAdjacencyDecisions),e.mvpAdjacencyDecisions));return s(s({},t),{},{fyiData:n})}),z()},[z]),$=(0,a.useCallback)((e,t)=>{console.log("[APP] updateMVPChecklistItem:",e,t),b(n=>{var a;return s(s({},n),{},{fyiData:s(s({},n.fyiData),{},{mvpChecklistState:s(s({},null===(a=n.fyiData)||void 0===a?void 0:a.mvpChecklistState),{},{[e]:t})})})}),z()},[z]),Q=(0,a.useCallback)(e=>{console.log("[APP] updateMVPAdjacencyConfig:",e),b(t=>{var n,a,i;return s(s({},t),{},{fyiData:s(s({},t.fyiData),{},{mvpAdjacencyConfig:s(s(s({},null===(n=t.fyiData)||void 0===n?void 0:n.mvpAdjacencyConfig),e),e.decisionAnswers&&{decisionAnswers:s(s({},null===(a=t.fyiData)||void 0===a||null===(i=a.mvpAdjacencyConfig)||void 0===i?void 0:i.decisionAnswers),e.decisionAnswers)})})})}),z()},[z]),J=(0,a.useCallback)((e,t)=>{console.log("[APP] updateMVPDecisionAnswer:",e,t),b(n=>{var a,i,r;return s(s({},n),{},{fyiData:s(s({},n.fyiData),{},{mvpAdjacencyConfig:s(s({},null===(a=n.fyiData)||void 0===a?void 0:a.mvpAdjacencyConfig),{},{decisionAnswers:s(s({},null===(i=n.fyiData)||void 0===i||null===(r=i.mvpAdjacencyConfig)||void 0===r?void 0:r.decisionAnswers),{},{[e]:t})})})})}),z()},[z]),X=(0,a.useCallback)((e,t)=>{var n;const a=null===(n=C[e])||void 0===n?void 0:n[t];if(!a)return"empty";if("designIdentity"===t){var i,r;const t="principal"===e?"principalTasteResults":"secondaryTasteResults",n=null===(i=C.principal)||void 0===i?void 0:i.designIdentity;return null!==n&&void 0!==n&&null!==(r=n[t])&&void 0!==r&&r.completedAt?"complete":"empty"}const o=H[t]||[];if(0===o.length){const e=Object.values(a).some(e=>""!==e&&null!==e&&void 0!==e&&!(Array.isArray(e)&&0===e.length)&&3!==e&&5!==e);return e?"complete":"empty"}const s=o.filter(e=>{const t=a[e];return""!==t&&null!==t&&void 0!==t&&!(Array.isArray(t)&&0===t.length)});return 0===s.length?"empty":s.length===o.length?"complete":"partial"},[C]),ee=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"principal";const t=C[e];if(!t)return 0;let n=0,a=0;return("secondary"===e?q:Object.keys(H)).forEach(i=>{const r=H[i]||[],o=t[i];if(o){if("designIdentity"===i){var s,l;n+=1;const t="principal"===e?"principalTasteResults":"secondaryTasteResults",i=null===(s=C.principal)||void 0===s?void 0:s.designIdentity;return void(null!==i&&void 0!==i&&null!==(l=i[t])&&void 0!==l&&l.completedAt&&(a+=1))}if(r.length>0)n+=r.length,r.forEach(e=>{const t=o[e];""===t||null===t||void 0===t||Array.isArray(t)&&0===t.length||a++});else{const e=Object.values(o).some(e=>""!==e&&null!==e&&void 0!==e&&!(Array.isArray(e)&&0===e.length)&&3!==e&&5!==e&&"moderate"!==e);n+=1,e&&(a+=1)}}}),n>0?Math.round(a/n*100):0},[C]),te=(0,a.useCallback)(()=>{g&&(b(e=>s(s({},O()),{},{id:e.id,clientData:e.clientData})),z())},[g,z]),ne=(0,a.useCallback)(async()=>{for(const t of m)try{await I.deleteProject(t.id)}catch(e){console.error("[APP] Failed to delete:",e)}f([]),v(null),b(O()),p(!1)},[m]),ae={isLoading:n,isSaving:r,lastSaved:l,saveError:d,hasUnsavedChanges:h,saveNow:A,projects:m,activeProjectId:g,setActiveProjectId:L,createProject:M,deleteProject:R,clientData:_,kycData:C,fyiData:P,mvpData:F,updateClientData:G,updateKYCData:W,updateFYIData:U,updateFYISelection:K,updateFYISettings:V,initializeFYISelections:Y,updateMVPData:Z,updateMVPChecklistItem:$,updateMVPAdjacencyConfig:Q,updateMVPDecisionAnswer:J,activeRespondent:x,setActiveRespondent:S,currentKYCSection:j,setCurrentKYCSection:w,disclosureTier:N,setDisclosureTier:k,calculateCompleteness:ee,getSectionCompletionStatus:X,resetCurrentProject:te,resetAllData:ne};return(0,T.jsx)(B.Provider,{value:ae,children:t})},W=()=>{const e=(0,a.useContext)(B);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},U=B,K=d("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),V=d("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Y=d("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Z=d("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),$="#1e3a5f",Q="#c9a227",J="#fafaf8",X="#ffffff",ee="#e5e5e0",te="#1a1a1a",ne="#6b6b6b",ae="#2e7d32",ie="#f57c00",re="#d32f2f",oe="#0d9488",se="#805ad5";function le(e){let{title:t,children:n,defaultOpen:i=!1}=e;const[r,o]=(0,a.useState)(i);return(0,T.jsxs)("div",{className:"doc-expandable",children:[(0,T.jsxs)("button",{className:"doc-expandable-header",onClick:()=>o(!r),children:[r?(0,T.jsx)(C,{size:18}):(0,T.jsx)(x,{size:18}),(0,T.jsx)("span",{children:t})]}),r&&(0,T.jsx)("div",{className:"doc-expandable-content",children:n})]})}function ce(e){let{status:t}=e;const n={active:{label:"Active",color:ae,bg:"#e8f5e9"},coming:{label:"Coming Soon",color:ie,bg:"#fff3e0"},placeholder:{label:"Planned",color:ne,bg:"#f5f5f5"}},a=n[t]||n.placeholder;return(0,T.jsx)("span",{className:"doc-module-status",style:{color:a.color,backgroundColor:a.bg,padding:"2px 8px",borderRadius:"4px",fontSize:"0.6875rem",fontWeight:600,textTransform:"uppercase"},children:a.label})}function de(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Welcome to N4S"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"N4S (Not-for-Sale) is a comprehensive luxury residential advisory platform designed for ultra-high-net-worth families developing custom homes. Unlike traditional real estate tools focused on transactions, N4S captures and validates the unique requirements of bespoke mansions\u2014homes that will never hit the market because they're built specifically for one family's lifestyle."}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Think of N4S as your pre-design concierge. We ensure that when you engage architects, designers, and builders, everyone starts with a validated brief that reflects how you actually live\u2014not assumptions based on square footage and bedroom count."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"The N4S Value Proposition"}),(0,T.jsxs)("ul",{className:"doc-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Capture Lifestyle, Not Just Requirements"}),(0,T.jsx)("p",{children:"Move beyond room lists to understand how your family actually lives, entertains, and operates day-to-day"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Validate Before You Design"}),(0,T.jsx)("p",{children:"Catch conflicts between spaces before they become expensive redesigns\u2014like discovering your guest suite shares a wall with your home theater"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Benchmark Against Best Practices"}),(0,T.jsx)("p",{children:"Compare your program against tier-appropriate benchmarks from luxury residences worldwide"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Brief Your Team Consistently"}),(0,T.jsx)("p",{children:"Generate validated briefs that give every consultant\u2014architect, designer, landscape\u2014the same foundation"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card doc-card--highlight",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"The N4S Journey"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"N4S guides you through five interconnected modules, each building on the previous to create a comprehensive, validated mansion program. The journey typically takes 2-3 weeks of client engagement, but the insights shape years of design and construction."}),(0,T.jsxs)("div",{className:"doc-journey-preview",children:[(0,T.jsxs)("div",{className:"doc-journey-step",children:[(0,T.jsx)("div",{className:"doc-journey-badge",style:{background:$},children:"1"}),(0,T.jsx)("span",{children:"KYC"})]}),(0,T.jsx)(A,{size:16,className:"doc-journey-arrow"}),(0,T.jsxs)("div",{className:"doc-journey-step",children:[(0,T.jsx)("div",{className:"doc-journey-badge",style:{background:oe},children:"2"}),(0,T.jsx)("span",{children:"FYI"})]}),(0,T.jsx)(A,{size:16,className:"doc-journey-arrow"}),(0,T.jsxs)("div",{className:"doc-journey-step",children:[(0,T.jsx)("div",{className:"doc-journey-badge",style:{background:ae},children:"3"}),(0,T.jsx)("span",{children:"MVP"})]}),(0,T.jsx)(A,{size:16,className:"doc-journey-arrow"}),(0,T.jsxs)("div",{className:"doc-journey-step",children:[(0,T.jsx)("div",{className:"doc-journey-badge",style:{background:se},children:"4"}),(0,T.jsx)("span",{children:"KYM"})]}),(0,T.jsx)(A,{size:16,className:"doc-journey-arrow"}),(0,T.jsxs)("div",{className:"doc-journey-step",children:[(0,T.jsx)("div",{className:"doc-journey-badge",style:{background:Q},children:"5"}),(0,T.jsx)("span",{children:"VMX"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Who Uses N4S?"}),(0,T.jsxs)("div",{className:"doc-user-grid",children:[(0,T.jsxs)("div",{className:"doc-user-type",children:[(0,T.jsx)("strong",{children:"Families"}),(0,T.jsx)("p",{children:"Capture your lifestyle requirements and design preferences in a structured format that architects and designers can actually use."})]}),(0,T.jsxs)("div",{className:"doc-user-type",children:[(0,T.jsx)("strong",{children:"Advisors"}),(0,T.jsx)("p",{children:"Guide your UHNW clients through the pre-design process with professional tools that demonstrate value beyond traditional real estate services."})]}),(0,T.jsxs)("div",{className:"doc-user-type",children:[(0,T.jsx)("strong",{children:"Architects"}),(0,T.jsx)("p",{children:"Receive validated briefs with adjacency requirements, space programs, and design preferences\u2014not vague wish lists."})]})]})]})]})}function ue(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"The Complete N4S Journey"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Each module in N4S builds on the previous, creating a comprehensive foundation for your mansion program. Complete them in order for best results\u2014later modules depend on earlier inputs."})]}),(0,T.jsxs)("div",{className:"doc-module-card",children:[(0,T.jsxs)("div",{className:"doc-module-header",children:[(0,T.jsx)("div",{className:"doc-module-badge",style:{background:$},children:(0,T.jsx)(h,{size:18})}),(0,T.jsxs)("div",{className:"doc-module-title-area",children:[(0,T.jsx)("h3",{children:"Module 1: KYC \u2013 Know Your Client"}),(0,T.jsx)(ce,{status:"active"})]}),(0,T.jsxs)("div",{className:"doc-module-timing",children:[(0,T.jsx)(w,{size:14}),(0,T.jsx)("span",{children:"2-4 hours"})]})]}),(0,T.jsxs)("div",{className:"doc-module-body",children:[(0,T.jsx)("p",{children:"The foundation of your N4S journey. KYC captures everything about how you live, what you value, and what you need from your home. Every subsequent module draws from this rich profile."}),(0,T.jsxs)("div",{className:"doc-module-sections",children:[(0,T.jsx)("strong",{children:"Key Sections:"}),(0,T.jsxs)("div",{className:"doc-section-tags",children:[(0,T.jsx)("span",{children:"Portfolio Context"}),(0,T.jsx)("span",{children:"Family & Household"}),(0,T.jsx)("span",{children:"Project Parameters"}),(0,T.jsx)("span",{children:"Budget Framework"}),(0,T.jsx)("span",{children:"Design Preferences"}),(0,T.jsx)("span",{children:"Lifestyle & Living"}),(0,T.jsx)("span",{children:"Space Requirements"})]})]}),(0,T.jsxs)("div",{className:"doc-module-outputs",children:[(0,T.jsx)("strong",{children:"Produces:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Lifestyle profile for the household"}),(0,T.jsx)("li",{children:"Design DNA (taste preferences)"}),(0,T.jsx)("li",{children:"Initial space requirements"}),(0,T.jsx)("li",{children:"Target square footage and tier"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-module-card",children:[(0,T.jsxs)("div",{className:"doc-module-header",children:[(0,T.jsx)("div",{className:"doc-module-badge",style:{background:oe},children:(0,T.jsx)(p,{size:18})}),(0,T.jsxs)("div",{className:"doc-module-title-area",children:[(0,T.jsx)("h3",{children:"Module 2: FYI \u2013 Find Your Inspiration"}),(0,T.jsx)(ce,{status:"active"})]}),(0,T.jsxs)("div",{className:"doc-module-timing",children:[(0,T.jsx)(w,{size:14}),(0,T.jsx)("span",{children:"1-2 hours"})]})]}),(0,T.jsxs)("div",{className:"doc-module-body",children:[(0,T.jsx)("p",{children:"Transform lifestyle requirements into a quantified space program. Select sizes for each room, organize by zone, and see your total program take shape."}),(0,T.jsxs)("div",{className:"doc-module-sections",children:[(0,T.jsx)("strong",{children:"Key Features:"}),(0,T.jsxs)("div",{className:"doc-section-tags",children:[(0,T.jsx)("span",{children:"Zone-Based Organization"}),(0,T.jsx)("span",{children:"S/M/L Sizing"}),(0,T.jsx)("span",{children:"Level Assignment"}),(0,T.jsx)("span",{children:"Structure Support"}),(0,T.jsx)("span",{children:"PDF Export"})]})]}),(0,T.jsxs)("div",{className:"doc-module-outputs",children:[(0,T.jsx)("strong",{children:"Produces:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Complete space program with SF allocations"}),(0,T.jsx)("li",{children:"Zone breakdown (Private, Living, Wellness, Support)"}),(0,T.jsx)("li",{children:"Level distribution"}),(0,T.jsx)("li",{children:"Program brief for MVP validation"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-module-card",children:[(0,T.jsxs)("div",{className:"doc-module-header",children:[(0,T.jsx)("div",{className:"doc-module-badge",style:{background:ae},children:(0,T.jsx)(m,{size:18})}),(0,T.jsxs)("div",{className:"doc-module-title-area",children:[(0,T.jsx)("h3",{children:"Module 3: MVP \u2013 Mansion Validation Program"}),(0,T.jsx)(ce,{status:"active"})]}),(0,T.jsxs)("div",{className:"doc-module-timing",children:[(0,T.jsx)(w,{size:14}),(0,T.jsx)("span",{children:"30-60 min"})]})]}),(0,T.jsxs)("div",{className:"doc-module-body",children:[(0,T.jsx)("p",{children:"Validate your adjacency logic before design begins. Answer layout questions, compare against benchmarks, and catch red flags that would be costly to fix later."}),(0,T.jsxs)("div",{className:"doc-module-sections",children:[(0,T.jsx)("strong",{children:"Key Features:"}),(0,T.jsxs)("div",{className:"doc-section-tags",children:[(0,T.jsx)("span",{children:"10 Layout Questions"}),(0,T.jsx)("span",{children:"Adjacency Matrix"}),(0,T.jsx)("span",{children:"Red Flag Detection"}),(0,T.jsx)("span",{children:"Bridge Recommendations"}),(0,T.jsx)("span",{children:"Module Scoring"})]})]}),(0,T.jsxs)("div",{className:"doc-module-outputs",children:[(0,T.jsx)("strong",{children:"Produces:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Validated adjacency matrix"}),(0,T.jsx)("li",{children:"Red flag report (must-resolve conflicts)"}),(0,T.jsx)("li",{children:"Bridge recommendations (operational transitions)"}),(0,T.jsx)("li",{children:"Module scores (80+ target for each)"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-module-card doc-module-card--placeholder",children:[(0,T.jsxs)("div",{className:"doc-module-header",children:[(0,T.jsx)("div",{className:"doc-module-badge",style:{background:se},children:(0,T.jsx)(V,{size:18})}),(0,T.jsxs)("div",{className:"doc-module-title-area",children:[(0,T.jsx)("h3",{children:"Module 4: KYM \u2013 Know Your Market"}),(0,T.jsx)(ce,{status:"coming"})]}),(0,T.jsxs)("div",{className:"doc-module-timing",children:[(0,T.jsx)(w,{size:14}),(0,T.jsx)("span",{children:"TBD"})]})]}),(0,T.jsxs)("div",{className:"doc-module-body",children:[(0,T.jsxs)("p",{children:[(0,T.jsx)("em",{children:"Coming Soon:"})," Benchmark your program against comparable properties in your market. Understand how your specifications compare to recent sales and help ensure your investment is appropriately positioned."]}),(0,T.jsxs)("div",{className:"doc-module-sections",children:[(0,T.jsx)("strong",{children:"Planned Features:"}),(0,T.jsxs)("div",{className:"doc-section-tags",children:[(0,T.jsx)("span",{children:"Market Comparables"}),(0,T.jsx)("span",{children:"Price/SF Analysis"}),(0,T.jsx)("span",{children:"Feature Benchmarking"}),(0,T.jsx)("span",{children:"Investment Positioning"})]})]}),(0,T.jsxs)("div",{className:"doc-module-outputs",children:[(0,T.jsx)("strong",{children:"Will Produce:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Comparable property analysis"}),(0,T.jsx)("li",{children:"Market positioning report"}),(0,T.jsx)("li",{children:"Investment value indicators"}),(0,T.jsx)("li",{children:"Feature gap analysis"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-module-card doc-module-card--placeholder",children:[(0,T.jsxs)("div",{className:"doc-module-header",children:[(0,T.jsx)("div",{className:"doc-module-badge",style:{background:Q},children:(0,T.jsx)(Y,{size:18})}),(0,T.jsxs)("div",{className:"doc-module-title-area",children:[(0,T.jsx)("h3",{children:"Module 5: VMX \u2013 Visual Matrix"}),(0,T.jsx)(ce,{status:"coming"})]}),(0,T.jsxs)("div",{className:"doc-module-timing",children:[(0,T.jsx)(w,{size:14}),(0,T.jsx)("span",{children:"TBD"})]})]}),(0,T.jsxs)("div",{className:"doc-module-body",children:[(0,T.jsxs)("p",{children:[(0,T.jsx)("em",{children:"Coming Soon:"})," Visualize your validated program as an interactive adjacency diagram. See how spaces connect, identify circulation patterns, and communicate your requirements visually to your design team."]}),(0,T.jsxs)("div",{className:"doc-module-sections",children:[(0,T.jsx)("strong",{children:"Planned Features:"}),(0,T.jsxs)("div",{className:"doc-section-tags",children:[(0,T.jsx)("span",{children:"Interactive Diagrams"}),(0,T.jsx)("span",{children:"Circulation Paths"}),(0,T.jsx)("span",{children:"Zone Visualization"}),(0,T.jsx)("span",{children:"Export to Mermaid"})]})]}),(0,T.jsxs)("div",{className:"doc-module-outputs",children:[(0,T.jsx)("strong",{children:"Will Produce:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Visual adjacency diagrams"}),(0,T.jsx)("li",{children:"Circulation flow maps"}),(0,T.jsx)("li",{children:"Zone relationship charts"}),(0,T.jsx)("li",{children:"Designer handoff materials"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Typical Timeline"}),(0,T.jsxs)("div",{className:"doc-timeline",children:[(0,T.jsxs)("div",{className:"doc-timeline-item",children:[(0,T.jsx)("div",{className:"doc-timeline-badge",children:"Week 1"}),(0,T.jsxs)("div",{className:"doc-timeline-content",children:[(0,T.jsx)("strong",{children:"Discovery"}),(0,T.jsx)("p",{children:"Complete KYC module. Principal and Secondary respondents capture lifestyle, preferences, and requirements."})]})]}),(0,T.jsxs)("div",{className:"doc-timeline-item",children:[(0,T.jsx)("div",{className:"doc-timeline-badge",children:"Week 2"}),(0,T.jsxs)("div",{className:"doc-timeline-content",children:[(0,T.jsx)("strong",{children:"Programming"}),(0,T.jsx)("p",{children:"Complete FYI module. Translate requirements into quantified space program with zone assignments and sizing."})]})]}),(0,T.jsxs)("div",{className:"doc-timeline-item",children:[(0,T.jsx)("div",{className:"doc-timeline-badge",children:"Week 3"}),(0,T.jsxs)("div",{className:"doc-timeline-content",children:[(0,T.jsx)("strong",{children:"Validation"}),(0,T.jsx)("p",{children:"Complete MVP module. Validate adjacencies, resolve red flags, and generate validated brief for design team."})]})]})]})]})]})}function he(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Key Milestones & Gates"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"The N4S journey includes several decision gates\u2014moments where you validate progress before moving forward. These gates ensure quality and prevent costly rework later in the design process."})]}),(0,T.jsxs)("div",{className:"doc-gate-card",children:[(0,T.jsxs)("div",{className:"doc-gate-header",children:[(0,T.jsx)("div",{className:"doc-gate-number",children:"Gate 0"}),(0,T.jsx)("h3",{children:"KYC Complete"})]}),(0,T.jsxs)("div",{className:"doc-gate-content",children:[(0,T.jsxs)("p",{children:[(0,T.jsx)("strong",{children:"When:"})," After completing all required KYC sections for Principal (and Secondary if applicable)"]}),(0,T.jsxs)("div",{className:"doc-gate-criteria",children:[(0,T.jsx)("h4",{children:"Pass Criteria:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Target square footage defined"}),(0,T.jsx)("li",{children:"Family composition captured"}),(0,T.jsx)("li",{children:"Operating model selected"}),(0,T.jsx)("li",{children:"Design preferences completed (taste exploration)"}),(0,T.jsx)("li",{children:"Budget framework established"})]})]}),(0,T.jsxs)("div",{className:"doc-gate-unlocks",children:[(0,T.jsx)("h4",{children:"Unlocks:"}),(0,T.jsx)("span",{children:"FYI module access with pre-populated space recommendations"})]})]})]}),(0,T.jsxs)("div",{className:"doc-gate-card",children:[(0,T.jsxs)("div",{className:"doc-gate-header",children:[(0,T.jsx)("div",{className:"doc-gate-number",children:"Gate 1"}),(0,T.jsx)("h3",{children:"Program Complete"})]}),(0,T.jsxs)("div",{className:"doc-gate-content",children:[(0,T.jsxs)("p",{children:[(0,T.jsx)("strong",{children:"When:"})," After completing FYI space program with all zones configured"]}),(0,T.jsxs)("div",{className:"doc-gate-criteria",children:[(0,T.jsx)("h4",{children:"Pass Criteria:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"All required spaces included"}),(0,T.jsx)("li",{children:"Sizes selected (S/M/L) for each space"}),(0,T.jsx)("li",{children:"Levels assigned"}),(0,T.jsx)("li",{children:"Total SF within \xb110% of target"}),(0,T.jsx)("li",{children:"Zone balance reasonable"})]})]}),(0,T.jsxs)("div",{className:"doc-gate-unlocks",children:[(0,T.jsx)("h4",{children:"Unlocks:"}),(0,T.jsx)("span",{children:"MVP module access with program data loaded"})]})]})]}),(0,T.jsxs)("div",{className:"doc-gate-card doc-gate-card--critical",children:[(0,T.jsxs)("div",{className:"doc-gate-header",children:[(0,T.jsx)("div",{className:"doc-gate-number",children:"Gate 2"}),(0,T.jsx)("h3",{children:"Adjacency Validated"})]}),(0,T.jsxs)("div",{className:"doc-gate-content",children:[(0,T.jsxs)("p",{children:[(0,T.jsx)("strong",{children:"When:"})," After MVP validation passes all checks"]}),(0,T.jsxs)("div",{className:"doc-gate-criteria",children:[(0,T.jsx)("h4",{children:"Pass Criteria:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Zero critical red flags"}),(0,T.jsx)("li",{children:"All required bridges enabled"}),(0,T.jsx)("li",{children:"Module scores \u2265 80 for all 8 modules"}),(0,T.jsx)("li",{children:"Layout questions completed"})]})]}),(0,T.jsxs)("div",{className:"doc-gate-unlocks",children:[(0,T.jsx)("h4",{children:"Unlocks:"}),(0,T.jsx)("span",{children:"Validated brief generation, ready for design team handoff"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card doc-card--muted",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Future Gates (Coming Soon)"}),(0,T.jsxs)("div",{className:"doc-future-gates",children:[(0,T.jsxs)("div",{className:"doc-future-gate",children:[(0,T.jsx)("div",{className:"doc-gate-number doc-gate-number--future",children:"Gate 3"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Market Positioned"}),(0,T.jsx)("p",{children:"KYM module validates program against market comparables"})]})]}),(0,T.jsxs)("div",{className:"doc-future-gate",children:[(0,T.jsx)("div",{className:"doc-gate-number doc-gate-number--future",children:"Gate 4"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Visually Mapped"}),(0,T.jsx)("p",{children:"VMX module produces adjacency diagrams ready for architect review"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Gate Philosophy"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"N4S gates are designed to catch problems early when they're cheap to fix. A red flag caught in MVP costs nothing to resolve\u2014just change a setting. The same conflict discovered during construction could cost hundreds of thousands of dollars and months of delay."}),(0,T.jsxs)("div",{className:"doc-cost-curve",children:[(0,T.jsxs)("div",{className:"doc-cost-item",children:[(0,T.jsx)("strong",{children:"KYC/FYI"}),(0,T.jsx)("span",{className:"doc-cost-low",children:"Free to change"})]}),(0,T.jsxs)("div",{className:"doc-cost-item",children:[(0,T.jsx)("strong",{children:"MVP"}),(0,T.jsx)("span",{className:"doc-cost-low",children:"Free to change"})]}),(0,T.jsxs)("div",{className:"doc-cost-item",children:[(0,T.jsx)("strong",{children:"Schematic Design"}),(0,T.jsx)("span",{className:"doc-cost-medium",children:"$10K-50K to change"})]}),(0,T.jsxs)("div",{className:"doc-cost-item",children:[(0,T.jsx)("strong",{children:"Construction"}),(0,T.jsx)("span",{className:"doc-cost-high",children:"$100K+ to change"})]})]})]})]})}function pe(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Reference Guide"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Quick reference for N4S terminology, module summaries, and key concepts."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Module Quick Reference"}),(0,T.jsxs)("div",{className:"doc-ref-table",children:[(0,T.jsxs)("div",{className:"doc-ref-row doc-ref-row--header",children:[(0,T.jsx)("span",{children:"Module"}),(0,T.jsx)("span",{children:"Full Name"}),(0,T.jsx)("span",{children:"Primary Output"}),(0,T.jsx)("span",{children:"Status"})]}),(0,T.jsxs)("div",{className:"doc-ref-row",children:[(0,T.jsx)("span",{className:"doc-ref-code",children:"KYC"}),(0,T.jsx)("span",{children:"Know Your Client"}),(0,T.jsx)("span",{children:"Lifestyle profile, Design DNA"}),(0,T.jsx)("span",{children:(0,T.jsx)(ce,{status:"active"})})]}),(0,T.jsxs)("div",{className:"doc-ref-row",children:[(0,T.jsx)("span",{className:"doc-ref-code",children:"FYI"}),(0,T.jsx)("span",{children:"Find Your Inspiration"}),(0,T.jsx)("span",{children:"Space program with SF allocations"}),(0,T.jsx)("span",{children:(0,T.jsx)(ce,{status:"active"})})]}),(0,T.jsxs)("div",{className:"doc-ref-row",children:[(0,T.jsx)("span",{className:"doc-ref-code",children:"MVP"}),(0,T.jsx)("span",{children:"Mansion Validation Program"}),(0,T.jsx)("span",{children:"Validated adjacency brief"}),(0,T.jsx)("span",{children:(0,T.jsx)(ce,{status:"active"})})]}),(0,T.jsxs)("div",{className:"doc-ref-row",children:[(0,T.jsx)("span",{className:"doc-ref-code",children:"KYM"}),(0,T.jsx)("span",{children:"Know Your Market"}),(0,T.jsx)("span",{children:"Market positioning report"}),(0,T.jsx)("span",{children:(0,T.jsx)(ce,{status:"coming"})})]}),(0,T.jsxs)("div",{className:"doc-ref-row",children:[(0,T.jsx)("span",{className:"doc-ref-code",children:"VMX"}),(0,T.jsx)("span",{children:"Visual Matrix"}),(0,T.jsx)("span",{children:"Adjacency diagrams"}),(0,T.jsx)("span",{children:(0,T.jsx)(ce,{status:"coming"})})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Program Tiers"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"N4S uses tiers to apply appropriate benchmarks based on your target square footage. Larger homes require more sophisticated adjacency logic."}),(0,T.jsxs)("div",{className:"doc-tier-grid",children:[(0,T.jsxs)("div",{className:"doc-tier-item",children:[(0,T.jsx)("div",{className:"doc-tier-badge",children:"5K"}),(0,T.jsxs)("div",{className:"doc-tier-info",children:[(0,T.jsx)("strong",{children:"< 7,500 SF"}),(0,T.jsx)("p",{children:"Efficient luxury. Core program with essential staff support."})]})]}),(0,T.jsxs)("div",{className:"doc-tier-item",children:[(0,T.jsx)("div",{className:"doc-tier-badge",children:"10K"}),(0,T.jsxs)("div",{className:"doc-tier-info",children:[(0,T.jsx)("strong",{children:"7,500 - 12,500 SF"}),(0,T.jsx)("p",{children:"Expanded program. Dedicated guest wing, enhanced wellness."})]})]}),(0,T.jsxs)("div",{className:"doc-tier-item",children:[(0,T.jsx)("div",{className:"doc-tier-badge",children:"15K"}),(0,T.jsxs)("div",{className:"doc-tier-info",children:[(0,T.jsx)("strong",{children:"12,500 - 17,500 SF"}),(0,T.jsx)("p",{children:"Full program. Multiple zones, comprehensive back-of-house."})]})]}),(0,T.jsxs)("div",{className:"doc-tier-item",children:[(0,T.jsx)("div",{className:"doc-tier-badge",children:"20K"}),(0,T.jsxs)("div",{className:"doc-tier-info",children:[(0,T.jsx)("strong",{children:"17,500+ SF"}),(0,T.jsx)("p",{children:"Estate scale. Complex operations, multiple structures."})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Respondent Types"}),(0,T.jsxs)("div",{className:"doc-respondent-ref",children:[(0,T.jsxs)("div",{className:"doc-respondent-item",children:[(0,T.jsx)("div",{className:"doc-respondent-badge doc-respondent-badge--navy",children:"Principal"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{children:"Primary decision-maker who completes all sections. Captures core project parameters, budget, and household composition."}),(0,T.jsx)("span",{className:"doc-respondent-scope",children:"Scope: All 9 KYC sections"})]})]}),(0,T.jsxs)("div",{className:"doc-respondent-item",children:[(0,T.jsx)("div",{className:"doc-respondent-badge doc-respondent-badge--teal",children:"Secondary"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{children:"Spouse or co-decision-maker who provides their own perspective. Selections are additive to the Principal's choices."}),(0,T.jsx)("span",{className:"doc-respondent-scope",children:"Scope: Design, Lifestyle, Space (P1.A.5/6/7)"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Glossary"}),(0,T.jsx)(le,{title:"View All Terms",defaultOpen:!1,children:(0,T.jsxs)("dl",{className:"doc-glossary",children:[(0,T.jsx)("dt",{children:"Adjacency"}),(0,T.jsx)("dd",{children:"The spatial relationship between two rooms (Adjacent, Near, Buffered, or Separated)."}),(0,T.jsx)("dt",{children:"Benchmark"}),(0,T.jsx)("dd",{children:"The recommended configuration for homes of a specific tier, based on luxury residence best practices."}),(0,T.jsx)("dt",{children:"Bridge"}),(0,T.jsx)("dd",{children:"A specialized transition space that enables buffered relationships while maintaining functionality (e.g., Butler Pantry, Sound Lock)."}),(0,T.jsx)("dt",{children:"Design DNA"}),(0,T.jsx)("dd",{children:"Your visual preference profile generated from the KYC taste exploration, showing affinities across 10 design categories."}),(0,T.jsx)("dt",{children:"Gate"}),(0,T.jsx)("dd",{children:"A validation checkpoint that must pass before proceeding to the next phase."}),(0,T.jsx)("dt",{children:"Operating Model"}),(0,T.jsx)("dd",{children:"How your household runs day-to-day\u2014casual vs. formal, self-sufficient vs. fully staffed."}),(0,T.jsx)("dt",{children:"Privacy Posture"}),(0,T.jsx)("dd",{children:"Your tolerance for visibility between zones\u2014from open-plan living to strict acoustic separation."}),(0,T.jsx)("dt",{children:"Red Flag"}),(0,T.jsx)("dd",{children:"A critical violation in MVP that represents a fundamental failure in mansion programming."}),(0,T.jsx)("dt",{children:"Space Program"}),(0,T.jsx)("dd",{children:"The complete list of rooms in your home with square footage allocations and zone assignments."}),(0,T.jsx)("dt",{children:"Tier"}),(0,T.jsx)("dd",{children:"Your project's size category (5K, 10K, 15K, 20K) which determines which benchmarks apply."}),(0,T.jsx)("dt",{children:"Zone"}),(0,T.jsx)("dd",{children:"A functional grouping of related spaces (Private, Living & Entertainment, Wellness & Recreation, Support Amenities)."})]})})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Data Flow"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"N4S modules share data through a centralized context. Changes in earlier modules automatically flow to later modules."}),(0,T.jsxs)("div",{className:"doc-dataflow",children:[(0,T.jsxs)("div",{className:"doc-dataflow-item",children:[(0,T.jsx)("span",{className:"doc-dataflow-source",children:"KYC"}),(0,T.jsx)("span",{className:"doc-dataflow-arrow",children:"\u2192"}),(0,T.jsx)("span",{className:"doc-dataflow-target",children:"FYI"}),(0,T.jsx)("span",{className:"doc-dataflow-data",children:"Target SF, family size, lifestyle inputs"})]}),(0,T.jsxs)("div",{className:"doc-dataflow-item",children:[(0,T.jsx)("span",{className:"doc-dataflow-source",children:"FYI"}),(0,T.jsx)("span",{className:"doc-dataflow-arrow",children:"\u2192"}),(0,T.jsx)("span",{className:"doc-dataflow-target",children:"MVP"}),(0,T.jsx)("span",{className:"doc-dataflow-data",children:"Space program, zones, tier detection"})]}),(0,T.jsxs)("div",{className:"doc-dataflow-item",children:[(0,T.jsx)("span",{className:"doc-dataflow-source",children:"KYC + FYI + MVP"}),(0,T.jsx)("span",{className:"doc-dataflow-arrow",children:"\u2192"}),(0,T.jsx)("span",{className:"doc-dataflow-target",children:"Brief"}),(0,T.jsx)("span",{className:"doc-dataflow-data",children:"Validated program for design team"})]})]})]})]})}function me(e){let{onClose:t}=e;const[n,i]=(0,a.useState)("overview");return(0,T.jsxs)("div",{className:"doc-container",children:[(0,T.jsxs)("div",{className:"doc-header",children:[(0,T.jsx)("div",{className:"doc-header-top",children:t&&(0,T.jsxs)("button",{className:"doc-close-btn",onClick:t,children:[(0,T.jsx)(Z,{size:16}),"Back to Dashboard"]})}),(0,T.jsx)("h1",{className:"doc-title",children:"Documentation"}),(0,T.jsx)("p",{className:"doc-subtitle",children:"N4S \u2014 Luxury Residential Advisory Platform Guide"}),(0,T.jsx)("div",{className:"doc-tabs",children:[{id:"overview",label:"Overview"},{id:"workflow",label:"Workflow"},{id:"gates",label:"Gates"},{id:"reference",label:"Reference"}].map(e=>(0,T.jsx)("button",{className:"doc-tab ".concat(n===e.id?"active":""),onClick:()=>i(e.id),children:e.label},e.id))})]}),(0,T.jsxs)("div",{className:"doc-content",children:["overview"===n&&(0,T.jsx)(de,{}),"workflow"===n&&(0,T.jsx)(ue,{}),"gates"===n&&(0,T.jsx)(he,{}),"reference"===n&&(0,T.jsx)(pe,{})]}),(0,T.jsx)("style",{children:fe})]})}const fe="\n/* ============================================\n   BASE DOCUMENTATION STYLES (N4S Brand Guide)\n   ============================================ */\n\n.doc-container {\n  min-height: 100vh;\n  background-color: ".concat(J,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.doc-header {\n  background-color: ").concat(X,";\n  border-bottom: 1px solid ").concat(ee,";\n  padding: 1rem 1.5rem 0;\n}\n\n.doc-header-top {\n  margin-bottom: 1rem;\n}\n\n.doc-close-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(ee,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(ne,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.doc-close-btn:hover {\n  border-color: ").concat($,";\n  color: ").concat($,";\n}\n\n.doc-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.75rem;\n  font-weight: 500;\n  color: ").concat(te,";\n  margin: 0 0 0.25rem 0;\n}\n\n.doc-subtitle {\n  font-size: 0.9375rem;\n  color: ").concat(ne,";\n  margin: 0 0 1.5rem 0;\n}\n\n.doc-tabs {\n  display: flex;\n  gap: 0;\n  border: 1px solid ").concat(ee,";\n  border-bottom: none;\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n  background-color: ").concat(J,";\n}\n\n.doc-tab {\n  flex: 1;\n  padding: 0.875rem 1rem;\n  background-color: transparent;\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(ne,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border-right: 1px solid ").concat(ee,";\n}\n\n.doc-tab:last-child {\n  border-right: none;\n}\n\n.doc-tab:hover {\n  background-color: ").concat(X,";\n  color: ").concat(te,";\n}\n\n.doc-tab.active {\n  background-color: ").concat(X,";\n  color: ").concat($,";\n  box-shadow: inset 0 -2px 0 ").concat($,";\n}\n\n.doc-content {\n  padding: 1.5rem;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.doc-tab-content {\n  animation: fadeIn 0.2s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(4px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.doc-card {\n  background-color: ").concat(X,";\n  border: 1px solid ").concat(ee,";\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.doc-card--highlight {\n  background-color: #f8f6f1;\n  border-color: ").concat(Q,";\n}\n\n.doc-card--warning {\n  background-color: #fffbf0;\n  border-color: ").concat(ie,";\n}\n\n.doc-card--muted {\n  background: ").concat(J,";\n  opacity: 0.9;\n}\n\n.doc-section-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.375rem;\n  font-weight: 500;\n  color: ").concat(te,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-subsection-title {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: ").concat(te,";\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-paragraph {\n  font-size: 0.9375rem;\n  line-height: 1.6;\n  color: ").concat(te,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-paragraph:last-child {\n  margin-bottom: 0;\n}\n\n.doc-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.doc-list li {\n  display: flex;\n  gap: 0.75rem;\n  padding: 0.75rem 0;\n  border-bottom: 1px solid ").concat(ee,";\n}\n\n.doc-list li:last-child {\n  border-bottom: none;\n}\n\n.doc-list-icon {\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.doc-list-icon.success { color: ").concat(ae,"; }\n.doc-list-icon.warning { color: ").concat(ie,"; }\n.doc-list-icon.error { color: ").concat(re,"; }\n\n.doc-list li strong {\n  display: block;\n  color: ").concat(te,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-list li p {\n  font-size: 0.875rem;\n  color: ").concat(ne,";\n  margin: 0;\n}\n\n/* Expandable Sections */\n.doc-expandable {\n  border: 1px solid ").concat(ee,";\n  border-radius: 6px;\n  margin-bottom: 0.5rem;\n  overflow: hidden;\n}\n\n.doc-expandable-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background-color: ").concat(J,";\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(te,";\n  cursor: pointer;\n  text-align: left;\n}\n\n.doc-expandable-header:hover {\n  background-color: #f0f0eb;\n}\n\n.doc-expandable-content {\n  padding: 1rem;\n  border-top: 1px solid ").concat(ee,";\n}\n\n/* Timeline */\n.doc-timeline {\n  position: relative;\n  padding-left: 2rem;\n}\n\n.doc-timeline::before {\n  content: '';\n  position: absolute;\n  left: 0.5rem;\n  top: 0.5rem;\n  bottom: 0.5rem;\n  width: 2px;\n  background-color: ").concat(ee,";\n}\n\n.doc-timeline-item {\n  position: relative;\n  padding: 0.75rem 0;\n}\n\n.doc-timeline-item::before {\n  content: '';\n  position: absolute;\n  left: -1.625rem;\n  top: 1rem;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: ").concat($,";\n  border: 2px solid ").concat(X,";\n}\n\n.doc-timeline-badge {\n  display: inline-block;\n  padding: 0.125rem 0.5rem;\n  background-color: ").concat($,";\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n}\n\n.doc-timeline-content strong {\n  display: block;\n  color: ").concat(te,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-timeline-content p {\n  font-size: 0.8125rem;\n  color: ").concat(ne,";\n  margin: 0;\n}\n\n/* Glossary */\n.doc-glossary {\n  margin: 0;\n}\n\n.doc-glossary dt {\n  font-weight: 600;\n  color: ").concat(te,";\n  margin-top: 1rem;\n}\n\n.doc-glossary dt:first-child {\n  margin-top: 0;\n}\n\n.doc-glossary dd {\n  margin: 0.25rem 0 0 0;\n  font-size: 0.875rem;\n  color: ").concat(ne,";\n  line-height: 1.5;\n}\n\n/* ============================================\n   DASHBOARD-SPECIFIC STYLES\n   ============================================ */\n\n/* Journey Preview */\n.doc-journey-preview {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  margin-top: 1.5rem;\n  padding: 1.5rem;\n  background: ").concat(X,";\n  border-radius: 8px;\n}\n\n.doc-journey-step {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.doc-journey-badge {\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  color: #fff;\n  font-weight: 700;\n  font-size: 1rem;\n}\n\n.doc-journey-step span {\n  font-size: 0.8125rem;\n  font-weight: 600;\n  color: ").concat(te,";\n}\n\n.doc-journey-arrow {\n  color: ").concat(ne,";\n  margin: 0 0.25rem;\n}\n\n/* User Grid */\n.doc-user-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n}\n\n.doc-user-type {\n  padding: 1rem;\n  background: ").concat(J,";\n  border-radius: 6px;\n}\n\n.doc-user-type strong {\n  display: block;\n  color: ").concat($,";\n  margin-bottom: 0.5rem;\n}\n\n.doc-user-type p {\n  font-size: 0.875rem;\n  color: ").concat(ne,";\n  margin: 0;\n  line-height: 1.5;\n}\n\n/* Module Cards */\n.doc-module-card {\n  background: ").concat(X,";\n  border: 1px solid ").concat(ee,";\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  overflow: hidden;\n}\n\n.doc-module-card--placeholder {\n  opacity: 0.8;\n  background: ").concat(J,";\n}\n\n.doc-module-header {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem 1.5rem;\n  background: ").concat(J,";\n  border-bottom: 1px solid ").concat(ee,";\n}\n\n.doc-module-badge {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 8px;\n  color: #fff;\n}\n\n.doc-module-title-area {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.doc-module-title-area h3 {\n  font-size: 1.0625rem;\n  font-weight: 600;\n  color: ").concat(te,";\n  margin: 0;\n}\n\n.doc-module-timing {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  font-size: 0.8125rem;\n  color: ").concat(ne,";\n}\n\n.doc-module-body {\n  padding: 1.5rem;\n}\n\n.doc-module-body > p {\n  font-size: 0.9375rem;\n  color: ").concat(te,";\n  line-height: 1.6;\n  margin: 0 0 1rem 0;\n}\n\n.doc-module-sections,\n.doc-module-outputs {\n  margin-top: 1rem;\n}\n\n.doc-module-sections strong,\n.doc-module-outputs strong {\n  display: block;\n  font-size: 0.8125rem;\n  color: ").concat(ne,";\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin-bottom: 0.5rem;\n}\n\n.doc-section-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n\n.doc-section-tags span {\n  padding: 0.25rem 0.75rem;\n  background: ").concat(J,";\n  border-radius: 4px;\n  font-size: 0.8125rem;\n  color: ").concat(te,";\n}\n\n.doc-module-card--placeholder .doc-section-tags span {\n  background: ").concat(X,";\n}\n\n.doc-module-outputs ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.5rem;\n}\n\n.doc-module-outputs li {\n  font-size: 0.875rem;\n  color: ").concat(te,";\n  padding-left: 1rem;\n  position: relative;\n}\n\n.doc-module-outputs li::before {\n  content: '\u2192';\n  position: absolute;\n  left: 0;\n  color: ").concat(Q,";\n}\n\n/* Gate Cards */\n.doc-gate-card {\n  background: ").concat(X,";\n  border: 1px solid ").concat(ee,";\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  overflow: hidden;\n}\n\n.doc-gate-card--critical {\n  border-color: ").concat(Q,";\n}\n\n.doc-gate-header {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem 1.5rem;\n  background: ").concat(J,";\n  border-bottom: 1px solid ").concat(ee,";\n}\n\n.doc-gate-number {\n  width: 60px;\n  padding: 0.375rem 0.75rem;\n  background: ").concat($,";\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-align: center;\n}\n\n.doc-gate-number--future {\n  background: ").concat(ne,";\n}\n\n.doc-gate-header h3 {\n  font-size: 1.0625rem;\n  font-weight: 600;\n  color: ").concat(te,";\n  margin: 0;\n}\n\n.doc-gate-content {\n  padding: 1.5rem;\n}\n\n.doc-gate-content > p {\n  font-size: 0.9375rem;\n  color: ").concat(te,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-gate-criteria,\n.doc-gate-unlocks {\n  margin-top: 1rem;\n}\n\n.doc-gate-criteria h4,\n.doc-gate-unlocks h4 {\n  font-size: 0.8125rem;\n  color: ").concat(ne,";\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin: 0 0 0.5rem 0;\n}\n\n.doc-gate-criteria ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.doc-gate-criteria li {\n  font-size: 0.875rem;\n  color: ").concat(te,";\n  padding: 0.25rem 0 0.25rem 1.25rem;\n  position: relative;\n}\n\n.doc-gate-criteria li::before {\n  content: '\u2713';\n  position: absolute;\n  left: 0;\n  color: ").concat(ae,";\n  font-weight: bold;\n}\n\n.doc-gate-unlocks span {\n  font-size: 0.875rem;\n  color: ").concat($,";\n  font-weight: 500;\n}\n\n/* Future Gates */\n.doc-future-gates {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.doc-future-gate {\n  display: flex;\n  gap: 1rem;\n  align-items: flex-start;\n  padding: 1rem;\n  background: ").concat(X,";\n  border-radius: 6px;\n}\n\n.doc-future-gate strong {\n  display: block;\n  color: ").concat(te,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-future-gate p {\n  font-size: 0.875rem;\n  color: ").concat(ne,";\n  margin: 0;\n}\n\n/* Cost Curve */\n.doc-cost-curve {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 0.5rem;\n  margin-top: 1rem;\n}\n\n.doc-cost-item {\n  text-align: center;\n  padding: 1rem 0.5rem;\n  background: ").concat(J,";\n  border-radius: 6px;\n}\n\n.doc-cost-item strong {\n  display: block;\n  font-size: 0.8125rem;\n  color: ").concat(te,";\n  margin-bottom: 0.375rem;\n}\n\n.doc-cost-low {\n  font-size: 0.75rem;\n  color: ").concat(ae,";\n  font-weight: 500;\n}\n\n.doc-cost-medium {\n  font-size: 0.75rem;\n  color: ").concat(ie,";\n  font-weight: 500;\n}\n\n.doc-cost-high {\n  font-size: 0.75rem;\n  color: ").concat(re,";\n  font-weight: 500;\n}\n\n/* Reference Table */\n.doc-ref-table {\n  border: 1px solid ").concat(ee,";\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.doc-ref-row {\n  display: grid;\n  grid-template-columns: 60px 1fr 1fr 100px;\n  gap: 1rem;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid ").concat(ee,";\n  align-items: center;\n}\n\n.doc-ref-row:last-child {\n  border-bottom: none;\n}\n\n.doc-ref-row--header {\n  background: ").concat(J,";\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: ").concat(ne,";\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.doc-ref-code {\n  font-family: 'SF Mono', Monaco, monospace;\n  font-size: 0.8125rem;\n  font-weight: 700;\n  color: ").concat($,";\n}\n\n/* Tier Grid */\n.doc-tier-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.doc-tier-item {\n  display: flex;\n  gap: 1rem;\n  padding: 1rem;\n  background: ").concat(J,";\n  border-radius: 6px;\n}\n\n.doc-tier-badge {\n  padding: 0.5rem 0.75rem;\n  background: ").concat($,";\n  color: #fff;\n  border-radius: 4px;\n  font-size: 1rem;\n  font-weight: 700;\n  height: fit-content;\n}\n\n.doc-tier-info strong {\n  display: block;\n  color: ").concat(te,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-tier-info p {\n  font-size: 0.8125rem;\n  color: ").concat(ne,";\n  margin: 0;\n}\n\n/* Respondent Reference */\n.doc-respondent-ref {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.doc-respondent-item {\n  display: flex;\n  gap: 1rem;\n  padding: 1rem;\n  background: ").concat(J,";\n  border-radius: 6px;\n}\n\n.doc-respondent-badge {\n  padding: 0.375rem 0.75rem;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #fff;\n  height: fit-content;\n}\n\n.doc-respondent-badge--navy {\n  background: ").concat($,";\n}\n\n.doc-respondent-badge--teal {\n  background: ").concat(oe,";\n}\n\n.doc-respondent-item p {\n  font-size: 0.875rem;\n  color: ").concat(te,";\n  margin: 0 0 0.5rem 0;\n  line-height: 1.5;\n}\n\n.doc-respondent-scope {\n  font-size: 0.75rem;\n  color: ").concat(ne,";\n}\n\n/* Data Flow */\n.doc-dataflow {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.doc-dataflow-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem 1rem;\n  background: ").concat(J,";\n  border-radius: 6px;\n}\n\n.doc-dataflow-source,\n.doc-dataflow-target {\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n\n.doc-dataflow-source {\n  background: ").concat($,";\n  color: #fff;\n}\n\n.doc-dataflow-target {\n  background: ").concat(Q,";\n  color: ").concat(te,";\n}\n\n.doc-dataflow-arrow {\n  color: ").concat(ne,";\n}\n\n.doc-dataflow-data {\n  font-size: 0.8125rem;\n  color: ").concat(ne,";\n}\n\n/* ============================================\n   RESPONSIVE STYLES\n   ============================================ */\n\n@media (max-width: 768px) {\n  .doc-user-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-module-outputs ul {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-ref-row {\n    grid-template-columns: 1fr 1fr;\n  }\n  \n  .doc-tier-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-cost-curve {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .doc-journey-preview {\n    flex-wrap: wrap;\n  }\n}\n"),ge={A:{id:"kyc",name:"KYC",fullName:"Know Your Client",icon:h,color:"blue"},C:{id:"fyi",name:"FYI",fullName:"Find Your Inspiration",icon:p,color:"purple"},M:{id:"mvp",name:"MVP",fullName:"Mansion Validation",icon:m,color:"green"},B:{id:"kym",name:"KYM",fullName:"Know Your Market",icon:f,color:"teal"},D:{id:"vmx",name:"VMX",fullName:"Vision Matrix",icon:j,color:"gold"}},ve={P1:{name:"Ask the Right Questions",description:"Discovery & Requirements"},P2:{name:"Have a Story to Tell",description:"Analysis & Synthesis"},P3:{name:"Get It Done",description:"Execution & Delivery"}},ye=e=>{var t,n,i,r;let{onNavigate:o,showDocs:s,onCloseDocs:l}=e;const{clientData:c,updateClientData:d,kycData:u,fyiData:g,calculateCompleteness:y,projects:b,activeProjectId:x,createProject:S,switchProject:R,deleteProject:I}=W(),[z,D]=(0,a.useState)(!1),[E,O]=(0,a.useState)(""),[B,q]=(0,a.useState)(!1),H=y("principal"),G=u.principal.portfolioContext,U=G.principalFirstName?"".concat(G.principalFirstName," ").concat(G.principalLastName||"").trim():"",K="couple"===((null===(t=u.principal.designIdentity)||void 0===t?void 0:t.clientType)||"individual"),V=K?y("secondary"):100,Y=K?Math.round((H+V)/2):H,Z=g.selections||{},$=Object.values(Z).filter(e=>null===e||void 0===e?void 0:e.included).length,Q=g.completedAt||$>=20?100:$>=10?75:$>0?50:0,J=e=>{switch(e){case"A":return 0===Y?"not-started":Y<100?"in-progress":"complete";case"C":return Y<30?"locked":Q>=100?"complete":Q>0?"in-progress":"not-started";case"M":return Q<50?"locked":"not-started";default:return"not-started"}},X=()=>{E.trim()&&(S(E.trim()),O(""),q(!1),D(!1))},ee=e=>{switch(e){case"complete":return"task-cell--complete";case"in-progress":return"task-cell--active";case"pending":return"task-cell--pending";default:return"task-cell--locked"}},te=[{code:"A",id:"kyc",title:"Module A: KYC",subtitle:"Know Your Client",description:"9-section client profile with multi-stakeholder intake and governance framework",icon:h,progress:Y,status:J("A"),color:"blue",enabled:!0},{code:"C",id:"fyi",title:"Module C: FYI",subtitle:"Find Your Inspiration",description:"Space program with floor assignments and lifestyle requirements",icon:p,progress:Q,status:J("C"),color:"purple",enabled:Y>=30},{code:"M",id:"mvp",title:"Module M: MVP",subtitle:"Mansion Validation",description:"Adjacency validation with red flags and bridges",icon:m,progress:0,status:J("M"),color:"green",enabled:Q>=50},{code:"B",id:"kym",title:"Module B: KYM",subtitle:"Know Your Market",description:"Market analysis, comparable properties, and demographics",icon:f,progress:0,status:J("B"),color:"teal",enabled:!0},{code:"D",id:"vmx",title:"Module D: VMX",subtitle:"Vision Matrix",description:"Budget allocation and project delivery",icon:j,progress:0,status:"not-started",color:"gold",enabled:!1,comingSoon:!0}],ne=(e,t)=>{if(t)return(0,T.jsxs)("span",{className:"badge badge--neutral",children:[(0,T.jsx)(w,{size:14})," Coming Soon"]});switch(e){case"complete":return(0,T.jsxs)("span",{className:"badge badge--success",children:[(0,T.jsx)(N,{size:14})," Complete"]});case"in-progress":return(0,T.jsxs)("span",{className:"badge badge--warning",children:[(0,T.jsx)(w,{size:14})," In Progress"]});case"locked":return(0,T.jsxs)("span",{className:"badge badge--neutral",children:[(0,T.jsx)(k,{size:14})," Locked"]});default:return(0,T.jsxs)("span",{className:"badge badge--neutral",children:[(0,T.jsx)(k,{size:14})," Not Started"]})}};return s?(0,T.jsx)(me,{onClose:l}):(0,T.jsxs)("div",{className:"dashboard",children:[(0,T.jsxs)("section",{className:"dashboard__project-selector",children:[(0,T.jsxs)("div",{className:"project-selector",children:[(0,T.jsxs)("div",{className:"project-selector__current",onClick:()=>D(!z),children:[(0,T.jsx)(_,{size:20,className:"project-selector__icon"}),(0,T.jsxs)("div",{className:"project-selector__info",children:[(0,T.jsx)("span",{className:"project-selector__label",children:"Current Project"}),(0,T.jsx)("span",{className:"project-selector__name",children:c.projectName||"No Project Selected"})]}),(0,T.jsx)(C,{size:20,className:"project-selector__chevron ".concat(z?"project-selector__chevron--open":"")})]}),z&&(0,T.jsxs)("div",{className:"project-dropdown",children:[(0,T.jsx)("div",{className:"project-dropdown__header",children:(0,T.jsxs)("span",{children:["Your Projects (",b.length,")"]})}),(0,T.jsx)("div",{className:"project-dropdown__list",children:0===b.length?(0,T.jsx)("div",{className:"project-dropdown__empty",children:"No projects yet. Create your first project below."}):b.map(e=>(0,T.jsxs)("div",{className:"project-dropdown__item ".concat(e.id===x?"project-dropdown__item--active":""),onClick:()=>{return t=e.id,R(t),void D(!1);var t},children:[(0,T.jsxs)("div",{className:"project-dropdown__item-info",children:[(0,T.jsx)("span",{className:"project-dropdown__item-name",children:e.name}),(0,T.jsx)("span",{className:"project-dropdown__item-date",children:new Date(e.lastUpdated||e.createdAt).toLocaleDateString()})]}),e.id===x&&(0,T.jsx)(N,{size:16,className:"project-dropdown__item-check"}),b.length>1&&e.id!==x&&(0,T.jsx)("button",{className:"project-dropdown__item-delete",onClick:t=>{t.stopPropagation(),window.confirm('Delete "'.concat(e.name,'"? This cannot be undone.'))&&I(e.id)},children:(0,T.jsx)(P,{size:14})})]},e.id))}),(0,T.jsx)("div",{className:"project-dropdown__footer",children:B?(0,T.jsxs)("div",{className:"project-dropdown__new-input",children:[(0,T.jsx)("input",{type:"text",placeholder:"Project name...",value:E,onChange:e=>O(e.target.value),onKeyDown:e=>"Enter"===e.key&&X(),autoFocus:!0}),(0,T.jsx)("button",{className:"btn btn--primary btn--sm",onClick:X,children:"Create"}),(0,T.jsx)("button",{className:"btn btn--ghost btn--sm",onClick:()=>{q(!1),O("")},children:"Cancel"})]}):(0,T.jsxs)("button",{className:"project-dropdown__new-btn",onClick:()=>q(!0),children:[(0,T.jsx)(F,{size:16})," New Project"]})})]})]}),x&&(0,T.jsxs)("div",{className:"project-name-edit",children:[(0,T.jsx)("input",{type:"text",className:"project-name-edit__input",value:c.projectName||"",onChange:e=>d({projectName:e.target.value}),placeholder:"Enter project name..."}),c.lastUpdated&&(0,T.jsxs)("span",{className:"project-name-edit__saved",children:["Saved ",new Date(c.lastUpdated).toLocaleTimeString()]})]})]}),(0,T.jsxs)("section",{className:"dashboard__welcome",children:[(0,T.jsxs)("div",{className:"dashboard__welcome-content",children:[(0,T.jsx)("h1",{className:"dashboard__title",children:U?"Welcome back":"Welcome to N4S"}),(0,T.jsx)("p",{className:"dashboard__subtitle",children:c.projectName?"Managing: ".concat(c.projectName):"Ultra-Luxury Residential Advisory Platform"})]}),x?!U&&(0,T.jsxs)("button",{className:"btn btn--primary",onClick:()=>o("kyc"),children:["Continue KYC ",(0,T.jsx)(A,{size:18})]}):(0,T.jsxs)("button",{className:"btn btn--primary",onClick:()=>{S("New Project"),o("kyc")},children:["Start New Project ",(0,T.jsx)(A,{size:18})]})]}),(0,T.jsxs)("section",{className:"dashboard__matrix",children:[(0,T.jsx)("h2",{className:"dashboard__section-title",children:"N4S Task Matrix"}),(0,T.jsxs)("div",{className:"task-matrix",children:[(0,T.jsxs)("div",{className:"task-matrix__header",children:[(0,T.jsx)("div",{className:"task-matrix__corner"}),Object.entries(ge).map(e=>{let[t,n]=e;return(0,T.jsxs)("div",{className:"task-matrix__module-header task-matrix__module-header--".concat(n.color),children:[(0,T.jsx)("span",{className:"task-matrix__code",children:t}),(0,T.jsx)("span",{className:"task-matrix__name",children:n.name})]},t)})]}),Object.entries(ve).map(e=>{let[t,n]=e;return(0,T.jsxs)("div",{className:"task-matrix__row",children:[(0,T.jsxs)("div",{className:"task-matrix__phase-header",children:[(0,T.jsx)("span",{className:"task-matrix__phase-code",children:t}),(0,T.jsx)("span",{className:"task-matrix__phase-name",children:n.name})]}),Object.entries(ge).map(e=>{let[a,i]=e;const r=((e,t)=>{const n=J(t);if("not-started"===n)return"pending";if("locked"===n)return"locked";if("complete"===n)return"complete";if("A"===t){if("P1"===e)return Y>30?"complete":"in-progress";if("P2"===e)return Y>60?"in-progress":"pending";if("P3"===e)return Y>90?"in-progress":"pending"}if("C"===t){if("P1"===e)return Q>30?"complete":"in-progress";if("P2"===e)return Q>60?"in-progress":"pending";if("P3"===e)return Q>90?"in-progress":"pending"}if("M"===t){if("P1"===e)return"in-progress";if("P2"===e)return"pending";if("P3"===e)return"pending"}return"pending"})(t,a),o="".concat(t,".").concat(a);return(0,T.jsxs)("div",{className:"task-cell ".concat(ee(r)),title:"".concat(o,": ").concat(n.name," - ").concat(i.fullName),children:[(0,T.jsx)("span",{className:"task-cell__code",children:o}),"complete"===r&&(0,T.jsx)(N,{size:14}),"in-progress"===r&&(0,T.jsx)(w,{size:14})]},o)})]},t)})]}),(0,T.jsxs)("div",{className:"task-matrix__legend",children:[(0,T.jsxs)("span",{className:"legend-item",children:[(0,T.jsx)("span",{className:"legend-dot legend-dot--complete"})," Complete"]}),(0,T.jsxs)("span",{className:"legend-item",children:[(0,T.jsx)("span",{className:"legend-dot legend-dot--active"})," In Progress"]}),(0,T.jsxs)("span",{className:"legend-item",children:[(0,T.jsx)("span",{className:"legend-dot legend-dot--pending"})," Pending"]}),(0,T.jsxs)("span",{className:"legend-item",children:[(0,T.jsx)("span",{className:"legend-dot legend-dot--locked"})," Locked"]})]})]}),c.principalName&&(0,T.jsxs)("section",{className:"dashboard__stats",children:[(0,T.jsxs)("div",{className:"stat-card",children:[(0,T.jsx)("div",{className:"stat-card__icon stat-card__icon--blue",children:(0,T.jsx)(h,{size:24})}),(0,T.jsxs)("div",{className:"stat-card__content",children:[(0,T.jsxs)("span",{className:"stat-card__value",children:[Y,"%"]}),(0,T.jsx)("span",{className:"stat-card__label",children:"KYC Complete"})]})]}),(0,T.jsxs)("div",{className:"stat-card",children:[(0,T.jsx)("div",{className:"stat-card__icon stat-card__icon--purple",children:(0,T.jsx)(v,{size:24})}),(0,T.jsxs)("div",{className:"stat-card__content",children:[(0,T.jsx)("span",{className:"stat-card__value",children:Object.values(g.selections||{}).filter(e=>null===e||void 0===e?void 0:e.included).length}),(0,T.jsx)("span",{className:"stat-card__label",children:"Spaces Selected"})]})]}),(0,T.jsxs)("div",{className:"stat-card",children:[(0,T.jsx)("div",{className:"stat-card__icon stat-card__icon--teal",children:(0,T.jsx)(L,{size:24})}),(0,T.jsxs)("div",{className:"stat-card__content",children:[(0,T.jsx)("span",{className:"stat-card__value",children:null!==(n=g.settings)&&void 0!==n&&n.targetSF?g.settings.targetSF.toLocaleString():"\u2014"}),(0,T.jsx)("span",{className:"stat-card__label",children:"Target SF"})]})]}),(0,T.jsxs)("div",{className:"stat-card",children:[(0,T.jsx)("div",{className:"stat-card__icon stat-card__icon--gold",children:(0,T.jsx)(M,{size:24})}),(0,T.jsxs)("div",{className:"stat-card__content",children:[(0,T.jsx)("span",{className:"stat-card__value",children:(null===(i=g.settings)||void 0===i||null===(r=i.programTier)||void 0===r?void 0:r.toUpperCase())||"\u2014"}),(0,T.jsx)("span",{className:"stat-card__label",children:"Program Tier"})]})]})]}),(0,T.jsxs)("section",{className:"dashboard__modules",children:[(0,T.jsx)("h2",{className:"dashboard__section-title",children:"Modules"}),(0,T.jsx)("div",{className:"dashboard__module-grid",children:te.map(e=>{const t=e.icon;return(0,T.jsxs)("div",{className:"module-card module-card--".concat(e.color," ").concat(e.comingSoon?"module-card--disabled":""," ").concat("locked"===e.status?"module-card--locked":""),onClick:()=>e.enabled&&o(e.id),children:[(0,T.jsxs)("div",{className:"module-card__header",children:[(0,T.jsx)("div",{className:"module-card__icon",children:(0,T.jsx)(t,{size:28})}),ne(e.status,e.comingSoon)]}),(0,T.jsx)("h3",{className:"module-card__title",children:e.title}),(0,T.jsx)("p",{className:"module-card__subtitle",children:e.subtitle}),(0,T.jsx)("p",{className:"module-card__description",children:e.description}),!e.comingSoon&&"locked"!==e.status&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"module-card__progress",children:[(0,T.jsx)("div",{className:"progress-bar",children:(0,T.jsx)("div",{className:"progress-bar__fill",style:{width:"".concat(e.progress,"%")}})}),(0,T.jsxs)("span",{className:"progress-bar__label",children:[e.progress,"% Complete"]})]}),(0,T.jsxs)("button",{className:"module-card__cta",children:["not-started"===e.status?"Begin":"Continue"," ",(0,T.jsx)(A,{size:16})]})]})]},e.id)})})]}),(0,T.jsxs)("section",{className:"dashboard__workflow",children:[(0,T.jsx)("h2",{className:"dashboard__section-title",children:"N4S Methodology"}),(0,T.jsx)("div",{className:"workflow-phases",children:Object.entries(ve).map((e,t)=>{let[n,i]=e;return(0,T.jsxs)(a.Fragment,{children:[(0,T.jsxs)("div",{className:"workflow-phase",children:[(0,T.jsx)("div",{className:"workflow-phase__code",children:n}),(0,T.jsxs)("div",{className:"workflow-phase__content",children:[(0,T.jsx)("h4",{children:i.name}),(0,T.jsx)("p",{children:i.description})]})]}),t<Object.entries(ve).length-1&&(0,T.jsx)("div",{className:"workflow-phase__connector"})]},n)})})]})]})},be=d("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),xe=d("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Se=d("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),je=d("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),we=d("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Ne=d("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ke=d("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),_e=d("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ce=d("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Pe=d("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Fe=d("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Ae=d("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Le="#1e3a5f",Me="#c9a227",Re="#fafaf8",Ie="#ffffff",Te="#e5e5e0",ze="#1a1a1a",De="#6b6b6b",Ee="#2e7d32",Oe="#f57c00",Be="#d32f2f",qe="#0d9488";function He(e){let{title:t,children:n,defaultOpen:i=!1}=e;const[r,o]=(0,a.useState)(i);return(0,T.jsxs)("div",{className:"doc-expandable",children:[(0,T.jsxs)("button",{className:"doc-expandable-header",onClick:()=>o(!r),children:[r?(0,T.jsx)(C,{size:18}):(0,T.jsx)(x,{size:18}),(0,T.jsx)("span",{children:t})]}),r&&(0,T.jsx)("div",{className:"doc-expandable-content",children:n})]})}function Ge(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"What is KYC?"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Know Your Client (KYC) is the foundation of your N4S mansion program. This module captures everything about how you live, what you value, and what you need from your home. Every question serves a purpose\u2014your answers directly shape the space recommendations, adjacency requirements, and design guidelines that follow."}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Think of KYC as your architectural interview. Just as a bespoke tailor measures more than your waist size, we capture the nuances of your lifestyle that make the difference between a house and your home."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"What Your Answers Determine"}),(0,T.jsxs)("ul",{className:"doc-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Space Program"}),(0,T.jsx)("p",{children:"Which rooms your home needs, their sizes, and how many of each"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Adjacency Requirements"}),(0,T.jsx)("p",{children:"Which spaces should be close, which should be separated, and why"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Operational Needs"}),(0,T.jsx)("p",{children:"Staffing support, service routes, and back-of-house infrastructure"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Design Direction"}),(0,T.jsx)("p",{children:"Style preferences, material affinities, and visual language for your team"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Respondent Types"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"KYC captures perspectives from multiple decision-makers to ensure the home works for everyone."}),(0,T.jsxs)("div",{className:"doc-respondent-grid",children:[(0,T.jsxs)("div",{className:"doc-respondent doc-respondent--navy",children:[(0,T.jsxs)("div",{className:"doc-respondent-header",children:[(0,T.jsx)(h,{size:20}),(0,T.jsx)("h4",{children:"Principal"})]}),(0,T.jsx)("p",{children:"Primary decision-maker who completes all sections. Captures core project parameters, budget framework, and household composition."}),(0,T.jsx)("div",{className:"doc-respondent-sections",children:(0,T.jsx)("span",{children:"All 9 sections"})})]}),(0,T.jsxs)("div",{className:"doc-respondent doc-respondent--teal",children:[(0,T.jsxs)("div",{className:"doc-respondent-header",children:[(0,T.jsx)(h,{size:20}),(0,T.jsx)("h4",{children:"Secondary"})]}),(0,T.jsx)("p",{children:"Spouse or co-decision-maker who provides their own perspective on taste, lifestyle, and space priorities. Selections are additive, not deviations."}),(0,T.jsx)("div",{className:"doc-respondent-sections",children:(0,T.jsx)("span",{children:"3 sections: Design, Lifestyle, Space"})})]})]})]}),(0,T.jsxs)("div",{className:"doc-card doc-card--highlight",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Capture Depth Options"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Choose the level of detail based on your timeline and how well-defined your requirements are."}),(0,T.jsxs)("div",{className:"doc-capture-options",children:[(0,T.jsxs)("div",{className:"doc-capture-option",children:[(0,T.jsx)("div",{className:"doc-capture-badge",children:"Quick Capture"}),(0,T.jsx)("div",{className:"doc-capture-time",children:"15-20 min"}),(0,T.jsx)("p",{children:"Core sections only. Best for clients with clear requirements or time constraints. Covers essentials: portfolio, family, project parameters, budget, design, and space requirements."})]}),(0,T.jsxs)("div",{className:"doc-capture-option",children:[(0,T.jsx)("div",{className:"doc-capture-badge doc-capture-badge--full",children:"Full Discovery"}),(0,T.jsx)("div",{className:"doc-capture-time",children:"45-60 min"}),(0,T.jsx)("p",{children:"All sections including Lifestyle & Living, Cultural Context, and Working Preferences. Best for complex projects or clients who want maximum customization."})]})]})]})]})}function We(){const e=[{code:"P1.A.1",title:"Portfolio Context",icon:be,principal:!0,secondary:!1,tier:"quick",description:"Your real estate portfolio and this project's role within it.",captures:["Primary residence vs. vacation home vs. investment","Other properties in your portfolio","Intended use frequency and duration","Long-term ownership intentions"],impacts:["Infrastructure redundancy requirements","Staff accommodation needs","Smart home / remote monitoring scope"]},{code:"P1.A.2",title:"Family & Household",icon:h,principal:!0,secondary:!1,tier:"quick",description:"Who lives in or regularly visits your home.",captures:["Permanent residents and ages","Regular visitors (parents, adult children)","Staff requirements (live-in vs. day staff)","Pet accommodations"],impacts:["Bedroom count and configuration","Guest suite autonomy level","Staff quarters scope","Accessibility considerations"]},{code:"P1.A.3",title:"Project Parameters",icon:u,principal:!0,secondary:!1,tier:"quick",description:"Physical scope and site constraints.",captures:["Target square footage","Number of levels (including basement)","Site conditions and buildable area","Timeline expectations"],impacts:["Program tier selection (5K/10K/15K/20K)","Vertical circulation requirements","MEP complexity level"]},{code:"P1.A.4",title:"Budget Framework",icon:xe,principal:!0,secondary:!1,tier:"quick",description:"Investment parameters and value priorities.",captures:["Construction budget range","FF&E and landscape budgets","Value engineering tolerance","Investment horizon"],impacts:["Finish level recommendations","MEP system complexity","Phasing opportunities"]},{code:"P1.A.5",title:"Design Preferences",icon:L,principal:!0,secondary:!0,tier:"quick",description:"Visual and stylistic preferences for your home.",captures:["Taste exploration (110 image quads)","Material affinities","Color palette preferences","Reference projects or designers"],impacts:["Design DNA profile for your team","Finish specifications direction","Consultant selection criteria"]},{code:"P1.A.6",title:"Lifestyle & Living",icon:Se,principal:!0,secondary:!0,tier:"full",description:"How you actually live day-to-day.",captures:["Entertaining frequency and scale","Morning and evening routines","Work-from-home requirements","Hobbies and collections"],impacts:["Kitchen and dining sizing","Privacy posture requirements","Specialty room recommendations"]},{code:"P1.A.7",title:"Space Requirements",icon:je,principal:!0,secondary:!0,tier:"quick",description:"Specific room needs and priorities.",captures:["Must-have spaces","Nice-to-have spaces","Space size preferences","Special equipment or collections"],impacts:["FYI space program generation","Square footage allocation","Zone distribution"]},{code:"P1.A.8",title:"Cultural Context",icon:we,principal:!0,secondary:!1,tier:"full",description:"Cultural and regional considerations.",captures:["Cultural background and traditions","Religious observances","Regional climate expectations","Local customs and entertaining norms"],impacts:["Specialty space requirements","Kitchen equipment needs","Orientation and layout preferences"]},{code:"P1.A.9",title:"Working Preferences",icon:be,principal:!0,secondary:!1,tier:"full",description:"How you prefer to work with your design team.",captures:["Decision-making style","Communication preferences","Review meeting frequency","Change tolerance"],impacts:["Project management approach","Presentation format recommendations","Approval workflow structure"]}];return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"KYC Section Guide"}),(0,T.jsx)("p",{className:"doc-paragraph",children:'Complete each section to build your personalized mansion program. Sections marked with "Full Discovery" are optional in Quick Capture mode but provide valuable detail for complex projects.'})]}),e.map((e,t)=>(0,T.jsxs)("div",{className:"doc-section-card",children:[(0,T.jsxs)("div",{className:"doc-section-card__header",children:[(0,T.jsx)("div",{className:"doc-section-card__code",children:e.code}),(0,T.jsxs)("div",{className:"doc-section-card__title-group",children:[(0,T.jsxs)("h3",{className:"doc-section-card__title",children:[(0,T.jsx)(e.icon,{size:18}),e.title]}),(0,T.jsxs)("div",{className:"doc-section-card__badges",children:["full"===e.tier&&(0,T.jsx)("span",{className:"doc-section-badge doc-section-badge--full",children:"Full Discovery"}),e.secondary&&(0,T.jsx)("span",{className:"doc-section-badge doc-section-badge--secondary",children:"Secondary"})]})]})]}),(0,T.jsx)("p",{className:"doc-section-card__description",children:e.description}),(0,T.jsxs)("div",{className:"doc-section-card__details",children:[(0,T.jsxs)("div",{className:"doc-section-card__column",children:[(0,T.jsx)("h4",{children:"What We Capture"}),(0,T.jsx)("ul",{children:e.captures.map((e,t)=>(0,T.jsx)("li",{children:e},t))})]}),(0,T.jsxs)("div",{className:"doc-section-card__column",children:[(0,T.jsx)("h4",{children:"What It Impacts"}),(0,T.jsx)("ul",{children:e.impacts.map((e,t)=>(0,T.jsx)("li",{children:e},t))})]})]})]},e.code)),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Completion Tips"}),(0,T.jsxs)("div",{className:"doc-tips-grid",children:[(0,T.jsxs)("div",{className:"doc-tip-card",children:[(0,T.jsx)(Ce,{size:18,className:"doc-tip-icon"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Answer for how you actually live"}),(0,T.jsx)("p",{children:"Not how you think you should live. Authenticity leads to better design."})]})]}),(0,T.jsxs)("div",{className:"doc-tip-card",children:[(0,T.jsx)(Ce,{size:18,className:"doc-tip-icon"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Think 10 years ahead"}),(0,T.jsx)("p",{children:"Consider aging parents, growing children, and lifestyle changes."})]})]}),(0,T.jsxs)("div",{className:"doc-tip-card",children:[(0,T.jsx)(Ce,{size:18,className:"doc-tip-icon"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Both respondents should complete independently"}),(0,T.jsx)("p",{children:"Don't compare answers until both are finished. Differences are valuable data."})]})]}),(0,T.jsxs)("div",{className:"doc-tip-card",children:[(0,T.jsx)(Ce,{size:18,className:"doc-tip-icon"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"You can return and edit"}),(0,T.jsx)("p",{children:"Answers save automatically. Come back anytime to refine your responses."})]})]})]})]})]})}function Ue(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Data Quality Gates"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"KYC data flows downstream to FYI and MVP modules. Incomplete or inconsistent data will cause issues later. These gates ensure data quality before proceeding."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Completeness Requirements"}),(0,T.jsxs)("div",{className:"doc-gate-table",children:[(0,T.jsxs)("div",{className:"doc-gate-row doc-gate-row--header",children:[(0,T.jsx)("span",{children:"Gate"}),(0,T.jsx)("span",{children:"Requirement"}),(0,T.jsx)("span",{children:"Impact if Missing"})]}),(0,T.jsxs)("div",{className:"doc-gate-row",children:[(0,T.jsx)("span",{className:"doc-gate-label",children:"Target SF"}),(0,T.jsx)("span",{children:"Must be specified in Project Parameters"}),(0,T.jsx)("span",{className:"doc-gate-impact",children:"Cannot determine tier or generate FYI program"})]}),(0,T.jsxs)("div",{className:"doc-gate-row",children:[(0,T.jsx)("span",{className:"doc-gate-label",children:"Bedroom Count"}),(0,T.jsx)("span",{children:"Must specify number of bedrooms needed"}),(0,T.jsx)("span",{className:"doc-gate-impact",children:"Cannot size guest wing or generate suite program"})]}),(0,T.jsxs)("div",{className:"doc-gate-row",children:[(0,T.jsx)("span",{className:"doc-gate-label",children:"Household Composition"}),(0,T.jsx)("span",{children:"At least one family member defined"}),(0,T.jsx)("span",{className:"doc-gate-impact",children:"Cannot recommend accessibility or kids' spaces"})]}),(0,T.jsxs)("div",{className:"doc-gate-row",children:[(0,T.jsx)("span",{className:"doc-gate-label",children:"Entertaining Profile"}),(0,T.jsx)("span",{children:"Frequency and scale indicators set"}),(0,T.jsx)("span",{className:"doc-gate-impact",children:"Cannot size formal zones or recommend bridges"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Downstream Module Dependencies"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Your KYC answers directly control what appears in subsequent modules."}),(0,T.jsxs)("div",{className:"doc-dependency",children:[(0,T.jsxs)("div",{className:"doc-dependency-arrow",children:[(0,T.jsx)("span",{className:"doc-dependency-from",children:"KYC"}),(0,T.jsx)("span",{className:"doc-dependency-to",children:"FYI"})]}),(0,T.jsxs)("div",{className:"doc-dependency-content",children:[(0,T.jsx)("h4",{children:"Space Program Generation"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Target SF \u2192 Tier selection (5K/10K/15K/20K) \u2192 Base template"}),(0,T.jsx)("li",{children:"Bedroom count \u2192 Guest suite quantity"}),(0,T.jsx)("li",{children:"Staff level \u2192 Staff quarters and service zones"}),(0,T.jsx)("li",{children:"Entertaining frequency \u2192 Formal space sizing"}),(0,T.jsx)("li",{children:"Hobbies/collections \u2192 Specialty room recommendations"})]})]})]}),(0,T.jsxs)("div",{className:"doc-dependency",children:[(0,T.jsxs)("div",{className:"doc-dependency-arrow",children:[(0,T.jsx)("span",{className:"doc-dependency-from",children:"KYC"}),(0,T.jsx)("span",{className:"doc-dependency-to",children:"MVP"})]}),(0,T.jsxs)("div",{className:"doc-dependency-content",children:[(0,T.jsx)("h4",{children:"Adjacency Requirements"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Privacy posture \u2192 Red flag thresholds"}),(0,T.jsx)("li",{children:"Staffing level \u2192 Service spine requirements"}),(0,T.jsx)("li",{children:"Entertaining style \u2192 Bridge recommendations"}),(0,T.jsx)("li",{children:"Operating model \u2192 Ops Core need"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Privacy Postures"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Your privacy posture selection in KYC determines how strictly MVP enforces separation between zones. Higher privacy = more red flags for adjacency violations."}),(0,T.jsxs)("div",{className:"doc-privacy-grid",children:[(0,T.jsxs)("div",{className:"doc-privacy-level",children:[(0,T.jsxs)("div",{className:"doc-privacy-badge doc-privacy--casual",children:[(0,T.jsx)(Pe,{size:16}),"Casual"]}),(0,T.jsx)("p",{children:"Open floor plan friendly. Guests can see into most spaces. Minimal zone separation."}),(0,T.jsx)("span",{className:"doc-privacy-tolerance",children:"High tolerance for adjacencies"})]}),(0,T.jsxs)("div",{className:"doc-privacy-level",children:[(0,T.jsxs)("div",{className:"doc-privacy-badge doc-privacy--balanced",children:[(0,T.jsx)(Fe,{size:16}),"Balanced"]}),(0,T.jsx)("p",{children:"Standard luxury home. Formal and private zones separated. Recommended for most clients."}),(0,T.jsx)("span",{className:"doc-privacy-tolerance",children:"Standard red flag thresholds"})]}),(0,T.jsxs)("div",{className:"doc-privacy-level",children:[(0,T.jsxs)("div",{className:"doc-privacy-badge doc-privacy--private",children:[(0,T.jsx)(Ae,{size:16}),"Private"]}),(0,T.jsx)("p",{children:"Maximum zone separation. Service completely invisible. Primary suite isolated."}),(0,T.jsx)("span",{className:"doc-privacy-tolerance",children:"Strict red flag enforcement"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Operating Models"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Your operating model determines the service infrastructure your home requires."}),(0,T.jsx)(He,{title:"Self-Operated",defaultOpen:!0,children:(0,T.jsxs)("div",{className:"doc-operating-model",children:[(0,T.jsx)("p",{children:"Family manages all household operations. No live-in staff."}),(0,T.jsxs)("div",{className:"doc-model-impacts",children:[(0,T.jsx)("strong",{children:"Infrastructure Impact:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Minimal service zones"}),(0,T.jsx)("li",{children:"No staff quarters required"}),(0,T.jsx)("li",{children:"Simplified delivery routes"}),(0,T.jsx)("li",{children:"Package room at entry may suffice"})]})]})]})}),(0,T.jsx)(He,{title:"Day Staff",children:(0,T.jsxs)("div",{className:"doc-operating-model",children:[(0,T.jsx)("p",{children:"Regular housekeeping and/or cooking staff who don't live on-site."}),(0,T.jsxs)("div",{className:"doc-model-impacts",children:[(0,T.jsx)("strong",{children:"Infrastructure Impact:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Service entry and staff break area"}),(0,T.jsx)("li",{children:"Enhanced laundry facilities"}),(0,T.jsx)("li",{children:"Catering support kitchen consideration"}),(0,T.jsx)("li",{children:"Dedicated service circulation preferred"})]})]})]})}),(0,T.jsx)(He,{title:"Full Staff",children:(0,T.jsxs)("div",{className:"doc-operating-model",children:[(0,T.jsx)("p",{children:"Live-in staff including house manager, chef, housekeeping, and/or security."}),(0,T.jsxs)("div",{className:"doc-model-impacts",children:[(0,T.jsx)("strong",{children:"Infrastructure Impact:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Staff quarters with private entry"}),(0,T.jsx)("li",{children:"Ops Core hub required"}),(0,T.jsx)("li",{children:"Full service spine separation"}),(0,T.jsx)("li",{children:"Staff dining/break facilities"}),(0,T.jsx)("li",{children:"Multiple service elevators may be needed"})]})]})]})}),(0,T.jsx)(He,{title:"Estate Management",children:(0,T.jsxs)("div",{className:"doc-operating-model",children:[(0,T.jsx)("p",{children:"Professional estate manager with full support team. Often for 20K+ properties."}),(0,T.jsxs)("div",{className:"doc-model-impacts",children:[(0,T.jsx)("strong",{children:"Infrastructure Impact:"}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:"Estate office suite"}),(0,T.jsx)("li",{children:"Security command center"}),(0,T.jsx)("li",{children:"Multiple staff housing units"}),(0,T.jsx)("li",{children:"Commercial-grade kitchen"}),(0,T.jsx)("li",{children:"Vehicle fleet facilities"})]})]})]})})]})]})}function Ke(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Reference Guide"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Definitions and reference information for KYC terminology and concepts."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Section Code Reference"}),(0,T.jsxs)("div",{className:"doc-code-table",children:[(0,T.jsxs)("div",{className:"doc-code-row doc-code-row--header",children:[(0,T.jsx)("span",{children:"Code"}),(0,T.jsx)("span",{children:"Section"}),(0,T.jsx)("span",{children:"Principal"}),(0,T.jsx)("span",{children:"Secondary"})]}),(0,T.jsxs)("div",{className:"doc-code-row",children:[(0,T.jsx)("code",{children:"P1.A.1"}),(0,T.jsx)("span",{children:"Portfolio Context"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2014"})]}),(0,T.jsxs)("div",{className:"doc-code-row",children:[(0,T.jsx)("code",{children:"P1.A.2"}),(0,T.jsx)("span",{children:"Family & Household"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2014"})]}),(0,T.jsxs)("div",{className:"doc-code-row",children:[(0,T.jsx)("code",{children:"P1.A.3"}),(0,T.jsx)("span",{children:"Project Parameters"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2014"})]}),(0,T.jsxs)("div",{className:"doc-code-row",children:[(0,T.jsx)("code",{children:"P1.A.4"}),(0,T.jsx)("span",{children:"Budget Framework"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2014"})]}),(0,T.jsxs)("div",{className:"doc-code-row doc-code-row--secondary",children:[(0,T.jsx)("code",{children:"P1.A.5"}),(0,T.jsx)("span",{children:"Design Preferences"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2713"})]}),(0,T.jsxs)("div",{className:"doc-code-row doc-code-row--secondary",children:[(0,T.jsx)("code",{children:"P1.A.6"}),(0,T.jsx)("span",{children:"Lifestyle & Living"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2713"})]}),(0,T.jsxs)("div",{className:"doc-code-row doc-code-row--secondary",children:[(0,T.jsx)("code",{children:"P1.A.7"}),(0,T.jsx)("span",{children:"Space Requirements"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2713"})]}),(0,T.jsxs)("div",{className:"doc-code-row",children:[(0,T.jsx)("code",{children:"P1.A.8"}),(0,T.jsx)("span",{children:"Cultural Context"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2014"})]}),(0,T.jsxs)("div",{className:"doc-code-row",children:[(0,T.jsx)("code",{children:"P1.A.9"}),(0,T.jsx)("span",{children:"Working Preferences"}),(0,T.jsx)("span",{children:"\u2713"}),(0,T.jsx)("span",{children:"\u2014"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Taste Exploration Categories"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"The Design Preferences section includes a visual taste exploration with 110 image quads across 10 categories. Each quad presents 4 images\u2014select all that appeal to you."}),(0,T.jsx)(He,{title:"View Categories",children:(0,T.jsxs)("div",{className:"doc-taste-categories",children:[(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"1"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Material Authenticity"}),(0,T.jsx)("p",{children:"Natural vs. manufactured, raw vs. refined"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"2"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Color Temperature"}),(0,T.jsx)("p",{children:"Warm vs. cool palettes, neutral vs. saturated"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"3"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Spatial Volume"}),(0,T.jsx)("p",{children:"Intimate vs. grand, horizontal vs. vertical"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"4"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Light Quality"}),(0,T.jsx)("p",{children:"Diffused vs. dramatic, natural vs. artificial"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"5"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Formal Expression"}),(0,T.jsx)("p",{children:"Traditional vs. contemporary, ornate vs. minimal"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"6"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Indoor-Outdoor"}),(0,T.jsx)("p",{children:"Connection to landscape, threshold preferences"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"7"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Texture Density"}),(0,T.jsx)("p",{children:"Layered vs. clean, tactile vs. smooth"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"8"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Art & Objects"}),(0,T.jsx)("p",{children:"Curated collections vs. minimal display"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"9"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Kitchen Character"}),(0,T.jsx)("p",{children:"Professional vs. concealed, social vs. private"})]})]}),(0,T.jsxs)("div",{className:"doc-taste-category",children:[(0,T.jsx)("span",{className:"doc-taste-number",children:"10"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Bath & Wellness"}),(0,T.jsx)("p",{children:"Spa-like vs. efficient, open vs. private"})]})]})]})})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Entertaining Profiles"}),(0,T.jsx)(He,{title:"View Definitions",children:(0,T.jsxs)("dl",{className:"doc-glossary",children:[(0,T.jsx)("dt",{children:"Rarely Entertain"}),(0,T.jsx)("dd",{children:"Less than once per month. Formal dining optional. Focus on family-scale spaces."}),(0,T.jsx)("dt",{children:"Occasional"}),(0,T.jsx)("dd",{children:"Monthly gatherings of 8-12 guests. Dining room for 10. Basic bar/wine storage."}),(0,T.jsx)("dt",{children:"Regular"}),(0,T.jsx)("dd",{children:"Weekly entertaining, varied scale. Flexible dining (8-20). Butler pantry recommended."}),(0,T.jsx)("dt",{children:"Frequent Large-Scale"}),(0,T.jsx)("dd",{children:"Multiple events per week, often 30+ guests. Catering kitchen. Event lawn/terrace."}),(0,T.jsx)("dt",{children:"Professional"}),(0,T.jsx)("dd",{children:"Charity events, business entertaining. Commercial-grade facilities. Valet staging."})]})})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Glossary"}),(0,T.jsx)(He,{title:"View Definitions",children:(0,T.jsxs)("dl",{className:"doc-glossary",children:[(0,T.jsx)("dt",{children:"Principal Respondent"}),(0,T.jsx)("dd",{children:"Primary decision-maker who completes all KYC sections. Typically the individual who initiated the project."}),(0,T.jsx)("dt",{children:"Secondary Respondent"}),(0,T.jsx)("dd",{children:"Spouse or co-decision-maker who provides independent perspective on taste, lifestyle, and space priorities."}),(0,T.jsx)("dt",{children:"Quick Capture"}),(0,T.jsx)("dd",{children:"Abbreviated KYC mode covering core sections only. Suitable for projects with well-defined requirements or time constraints."}),(0,T.jsx)("dt",{children:"Full Discovery"}),(0,T.jsx)("dd",{children:"Comprehensive KYC mode including all sections. Recommended for complex projects or clients wanting maximum personalization."}),(0,T.jsx)("dt",{children:"Privacy Posture"}),(0,T.jsx)("dd",{children:"Client preference for separation between public, private, and service zones. Affects MVP red flag thresholds."}),(0,T.jsx)("dt",{children:"Operating Model"}),(0,T.jsx)("dd",{children:"How the household is managed\u2014from self-operated to full estate management. Determines service infrastructure requirements."}),(0,T.jsx)("dt",{children:"Taste Exploration"}),(0,T.jsx)("dd",{children:"Visual preference assessment using image quads. Produces Design DNA profile for the design team."}),(0,T.jsx)("dt",{children:"Design DNA"}),(0,T.jsx)("dd",{children:"Consolidated taste profile derived from taste exploration results. Guides design direction and consultant selection."})]})})]})]})}function Ve(e){let{onClose:t}=e;const[n,i]=(0,a.useState)("overview");return(0,T.jsxs)("div",{className:"doc-container",children:[(0,T.jsxs)("div",{className:"doc-header",children:[(0,T.jsx)("div",{className:"doc-header-top",children:t&&(0,T.jsxs)("button",{className:"doc-close-btn",onClick:t,children:[(0,T.jsx)(Z,{size:16}),"Back to KYC"]})}),(0,T.jsx)("h1",{className:"doc-title",children:"Documentation"}),(0,T.jsx)("p",{className:"doc-subtitle",children:"N4S KYC \u2014 Know Your Client Guide"}),(0,T.jsx)("div",{className:"doc-tabs",children:[{id:"overview",label:"Overview"},{id:"workflow",label:"Workflow"},{id:"gates",label:"Gates"},{id:"reference",label:"Reference"}].map(e=>(0,T.jsx)("button",{className:"doc-tab ".concat(n===e.id?"active":""),onClick:()=>i(e.id),children:e.label},e.id))})]}),(0,T.jsxs)("div",{className:"doc-content",children:["overview"===n&&(0,T.jsx)(Ge,{}),"workflow"===n&&(0,T.jsx)(We,{}),"gates"===n&&(0,T.jsx)(Ue,{}),"reference"===n&&(0,T.jsx)(Ke,{})]}),(0,T.jsx)("style",{children:Ye})]})}const Ye="\n/* Base styles inherited from MVPDocumentation */\n.doc-container {\n  min-height: 100vh;\n  background-color: ".concat(Re,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.doc-header {\n  background-color: ").concat(Ie,";\n  border-bottom: 1px solid ").concat(Te,";\n  padding: 1rem 1.5rem 0;\n}\n\n.doc-header-top {\n  margin-bottom: 1rem;\n}\n\n.doc-close-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(Te,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(De,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.doc-close-btn:hover {\n  border-color: ").concat(Le,";\n  color: ").concat(Le,";\n}\n\n.doc-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.75rem;\n  font-weight: 500;\n  color: ").concat(ze,";\n  margin: 0 0 0.25rem 0;\n}\n\n.doc-subtitle {\n  font-size: 0.9375rem;\n  color: ").concat(De,";\n  margin: 0 0 1.5rem 0;\n}\n\n.doc-tabs {\n  display: flex;\n  gap: 0;\n  border: 1px solid ").concat(Te,";\n  border-bottom: none;\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n  background-color: ").concat(Re,";\n}\n\n.doc-tab {\n  flex: 1;\n  padding: 0.875rem 1rem;\n  background-color: transparent;\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(De,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border-right: 1px solid ").concat(Te,";\n}\n\n.doc-tab:last-child {\n  border-right: none;\n}\n\n.doc-tab:hover {\n  background-color: ").concat(Ie,";\n  color: ").concat(ze,";\n}\n\n.doc-tab.active {\n  background-color: ").concat(Ie,";\n  color: ").concat(Le,";\n  box-shadow: inset 0 -2px 0 ").concat(Le,";\n}\n\n.doc-content {\n  padding: 1.5rem;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.doc-tab-content {\n  animation: fadeIn 0.2s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(4px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.doc-card {\n  background-color: ").concat(Ie,";\n  border: 1px solid ").concat(Te,";\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.doc-card--highlight {\n  background-color: #f8f6f1;\n  border-color: ").concat(Me,";\n}\n\n.doc-section-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.375rem;\n  font-weight: 500;\n  color: ").concat(ze,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-subsection-title {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: ").concat(ze,";\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-paragraph {\n  font-size: 0.9375rem;\n  line-height: 1.6;\n  color: ").concat(ze,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-paragraph:last-child {\n  margin-bottom: 0;\n}\n\n.doc-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.doc-list li {\n  display: flex;\n  gap: 0.75rem;\n  padding: 0.75rem 0;\n  border-bottom: 1px solid ").concat(Te,";\n}\n\n.doc-list li:last-child {\n  border-bottom: none;\n}\n\n.doc-list-icon {\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.doc-list-icon.success { color: ").concat(Ee,"; }\n\n.doc-list li strong {\n  display: block;\n  color: ").concat(ze,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-list li p {\n  font-size: 0.875rem;\n  color: ").concat(De,";\n  margin: 0;\n}\n\n/* Respondent Grid */\n.doc-respondent-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.doc-respondent {\n  padding: 1.25rem;\n  border-radius: 8px;\n  border: 1px solid;\n}\n\n.doc-respondent--navy {\n  background-color: rgba(30, 58, 95, 0.05);\n  border-color: ").concat(Le,";\n}\n\n.doc-respondent--teal {\n  background-color: rgba(13, 148, 136, 0.05);\n  border-color: ").concat(qe,";\n}\n\n.doc-respondent-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.75rem;\n}\n\n.doc-respondent--navy .doc-respondent-header { color: ").concat(Le,"; }\n.doc-respondent--teal .doc-respondent-header { color: ").concat(qe,"; }\n\n.doc-respondent-header h4 {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n}\n\n.doc-respondent p {\n  font-size: 0.875rem;\n  color: ").concat(ze,";\n  margin: 0 0 0.75rem 0;\n  line-height: 1.5;\n}\n\n.doc-respondent-sections {\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: ").concat(De,";\n}\n\n/* Capture Options */\n.doc-capture-options {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.doc-capture-option {\n  padding: 1rem;\n  background-color: ").concat(Ie,";\n  border-radius: 6px;\n}\n\n.doc-capture-badge {\n  display: inline-block;\n  padding: 0.25rem 0.5rem;\n  background-color: ").concat(Le,";\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n.doc-capture-badge--full {\n  background-color: ").concat(Me,";\n  color: ").concat(ze,";\n}\n\n.doc-capture-time {\n  font-size: 0.8125rem;\n  color: ").concat(De,";\n  margin-bottom: 0.5rem;\n}\n\n.doc-capture-option p {\n  font-size: 0.875rem;\n  color: ").concat(ze,";\n  margin: 0;\n  line-height: 1.5;\n}\n\n/* Section Cards */\n.doc-section-card {\n  background-color: ").concat(Ie,";\n  border: 1px solid ").concat(Te,";\n  border-radius: 8px;\n  padding: 1.25rem;\n  margin-bottom: 0.75rem;\n}\n\n.doc-section-card__header {\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n  margin-bottom: 0.75rem;\n}\n\n.doc-section-card__code {\n  padding: 0.25rem 0.5rem;\n  background-color: ").concat(Le,";\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  font-family: 'SF Mono', Monaco, monospace;\n  flex-shrink: 0;\n}\n\n.doc-section-card__title-group {\n  flex: 1;\n}\n\n.doc-section-card__title {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 1rem;\n  font-weight: 600;\n  color: ").concat(ze,";\n  margin: 0;\n}\n\n.doc-section-card__badges {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.25rem;\n}\n\n.doc-section-badge {\n  font-size: 0.6875rem;\n  padding: 0.125rem 0.375rem;\n  border-radius: 3px;\n  font-weight: 500;\n}\n\n.doc-section-badge--full {\n  background-color: #fff3e0;\n  color: ").concat(Oe,";\n}\n\n.doc-section-badge--secondary {\n  background-color: rgba(13, 148, 136, 0.1);\n  color: ").concat(qe,";\n}\n\n.doc-section-card__description {\n  font-size: 0.875rem;\n  color: ").concat(De,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-section-card__details {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.doc-section-card__column h4 {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: ").concat(De,";\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin: 0 0 0.5rem 0;\n}\n\n.doc-section-card__column ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.doc-section-card__column li {\n  font-size: 0.8125rem;\n  color: ").concat(ze,";\n  padding: 0.25rem 0;\n  padding-left: 1rem;\n  position: relative;\n}\n\n.doc-section-card__column li::before {\n  content: '\u2022';\n  position: absolute;\n  left: 0;\n  color: ").concat(Le,";\n}\n\n/* Tips Grid */\n.doc-tips-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.doc-tip-card {\n  display: flex;\n  gap: 0.75rem;\n  padding: 1rem;\n  background-color: ").concat(Re,";\n  border-radius: 6px;\n}\n\n.doc-tip-icon {\n  color: ").concat(Le,";\n  flex-shrink: 0;\n}\n\n.doc-tip-card strong {\n  display: block;\n  font-size: 0.875rem;\n  color: ").concat(ze,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-tip-card p {\n  font-size: 0.8125rem;\n  color: ").concat(De,";\n  margin: 0;\n}\n\n/* Gate Table */\n.doc-gate-table {\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  border: 1px solid ").concat(Te,";\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.doc-gate-row {\n  display: grid;\n  grid-template-columns: 120px 1fr 1fr;\n  gap: 1rem;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid ").concat(Te,";\n  font-size: 0.875rem;\n}\n\n.doc-gate-row:last-child {\n  border-bottom: none;\n}\n\n.doc-gate-row--header {\n  background-color: ").concat(Re,";\n  font-weight: 600;\n  color: ").concat(De,";\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.doc-gate-label {\n  font-weight: 500;\n  color: ").concat(Le,";\n}\n\n.doc-gate-impact {\n  color: ").concat(Be,";\n  font-size: 0.8125rem;\n}\n\n/* Dependencies */\n.doc-dependency {\n  padding: 1rem 0;\n  border-bottom: 1px solid ").concat(Te,";\n}\n\n.doc-dependency:last-child {\n  border-bottom: none;\n}\n\n.doc-dependency-arrow {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.75rem;\n}\n\n.doc-dependency-from,\n.doc-dependency-to {\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n\n.doc-dependency-from {\n  background-color: ").concat(Le,";\n  color: #fff;\n}\n\n.doc-dependency-to {\n  background-color: ").concat(Me,";\n  color: ").concat(ze,";\n}\n\n.doc-dependency-arrow::after {\n  content: '\u2192';\n  color: ").concat(De,";\n  font-size: 1rem;\n  position: relative;\n  left: -0.25rem;\n}\n\n.doc-dependency-content h4 {\n  font-size: 0.9375rem;\n  font-weight: 600;\n  color: ").concat(ze,";\n  margin: 0 0 0.5rem 0;\n}\n\n.doc-dependency-content ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.doc-dependency-content li {\n  font-size: 0.8125rem;\n  color: ").concat(ze,";\n  padding: 0.25rem 0;\n  padding-left: 1rem;\n  position: relative;\n}\n\n.doc-dependency-content li::before {\n  content: '\u2192';\n  position: absolute;\n  left: 0;\n  color: ").concat(Me,";\n}\n\n/* Privacy Grid */\n.doc-privacy-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n}\n\n.doc-privacy-level {\n  padding: 1rem;\n  background-color: ").concat(Re,";\n  border-radius: 6px;\n}\n\n.doc-privacy-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n.doc-privacy--casual {\n  background-color: #e8f5e9;\n  color: ").concat(Ee,";\n}\n\n.doc-privacy--balanced {\n  background-color: #e3f2fd;\n  color: #1565c0;\n}\n\n.doc-privacy--private {\n  background-color: #fce4ec;\n  color: #c2185b;\n}\n\n.doc-privacy-level p {\n  font-size: 0.8125rem;\n  color: ").concat(ze,";\n  margin: 0 0 0.5rem 0;\n  line-height: 1.4;\n}\n\n.doc-privacy-tolerance {\n  font-size: 0.75rem;\n  color: ").concat(De,";\n  font-style: italic;\n}\n\n/* Expandable Sections */\n.doc-expandable {\n  border: 1px solid ").concat(Te,";\n  border-radius: 6px;\n  margin-bottom: 0.5rem;\n  overflow: hidden;\n}\n\n.doc-expandable-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background-color: ").concat(Re,";\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(ze,";\n  cursor: pointer;\n  text-align: left;\n}\n\n.doc-expandable-header:hover {\n  background-color: #f0f0eb;\n}\n\n.doc-expandable-content {\n  padding: 1rem;\n  border-top: 1px solid ").concat(Te,";\n}\n\n/* Operating Model */\n.doc-operating-model p {\n  font-size: 0.9375rem;\n  color: ").concat(ze,";\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-model-impacts {\n  padding: 0.75rem;\n  background-color: ").concat(Re,";\n  border-radius: 4px;\n}\n\n.doc-model-impacts strong {\n  font-size: 0.8125rem;\n  color: ").concat(De,";\n}\n\n.doc-model-impacts ul {\n  list-style: none;\n  padding: 0;\n  margin: 0.5rem 0 0 0;\n}\n\n.doc-model-impacts li {\n  font-size: 0.8125rem;\n  color: ").concat(ze,";\n  padding: 0.25rem 0;\n  padding-left: 1rem;\n  position: relative;\n}\n\n.doc-model-impacts li::before {\n  content: '\u2022';\n  position: absolute;\n  left: 0;\n  color: ").concat(Le,";\n}\n\n/* Code Table */\n.doc-code-table {\n  border: 1px solid ").concat(Te,";\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.doc-code-row {\n  display: grid;\n  grid-template-columns: 80px 1fr 80px 80px;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  border-bottom: 1px solid ").concat(Te,";\n  font-size: 0.875rem;\n  align-items: center;\n}\n\n.doc-code-row:last-child {\n  border-bottom: none;\n}\n\n.doc-code-row--header {\n  background-color: ").concat(Re,";\n  font-weight: 600;\n  color: ").concat(De,";\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.doc-code-row--secondary {\n  background-color: rgba(13, 148, 136, 0.03);\n}\n\n.doc-code-row code {\n  font-family: 'SF Mono', Monaco, monospace;\n  font-size: 0.75rem;\n  color: ").concat(Le,";\n}\n\n/* Taste Categories */\n.doc-taste-categories {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.doc-taste-category {\n  display: flex;\n  gap: 0.75rem;\n  align-items: flex-start;\n}\n\n.doc-taste-number {\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ").concat(Le,";\n  color: #fff;\n  border-radius: 50%;\n  font-size: 0.75rem;\n  font-weight: 600;\n  flex-shrink: 0;\n}\n\n.doc-taste-category strong {\n  display: block;\n  font-size: 0.9375rem;\n  color: ").concat(ze,";\n  margin-bottom: 0.125rem;\n}\n\n.doc-taste-category p {\n  font-size: 0.8125rem;\n  color: ").concat(De,";\n  margin: 0;\n}\n\n/* Glossary */\n.doc-glossary {\n  margin: 0;\n}\n\n.doc-glossary dt {\n  font-weight: 600;\n  color: ").concat(ze,";\n  margin-top: 1rem;\n}\n\n.doc-glossary dt:first-child {\n  margin-top: 0;\n}\n\n.doc-glossary dd {\n  margin: 0.25rem 0 0 0;\n  font-size: 0.875rem;\n  color: ").concat(De,";\n  line-height: 1.5;\n}\n\n@media (max-width: 768px) {\n  .doc-respondent-grid,\n  .doc-capture-options,\n  .doc-tips-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-privacy-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-section-card__details {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-gate-row {\n    grid-template-columns: 1fr;\n    gap: 0.5rem;\n  }\n  \n  .doc-code-row {\n    grid-template-columns: 1fr 1fr;\n  }\n}\n"),Ze=d("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$e=e=>{let{label:t,type:n="text",value:a,onChange:i,placeholder:r,required:o=!1,disabled:l=!1,helpText:c,error:d,rows:u=3,min:h,max:p,step:m,className:f=""}=e;const g=e=>{i(e.target.value)},v="field-".concat(t.toLowerCase().replace(/\s+/g,"-"));return(0,T.jsxs)("div",{className:"form-field ".concat(f),children:[(0,T.jsxs)("label",{htmlFor:v,className:"form-field__label",children:[t,o&&(0,T.jsx)("span",{className:"form-field__required",children:"*"})]}),(()=>{const e={id:v,value:a||"",onChange:g,placeholder:r,disabled:l,className:"form-field__input ".concat(d?"form-field__input--error":"")};return"textarea"===n?(0,T.jsx)("textarea",s(s({},e),{},{rows:u})):(0,T.jsx)("input",s(s({},e),{},{type:n,min:h,max:p,step:m}))})(),c&&!d&&(0,T.jsx)("span",{className:"form-field__help",children:c}),d&&(0,T.jsx)("span",{className:"form-field__error",children:d})]})},Qe=e=>{let{label:t,value:n,onChange:a,options:i,placeholder:r="Select...",required:o=!1,disabled:s=!1,helpText:l,error:c,className:d=""}=e;const u="select-".concat(t.toLowerCase().replace(/\s+/g,"-"));return(0,T.jsxs)("div",{className:"form-field ".concat(d),children:[(0,T.jsxs)("label",{htmlFor:u,className:"form-field__label",children:[t,o&&(0,T.jsx)("span",{className:"form-field__required",children:"*"})]}),(0,T.jsxs)("div",{className:"select-wrapper",children:[(0,T.jsxs)("select",{id:u,value:n||"",onChange:e=>{const t=e.target.value,n=isNaN(t)||""===t?t:Number(t);a(n)},disabled:s,className:"form-field__select ".concat(c?"form-field__select--error":""),children:[(0,T.jsx)("option",{value:"",children:r}),i.map(e=>(0,T.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,T.jsx)(C,{className:"select-wrapper__icon",size:18})]}),l&&!c&&(0,T.jsx)("span",{className:"form-field__help",children:l}),c&&(0,T.jsx)("span",{className:"form-field__error",children:c})]})},Je=e=>{let{respondent:t,tier:n}=e;const{kycData:i,updateKYCData:r}=W(),o=i[t].portfolioContext,[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),h=(e,n)=>{r(t,"portfolioContext",{[e]:n})},p=(e,t,n)=>{const a=[...o.primaryResidences||[]];a[e]=s(s({},a[e]),{},{[t]:n}),h("primaryResidences",a)},m="principal"===t,f=parseInt(o.currentPropertyCount)||0;return(0,T.jsxs)("div",{className:"kyc-section",children:[l&&(0,T.jsx)("div",{className:"modal-overlay",children:(0,T.jsxs)("div",{className:"modal",children:[(0,T.jsxs)("div",{className:"modal__header",children:[(0,T.jsx)(Ze,{size:24,className:"modal__icon modal__icon--warning"}),(0,T.jsx)("h3",{children:"Confirm Authority Level"})]}),(0,T.jsxs)("div",{className:"modal__body",children:[(0,T.jsxs)("p",{children:["You are granting ",(0,T.jsx)("strong",{children:3===d?"Level 3: Co-Signatory on Stage Gates":"Level 4: Full Authority Delegated"})," to your Family Office/Advisor."]}),(0,T.jsxs)("p",{className:"modal__warning",children:["This means they will ",3===d?"need to co-sign all stage gate approvals":"have full authority to make decisions on your behalf","."]}),(0,T.jsx)("p",{children:"Are you sure you want to proceed?"})]}),(0,T.jsxs)("div",{className:"modal__actions",children:[(0,T.jsx)("button",{className:"btn btn--secondary",onClick:()=>{c(!1),u(null)},children:"Cancel"}),(0,T.jsx)("button",{className:"btn btn--primary",onClick:()=>{h("familyOfficeAuthorityLevel",d),h("authorityLevelConfirmed",!0),c(!1),u(null)},children:"Confirm Authority Level"})]})]})}),m&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Principal Designation"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"The Principal is the contractual decision-maker who signs all agreements and has final authority on Hard Stop decisions."}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"First Name",value:o.principalFirstName,onChange:e=>h("principalFirstName",e),placeholder:"First name",required:!0}),(0,T.jsx)($e,{label:"Last Name",value:o.principalLastName,onChange:e=>h("principalLastName",e),placeholder:"Last name",required:!0})]}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"Email",type:"email",value:o.principalEmail,onChange:e=>h("principalEmail",e),placeholder:"email@example.com",required:!0}),(0,T.jsx)($e,{label:"Phone",type:"tel",value:o.principalPhone,onChange:e=>h("principalPhone",e),placeholder:"+1 (555) 000-0000"})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Secondary Stakeholder"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Spouse or co-decision-maker (if applicable)"}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"First Name",value:o.secondaryFirstName,onChange:e=>h("secondaryFirstName",e),placeholder:"First name"}),(0,T.jsx)($e,{label:"Last Name",value:o.secondaryLastName,onChange:e=>h("secondaryLastName",e),placeholder:"Last name"})]}),(0,T.jsx)($e,{label:"Email",type:"email",value:o.secondaryEmail,onChange:e=>h("secondaryEmail",e),placeholder:"email@example.com"})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Family Office / Advisor"}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"Family Office Contact",value:o.familyOfficeContact,onChange:e=>h("familyOfficeContact",e),placeholder:"Name and firm (if applicable)"}),(0,T.jsx)(Qe,{label:"Authority Level",value:o.familyOfficeAuthorityLevel,onChange:e=>{const t=parseInt(e);t>=3?(u(t),c(!0)):(h("familyOfficeAuthorityLevel",t),h("authorityLevelConfirmed",!1))},options:[{value:1,label:"Level 1: Advisory Only"},{value:2,label:"Level 2: Veto Power on Budget/Timeline"},{value:3,label:"Level 3: Co-Signatory on Stage Gates"},{value:4,label:"Level 4: Full Authority Delegated"}],placeholder:"Select authority level...",helpText:"Principal must formally designate this"})]}),o.familyOfficeAuthorityLevel>=3&&o.authorityLevelConfirmed&&(0,T.jsxs)("div",{className:"kyc-section__notice kyc-section__notice--info",children:[(0,T.jsx)(Ze,{size:16}),(0,T.jsxs)("span",{children:["Authority Level ",o.familyOfficeAuthorityLevel," confirmed. Stage gates will require ",3===o.familyOfficeAuthorityLevel?"co-signature":"advisor approval","."]})]}),"mvp"!==n&&(0,T.jsx)($e,{label:"Domain Delegation Notes",type:"textarea",value:o.domainDelegationNotes,onChange:e=>h("domainDelegationNotes",e),placeholder:"Document any specific authority delegations (e.g., 'Secondary has authority over children's spaces and her closet')",rows:3})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Portfolio Context"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Understanding the role this property plays in your overall portfolio helps us weight your preferences appropriately."}),(0,T.jsx)($e,{label:"Current Property Count",type:"number",value:o.currentPropertyCount,onChange:e=>h("currentPropertyCount",parseInt(e)||null),placeholder:"Total properties owned",min:0}),f>0&&(0,T.jsxs)("div",{className:"kyc-section__subgroup",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Primary Residence Location(s)"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"12px"},children:"Enter the locations of your existing properties"}),(o.primaryResidences||[]).map((e,t)=>(0,T.jsxs)("div",{className:"residence-row",children:[(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"Property ".concat(t+1," - City"),value:e.city,onChange:e=>p(t,"city",e),placeholder:"City"}),(0,T.jsx)($e,{label:"Country",value:e.country,onChange:e=>p(t,"country",e),placeholder:"Country"})]}),(o.primaryResidences||[]).length>1&&(0,T.jsx)("button",{className:"btn btn--ghost btn--sm residence-row__remove",onClick:()=>(e=>{const t=(o.primaryResidences||[]).filter((t,n)=>n!==e);h("primaryResidences",t)})(t),children:(0,T.jsx)(y,{size:16})})]},t)),(o.primaryResidences||[]).length<f&&(0,T.jsxs)("button",{className:"btn btn--secondary btn--sm",onClick:()=>{const e=o.primaryResidences||[];h("primaryResidences",[...e,{country:"",city:""}])},children:[(0,T.jsx)(F,{size:16})," Add Property Location"]})]}),(0,T.jsx)(Qe,{label:"This Property's Role",value:o.thisPropertyRole,onChange:e=>h("thisPropertyRole",e),options:[{value:"primary",label:"Primary Residence"},{value:"secondary",label:"Secondary/Vacation Home"},{value:"vacation",label:"Vacation Property"},{value:"investment",label:"Investment Property"},{value:"legacy",label:"Legacy/Generational Asset"}],placeholder:"Select the role this property will serve...",required:!0,helpText:"This fundamentally affects how we weight your preferences vs. market considerations"}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)(Qe,{label:"Investment Horizon",value:o.investmentHorizon,onChange:e=>h("investmentHorizon",e),options:[{value:"forever",label:"Forever Home"},{value:"10yr",label:"10+ Years"},{value:"5yr",label:"5-10 Years"},{value:"generational",label:"Generational (Multi-decade)"}],placeholder:"How long do you plan to hold?",required:!0}),"mvp"!==n&&(0,T.jsx)(Qe,{label:"Exit Strategy",value:o.exitStrategy,onChange:e=>h("exitStrategy",e),options:[{value:"personal",label:"Personal Use Only"},{value:"rental",label:"Potential Rental Income"},{value:"sale",label:"Future Sale/Flip"},{value:"inheritance",label:"Family Inheritance"}],placeholder:"Long-term plan for the property..."})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Life Stage & Timeline"}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)(Qe,{label:"Life Stage",value:o.lifeStage,onChange:e=>h("lifeStage",e),options:[{value:"building",label:"Building Family (Young Children)"},{value:"established",label:"Established Family (Teen/Adult Children)"},{value:"empty-nest",label:"Empty Nest"},{value:"retirement",label:"Retirement"},{value:"multi-gen",label:"Multi-Generational Household"}],placeholder:"Current household life stage...",required:!0}),(0,T.jsx)(Qe,{label:"Decision Timeline",value:o.decisionTimeline,onChange:e=>h("decisionTimeline",e),options:[{value:"urgent",label:"Urgent (< 6 months)"},{value:"standard",label:"Standard (6-12 months)"},{value:"flexible",label:"Flexible (12+ months)"}],placeholder:"How quickly do you need to move?",required:!0})]})]}),o.thisPropertyRole&&o.investmentHorizon&&(0,T.jsxs)("div",{className:"kyc-section__insight",children:[(0,T.jsx)("h4",{className:"kyc-section__insight-title",children:"KYC-KYM Weighting Preview"}),(0,T.jsx)("p",{className:"kyc-section__insight-text",children:"Based on your selections, we will weight your assessment:"}),(0,T.jsxs)("div",{className:"weighting-indicator",children:[(0,T.jsxs)("div",{className:"weighting-indicator__bar",children:[(0,T.jsx)("div",{className:"weighting-indicator__kyc",style:{width:"primary"===o.thisPropertyRole&&"forever"===o.investmentHorizon?"70%":"investment"===o.thisPropertyRole?"30%":"50%"},children:"KYC (Your Preferences)"}),(0,T.jsx)("div",{className:"weighting-indicator__kym",children:"KYM (Market Realities)"})]}),(0,T.jsx)("p",{className:"weighting-indicator__explanation",children:"primary"===o.thisPropertyRole&&"forever"===o.investmentHorizon?"Forever home: Your personal preferences take priority over resale considerations.":"investment"===o.thisPropertyRole?"Investment property: Market realities and resale value take priority.":"Balanced approach: Both your preferences and market considerations are weighted equally."})]})]})]})},Xe=e=>{let{respondent:t,tier:n}=e;const{kycData:i,updateKYCData:r}=W(),o=i[t].familyHousehold,l=(e,n)=>{r(t,"familyHousehold",{[e]:n})},[c,d]=(0,a.useState)({name:"",age:"",role:"",specialNeeds:""}),u=[{value:"adult",label:"Adult"},{value:"teenager",label:"Teenager (13-17)"},{value:"child",label:"Child (6-12)"},{value:"young-child",label:"Young Child (0-5)"},{value:"elderly",label:"Elderly Parent/Relative"}];return(0,T.jsxs)("div",{className:"kyc-section",children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Family Members"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Add all family members who will use this residence. This helps us understand spatial requirements and room programming."}),o.familyMembers&&o.familyMembers.length>0&&(0,T.jsx)("div",{className:"family-members-list",children:o.familyMembers.map(e=>{var t;return(0,T.jsxs)("div",{className:"family-member-card",children:[(0,T.jsx)("div",{className:"family-member-card__icon",children:(0,T.jsx)(ke,{size:20})}),(0,T.jsxs)("div",{className:"family-member-card__content",children:[(0,T.jsx)("span",{className:"family-member-card__name",children:e.name}),(0,T.jsxs)("span",{className:"family-member-card__details",children:[e.age&&"Age ".concat(e.age),e.role&&" \u2022 ".concat((null===(t=u.find(t=>t.value===e.role))||void 0===t?void 0:t.label)||e.role)]}),e.specialNeeds&&(0,T.jsx)("span",{className:"family-member-card__needs",children:e.specialNeeds})]}),(0,T.jsx)("button",{className:"family-member-card__remove",onClick:()=>(e=>{const t=o.familyMembers.filter(t=>t.id!==e);l("familyMembers",t)})(e.id),"aria-label":"Remove member",children:(0,T.jsx)(y,{size:16})})]},e.id)})}),(0,T.jsxs)("div",{className:"add-member-form",children:[(0,T.jsxs)("div",{className:"form-grid form-grid--4col",children:[(0,T.jsx)($e,{label:"Name",value:c.name,onChange:e=>d(s(s({},c),{},{name:e})),placeholder:"First name"}),(0,T.jsx)($e,{label:"Age",type:"number",value:c.age,onChange:e=>d(s(s({},c),{},{age:e})),placeholder:"Age",min:0,max:120}),(0,T.jsx)(Qe,{label:"Role",value:c.role,onChange:e=>d(s(s({},c),{},{role:e})),options:u,placeholder:"Select..."}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"\xa0"}),(0,T.jsxs)("button",{className:"btn btn--secondary btn--full",onClick:()=>{if(c.name){const e=[...o.familyMembers||[],s(s({},c),{},{id:Date.now()})];l("familyMembers",e),d({name:"",age:"",role:"",specialNeeds:""})}},disabled:!c.name,children:[(0,T.jsx)(F,{size:18})," Add"]})]})]}),"mvp"!==n&&(0,T.jsx)($e,{label:"Special Needs / Accommodations",value:c.specialNeeds,onChange:e=>d(s(s({},c),{},{specialNeeds:e})),placeholder:"Mobility, sensory, medical requirements..."})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Pets"}),(0,T.jsx)($e,{label:"Pets",value:o.pets,onChange:e=>l("pets",e),placeholder:"e.g., 2 dogs (Golden Retrievers), 1 cat - all indoor",helpText:"Include type, quantity, and indoor/outdoor status"}),o.pets&&""!==o.pets.trim()&&(0,T.jsxs)("div",{className:"form-grid form-grid--2col",style:{marginTop:"1rem"},children:[(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Pet Grooming/Washing Room?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Dedicated space for pet bathing and grooming"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.petGroomingRoom?"toggle-btn--active":""),onClick:()=>l("petGroomingRoom",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.petGroomingRoom?"":"toggle-btn--active"),onClick:()=>l("petGroomingRoom",!1),children:"No"})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Outdoor Dog Run?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Fenced outdoor area for dogs to exercise"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.petDogRun?"toggle-btn--active":""),onClick:()=>l("petDogRun",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.petDogRun?"":"toggle-btn--active"),onClick:()=>l("petDogRun",!1),children:"No"})]})]})]})]}),"mvp"!==n&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Staff & Multi-Generational"}),(0,T.jsx)(Qe,{label:"Staffing Level",value:o.staffingLevel,onChange:e=>l("staffingLevel",e),options:[{value:"none",label:"No Staff"},{value:"part_time",label:"Part-Time Staff (cleaning, etc.)"},{value:"full_time",label:"Full-Time Staff (daily presence)"},{value:"live_in",label:"Live-In Staff (requires quarters)"}],placeholder:"Select staffing level...",helpText:"Affects service areas and staff accommodation requirements"}),"live_in"===o.staffingLevel&&(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"Live-in Staff Count",type:"number",value:o.liveInStaff,onChange:e=>l("liveInStaff",parseInt(e)||null),placeholder:"Number of live-in staff",min:0}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Staff Quarters Required?"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.staffAccommodationRequired?"toggle-btn--active":""),onClick:()=>l("staffAccommodationRequired",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.staffAccommodationRequired?"":"toggle-btn--active"),onClick:()=>l("staffAccommodationRequired",!1),children:"No"})]})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Multi-Generational Needs?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Will parents or in-laws be living with you?"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.multigenerationalNeeds?"toggle-btn--active":""),onClick:()=>l("multigenerationalNeeds",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.multigenerationalNeeds?"":"toggle-btn--active"),onClick:()=>l("multigenerationalNeeds",!1),children:"No"})]})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Anticipated Changes"}),(0,T.jsx)($e,{label:"Family Changes Expected",type:"textarea",value:o.anticipatedFamilyChanges,onChange:e=>l("anticipatedFamilyChanges",e),placeholder:"Any expected changes? Growing family, children leaving for college, aging parents moving in...",rows:3})]})]})]})},et=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=W(),r=a[t].projectParameters,o=(e,n)=>{i(t,"projectParameters",{[e]:n})},s=1+(r.levelsAboveArrival||0)+(r.levelsBelowArrival||0);return(0,T.jsxs)("div",{className:"kyc-section",children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Project Identification"}),(0,T.jsx)($e,{label:"Project Name",value:r.projectName,onChange:e=>o("projectName",e),placeholder:"e.g., Smith Residence, Villa Azure, The Thornwood Estate",required:!0})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Location"}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"City",value:r.projectCity,onChange:e=>o("projectCity",e),placeholder:"e.g., Dubai, Los Angeles, London",required:!0}),(0,T.jsx)($e,{label:"Country",value:r.projectCountry,onChange:e=>o("projectCountry",e),placeholder:"e.g., UAE, USA, UK",required:!0})]}),(0,T.jsx)($e,{label:"Specific Address / Site",value:r.specificAddress,onChange:e=>o("specificAddress",e),placeholder:"If known - street address or development name"}),(0,T.jsx)(Qe,{label:"Site Typology",value:r.siteTypology,onChange:e=>o("siteTypology",e),options:[{value:"hillside",label:"Hillside"},{value:"waterfront",label:"Waterfront"},{value:"urban",label:"Urban"},{value:"suburban",label:"Suburban"},{value:"rural",label:"Rural"},{value:"desert",label:"Desert"}],placeholder:"Select site type...",helpText:"Affects architect matching and design approach"})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Project Scope"}),(0,T.jsx)(Qe,{label:"Property Type",value:r.propertyType,onChange:e=>o("propertyType",e),options:[{value:"new-build",label:"New Build (Ground Up)"},{value:"renovation",label:"Major Renovation"},{value:"addition",label:"Addition to Existing"},{value:"interior-only",label:"Interior Renovation Only"}],placeholder:"Select project type...",required:!0}),(0,T.jsxs)("div",{className:"form-grid form-grid--3col",children:[(0,T.jsx)($e,{label:"Target Gross SF",type:"number",value:r.targetGSF,onChange:e=>o("targetGSF",parseInt(e)||null),placeholder:"Total square feet",min:0,required:!0}),(0,T.jsx)($e,{label:"Bedrooms",type:"number",value:r.bedroomCount,onChange:e=>o("bedroomCount",parseInt(e)||null),placeholder:"Count",min:0,required:!0}),(0,T.jsx)($e,{label:"Bathrooms",type:"number",value:r.bathroomCount,onChange:e=>o("bathroomCount",parseInt(e)||null),placeholder:"Count",min:0})]}),(0,T.jsx)($e,{label:"SF Budget Cap (Optional)",type:"number",value:r.sfCapConstraint,onChange:e=>o("sfCapConstraint",parseInt(e)||null),placeholder:"Leave blank for Discovery Mode",min:0,helpText:"Set a maximum SF constraint, or leave blank to explore"})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Level Configuration"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Configure the vertical stacking of your residence. L1 is always the Arrival Level."}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"Levels Above Arrival (L2, L3...)",type:"number",value:r.levelsAboveArrival,onChange:e=>o("levelsAboveArrival",Math.min(3,Math.max(0,parseInt(e)||0))),placeholder:"0-3",min:0,max:3,helpText:"How many floors above the entry level?"}),(0,T.jsx)($e,{label:"Levels Below Arrival (L-1, L-2...)",type:"number",value:r.levelsBelowArrival,onChange:e=>o("levelsBelowArrival",Math.min(3,Math.max(0,parseInt(e)||0))),placeholder:"0-3",min:0,max:3,helpText:"Below-grade or down-slope levels"})]}),s>0&&(0,T.jsxs)("div",{className:"level-config-preview",children:[(0,T.jsx)("div",{className:"level-config-preview__label",children:"Building Section Preview"}),(0,T.jsx)("div",{className:"level-config-preview__stack",children:(()=>{const e=[];for(let t=r.levelsAboveArrival||0;t>=1;t--)e.push("L".concat(t+1));e.push("L1 (Arrival)");for(let t=1;t<=(r.levelsBelowArrival||0);t++)e.push("L-".concat(t));return e})().map((e,t)=>(0,T.jsxs)("div",{className:"level-config-preview__level ".concat(e.includes("Arrival")?"level-config-preview__level--arrival":""),children:[(0,T.jsx)("span",{className:"level-config-preview__level-label",children:e}),e.includes("Arrival")&&(0,T.jsx)("span",{className:"level-config-preview__arrival-badge",children:"\u2190 Entry"})]},e))}),(0,T.jsxs)("div",{className:"level-config-preview__total",children:["Total: ",s," level",1!==s?"s":""]})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Additional Structures"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Beyond the main residence, will there be separate structures on the property?"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Include Guest House?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"A separate structure for guest accommodation"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.hasGuestHouse?"toggle-btn--active":""),onClick:()=>o("hasGuestHouse",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.hasGuestHouse?"":"toggle-btn--active"),onClick:()=>o("hasGuestHouse",!1),children:"No"})]})]}),r.hasGuestHouse&&(0,T.jsxs)("div",{className:"form-subsection",children:[(0,T.jsx)(Qe,{label:"Guest House Bedrooms",value:r.guestHouseBedrooms,onChange:e=>o("guestHouseBedrooms",parseInt(e)),options:[{value:1,label:"1 Bedroom"},{value:2,label:"2 Bedrooms"},{value:3,label:"3 Bedrooms"}],placeholder:"Select bedroom count..."}),(0,T.jsxs)("div",{className:"form-grid form-grid--3col",children:[(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Include Living Area?"}),(0,T.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesLiving?"toggle-btn--active":""),onClick:()=>o("guestHouseIncludesLiving",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesLiving?"":"toggle-btn--active"),onClick:()=>o("guestHouseIncludesLiving",!1),children:"No"})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Include Kitchen?"}),(0,T.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesKitchen?"toggle-btn--active":""),onClick:()=>o("guestHouseIncludesKitchen",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesKitchen?"":"toggle-btn--active"),onClick:()=>o("guestHouseIncludesKitchen",!1),children:"No"})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Include Dining?"}),(0,T.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesDining?"toggle-btn--active":""),onClick:()=>o("guestHouseIncludesDining",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesDining?"":"toggle-btn--active"),onClick:()=>o("guestHouseIncludesDining",!1),children:"No"})]})]})]})]}),(0,T.jsxs)("div",{className:"form-field",style:{marginTop:"1.5rem"},children:[(0,T.jsx)("label",{className:"form-field__label",children:"Include Pool House / Wellness Pavilion?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Changing rooms, showers, and optional entertainment/kitchen"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.hasPoolHouse?"toggle-btn--active":""),onClick:()=>o("hasPoolHouse",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.hasPoolHouse?"":"toggle-btn--active"),onClick:()=>o("hasPoolHouse",!1),children:"No"})]})]}),r.hasPoolHouse&&(0,T.jsxs)("div",{className:"form-subsection",children:[(0,T.jsx)(Qe,{label:"Pool House Location",value:r.poolHouseLocation,onChange:e=>o("poolHouseLocation",e),options:[{value:"attached",label:"Attached to Main Residence"},{value:"detached",label:"Separate Structure"}],placeholder:"Select location..."}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Include Entertainment Area?"}),(0,T.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.poolHouseIncludesEntertainment?"toggle-btn--active":""),onClick:()=>o("poolHouseIncludesEntertainment",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.poolHouseIncludesEntertainment?"":"toggle-btn--active"),onClick:()=>o("poolHouseIncludesEntertainment",!1),children:"No"})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Include Outdoor Kitchen?"}),(0,T.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.poolHouseIncludesKitchen?"toggle-btn--active":""),onClick:()=>o("poolHouseIncludesKitchen",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.poolHouseIncludesKitchen?"":"toggle-btn--active"),onClick:()=>o("poolHouseIncludesKitchen",!1),children:"No"})]})]})]})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Timeline & Complexity"}),(0,T.jsx)(Qe,{label:"Target Timeline",value:r.timeline,onChange:e=>o("timeline",e),options:[{value:"urgent",label:"Urgent (< 12 months)"},{value:"12-18mo",label:"12-18 Months"},{value:"18-24mo",label:"18-24 Months"},{value:"24plus",label:"24+ Months"}],placeholder:"Select timeline...",required:!0}),"mvp"!==n&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Complexity Factors"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"12px"},children:"Select all that apply - these affect team selection and timeline"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"historic",label:"Historic Preservation"},{value:"regulatory",label:"Complex Regulatory Environment"},{value:"phased",label:"Phased Construction"},{value:"remote",label:"Remote/Difficult Access Site"},{value:"coastal",label:"Coastal/Flood Zone"},{value:"hillside",label:"Steep Hillside"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.complexityFactors||[]).includes(e.value)?"chip--selected":""),onClick:()=>(e=>{const t=r.complexityFactors||[],n=t.includes(e)?t.filter(t=>t!==e):[...t,e];o("complexityFactors",n)})(e.value),children:e.label},e.value))})]}),(0,T.jsx)(Qe,{label:"Architectural Integration Level",value:r.architecturalIntegration,onChange:e=>o("architecturalIntegration",e),options:[{value:"id-only",label:"Interior Design Only (Architect Separate)"},{value:"shell-coord",label:"Shell & Core Coordination"},{value:"full-arch",label:"Full Architectural Services Needed"}],placeholder:"Select integration level...",helpText:"Do you need a full architect, or just interior design?"}),(0,T.jsx)(Qe,{label:"Local Knowledge Criticality",value:r.localKnowledgeCritical,onChange:e=>o("localKnowledgeCritical",e),options:[{value:"critical",label:"Critical - Complex Permitting/Design Review"},{value:"standard",label:"Standard - Some Local Expertise Needed"},{value:"not-needed",label:"Not Critical - Straightforward Jurisdiction"}],placeholder:"How important is local expertise?",helpText:"Affects geographic requirements for architect/designer"})]})]})]})},tt=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=W(),r=a[t].budgetFramework,o=(e,n)=>{i(t,"budgetFramework",{[e]:n})},s=a[t].projectParameters,l=r.interiorBudget&&s.targetGSF?Math.round(r.interiorBudget/s.targetGSF):null;return(0,T.jsxs)("div",{className:"kyc-section",children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Project Budget"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Understanding your budget parameters helps us match you with appropriately calibrated professionals."}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"Total Project Budget",type:"number",value:r.totalProjectBudget,onChange:e=>o("totalProjectBudget",parseInt(e)||null),placeholder:"All-in including contingency",helpText:"USD - Total construction + soft costs",min:0,required:!0}),(0,T.jsx)($e,{label:"Interior Budget (ID + FF&E)",type:"number",value:r.interiorBudget,onChange:e=>o("interiorBudget",parseInt(e)||null),placeholder:"Interior design + furnishings",helpText:"Subset of total budget",min:0,required:!0})]}),l&&(0,T.jsxs)("div",{className:"budget-insight",children:[(0,T.jsx)("span",{className:"budget-insight__label",children:"Calculated Interior Budget per SF:"}),(0,T.jsxs)("span",{className:"budget-insight__value",children:["$",l,"/SF"]}),(0,T.jsxs)("span",{className:"budget-insight__context",children:[l<300&&"(Entry Luxury)",l>=300&&l<500&&"(Mid Luxury)",l>=500&&l<800&&"(High Luxury)",l>=800&&l<1200&&"(Ultra Luxury)",l>=1200&&"(Bespoke / Museum Quality)"]})]}),"mvp"!==n&&(0,T.jsx)($e,{label:"Per-SF Expectation (Override)",type:"number",value:r.perSFExpectation,onChange:e=>o("perSFExpectation",parseInt(e)||null),placeholder:"If different from calculated",helpText:"Leave blank to use calculated value",min:0})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Budget Philosophy"}),(0,T.jsx)(Qe,{label:"Budget Flexibility",value:r.budgetFlexibility,onChange:e=>o("budgetFlexibility",e),options:[{value:"fixed",label:"Fixed Ceiling - Cannot Exceed"},{value:"flexible",label:"Flexible - Some Room for Quality"},{value:"investment",label:"Investment-Appropriate - Value Matters More Than Cost"}],placeholder:"Select your approach...",required:!0,helpText:"This affects how aggressively we optimize for value vs. cost"})]}),"mvp"!==n&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Fee Structure Preferences"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Different fee structures suit different project types and client preferences."}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)(Qe,{label:"Architect Fee Structure",value:r.architectFeeStructure,onChange:e=>o("architectFeeStructure",e),options:[{value:"fixed",label:"Fixed Fee"},{value:"percentage",label:"Percentage of Construction Cost"},{value:"hourly",label:"Hourly Billing"},{value:"hybrid",label:"Hybrid (Fixed + Percentage)"},{value:"no-preference",label:"No Strong Preference"}],placeholder:"How do you prefer to pay the architect?"}),(0,T.jsx)(Qe,{label:"Interior Designer Fee Structure",value:r.interiorDesignerFeeStructure,onChange:e=>o("interiorDesignerFeeStructure",e),options:[{value:"fixed",label:"Fixed Fee"},{value:"percentage",label:"Percentage of Project Cost"},{value:"hourly",label:"Hourly Billing"},{value:"cost-plus",label:"Cost-Plus (Markup on Purchases)"},{value:"hybrid",label:"Hybrid (Fixed + Cost-Plus)"},{value:"no-preference",label:"No Strong Preference"}],placeholder:"How do you prefer to pay the ID?"})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Interior Quality Tier"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Select the quality tier that best represents your expectations for materials and craftsmanship."}),(0,T.jsx)("div",{className:"quality-tier-cards",children:[{value:"select",label:"Select",subtitle:"The Curated Standard",description:"Every material and finish selected for aesthetic harmony and durability. A sophisticated, complete experience for those who value refined design without extensive customization."},{value:"reserve",label:"Reserve",subtitle:"Exceptional Materials",description:"Features finishes sourced from specialized production\u2014hand-selected stone and artisanal millwork chosen for unique qualities. For clients who desire a distinctly personal home."},{value:"signature",label:"Signature",subtitle:"Bespoke Design",description:"Custom-engineered solutions and unique design elements tailored to a specific lifestyle. Each space features hallmarks of world-class craftsmanship."},{value:"legacy",label:"Legacy",subtitle:"Enduring Heritage",description:"The pinnacle of the program. High-quality sustainable materials and advanced technologies. Designed to endure as a generational asset maintaining prestige for the future."}].map(e=>(0,T.jsxs)("div",{className:"quality-tier-card ".concat(r.interiorQualityTier===e.value?"quality-tier-card--selected":""),onClick:()=>o("interiorQualityTier",e.value),children:[(0,T.jsxs)("div",{className:"quality-tier-card__header",children:[(0,T.jsx)("span",{className:"quality-tier-card__number",children:"select"===e.value?"I":"reserve"===e.value?"II":"signature"===e.value?"III":"IV"}),(0,T.jsx)("span",{className:"quality-tier-card__label",children:e.label})]}),(0,T.jsx)("span",{className:"quality-tier-card__subtitle",children:e.subtitle}),(0,T.jsx)("p",{className:"quality-tier-card__description",children:e.description})]},e.value))})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Art Budget"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Separate Art Budget?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Some clients allocate art acquisition separately from interior design"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.artBudgetSeparate?"toggle-btn--active":""),onClick:()=>o("artBudgetSeparate",!0),children:"Yes, Separate"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.artBudgetSeparate?"":"toggle-btn--active"),onClick:()=>o("artBudgetSeparate",!1),children:"No, Included"})]})]}),r.artBudgetSeparate&&(0,T.jsx)($e,{label:"Art Budget Amount",type:"number",value:r.artBudgetAmount,onChange:e=>o("artBudgetAmount",parseInt(e)||null),placeholder:"Separate art acquisition budget",min:0})]})]})]})};var nt=n(2284),at=Uint8Array,it=Uint16Array,rt=Int32Array,ot=new at([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),st=new at([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lt=new at([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ct=function(e,t){for(var n=new it(31),a=0;a<31;++a)n[a]=t+=1<<e[a-1];var i=new rt(n[30]);for(a=1;a<30;++a)for(var r=n[a];r<n[a+1];++r)i[r]=r-n[a]<<5|a;return{b:n,r:i}},dt=ct(ot,2),ut=dt.b,ht=dt.r;ut[28]=258,ht[258]=28;for(var pt=ct(st,0),mt=pt.b,ft=pt.r,gt=new it(32768),vt=0;vt<32768;++vt){var yt=(43690&vt)>>1|(21845&vt)<<1;yt=(61680&(yt=(52428&yt)>>2|(13107&yt)<<2))>>4|(3855&yt)<<4,gt[vt]=((65280&yt)>>8|(255&yt)<<8)>>1}var bt=function(e,t,n){for(var a=e.length,i=0,r=new it(t);i<a;++i)e[i]&&++r[e[i]-1];var o,s=new it(t);for(i=1;i<t;++i)s[i]=s[i-1]+r[i-1]<<1;if(n){o=new it(1<<t);var l=15-t;for(i=0;i<a;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],u=s[e[i]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)o[gt[u]>>l]=c}else for(o=new it(a),i=0;i<a;++i)e[i]&&(o[i]=gt[s[e[i]-1]++]>>15-e[i]);return o},xt=new at(288);for(vt=0;vt<144;++vt)xt[vt]=8;for(vt=144;vt<256;++vt)xt[vt]=9;for(vt=256;vt<280;++vt)xt[vt]=7;for(vt=280;vt<288;++vt)xt[vt]=8;var St=new at(32);for(vt=0;vt<32;++vt)St[vt]=5;var jt=bt(xt,9,0),wt=bt(xt,9,1),Nt=bt(St,5,0),kt=bt(St,5,1),_t=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Ct=function(e,t,n){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(7&t)&n},Pt=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Ft=function(e){return(e+7)/8|0},At=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new at(e.subarray(t,n))},Lt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Mt=function(e,t,n){var a=new Error(t||Lt[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Mt),!n)throw a;return a},Rt=function(e,t,n,a){var i=e.length,r=a?a.length:0;if(!i||t.f&&!t.l)return n||new at(0);var o=!n,s=o||2!=t.i,l=t.i;o&&(n=new at(3*i));var c=function(e){var t=n.length;if(e>t){var a=new at(Math.max(2*t,e));a.set(n),n=a}},d=t.f||0,u=t.p||0,h=t.b||0,p=t.l,m=t.d,f=t.m,g=t.n,v=8*i;do{if(!p){d=Ct(e,u,1);var y=Ct(e,u+1,3);if(u+=3,!y){var b=e[(A=Ft(u)+4)-4]|e[A-3]<<8,x=A+b;if(x>i){l&&Mt(0);break}s&&c(h+b),n.set(e.subarray(A,x),h),t.b=h+=b,t.p=u=8*x,t.f=d;continue}if(1==y)p=wt,m=kt,f=9,g=5;else if(2==y){var S=Ct(e,u,31)+257,j=Ct(e,u+10,15)+4,w=S+Ct(e,u+5,31)+1;u+=14;for(var N=new at(w),k=new at(19),_=0;_<j;++_)k[lt[_]]=Ct(e,u+3*_,7);u+=3*j;var C=_t(k),P=(1<<C)-1,F=bt(k,C,1);for(_=0;_<w;){var A,L=F[Ct(e,u,P)];if(u+=15&L,(A=L>>4)<16)N[_++]=A;else{var M=0,R=0;for(16==A?(R=3+Ct(e,u,3),u+=2,M=N[_-1]):17==A?(R=3+Ct(e,u,7),u+=3):18==A&&(R=11+Ct(e,u,127),u+=7);R--;)N[_++]=M}}var I=N.subarray(0,S),T=N.subarray(S);f=_t(I),g=_t(T),p=bt(I,f,1),m=bt(T,g,1)}else Mt(1);if(u>v){l&&Mt(0);break}}s&&c(h+131072);for(var z=(1<<f)-1,D=(1<<g)-1,E=u;;E=u){var O=(M=p[Pt(e,u)&z])>>4;if((u+=15&M)>v){l&&Mt(0);break}if(M||Mt(2),O<256)n[h++]=O;else{if(256==O){E=u,p=null;break}var B=O-254;if(O>264){var q=ot[_=O-257];B=Ct(e,u,(1<<q)-1)+ut[_],u+=q}var H=m[Pt(e,u)&D],G=H>>4;H||Mt(3),u+=15&H;T=mt[G];if(G>3){q=st[G];T+=Pt(e,u)&(1<<q)-1,u+=q}if(u>v){l&&Mt(0);break}s&&c(h+131072);var W=h+B;if(h<T){var U=r-T,K=Math.min(T,W);for(U+h<0&&Mt(3);h<K;++h)n[h]=a[U+h]}for(;h<W;++h)n[h]=n[h-T]}}t.l=p,t.p=E,t.b=h,t.f=d,p&&(d=1,t.m=f,t.d=m,t.n=g)}while(!d);return h!=n.length&&o?At(n,0,h):n.subarray(0,h)},It=function(e,t,n){n<<=7&t;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8},Tt=function(e,t,n){n<<=7&t;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8,e[a+2]|=n>>16},zt=function(e,t){for(var n=[],a=0;a<e.length;++a)e[a]&&n.push({s:a,f:e[a]});var i=n.length,r=n.slice();if(!i)return{t:Gt,l:0};if(1==i){var o=new at(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,d=1,u=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};d!=i-1;)s=n[n[c].f<n[u].f?c++:u++],l=n[c!=d&&n[c].f<n[u].f?c++:u++],n[d++]={s:-1,f:s.f+l.f,l:s,r:l};var h=r[0].s;for(a=1;a<i;++a)r[a].s>h&&(h=r[a].s);var p=new it(h+1),m=Dt(n[d-1],p,0);if(m>t){a=0;var f=0,g=m-t,v=1<<g;for(r.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});a<i;++a){var y=r[a].s;if(!(p[y]>t))break;f+=v-(1<<m-p[y]),p[y]=t}for(f>>=g;f>0;){var b=r[a].s;p[b]<t?f-=1<<t-p[b]++-1:++a}for(;a>=0&&f;--a){var x=r[a].s;p[x]==t&&(--p[x],++f)}m=t}return{t:new at(p),l:m}},Dt=function(e,t,n){return-1==e.s?Math.max(Dt(e.l,t,n+1),Dt(e.r,t,n+1)):t[e.s]=n},Et=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new it(++t),a=0,i=e[0],r=1,o=function(e){n[a++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++r;else{if(!i&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(i),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(i);r=1,i=e[s]}return{c:n.subarray(0,a),n:t}},Ot=function(e,t){for(var n=0,a=0;a<t.length;++a)n+=e[a]*t[a];return n},Bt=function(e,t,n){var a=n.length,i=Ft(t+2);e[i]=255&a,e[i+1]=a>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var r=0;r<a;++r)e[i+r+4]=n[r];return 8*(i+4+a)},qt=function(e,t,n,a,i,r,o,s,l,c,d){It(t,d++,n),++i[256];for(var u=zt(i,15),h=u.t,p=u.l,m=zt(r,15),f=m.t,g=m.l,v=Et(h),y=v.c,b=v.n,x=Et(f),S=x.c,j=x.n,w=new it(19),N=0;N<y.length;++N)++w[31&y[N]];for(N=0;N<S.length;++N)++w[31&S[N]];for(var k=zt(w,7),_=k.t,C=k.l,P=19;P>4&&!_[lt[P-1]];--P);var F,A,L,M,R=c+5<<3,I=Ot(i,xt)+Ot(r,St)+o,T=Ot(i,h)+Ot(r,f)+o+14+3*P+Ot(w,_)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&R<=I&&R<=T)return Bt(t,d,e.subarray(l,l+c));if(It(t,d,1+(T<I)),d+=2,T<I){F=bt(h,p,0),A=h,L=bt(f,g,0),M=f;var z=bt(_,C,0);It(t,d,b-257),It(t,d+5,j-1),It(t,d+10,P-4),d+=14;for(N=0;N<P;++N)It(t,d+3*N,_[lt[N]]);d+=3*P;for(var D=[y,S],E=0;E<2;++E){var O=D[E];for(N=0;N<O.length;++N){var B=31&O[N];It(t,d,z[B]),d+=_[B],B>15&&(It(t,d,O[N]>>5&127),d+=O[N]>>12)}}}else F=jt,A=xt,L=Nt,M=St;for(N=0;N<s;++N){var q=a[N];if(q>255){Tt(t,d,F[(B=q>>18&31)+257]),d+=A[B+257],B>7&&(It(t,d,q>>23&31),d+=ot[B]);var H=31&q;Tt(t,d,L[H]),d+=M[H],H>3&&(Tt(t,d,q>>5&8191),d+=st[H])}else Tt(t,d,F[q]),d+=A[q]}return Tt(t,d,F[256]),d+A[256]},Ht=new rt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gt=new at(0),Wt=function(e,t,n,a,i,r){var o=r.z||e.length,s=new at(a+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(a,s.length-i),c=r.l,d=7&(r.r||0);if(t){d&&(l[0]=r.r>>3);for(var u=Ht[t-1],h=u>>13,p=8191&u,m=(1<<n)-1,f=r.p||new it(32768),g=r.h||new it(m+1),v=Math.ceil(n/3),y=2*v,b=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<y)&m},x=new rt(25e3),S=new it(288),j=new it(32),w=0,N=0,k=r.i||0,_=0,C=r.w||0,P=0;k+2<o;++k){var F=b(k),A=32767&k,L=g[F];if(f[A]=L,g[F]=A,C<=k){var M=o-k;if((w>7e3||_>24576)&&(M>423||!c)){d=qt(e,l,0,x,S,j,N,_,P,k-P,d),_=w=N=0,P=k;for(var R=0;R<286;++R)S[R]=0;for(R=0;R<30;++R)j[R]=0}var I=2,T=0,z=p,D=A-L&32767;if(M>2&&F==b(k-D))for(var E=Math.min(h,M)-1,O=Math.min(32767,k),B=Math.min(258,M);D<=O&&--z&&A!=L;){if(e[k+I]==e[k+I-D]){for(var q=0;q<B&&e[k+q]==e[k+q-D];++q);if(q>I){if(I=q,T=D,q>E)break;var H=Math.min(D,q-2),G=0;for(R=0;R<H;++R){var W=k-D+R&32767,U=W-f[W]&32767;U>G&&(G=U,L=W)}}}D+=(A=L)-(L=f[A])&32767}if(T){x[_++]=268435456|ht[I]<<18|ft[T];var K=31&ht[I],V=31&ft[T];N+=ot[K]+st[V],++S[257+K],++j[V],C=k+I,++w}else x[_++]=e[k],++S[e[k]]}}for(k=Math.max(k,C);k<o;++k)x[_++]=e[k],++S[e[k]];d=qt(e,l,c,x,S,j,N,_,P,k-P,d),c||(r.r=7&d|l[d/8|0]<<3,d-=7,r.h=g,r.p=f,r.i=k,r.w=C)}else{for(k=r.w||0;k<o+c;k+=65535){var Y=k+65535;Y>=o&&(l[d/8|0]=c,Y=o),d=Bt(l,d+1,e.subarray(k,Y))}r.i=o}return At(s,0,a+Ft(d)+i)},Ut=function(){var e=1,t=0;return{p:function(n){for(var a=e,i=t,r=0|n.length,o=0;o!=r;){for(var s=Math.min(o+2655,r);o<s;++o)i+=a+=n[o];a=(65535&a)+15*(a>>16),i=(65535&i)+15*(i>>16)}e=a,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},Kt=function(e,t,n,a,i){if(!i&&(i={l:1},t.dictionary)){var r=t.dictionary.subarray(-32768),o=new at(r.length+e.length);o.set(r),o.set(e,r.length),e=o,i.w=r.length}return Wt(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,a,i)},Vt=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Yt=function(e,t){var n=t.level,a=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=Ut();i.p(t.dictionary),Vt(e,2,i.d())}},Zt=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Mt(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Mt(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function $t(e,t){t||(t={});var n=Ut();n.p(e);var a=Kt(e,t,t.dictionary?6:2,4);return Yt(a,t),Vt(a,a.length-4,n.d()),a}function Qt(e,t){return Rt(e.subarray(Zt(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Jt="undefined"!=typeof TextDecoder&&new TextDecoder;try{Jt.decode(Gt,{stream:!0})}catch(Sg){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var Xt=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function en(){Xt.console&&"function"==typeof Xt.console.log&&Xt.console.log.apply(Xt.console,arguments)}var tn={log:en,warn:function(e){Xt.console&&("function"==typeof Xt.console.warn?Xt.console.warn.apply(Xt.console,arguments):en.call(null,arguments))},error:function(e){Xt.console&&("function"==typeof Xt.console.error?Xt.console.error.apply(Xt.console,arguments):en(e))}};function nn(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){ln(a.response,t,n)},a.onerror=function(){tn.error("could not download file")},a.send()}function an(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function rn(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var on,sn,ln=Xt.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,nt.A)(window))||window!==Xt?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var a=Xt.URL||Xt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?an(i.href)?nn(e,t,n):rn(i,i.target="_blank"):rn(i)):(i.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){rn(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(an(e))nn(e,t,n);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){rn(a)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,nt.A)(t)&&(tn.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return nn(e,t,n);var i="application/octet-stream"===e.type,r=/constructor/i.test(Xt.HTMLElement)||Xt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&r)&&"object"===("undefined"==typeof FileReader?"undefined":(0,nt.A)(FileReader))){var s=new FileReader;s.onloadend=function(){var e=s.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},s.readAsDataURL(e)}else{var l=Xt.URL||Xt.webkitURL,c=l.createObjectURL(e);a?a.location=c:location.href=c,a=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function cn(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],a=0;a<n.length;a++){var i=n[a].re,r=n[a].process,o=i.exec(e);o&&(t=r(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function dn(e,t){var n=e[0],a=e[1],i=e[2],r=e[3];n=hn(n,a,i,r,t[0],7,-680876936),r=hn(r,n,a,i,t[1],12,-389564586),i=hn(i,r,n,a,t[2],17,606105819),a=hn(a,i,r,n,t[3],22,-1044525330),n=hn(n,a,i,r,t[4],7,-176418897),r=hn(r,n,a,i,t[5],12,1200080426),i=hn(i,r,n,a,t[6],17,-1473231341),a=hn(a,i,r,n,t[7],22,-45705983),n=hn(n,a,i,r,t[8],7,1770035416),r=hn(r,n,a,i,t[9],12,-1958414417),i=hn(i,r,n,a,t[10],17,-42063),a=hn(a,i,r,n,t[11],22,-1990404162),n=hn(n,a,i,r,t[12],7,1804603682),r=hn(r,n,a,i,t[13],12,-40341101),i=hn(i,r,n,a,t[14],17,-1502002290),n=pn(n,a=hn(a,i,r,n,t[15],22,1236535329),i,r,t[1],5,-165796510),r=pn(r,n,a,i,t[6],9,-1069501632),i=pn(i,r,n,a,t[11],14,643717713),a=pn(a,i,r,n,t[0],20,-373897302),n=pn(n,a,i,r,t[5],5,-701558691),r=pn(r,n,a,i,t[10],9,38016083),i=pn(i,r,n,a,t[15],14,-660478335),a=pn(a,i,r,n,t[4],20,-405537848),n=pn(n,a,i,r,t[9],5,568446438),r=pn(r,n,a,i,t[14],9,-1019803690),i=pn(i,r,n,a,t[3],14,-187363961),a=pn(a,i,r,n,t[8],20,1163531501),n=pn(n,a,i,r,t[13],5,-1444681467),r=pn(r,n,a,i,t[2],9,-51403784),i=pn(i,r,n,a,t[7],14,1735328473),n=mn(n,a=pn(a,i,r,n,t[12],20,-1926607734),i,r,t[5],4,-378558),r=mn(r,n,a,i,t[8],11,-2022574463),i=mn(i,r,n,a,t[11],16,1839030562),a=mn(a,i,r,n,t[14],23,-35309556),n=mn(n,a,i,r,t[1],4,-1530992060),r=mn(r,n,a,i,t[4],11,1272893353),i=mn(i,r,n,a,t[7],16,-155497632),a=mn(a,i,r,n,t[10],23,-1094730640),n=mn(n,a,i,r,t[13],4,681279174),r=mn(r,n,a,i,t[0],11,-358537222),i=mn(i,r,n,a,t[3],16,-722521979),a=mn(a,i,r,n,t[6],23,76029189),n=mn(n,a,i,r,t[9],4,-640364487),r=mn(r,n,a,i,t[12],11,-421815835),i=mn(i,r,n,a,t[15],16,530742520),n=fn(n,a=mn(a,i,r,n,t[2],23,-995338651),i,r,t[0],6,-198630844),r=fn(r,n,a,i,t[7],10,1126891415),i=fn(i,r,n,a,t[14],15,-1416354905),a=fn(a,i,r,n,t[5],21,-57434055),n=fn(n,a,i,r,t[12],6,1700485571),r=fn(r,n,a,i,t[3],10,-1894986606),i=fn(i,r,n,a,t[10],15,-1051523),a=fn(a,i,r,n,t[1],21,-2054922799),n=fn(n,a,i,r,t[8],6,1873313359),r=fn(r,n,a,i,t[15],10,-30611744),i=fn(i,r,n,a,t[6],15,-1560198380),a=fn(a,i,r,n,t[13],21,1309151649),n=fn(n,a,i,r,t[4],6,-145523070),r=fn(r,n,a,i,t[11],10,-1120210379),i=fn(i,r,n,a,t[2],15,718787259),a=fn(a,i,r,n,t[9],21,-343485551),e[0]=wn(n,e[0]),e[1]=wn(a,e[1]),e[2]=wn(i,e[2]),e[3]=wn(r,e[3])}function un(e,t,n,a,i,r){return t=wn(wn(t,e),wn(a,r)),wn(t<<i|t>>>32-i,n)}function hn(e,t,n,a,i,r,o){return un(t&n|~t&a,e,t,i,r,o)}function pn(e,t,n,a,i,r,o){return un(t&a|n&~a,e,t,i,r,o)}function mn(e,t,n,a,i,r,o){return un(t^n^a,e,t,i,r,o)}function fn(e,t,n,a,i,r,o){return un(n^(t|~a),e,t,i,r,o)}function gn(e){var t,n=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)dn(a,vn(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(dn(a,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,dn(a,i),a}function vn(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}on=Xt.atob.bind(Xt),sn=Xt.btoa.bind(Xt);var yn="0123456789abcdef".split("");function bn(e){for(var t="",n=0;n<4;n++)t+=yn[e>>8*n+4&15]+yn[e>>8*n&15];return t}function xn(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Sn(e){return gn(e).map(xn).join("")}var jn="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=bn(e[t]);return e.join("")}(gn("hello"));function wn(e,t){if(jn){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function Nn(e,t){var n,a,i,r;if(e!==n){for(var o=(i=e,r=1+(256/e.length|0),new Array(r+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var d=s[l];c=(c+d+o.charCodeAt(l))%256,s[l]=s[c],s[c]=d}n=e,a=s}else s=a;var u=t.length,h=0,p=0,m="";for(l=0;l<u;l++)p=(p+(d=s[h=(h+1)%256]))%256,s[h]=s[p],s[p]=d,o=s[(s[h]+s[p])%256],m+=String.fromCharCode(t.charCodeAt(l)^o);return m}var kn={print:4,modify:8,copy:16,"annot-forms":32};function _n(e,t,n,a){this.v=1,this.r=2;var i=192;e.forEach(function(e){if(void 0!==kn.perm)throw new Error("Invalid permission: "+e);i+=kn[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var r=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,o),this.P=-(1+(255^i)),this.encryptionKey=Sn(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Nn(this.encryptionKey,this.padding)}function Cn(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,a=0;a<n;a++){var i=e.charCodeAt(a);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[a]}return t}function Pn(e){if("object"!==(0,nt.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,a){if(a=a||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof a)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!a],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var a=Array.prototype.slice.call(arguments,1),i=[];for(var r in t[n]){var o=t[n][r];try{o[0].apply(e,a)}catch(n){Xt.console&&tn.error("jsPDF PubSub Error",n.message,n)}o[1]&&i.push(r)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Fn(e){if(!(this instanceof Fn))return new Fn(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function An(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ln(e,t,n,a,i){if(!(this instanceof Ln))return new Ln(e,t,n,a,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,An.call(this,a,i)}function Mn(e,t,n,a,i){if(!(this instanceof Mn))return new Mn(e,t,n,a,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,An.call(this,a,i)}function Rn(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",a=arguments[1],i=arguments[2],r=arguments[3],o=[],s=1,l=16,c="S",d=null;"object"===(0,nt.A)(e=e||{})&&(n=e.orientation,a=e.unit||a,i=e.format||i,r=e.compress||e.compressPdf||r,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),s="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),o=e.filters||(!0===r?["FlateEncode"]:o),a=a||"mm",n=(""+(n||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=Pn;var m="1.3",f=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(e){m=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return g};var v=p.__private__.getPageFormat=function(e){return g[e]};i=i||"a4";var y="compat",b="advanced",x=y;function S(){this.saveGraphicsState(),Q(new Le(he,0,0,-he,0,gn()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),c="n",x=b}function j(){this.restoreGraphicsState(),c="S",x=y}var w=p.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};p.advancedAPI=function(e){var t=x===y;return t&&S.call(this),"function"!=typeof e||(e(this),t&&j.call(this)),this},p.compatAPI=function(e){var t=x===b;return t&&j.call(this),"function"!=typeof e||(e(this),t&&S.call(this)),this},p.isAdvancedAPI=function(){return x===b};var N,k=function(e){if(x!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_=p.roundToPrecision=p.__private__.roundToPrecision=function(e,n){var a=t||n;if(isNaN(e)||isNaN(a))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(a).replace(/0+$/,"")};N=p.hpf=p.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,16)};var C=p.f2=p.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return _(e,2)},P=p.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return _(e,3)},F=p.scale=p.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return x===y?e*he:x===b?e:void 0},A=function(e){return F(function(e){return x===y?gn()-e:x===b?e:void 0}(e))};p.__private__.setPrecision=p.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var L,M="00000000000000000000000000000000",R=p.__private__.getFileId=function(){return M},I=p.__private__.setFileId=function(e){return M=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():M.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(xt=new _n(d.userPermissions,d.userPassword,d.ownerPassword,M)),M};p.setFileId=function(e){return I(e),this},p.getFileId=function(){return R()};var T=p.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",a=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),r=[n,B(a),"'",B(i),"'"].join("");return["D:",e.getFullYear(),B(e.getMonth()+1),B(e.getDate()),B(e.getHours()),B(e.getMinutes()),B(e.getSeconds()),r].join("")},z=p.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,a=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),r=parseInt(e.substr(12,2),10),o=parseInt(e.substr(14,2),10);return new Date(t,n,a,i,r,o,0)},D=p.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=T(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return L=t},E=p.__private__.getCreationDate=function(e){var t=L;return"jsDate"===e&&(t=z(L)),t};p.setCreationDate=function(e){return D(e),this},p.getCreationDate=function(e){return E(e)};var O,B=p.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},q=p.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,G=[],W=[],U=0,K=[],V=[],Y=!1,Z=W;p.__private__.setCustomOutputDestination=function(e){Y=!0,Z=e};var $=function(e){Y||(Z=e)};p.__private__.resetCustomOutputDestination=function(){Y=!1,Z=W};var Q=p.__private__.out=function(e){return e=e.toString(),U+=e.length+1,Z.push(e),Z},J=p.__private__.write=function(e){return Q(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},X=p.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),a=new Uint8Array(n);t--;)a[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(e){return te=x===b?e/he:e,this};var ne,ae=p.__private__.getFontSize=p.getFontSize=function(){return x===y?te:te*he},ie=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(e){return ie=e,this},p.__private__.getR2L=p.getR2L=function(){return ie};var re,oe=p.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};p.__private__.getZoomMode=function(){return ne};var se,le=p.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');re=e};p.__private__.getPageMode=function(){return re};var ce=p.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');se=e};p.__private__.getLayoutMode=function(){return se},p.__private__.setDisplayMode=p.setDisplayMode=function(e,t,n){return oe(e),ce(t),le(n),this};var de={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(e){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return de[e]},p.__private__.getDocumentProperties=function(){return de},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(e){for(var t in de)de.hasOwnProperty(t)&&e[t]&&(de[t]=e[t]);return this},p.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return de[e]=t};var ue,he,pe,me,fe,ge={},ve={},ye=[],be={},xe={},Se={},je={},we=null,Ne=0,ke=[],_e=new Pn(p),Ce=e.hotfixes||[],Pe={},Fe={},Ae=[],Le=function e(t,n,a,i,r,o){if(!(this instanceof e))return new e(t,n,a,i,r,o);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(a)&&(a=0),isNaN(i)&&(i=1),isNaN(r)&&(r=0),isNaN(o)&&(o=0),this._matrix=[t,n,a,i,r,o]};Object.defineProperty(Le.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Le.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Le.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Le.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Le.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Le.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Le.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Le.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Le.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Le.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Le.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Le.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Le.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Le.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Le.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Le.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Le.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(e)},Le.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,a=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,r=e.tx*this.sx+e.ty*this.shx+this.tx,o=e.tx*this.shy+e.ty*this.sy+this.ty;return new Le(t,n,a,i,r,o)},Le.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,i=this.tx,r=this.ty,o=Math.sqrt(e*e+t*t),s=(e/=o)*n+(t/=o)*a;n-=e*s,a-=t*s;var l=Math.sqrt(n*n+a*a);return s/=l,e*(a/=l)<t*(n/=l)&&(e=-e,t=-t,s=-s,o=-o),{scale:new Le(o,0,0,l,0,0),translate:new Le(1,0,0,1,i,r),rotate:new Le(e,t,-t,e,0,0),skew:new Le(1,0,s,1,0,0)}},Le.prototype.toString=function(e){return this.join(" ")},Le.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,i=this.tx,r=this.ty,o=1/(e*a-t*n),s=a*o,l=-t*o,c=-n*o,d=e*o;return new Le(s,l,c,d,-s*i-c*r,-l*i-d*r)},Le.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new on(t,n)},Le.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new on(e.x+e.w,e.y+e.h));return new dn(t.x,t.y,n.x-t.x,n.y-t.y)},Le.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,i=this.tx,r=this.ty;return new Le(e,t,n,a,i,r)},p.Matrix=Le;var Me=p.matrixMult=function(e,t){return t.multiply(e)},Re=new Le(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Re;var Ie=function(e,t){if(!xe[e]){var n=(t instanceof Ln?"Sh":"P")+(Object.keys(be).length+1).toString(10);t.id=n,xe[e]=n,be[n]=t,_e.publish("addPattern",t)}};p.ShadingPattern=Ln,p.TilingPattern=Mn,p.addShadingPattern=function(e,t){return k("addShadingPattern()"),Ie(e,t),this},p.beginTilingPattern=function(e){k("beginTilingPattern()"),hn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},p.endTilingPattern=function(e,t){k("endTilingPattern()"),t.stream=V[O].join("\n"),Ie(e,t),_e.publish("endTilingPattern",t),Ae.pop().restore()};var Te,ze=p.__private__.newObject=function(){var e=De();return Ee(e,!0),e},De=p.__private__.newObjectDeferred=function(){return H++,G[H]=function(){return U},H},Ee=function(e,t){return t="boolean"==typeof t&&t,G[e]=U,t&&Q(e+" 0 obj"),e},Oe=p.__private__.newAdditionalObject=function(){var e={objId:De(),content:""};return K.push(e),e},Be=De(),qe=De(),He=p.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var a="#",i=0;i<3;i++)a+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return a},Ge=p.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,a=e.ch2,i=e.ch3,r=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new cn(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,a=l>>8&255,i=255&l}if(void 0===a||void 0===r&&n===a&&a===i)if("string"==typeof n)t=n+" "+o[0];else if(2===e.precision)t=C(n/255)+" "+o[0];else t=P(n/255)+" "+o[0];else if(void 0===r||"object"===(0,nt.A)(r)){if(r&&!isNaN(r.a)&&0===r.a)return["1.","1.","1.",o[1]].join(" ");if("string"==typeof n)t=[n,a,i,o[1]].join(" ");else if(2===e.precision)t=[C(n/255),C(a/255),C(i/255),o[1]].join(" ");else t=[P(n/255),P(a/255),P(i/255),o[1]].join(" ")}else if("string"==typeof n)t=[n,a,i,r,o[2]].join(" ");else if(2===e.precision)t=[C(n),C(a),C(i),C(r),o[2]].join(" ");else t=[P(n),P(a),P(i),P(r),o[2]].join(" ");return t},We=p.__private__.getFilters=function(){return o},Ue=p.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||We(),a=e.alreadyAppliedFilters||[],i=e.addLength1||!1,r=t.length,o=e.objectId,s=function(e){return e};if(null!==d&&void 0===o)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(s=xt.encryptor(o,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==Rn.API.processDataByFilters?Rn.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(a)?a.join(" "):a.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===i&&c.push({key:"Length1",value:r})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var p=[],m=0;m<l.reverseChain.split("/").length-1;m+=1)p.push("null");p.push(c[h].value),c[h].value="["+p.join(" ")+"]"}}Q("<<");for(var f=0;f<c.length;f++)Q("/"+c[f].key+" "+c[f].value);Q(">>"),0!==l.data.length&&(Q("stream"),Q(s(l.data)),Q("endstream"))},Ke=p.__private__.putPage=function(e){var t=e.number,n=e.data,a=e.objId,i=e.contentsObjId;Ee(a,!0),Q("<</Type /Page"),Q("/Parent "+e.rootDictionaryObjId+" 0 R"),Q("/Resources "+e.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(N(e.mediaBox.bottomLeftX))+" "+parseFloat(N(e.mediaBox.bottomLeftY))+" "+N(e.mediaBox.topRightX)+" "+N(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Q("/CropBox ["+N(e.cropBox.bottomLeftX)+" "+N(e.cropBox.bottomLeftY)+" "+N(e.cropBox.topRightX)+" "+N(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Q("/BleedBox ["+N(e.bleedBox.bottomLeftX)+" "+N(e.bleedBox.bottomLeftY)+" "+N(e.bleedBox.topRightX)+" "+N(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Q("/TrimBox ["+N(e.trimBox.bottomLeftX)+" "+N(e.trimBox.bottomLeftY)+" "+N(e.trimBox.topRightX)+" "+N(e.trimBox.topRightY)+"]"),null!==e.artBox&&Q("/ArtBox ["+N(e.artBox.bottomLeftX)+" "+N(e.artBox.bottomLeftY)+" "+N(e.artBox.topRightX)+" "+N(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Q("/UserUnit "+e.userUnit),_e.publish("putPage",{objId:a,pageContext:ke[t],pageNumber:t,page:n}),Q("/Contents "+i+" 0 R"),Q(">>"),Q("endobj");var r=n.join("\n");return x===b&&(r+="\nQ"),Ee(i,!0),Ue({data:r,filters:We(),objectId:i}),Q("endobj"),a},Ve=p.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Ne;e++)ke[e].objId=De(),ke[e].contentsObjId=De();for(e=1;e<=Ne;e++)n.push(Ke({number:e,data:V[e],objId:ke[e].objId,contentsObjId:ke[e].contentsObjId,mediaBox:ke[e].mediaBox,cropBox:ke[e].cropBox,bleedBox:ke[e].bleedBox,trimBox:ke[e].trimBox,artBox:ke[e].artBox,userUnit:ke[e].userUnit,rootDictionaryObjId:Be,resourceDictionaryObjId:qe}));Ee(Be,!0),Q("<</Type /Pages");var a="/Kids [";for(t=0;t<Ne;t++)a+=n[t]+" 0 R ";Q(a+"]"),Q("/Count "+Ne),Q(">>"),Q("endobj"),_e.publish("postPutPages")},Ye=function(e){_e.publish("putFont",{font:e,out:Q,newObject:ze,putStream:Ue}),!0!==e.isAlreadyPutted&&(e.objectNumber=ze(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Cn(e.postScriptName)),Q("/Subtype /Type1"),"string"==typeof e.encoding&&Q("/Encoding /"+e.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Ze=function(e){e.objectNumber=ze();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[N(e.x),N(e.y),N(e.x+e.width),N(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ue({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Q("endobj")},$e=function(e,t){t||(t=21);var n=ze(),a=function(e,t){var n,a=[],i=1/(t-1);for(n=0;n<1;n+=i)a.push(n);if(a.push(1),0!=e[0].offset){var r={offset:0,color:e[0].color};e.unshift(r)}if(1!=e[e.length-1].offset){var o={offset:1,color:e[e.length-1].color};e.push(o)}for(var s="",l=0,c=0;c<a.length;c++){for(n=a[c];n>e[l+1].offset;)l++;var d=e[l].offset,u=(n-d)/(e[l+1].offset-d),h=e[l].color,p=e[l+1].color;s+=q(Math.round((1-u)*h[0]+u*p[0]).toString(16))+q(Math.round((1-u)*h[1]+u*p[1]).toString(16))+q(Math.round((1-u)*h[2]+u*p[2]).toString(16))}return s.trim()}(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ue({data:a,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Q("endobj"),e.objectNumber=ze(),Q("<< /ShadingType "+e.type),Q("/ColorSpace /DeviceRGB");var r="/Coords ["+N(parseFloat(e.coords[0]))+" "+N(parseFloat(e.coords[1]))+" ";2===e.type?r+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3])):r+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3]))+" "+N(parseFloat(e.coords[4]))+" "+N(parseFloat(e.coords[5])),Q(r+="]"),e.matrix&&Q("/Matrix ["+e.matrix.toString()+"]"),Q("/Function "+n+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Qe=function(e,t){var n=De(),a=ze();t.push({resourcesOid:n,objectOid:a}),e.objectNumber=a;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(N).join(" ")+"]"}),i.push({key:"XStep",value:N(e.xStep)}),i.push({key:"YStep",value:N(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ue({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),Q("endobj")},Je=function(e){for(var t in e.objectNumber=ze(),Q("<<"),e)switch(t){case"opacity":Q("/ca "+C(e[t]));break;case"stroke-opacity":Q("/CA "+C(e[t]))}Q(">>"),Q("endobj")},Xe=function(e){Ee(e.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Q("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&Q("/"+e+" "+ge[e].objectNumber+" 0 R");Q(">>")}(),function(){if(Object.keys(be).length>0){for(var e in Q("/Shading <<"),be)be.hasOwnProperty(e)&&be[e]instanceof Ln&&be[e].objectNumber>=0&&Q("/"+e+" "+be[e].objectNumber+" 0 R");_e.publish("putShadingPatternDict"),Q(">>")}}(),function(e){if(Object.keys(be).length>0){for(var t in Q("/Pattern <<"),be)be.hasOwnProperty(t)&&be[t]instanceof p.TilingPattern&&be[t].objectNumber>=0&&be[t].objectNumber<e&&Q("/"+t+" "+be[t].objectNumber+" 0 R");_e.publish("putTilingPatternDict"),Q(">>")}}(e.objectOid),function(){if(Object.keys(Se).length>0){var e;for(e in Q("/ExtGState <<"),Se)Se.hasOwnProperty(e)&&Se[e].objectNumber>=0&&Q("/"+e+" "+Se[e].objectNumber+" 0 R");_e.publish("putGStateDict"),Q(">>")}}(),function(){for(var e in Q("/XObject <<"),Pe)Pe.hasOwnProperty(e)&&Pe[e].objectNumber>=0&&Q("/"+e+" "+Pe[e].objectNumber+" 0 R");_e.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj")},et=function(){var e=[];(function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&Ye(ge[e])})(),function(){var e;for(e in Se)Se.hasOwnProperty(e)&&Je(Se[e])}(),function(){for(var e in Pe)Pe.hasOwnProperty(e)&&Ze(Pe[e])}(),function(e){var t;for(t in be)be.hasOwnProperty(t)&&(be[t]instanceof Ln?$e(be[t]):be[t]instanceof Mn&&Qe(be[t],e))}(e),_e.publish("putResources"),e.forEach(Xe),Xe({resourcesOid:qe,objectOid:Number.MAX_SAFE_INTEGER}),_e.publish("postPutResources")},tt=function(e){ve[e.fontName]=ve[e.fontName]||{},ve[e.fontName][e.fontStyle]=e.id},at=function(e,t,n,a,i){var r={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:a,isStandardFont:i||!1,metadata:{}};return _e.publish("addFont",{font:r,instance:this}),ge[r.id]=r,tt(r),r.id},it=p.__private__.pdfEscape=p.pdfEscape=function(e,t){return function(e,t){var n,a,i,r,o,s,l,c,d;if(i=(t=t||{}).sourceEncoding||"Unicode",o=t.outputEncoding,(t.autoencode||o)&&ge[ue].metadata&&ge[ue].metadata[i]&&ge[ue].metadata[i].encoding&&(r=ge[ue].metadata[i].encoding,!o&&ge[ue].encoding&&(o=ge[ue].encoding),!o&&r.codePages&&(o=r.codePages[0]),"string"==typeof o&&(o=r[o]),o)){for(l=!1,s=[],n=0,a=e.length;n<a;n++)(c=o[e.charCodeAt(n)])?s.push(String.fromCharCode(c)):s.push(e[n]),s[n].charCodeAt(0)>>8&&(l=!0);e=s.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(s=t.noBOM?[]:[254,255],n=0,a=e.length;n<a;n++){if((d=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(d),s.push(c-(d<<8))}return String.fromCharCode.apply(void 0,s)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=p.__private__.beginPage=function(e){V[++Ne]=[],ke[Ne]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},lt(Ne),$(V[O])},ot=function(e,t){var a,r,o;switch(n=t||n,"string"==typeof e&&(a=v(e.toLowerCase()),Array.isArray(a)&&(r=a[0],o=a[1])),Array.isArray(e)&&(r=e[0]*he,o=e[1]*he),isNaN(r)&&(r=i[0],o=i[1]),(r>14400||o>14400)&&(tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),r=Math.min(14400,r),o=Math.min(14400,o)),i=[r,o],n.substr(0,1)){case"l":o>r&&(i=[o,r]);break;case"p":r>o&&(i=[o,r])}rt(i),Bt(Et),Q(Yt),0!==nn&&Q(nn+" J"),0!==an&&Q(an+" j"),_e.publish("addPage",{pageNumber:Ne})},st=function(e){e>0&&e<=Ne&&(V.splice(e,1),ke.splice(e,1),Ne--,O>Ne&&(O=Ne),this.setPage(O))},lt=function(e){e>0&&e<=Ne&&(O=e)},ct=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return V.length-1},dt=function(e,t,n){var a,i=void 0;return n=n||{},e=void 0!==e?e:ge[ue].fontName,t=void 0!==t?t:ge[ue].fontStyle,a=e.toLowerCase(),void 0!==ve[a]&&void 0!==ve[a][t]?i=ve[a][t]:void 0!==ve[e]&&void 0!==ve[e][t]?i=ve[e][t]:!1===n.disableWarning&&tn.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=ve.times[t])&&(i=ve.times.normal),i},ut=p.__private__.putInfo=function(){var e=ze(),t=function(e){return e};for(var n in null!==d&&(t=xt.encryptor(e,0)),Q("<<"),Q("/Producer ("+it(t("jsPDF "+Rn.version))+")"),de)de.hasOwnProperty(n)&&de[n]&&Q("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+it(t(de[n]))+")");Q("/CreationDate ("+it(t(L))+")"),Q(">>"),Q("endobj")},ht=p.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Be;switch(ze(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&Q("/OpenAction [3 0 R /XYZ null null "+C(ne)+"]")}switch(se||(se="continuous"),se){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}re&&Q("/PageMode /"+re),_e.publish("putCatalog"),Q(">>"),Q("endobj")},pt=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(H+1)),Q("/Root "+H+" 0 R"),Q("/Info "+(H-1)+" 0 R"),null!==d&&Q("/Encrypt "+xt.oid+" 0 R"),Q("/ID [ <"+M+"> <"+M+"> ]"),Q(">>")},mt=p.__private__.putHeader=function(){Q("%PDF-"+m),Q("%\xba\xdf\xac\xe0")},ft=p.__private__.putXRef=function(){var e="0000000000";Q("xref"),Q("0 "+(H+1)),Q("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof G[t]?Q((e+G[t]()).slice(-10)+" 00000 n "):void 0!==G[t]?Q((e+G[t]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},gt=p.__private__.buildDocument=function(){H=0,U=0,W=[],G=[],K=[],Be=De(),qe=De(),$(W),_e.publish("buildDocument"),mt(),Ve(),function(){_e.publish("putAdditionalObjects");for(var e=0;e<K.length;e++){var t=K[e];Ee(t.objId,!0),Q(t.content),Q("endobj")}_e.publish("postPutAdditionalObjects")}(),et(),null!==d&&(xt.oid=ze(),Q("<<"),Q("/Filter /Standard"),Q("/V "+xt.v),Q("/R "+xt.r),Q("/U <"+xt.toHexString(xt.U)+">"),Q("/O <"+xt.toHexString(xt.O)+">"),Q("/P "+xt.P),Q(">>"),Q("endobj")),ut(),ht();var e=U;return ft(),pt(),Q("startxref"),Q(""+e),Q("%%EOF"),$(V[O]),W.join("\n")},vt=p.__private__.getBlob=function(e){return new Blob([X(e)],{type:"application/pdf"})},yt=p.output=p.__private__.output=(Te=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return gt();case"save":p.save(t.filename);break;case"arraybuffer":return X(gt());case"blob":return vt(gt());case"bloburi":case"bloburl":if(void 0!==Xt.URL&&"function"==typeof Xt.URL.createObjectURL)return Xt.URL&&Xt.URL.createObjectURL(vt(gt()))||void 0;tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",a=gt();try{n=sn(a)}catch(e){n=sn(unescape(encodeURIComponent(a)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(Xt)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",r=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,r="");var o='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+r+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",s=Xt.open();return null!==s&&s.document.write(o),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(Xt)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=Xt.open();if(null!==c){c.document.write(l);var d=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(Xt))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=Xt.open();if(null!==h&&(h.document.write(u),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return Xt.document.location.href=this.output("datauristring",t);default:return null}},Te.foo=function(){try{return Te.apply(this,arguments)}catch(Te){var e=Te.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Te.message;if(!Xt.console)throw new Error(t);Xt.console.error(t,Te),Xt.alert&&alert(t)}},Te.foo.bar=Te,Te.foo),bt=function(e){return!0===Array.isArray(Ce)&&Ce.indexOf(e)>-1};switch(a){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==bt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof a)throw new Error("Invalid unit: "+a);he=a}var xt=null;D(),I();var St=p.__private__.getPageInfo=p.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ke[e].objId,pageNumber:e,pageContext:ke[e]}},jt=p.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in ke)if(ke[t].objId===e)break;return St(t)},wt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:ke[O].objId,pageNumber:O,pageContext:ke[O]}};p.addPage=function(){return ot.apply(this,arguments),this},p.setPage=function(){return lt.apply(this,arguments),$.call(this,V[O]),this},p.insertPage=function(e){return this.addPage(),this.movePage(O,e),this},p.movePage=function(e,t){var n,a;if(e>t){n=V[e],a=ke[e];for(var i=e;i>t;i--)V[i]=V[i-1],ke[i]=ke[i-1];V[t]=n,ke[t]=a,this.setPage(t)}else if(e<t){n=V[e],a=ke[e];for(var r=e;r<t;r++)V[r]=V[r+1],ke[r]=ke[r+1];V[t]=n,ke[t]=a,this.setPage(t)}return this},p.deletePage=function(){return st.apply(this,arguments),this},p.__private__.text=p.text=function(e,t,n,a,i){var r,o,s,l,c,d,u,p,m,f=(a=a||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Le==0?(s=arguments[4],l=arguments[5],"object"===(0,nt.A)(u=arguments[3])&&null!==u||("string"==typeof s&&(l=s,s=null),"string"==typeof u&&(l=u,u=null),"number"==typeof u&&(s=u,u=null),a={flags:u,angle:s,align:l})):(k("The transform parameter of text() with a Matrix value"),m=i),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var v,y="",S="number"==typeof a.lineHeightFactor?a.lineHeightFactor:Dt,j=f.internal.scaleFactor;function w(e){return e=e.split("\t").join(Array(a.TabLen||9).join(" ")),it(e,u)}function _(e){for(var t,n=e.concat(),a=[],i=n.length;i--;)"string"==typeof(t=n.shift())?a.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?a.push(t[0]):a.push([t[0],t[1],t[2]]);return a}function C(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var a,i,r=e.concat(),o=[],s=r.length;s--;)"string"==typeof(a=r.shift())?o.push(t(a)[0]):Array.isArray(a)&&"string"==typeof a[0]&&(i=t(a[0],a[1],a[2]),o.push([i[0],i[1],i[2]]));n=o}return n}var P=!1,A=!0;if("string"==typeof e)P=!0;else if(Array.isArray(e)){var L=e.concat();o=[];for(var M,R=L.length;R--;)("string"!=typeof(M=L.shift())||Array.isArray(M)&&"string"!=typeof M[0])&&(A=!1);P=A}if(!1===P)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var I=te/f.internal.scaleFactor,T=I*(S-1);switch(a.baseline){case"bottom":n-=T;break;case"top":n+=I-T;break;case"hanging":n+=I-2*T;break;case"middle":n+=I/2-T}if((d=a.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(f.splitTextToSize(t,d))},[]))),r={text:e,x:t,y:n,options:a,mutex:{pdfEscape:it,activeFontKey:ue,fonts:ge,activeFontSize:te}},_e.publish("preProcessText",r),e=r.text,s=(a=r.options).angle,m instanceof Le==0&&s&&"number"==typeof s){s*=Math.PI/180,0===a.rotationDirection&&(s=-s),x===b&&(s=-s);var z=Math.cos(s),D=Math.sin(s);m=new Le(z,D,-D,z,0,0)}else s&&s instanceof Le&&(m=s);x!==b||m||(m=Re),void 0!==(c=a.charSpace||Jt)&&(y+=N(F(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=a.horizontalScale)&&(y+=N(100*p)+" Tz\n"),a.lang;var E=-1,O=void 0!==a.renderingMode?a.renderingMode:a.stroke,B=f.internal.getCurrentPageInfo().pageContext;switch(O){case 0:case!1:case"fill":E=0;break;case 1:case!0:case"stroke":E=1;break;case 2:case"fillThenStroke":E=2;break;case 3:case"invisible":E=3;break;case 4:case"fillAndAddForClipping":E=4;break;case 5:case"strokeAndAddPathForClipping":E=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":E=6;break;case 7:case"addToPathForClipping":E=7}var q=void 0!==B.usedRenderingMode?B.usedRenderingMode:-1;-1!==E?y+=E+" Tr\n":-1!==q&&(y+="0 Tr\n"),-1!==E&&(B.usedRenderingMode=E),l=a.align||"left";var H,G=te*S,W=f.internal.pageSize.getWidth(),U=ge[ue];c=a.charSpace||Jt,d=a.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},a.flags);var K=[],V=function(e){return f.getStringUnitWidth(e,{font:U,charSpace:c,fontSize:te,doKerning:!1})*te/j};if("[object Array]"===Object.prototype.toString.call(e)){var Y;o=_(e),"left"!==l&&(H=o.map(V));var Z,$=0;if("right"===l){t-=H[0],e=[],R=o.length;for(var J=0;J<R;J++)0===J?(Z=Wt(t),Y=Ut(n)):(Z=F($-H[J]),Y=-G),e.push([o[J],Z,Y]),$=H[J]}else if("center"===l){t-=H[0]/2,e=[],R=o.length;for(var X=0;X<R;X++)0===X?(Z=Wt(t),Y=Ut(n)):(Z=F(($-H[X])/2),Y=-G),e.push([o[X],Z,Y]),$=H[X]}else if("left"===l){e=[],R=o.length;for(var ee=0;ee<R;ee++)e.push(o[ee])}else if("justify"===l&&"Identity-H"===U.encoding){e=[],R=o.length,d=0!==d?d:W;for(var ne=0,ae=0;ae<R;ae++)if(Y=0===ae?Ut(n):-G,Z=0===ae?Wt(t):ne,ae<R-1){var re=F((d-H[ae])/(o[ae].split(" ").length-1)),oe=o[ae].split(" ");e.push([oe[0]+" ",Z,Y]),ne=0;for(var se=1;se<oe.length;se++){var le=(V(oe[se-1]+" "+oe[se])-V(oe[se]))*j+re;se==oe.length-1?e.push([oe[se],le,0]):e.push([oe[se]+" ",le,0]),ne-=le}}else e.push([o[ae],Z,Y]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],R=o.length,d=0!==d?d:W,ae=0;ae<R;ae++)Y=0===ae?Ut(n):-G,Z=0===ae?Wt(t):0,ae<R-1?K.push(N(F((d-H[ae])/(o[ae].split(" ").length-1)))):K.push(0),e.push([o[ae],Z,Y])}}!0===("boolean"==typeof a.R2L?a.R2L:ie)&&(e=C(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),r={text:e,x:t,y:n,options:a,mutex:{pdfEscape:it,activeFontKey:ue,fonts:ge,activeFontSize:te}},_e.publish("postProcessText",r),e=r.text,v=r.mutex.isHex||!1;var ce=ge[ue].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=C(e,function(e,t,n){return[w(e),t,n]})),o=_(e),e=[];for(var de,he,pe,me=Array.isArray(o[0])?1:0,fe="",ve=function(e,t,n){var i="";return n instanceof Le?(n="number"==typeof a.angle?Me(n,new Le(1,0,0,1,e,t)):Me(new Le(1,0,0,1,e,t),n),x===b&&(n=Me(new Le(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=N(e)+" "+N(t)+" Td\n",i},ye=0;ye<o.length;ye++){switch(fe="",me){case 1:pe=(v?"<":"(")+o[ye][0]+(v?">":")"),de=parseFloat(o[ye][1]),he=parseFloat(o[ye][2]);break;case 0:pe=(v?"<":"(")+o[ye]+(v?">":")"),de=Wt(t),he=Ut(n)}void 0!==K&&void 0!==K[ye]&&(fe=K[ye]+" Tw\n"),0===ye?e.push(fe+ve(de,he,m)+pe):0===me?e.push(fe+pe):1===me&&e.push(fe+ve(de,he,m)+pe)}e=0===me?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var be="BT\n/";return be+=ue+" "+te+" Tf\n",be+=N(te*S)+" TL\n",be+=$t+"\n",be+=y,be+=e,Q(be+="ET"),h[ue]=!0,f};var Nt=p.__private__.clip=p.clip=function(e){return Q("evenodd"===e?"W*":"W"),this};p.clipEvenOdd=function(){return Nt("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var kt=p.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(e){return kt(e)&&(c=e),this};var _t=p.__private__.getStyle=p.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Ct=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(e){return Pt("f",e),this},p.fillEvenOdd=function(e){return Pt("f*",e),this},p.fillStroke=function(e){return Pt("B",e),this},p.fillStrokeEvenOdd=function(e){return Pt("B*",e),this};var Pt=function(e,t){"object"===(0,nt.A)(t)?Lt(t,e):Q(e)},Ft=function(e){null===e||x===b&&void 0===e||(e=_t(e),Q(e))};function At(e,t,n,a,i){var r=new Mn(t||this.boundingBox,n||this.xStep,a||this.yStep,this.gState,i||this.matrix);r.stream=this.stream;var o=e+"$$"+this.cloneIndex+++"$$";return Ie(o,r),r}var Lt=function(e,t){var n=xe[e.key],a=be[n];if(a instanceof Ln)Q("q"),Q(Mt(t)),a.gState&&p.setGState(a.gState),Q(e.matrix.toString()+" cm"),Q("/"+n+" sh"),Q("Q");else if(a instanceof Mn){var i=new Le(1,0,0,-1,0,gn());e.matrix&&(i=i.multiply(e.matrix||Re),n=At.call(a,e.key,e.boundingBox,e.xStep,e.yStep,i).id),Q("q"),Q("/Pattern cs"),Q("/"+n+" scn"),a.gState&&p.setGState(a.gState),Q(t),Q("Q")}},Mt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Rt=p.moveTo=function(e,t){return Q(N(F(e))+" "+N(A(t))+" m"),this},It=p.lineTo=function(e,t){return Q(N(F(e))+" "+N(A(t))+" l"),this},Tt=p.curveTo=function(e,t,n,a,i,r){return Q([N(F(e)),N(A(t)),N(F(n)),N(A(a)),N(F(i)),N(A(r)),"c"].join(" ")),this};p.__private__.line=p.line=function(e,t,n,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!kt(i))throw new Error("Invalid arguments passed to jsPDF.line");return x===y?this.lines([[n-e,a-t]],e,t,[1,1],i||"S"):this.lines([[n-e,a-t]],e,t,[1,1]).stroke()},p.__private__.lines=p.lines=function(e,t,n,a,i,r){var o,s,l,c,d,u,h,p,m,f,g,v;if("number"==typeof e&&(v=n,n=t,t=e,e=v),a=a||[1,1],r=r||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(a)||!kt(i)||"boolean"!=typeof r)throw new Error("Invalid arguments passed to jsPDF.lines");for(Rt(t,n),o=a[0],s=a[1],c=e.length,f=t,g=n,l=0;l<c;l++)2===(d=e[l]).length?(f=d[0]*o+f,g=d[1]*s+g,It(f,g)):(u=d[0]*o+f,h=d[1]*s+g,p=d[2]*o+f,m=d[3]*s+g,f=d[4]*o+f,g=d[5]*s+g,Tt(u,h,p,m,f,g));return r&&Ct(),Ft(i),this},p.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=n.c;switch(n.op){case"m":Rt(a[0],a[1]);break;case"l":It(a[0],a[1]);break;case"c":Tt.apply(this,a);break;case"h":Ct()}}return this},p.__private__.rect=p.rect=function(e,t,n,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!kt(i))throw new Error("Invalid arguments passed to jsPDF.rect");return x===y&&(a=-a),Q([N(F(e)),N(A(t)),N(F(n)),N(F(a)),"re"].join(" ")),Ft(i),this},p.__private__.triangle=p.triangle=function(e,t,n,a,i,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(i)||isNaN(r)||!kt(o))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,a-t],[i-n,r-a],[e-i,t-r]],e,t,[1,1],o,!0),this},p.__private__.roundedRect=p.roundedRect=function(e,t,n,a,i,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(i)||isNaN(r)||!kt(o))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),r=Math.min(r,.5*a),this.lines([[n-2*i,0],[i*s,0,i,r-r*s,i,r],[0,a-2*r],[0,r*s,-i*s,r,-i,r],[2*i-n,0],[-i*s,0,-i,-r*s,-i,-r],[0,2*r-a],[0,-r*s,i*s,-r,i,-r]],e+i,t,[1,1],o,!0),this},p.__private__.ellipse=p.ellipse=function(e,t,n,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!kt(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var r=4/3*(Math.SQRT2-1)*n,o=4/3*(Math.SQRT2-1)*a;return Rt(e+n,t),Tt(e+n,t-o,e+r,t-a,e,t-a),Tt(e-r,t-a,e-n,t-o,e-n,t),Tt(e-n,t+o,e-r,t+a,e,t+a),Tt(e+r,t+a,e+n,t+o,e+n,t),Ft(i),this},p.__private__.circle=p.circle=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||!kt(a))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,a)},p.setFont=function(e,t,n){return n&&(t=w(t,n)),ue=dt(e,t,{disableWarning:!1}),this};var zt=p.__private__.getFont=p.getFont=function(){return ge[dt.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var e,t,n={};for(e in ve)if(ve.hasOwnProperty(e))for(t in n[e]=[],ve[e])ve[e].hasOwnProperty(t)&&n[e].push(t);return n},p.addFont=function(e,t,n,a,i){var r=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==r.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==r.indexOf(arguments[3])&&(n=w(n,a)),at.call(this,e,t,n,i=i||"Identity-H")};var Dt,Et=e.lineWidth||.200025,Ot=p.__private__.getLineWidth=p.getLineWidth=function(){return Et},Bt=p.__private__.setLineWidth=p.setLineWidth=function(e){return Et=e,Q(N(F(e))+" w"),this};p.__private__.setLineDash=Rn.API.setLineDash=Rn.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return N(F(e))}).join(" "),t=N(F(t)),Q("["+e+"] "+t+" d"),this};var qt=p.__private__.getLineHeight=p.getLineHeight=function(){return te*Dt};p.__private__.getLineHeight=p.getLineHeight=function(){return te*Dt};var Ht=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Dt=e),this},Gt=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Dt};Ht(e.lineHeight);var Wt=p.__private__.getHorizontalCoordinate=function(e){return F(e)},Ut=p.__private__.getVerticalCoordinate=function(e){return x===b?e:ke[O].mediaBox.topRightY-ke[O].mediaBox.bottomLeftY-F(e)},Kt=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(e){return N(Wt(e))},Vt=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(e){return N(Ut(e))},Yt=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return He(Yt)},p.__private__.setStrokeColor=p.setDrawColor=function(e,t,n,a){return Yt=Ge({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"draw",precision:2}),Q(Yt),this};var Zt=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return He(Zt)},p.__private__.setFillColor=p.setFillColor=function(e,t,n,a){return Zt=Ge({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"fill",precision:2}),Q(Zt),this};var $t=e.textColor||"0 g",Qt=p.__private__.getTextColor=p.getTextColor=function(){return He($t)};p.__private__.setTextColor=p.setTextColor=function(e,t,n,a){return $t=Ge({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"text",precision:3}),this};var Jt=e.charSpace,en=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Jt||0)};p.__private__.setCharSpace=p.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jt=e,this};var nn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nn=t,Q(t+" J"),this};var an=0;p.__private__.setLineJoin=p.setLineJoin=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return an=t,Q(t+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(N(F(e))+" M"),this},p.GState=Fn,p.setGState=function(e){(e="string"==typeof e?Se[je[e]]:rn(null,e)).equals(we)||(Q("/"+e.id+" gs"),we=e)};var rn=function(e,t){if(!e||!je[e]){var n=!1;for(var a in Se)if(Se.hasOwnProperty(a)&&Se[a].equals(t)){n=!0;break}if(n)t=Se[a];else{var i="GS"+(Object.keys(Se).length+1).toString(10);Se[i]=t,t.id=i}return e&&(je[e]=t.id),_e.publish("addGState",t),t}};p.addGState=function(e,t){return rn(e,t),this},p.saveGraphicsState=function(){return Q("q"),ye.push({key:ue,size:te,color:$t}),this},p.restoreGraphicsState=function(){Q("Q");var e=ye.pop();return ue=e.key,te=e.size,$t=e.color,we=null,this},p.setCurrentTransformationMatrix=function(e){return Q(e.toString()+" cm"),this},p.comment=function(e){return Q("#"+e),this};var on=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var a=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},dn=function(e,t,n,a){on.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var r=a||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}}),this},un=function(){this.page=Ne,this.currentPage=O,this.pages=V.slice(0),this.pagesContext=ke.slice(0),this.x=pe,this.y=me,this.matrix=fe,this.width=mn(O),this.height=gn(O),this.outputDestination=Z,this.id="",this.objectNumber=-1};un.prototype.restore=function(){Ne=this.page,O=this.currentPage,ke=this.pagesContext,V=this.pages,pe=this.x,me=this.y,fe=this.matrix,fn(O,this.width),vn(O,this.height),Z=this.outputDestination};var hn=function(e,t,n,a,i){Ae.push(new un),Ne=O=0,V=[],pe=e,me=t,fe=i,rt([n,a])};for(var pn in p.beginFormObject=function(e,t,n,a,i){return hn(e,t,n,a,i),this},p.endFormObject=function(e){return function(e){if(Fe[e])Ae.pop().restore();else{var t=new un,n="Xo"+(Object.keys(Pe).length+1).toString(10);t.id=n,Fe[e]=n,Pe[n]=t,_e.publish("addFormObject",t),Ae.pop().restore()}}(e),this},p.doFormObject=function(e,t){var n=Pe[Fe[e]];return Q("q"),Q(t.toString()+" cm"),Q("/"+n.id+" Do"),Q("Q"),this},p.getFormObject=function(e){var t=Pe[Fe[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},p.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(ln(vt(gt()),e),"function"==typeof ln.unload&&Xt.setTimeout&&setTimeout(ln.unload,911),this):new Promise(function(t,n){try{var a=ln(vt(gt()),e);"function"==typeof ln.unload&&Xt.setTimeout&&setTimeout(ln.unload,911),t(a)}catch(e){n(e.message)}})},Rn.API)Rn.API.hasOwnProperty(pn)&&("events"===pn&&Rn.API.events.length?function(e,t){var n,a,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],a=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof a?[a]:a))}(_e,Rn.API.events):p[pn]=Rn.API[pn]);var mn=p.getPageWidth=function(e){return(ke[e=e||O].mediaBox.topRightX-ke[e].mediaBox.bottomLeftX)/he},fn=p.setPageWidth=function(e,t){ke[e].mediaBox.topRightX=t*he+ke[e].mediaBox.bottomLeftX},gn=p.getPageHeight=function(e){return(ke[e=e||O].mediaBox.topRightY-ke[e].mediaBox.bottomLeftY)/he},vn=p.setPageHeight=function(e,t){ke[e].mediaBox.topRightY=t*he+ke[e].mediaBox.bottomLeftY};return p.internal={pdfEscape:it,getStyle:_t,getFont:zt,getFontSize:ae,getCharSpace:en,getTextColor:Qt,getLineHeight:qt,getLineHeightFactor:Gt,getLineWidth:Ot,write:J,getHorizontalCoordinate:Wt,getVerticalCoordinate:Ut,getCoordinateString:Kt,getVerticalCoordinateString:Vt,collections:{},newObject:ze,newAdditionalObject:Oe,newObjectDeferred:De,newObjectDeferredBegin:Ee,getFilters:We,putStream:Ue,events:_e,scaleFactor:he,pageSize:{getWidth:function(){return mn(O)},setWidth:function(e){fn(O,e)},getHeight:function(){return gn(O)},setHeight:function(e){vn(O,e)}},encryptionOptions:d,encryption:xt,getEncryptor:function(e){return null!==d?xt.encryptor(e,0):function(e){return e}},output:yt,getNumberOfPages:ct,pages:V,out:Q,f2:C,f3:P,getPageInfo:St,getPageInfoByObjId:jt,getCurrentPageInfo:wt,getPDFVersion:f,Point:on,Rectangle:dn,Matrix:Le,hasHotfix:bt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return mn(O)},set:function(e){fn(O,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return gn(O)},set:function(e){vn(O,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var a=at.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===u&&(h[a]=!0);var i=e[t][0].split("-");tt({id:a,fontName:i[0],fontStyle:i[1]||""})}_e.publish("addFonts",{fonts:ge,dictionary:ve})}.call(p,ee),ue="F1",ot(i,n),_e.publish("initialized"),p}_n.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},_n.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},_n.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},_n.prototype.processOwnerPassword=function(e,t){return Nn(Sn(t).substr(0,5),e)},_n.prototype.encryptor=function(e,t){var n=Sn(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return Nn(n,e)}},Fn.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,nt.A)(e)!==(0,nt.A)(this))return!1;var a=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&a--;return 0===a},Rn.API={events:[]},Rn.version="2.5.2";var In=Rn.API,Tn=1,zn=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dn=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},En=function(e){return e.toFixed(2)},On=function(e){return e.toFixed(5)};In.__acroform__={};var Bn=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},qn=function(e){return e*Tn},Hn=function(e){var t=new ra,n=ba.internal.getHeight(e)||0,a=ba.internal.getWidth(e)||0;return t.BBox=[0,0,Number(En(a)),Number(En(n))],t},Gn=In.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Wn=In.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Un=In.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},Kn=In.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Un(e,t-1)},Vn=In.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Gn(e,t-1)},Yn=In.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Wn(e,t-1)},Zn=In.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,i=e[0],r=e[1],o=e[2],s=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=a(r+s)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=a(r)||0,[Number(En(l.lowerLeft_X)),Number(En(l.lowerLeft_Y)),Number(En(l.upperRight_X)),Number(En(l.upperRight_Y))]},$n=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,a=Qn(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+En(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var r=Hn(e);return r.scope=e.scope,r.stream=t.join("\n"),r}},Qn=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(e){return e.split("\n")}):i.map(function(e){return[e]});var r=n,o=ba.internal.getHeight(e)||0;o=o<0?-o:o;var s=ba.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(t,n,a){if(t+1<i.length){var r=n+" "+i[t+1][0];return Jn(r,e,a).width<=s-4}return!1};r++;e:for(;r>0;){t="",r--;var c,d,u=Jn("3",e,r).height,h=e.multiline?o-r:(o-u)/2,p=h+=2,m=0,f=0,g=0;if(r<=0){t="(...) Tj\n",t+="% Width of Text: "+Jn(t,e,r=12).width+", FieldWidth:"+s+"\n";break}for(var v="",y=0,b=0;b<i.length;b++)if(i.hasOwnProperty(b)){var x=!1;if(1!==i[b].length&&g!==i[b].length-1){if((u+2)*(y+2)+2>o)continue e;v+=i[b][g],x=!0,f=b,b--}else{v=" "==(v+=i[b][g]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var S=parseInt(b),j=l(S,v,r),w=b>=i.length-1;if(j&&!w){v+=" ",g=0;continue}if(j||w){if(w)f=S;else if(e.multiline&&(u+2)*(y+2)+2>o)continue e}else{if(!e.multiline)continue e;if((u+2)*(y+2)+2>o)continue e;f=S}}for(var N="",k=m;k<=f;k++){var _=i[k];if(e.multiline){if(k===f){N+=_[g]+" ",g=(g+1)%_.length;continue}if(k===m){N+=_[_.length-1]+" ";continue}}N+=_[0]+" "}switch(N=" "==N.substr(N.length-1)?N.substr(0,N.length-1):N,d=Jn(N,e,r).width,e.textAlign){case"right":c=s-d-2;break;case"center":c=(s-d)/2;break;default:c=2}t+=En(c)+" "+En(p)+" Td\n",t+="("+zn(N)+") Tj\n",t+=-En(c)+" 0 Td\n",p=-(r+2),d=0,m=x?f:f+1,y++,v=""}break}return a.text=t,a.fontSize=r,a},Jn=function(e,t,n){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Xn={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ea=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},ta=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(sa.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Xn)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tn=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new oa,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];a.objId=void 0,a.hasAnnotation&&ea(a,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var a in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(a)){var i=e[a],r=[],o=i.Rect;if(i.Rect&&(i.Rect=Zn(i.Rect,t)),t.internal.newObjectDeferredBegin(i.objId,!0),i.DA=ba.createDefaultAppearanceStream(i),"object"===(0,nt.A)(i)&&"function"==typeof i.getKeyValueListForStream&&(r=i.getKeyValueListForStream()),i.Rect=o,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=$n(i);r.push({key:"AP",value:"<</N "+s+">>"}),t.internal.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){var l="";for(var c in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(c)){var d=i.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var u=d[a];"function"==typeof u&&(u=u.call(t,i)),l+="/"+a+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=d)&&(u=u.call(t,i)),l+="/"+a+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);l+=">>"}r.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:r,objectId:i.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var a=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),"object"===(0,nt.A)(i)&&"function"==typeof i.putStream&&i.putStream(),delete e[a]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},na=In.__acroform__.arrayToPdfArray=function(e,t,n){var a=function(e){return e};if(Array.isArray(e)){for(var i="[",r=0;r<e.length;r++)switch(0!==r&&(i+=" "),(0,nt.A)(e[r])){case"boolean":case"number":case"object":i+=e[r].toString();break;case"string":"/"!==e[r].substr(0,1)?(void 0!==t&&n&&(a=n.internal.getEncryptor(t)),i+="("+zn(a(e[r].toString()))+")"):i+=e[r].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},aa=function(e,t,n){var a=function(e){return e};return void 0!==t&&n&&(a=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+zn(a(e))+")"},ia=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ia.prototype.toString=function(){return this.objId+" 0 R"},ia.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ia.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var a=t[n],i=this[a];i&&(Array.isArray(i)?e.push({key:a,value:na(i,this.objId,this.scope)}):i instanceof ia?(i.scope=this.scope,e.push({key:a,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:a,value:i}))}return e};var ra=function(){ia.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Bn(ra,ia);var oa=function(){ia.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+zn(t(e))+")"}},set:function(t){e=t}})};Bn(oa,ia);var sa=function e(){ia.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(t,3))},set:function(e){!0===Boolean(e)?this.F=Vn(t,3):this.F=Yn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==a.length)return a},set:function(e){a=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(e){a[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(e){a[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(e){a[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(e){a[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof fa)return;r="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+zn(t(r))+")"},set:function(e){r=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){r=e}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Tn:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof fa||this instanceof va))return aa(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ha==0?aa(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof ha==0?"("===e.substr(0,1)?Dn(e.substr(1,e.length-2)):Dn(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ha==1?Dn(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof ha==1?"/"+e:e}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ha==0?aa(p,this.objId,this.scope):p},set:function(e){e=e.toString(),p=this instanceof ha==0?"("===e.substr(0,1)?Dn(e.substr(1,e.length-2)):Dn(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ha==1?Dn(p.substr(1,p.length-1)):p},set:function(e){e=e.toString(),p=this instanceof ha==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(e){m=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,1):this.Ff=Yn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,2):this.Ff=Yn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,3):this.Ff=Yn(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Bn(sa,ia);var la=function(){sa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return na(t,this.objId,this.scope)},set:function(e){var n,a;a=[],"string"==typeof(n=e)&&(a=function(e,t,n){n||(n=1);for(var a,i=[];a=t.exec(e);)i.push(a[n]);return i}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,18):this.Ff=Yn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=Vn(this.Ff,19):this.Ff=Yn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=Vn(this.Ff,20),t.sort()):this.Ff=Yn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,22):this.Ff=Yn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,23):this.Ff=Yn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,27):this.Ff=Yn(this.Ff,27)}}),this.hasAppearanceStream=!1};Bn(la,sa);var ca=function(){la.call(this),this.fontName="helvetica",this.combo=!1};Bn(ca,la);var da=function(){ca.call(this),this.combo=!0};Bn(da,ca);var ua=function(){da.call(this),this.edit=!0};Bn(ua,da);var ha=function(){sa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,15):this.Ff=Yn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,16):this.Ff=Yn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,17):this.Ff=Yn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,26):this.Ff=Yn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+zn(e(t[n]))+")");return a.push(">>"),a.join("\n")}},set:function(e){"object"===(0,nt.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Bn(ha,sa);var pa=function(){ha.call(this),this.pushButton=!0};Bn(pa,ha);var ma=function(){ha.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};Bn(ma,ha);var fa=function(){var e,t;sa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),a)n.push("/"+t+" ("+zn(e(a[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,nt.A)(e)&&(a=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(e){"string"==typeof e&&(a.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ba.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Bn(fa,sa),ma.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},ma.prototype.createOption=function(e){var t=new fa;return t.Parent=this,t.optionName=e,this.Kids.push(t),xa.call(this.scope,t),t};var ga=function(){ha.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ba.CheckBox.createAppearanceStream()};Bn(ga,ha);var va=function(){sa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,13):this.Ff=Yn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,21):this.Ff=Yn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,23):this.Ff=Yn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,24):this.Ff=Yn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,25):this.Ff=Yn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,26):this.Ff=Yn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Bn(va,sa);var ya=function(){va.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Kn(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=Vn(this.Ff,14):this.Ff=Yn(this.Ff,14)}}),this.password=!0};Bn(ya,va);var ba={CheckBox:{createAppearanceStream:function(){return{N:{On:ba.CheckBox.YesNormal},D:{On:ba.CheckBox.YesPushDown,Off:ba.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Hn(e);t.scope=e.scope;var n=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),r=Qn(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+En(ba.internal.getWidth(e))+" "+En(ba.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+a+" "+En(r.fontSize)+" Tf "+i),n.push("BT"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=Hn(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=[],r=ba.internal.getHeight(e),o=ba.internal.getWidth(e),s=Qn(e,e.caption);return i.push("1 g"),i.push("0 0 "+En(o)+" "+En(r)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+En(o-1)+" "+En(r-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+En(s.fontSize)+" Tf "+a),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=Hn(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+En(ba.internal.getWidth(e))+" "+En(ba.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ba.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ba.RadioButton.Circle.YesNormal,t.D[e]=ba.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Hn(e);t.scope=e.scope;var n=[],a=ba.internal.getWidth(e)<=ba.internal.getHeight(e)?ba.internal.getWidth(e)/4:ba.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var i=ba.internal.Bezier_C,r=Number((a*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+On(ba.internal.getWidth(e)/2)+" "+On(ba.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+r+" "+r+" "+a+" 0 "+a+" c"),n.push("-"+r+" "+a+" -"+a+" "+r+" -"+a+" 0 c"),n.push("-"+a+" -"+r+" -"+r+" -"+a+" 0 -"+a+" c"),n.push(r+" -"+a+" "+a+" -"+r+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Hn(e);t.scope=e.scope;var n=[],a=ba.internal.getWidth(e)<=ba.internal.getHeight(e)?ba.internal.getWidth(e)/4:ba.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),r=Number((i*ba.internal.Bezier_C).toFixed(5)),o=Number((a*ba.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+On(ba.internal.getWidth(e)/2)+" "+On(ba.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+On(ba.internal.getWidth(e)/2)+" "+On(ba.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=Hn(e);t.scope=e.scope;var n=[],a=ba.internal.getWidth(e)<=ba.internal.getHeight(e)?ba.internal.getWidth(e)/4:ba.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),r=Number((i*ba.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+On(ba.internal.getWidth(e)/2)+" "+On(ba.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ba.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ba.RadioButton.Cross.YesNormal,t.D[e]=ba.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Hn(e);t.scope=e.scope;var n=[],a=ba.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+En(ba.internal.getWidth(e)-2)+" "+En(ba.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(En(a.x1.x)+" "+En(a.x1.y)+" m"),n.push(En(a.x2.x)+" "+En(a.x2.y)+" l"),n.push(En(a.x4.x)+" "+En(a.x4.y)+" m"),n.push(En(a.x3.x)+" "+En(a.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Hn(e);t.scope=e.scope;var n=ba.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+En(ba.internal.getWidth(e))+" "+En(ba.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+En(ba.internal.getWidth(e)-2)+" "+En(ba.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(En(n.x1.x)+" "+En(n.x1.y)+" m"),a.push(En(n.x2.x)+" "+En(n.x2.y)+" l"),a.push(En(n.x4.x)+" "+En(n.x4.y)+" m"),a.push(En(n.x3.x)+" "+En(n.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=Hn(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+En(ba.internal.getWidth(e))+" "+En(ba.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};ba.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ba.internal.getWidth(e),n=ba.internal.getHeight(e),a=Math.min(t,n);return{x1:{x:(t-a)/2,y:(n-a)/2+a},x2:{x:(t-a)/2+a,y:(n-a)/2},x3:{x:(t-a)/2,y:(n-a)/2},x4:{x:(t-a)/2+a,y:(n-a)/2+a}}}},ba.internal.getWidth=function(e){var t=0;return"object"===(0,nt.A)(e)&&(t=qn(e.Rect[2])),t},ba.internal.getHeight=function(e){var t=0;return"object"===(0,nt.A)(e)&&(t=qn(e.Rect[3])),t};var xa=In.addField=function(e){if(ta(this,e),!(e instanceof sa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};In.AcroFormChoiceField=la,In.AcroFormListBox=ca,In.AcroFormComboBox=da,In.AcroFormEditBox=ua,In.AcroFormButton=ha,In.AcroFormPushButton=pa,In.AcroFormRadioButton=ma,In.AcroFormCheckBox=ga,In.AcroFormTextField=va,In.AcroFormPasswordField=ya,In.AcroFormAppearance=ba,In.AcroForm={ChoiceField:la,ListBox:ca,ComboBox:da,EditBox:ua,Button:ha,PushButton:pa,RadioButton:ma,CheckBox:ga,TextField:va,PasswordField:ya,Appearance:ba},Rn.AcroForm={ChoiceField:la,ListBox:ca,ComboBox:da,EditBox:ua,Button:ha,PushButton:pa,RadioButton:ma,CheckBox:ga,TextField:va,PasswordField:ya,Appearance:ba};Rn.AcroForm;function Sa(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(e,a){var i,r,o,s,l,c=t;if("RGBA"===(a=a||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(j(e))for(l in n)for(o=n[l],i=0;i<o.length;i+=1){for(s=!0,r=0;r<o[i].length;r+=1)if(void 0!==o[i][r]&&o[i][r]!==e[r]){s=!1;break}if(!0===s){c=l;break}}else for(l in n)for(o=n[l],i=0;i<o.length;i+=1){for(s=!0,r=0;r<o[i].length;r+=1)if(void 0!==o[i][r]&&o[i][r]!==e.charCodeAt(r)){s=!1;break}if(!0===s){c=l;break}}return c===t&&a!==t&&(c=a),c},i=function e(t){for(var n=this.internal.write,a=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var r=[];if(r.push({key:"Type",value:"/XObject"}),r.push({key:"Subtype",value:"/Image"}),r.push({key:"Width",value:t.width}),r.push({key:"Height",value:t.height}),t.colorSpace===g.INDEXED?r.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(r.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===g.DEVICE_CMYK&&r.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),r.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&r.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var o="",s=0,l=t.transparency.length;s<l;s++)o+=t.transparency[s]+" "+t.transparency[s]+" ";r.push({key:"Mask",value:"["+o+"]"})}void 0!==t.sMask&&r.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(a({data:t.data,additionalKeyValues:r,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var d="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===g.INDEXED){var h=this.internal.newObject();a({data:N(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},r=function(){var e=this.internal.collections.addImage_images;for(var t in e)i.call(this,e[t])},o=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var a in t)n("/I"+(e=t[a]).index,e.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var e=this.internal.collections.addImage_images;return s.call(this),e},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(t){return"function"==typeof e["process"+t.toUpperCase()]},u=function(e){return"object"===(0,nt.A)(e)&&1===e.nodeType},h=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var a=""+t.getAttribute("src");if(0===a.indexOf("data:image/"))return on(unescape(a).split("base64,").pop());var i=e.loadFile(a,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var r;switch(n){case"PNG":r="image/png";break;case"WEBP":r="image/webp";break;default:r="image/jpeg"}return on(t.toDataURL(r,1).split("base64,").pop())}},p=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},m=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},f=function(e,t,n,a,i,r){var o=m.call(this,n,a,i),s=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=l.call(this);if(n=o[0],a=o[1],d[i.index]=i,r){r*=Math.PI/180;var u=Math.cos(r),h=Math.sin(r),p=function(e){return e.toFixed(4)},f=[p(u),p(h),p(-1*h),p(u),0,0,"cm"]}this.internal.write("q"),r?(this.internal.write([1,"0","0",1,s(e),c(t+a),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([s(n),"0","0",s(a),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(a),s(e),c(t+a),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,n,a=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)a=(a<<5)-a+e.charCodeAt(t),a|=0;else if(j(e))for(n=e.byteLength/2,t=0;t<n;t++)a=(a<<5)-a+e[t],a|=0;return a},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},x=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var a=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(a)&&(n={mimeType:a[1],charset:a[2],data:t[1]})}return n},S=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return S()&&e instanceof ArrayBuffer};var j=e.__addimage__.isArrayBufferView=function(e){return S()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},w=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),a=0;a<t;a++)n[a]=e.charCodeAt(a);return n},N=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=j(e)?e:new Uint8Array(e),a=0;a<n.length;a+=8192)t+=String.fromCharCode.apply(null,n.subarray(a,a+8192));return t};e.addImage=function(){var e,n,a,i,r,o,l,c,d;if("number"==typeof arguments[1]?(n=t,a=arguments[1],i=arguments[2],r=arguments[3],o=arguments[4],l=arguments[5],c=arguments[6],d=arguments[7]):(n=arguments[1],a=arguments[2],i=arguments[3],r=arguments[4],o=arguments[5],l=arguments[6],c=arguments[7],d=arguments[8]),"object"===(0,nt.A)(e=arguments[0])&&!u(e)&&"imageData"in e){var h=e;e=h.imageData,n=h.format||n||t,a=h.x||a||0,i=h.y||i||0,r=h.w||h.width||r,o=h.h||h.height||o,l=h.alias||l,c=h.compression||c,d=h.rotation||h.angle||d}var p=this.internal.getFilters();if(void 0===c&&-1!==p.indexOf("FlateEncode")&&(c="SLOW"),isNaN(a)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var m=k.call(this,e,n,l,c);return f.call(this,a,i,r,o,m,d),this};var k=function(n,i,r,o){var s,l,m;if("string"==typeof n&&a(n)===t){n=unescape(n);var f=_(n,!1);(""!==f||void 0!==(f=e.loadFile(n,!0)))&&(n=f)}if(u(n)&&(n=h(n,i)),i=a(n,i),!d(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(m=r)||0===m.length)&&(r=function(e){return"string"==typeof e||j(e)?y(e):j(e.data)?y(e.data):null}(n)),(s=p.call(this,r))||(S()&&(n instanceof Uint8Array||"RGBA"===i||(l=n,n=w(n))),s=this["process"+i.toUpperCase()](n,c.call(this),r,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:v.NONE}(o),l)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},_=e.__addimage__.convertBase64ToBinaryString=function(e,t){var n;t="boolean"!=typeof t||t;var a,i="";if("string"==typeof e){a=null!==(n=x(e))?n.data:e;try{i=on(a)}catch(e){if(t)throw b(a)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};e.getImageProperties=function(n){var i,r,o="";if(u(n)&&(n=h(n)),"string"==typeof n&&a(n)===t&&(""===(o=_(n,!1))&&(o=e.loadFile(n)||""),n=o),r=a(n),!d(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if(!S()||n instanceof Uint8Array||(n=w(n)),!(i=this["process"+r.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=r,i}}(Rn.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Rn.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,a,i,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((n=l[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){n=l[u];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(m.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+r(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+r(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",i+=" /Popup "+f.objId+" 0 R",i+=" /P "+s.objId+" 0 R",i+=" /T ("+h(g(v))+") >>",m.content=i;var y=m.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+r(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+r(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+y,n.open&&(i+=" /Open true"),i+=" >>",f.content=i,this.internal.write(m.objId,"0 R",f.objId,"0 R");break;case"freetext":a="/Rect ["+r(n.bounds.x)+" "+o(n.bounds.y)+" "+r(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(p(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var x=this.annotations._nameMap[n.options.name];n.options.pageNumber=x.page,n.options.top=x.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var S=o(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+S+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,a,i){var r=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;r.pageContext.annotations.push({finalBounds:{x:o(e),y:s(t),w:o(e+n),h:s(t+a)},options:i,type:"link"})},e.textWithLink=function(e,t,n,a){var i,r,o=this.getTextWidth(e),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==a.maxWidth){r=a.maxWidth;var l=this.splitTextToSize(e,r).length;i=Math.ceil(s*l)}else r=o,i=s;return this.text(e,t,n,a),n+=.2*s,"center"===a.align&&(t-=o/2),"right"===a.align&&(t-=o),this.link(t,n-s,r,i,a),o},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Rn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var r=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},o=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},s=e.__arabicParser__.isArabicEndLetter=function(e){return o(e)&&r(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return o(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return o(e)&&r(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return o(e)&&r(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return o(e)&&r(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return o(e)&&r(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,a=n,i="",r=0;for(t=0;t<e.length;t+=1)void 0!==a[e.charCodeAt(t)]?(r++,"number"==typeof(a=a[e.charCodeAt(t)])&&(i+=String.fromCharCode(a),a=n,r=0),t===e.length-1&&(a=n,i+=e.charAt(t-(r-1)),t-=r-1,r=0)):(a=n,i+=e.charAt(t-r),t-=r,r=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==a[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return o(e)?!1===r(e)?-1:!c(e)||!o(t)&&!o(n)||!o(n)&&s(t)||s(e)&&!o(t)||s(e)&&l(t)||s(e)&&s(t)?0:d(e)&&o(t)&&!s(t)&&o(n)&&c(n)?3:s(e)||!o(n)?1:2:-1},p=function(e){var n=0,a=0,i=0,r="",s="",l="",c=(e=e||"").split("\\s+"),d=[];for(n=0;n<c.length;n+=1){for(d.push(""),a=0;a<c[n].length;a+=1)r=c[n][a],s=c[n][a-1],l=c[n][a+1],o(r)?(i=h(r,s,l),d[n]+=-1!==i?String.fromCharCode(t[r.charCodeAt(0)][i]):r):d[n]+=r;d[n]=u(d[n])}return d.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var a=0;for(n=[],a=0;a<t.length;a+=1)Array.isArray(t[a])?n.push([p(t[a][0]),t[a][1],t[a][2]]):n.push([p(t[a])]);e=n}else e=p(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",m])}(Rn.API),Rn.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")});return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(e){a=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Rn.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,a=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var a=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var r=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var o=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return o},set:function(e){o=e}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return a.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){a.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),i=t.font||this.getFont(),r=t.scaleFactor||this.internal.scaleFactor,o=0,s=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)o<(l=this.getStringUnitWidth(e[u],{font:i})*n)&&(o=l);return 0!==o&&(s=e.length),{w:o/=r,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/r,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new r(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var i=this.internal.__cell__.lastCell,o=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===e.lineNumber?(e.x=(i.x||0)+(i.width||0),e.y=i.y||0):i.y+i.height+e.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=s.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=i.y+i.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-o,e.y+o,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+o,{align:"center",baseline:"top",maxWidth:e.width-o-o}):this.text(e.text,e.x+o,e.y+o,{align:"left",baseline:"top",maxWidth:e.width-o-o})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,c,d){if(a.call(this),!l)throw new Error("No data for PDF table.");var u,h,p,m,f=[],g=[],v=[],y={},b={},x=[],S=[],j=(d=d||{}).autoSize||!1,w=!1!==d.printHeaders,N=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,k=d.margins||Object.assign({width:this.getPageWidth()},t),_="number"==typeof d.padding?d.padding:3,C=d.headerBackgroundColor||"#c8c8c8",P=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=w,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=N,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=C,this.internal.__cell__.headerTextColor=P,this.setFontSize(N),null==c)g=f=Object.keys(l[0]),v=f.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,nt.A)(c[0]))for(f=c.map(function(e){return e.name}),g=c.map(function(e){return e.prompt||e.name||""}),v=c.map(function(e){return e.align||"left"}),u=0;u<c.length;u+=1)b[c[u].name]=c[u].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(g=f=c,v=f.map(function(){return"left"}));if(j||Array.isArray(c)&&"string"==typeof c[0])for(u=0;u<f.length;u+=1){for(y[m=f[u]]=l.map(function(e){return e[m]}),this.setFont(void 0,"bold"),x.push(this.getTextDimensions(g[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=y[m],this.setFont(void 0,"normal"),p=0;p<h.length;p+=1)x.push(this.getTextDimensions(h[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[m]=Math.max.apply(null,x)+_+_,x=[]}if(w){var F={};for(u=0;u<f.length;u+=1)F[f[u]]={},F[f[u]].text=g[u],F[f[u]].align=v[u];var A=s.call(this,F,b);S=f.map(function(t){return new r(e,n,b[t],A,F[t].text,void 0,F[t].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var L=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(u=0;u<l.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:l[u]},this);var M=s.call(this,l[u],b);for(p=0;p<f.length;p+=1){var R=l[u][f[p]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:p,data:R},this),o.call(this,new r(e,n,b[f[p]],M,R,u+2,L[f[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var s=function(e,t){var n=this.internal.__cell__.padding,a=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map(function(a){var i=e[a];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[a]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*a/i+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){a.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){i=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,i),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Rn.API);var ja={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},wa=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Na=Sa(wa),ka=[100,200,300,400,500,600,700,800,900],_a=Sa(ka);function Ca(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return ja[e=e||"normal"]?e:"normal"}(e.style),a=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),i=function(e){return"number"==typeof Na[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:a,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,a].join(" ")}}}function Pa(e,t,n,a){var i;for(i=n;i>=0&&i<t.length;i+=a)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=a)if(e[t[i]])return e[t[i]]}var Fa={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Aa={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function La(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Ma(e){return e.trimLeft()}function Ra(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Ia(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Ta,za,Da,Ea,Oa=["times"];!function(e){var t,n,a,i,r,o,s,l,c,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,n=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var a=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return a},set:function(e){a=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var r=0;Object.defineProperty(this,"posY",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(e){o=e}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof d&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var p=null;function m(e,t){if(null===p){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var a=null;switch(e){case"bold":a={family:n,weight:"bold"};break;case"italic":a={family:n,style:"italic"};break;case"bolditalic":a={family:n,weight:"bold",style:"italic"};break;case"":case"normal":a={family:n}}null!==a&&(a.ref={name:n,style:e},t.push(a))})}),t}(e.getFontList());p=function(e){for(var t={},n=0;n<e.length;++n){var a=Ca(e[n]),i=a.family,r=a.stretch,o=a.style,s=a.weight;t[i]=t[i]||{},t[i][r]=t[i][r]||{},t[i][r][o]=t[i][r][o]||{},t[i][r][o][s]=a}return t}(n.concat(t))}return p}var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){p=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],a=(t[2],t[3]),i=t[4],r=(t[5],t[6]),o=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===o?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(e){var t,n,a=[],i=e.trim();if(""===i)return Oa;if(i in Aa)return[Aa[i]];for(;""!==i;){switch(n=null,t=(i=Ma(i)).charAt(0)){case'"':case"'":n=Ra(i.substring(1),t);break;default:n=Ia(i)}if(null===n)return Oa;if(a.push(n[0]),""!==(i=Ma(n[1]))&&","!==i.charAt(0))return Oa;i=i.replace(/^,/,"")}return a}(r);if(this.fontFaces){var l=function(e,t,n){for(var a=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Fa,n.genericFontFamilies||{}),r=null,o=null,s=0;s<t.length;++s)if(i[(r=Ca(t[s])).family]&&(r.family=i[r.family]),e.hasOwnProperty(r.family)){o=e[r.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+La(r)+"' and default family '"+a+"'.");if(o=function(e,t){if(t[e])return t[e];var n=Na[e],a=n<=Na.normal?-1:1,i=Pa(t,wa,n,a);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(r.stretch,o),o=function(e,t){if(t[e])return t[e];for(var n=ja[e],a=0;a<n.length;++a)if(t[n[a]])return t[n[a]];throw new Error("Could not find a matching font-style for "+e)}(r.style,o),!(o=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=_a[e],a=Pa(t,ka,n,e<400?-1:1);if(!a)throw new Error("Could not find a matching font-weight for value "+e);return a}(r.weight,o)))throw new Error("Failed to resolve a font for the rule '"+La(r)+"'.");return o}(m(this.pdf,this.fontFaces),s.map(function(e){return{family:e,stretch:"normal",weight:a,style:n}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===a||parseInt(a,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var d="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<s.length;h++){if(void 0!==this.pdf.internal.getFont(s[h],c,{noFallback:!0,disableWarning:!0})){d=s[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(s[h],"bold",{noFallback:!0,disableWarning:!0}))d=s[h],c="bold";else if(void 0!==this.pdf.internal.getFont(s[h],"normal",{noFallback:!0,disableWarning:!0})){d=s[h],c="normal";break}}if(""===d)for(var p=0;p<s.length;p++)if(u[s[p]]){d=u[s[p]];break}d=""===d?"Times":d,this.pdf.setFont(d,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,D.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,D.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};u.prototype.setLineDash=function(e){this.lineDash=e},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){x.call(this,"fill",!1)},u.prototype.stroke=function(){x.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(e,t)},u.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,nt.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,n,a){if(isNaN(n)||isNaN(a)||isNaN(e)||isNaN(t))throw tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new o(n,a)),r=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:r.x,y1:r.y,x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},u.prototype.bezierCurveTo=function(e,t,n,a,i,r){if(isNaN(i)||isNaN(r)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new o(i,r)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(n,a));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:s.x,y:s.y}),this.ctx.lastPoint=new o(s.x,s.y)},u.prototype.arc=function(e,t,n,a,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(i))throw tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(r=Boolean(r),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new o(e,t));e=s.x,t=s.y;var l=this.ctx.transform.applyToPoint(new o(0,n)),c=this.ctx.transform.applyToPoint(new o(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(i-a)>=2*Math.PI&&(a=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:a,endAngle:i,counterclockwise:r})},u.prototype.arcTo=function(e,t,n,a,i){throw new Error("arcTo not implemented.")},u.prototype.rect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+a),this.lineTo(e,t+a),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,a),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},u.prototype.strokeRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(e,t,n,a),this.stroke())},u.prototype.clearRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,a))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var a=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=a}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,n,a,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,a=0,i=0;else{var r=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==r)t=parseInt(r[1]),n=parseInt(r[2]),a=parseInt(r[3]),i=1;else if(null!==(r=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(r[1]),n=parseInt(r[2]),a=parseInt(r[3]),i=parseFloat(r[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var o=new cn(e);e=o.ok?o.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,a=e.substring(3,4),a+=a):(t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),a=parseInt(a,16)}}return{r:t,g:n,b:a,a:i,style:e}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},m=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,n,a){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(a=isNaN(a)?void 0:a,!p.call(this)){var i=I(this.ctx.transform.rotation),r=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:n,scale:r,angle:i,align:this.textAlign,maxWidth:a})}},u.prototype.strokeText=function(e,t,n,a){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){a=isNaN(a)?void 0:a;var i=I(this.ctx.transform.rotation),r=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:n,scale:r,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:a})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,a=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*a/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.rotate=function(e){if(isNaN(e))throw tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.transform=function(e,t,n,a,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(i)||isNaN(r))throw tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var o=new l(e,t,n,a,i,r);this.ctx.transform=this.ctx.transform.multiply(o)},u.prototype.setTransform=function(e,t,n,a,i,r){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,a=isNaN(a)?1:a,i=isNaN(i)?0:i,r=isNaN(r)?0:r,this.ctx.transform=new l(e,t,n,a,i,r)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(e,t,n,a,i,r,o,c,d){var u=this.pdf.getImageProperties(e),h=1,p=1,m=1,v=1;void 0!==a&&void 0!==c&&(m=c/a,v=d/i,h=u.width/a*c/a,p=u.height/i*d/i),void 0===r&&(r=t,o=n,t=0,n=0),void 0!==a&&void 0===c&&(c=a,d=i),void 0===a&&void 0===c&&(c=u.width,d=u.height);for(var x,j=this.ctx.transform.decompose(),w=I(j.rotate.shx),N=new l,k=(N=(N=(N=N.multiply(j.translate)).multiply(j.skew)).multiply(j.scale)).applyToRectangle(new s(r-t*m,o-n*v,a*h,i*p)),_=g.call(this,k),C=[],P=0;P<_.length;P+=1)-1===C.indexOf(_[P])&&C.push(_[P]);if(b(C),this.autoPaging)for(var F=C[0],A=C[C.length-1],L=F;L<A+1;L++){this.pdf.setPage(L);var M=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],R=1===L?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],z=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],D=1===L?0:T+(L-2)*z;if(0!==this.ctx.clip_path.length){var E=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(x,this.posX+this.margin[3],-D+R+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=E}var O=JSON.parse(JSON.stringify(k));O=y([O],this.posX+this.margin[3],-D+R+this.ctx.prevPageLastElemOffset)[0];var B=(L>F||L<A)&&f.call(this);B&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],M,z,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",O.x,O.y,O.w,O.h,null,null,w),B&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",k.x,k.y,k.w,k.h,null,null,w)};var g=function(e,t,n){var a=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":a.push(Math.floor((e.y+i)/n)+1);break;case"arc":a.push(Math.floor((e.y+i-e.radius)/n)+1),a.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var r=T(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);a.push(Math.floor((r.y+i)/n)+1),a.push(Math.floor((r.y+r.h+i)/n)+1);break;case"bct":var o=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);a.push(Math.floor((o.y+i)/n)+1),a.push(Math.floor((o.y+o.h+i)/n)+1);break;case"rect":a.push(Math.floor((e.y+i)/n)+1),a.push(Math.floor((e.y+e.h+i)/n)+1)}for(var s=0;s<a.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<a[s];)v.call(this);return a},v=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,a=this.lineCap,i=this.lineWidth,r=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=a,this.lineWidth=i,this.lineJoin=r},y=function(e,t,n){for(var a=0;a<e.length;a++)switch(e[a].type){case"bct":e[a].x2+=t,e[a].y2+=n;case"qct":e[a].x1+=t,e[a].y1+=n;default:e[a].x+=t,e[a].y+=n}return e},b=function(e){return e.sort(function(e,t){return e-t})},x=function(e,t){for(var n,a,i=this.fillStyle,r=this.strokeStyle,o=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],p=0;p<u.length;p++)if(void 0!==u[p].x)for(var m=g.call(this,u[p]),x=0;x<m.length;x+=1)-1===h.indexOf(m[x])&&h.push(m[x]);for(var j=0;j<h.length;j++)for(;this.pdf.internal.getNumberOfPages()<h[j];)v.call(this);if(b(h),this.autoPaging)for(var w=h[0],N=h[h.length-1],k=w;k<N+1;k++){this.pdf.setPage(k),this.fillStyle=i,this.strokeStyle=r,this.lineCap=o,this.lineWidth=l,this.lineJoin=c;var _=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],C=1===k?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],F=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],A=1===k?0:P+(k-2)*F;if(0!==this.ctx.clip_path.length){var L=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(n,this.posX+this.margin[3],-A+C+this.ctx.prevPageLastElemOffset),S.call(this,e,!0),this.path=L}if(a=JSON.parse(JSON.stringify(d)),this.path=y(a,this.posX+this.margin[3],-A+C+this.ctx.prevPageLastElemOffset),!1===t||0===k){var M=(k>w||k<N)&&f.call(this);M&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_,F,null).clip().discardPath()),S.call(this,e,t),M&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,S.call(this,e,t),this.lineWidth=s;this.path=d},S=function(e,t){if(("stroke"!==e||t||!m.call(this))&&("stroke"===e||t||!p.call(this))){for(var n,a,i=[],r=this.path,o=0;o<r.length;o++){var s=r[o];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var l=i.length;if(r[o-1]&&!isNaN(r[o-1].x)&&(n=[s.x-r[o-1].x,s.y-r[o-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(s);break}break;case"bct":n=[s.x1-r[o-1].x,s.y1-r[o-1].y,s.x2-r[o-1].x,s.y2-r[o-1].y,s.x-r[o-1].x,s.y-r[o-1].y],i[i.length-1].deltas.push(n);break;case"qct":var c=r[o-1].x+2/3*(s.x1-r[o-1].x),d=r[o-1].y+2/3*(s.y1-r[o-1].y),u=s.x+2/3*(s.x1-s.x),h=s.y+2/3*(s.y1-s.y),f=s.x,g=s.y;n=[c-r[o-1].x,d-r[o-1].y,u-r[o-1].x,h-r[o-1].y,f-r[o-1].x,g-r[o-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}a=t?null:"stroke"===e?"stroke":"fill";for(var v=!1,y=0;y<i.length;y++)if(i[y].arc)for(var b=i[y].abs,x=0;x<b.length;x++){var S=b[x];"arc"===S.type?N.call(this,S.x,S.y,S.radius,S.startAngle,S.endAngle,S.counterclockwise,void 0,t,!v):F.call(this,S.x,S.y),v=!0}else if(!0===i[y].close)this.pdf.internal.out("h"),v=!1;else if(!0!==i[y].begin){var j=i[y].start.x,w=i[y].start.y;A.call(this,i[y].deltas,j,w),v=!0}a&&k.call(this,a),t&&_.call(this)}},j=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},w=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(e,t,n,a,i,r,o,s,l){for(var c=M.call(this,n,a,i,r),d=0;d<c.length;d++){var u=c[d];0===d&&(l?C.call(this,u.x1+e,u.y1+t):F.call(this,u.x1+e,u.y1+t)),L.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}s?_.call(this):k.call(this,o)},k=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(e,t){this.pdf.internal.out(n(e)+" "+a(t)+" m")},P=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),a=j.call(this,e.y),i=w.call(this,a)-n.h,r=this.ctx.transform.applyToPoint(new o(e.x,a)),c=this.ctx.transform.decompose(),d=new l;d=(d=(d=d.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var u,h,p,m=this.ctx.transform.applyToRectangle(new s(e.x,a,n.w,n.h)),v=d.applyToRectangle(new s(e.x,i,n.w,n.h)),x=g.call(this,v),N=[],k=0;k<x.length;k+=1)-1===N.indexOf(x[k])&&N.push(x[k]);if(b(N),this.autoPaging)for(var _=N[0],C=N[N.length-1],P=_;P<C+1;P++){this.pdf.setPage(P);var F=1===P?this.posY+this.margin[0]:this.margin[0],A=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[2],M=L-this.margin[0],R=this.pdf.internal.pageSize.width-this.margin[1],I=R-this.margin[3],T=1===P?0:A+(P-2)*M;if(0!==this.ctx.clip_path.length){var z=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(u,this.posX+this.margin[3],-1*T+F),S.call(this,"fill",!0),this.path=z}var D=y([JSON.parse(JSON.stringify(v))],this.posX+this.margin[3],-T+F+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),p=this.lineWidth,this.lineWidth=p*e.scale);var E="text"!==this.autoPaging;if(E||D.y+D.h<=L){if(E||D.y>=F&&D.x<=R){var O=E?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||R-D.x)[0],B=y([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-T+F+this.ctx.prevPageLastElemOffset)[0],q=E&&(P>_||P<C)&&f.call(this);q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,M,null).clip().discardPath()),this.pdf.text(O,B.x,B.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),q&&this.pdf.restoreGraphicsState()}}else D.y<L&&(this.ctx.prevPageLastElemOffset+=L-D.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=p)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),p=this.lineWidth,this.lineWidth=p*e.scale),this.pdf.text(e.text,r.x+this.posX,r.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=p)},F=function(e,t,i,r){i=i||0,r=r||0,this.pdf.internal.out(n(e+i)+" "+a(t+r)+" l")},A=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},L=function(e,n,a,o,s,l,c,d){this.pdf.internal.out([t(i(a+e)),t(r(o+n)),t(i(s+e)),t(r(l+n)),t(i(c+e)),t(r(d+n)),"c"].join(" "))},M=function(e,t,n,a){for(var i=2*Math.PI,r=Math.PI/2;t>n;)t-=i;var o=Math.abs(n-t);o<i&&a&&(o=i-o);for(var s=[],l=a?-1:1,c=t;o>1e-5;){var d=c+l*Math.min(o,r);s.push(R.call(this,e,c,d)),o-=Math.abs(d-c),c=d}return s},R=function(e,t,n){var a=(n-t)/2,i=e*Math.cos(a),r=e*Math.sin(a),o=i,s=-r,l=o*o+s*s,c=l+o*i+s*r,d=4/3*(Math.sqrt(2*l*c)-c)/(o*r-s*i),u=o-d*s,h=s+d*o,p=u,m=-h,f=a+t,g=Math.cos(f),v=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*v,y2:u*v+h*g,x3:p*g-m*v,y3:p*v+m*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},I=function(e){return 180*e/Math.PI},T=function(e,t,n,a,i,r){var o=e+.5*(n-e),l=t+.5*(a-t),c=i+.5*(n-i),d=r+.5*(a-r),u=Math.min(e,i,o,c),h=Math.max(e,i,o,c),p=Math.min(t,r,l,d),m=Math.max(t,r,l,d);return new s(u,p,h-u,m-p)},z=function(e,t,n,a,i,r,o,l){var c,d,u,h,p,m,f,g,v,y,b,x,S,j,w=n-e,N=a-t,k=i-n,_=r-a,C=o-i,P=l-r;for(d=0;d<41;d++)v=(f=(u=e+(c=d/40)*w)+c*((p=n+c*k)-u))+c*(p+c*(i+c*C-p)-f),y=(g=(h=t+c*N)+c*((m=a+c*_)-h))+c*(m+c*(r+c*P-m)-g),0==d?(b=v,x=y,S=v,j=y):(b=Math.min(b,v),x=Math.min(x,y),S=Math.max(S,v),j=Math.max(j,y));return new s(Math.round(b),Math.round(x),Math.round(S-b),Math.round(j-x))},D=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Rn.API),function(e){var t=function(e){var t,n,a,i,r,o,s,l,c,d;for(/[^\x00-\xFF]/.test(e),n=[],a=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>a;a+=4)0!==(r=(e.charCodeAt(a)<<24)+(e.charCodeAt(a+1)<<16)+(e.charCodeAt(a+2)<<8)+e.charCodeAt(a+3))?(o=(r=((r=((r=((r=(r-(d=r%85))/85)-(c=r%85))/85)-(l=r%85))/85)-(s=r%85))/85)%85,n.push(o+33,s+33,l+33,c+33,d+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,a,i,r,o=String,s="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),a=[],i=0,r=(e+=t="uuuuu"[d](e[s]%5||5))[s];r>i;i+=5)n=52200625*(e[c](i)-33)+614125*(e[c](i+1)-33)+7225*(e[c](i+2)-33)+85*(e[c](i+3)-33)+(e[c](i+4)-33),a.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(a,t[s]),o.fromCharCode.apply(o,a)},a=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",a=0;a<e.length;a+=2)n+=String.fromCharCode("0x"+(e[a]+e[a+1]));return n},i=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=$t(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,r){var o=0,s=e||"",l=[];for("string"==typeof(r=r||[])&&(r=[r]),o=0;o<r.length;o+=1)switch(r[o]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=t(s),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=a(s),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+r[o]+'" is not implemented')}return{data:s,reverseChain:l.reverse().join(" ")}}}(Rn.API),(Ea=Rn.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var a=void 0;try{a=function(e,t,n){var a=new XMLHttpRequest,i=0,r=function(e){var t=e.length,n=[],a=String.fromCharCode;for(i=0;i<t;i+=1)n.push(a(255&e.charCodeAt(i)));return n.join("")};if(a.open("GET",e,!t),a.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(a.onload=function(){200===a.status?n(r(this.responseText)):n(void 0)}),a.send(null),t&&200===a.status)return r(a.responseText)}(e,t,n)}catch(e){}return a}(e,t,n)},Ea.loadImageFile=Ea.loadFile,function(e){function t(){return(Xt.html2canvas?Promise.resolve(Xt.html2canvas):n.e(239).then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function a(){return(Xt.DOMPurify?Promise.resolve(Xt.DOMPurify):n.e(213).then(n.t.bind(n,6213,23))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var i=function(e){var t=(0,nt.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},r=function(e,t){var n=document.createElement(e);for(var a in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[a]=t.style[a];return n},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),a=e.convert(Promise.resolve(),n);return(a=a.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(i(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(a).then(function(t){return this.set({src:r("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var a=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||a.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(a.value=t.value),a.addEventListener("load",function(){a.scrollTop=t.scrollTop,a.scrollLeft=t.scrollLeft},!0)),a}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,a="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:a,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var r=0;r<n.length;++r){var o=n[r],s=o.src.find(function(e){return"truetype"===e.format});s&&t.addFont(s.url,o.ref.name,o.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==i(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},o.prototype.setMargin=function(e){return this.then(function(){switch(i(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||Rn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,n,a){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=a&&(this.progress.stack=a),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,a){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,a?this.progress.stack.concat(a):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var a=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),i=n.call(a,e,t);return o.convert(i,this.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Rn.getPageSize=function(e,t,n){if("object"===(0,nt.A)(e)){var a=e;e=a.orientation,t=a.unit||t,n=a.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i,r=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+t}var s,l=0,c=0;if(o.hasOwnProperty(r))l=o[r][1]/i,c=o[r][0]/i;else try{l=n[1],c=n[0]}catch(Ea){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",c>l&&(s=c,c=l,l=s);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(s=c,c=l,l=s)}return{width:c,height:l,unit:t,k:i,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Ca):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(Rn.API),Rn.API.addJS=function(e){return Da=e,this.internal.events.subscribe("postPutResources",function(){Ta=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ta+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),za=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Da+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Ta&&void 0!==za&&this.internal.out("/Names <</JavaScript "+Ta+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=e.outline.render().split(/\r\n/),i=0;i<a.length;i++){var r=a[i],o=n.exec(r);if(null!=o){var s=o[1];e.internal.newObjectDeferredBegin(s,!1)}e.internal.write(r)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(i=0;i<l;i++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<c.length;i++)e.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var a={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<t.children.length;a++){var i=t.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),a>0&&this.line("/Prev "+this.makeRef(t.children[a-1])),a<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var r=this.count=this.count_r({count:0},i);if(r>0&&this.line("/Count "+r),i.options&&i.options.pageNumber){var o=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<t.children.length;s++)this.renderItems(t.children[s])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Rn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,a,i,r,o){var s,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=r||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(s=function(e){for(var n,a=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,r={width:0,height:0,numcomponents:1},o=4;o<i;o+=2){if(o+=a,-1!==t.indexOf(e.charCodeAt(o+1))){n=256*e.charCodeAt(o+5)+e.charCodeAt(o+6),r={width:256*e.charCodeAt(o+7)+e.charCodeAt(o+8),height:n,numcomponents:e.charCodeAt(o+9)};break}a=256*e.charCodeAt(o+2)+e.charCodeAt(o+3)}return r}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}c={data:e,width:s.width,height:s.height,colorSpace:o,bitsPerComponent:8,filter:l,index:n,alias:a}}return c}}(Rn.API);var Ba,qa,Ha,Ga,Wa,Ua=function(){var e,t,n;function a(e){var t,n,a,i,r,o,s,l,c,d,u,h,p,m;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},r=this.readUInt16(),i=this.readUInt16()||100,o.delay=1e3*r/i,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=o?o.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(a=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>a)throw new Error("More transparent colors than palette size");if((d=a-this.transparency.indexed.length)>0)for(p=0;0<=d?p<d:p>d;0<=d?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(u=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,u.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,u.slice(s+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(m=this.colorType)||6===m,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),a=0,i=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function r(r,o,s,l){var c,d,u,h,p,m,f,g,v,y,b,x,S,j,w,N,k,_,C,P,F,A=Math.ceil((i.width-r)/s),L=Math.ceil((i.height-o)/l),M=i.width==A&&i.height==L;for(j=t*A,x=M?n:new Uint8Array(j*L),m=e.length,S=0,d=0;S<L&&a<m;){switch(e[a++]){case 0:for(h=k=0;k<j;h=k+=1)x[d++]=e[a++];break;case 1:for(h=_=0;_<j;h=_+=1)c=e[a++],p=h<t?0:x[d-t],x[d++]=(c+p)%256;break;case 2:for(h=C=0;C<j;h=C+=1)c=e[a++],u=(h-h%t)/t,w=S&&x[(S-1)*j+u*t+h%t],x[d++]=(w+c)%256;break;case 3:for(h=P=0;P<j;h=P+=1)c=e[a++],u=(h-h%t)/t,p=h<t?0:x[d-t],w=S&&x[(S-1)*j+u*t+h%t],x[d++]=(c+Math.floor((p+w)/2))%256;break;case 4:for(h=F=0;F<j;h=F+=1)c=e[a++],u=(h-h%t)/t,p=h<t?0:x[d-t],0===S?w=N=0:(w=x[(S-1)*j+u*t+h%t],N=u&&x[(S-1)*j+(u-1)*t+h%t]),f=p+w-N,g=Math.abs(f-p),y=Math.abs(f-w),b=Math.abs(f-N),v=g<=y&&g<=b?p:y<=b?w:N,x[d++]=(c+v)%256;break;default:throw new Error("Invalid filter algorithm: "+e[a-1])}if(!M){var R=((o+S*l)*i.width+r)*t,I=S*j;for(h=0;h<A;h+=1){for(var T=0;T<t;T+=1)n[R++]=x[I++];R+=(s-1)*t}}S++}}return e=Qt(e),1==i.interlaceMethod?(r(0,0,8,8),r(4,0,8,8),r(0,4,4,8),r(2,0,4,4),r(0,2,2,4),r(1,0,2,2),r(0,1,1,2)):r(0,0,1,1),n},a.prototype.decodePalette=function(){var e,t,n,a,i,r,o,s,l;for(n=this.palette,r=this.transparency.indexed||[],i=new Uint8Array((r.length||0)+n.length),a=0,e=0,t=o=0,s=n.length;o<s;t=o+=3)i[a++]=n[t],i[a++]=n[t+1],i[a++]=n[t+2],i[a++]=null!=(l=r[e++])?l:255;return i},a.prototype.copyToImageData=function(e,t){var n,a,i,r,o,s,l,c,d,u,h;if(a=this.colors,d=null,n=this.hasAlphaChannel,this.palette.length&&(d=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),a=4,n=!0),c=(i=e.data||e).length,o=d||t,r=s=0,1===a)for(;r<c;)l=d?4*t[r/4]:s,u=o[l++],i[r++]=u,i[r++]=u,i[r++]=u,i[r++]=n?o[l++]:255,s=l;else for(;r<c;)l=d?4*t[r/4]:s,i[r++]=o[l++],i[r++]=o[l++],i[r++]=o[l++],i[r++]=n?o[l++]:255,s=l},a.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var i=function(){if("[object Window]"===Object.prototype.toString.call(Xt)){try{t=Xt.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return i(),e=function(e){var a;if(!0===i())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(t){var n,a,i,r,o,s,l,c;if(this.animation){for(c=[],a=o=0,s=(l=this.animation.frames).length;o<s;a=++o)n=l[a],i=t.createImageData(n.width,n.height),r=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,r),n.imageData=i,c.push(n.image=e(i));return c}},a.prototype.renderFrame=function(e,t){var n,a,i;return n=(a=this.animation.frames)[t],i=a[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},a.prototype.animate=function(e){var t,n,a,i,r,o,s=this;return n=0,o=this.animation,i=o.numFrames,a=o.frames,r=o.numPlays,(t=function(){var o,l;if(o=n++%i,l=a[o],s.renderFrame(e,o),i>1&&n/i<r)return s.animation._timeout=setTimeout(t,l.delay)})()},a.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},a.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},a}();function Ka(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,i=e[t++],r=i>>7,o=1<<1+(7&i);e[t++],e[t++];var s=null,l=null;r&&(s=t,l=o,t+=3*o);var c=!0,d=[],u=0,h=null,p=0,m=null;for(this.width=n,this.height=a;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],0==(1&f)&&(h=null),p=f>>2&7,t++;break;case 254:for(;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++],S=x>>6&1,j=1<<1+(7&x),w=s,N=l,k=!1;x>>7&&(k=!0,w=t,N=j,t+=3*j);var _=t;for(t++;;){var C;if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}d.push({x:g,y:v,width:y,height:b,has_local_palette:k,palette_offset:w,palette_size:N,data_offset:_,data_length:t-_,transparent_index:h,interlaced:!!S,delay:u,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,a){var i=this.frameInfo(t),r=i.width*i.height,o=new Uint8Array(r);Va(e,i.data_offset,o,r);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,d=n-c,u=c,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),m=h,f=4*d;!0===i.interlaced&&(f+=4*n*7);for(var g=8,v=0,y=o.length;v<y;++v){var b=o[v];if(0===u&&(u=c,(m+=f)>=p&&(f=4*d+4*n*(g-1),m=h+(c+d)*(g<<1),g>>=1)),b===l)m+=4;else{var x=e[s+3*b],S=e[s+3*b+1],j=e[s+3*b+2];a[m++]=j,a[m++]=S,a[m++]=x,a[m++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,a){var i=this.frameInfo(t),r=i.width*i.height,o=new Uint8Array(r);Va(e,i.data_offset,o,r);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,d=n-c,u=c,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),m=h,f=4*d;!0===i.interlaced&&(f+=4*n*7);for(var g=8,v=0,y=o.length;v<y;++v){var b=o[v];if(0===u&&(u=c,(m+=f)>=p&&(f=4*d+4*n*(g-1),m=h+(c+d)*(g<<1),g>>=1)),b===l)m+=4;else{var x=e[s+3*b],S=e[s+3*b+1],j=e[s+3*b+2];a[m++]=x,a[m++]=S,a[m++]=j,a[m++]=255}--u}}}function Va(e,t,n,a){for(var i=e[t++],r=1<<i,o=r+1,s=o+1,l=i+1,c=(1<<l)-1,d=0,u=0,h=0,p=e[t++],m=new Int32Array(4096),f=null;;){for(;d<16&&0!==p;)u|=e[t++]<<d,d+=8,1===p?p=e[t++]:--p;if(d<l)break;var g=u&c;if(u>>=l,d-=l,g!==r){if(g===o)break;for(var v=g<s?g:f,y=0,b=v;b>r;)b=m[b]>>8,++y;var x=b;if(h+y+(v!==g?1:0)>a)return void tn.log("Warning, gif stream longer than expected.");n[h++]=x;var S=h+=y;for(v!==g&&(n[h++]=x),b=v;y--;)b=m[b],n[--S]=255&b,b>>=8;null!==f&&s<4096&&(m[s++]=f<<8|x,s>=c+1&&l<12&&(++l,c=c<<1|1)),f=g}else s=o+1,c=(1<<(l=i+1))-1,f=null}return h!==a&&tn.log("Warning, gif stream shorter than expected."),n}function Ya(e){var t,n,a,i,r,o=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),p=new Array(64),m=new Array(64),f=[],g=0,v=7,y=new Array(64),b=new Array(64),x=new Array(64),S=new Array(256),j=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(e,t){for(var n=0,a=0,i=new Array,r=1;r<=16;r++){for(var o=1;o<=e[r];o++)i[t[a]]=[],i[t[a]][0]=n,i[t[a]][1]=r,a++,n++;n*=2}return i}function R(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(I(255),I(0)):I(g),v=7,g=0)}function I(e){f.push(e)}function T(e){I(e>>8&255),I(255&e)}function z(e,t,n,a,i){for(var r,o=i[0],s=i[240],l=function(e,t){var n,a,i,r,o,s,l,c,d,u,h=0;for(d=0;d<8;++d){n=e[h],a=e[h+1],i=e[h+2],r=e[h+3],o=e[h+4],s=e[h+5],l=e[h+6];var m=n+(c=e[h+7]),f=n-c,g=a+l,v=a-l,y=i+s,b=i-s,x=r+o,S=r-o,j=m+x,w=m-x,N=g+y,k=g-y;e[h]=j+N,e[h+4]=j-N;var _=.707106781*(k+w);e[h+2]=w+_,e[h+6]=w-_;var C=.382683433*((j=S+b)-(k=v+f)),P=.5411961*j+C,F=1.306562965*k+C,A=.707106781*(N=b+v),L=f+A,M=f-A;e[h+5]=M+P,e[h+3]=M-P,e[h+1]=L+F,e[h+7]=L-F,h+=8}for(h=0,d=0;d<8;++d){n=e[h],a=e[h+8],i=e[h+16],r=e[h+24],o=e[h+32],s=e[h+40],l=e[h+48];var R=n+(c=e[h+56]),I=n-c,T=a+l,z=a-l,D=i+s,E=i-s,O=r+o,B=r-o,q=R+O,H=R-O,G=T+D,W=T-D;e[h]=q+G,e[h+32]=q-G;var U=.707106781*(W+H);e[h+16]=H+U,e[h+48]=H-U;var K=.382683433*((q=B+E)-(W=z+I)),V=.5411961*q+K,Y=1.306562965*W+K,Z=.707106781*(G=E+z),$=I+Z,Q=I-Z;e[h+40]=Q+V,e[h+24]=Q-V,e[h+8]=$+Y,e[h+56]=$-Y,h++}for(d=0;d<64;++d)u=e[d]*t[d],p[d]=u>0?u+.5|0:u-.5|0;return p}(e,t),c=0;c<64;++c)m[w[c]]=l[c];var d=m[0]-n;n=m[0],0==d?R(a[0]):(R(a[h[r=32767+d]]),R(u[r]));for(var f=63;f>0&&0==m[f];)f--;if(0==f)return R(o),n;for(var g,v=1;v<=f;){for(var y=v;0==m[v]&&v<=f;)++v;var b=v-y;if(b>=16){g=b>>4;for(var x=1;x<=g;++x)R(s);b&=15}r=32767+m[v],R(i[(b<<4)+h[r]]),R(u[r]),v++}return 63!=f&&R(o),n}function D(e){e=Math.min(Math.max(e,1),100),r!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var a=o((t[n]*e+50)/100);a=Math.min(Math.max(a,1),255),s[w[n]]=a}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],r=0;r<64;r++){var u=o((i[r]*e+50)/100);u=Math.min(Math.max(u,1),255),l[w[r]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,m=0;m<8;m++)for(var f=0;f<8;f++)c[p]=1/(s[w[p]]*h[m]*h[f]*8),d[p]=1/(l[w[p]]*h[m]*h[f]*8),p++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),r=e)}this.encode=function(e,r){r&&D(r),f=new Array,g=0,v=7,T(65496),T(65504),T(16),I(74),I(70),I(73),I(70),I(0),I(1),I(1),I(0),T(1),T(1),I(0),I(0),function(){T(65499),T(132),I(0);for(var e=0;e<64;e++)I(s[e]);I(1);for(var t=0;t<64;t++)I(l[t])}(),function(e,t){T(65472),T(17),I(8),T(t),T(e),I(3),I(1),I(17),I(0),I(2),I(17),I(1),I(3),I(17),I(1)}(e.width,e.height),function(){T(65476),T(418),I(0);for(var e=0;e<16;e++)I(N[e+1]);for(var t=0;t<=11;t++)I(k[t]);I(16);for(var n=0;n<16;n++)I(_[n+1]);for(var a=0;a<=161;a++)I(C[a]);I(1);for(var i=0;i<16;i++)I(P[i+1]);for(var r=0;r<=11;r++)I(F[r]);I(17);for(var o=0;o<16;o++)I(A[o+1]);for(var s=0;s<=161;s++)I(L[s])}(),T(65498),T(12),I(3),I(1),I(0),I(2),I(17),I(3),I(17),I(0),I(63),I(0);var o=0,u=0,h=0;g=0,v=7,this.encode.displayName="_encode_";for(var p,m,S,w,M,E,O,B,q,H=e.data,G=e.width,W=e.height,U=4*G,K=0;K<W;){for(p=0;p<U;){for(M=U*K+p,O=-1,B=0,q=0;q<64;q++)E=M+(B=q>>3)*U+(O=4*(7&q)),K+B>=W&&(E-=U*(K+1+B-W)),p+O>=U&&(E-=p+O-U+4),m=H[E++],S=H[E++],w=H[E++],y[q]=(j[m]+j[S+256|0]+j[w+512|0]>>16)-128,b[q]=(j[m+768|0]+j[S+1024|0]+j[w+1280|0]>>16)-128,x[q]=(j[m+1280|0]+j[S+1536|0]+j[w+1792|0]>>16)-128;o=z(y,c,o,t,a),u=z(b,d,u,n,i),h=z(x,d,h,n,i),p+=32}K+=8}if(v>=0){var V=[];V[1]=v+1,V[0]=(1<<v+1)-1,R(V)}return T(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)S[t]=e(t)}(),t=M(N,k),n=M(P,F),a=M(_,C),i=M(A,L),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var a=e;a<t;a++)h[32767+a]=n,u[32767+a]=[],u[32767+a][1]=n,u[32767+a][0]=a;for(var i=-(t-1);i<=-e;i++)h[32767+i]=n,u[32767+i]=[],u[32767+i][1]=n,u[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)j[e]=19595*e,j[e+256|0]=38470*e,j[e+512|0]=7471*e+32768,j[e+768|0]=-11059*e,j[e+1024|0]=-21709*e,j[e+1280|0]=32768*e+8421375,j[e+1536|0]=-27439*e,j[e+1792|0]=-5329*e}(),D(e)}function Za(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function $a(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var a=0;4>a;a++)if(e[t+a]!=n.charCodeAt(a))return!0;return!1}function a(e,t,n,a,i){for(var r=0;r<i;r++)e[t+r]=n[a+r]}function i(e,t,n,a){for(var i=0;i<a;i++)e[t+i]=n}function r(e){return new Int32Array(e)}function o(e,t){for(var n=[],a=0;a<e;a++)n.push(new t);return n}function s(e,t){var n=[];return function e(n,a,i){for(var r=i[a],o=0;o<r&&(n.push(i.length>a+1?[]:new t),!(i.length<a+1));o++)e(n[o],a+1,i)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,a,i,r){t(!(i%a));do{e[n+(i-=a)]=r}while(0<i)}function d(e,n,a,i,o){if(t(2328>=o),512>=o)var s=r(512);else if(null==(s=r(o)))return 0;return function(e,n,a,i,o,s){var d,h,p=n,m=1<<a,f=r(16),g=r(16);for(t(0!=o),t(null!=i),t(null!=e),t(0<a),h=0;h<o;++h){if(15<i[h])return 0;++f[i[h]]}if(f[0]==o)return 0;for(g[1]=0,d=1;15>d;++d){if(f[d]>1<<d)return 0;g[d+1]=g[d]+f[d]}for(h=0;h<o;++h)d=i[h],0<i[h]&&(s[g[d]++]=h);if(1==g[15])return(i=new u).g=0,i.value=s[0],c(e,p,1,m,i),m;var v,y=-1,b=m-1,x=0,S=1,j=1,w=1<<a;for(h=0,d=1,o=2;d<=a;++d,o<<=1){if(S+=j<<=1,0>(j-=f[d]))return 0;for(;0<f[d];--f[d])(i=new u).g=d,i.value=s[h++],c(e,p+x,o,w,i),x=l(x,d)}for(d=a+1,o=2;15>=d;++d,o<<=1){if(S+=j<<=1,0>(j-=f[d]))return 0;for(;0<f[d];--f[d]){if(i=new u,(x&b)!=y){for(p+=w,v=1<<(y=d)-a;15>y&&!(0>=(v-=f[y]));)++y,v<<=1;m+=w=1<<(v=y-a),e[n+(y=x&b)].g=v+a,e[n+y].value=p-n-y}i.g=d-a,i.value=s[h++],c(e,p+(x>>a),o,w,i),x=l(x,d)}}return S!=2*g[15]-1?0:m}(e,n,a,i,o,s)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function p(){this.G=o(5,u),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(On,h)}function m(e,n,a,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=a,e.Jd=n,e.Yc=a+i,e.Zc=4<=i?a+i-4+1:a,_(e)}function f(e,t){for(var n=0;0<t--;)n|=P(e,128)<<t;return n}function g(e,t){var n=f(e,t);return C(e)?-n:n}function v(e,n,a,i){var r,o=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),r=0;r<i;++r)o+=n[a+r]<<8*r;e.Ra=o,e.bb=i,e.oa=n,e.pa=a}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Hn-8>>>0,++e.bb,e.u-=8;w(e)&&(e.h=1,e.u=0)}function b(e,n){if(t(0<=n),!e.h&&n<=qn){var a=j(e)&Bn[n];return e.u+=n,y(e),a}return e.h=1,e.u=0}function x(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function S(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(e){return e.Ra>>>(e.u&Hn-1)>>>0}function w(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Hn}function N(e,t){e.u=t,e.h=w(e)}function k(e){e.u>=Gn&&(t(e.u>=Gn),y(e))}function _(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function C(e){return f(e,1)}function P(e,t){var n=e.Ca;0>e.b&&_(e);var a=e.b,i=n*t>>>8,r=(e.I>>>a>i)+0;for(r?(n-=i,e.I-=i+1<<a>>>0):n=i+1,a=n,i=0;256<=a;)i+=8,a>>=8;return a=7^i+Wn[a],e.b-=a,e.Ca=(n<<a)-1,r}function F(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function A(e,t){return e[t+0]|e[t+1]<<8}function L(e,t){return A(e,t)|e[t+2]<<16}function M(e,t){return A(e,t)|A(e,t+2)<<16}function R(e,n){var a=1<<n;return t(null!=e),t(0<n),e.X=r(a),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function I(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),a(n.X,0,e.X,0,1<<n.Xa)}function T(){this.X=[],this.Xa=this.Mb=0}function z(e,n,a,i){t(null!=a),t(null!=i);var r=a[0],o=i[0];return 0==r&&(r=(e*o+n/2)/n),0==o&&(o=(n*r+e/2)/e),0>=r||0>=o?0:(a[0]=r,i[0]=o,1)}function D(e,t){return e+(1<<t)-1>>>t}function E(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function O(t,n){e[n]=function(n,a,i,r,o,s,l){var c;for(c=0;c<o;++c){var d=e[t](s[l+c-1],i,r+c);s[l+c]=E(n[a+c],d)}}}function B(){this.ud=this.hd=this.jd=0}function q(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function H(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function G(e,t){return H(e+(e-t+.5>>1))}function W(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function U(e,t,n,a,i,r,o){for(a=r[o-1],n=0;n<i;++n)r[o+n]=a=E(e[t+n],a)}function K(e,t,n,a,i){var r;for(r=0;r<n;++r){var o=e[t+r],s=o>>8&255,l=16711935&(l=(l=16711935&o)+((s<<16)+s));a[i+r]=(4278255360&o)+l>>>0}}function V(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function Y(e,t,n,a,i,r){var o;for(o=0;o<a;++o){var s=t[n+o],l=s>>>8,c=s,d=255&(d=(d=s>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),i[r+o]=(4278255360&s)+(d<<16)+c}}function Z(t,n,a,i,r){e[n]=function(e,t,n,a,o,s,l,c,d){for(a=l;a<c;++a)for(l=0;l<d;++l)o[s++]=r(n[i(e[t++])])},e[t]=function(t,n,o,s,l,c,d){var u=8>>t.b,h=t.Ea,p=t.K[0],m=t.w;if(8>u)for(t=(1<<t.b)-1,m=(1<<u)-1;n<o;++n){var f,g=0;for(f=0;f<h;++f)f&t||(g=i(s[l++])),c[d++]=r(p[g&m]),g>>=u}else e["VP8LMapColor"+a](s,l,p,m,c,d,n,o,h)}}function $(e,t,n,a,i){for(n=t+n;t<n;){var r=e[t++];a[i++]=r>>16&255,a[i++]=r>>8&255,a[i++]=255&r}}function Q(e,t,n,a,i){for(n=t+n;t<n;){var r=e[t++];a[i++]=r>>16&255,a[i++]=r>>8&255,a[i++]=255&r,a[i++]=r>>24&255}}function J(e,t,n,a,i){for(n=t+n;t<n;){var r=(o=e[t++])>>16&240|o>>12&15,o=240&o|o>>28&15;a[i++]=r,a[i++]=o}}function X(e,t,n,a,i){for(n=t+n;t<n;){var r=(o=e[t++])>>16&248|o>>13&7,o=o>>5&224|o>>3&31;a[i++]=r,a[i++]=o}}function ee(e,t,n,a,i){for(n=t+n;t<n;){var r=e[t++];a[i++]=255&r,a[i++]=r>>8&255,a[i++]=r>>16&255}}function te(e,t,n,i,r,o){if(0==o)for(n=t+n;t<n;)F(i,((o=e[t++])[0]>>24|o[1]>>8&65280|o[2]<<8&16711680|o[3]<<24)>>>0),r+=32;else a(i,r,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function ae(e){return e==Ga||e==Wa||e==Ua||e==Ka}function ie(){this.eb=[],this.size=this.A=this.fb=0}function re(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new re,this.sd=null}function se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var n=e.T,i=t.ba.f.RGBA,r=i.eb,o=i.fb+e.ka*i.A,s=vi[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,p=e.W,m=t.cc,f=t.dc,g=t.Mc,v=t.Nc,y=e.ka,b=e.ka+e.T,x=e.U,S=x+1>>1;for(0==y?s(l,c,null,null,d,u,h,p,d,u,h,p,r,o,null,null,x):(s(t.ec,t.fc,l,c,m,f,g,v,d,u,h,p,r,o-i.A,r,o,x),++n);y+2<b;y+=2)m=d,f=u,g=h,v=p,u+=e.Rc,p+=e.Rc,o+=2*i.A,s(l,(c+=2*e.fa)-e.fa,l,c,m,f,g,v,d,u,h,p,r,o-i.A,r,o,x);return c+=e.fa,e.j+b<e.o?(a(t.ec,t.fc,l,c,x),a(t.cc,t.dc,d,u,S),a(t.Mc,t.Nc,h,p,S),n--):1&b||s(l,c,null,null,d,u,h,p,d,u,h,p,r,o+i.A,null,null,x),n}function ue(e,n,a){var i=e.F,r=[e.J];if(null!=i){var o=e.U,s=n.ba.S,l=s==Ba||s==Ua;n=n.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,r[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=n.eb;d=n.fb+d*n.A,e=ka(i,r[0],e.width,o,c,u,d+(l?0:3),n.A),t(a==c),e&&ae(s)&&wa(u,d,l,o,c,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,a=11>n,i=n==Da||n==Oa||n==Ba||n==qa||12==n||ae(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!zn(t.Oa,e,i?11:12))return 0;if(i&&ae(n)&&bn(),e.da)alert("todo:use_scaling");else{if(a){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=r(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=de,bn()}}else alert("todo:EmitYUV");i&&(t.Jb=ue,a&&vn())}if(a&&!Li){for(e=0;256>e;++e)Mi[e]=89858*(e-128)+_i>>ki,Ti[e]=-22014*(e-128)+_i,Ii[e]=-45773*(e-128),Ri[e]=113618*(e-128)+_i>>ki;for(e=Ci;e<Pi;++e)t=76283*(e-16)+_i>>ki,zi[e-Ci]=Ue(t,255),Di[e-Ci]=Ue(t+8>>4,15);Li=1}return 1}function pe(e){var n=e.ma,a=e.U,i=e.T;return t(!(1&e.ka)),0>=a||0>=i?0:(a=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,a),n.Dc+=a,1)}function me(e){e.ma.memory=null}function fe(e,t,n,a){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,n[0]=b(e,14)+1,a[0]=b(e,1),0!=b(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+b(t,n)+1}function ve(e,t){return 120<t?t-120:1<=(n=((n=Ja[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ye(e,t,n){var a=j(n),i=e[t+=255&a].g-8;return 0<i&&(N(n,n.u+8),a=j(n),t+=e[t].value,t+=a&(1<<i)-1),N(n,n.u+e[t].g),e[t].value}function be(e,n,a){return a.g+=e.g,a.value+=e.value<<n>>>0,t(8>=a.g),e.g}function xe(e,n,a){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(a>>i)+(n>>i)])<e.Wb),e.Ya[n]}function Se(e,n,i,r){var o=e.ab,s=e.c*n,l=e.C;n=l+n;var c=i,d=r;for(r=e.Ta,i=e.Ua;0<o--;){var u=e.gc[o],h=l,p=n,m=c,f=d,g=(d=r,c=i,u.Ea);switch(t(h<p),t(p<=u.nc),u.hc){case 2:Vn(m,f,(p-h)*g,d,c);break;case 0:var v=h,y=p,b=d,x=c,S=(_=u).Ea;0==v&&(Un(m,f,null,null,1,b,x),U(m,f+1,0,0,S-1,b,x+1),f+=S,x+=S,++v);for(var j=1<<_.b,w=j-1,N=D(S,_.b),k=_.K,_=_.w+(v>>_.b)*N;v<y;){var C=k,P=_,F=1;for(Kn(m,f,b,x-S,1,b,x);F<S;){var A=(F&~w)+j;A>S&&(A=S),(0,Jn[C[P++]>>8&15])(m,f+ +F,b,x+F-S,A-F,b,x+F),F=A}f+=S,x+=S,++v&w||(_+=N)}p!=u.nc&&a(d,c-g,d,c+(p-h-1)*g,g);break;case 1:for(g=m,y=f,S=(m=u.Ea)-(x=m&~(b=(f=1<<u.b)-1)),v=D(m,u.b),j=u.K,u=u.w+(h>>u.b)*v;h<p;){for(w=j,N=u,k=new B,_=y+x,C=y+m;y<_;)V(w[N++],k),Xn(k,g,y,f,d,c),y+=f,c+=f;y<C&&(V(w[N++],k),Xn(k,g,y,S,d,c),y+=S,c+=S),++h&b||(u+=v)}break;case 3:if(m==d&&f==c&&0<u.b){for(y=d,m=g=c+(p-h)*g-(x=(p-h)*D(u.Ea,u.b)),f=d,b=c,v=[],x=(S=x)-1;0<=x;--x)v[x]=f[b+x];for(x=S-1;0<=x;--x)y[m+x]=v[x];Yn(u,h,p,d,g,d,c)}else Yn(u,h,p,m,f,d,c)}c=r,d=i}d!=i&&a(r,i,c,d,s)}function je(e,n){var a=e.V,i=e.Ba+e.c*e.C,r=n-e.C;if(t(n<=e.l.o),t(16>=r),0<r){var o=e.l,s=e.Ta,l=e.Ua,c=o.width;if(Se(e,r,a,i),r=l=[l],t((a=e.C)<(i=n)),t(o.v<o.va),i>o.o&&(i=o.o),a<o.j){var d=o.j-a;a=o.j,r[0]+=d*c}if(a>=i?a=0:(r[0]+=4*o.v,o.ka=a-o.j,o.U=o.va-o.v,o.T=i-a,a=1),a){if(l=l[0],11>(a=e.ca).S){var u=a.f.RGBA,h=(i=a.S,r=o.U,o=o.T,d=u.eb,u.A),p=o;for(u=u.fb+e.Ma*u.A;0<p--;){var m=s,f=l,g=r,v=d,y=u;switch(i){case za:ea(m,f,g,v,y);break;case Da:ta(m,f,g,v,y);break;case Ga:ta(m,f,g,v,y),wa(v,y,0,g,1,0);break;case Ea:ia(m,f,g,v,y);break;case Oa:te(m,f,g,v,y,1);break;case Wa:te(m,f,g,v,y,1),wa(v,y,0,g,1,0);break;case Ba:te(m,f,g,v,y,0);break;case Ua:te(m,f,g,v,y,0),wa(v,y,1,g,1,0);break;case qa:na(m,f,g,v,y);break;case Ka:na(m,f,g,v,y),Na(v,y,g,1,0);break;case Ha:aa(m,f,g,v,y);break;default:t(0)}l+=c,u+=h}e.Ma+=o}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=a.height)}}e.C=n,t(e.C<=e.i)}function we(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,a=e.Ya[t].H;if(0<n[1][a[1]+0].g||0<n[2][a[2]+0].g||0<n[3][a[3]+0].g)return 0}return 1}function Ne(e,n,a,i,r,o){if(0!=e.Z){var s=e.qd,l=e.rd;for(t(null!=gi[e.Z]);n<a;++n)gi[e.Z](s,l,i,r,i,r,o),s=i,l=r,r+=o;e.qd=s,e.rd=l}}function ke(e,n){var a=e.l.ma,i=0==a.Z||1==a.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var r=e.l.width,o=a.ca,s=a.tb+r*i,l=e.V,c=e.Ba+e.c*i,d=e.gc;t(1==e.ab),t(3==d[0].hc),$n(d[0],i,n,l,c,o,s),Ne(a,i,n,o,s,r)}e.C=e.Ma=n}function _e(e,n,a,i,r,o,s){var l=e.$/i,c=e.$%i,d=e.m,u=e.s,h=a+e.$,p=h;r=a+i*r;var m=a+i*o,f=280+u.ua,g=e.Pb?l:16777216,v=0<u.ua?u.Wa:null,y=u.wc,b=h<m?xe(u,c,l):null;t(e.C<o),t(m<=r);var x=!1;e:for(;;){for(;x||h<m;){var S=0;if(l>=g){var _=h-a;t((g=e).Pb),g.wd=g.m,g.xd=_,0<g.s.ua&&I(g.s.Wa,g.s.vb),g=l+ei}if(c&y||(b=xe(u,c,l)),t(null!=b),b.Qb&&(n[h]=b.qb,x=!0),!x)if(k(d),b.jc){S=d,_=n;var C=h,P=b.pd[j(S)&On-1];t(b.jc),256>P.g?(N(S,S.u+P.g),_[C]=P.value,S=0):(N(S,S.u+P.g-256),t(256<=P.value),S=P.value),0==S&&(x=!0)}else S=ye(b.G[0],b.H[0],d);if(d.h)break;if(x||256>S){if(!x)if(b.nd)n[h]=(b.qb|S<<8)>>>0;else{if(k(d),x=ye(b.G[1],b.H[1],d),k(d),_=ye(b.G[2],b.H[2],d),C=ye(b.G[3],b.H[3],d),d.h)break;n[h]=(C<<24|x<<16|S<<8|_)>>>0}if(x=!1,++h,++c>=i&&(c=0,++l,null!=s&&l<=o&&!(l%16)&&s(e,l),null!=v))for(;p<h;)S=n[p++],v.X[(506832829*S&4294967295)>>>v.Mb]=S}else if(280>S){if(S=ge(S-256,d),_=ye(b.G[4],b.H[4],d),k(d),_=ve(i,_=ge(_,d)),d.h)break;if(h-a<_||r-h<S)break e;for(C=0;C<S;++C)n[h+C]=n[h+C-_];for(h+=S,c+=S;c>=i;)c-=i,++l,null!=s&&l<=o&&!(l%16)&&s(e,l);if(t(h<=r),c&y&&(b=xe(u,c,l)),null!=v)for(;p<h;)S=n[p++],v.X[(506832829*S&4294967295)>>>v.Mb]=S}else{if(!(S<f))break e;for(x=S-280,t(null!=v);p<h;)S=n[p++],v.X[(506832829*S&4294967295)>>>v.Mb]=S;S=h,t(!(x>>>(_=v).Xa)),n[S]=_.X[x],x=!0}x||t(d.h==w(d))}if(e.Pb&&d.h&&h<r)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&I(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=s&&s(e,l>o?o:l),e.a=0,e.$=h-a}return 1}return e.a=3,0}function Ce(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Pe(){var t=new sn;return null==t?null:(t.a=0,t.xb=fi,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Vn=K,Xn=Y,ea=$,ta=Q,na=J,aa=X,ia=ee,e.VP8LMapColor32b=Zn,e.VP8LMapColor8b=Qn,t)}function Fe(e,n,a,s,l){var c=1,h=[e],m=[n],f=s.m,g=s.s,v=null,y=0;e:for(;;){if(a)for(;c&&b(f,1);){var x=h,S=m,w=s,_=1,C=w.m,P=w.gc[w.ab],F=b(C,2);if(w.Oc&1<<F)c=0;else{switch(w.Oc|=1<<F,P.hc=F,P.Ea=x[0],P.nc=S[0],P.K=[null],++w.ab,t(4>=w.ab),F){case 0:case 1:P.b=b(C,3)+2,_=Fe(D(P.Ea,P.b),D(P.nc,P.b),0,w,P.K),P.K=P.K[0];break;case 3:var A,L=b(C,8)+1,M=16<L?0:4<L?1:2<L?2:3;if(x[0]=D(P.Ea,M),P.b=M,A=_=Fe(L,1,0,w,P.K)){var I,T=L,z=P,O=1<<(8>>z.b),B=r(O);if(null==B)A=0;else{var q=z.K[0],H=z.w;for(B[0]=z.K[0][0],I=1;I<1*T;++I)B[I]=E(q[H+I],B[I-1]);for(;I<4*O;++I)B[I]=0;z.K[0]=null,z.K[0]=B,A=1}}_=A;break;case 2:break;default:t(0)}c=_}}if(h=h[0],m=m[0],c&&b(f,1)&&!(c=1<=(y=b(f,4))&&11>=y)){s.a=3;break e}var G;if(G=c)t:{var W,U,K,V=s,Y=h,Z=m,$=y,Q=a,J=V.m,X=V.s,ee=[null],te=1,ne=0,ae=Xa[$];n:for(;;){if(Q&&b(J,1)){var ie=b(J,3)+2,re=D(Y,ie),oe=D(Z,ie),se=re*oe;if(!Fe(re,oe,0,V,ee))break n;for(ee=ee[0],X.xc=ie,W=0;W<se;++W){var le=ee[W]>>8&65535;ee[W]=le,le>=te&&(te=le+1)}}if(J.h)break n;for(U=0;5>U;++U){var ce=Za[U];!U&&0<$&&(ce+=1<<$),ne<ce&&(ne=ce)}var de=o(te*ae,u),ue=te,he=o(ue,p);if(null==he)var pe=null;else t(65536>=ue),pe=he;var me=r(ne);if(null==pe||null==me||null==de){V.a=1;break n}var fe=de;for(W=K=0;W<te;++W){var ge=pe[W],ve=ge.G,ye=ge.H,xe=0,Se=1,je=0;for(U=0;5>U;++U){ce=Za[U],ve[U]=fe,ye[U]=K,!U&&0<$&&(ce+=1<<$);a:{var we,Ne=ce,ke=V,Pe=me,Ae=fe,Le=K,Me=0,Re=ke.m,Ie=b(Re,1);if(i(Pe,0,0,Ne),Ie){var Te=b(Re,1)+1,ze=b(Re,1),De=b(Re,0==ze?1:8);Pe[De]=1,2==Te&&(Pe[De=b(Re,8)]=1);var Ee=1}else{var Oe=r(19),Be=b(Re,4)+4;if(19<Be){ke.a=3;var qe=0;break a}for(we=0;we<Be;++we)Oe[Qa[we]]=b(Re,3);var He=void 0,Ge=void 0,We=ke,Ue=Oe,Ke=Ne,Ve=Pe,Ye=0,Ze=We.m,$e=8,Qe=o(128,u);i:for(;d(Qe,0,7,Ue,19);){if(b(Ze,1)){var Je=2+2*b(Ze,3);if((He=2+b(Ze,Je))>Ke)break i}else He=Ke;for(Ge=0;Ge<Ke&&He--;){k(Ze);var Xe=Qe[0+(127&j(Ze))];N(Ze,Ze.u+Xe.g);var et=Xe.value;if(16>et)Ve[Ge++]=et,0!=et&&($e=et);else{var tt=16==et,nt=et-16,at=Ya[nt],it=b(Ze,Va[nt])+at;if(Ge+it>Ke)break i;for(var rt=tt?$e:0;0<it--;)Ve[Ge++]=rt}}Ye=1;break i}Ye||(We.a=3),Ee=Ye}(Ee=Ee&&!Re.h)&&(Me=d(Ae,Le,8,Pe,Ne)),Ee&&0!=Me?qe=Me:(ke.a=3,qe=0)}if(0==qe)break n;if(Se&&1==$a[U]&&(Se=0==fe[K].g),xe+=fe[K].g,K+=qe,3>=U){var ot,st=me[0];for(ot=1;ot<ce;++ot)me[ot]>st&&(st=me[ot]);je+=st}}if(ge.nd=Se,ge.Qb=0,Se&&(ge.qb=(ve[3][ye[3]+0].value<<24|ve[1][ye[1]+0].value<<16|ve[2][ye[2]+0].value)>>>0,0==xe&&256>ve[0][ye[0]+0].value&&(ge.Qb=1,ge.qb+=ve[0][ye[0]+0].value<<8)),ge.jc=!ge.Qb&&6>je,ge.jc){var lt,ct=ge;for(lt=0;lt<On;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=be(ht,8,ut),dt>>=be(ct.G[1][ct.H[1]+dt],16,ut),dt>>=be(ct.G[2][ct.H[2]+dt],0,ut),be(ct.G[3][ct.H[3]+dt],24,ut))}}}X.vc=ee,X.Wb=te,X.Ya=pe,X.yc=de,G=1;break t}G=0}if(!(c=G)){s.a=3;break e}if(0<y){if(g.ua=1<<y,!R(g.Wa,y)){s.a=1,c=0;break e}}else g.ua=0;var pt=s,mt=h,ft=m,gt=pt.s,vt=gt.xc;if(pt.c=mt,pt.i=ft,gt.md=D(mt,vt),gt.wc=0==vt?-1:(1<<vt)-1,a){s.xb=mi;break e}if(null==(v=r(h*m))){s.a=1,c=0;break e}c=(c=_e(s,v,0,h,m,m,null))&&!f.h;break e}return c?(null!=l?l[0]=v:(t(null==v),t(a)),s.$=0,a||Ce(g)):Ce(g),c}function Ae(e,n){var a=e.c*e.i,i=a+n+16*n;return t(e.c<=n),e.V=r(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+a+n,1)}function Le(e,n){var a=e.C,i=n-a,r=e.V,o=e.Ba+e.c*a;for(t(n<=e.l.o);0<i;){var s=16<i?16:i,l=e.l.ma,c=e.l.width,d=c*s,u=l.ca,h=l.tb+c*a,p=e.Ta,m=e.Ua;Se(e,s,r,o),_a(p,m,u,h,d),Ne(l,a,a+s,u,h,c),i-=s,r+=s*e.c,a+=s}t(a==n),e.C=e.Ma=n}function Me(){this.ub=this.yd=this.td=this.Rb=0}function Re(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ie(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function Te(){this.Yb=function(){var e=[];return function e(t,n,a){for(var i=a[n],r=0;r<i&&(t.push(a.length>n+1?[]:0),!(a.length<n+1));r++)e(t[r],n+1,a)}(e,0,[3,11]),e}()}function ze(){this.jb=r(3),this.Wc=s([4,8],Te),this.Xc=s([4,17],Te)}function De(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Ee(){this.ld=this.La=this.dd=this.tc=0}function Oe(){this.Na=this.la=0}function Be(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function qe(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function He(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ee),this.Y=0,this.ya=Array(new qe),this.aa=0,this.l=new Ke}function Ge(){this.y=r(16),this.f=r(8),this.ea=r(8)}function We(){this.cb=this.a=0,this.sc="",this.m=new x,this.Od=new Me,this.Kc=new Re,this.ed=new De,this.Qa=new Ie,this.Ic=this.$c=this.Aa=0,this.D=new He,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,x),this.ia=0,this.pb=o(4,Be),this.Pa=new ze,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ge),this.Hd=0,this.rb=Array(new Oe),this.sb=0,this.wa=Array(new Ee),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new qe),this.L=this.aa=0,this.gd=s([4,2],Ee),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ue(e,t){return 0>e?0:e>t?t:e}function Ke(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ve(){var e=new We;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ai||(ai=Qe)),e}function Ye(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Ze(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function $e(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Ye(e,2,"null VP8Io passed to VP8GetHeaders()");var a=n.data,r=n.w,o=n.ha;if(4>o)return Ye(e,7,"Truncated header.");var s=a[r+0]|a[r+1]<<8|a[r+2]<<16,l=e.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return Ye(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ye(e,4,"Frame not displayable.");r+=3,o-=3;var c=e.Kc;if(l.Rb){if(7>o)return Ye(e,7,"cannot parse picture header");if(!Ze(a,r,o))return Ye(e,3,"Bad code word");c.c=16383&(a[r+4]<<8|a[r+3]),c.Td=a[r+4]>>6,c.i=16383&(a[r+6]<<8|a[r+5]),c.Ud=a[r+6]>>6,r+=7,o-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((s=e.Pa).jb,0,255,s.jb.length),t(null!=(s=e.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(l.ub>o)return Ye(e,7,"bad partition length");m(s=e.m,a,r,l.ub),r+=l.ub,o-=l.ub,l.Rb&&(c.Ld=C(s),c.Kd=C(s)),c=e.Qa;var d,u=e.Pa;if(t(null!=s),t(null!=c),c.Cb=C(s),c.Cb){if(c.Bb=C(s),C(s)){for(c.Fb=C(s),d=0;4>d;++d)c.Zb[d]=C(s)?g(s,7):0;for(d=0;4>d;++d)c.Lb[d]=C(s)?g(s,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=C(s)?f(s,8):255}else c.Bb=0;if(s.Ka)return Ye(e,3,"cannot parse segment header");if((c=e.ed).zd=C(s),c.Tb=f(s,6),c.wb=f(s,3),c.Pc=C(s),c.Pc&&C(s)){for(u=0;4>u;++u)C(s)&&(c.vd[u]=g(s,6));for(u=0;4>u;++u)C(s)&&(c.od[u]=g(s,6))}if(e.L=0==c.Tb?0:c.zd?1:2,s.Ka)return Ye(e,3,"cannot parse filter header");var h=o;if(o=d=r,r=d+h,c=h,e.Xb=(1<<f(e.m,2))-1,h<3*(u=e.Xb))a=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var p=a[o+0]|a[o+1]<<8|a[o+2]<<16;p>c&&(p=c),m(e.Jc[+h],a,d,p),d+=p,c-=p,o+=3}m(e.Jc[+u],a,d,c),a=d<r?0:5}if(0!=a)return Ye(e,a,"cannot parse partitions");for(a=f(d=e.m,7),o=C(d)?g(d,4):0,r=C(d)?g(d,4):0,c=C(d)?g(d,4):0,u=C(d)?g(d,4):0,d=C(d)?g(d,4):0,h=e.Qa,p=0;4>p;++p){if(h.Cb){var v=h.Zb[p];h.Fb||(v+=a)}else{if(0<p){e.pb[p]=e.pb[0];continue}v=a}var y=e.pb[p];y.Sc[0]=ti[Ue(v+o,127)],y.Sc[1]=ni[Ue(v+0,127)],y.Eb[0]=2*ti[Ue(v+r,127)],y.Eb[1]=101581*ni[Ue(v+c,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=ti[Ue(v+u,117)],y.Qc[1]=ni[Ue(v+d,127)],y.lc=v+d}if(!l.Rb)return Ye(e,4,"Not a key frame.");for(C(s),l=e.Pa,a=0;4>a;++a){for(o=0;8>o;++o)for(r=0;3>r;++r)for(c=0;11>c;++c)u=P(s,ci[a][o][r][c])?f(s,8):si[a][o][r][c],l.Wc[a][o].Yb[r][c]=u;for(o=0;17>o;++o)l.Xc[a][o]=l.Wc[a][di[o]]}return e.kc=C(s),e.kc&&(e.Bd=f(s,8)),e.cb=1}function Qe(e,t,n,a,i,r,o){var s=t[i].Yb[n];for(n=0;16>i;++i){if(!P(e,s[n+0]))return i;for(;!P(e,s[n+1]);)if(s=t[++i].Yb[0],n=0,16==i)return 16;var l=t[i+1].Yb;if(P(e,s[n+2])){var c=e,d=0;if(P(c,(h=s)[(u=n)+3]))if(P(c,h[u+6])){for(s=0,u=2*(d=P(c,h[u+8]))+(h=P(c,h[u+9+d])),d=0,h=ii[u];h[s];++s)d+=d+P(c,h[s]);d+=3+(8<<u)}else P(c,h[u+7])?(d=7+2*P(c,165),d+=P(c,145)):d=5+P(c,159);else d=P(c,h[u+4])?3+P(c,h[u+5]):2;s=l[2]}else d=1,s=l[1];l=o+ri[i],0>(c=e).b&&_(c);var u,h=c.b,p=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=p,c.Ca|=1,c.I-=(u+1&p)<<h,r[l]=((d^p)-p)*a[(0<i)+0]}return 16}function Je(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function Xe(e,n){if(null==e)return 0;if(null==n)return Ye(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!$e(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var s=Oi[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-s>>4,e.zb=n.j-s>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+s>>4,e.Hb=n.va+15+s>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(s=0;4>s;++s){var c;if(e.Qa.Cb){var d=e.Qa.Lb[s];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[s][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var p=h;0<l.wb&&(p=4<l.wb?p>>2:p>>1)>9-l.wb&&(p=9-l.wb),1>p&&(p=1),u.dd=p,u.tc=2*h+p,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}s=0}else Ye(e,6,"Frame setup failed"),s=e.a;if(s=0==s){if(s){e.$c=0,0<e.Aa||(e.Ic=qi);e:{s=e.Ic,l=4*(p=e.za);var m=32*p,f=p+1,g=0<e.L?p*(0<e.Aa?2:1):0,v=(2==e.Aa?2:1)*p;if((u=l+832+(c=3*(16*s+Oi[e.L])/2*m)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)s=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=r(u),e.Fc=0,null==e.Ec){s=Ye(e,1,"no memory during frame initialization.");break e}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=o(m,Ge),e.Hd=0,e.rb=o(f+1,Oe),e.sb=1,e.wa=g?o(g,Ee):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=p),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=o(v,qe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=p),e.R=16*p,e.B=8*p,p=(m=Oi[e.L])*e.R,m=m/2*e.B,e.sa=u,e.ta=h+p,e.qa=e.sa,e.ra=e.ta+16*s*e.R+m,e.Ha=e.qa,e.Ia=e.ra+8*s*e.B+m,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Je(e),i(e.Ac,e.Bc,0,l),s=1}}if(s){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!La){for(s=-255;255>=s;++s)Ca[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Pa[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Fa[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Aa[255+s]=0>s?0:255<s?255:s;La=1}ra=ct,oa=rt,la=ot,ca=st,da=lt,sa=it,ua=Yt,ha=Zt,pa=Jt,ma=Xt,fa=$t,ga=Qt,va=en,ya=tn,ba=Ht,xa=Gt,Sa=Wt,ja=Ut,hi[0]=Nt,hi[1]=ut,hi[2]=jt,hi[3]=wt,hi[4]=kt,hi[5]=Ct,hi[6]=_t,hi[7]=Pt,hi[8]=At,hi[9]=Ft,ui[0]=vt,ui[1]=pt,ui[2]=mt,ui[3]=ft,ui[4]=yt,ui[5]=bt,ui[6]=xt,pi[0]=It,pi[1]=ht,pi[2]=Lt,pi[3]=Mt,pi[4]=zt,pi[5]=Tt,pi[6]=Dt,s=1}else s=0}s&&(s=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var o,s=e.Jc[e.M&e.Xb],l=e.m,c=e;for(o=0;o<c.za;++o){var d=l,u=c,h=u.Ac,p=u.Bc+4*o,m=u.zc,f=u.ya[u.aa+o];if(u.Qa.Bb?f.$b=P(d,u.Pa.jb[0])?2+P(d,u.Pa.jb[2]):P(d,u.Pa.jb[1]):f.$b=0,u.kc&&(f.Ad=P(d,u.Bd)),f.Za=!P(d,145)+0,f.Za){var g=f.Ob,v=0;for(u=0;4>u;++u){var y,b=m[0+u];for(y=0;4>y;++y){b=li[h[p+y]][b];for(var x=oi[P(d,b[0])];0<x;)x=oi[2*x+P(d,b[x])];b=-x,h[p+y]=b}a(g,v,h,p,4),v+=4,m[0+u]=b}}else b=P(d,156)?P(d,128)?1:3:P(d,163)?2:0,f.Ob[0]=b,i(h,p,b,4),i(m,0,b,4);f.Dd=P(d,142)?P(d,114)?P(d,183)?1:3:2:0}if(c.m.Ka)return Ye(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=s,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],o=l.ya[l.aa+l.ja],p=l.kc?o.Ad:0)d.la=h.la=0,o.Za||(d.Na=h.Na=0),o.Hc=0,o.Gc=0,o.ia=0;else{var S,j;if(d=h,h=c,p=l.Pa.Xc,m=l.ya[l.aa+l.ja],f=l.pb[m.$b],u=m.ad,g=0,v=l.rb[l.sb-1],b=y=0,i(u,g,0,384),m.Za)var w=0,N=p[3];else{x=r(16);var k=d.Na+v.Na;if(k=ai(h,p[1],k,f.Eb,0,x,0),d.Na=v.Na=(0<k)+0,1<k)ra(x,0,u,g);else{var _=x[0]+3>>3;for(x=0;256>x;x+=16)u[g+x]=_}w=1,N=p[0]}var C=15&d.la,F=15&v.la;for(x=0;4>x;++x){var A=1&F;for(_=j=0;4>_;++_)C=C>>1|(A=(k=ai(h,N,k=A+(1&C),f.Sc,w,u,g))>w)<<7,j=j<<2|(3<k?3:1<k?2:0!=u[g+0]),g+=16;C>>=4,F=F>>1|A<<7,y=(y<<8|j)>>>0}for(N=C,w=F>>4,S=0;4>S;S+=2){for(j=0,C=d.la>>4+S,F=v.la>>4+S,x=0;2>x;++x){for(A=1&F,_=0;2>_;++_)k=A+(1&C),C=C>>1|(A=0<(k=ai(h,p[2],k,f.Qc,0,u,g)))<<3,j=j<<2|(3<k?3:1<k?2:0!=u[g+0]),g+=16;C>>=2,F=F>>1|A<<5}b|=j<<4*S,N|=C<<4<<S,w|=(240&F)<<S}d.la=N,v.la=w,m.Hc=y,m.Gc=b,m.ia=43690&b?0:f.ia,p=!(y|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[o.$b][o.Za],l.wa[l.Y+l.ja].La|=!p),c.Ka)return Ye(e,7,"Premature end-of-file encountered.")}if(Je(e),l=n,c=1,o=(s=e).D,d=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(o.M=s.M,o.uc=d,In(s,o),c=1,o=(j=s.D).Nb,d=(b=Oi[s.L])*s.R,h=b/2*s.B,x=16*o*s.R,_=8*o*s.B,p=s.sa,m=s.ta-d+x,f=s.qa,u=s.ra-h+_,g=s.Ha,v=s.Ia-h+_,F=0==(C=j.M),y=C>=s.Va-1,2==s.Aa&&In(s,j),j.uc)for(A=(k=s).D.M,t(k.D.uc),j=k.yb;j<k.Hb;++j){w=j,N=A;var L=(M=(q=k).D).Nb;S=q.R;var M=M.wa[M.Y+w],R=q.sa,I=q.ta+16*L*S+16*w,T=M.dd,z=M.tc;if(0!=z)if(t(3<=z),1==q.L)0<w&&xa(R,I,S,z+4),M.La&&ja(R,I,S,z),0<N&&ba(R,I,S,z+4),M.La&&Sa(R,I,S,z);else{var D=q.B,E=q.qa,O=q.ra+8*L*D+8*w,B=q.Ha,q=q.Ia+8*L*D+8*w;L=M.ld,0<w&&(ha(R,I,S,z+4,T,L),ma(E,O,B,q,D,z+4,T,L)),M.La&&(ga(R,I,S,z,T,L),ya(E,O,B,q,D,z,T,L)),0<N&&(ua(R,I,S,z+4,T,L),pa(E,O,B,q,D,z+4,T,L)),M.La&&(fa(R,I,S,z,T,L),va(E,O,B,q,D,z,T,L))}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(j=16*C,C=16*(C+1),F?(l.y=s.sa,l.O=s.ta+x,l.f=s.qa,l.N=s.ra+_,l.ea=s.Ha,l.W=s.Ia+_):(j-=b,l.y=p,l.O=m,l.f=f,l.N=u,l.ea=g,l.W=v),y||(C-=b),C>l.o&&(C=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&j<C&&(l.J=hn(s,l,j,C-j),l.F=s.mb,null==l.F&&0==l.F.length)){c=Ye(s,3,"Could not decode alpha data.");break e}j<l.j&&(b=l.j-j,j=l.j,t(!(1&b)),l.O+=s.R*b,l.N+=s.B*(b>>1),l.W+=s.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),j<C&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=j-l.j,l.U=l.va-l.v,l.T=C-j,c=l.put(l))}o+1!=s.Ic||y||(a(s.sa,s.ta-d,p,m+16*s.R,d),a(s.qa,s.ra-h,f,u+8*s.B,h),a(s.Ha,s.Ia-h,g,v+8*s.B,h))}if(!c)return Ye(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),s&=1}return s?(e.cb=0,s):0}function et(e,t,n,a,i){i=e[t+n+32*a]+(i>>3),e[t+n+32*a]=-256&i?0>i?0:255:i}function tt(e,t,n,a,i,r){et(e,t,0,n,a+i),et(e,t,1,n,a+r),et(e,t,2,n,a-r),et(e,t,3,n,a-i)}function nt(e){return(20091*e>>16)+e}function at(e,t,n,a){var i,o=0,s=r(16);for(i=0;4>i;++i){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-nt(e[t+12]),u=nt(e[t+4])+(35468*e[t+12]>>16);s[o+0]=l+u,s[o+1]=c+d,s[o+2]=c-d,s[o+3]=l-u,o+=4,t++}for(i=o=0;4>i;++i)l=(e=s[o+0]+4)+s[o+8],c=e-s[o+8],d=(35468*s[o+4]>>16)-nt(s[o+12]),et(n,a,0,0,l+(u=nt(s[o+4])+(35468*s[o+12]>>16))),et(n,a,1,0,c+d),et(n,a,2,0,c-d),et(n,a,3,0,l-u),o++,a+=32}function it(e,t,n,a){var i=e[t+0]+4,r=35468*e[t+4]>>16,o=nt(e[t+4]),s=35468*e[t+1]>>16;tt(n,a,0,i+o,e=nt(e[t+1]),s),tt(n,a,1,i+r,e,s),tt(n,a,2,i-r,e,s),tt(n,a,3,i-o,e,s)}function rt(e,t,n,a,i){at(e,t,n,a),i&&at(e,t+16,n,a+4)}function ot(e,t,n,a){oa(e,t+0,n,a,1),oa(e,t+32,n,a+128,1)}function st(e,t,n,a){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)et(n,a,t,i,e)}function lt(e,t,n,a){e[t+0]&&ca(e,t+0,n,a),e[t+16]&&ca(e,t+16,n,a+4),e[t+32]&&ca(e,t+32,n,a+128),e[t+48]&&ca(e,t+48,n,a+128+4)}function ct(e,t,n,a){var i,o=r(16);for(i=0;4>i;++i){var s=e[t+0+i]+e[t+12+i],l=e[t+4+i]+e[t+8+i],c=e[t+4+i]-e[t+8+i],d=e[t+0+i]-e[t+12+i];o[0+i]=s+l,o[8+i]=s-l,o[4+i]=d+c,o[12+i]=d-c}for(i=0;4>i;++i)s=(e=o[0+4*i]+3)+o[3+4*i],l=o[1+4*i]+o[2+4*i],c=o[1+4*i]-o[2+4*i],d=e-o[3+4*i],n[a+0]=s+l>>3,n[a+16]=d+c>>3,n[a+32]=s-l>>3,n[a+48]=d-c>>3,a+=64}function dt(e,t,n){var a,i=t-32,r=Ia,o=255-e[i-1];for(a=0;a<n;++a){var s,l=r,c=o+e[t-1];for(s=0;s<n;++s)e[t+s]=l[c+e[i+s]];t+=32}}function ut(e,t){dt(e,t,4)}function ht(e,t){dt(e,t,8)}function pt(e,t){dt(e,t,16)}function mt(e,t){var n;for(n=0;16>n;++n)a(e,t+32*n,e,t-32,16)}function ft(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function gt(e,t,n){var a;for(a=0;16>a;++a)i(t,n+32*a,e,16)}function vt(e,t){var n,a=16;for(n=0;16>n;++n)a+=e[t-1+32*n]+e[t+n-32];gt(a>>5,e,t)}function yt(e,t){var n,a=8;for(n=0;16>n;++n)a+=e[t-1+32*n];gt(a>>4,e,t)}function bt(e,t){var n,a=8;for(n=0;16>n;++n)a+=e[t+n-32];gt(a>>4,e,t)}function xt(e,t){gt(128,e,t)}function St(e,t,n){return e+2*t+n+2>>2}function jt(e,t){var n,i=t-32;for(i=new Uint8Array([St(e[i-1],e[i+0],e[i+1]),St(e[i+0],e[i+1],e[i+2]),St(e[i+1],e[i+2],e[i+3]),St(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)a(e,t+32*n,i,0,i.length)}function wt(e,t){var n=e[t-1],a=e[t-1+32],i=e[t-1+64],r=e[t-1+96];F(e,t+0,16843009*St(e[t-1-32],n,a)),F(e,t+32,16843009*St(n,a,i)),F(e,t+64,16843009*St(a,i,r)),F(e,t+96,16843009*St(i,r,r))}function Nt(e,t){var n,a=4;for(n=0;4>n;++n)a+=e[t+n-32]+e[t-1+32*n];for(a>>=3,n=0;4>n;++n)i(e,t+32*n,a,4)}function kt(e,t){var n=e[t-1+0],a=e[t-1+32],i=e[t-1+64],r=e[t-1-32],o=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=St(a,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=St(n,a,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=St(r,n,a),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=St(o,r,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=St(s,o,r),e[t+3+32]=e[t+2+0]=St(l,s,o),e[t+3+0]=St(c,l,s)}function _t(e,t){var n=e[t+1-32],a=e[t+2-32],i=e[t+3-32],r=e[t+4-32],o=e[t+5-32],s=e[t+6-32],l=e[t+7-32];e[t+0+0]=St(e[t+0-32],n,a),e[t+1+0]=e[t+0+32]=St(n,a,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=St(a,i,r),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=St(i,r,o),e[t+3+32]=e[t+2+64]=e[t+1+96]=St(r,o,s),e[t+3+64]=e[t+2+96]=St(o,s,l),e[t+3+96]=St(s,l,l)}function Ct(e,t){var n=e[t-1+0],a=e[t-1+32],i=e[t-1+64],r=e[t-1-32],o=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=r+o+1>>1,e[t+1+0]=e[t+2+64]=o+s+1>>1,e[t+2+0]=e[t+3+64]=s+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=St(i,a,n),e[t+0+64]=St(a,n,r),e[t+0+32]=e[t+1+96]=St(n,r,o),e[t+1+32]=e[t+2+96]=St(r,o,s),e[t+2+32]=e[t+3+96]=St(o,s,l),e[t+3+32]=St(s,l,c)}function Pt(e,t){var n=e[t+0-32],a=e[t+1-32],i=e[t+2-32],r=e[t+3-32],o=e[t+4-32],s=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+a+1>>1,e[t+1+0]=e[t+0+64]=a+i+1>>1,e[t+2+0]=e[t+1+64]=i+r+1>>1,e[t+3+0]=e[t+2+64]=r+o+1>>1,e[t+0+32]=St(n,a,i),e[t+1+32]=e[t+0+96]=St(a,i,r),e[t+2+32]=e[t+1+96]=St(i,r,o),e[t+3+32]=e[t+2+96]=St(r,o,s),e[t+3+64]=St(o,s,l),e[t+3+96]=St(s,l,c)}function Ft(e,t){var n=e[t-1+0],a=e[t-1+32],i=e[t-1+64],r=e[t-1+96];e[t+0+0]=n+a+1>>1,e[t+2+0]=e[t+0+32]=a+i+1>>1,e[t+2+32]=e[t+0+64]=i+r+1>>1,e[t+1+0]=St(n,a,i),e[t+3+0]=e[t+1+32]=St(a,i,r),e[t+3+32]=e[t+1+64]=St(i,r,r),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=r}function At(e,t){var n=e[t-1+0],a=e[t-1+32],i=e[t-1+64],r=e[t-1+96],o=e[t-1-32],s=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+o+1>>1,e[t+0+32]=e[t+2+64]=a+n+1>>1,e[t+0+64]=e[t+2+96]=i+a+1>>1,e[t+0+96]=r+i+1>>1,e[t+3+0]=St(s,l,c),e[t+2+0]=St(o,s,l),e[t+1+0]=e[t+3+32]=St(n,o,s),e[t+1+32]=e[t+3+64]=St(a,n,o),e[t+1+64]=e[t+3+96]=St(i,a,n),e[t+1+96]=St(r,i,a)}function Lt(e,t){var n;for(n=0;8>n;++n)a(e,t+32*n,e,t-32,8)}function Mt(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Rt(e,t,n){var a;for(a=0;8>a;++a)i(t,n+32*a,e,8)}function It(e,t){var n,a=8;for(n=0;8>n;++n)a+=e[t+n-32]+e[t-1+32*n];Rt(a>>4,e,t)}function Tt(e,t){var n,a=4;for(n=0;8>n;++n)a+=e[t+n-32];Rt(a>>3,e,t)}function zt(e,t){var n,a=4;for(n=0;8>n;++n)a+=e[t-1+32*n];Rt(a>>3,e,t)}function Dt(e,t){Rt(128,e,t)}function Et(e,t,n){var a=e[t-n],i=e[t+0],r=3*(i-a)+Ma[1020+e[t-2*n]-e[t+n]],o=Ra[112+(r+4>>3)];e[t-n]=Ia[255+a+Ra[112+(r+3>>3)]],e[t+0]=Ia[255+i-o]}function Ot(e,t,n,a){var i=e[t+0],r=e[t+n];return Ta[255+e[t-2*n]-e[t-n]]>a||Ta[255+r-i]>a}function Bt(e,t,n,a){return 4*Ta[255+e[t-n]-e[t+0]]+Ta[255+e[t-2*n]-e[t+n]]<=a}function qt(e,t,n,a,i){var r=e[t-3*n],o=e[t-2*n],s=e[t-n],l=e[t+0],c=e[t+n],d=e[t+2*n],u=e[t+3*n];return 4*Ta[255+s-l]+Ta[255+o-c]>a?0:Ta[255+e[t-4*n]-r]<=i&&Ta[255+r-o]<=i&&Ta[255+o-s]<=i&&Ta[255+u-d]<=i&&Ta[255+d-c]<=i&&Ta[255+c-l]<=i}function Ht(e,t,n,a){var i=2*a+1;for(a=0;16>a;++a)Bt(e,t+a,n,i)&&Et(e,t+a,n)}function Gt(e,t,n,a){var i=2*a+1;for(a=0;16>a;++a)Bt(e,t+a*n,1,i)&&Et(e,t+a*n,1)}function Wt(e,t,n,a){var i;for(i=3;0<i;--i)Ht(e,t+=4*n,n,a)}function Ut(e,t,n,a){var i;for(i=3;0<i;--i)Gt(e,t+=4,n,a)}function Kt(e,t,n,a,i,r,o,s){for(r=2*r+1;0<i--;){if(qt(e,t,n,r,o))if(Ot(e,t,n,s))Et(e,t,n);else{var l=e,c=t,d=n,u=l[c-2*d],h=l[c-d],p=l[c+0],m=l[c+d],f=l[c+2*d],g=27*(y=Ma[1020+3*(p-h)+Ma[1020+u-m]])+63>>7,v=18*y+63>>7,y=9*y+63>>7;l[c-3*d]=Ia[255+l[c-3*d]+y],l[c-2*d]=Ia[255+u+v],l[c-d]=Ia[255+h+g],l[c+0]=Ia[255+p-g],l[c+d]=Ia[255+m-v],l[c+2*d]=Ia[255+f-y]}t+=a}}function Vt(e,t,n,a,i,r,o,s){for(r=2*r+1;0<i--;){if(qt(e,t,n,r,o))if(Ot(e,t,n,s))Et(e,t,n);else{var l=e,c=t,d=n,u=l[c-d],h=l[c+0],p=l[c+d],m=Ra[112+(4+(f=3*(h-u))>>3)],f=Ra[112+(f+3>>3)],g=m+1>>1;l[c-2*d]=Ia[255+l[c-2*d]+g],l[c-d]=Ia[255+u+f],l[c+0]=Ia[255+h-m],l[c+d]=Ia[255+p-g]}t+=a}}function Yt(e,t,n,a,i,r){Kt(e,t,n,1,16,a,i,r)}function Zt(e,t,n,a,i,r){Kt(e,t,1,n,16,a,i,r)}function $t(e,t,n,a,i,r){var o;for(o=3;0<o;--o)Vt(e,t+=4*n,n,1,16,a,i,r)}function Qt(e,t,n,a,i,r){var o;for(o=3;0<o;--o)Vt(e,t+=4,1,n,16,a,i,r)}function Jt(e,t,n,a,i,r,o,s){Kt(e,t,i,1,8,r,o,s),Kt(n,a,i,1,8,r,o,s)}function Xt(e,t,n,a,i,r,o,s){Kt(e,t,1,i,8,r,o,s),Kt(n,a,1,i,8,r,o,s)}function en(e,t,n,a,i,r,o,s){Vt(e,t+4*i,i,1,8,r,o,s),Vt(n,a+4*i,i,1,8,r,o,s)}function tn(e,t,n,a,i,r,o,s){Vt(e,t+4,1,i,8,r,o,s),Vt(n,a+4,1,i,8,r,o,s)}function nn(){this.ba=new oe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function an(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new T,this.vb=new T,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new u}function sn(){this.xb=this.a=0,this.l=new Ke,this.ca=new oe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new S,this.Pb=0,this.wd=new S,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=o(4,rn),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ke,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(e,t,n,a,i,r,o){for(e=null==e?0:e[t+0],t=0;t<o;++t)i[r+t]=e+n[a+t]&255,e=i[r+t]}function dn(e,t,n,a,i,r,o){var s;if(null==e)cn(null,null,n,a,i,r,o);else for(s=0;s<o;++s)i[r+s]=e[t+s]+n[a+s]&255}function un(e,t,n,a,i,r,o){if(null==e)cn(null,null,n,a,i,r,o);else{var s,l=e[t+0],c=l,d=l;for(s=0;s<o;++s)c=d+(l=e[t+s])-c,d=n[a+s]+(-256&c?0>c?0:255:c)&255,c=l,i[r+s]=d}}function hn(e,n,i,o){var s=n.width,l=n.o;if(t(null!=e&&null!=n),0>i||0>=o||i+o>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ln,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=r(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,p=e.mb,m=e.nb,f=u+1,g=h-1,y=c.l;if(t(null!=d&&null!=p&&null!=n),gi[0]=null,gi[1]=cn,gi[2]=dn,gi[3]=un,c.ca=p,c.tb=m,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=h)n=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)n=0;else if(y.put=pe,y.ac=he,y.bc=me,y.ma=c,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,c.$a)e:{t(1==c.$a),n=Pe();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,v(n.m,d,f,g),!Fe(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&we(n.s)?(c.ic=1,d=n.c*n.i,n.Ta=null,n.Ua=0,n.V=r(d),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Ae(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:o=l-i}t(null!=e.ga),t(i+o<=l);e:{if(n=(d=e.ga).c,l=d.l.o,0==d.$a){if(f=e.rc,g=e.Vc,y=e.Fa,u=e.P+1+i*n,h=e.mb,p=e.nb+i*n,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=gi[d.Z]),c=0;c<o;++c)gi[d.Z](f,g,y,u,h,p,n),f=h,g=p,p+=n,u+=n;else for(c=0;c<o;++c)a(h,p,y,u,n),f=h,g=p,p+=n,u+=n;e.rc=f,e.Vc=g}else{if(t(null!=d.mc),n=i+o,t(null!=(c=d.mc)),t(n<=c.i),c.C>=n)n=1;else if(d.ic||vn(),d.ic){d=c.V,f=c.Ba,g=c.c;var b=c.i,x=(y=1,u=c.$/g,h=c.$%g,p=c.m,m=c.s,c.$),S=g*b,j=g*n,N=m.wc,_=x<j?xe(m,h,u):null;t(x<=S),t(n<=b),t(we(m));t:for(;;){for(;!p.h&&x<j;){if(h&N||(_=xe(m,h,u)),t(null!=_),k(p),256>(b=ye(_.G[0],_.H[0],p)))d[f+x]=b,++x,++h>=g&&(h=0,++u<=n&&!(u%16)&&ke(c,u));else{if(!(280>b)){y=0;break t}b=ge(b-256,p);var C,P=ye(_.G[4],_.H[4],p);if(k(p),!(x>=(P=ve(g,P=ge(P,p)))&&S-x>=b)){y=0;break t}for(C=0;C<b;++C)d[f+x+C]=d[f+x+C-P];for(x+=b,h+=b;h>=g;)h-=g,++u<=n&&!(u%16)&&ke(c,u);x<j&&h&N&&(_=xe(m,h,u))}t(p.h==w(p))}ke(c,u>n?n:u);break t}!y||p.h&&x<S?(y=0,c.a=p.h?5:3):c.$=x,n=y}else n=_e(c,c.V,c.Ba,c.c,c.i,n,Le);if(!n){o=0;break e}}i+o>=l&&(e.Cc=1),o=1}if(!o)return null;if(e.Cc&&(null!=(o=e.ga)&&(o.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*s}function pn(e,t,n,a,i,r){for(;0<i--;){var o,s=e,l=t+(n?1:0),c=e,d=t+(n?0:3);for(o=0;o<a;++o){var u=c[d+4*o];255!=u&&(u*=32897,s[l+4*o+0]=s[l+4*o+0]*u>>23,s[l+4*o+1]=s[l+4*o+1]*u>>23,s[l+4*o+2]=s[l+4*o+2]*u>>23)}t+=r}}function mn(e,t,n,a,i){for(;0<a--;){var r;for(r=0;r<n;++r){var o=e[t+2*r+0],s=15&(c=e[t+2*r+1]),l=4369*s,c=(240&c|c>>4)*l>>16;e[t+2*r+0]=(240&o|o>>4)*l>>16&240|(15&o|o<<4)*l>>16>>4&15,e[t+2*r+1]=240&c|s}t+=i}}function fn(e,t,n,a,i,r,o,s){var l,c,d=255;for(c=0;c<i;++c){for(l=0;l<a;++l){var u=e[t+l];r[o+4*l]=u,d&=u}t+=n,o+=s}return 255!=d}function gn(e,t,n,a,i){var r;for(r=0;r<i;++r)n[a+r]=e[t+r]>>8}function vn(){wa=pn,Na=mn,ka=fn,_a=gn}function yn(n,a,i){e[n]=function(e,n,r,o,s,l,c,d,u,h,p,m,f,g,v,y,b){var x,S=b-1>>1,j=s[l+0]|c[d+0]<<16,w=u[h+0]|p[m+0]<<16;t(null!=e);var N=3*j+w+131074>>2;for(a(e[n+0],255&N,N>>16,f,g),null!=r&&(N=3*w+j+131074>>2,a(r[o+0],255&N,N>>16,v,y)),x=1;x<=S;++x){var k=s[l+x]|c[d+x]<<16,_=u[h+x]|p[m+x]<<16,C=j+k+w+_+524296,P=C+2*(k+w)>>3;N=P+j>>1,j=(C=C+2*(j+_)>>3)+k>>1,a(e[n+2*x-1],255&N,N>>16,f,g+(2*x-1)*i),a(e[n+2*x-0],255&j,j>>16,f,g+(2*x-0)*i),null!=r&&(N=C+w>>1,j=P+_>>1,a(r[o+2*x-1],255&N,N>>16,v,y+(2*x-1)*i),a(r[o+2*x+0],255&j,j>>16,v,y+(2*x+0)*i)),j=k,w=_}1&b||(N=3*j+w+131074>>2,a(e[n+b-1],255&N,N>>16,f,g+(b-1)*i),null!=r&&(N=3*w+j+131074>>2,a(r[o+b-1],255&N,N>>16,v,y+(b-1)*i)))}}function bn(){vi[za]=yi,vi[Da]=xi,vi[Ea]=bi,vi[Oa]=Si,vi[Ba]=ji,vi[qa]=wi,vi[Ha]=Ni,vi[Ga]=xi,vi[Wa]=Si,vi[Ua]=ji,vi[Ka]=wi}function xn(e){return e&~Ai?0>e?0:255:e>>Fi}function Sn(e,t){return xn((19077*e>>8)+(26149*t>>8)-14234)}function jn(e,t,n){return xn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function wn(e,t){return xn((19077*e>>8)+(33050*t>>8)-17685)}function Nn(e,t,n,a,i){a[i+0]=Sn(e,n),a[i+1]=jn(e,t,n),a[i+2]=wn(e,t)}function kn(e,t,n,a,i){a[i+0]=wn(e,t),a[i+1]=jn(e,t,n),a[i+2]=Sn(e,n)}function _n(e,t,n,a,i){var r=jn(e,t,n);t=r<<3&224|wn(e,t)>>3,a[i+0]=248&Sn(e,n)|r>>5,a[i+1]=t}function Cn(e,t,n,a,i){var r=240&wn(e,t)|15;a[i+0]=240&Sn(e,n)|jn(e,t,n)>>4,a[i+1]=r}function Pn(e,t,n,a,i){a[i+0]=255,Nn(e,t,n,a,i+1)}function Fn(e,t,n,a,i){kn(e,t,n,a,i),a[i+3]=255}function An(e,t,n,a,i){Nn(e,t,n,a,i),a[i+3]=255}function Ue(e,t){return 0>e?0:e>t?t:e}function Ln(t,n,a){e[t]=function(e,t,i,r,o,s,l,c,d){for(var u=c+(-2&d)*a;c!=u;)n(e[t+0],i[r+0],o[s+0],l,c),n(e[t+1],i[r+0],o[s+0],l,c+a),t+=2,++r,++s,c+=2*a;1&d&&n(e[t+0],i[r+0],o[s+0],l,c)}}function Mn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Rn(e,t,n,a,i){switch(e>>>30){case 3:oa(t,n,a,i,0);break;case 2:sa(t,n,a,i);break;case 1:ca(t,n,a,i)}}function In(e,t){var n,r,o=t.M,s=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,p=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)d[u+32*n-1]=129,h[p+32*n-1]=129;for(0<o?l[c-1-32]=d[u-1-32]=h[p-1-32]=129:(i(l,c-32-1,127,21),i(d,u-32-1,127,9),i(h,p-32-1,127,9)),r=0;r<e.za;++r){var m=t.ya[t.aa+r];if(0<r){for(n=-1;16>n;++n)a(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)a(d,u+32*n-4,d,u+32*n+4,4),a(h,p+32*n-4,h,p+32*n+4,4)}var f=e.Gd,g=e.Hd+r,v=m.ad,y=m.Hc;if(0<o&&(a(l,c-32,f[g].y,0,16),a(d,u-32,f[g].f,0,8),a(h,p-32,f[g].ea,0,8)),m.Za){var b=l,x=c-32+16;for(0<o&&(r>=e.za-1?i(b,x,f[g].y[15],4):a(b,x,f[g+1].y,0,4)),n=0;4>n;n++)b[x+128+n]=b[x+256+n]=b[x+384+n]=b[x+0+n];for(n=0;16>n;++n,y<<=2)b=l,x=c+Ei[n],hi[m.Ob[n]](b,x),Rn(y,v,16*+n,b,x)}else if(b=Mn(r,o,m.Ob[0]),ui[b](l,c),0!=y)for(n=0;16>n;++n,y<<=2)Rn(y,v,16*+n,l,c+Ei[n]);for(n=m.Gc,b=Mn(r,o,m.Dd),pi[b](d,u),pi[b](h,p),y=v,b=d,x=u,255&(m=n|0)&&(170&m?la(y,256,b,x):da(y,256,b,x)),m=h,y=p,255&(n>>=8)&&(170&n?la(v,320,m,y):da(v,320,m,y)),o<e.Ub-1&&(a(f[g].y,0,l,c+480,16),a(f[g].f,0,d,u+224,8),a(f[g].ea,0,h,p+224,8)),n=8*s*e.B,f=e.sa,g=e.ta+16*r+16*s*e.R,v=e.qa,m=e.ra+8*r+n,y=e.Ha,b=e.Ia+8*r+n,n=0;16>n;++n)a(f,g+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)a(v,m+n*e.B,d,u+32*n,8),a(y,b+n*e.B,h,p+32*n,8)}}function Tn(e,a,i,r,o,s,l,c,d){var u=[0],h=[0],p=0,m=null!=d?d.kd:0,f=null!=d?d:new an;if(null==e||12>i)return 7;f.data=e,f.w=a,f.ha=i,a=[a],i=[i],f.gb=[f.gb];e:{var g=a,y=i,b=f.gb;if(t(null!=e),t(null!=y),t(null!=b),b[0]=0,12<=y[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){b=3;break e}var x=M(e,g[0]+4);if(12>x||4294967286<x){b=3;break e}if(m&&x>y[0]-8){b=7;break e}b[0]=x,g[0]+=12,y[0]-=12}b=0}if(0!=b)return b;for(x=0<f.gb[0],i=i[0];;){e:{var j=e;y=a,b=i;var w=u,N=h,k=g=[0];if((P=p=[p])[0]=0,8>b[0])b=7;else{if(!n(j,y[0],"VP8X")){if(10!=M(j,y[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var _=M(j,y[0]+8),C=1+L(j,y[0]+12);if(2147483648<=C*(j=1+L(j,y[0]+15))){b=3;break e}null!=k&&(k[0]=_),null!=w&&(w[0]=C),null!=N&&(N[0]=j),y[0]+=18,b[0]-=18,P[0]=1}b=0}}if(p=p[0],g=g[0],0!=b)return b;if(y=!!(2&g),!x&&p)return 3;if(null!=s&&(s[0]=!!(16&g)),null!=l&&(l[0]=y),null!=c&&(c[0]=0),l=u[0],g=h[0],p&&y&&null==d){b=0;break}if(4>i){b=7;break}if(x&&p||!x&&!p&&!n(e,a[0],"ALPH")){i=[i],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{_=e,b=a,x=i;var P=f.gb;w=f.na,N=f.P,k=f.Sa,C=22,t(null!=_),t(null!=x),j=b[0];var F=x[0];for(t(null!=w),t(null!=k),w[0]=null,N[0]=null,k[0]=0;;){if(b[0]=j,x[0]=F,8>F){b=7;break e}var A=M(_,j+4);if(4294967286<A){b=3;break e}var R=8+A+1&-2;if(C+=R,0<P&&C>P){b=3;break e}if(!n(_,j,"VP8 ")||!n(_,j,"VP8L")){b=0;break e}if(F[0]<R){b=7;break e}n(_,j,"ALPH")||(w[0]=_,N[0]=j+8,k[0]=A),j+=R,F-=R}}if(i=i[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=b)break}i=[i],f.Ja=[f.Ja],f.xa=[f.xa];e:if(P=e,b=a,x=i,w=f.gb[0],N=f.Ja,k=f.xa,_=b[0],j=!n(P,_,"VP8 "),C=!n(P,_,"VP8L"),t(null!=P),t(null!=x),t(null!=N),t(null!=k),8>x[0])b=7;else{if(j||C){if(P=M(P,_+4),12<=w&&P>w-12){b=3;break e}if(m&&P>x[0]-8){b=7;break e}N[0]=P,b[0]+=8,x[0]-=8,k[0]=C}else k[0]=5<=x[0]&&47==P[_+0]&&!(P[_+4]>>5),N[0]=x[0];b=0}if(i=i[0],f.Ja=f.Ja[0],f.xa=f.xa[0],a=a[0],0!=b)break;if(4294967286<f.Ja)return 3;if(null==c||y||(c[0]=f.xa?2:1),l=[l],g=[g],f.xa){if(5>i){b=7;break}c=l,m=g,y=s,null==e||5>i?e=0:5<=i&&47==e[a+0]&&!(e[a+4]>>5)?(x=[0],P=[0],w=[0],v(N=new S,e,a,i),fe(N,x,P,w)?(null!=c&&(c[0]=x[0]),null!=m&&(m[0]=P[0]),null!=y&&(y[0]=w[0]),e=1):e=0):e=0}else{if(10>i){b=7;break}c=g,null==e||10>i||!Ze(e,a+3,i-3)?e=0:(m=e[a+0]|e[a+1]<<8|e[a+2]<<16,y=16383&(e[a+7]<<8|e[a+6]),e=16383&(e[a+9]<<8|e[a+8]),1&m||3<(m>>1&7)||!(m>>4&1)||m>>5>=f.Ja||!y||!e?e=0:(l&&(l[0]=y),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],p&&(u[0]!=l||h[0]!=g))return 3;null!=d&&(d[0]=f,d.offset=a-d.w,t(4294967286>a-d.w),t(d.offset==d.ha-i));break}return 0==b||7==b&&p&&null==d?(null!=s&&(s[0]|=null!=f.na&&0<f.na.length),null!=r&&(r[0]=l),null!=o&&(o[0]=g),0):b}function zn(e,t,n){var a=t.width,i=t.height,r=0,o=0,s=a,l=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(s=e.cd,l=e.bd,r=e.v,o=e.j,11>n||(r&=-2,o&=-2),0>r||0>o||0>=s||0>=l||r+s>a||o+l>i))return 0;if(t.v=r,t.j=o,t.va=r+s,t.o=o+l,t.U=s,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!z(s,l,n=[e.ib],r=[e.hb]))return 0;t.ib=n[0],t.hb=r[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*a/4&&t.hb<3*i/4,t.Kb=0),1}function Dn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function En(e,t,n,a){if(null==a||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,o=n.bd,s=-2&n.v,l=-2&n.j;if(0>s||0>l||0>=i||0>=o||s+i>e||l+o>t)return 2;e=i,t=o}if(n.da){if(!z(e,t,i=[n.ib],o=[n.hb]))return 2;e=i[0],t=o[0]}}a.width=e,a.height=t;e:{var c=a.width,d=a.height;if(e=a.S,0>=c||0>=d||!(e>=za&&13>e))e=2;else{if(0>=a.Rd&&null==a.sd){s=o=i=t=0;var u=(l=c*Hi[e])*d;if(11>e||(o=(d+1)/2*(t=(c+1)/2),12==e&&(s=(i=c)*d)),null==(d=r(u+2*o+s))){e=1;break e}a.sd=d,11>e?((c=a.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=a.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=o,c.ea=d,c.W=0+u+o,c.Db=t,c.Ed=o,12==e&&(c.F=d,c.J=0+u+2*o),c.Tc=s,c.lb=i)}if(t=1,i=a.S,o=a.width,s=a.height,i>=za&&13>i)if(11>i)e=a.f.RGBA,t&=(l=Math.abs(e.A))*(s-1)+o<=e.size,t&=l>=o*Hi[i],t&=null!=e.eb;else{e=a.f.kb,l=(o+1)/2,u=(s+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),p=Math.abs(e.lb),m=p*(s-1)+o;t&=c*(s-1)+o<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=o&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=p>=o,t&=m<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Dn(a)),e}var On=64,Bn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qn=24,Hn=32,Gn=8,Wn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];O("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return q(q(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return q(e,t[n-1])},e.Predictor7=function(e,t,n){return q(e,t[n+0])},e.Predictor8=function(e,t,n){return q(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return q(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return q(q(e,t[n-1]),q(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var a=t[n+0];return 0>=W(a>>24&255,e>>24&255,(t=t[n-1])>>24&255)+W(a>>16&255,e>>16&255,t>>16&255)+W(a>>8&255,e>>8&255,t>>8&255)+W(255&a,255&e,255&t)?a:e},e.Predictor12=function(e,t,n){var a=t[n+0];return(H((e>>24&255)+(a>>24&255)-((t=t[n-1])>>24&255))<<24|H((e>>16&255)+(a>>16&255)-(t>>16&255))<<16|H((e>>8&255)+(a>>8&255)-(t>>8&255))<<8|H((255&e)+(255&a)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var a=t[n-1];return(G((e=q(e,t[n+0]))>>24&255,a>>24&255)<<24|G(e>>16&255,a>>16&255)<<16|G(e>>8&255,a>>8&255)<<8|G(255&e,255&a))>>>0};var Un=e.PredictorAdd0;e.PredictorAdd1=U,O("Predictor2","PredictorAdd2"),O("Predictor3","PredictorAdd3"),O("Predictor4","PredictorAdd4"),O("Predictor5","PredictorAdd5"),O("Predictor6","PredictorAdd6"),O("Predictor7","PredictorAdd7"),O("Predictor8","PredictorAdd8"),O("Predictor9","PredictorAdd9"),O("Predictor10","PredictorAdd10"),O("Predictor11","PredictorAdd11"),O("Predictor12","PredictorAdd12"),O("Predictor13","PredictorAdd13");var Kn=e.PredictorAdd2;Z("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),Z("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Vn,Yn=e.ColorIndexInverseTransform,Zn=e.MapARGB,$n=e.VP8LColorIndexInverseTransformAlpha,Qn=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Xn,ea,ta,na,aa,ia,ra,oa,sa,la,ca,da,ua,ha,pa,ma,fa,ga,va,ya,ba,xa,Sa,ja,wa,Na,ka,_a,Ca=r(511),Pa=r(2041),Fa=r(225),Aa=r(767),La=0,Ma=Pa,Ra=Fa,Ia=Aa,Ta=Ca,za=0,Da=1,Ea=2,Oa=3,Ba=4,qa=5,Ha=6,Ga=7,Wa=8,Ua=9,Ka=10,Va=[2,3,7],Ya=[3,3,11],Za=[280,256,256,256,40],$a=[0,1,1,1,0],Qa=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ja=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Xa=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ei=8,ti=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ai=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ri=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ci=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],di=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ui=[],hi=[],pi=[],mi=1,fi=2,gi=[],vi=[];yn("UpsampleRgbLinePair",Nn,3),yn("UpsampleBgrLinePair",kn,3),yn("UpsampleRgbaLinePair",An,4),yn("UpsampleBgraLinePair",Fn,4),yn("UpsampleArgbLinePair",Pn,4),yn("UpsampleRgba4444LinePair",Cn,2),yn("UpsampleRgb565LinePair",_n,2);var yi=e.UpsampleRgbLinePair,bi=e.UpsampleBgrLinePair,xi=e.UpsampleRgbaLinePair,Si=e.UpsampleBgraLinePair,ji=e.UpsampleArgbLinePair,wi=e.UpsampleRgba4444LinePair,Ni=e.UpsampleRgb565LinePair,ki=16,_i=1<<ki-1,Ci=-227,Pi=482,Fi=6,Ai=(256<<Fi)-1,Li=0,Mi=r(256),Ri=r(256),Ii=r(256),Ti=r(256),zi=r(Pi-Ci),Di=r(Pi-Ci);Ln("YuvToRgbRow",Nn,3),Ln("YuvToBgrRow",kn,3),Ln("YuvToRgbaRow",An,4),Ln("YuvToBgraRow",Fn,4),Ln("YuvToArgbRow",Pn,4),Ln("YuvToRgba4444Row",Cn,2),Ln("YuvToRgb565Row",_n,2);var Ei=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Oi=[0,2,8],Bi=[8,7,6,4,4,2,2,2,1,1,1,1],qi=1;this.WebPDecodeRGBA=function(e,n,a,i,r){var o=Da,s=new nn,l=new oe;s.ba=l,l.S=o,l.width=[l.width],l.height=[l.height];var c=l.width,d=l.height,u=new se;if(null==u||null==e)var h=2;else t(null!=u),h=Tn(e,n,a,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=h?c=0:(null!=c&&(c[0]=u.width[0]),null!=d&&(d[0]=u.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=i&&(i[0]=l.width),null!=r&&(r[0]=l.height);e:{if(i=new Ke,(r=new an).data=e,r.w=n,r.ha=a,r.kd=1,n=[0],t(null!=r),(0==(e=Tn(r.data,r.w,r.ha,null,null,null,n,null,r))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=s),i.data=r.data,i.w=r.w+r.offset,i.ha=r.ha-r.offset,i.put=pe,i.ac=he,i.bc=me,i.ma=s,r.xa){if(null==(e=Pe())){s=1;break e}if(function(e,n){var a=[0],i=[0],r=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,v(e.m,n.data,n.w,n.ha),!fe(e.m,a,i,r)){e.a=3;break t}if(e.xb=fi,n.width=a[0],n.height=i[0],!Fe(a[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,i)){if(i=0==(n=En(i.width,i.height,s.Oa,s.ba))){t:{i=e;n:for(;;){if(null==i){i=0;break t}if(t(null!=i.s.yc),t(null!=i.s.Ya),t(0<i.s.Wb),t(null!=(a=i.l)),t(null!=(r=a.ma)),0!=i.xb){if(i.ca=r.ba,i.tb=r.tb,t(null!=i.ca),!zn(r.Oa,a,Oa)){i.a=2;break n}if(!Ae(i,a.width))break n;if(a.da)break n;if((a.da||ae(i.ca.S))&&vn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&vn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!R(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!_e(i,i.V,i.Ba,i.c,i.i,a.o,je))break n;r.Dc=i.Ma,i=1;break t}t(0!=i.a),i=0}i=!i}i&&(n=e.a)}else n=e.a}else{if(null==(e=new Ve)){s=1;break e}if(e.Fa=r.na,e.P=r.P,e.qc=r.Sa,$e(e,i)){if(0==(n=En(i.width,i.height,s.Oa,s.ba))){if(e.Aa=0,a=s.Oa,t(null!=(r=e)),null!=a){if(0<(c=0>(c=a.Md)?0:100<c?255:255*c/100)){for(d=u=0;4>d;++d)12>(h=r.pb[d]).lc&&(h.ia=c*Bi[0>h.lc?0:h.lc]>>3),u|=h.ia;u&&(alert("todo:VP8InitRandom"),r.ia=1)}r.Ga=a.Id,100<r.Ga?r.Ga=100:0>r.Ga&&(r.Ga=0)}Xe(e,i)||(n=e.a)}}else n=e.a}0==n&&null!=s.Oa&&s.Oa.fd&&(n=Dn(s.ba))}s=n}o=0!=s?null:11>o?l.f.RGBA.eb:l.f.kb.y}else o=null;return o};var Hi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",a=0;a<4;a++)n+=String.fromCharCode(e[t++]);return n}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],p=[0],m=[],f=new l,g=e,v=function(e,t){var n={},a=0,i=!1,r=0,o=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){var s,l;for(u(e,t+=4),t+=8;t<e.length;){var h=c(e,t),p=u(e,t+=4);t+=4;var m=p+(1&p);switch(h){case"VP8 ":case"VP8L":void 0===n.frames[a]&&(n.frames[a]={}),(v=n.frames[a]).src_off=i?o:t-8,v.src_size=r+p+8,a++,i&&(i=!1,r=0,o=0);break;case"VP8X":(v=n.header={}).feature_flags=e[t];var f=t+4;v.canvas_width=1+d(e,f),f+=3,v.canvas_height=1+d(e,f),f+=3;break;case"ALPH":i=!0,r=m+8,o=t-8;break;case"ANIM":(v=n.header).bgcolor=u(e,t),f=t+4,v.loop_count=(s=e)[(l=f)+0]|s[l+1]<<8,f+=2;break;case"ANMF":var g,v;(v=n.frames[a]={}).offset_x=2*d(e,t),t+=3,v.offset_y=2*d(e,t),t+=3,v.width=1+d(e,t),t+=3,v.height=1+d(e,t),t+=3,v.duration=d(e,t),t+=3,g=e[t++],v.dispose=1&g,v.blend=g>>1&1}"ANMF"!=h&&(t+=m)}return n}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,b=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,h=[y.canvas_height],p=[y.canvas_width];for(var x=0;x<b.length&&0!=b[x].blend;x++);}var S=b[0],j=f.WebPDecodeRGBA(g,S.src_off,S.src_size,p,h);S.rgba=j,S.imgwidth=p[0],S.imgheight=h[0];for(var w=0;w<p[0]*h[0]*4;w++)m[w]=j[w];return this.width=p,this.height=h,this.data=m,this}!function(e){var t=function(t,a,l,c){var d=4,u=r;switch(c){case e.image_compression.FAST:d=1,u=i;break;case e.image_compression.MEDIUM:d=6,u=o;break;case e.image_compression.SLOW:d=9,u=s}var h=$t(t=n(t,a,l,u),{level:d});return e.__addimage__.arrayBufferToBinaryString(h)},n=function(e,t,n,a){for(var i,r,o,s=e.length/t,l=new Uint8Array(e.length+s),u=c(),h=0;h<s;h+=1){if(o=h*t,i=e.subarray(o,o+t),a)l.set(a(i,n,r),o+h);else{for(var p,m=u.length,f=[];p<m;p+=1)f[p]=u[p](i,n,r);var g=d(f.concat());l.set(f[g],o+h)}r=i}return l},a=function(e){var t=Array.apply([],e);return t.unshift(0),t},i=function(e,t){var n,a=[],i=e.length;a[0]=1;for(var r=0;r<i;r+=1)n=e[r-t]||0,a[r+1]=e[r]-n+256&255;return a},r=function(e,t,n){var a,i=[],r=e.length;i[0]=2;for(var o=0;o<r;o+=1)a=n&&n[o]||0,i[o+1]=e[o]-a+256&255;return i},o=function(e,t,n){var a,i,r=[],o=e.length;r[0]=3;for(var s=0;s<o;s+=1)a=e[s-t]||0,i=n&&n[s]||0,r[s+1]=e[s]+256-(a+i>>>1)&255;return r},s=function(e,t,n){var a,i,r,o,s=[],c=e.length;s[0]=4;for(var d=0;d<c;d+=1)a=e[d-t]||0,i=n&&n[d]||0,r=n&&n[d-t]||0,o=l(a,i,r),s[d+1]=e[d]-o+256&255;return s},l=function(e,t,n){if(e===t&&t===n)return e;var a=Math.abs(t-n),i=Math.abs(e-n),r=Math.abs(e+t-n-n);return a<=i&&a<=r?e:i<=r?t:n},c=function(){return[a,i,r,o,s]},d=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,a,i,r){var o,s,l,c,d,u,h,p,m,f,g,v,y,b,x,S=this.decode.FLATE_DECODE,j="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new Ua(n)).imgData,s=l.bits,o=l.colorSpace,d=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){m=(p=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(m*l.colors),f=new Uint8Array(m);var w,N=l.pixelBitlength-l.bits;for(b=0,x=0;b<m;b++){for(y=p[b],w=0;w<N;)g[x++]=y>>>w&255,w+=l.bits;f[b]=y>>>w&255}}if(16===l.bits){m=(p=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(m*(32/l.pixelBitlength)*l.colors),f=new Uint8Array(m*(32/l.pixelBitlength)),v=l.colors>1,b=0,x=0;for(var k=0;b<m;)y=p[b++],g[x++]=y>>>0&255,v&&(g[x++]=y>>>16&255,y=p[b++],g[x++]=y>>>0&255),f[k++]=y>>>16&255;s=8}r!==e.image_compression.NONE?(n=t(g,l.width*l.colors,l.colors,r),h=t(f,l.width,1,r)):(n=g,h=f,S=void 0)}if(3===l.colorType&&(o=this.color_spaces.INDEXED,u=l.palette,l.transparency.indexed)){var _=l.transparency.indexed,C=0;for(b=0,m=_.length;b<m;++b)C+=_[b];if((C/=255)===m-1&&-1!==_.indexOf(0))c=[_.indexOf(0)];else if(C!==m){for(p=l.decodePixels(),f=new Uint8Array(p.length),b=0,m=p.length;b<m;b++)f[b]=_[p[b]];h=t(f,l.width,1)}}var P=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(r);return S===this.decode.FLATE_DECODE&&(j="/Predictor "+P+" "),j+="/Colors "+d+" /BitsPerComponent "+s+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:i,data:n,index:a,filter:S,decodeParameters:j,transparency:c,palette:u,sMask:h,predictor:P,width:l.width,height:l.height,bitsPerComponent:s,colorSpace:o}}}}(Rn.API),function(e){e.processGIF89A=function(t,n,a,i){var r=new Ka(t),o=r.width,s=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:s},d=new Ya(100).encode(c,100);return e.processJPEG.call(this,d,n,a,i)},e.processGIF87A=e.processGIF89A}(Rn.API),Za.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:a,blue:n,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Za.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){tn.log("bit decode error:"+e)}},Za.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var r=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[r>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}0!==n&&(this.pos+=4-n)}},Za.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var r=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*i*4,s=r>>4,l=15&r,c=this.palette[s];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}0!==t&&(this.pos+=4-t)}},Za.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint8(this.pos++,!0),r=n*this.width*4+4*a;if(i<this.palette.length){var o=this.palette[i];this.data[r]=o.red,this.data[r+1]=o.green,this.data[r+2]=o.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}0!==e&&(this.pos+=4-e)}},Za.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(r&t)/t*255|0,s=(r>>5&t)/t*255|0,l=(r>>10&t)/t*255|0,c=r>>15?255:0,d=a*this.width*4+4*i;this.data[d]=l,this.data[d+1]=s,this.data[d+2]=o,this.data[d+3]=c}this.pos+=e}},Za.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var i=this.bottom_up?a:this.height-1-a,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/t*255|0,d=i*this.width*4+4*r;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=s,this.data[d+3]=255}this.pos+=e}},Za.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=r,this.data[o+1]=i,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Za.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=r,this.data[s+1]=i,this.data[s+2]=a,this.data[s+3]=o}},Za.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,a,i){var r=new Za(t,!1),o=r.width,s=r.height,l={data:r.getData(),width:o,height:s},c=new Ya(100).encode(l,100);return e.processJPEG.call(this,c,n,a,i)}}(Rn.API),$a.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,a,i){var r=new $a(t,!1),o=r.width,s=r.height,l={data:r.getData(),width:o,height:s},c=new Ya(100).encode(l,100);return e.processJPEG.call(this,c,n,a,i)}}(Rn.API),Rn.API.processRGBA=function(e,t,n){for(var a=e.data,i=a.length,r=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var d=a[c],u=a[c+1],h=a[c+2],p=a[c+3];r[s++]=d,r[s++]=u,r[s++]=h,o[l++]=p}var m=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Rn.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ba=Rn.API,qa=Ba.getCharWidthsArray=function(e,t){var n,a,i=(t=t||{}).font||this.internal.getFont(),r=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=!1!==t.doKerning,h=0,p=e.length,m=0,f=s[0]||l,g=[];for(n=0;n<p;n++)a=e.charCodeAt(n),"function"==typeof i.metadata.widthOfString?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(a))+o*(1e3/r)||0)/1e3):(h=u&&"object"===(0,nt.A)(c[a])&&!isNaN(parseInt(c[a][m],10))?c[a][m]/d:0,g.push((s[a]||f)/l+h)),m=a;return g},Ha=Ba.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Ba.processArabic&&(e=Ba.processArabic(e)),"function"==typeof a.metadata.widthOfString?a.metadata.widthOfString(e,n,i)/n:qa.apply(this,arguments).reduce(function(e,t){return e+t},0)},Ga=function(e,t,n,a){for(var i=[],r=0,o=e.length,s=0;r!==o&&s+t[r]<n;)s+=t[r],r++;i.push(e.slice(0,r));var l=r;for(s=0;r!==o;)s+t[r]>a&&(i.push(e.slice(l,r)),s=0,l=r),s+=t[r],r++;return l!==r&&i.push(e.slice(l,r)),i},Wa=function(e,t,n){n||(n={});var a,i,r,o,s,l,c,d=[],u=[d],h=n.textIndent||0,p=0,m=0,f=e.split(" "),g=qa.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),y=[];f.map(function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):y.push(e[0])}),f=y,l=Ha.apply(this,[v,n])}for(r=0,o=f.length;r<o;r++){var b=0;if(a=f[r],l&&"\n"==a[0]&&(a=a.substr(1),b=1),h+p+(m=(i=qa.apply(this,[a,n])).reduce(function(e,t){return e+t},0))>t||b){if(m>t){for(s=Ga.apply(this,[a,i,t-(h+p),t]),d.push(s.shift()),d=[s.pop()];s.length;)u.push([s.shift()]);m=i.slice(a.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[a];u.push(d),h=m+l,p=g}else d.push(a),h+=p+m,p=g}return c=l?function(e,t){return(t?v:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},Ba.splitTextToSize=function(e,t,n){var a,i=(n=n||{}).fontSize||this.internal.getFontSize(),r=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;r.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,r.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=a.length;s<l;s++)c=c.concat(Wa.apply(this,[a[s],o,r]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[t[i]]="0123456789abcdef"[i],a["0123456789abcdef"[i]]=t[i];var r=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,n,i,s,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=r(c).slice(2)).slice(0,-1)+a[n.slice(-1)]),"number"==typeof t)t<0?(i=r(t).slice(3),s="-"):(i=r(t).slice(2),s=""),i=s+i.slice(0,-1)+a[i.slice(-1)];else{if("object"!==(0,nt.A)(t))throw new Error("Don't know what to do with value type "+(0,nt.A)(t)+".");i=o(t)}l.push(n+i)}return l.push("}"),l.join("")},s=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,a,i,r,o={},s=1,l=o,c=[],d="",u="",h=e.length-1,p=1;p<h;p+=1)"'"==(r=e[p])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(r):"{"==r?(c.push([l,i]),l={},i=void 0):"}"==r?((a=c.pop())[0][a[1]]=l,i=void 0,l=a[0]):"-"==r?s=-1:void 0===i?n.hasOwnProperty(r)?(d+=n[r],i=parseInt(d,16)*s,s=1,d=""):d+=r:n.hasOwnProperty(r)?(u+=n[r],l[i]=parseInt(u,16)*s,s=1,i=void 0,u=""):u+=r;return o},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=d.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var a=c.Unicode[t.postScriptName];a&&(t.metadata.Unicode.encoding=a,t.encoding=a.codePages[0])}])}(Rn.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),a=0;a<t;a++)n[a]=e.charCodeAt(a);return n};e.API.events.push(["addFont",function(n){var a=void 0,i=n.font,r=n.instance;if(!i.isStandardFont){if(void 0===r)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(a=!1===r.existsFileInVFS(i.postScriptName)?r.loadFile(i.postScriptName):r.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(on(a)),n.metadata=e.API.TTFFont.open(a),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,a)}}])}(Rn),function(){function e(){return(Xt.canvg?Promise.resolve(Xt.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Rn.API.addSvgAsImage=function(t,n,a,i,r,o,s,l){if(isNaN(n)||isNaN(a))throw tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=r;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(e){return e.fromString(d,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),n,a,i,r,s,l)})}}(),Rn.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var i=0;i<this.internal.pages[a].length;i++)this.internal.pages[a][i]=this.internal.pages[a][i].replace(t,n);return this},Rn.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var a,i,r,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],c=0,d=0,u=0;function h(e,t){var n,a=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(a=!0);return a}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=s.length;for(u=0;u<p;u+=1)n[s[u]].value=n[s[u]].defaultValue,n[s[u]].explicitSet=!1}if("object"===(0,nt.A)(e))for(i in e)if(r=e[i],h(s,i)&&void 0!==r){if("boolean"===n[i].type&&"boolean"==typeof r)n[i].value=r;else if("name"===n[i].type&&h(n[i].valueSet,r))n[i].value=r;else if("integer"===n[i].type&&Number.isInteger(r))n[i].value=r;else if("array"===n[i].type){for(c=0;c<r.length;c+=1)if(a=!0,1===r[c].length&&"number"==typeof r[c][0])l.push(String(r[c]-1));else if(r[c].length>1){for(d=0;d<r[c].length;d+=1)"number"!=typeof r[c][d]&&(a=!1);!0===a&&l.push([r[c][0]-1,r[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),r=unescape(encodeURIComponent("</x:xmpmeta>")),o=n.length+a.length+i.length+t.length+r.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+o+" >>"),this.internal.write("stream"),this.internal.write(t+n+a+i+r),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,a){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Rn.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,a=t.metadata.Unicode.widths,i=["","0","00","000","0000"],r=[""],o=0,s=e.length;o<s;++o){if(n=t.metadata.characterToGlyph(e.charCodeAt(o)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(o),-1==a.indexOf(n)&&(a.push(n),a.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return r.join("");n=n.toString(16),r.push(i[4-n.length],n)}return r.join("")},a=function(e){var t,n,a,i,r,o,s;for(r="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",a=[],o=0,s=(n=Object.keys(e).sort(function(e,t){return e-t})).length;o<s;o++)t=n[o],a.length>=100&&(r+="\n"+a.length+" beginbfchar\n"+a.join("\n")+"\nendbfchar",a=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),a.push("<"+t+"><"+i+">"));return a.length&&(r+="\n"+a.length+" beginbfchar\n"+a.join("\n")+"\nendbfchar\n"),r+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,r=t.newObject,o=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=r();o({data:c,addLength1:!0,objectId:u}),i("endobj");var h=r();o({data:a(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var p=r();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+Cn(n.fontName)),i("/FontFile2 "+u+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var m=r();i("<<"),i("/Type /Font"),i("/BaseFont /"+Cn(n.fontName)),i("/FontDescriptor "+p+" 0 R"),i("/W "+e.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=r(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+h+" 0 R"),i("/BaseFont /"+Cn(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+m+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,r=t.newObject,o=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,l="",c=0;c<s.length;c++)l+=String.fromCharCode(s[c]);var d=r();o({data:l,addLength1:!0,objectId:d}),i("endobj");var u=r();o({data:a(n.metadata.toUnicode),addLength1:!0,objectId:u}),i("endobj");var h=r();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+d+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+Cn(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=r();for(var p=0;p<n.metadata.hmtx.widths.length;p++)n.metadata.hmtx.widths[p]=parseInt(n.metadata.hmtx.widths[p]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+Cn(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,a=e.text||"",i=e.x,r=e.y,o=e.options||{},s=e.mutex||{},l=s.pdfEscape,c=s.activeFontKey,d=s.fonts,u=c,h="",p=0,m="",f=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:a,x:i,y:r,options:o,mutex:s};for(m=a,u=c,Array.isArray(a)&&(m=a[0]),p=0;p<m.length;p+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[m[p].charCodeAt(0)]),t||m[p].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=m[p]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===f?g=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===f&&(g=n(h,d[u])),s.isHex=!0,{text:g,x:i,y:r,options:o,mutex:s}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],a={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var r=0;for(r=0;r<t.length;r+=1)Array.isArray(t[r])&&3===t[r].length?n.push([i(Object.assign({},a,{text:t[r][0]})).text,t[r][1],t[r][2]]):n.push(i(Object.assign({},a,{text:t[r]})).text);e.text=n}else e.text=i(Object.assign({},a,{text:t})).text}])}(Rn),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Rn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,a,i,r,o,s,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},m=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),n=t>>8,a=p[n];return void 0!==a?c[256*a+(255&t)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},b=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=y(e.charAt(n))))return!1;if("R"===t)return!0}return!1},x=function(e,t,o,s){var l,c,d,u,h=t[s];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":s<1||s+1>=t.length||"EN"!==(l=o[s-1])&&"AN"!==l||"EN"!==(c=t[s+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=s>0?o[s-1]:"B")&&s+1<t.length&&"EN"===t[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===o[s-1]){h="EN";break}if(g){h="N";break}for(d=s+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(i&&!r){for(u=t.length,d=s+1;d<u&&"NSM"===t[d];)d++;if(d<u){var p=e[s],m=p>=1425&&p<=2303||64286===p;if(l=t[d],m&&("R"===l||"AL"===l)){h="R";break}}}h=s<1||"B"===(l=t[s-1])?"N":o[s-1];break;case"B":g=!1,n=!0,h=v;break;case"S":a=!0,h="N"}return h},S=function(e,t,n){var a=e.split("");return n&&j(a,n,{hiLevel:v}),a.reverse(),t&&t.reverse(),a.join("")},j=function(e,t,i){var r,o,s,l,c,p=-1,m=e.length,f=0,b=[],S=v?u:d,j=[];for(g=!1,n=!1,a=!1,o=0;o<m;o++)j[o]=y(e[o]);for(s=0;s<m;s++){if(c=f,b[s]=x(e,j,b,s),r=240&(f=S[c][h[b[s]]]),f&=15,t[s]=l=S[f][5],r>0)if(16===r){for(o=p;o<s;o++)t[o]=1;p=-1}else p=-1;if(S[f][6])-1===p&&(p=s);else if(p>-1){for(o=p;o<s;o++)t[o]=l;p=-1}"B"===j[s]&&(t[s]=0),i.hiLevel|=l}a&&function(e,t,n){for(var a=0;a<n;a++)if("S"===e[a]){t[a]=v;for(var i=a-1;i>=0&&"WS"===e[i];i--)t[i]=v}}(j,t,m)},w=function(e,t,a,i,r){if(!(r.hiLevel<e)){if(1===e&&1===v&&!n)return t.reverse(),void(a&&a.reverse());for(var o,s,l,c,d=t.length,u=0;u<d;){if(i[u]>=e){for(l=u+1;l<d&&i[l]>=e;)l++;for(c=u,s=l-1;c<s;c++,s--)o=t[c],t[c]=t[s],t[s]=o,a&&(o=a[c],a[c]=a[s],a[s]=o);u=l}u++}}},N=function(e,t,n){var a=e.split(""),i={hiLevel:v};return n||(n=[]),j(a,n,i),function(e,t,n){if(0!==n.hiLevel&&l)for(var a,i=0;i<e.length;i++)1===t[i]&&(a=m.indexOf(e[i]))>=0&&(e[i]=m[a+1])}(a,n,i),w(2,a,t,n,i),w(1,a,t,n,i),a.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===r&&(r=b(e)),void 0===s&&(s=b(e))}(e,t),i||!o||s)if(i&&o&&r^s)v=r?1:0,e=S(e,t,n);else if(!i&&o&&s)v=r?1:0,e=N(e,t,n),e=S(e,t);else if(!i||r||o||s){if(i&&!o&&r^s)e=S(e,t),r?(v=0,e=N(e,t,n)):(v=1,e=N(e,t,n),e=S(e,t));else if(i&&r&&!o&&s)v=1,e=N(e,t,n),e=S(e,t);else if(!i&&!o&&r^s){var a=l;r?(v=1,e=N(e,t,n),v=0,l=!1,e=N(e,t,n),l=a):(v=0,e=N(e,t,n),e=S(e,t),v=1,l=!1,e=N(e,t,n),l=a,e=S(e,t))}}else v=0,e=N(e,t,n);else v=r?1:0,e=N(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,o=e.isOutputVisual,r=e.isInputRtl,s=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,a=(e.x,e.y,e.options||{}),i=(e.mutex,a.lang,[]);if(a.isInputVisual="boolean"!=typeof a.isInputVisual||a.isInputVisual,n.setOptions(a),"[object Array]"===Object.prototype.toString.call(t)){var r=0;for(i=[],r=0;r<t.length;r+=1)"[object Array]"===Object.prototype.toString.call(t[r])?i.push([n.doBidiReorder(t[r][0]),t[r][1],t[r][2]]):i.push([n.doBidiReorder(t[r])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Rn),Rn.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Ja(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new vi(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Xa(this.contents),this.head=new ni(this),this.name=new ci(this),this.cmap=new ii(this),this.toUnicode={},this.hhea=new ri(this),this.maxp=new di(this),this.hmtx=new ui(this),this.post=new si(this),this.os2=new oi(this),this.loca=new gi(this),this.glyf=new pi(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,a,i;for(i=[],t=0,n=(a=this.bbox).length;t<n;t++)e=a[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),0!=(32768&(t=a>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var a,i,r,o;for(r=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=e.charCodeAt(i),r+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/t)||0;return r*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Qa,Ja=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,a;for(a=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,a,i,r,o,s;return e=this.readByte(),t=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^r)+256*(255^o)+(255^s)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*a+16777216*i+65536*r+256*o+s},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),Xa=function(){var e;function t(e){var t,n,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,a=this.tableCount;0<=a?n<a:n>a;n=0<=a?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,a,i,r,o,s,l,c,d,u,h,p,m;for(m in h=Object.keys(t).length,s=Math.log(2),d=16*Math.floor(Math.log(h)/s),r=Math.floor(d/s),c=16*h-d,(a=new Ja).writeInt(this.scalarType),a.writeShort(h),a.writeShort(d),a.writeShort(r),a.writeShort(c),i=16*h,l=a.pos+i,o=null,p=[],t)for(u=t[m],a.writeString(m),a.writeInt(e(u)),a.writeInt(l),a.writeInt(u.length),p=p.concat(u),"head"===m&&(o=l),l+=u.length;l%4;)p.push(0),l++;return a.write(p),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(e){var t,n,a,i;for(e=hi.call(e);e.length%4;)e.push(0);for(a=new Ja(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=a.readUInt32();return 4294967295&n},t}(),ei={}.hasOwnProperty,ti=function(e,t){for(var n in t)ei.call(t,n)&&(e[n]=t[n]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};Qa=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var ni=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new Ja).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),ai=function(){function e(e,t){var n,a,i,r,o,s,l,c,d,u,h,p,m,f,g,v,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,i=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,m=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),a=(this.length-e.pos+this.offset)/2,o=function(){var t,n;for(n=[],s=t=0;0<=a?t<a:t>a;s=0<=a?++t:--t)n.push(e.readUInt16());return n}(),s=g=0,y=i.length;g<y;s=++g)for(f=i[s],n=v=p=m[s];p<=f?v<=f:v>=f;n=p<=f?++v:--v)0===c[s]?r=n+l[s]:0!==(r=o[c[s]/2+(n-p)-(u-s)]||0)&&(r+=l[s]),this.codeMap[n]=65535&r}e.pos=d}return e.encode=function(e,t){var n,a,i,r,o,s,l,c,d,u,h,p,m,f,g,v,y,b,x,S,j,w,N,k,_,C,P,F,A,L,M,R,I,T,z,D,E,O,B,q,H,G,W,U,K,V;switch(F=new Ja,r=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(m=0,f=function(){var e=[];for(p=0;p<256;++p)e.push(0);return e}(),v={0:0},i={},A=0,I=r.length;A<I;A++)null==v[W=e[a=r[A]]]&&(v[W]=++m),i[a]={old:e[a],new:v[e[a]]},f[a]=v[e[a]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(f),{charMap:i,subtable:F.data,maxGlyphID:m+1};case"unicode":for(C=[],d=[],y=0,v={},n={},g=l=null,L=0,T=r.length;L<T;L++)null==v[x=e[a=r[L]]]&&(v[x]=++y),n[a]={old:x,new:v[x]},o=v[x]-a,null!=g&&o===l||(g&&d.push(g),C.push(a),l=o),g=a;for(g&&d.push(g),d.push(65535),C.push(65535),k=2*(N=C.length),w=2*Math.pow(Math.log(N)/Math.LN2,2),u=Math.log(w/2)/Math.LN2,j=2*N-w,s=[],S=[],h=[],p=M=0,z=C.length;M<z;p=++M){if(_=C[p],c=d[p],65535===_){s.push(0),S.push(0);break}if(_-(P=n[_].new)>=32768)for(s.push(0),S.push(2*(h.length+N-p)),a=R=_;_<=c?R<=c:R>=c;a=_<=c?++R:--R)h.push(n[a].new);else s.push(P-_),S.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*N+2*h.length),F.writeUInt16(0),F.writeUInt16(k),F.writeUInt16(w),F.writeUInt16(u),F.writeUInt16(j),H=0,D=d.length;H<D;H++)a=d[H],F.writeUInt16(a);for(F.writeUInt16(0),G=0,E=C.length;G<E;G++)a=C[G],F.writeUInt16(a);for(U=0,O=s.length;U<O;U++)o=s[U],F.writeUInt16(o);for(K=0,B=S.length;K<B;K++)b=S[K],F.writeUInt16(b);for(V=0,q=h.length;V<q;V++)m=h[V],F.writeUInt16(m);return{charMap:n,subtable:F.data,maxGlyphID:y+1}}},e}(),ii=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)t=new ai(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,a;return null==t&&(t="macroman"),n=ai.encode(e,t),(a=new Ja).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),ri=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),oi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),si=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,a;for(a=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)a.push(e.readUInt32());return a}.call(this)}},e}(),li=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},ci=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,a,i,r,o,s,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),o=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(s={},i=c=0,d=n.length;c<d;i=++c)a=n[i],e.pos=a.offset,l=e.readString(a.length),r=new li(l,a),null==s[u=a.nameID]&&(s[u]=[]),s[a.nameID].push(r);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),di=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),ui=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,a,i,r,o,s;for(e.pos=this.offset,this.metrics=[],t=0,o=this.file.hhea.numberOfMetrics;0<=o?t<o:t>o;t=0<=o?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=a?n<a:n>a;t=0<=a?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,a;for(a=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],a.push(i.advance);return a}.call(this),n=this.widths[this.widths.length-1],s=[],t=r=0;0<=a?r<a:r>a;t=0<=a?++r:--r)s.push(this.widths.push(n));return s},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),hi=[].slice,pi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,a,i,r,o,s,l,c,d;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(a=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,r=(o=new Ja(t.read(a))).readShort(),l=o.readShort(),d=o.readShort(),s=o.readShort(),c=o.readShort(),this.cache[e]=-1===r?new fi(o,l,d,s,c):new mi(o,r,l,d,s,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var a,i,r,o,s;for(r=[],i=[],o=0,s=t.length;o<s;o++)a=e[t[o]],i.push(r.length),a&&(r=r.concat(a.encode(n)));return i.push(r.length),{table:r,offsets:i}},e}(),mi=function(){function e(e,t,n,a,i,r){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=r,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),fi=function(){function e(e,t,n,a,i){var r,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],r=this.raw;o=r.readShort(),this.glyphOffsets.push(r.pos),this.glyphIDs.push(r.readUInt16()),32&o;)r.pos+=1&o?4:2,128&o?r.pos+=8:64&o?r.pos+=4:8&o&&(r.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new Ja(hi.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),gi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ti(e,Qa),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,a;for(a=[],n=0,t=this.length;n<t;n+=2)a.push(2*e.readUInt16());return a}.call(this):function(){var t,a;for(a=[],n=0,t=this.length;n<t;n+=4)a.push(e.readUInt32());return a}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,r=0;r<n.length;++r)if(n[r]=a,i<t.length&&t[i]==r){++i,n[r]=a;var o=this.offsets[r],s=this.offsets[r+1]-o;s>0&&(a+=s)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),vi=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,a,i;for(t in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=a[n];return e},e.prototype.glyphsFor=function(e){var t,n,a,i,r,o,s;for(a={},r=0,o=e.length;r<o;r++)a[i=e[r]]=this.font.glyf.glyphFor(i);for(i in t=[],a)(null!=(n=a[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in s=this.glyphsFor(t))n=s[i],a[i]=n;return a},e.prototype.encode=function(e,t){var n,a,i,r,o,s,l,c,d,u,h,p,m,f,g;for(a in n=ii.encode(this.generateCmap(),"unicode"),r=this.glyphsFor(e),h={0:0},g=n.charMap)h[(s=g[a]).old]=s.new;for(p in u=n.maxGlyphID,r)p in h||(h[p]=u++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),d=Object.keys(c).sort(function(e,t){return e-t}),m=function(){var e,t,n;for(n=[],e=0,t=d.length;e<t;e++)o=d[e],n.push(c[o]);return n}(),i=this.font.glyf.encode(r,m,h),l=this.font.loca.encode(i.offsets,m),f={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();Rn.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var a,i,r,o;if(Array.isArray(n))return"["+function(){var e,i,r;for(r=[],e=0,i=n.length;e<i;e++)a=n[e],r.push(t.convert(a));return r}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in r=["<<"],n)o=n[i],r.push("/"+i+" "+t.convert(o));return r.push(">>"),r.join("\n")}return""+n},t}();const yi=Rn,bi=(e,t)=>"".concat("https://res.cloudinary.com/drhp5e0kl/image/upload/v1766864130/Taste-Exploration","/").concat(e,"/").concat(t),xi={living_spaces:{code:"LS",name:"Living Spaces",description:"Main living rooms, great rooms, salons, and formal sitting areas",icon:"\ud83d\udecb\ufe0f",color:"#1A365D"},dining_spaces:{code:"DS",name:"Dining Spaces",description:"Formal dining, breakfast areas, and casual eating spaces",icon:"\ud83c\udf7d\ufe0f",color:"#805AD5"},kitchens:{code:"KT",name:"Kitchens",description:"Chef's kitchens, family kitchens, and culinary spaces",icon:"\ud83d\udc68\u200d\ud83c\udf73",color:"#C9A962"},primary_bedrooms:{code:"PB",name:"Primary Bedrooms",description:"Master suites and primary sleeping quarters",icon:"\ud83d\udecf\ufe0f",color:"#9F7AEA"},primary_bathrooms:{code:"PBT",name:"Primary Bathrooms",description:"Master baths and spa-like retreats",icon:"\ud83d\udec1",color:"#38B2AC"},guest_bedrooms:{code:"GB",name:"Guest Bedrooms",description:"Guest suites and secondary sleeping quarters",icon:"\ud83d\udecf\ufe0f",color:"#667EEA"},family_areas:{code:"FA",name:"Family Areas",description:"Casual family rooms, media rooms, and recreational spaces",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",color:"#ED8936"},exterior_architecture:{code:"EA",name:"Exterior Architecture",description:"Facades, entries, and overall architectural presence",icon:"\ud83c\udfdb\ufe0f",color:"#319795"},outdoor_living:{code:"OL",name:"Outdoor Living",description:"Pools, terraces, gardens, and exterior entertainment",icon:"\ud83c\udf33",color:"#48BB78"}},Si=["living_spaces","dining_spaces","kitchens","primary_bedrooms","primary_bathrooms","guest_bedrooms","family_areas","exterior_architecture","outdoor_living"],ji=(e,t,n,a)=>{const i={AS1:{warmth:4,formality:6,drama:10,tradition:1},AS3:{warmth:7,formality:7,drama:4,tradition:4},AS6:{warmth:6,formality:7,drama:5,tradition:7},AS9:{warmth:8,formality:9,drama:7,tradition:10}},r=[e,t,n,a].map(e=>i[e]||i.AS6);return{warmth:r.map(e=>e.warmth),formality:r.map(e=>e.formality),drama:r.map(e=>e.drama),tradition:r.map(e=>e.tradition)}},wi=[{quadId:"LS-001",category:"living_spaces",images:[bi("LS","LS-001_0_AS1_VD1_MP1.png"),bi("LS","LS-001_1_AS3_VD3_MP1.png"),bi("LS","LS-001_2_AS6_VD6_MP1.png"),bi("LS","LS-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"LS-002",category:"living_spaces",images:[bi("LS","LS-002_0_AS3_VD3_MP6.png"),bi("LS","LS-002_1_AS6_VD6_MP6.png"),bi("LS","LS-002_2_AS9_VD9_MP6.png"),bi("LS","LS-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"LS-003",category:"living_spaces",images:[bi("LS","LS-003_0_AS9_VD9_MP1.png"),bi("LS","LS-003_1_AS1_VD1_MP3.png"),bi("LS","LS-003_2_AS3_VD3_MP3.png"),bi("LS","LS-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"LS-004",category:"living_spaces",images:[bi("LS","LS-004_0_AS1_VD1_MP9.png"),bi("LS","LS-004_1_AS3_VD3_MP9.png"),bi("LS","LS-004_2_AS6_VD6_MP9.png"),bi("LS","LS-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"DS-001",category:"dining_spaces",images:[bi("DS","DS-001_0_AS1_VD1_MP1.png"),bi("DS","DS-001_1_AS3_VD3_MP1.png"),bi("DS","DS-001_2_AS6_VD6_MP1.png"),bi("DS","DS-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"DS-002",category:"dining_spaces",images:[bi("DS","DS-002_0_AS3_VD3_MP6.png"),bi("DS","DS-002_1_AS6_VD6_MP6.png"),bi("DS","DS-002_2_AS9_VD9_MP6.png"),bi("DS","DS-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"DS-003",category:"dining_spaces",images:[bi("DS","DS-003_0_AS9_VD9_MP1.png"),bi("DS","DS-003_1_AS1_VD1_MP3.png"),bi("DS","DS-003_2_AS3_VD3_MP3.png"),bi("DS","DS-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"DS-004",category:"dining_spaces",images:[bi("DS","DS-004_0_AS1_VD1_MP9.png"),bi("DS","DS-004_1_AS3_VD3_MP9.png"),bi("DS","DS-004_2_AS6_VD6_MP9.png"),bi("DS","DS-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"KT-001",category:"kitchens",images:[bi("KT","KT-001_0_AS1_VD1_MP1.png"),bi("KT","KT-001_1_AS3_VD3_MP1.png"),bi("KT","KT-001_2_AS6_VD6_MP1.png"),bi("KT","KT-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"KT-002",category:"kitchens",images:[bi("KT","KT-002_0_AS3_VD3_MP6.png"),bi("KT","KT-002_1_AS6_VD6_MP6.png"),bi("KT","KT-002_2_AS9_VD9_MP6.png"),bi("KT","KT-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"KT-003",category:"kitchens",images:[bi("KT","KT-003_0_AS9_VD9_MP1.png"),bi("KT","KT-003_1_AS1_VD1_MP3.png"),bi("KT","KT-003_2_AS3_VD3_MP3.png"),bi("KT","KT-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"KT-004",category:"kitchens",images:[bi("KT","KT-004_0_AS1_VD1_MP9.png"),bi("KT","KT-004_1_AS3_VD3_MP9.png"),bi("KT","KT-004_2_AS6_VD6_MP9.png"),bi("KT","KT-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"PB-001",category:"primary_bedrooms",images:[bi("PB","PB-001_0_AS1_VD1_MP1.png"),bi("PB","PB-001_1_AS3_VD3_MP1.png"),bi("PB","PB-001_2_AS6_VD6_MP1.png"),bi("PB","PB-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"PB-002",category:"primary_bedrooms",images:[bi("PB","PB-002_0_AS3_VD3_MP6.png"),bi("PB","PB-002_1_AS6_VD6_MP6.png"),bi("PB","PB-002_2_AS9_VD9_MP6.png"),bi("PB","PB-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"PB-003",category:"primary_bedrooms",images:[bi("PB","PB-003_0_AS9_VD9_MP1.png"),bi("PB","PB-003_1_AS1_VD1_MP3.png"),bi("PB","PB-003_2_AS3_VD3_MP3.png"),bi("PB","PB-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"PB-004",category:"primary_bedrooms",images:[bi("PB","PB-004_0_AS1_VD1_MP9.png"),bi("PB","PB-004_1_AS3_VD3_MP9.png"),bi("PB","PB-004_2_AS6_VD6_MP9.png"),bi("PB","PB-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"PBT-001",category:"primary_bathrooms",images:[bi("PBT","PBT-001_0_AS1_VD1_MP1.png"),bi("PBT","PBT-001_1_AS3_VD3_MP1.png"),bi("PBT","PBT-001_2_AS6_VD6_MP1.png"),bi("PBT","PBT-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"PBT-002",category:"primary_bathrooms",images:[bi("PBT","PBT-002_0_AS3_VD3_MP6.png"),bi("PBT","PBT-002_1_AS6_VD6_MP6.png"),bi("PBT","PBT-002_2_AS9_VD9_MP6.png"),bi("PBT","PBT-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"PBT-003",category:"primary_bathrooms",images:[bi("PBT","PBT-003_0_AS9_VD9_MP1.png"),bi("PBT","PBT-003_1_AS1_VD1_MP3.png"),bi("PBT","PBT-003_2_AS3_VD3_MP3.png"),bi("PBT","PBT-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"PBT-004",category:"primary_bathrooms",images:[bi("PBT","PBT-004_0_AS1_VD1_MP9.png"),bi("PBT","PBT-004_1_AS3_VD3_MP9.png"),bi("PBT","PBT-004_2_AS6_VD6_MP9.png"),bi("PBT","PBT-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"GB-001",category:"guest_bedrooms",images:[bi("GB","GB-001_0_AS1_VD1_MP1.png"),bi("GB","GB-001_1_AS3_VD3_MP1.png"),bi("GB","GB-001_2_AS6_VD6_MP1.png"),bi("GB","GB-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"GB-002",category:"guest_bedrooms",images:[bi("GB","GB-002_0_AS3_VD3_MP6.png"),bi("GB","GB-002_1_AS6_VD6_MP6.png"),bi("GB","GB-002_2_AS9_VD9_MP6.png"),bi("GB","GB-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"GB-003",category:"guest_bedrooms",images:[bi("GB","GB-003_0_AS9_VD9_MP1.png"),bi("GB","GB-003_1_AS1_VD1_MP3.png"),bi("GB","GB-003_2_AS3_VD3_MP3.png"),bi("GB","GB-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"GB-004",category:"guest_bedrooms",images:[bi("GB","GB-004_0_AS1_VD1_MP9.png"),bi("GB","GB-004_1_AS3_VD3_MP9.png"),bi("GB","GB-004_2_AS6_VD6_MP9.png"),bi("GB","GB-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"FA-001",category:"family_areas",images:[bi("FA","FA-001_0_AS1_VD1_MP1.png"),bi("FA","FA-001_1_AS3_VD3_MP1.png"),bi("FA","FA-001_2_AS6_VD6_MP1.png"),bi("FA","FA-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"FA-002",category:"family_areas",images:[bi("FA","FA-002_0_AS3_VD3_MP6.png"),bi("FA","FA-002_1_AS6_VD6_MP6.png"),bi("FA","FA-002_2_AS9_VD9_MP6.png"),bi("FA","FA-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"FA-003",category:"family_areas",images:[bi("FA","FA-003_0_AS9_VD9_MP1.png"),bi("FA","FA-003_1_AS1_VD1_MP3.png"),bi("FA","FA-003_2_AS3_VD3_MP3.png"),bi("FA","FA-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"FA-004",category:"family_areas",images:[bi("FA","FA-004_0_AS1_VD1_MP9.png"),bi("FA","FA-004_1_AS3_VD3_MP9.png"),bi("FA","FA-004_2_AS6_VD6_MP9.png"),bi("FA","FA-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"EA-001",category:"exterior_architecture",images:[bi("EA","EA-001_0_AS1_VD1_MP1.png"),bi("EA","EA-001_1_AS3_VD3_MP1.png"),bi("EA","EA-001_2_AS6_VD6_MP1.png"),bi("EA","EA-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"EA-002",category:"exterior_architecture",images:[bi("EA","EA-002_0_AS3_VD3_MP6.png"),bi("EA","EA-002_1_AS6_VD6_MP6.png"),bi("EA","EA-002_2_AS9_VD9_MP6.png"),bi("EA","EA-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"EA-003",category:"exterior_architecture",images:[bi("EA","EA-003_0_AS9_VD9_MP1.png"),bi("EA","EA-003_1_AS1_VD1_MP3.png"),bi("EA","EA-003_2_AS3_VD3_MP3.png"),bi("EA","EA-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"EA-004",category:"exterior_architecture",images:[bi("EA","EA-004_0_AS1_VD1_MP9.png"),bi("EA","EA-004_1_AS3_VD3_MP9.png"),bi("EA","EA-004_2_AS6_VD6_MP9.png"),bi("EA","EA-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"OL-001",category:"outdoor_living",images:[bi("OL","OL-001_0_AS1_VD1_MP1.png"),bi("OL","OL-001_1_AS3_VD3_MP1.png"),bi("OL","OL-001_2_AS6_VD6_MP1.png"),bi("OL","OL-001_3_AS9_VD9_MP1.png")],attributes:ji("AS1","AS3","AS6","AS9")},{quadId:"OL-002",category:"outdoor_living",images:[bi("OL","OL-002_0_AS3_VD3_MP6.png"),bi("OL","OL-002_1_AS6_VD6_MP6.png"),bi("OL","OL-002_2_AS9_VD9_MP6.png"),bi("OL","OL-002_3_AS1_VD1_MP9.png")],attributes:ji("AS3","AS6","AS9","AS1")},{quadId:"OL-003",category:"outdoor_living",images:[bi("OL","OL-003_0_AS9_VD9_MP1.png"),bi("OL","OL-003_1_AS1_VD1_MP3.png"),bi("OL","OL-003_2_AS3_VD3_MP3.png"),bi("OL","OL-003_3_AS6_VD6_MP3.png")],attributes:ji("AS9","AS1","AS3","AS6")},{quadId:"OL-004",category:"outdoor_living",images:[bi("OL","OL-004_0_AS1_VD1_MP9.png"),bi("OL","OL-004_1_AS3_VD3_MP9.png"),bi("OL","OL-004_2_AS6_VD6_MP9.png"),bi("OL","OL-004_3_AS9_VD9_MP9.png")],attributes:ji("AS1","AS3","AS6","AS9")}],Ni=30,ki=58,_i=95,Ci=201,Pi=162,Fi=39,Ai=254,Li=249,Mi=231,Ri=248,Ii=250,Ti=252,zi=100,Di=116,Ei=139,Oi=45,Bi=55,qi=72,Hi=255,Gi=255,Wi=255,Ui=34,Ki=197,Vi=94,Yi=[{id:"exterior_architecture",code:"EA",name:"Exterior Architecture"},{id:"living_spaces",code:"LS",name:"Living Spaces"},{id:"dining_spaces",code:"DS",name:"Dining Spaces"},{id:"kitchens",code:"KT",name:"Kitchens"},{id:"family_areas",code:"FA",name:"Family Areas"},{id:"primary_bedrooms",code:"PB",name:"Primary Bedrooms"},{id:"primary_bathrooms",code:"PBT",name:"Primary Bathrooms"},{id:"guest_bedrooms",code:"GB",name:"Guest Bedrooms"},{id:"outdoor_living",code:"OL",name:"Outdoor Living"}],Zi={1:"Avant-Contemporary",2:"Architectural Modern",3:"Curated Minimalism",4:"Nordic Contemporary",5:"Mid-Century Refined",6:"Modern Classic",7:"Classical Contemporary",8:"Formal Classical",9:"Heritage Estate"};function $i(e,t){const n=wi.find(t=>t.quadId===e);return n&&n.images&&n.images[t]?n.images[t]:null}function Qi(e){if(!e)return null;const t=e.split("/").pop(),n=t.match(/AS(\d)/),a=t.match(/VD(\d)/),i=t.match(/MP(\d)/);return n&&a&&i?{as:parseInt(n[1]),vd:parseInt(a[1]),mp:parseInt(i[1])}:null}function Ji(e){return(e-1)/8*4+1}async function Xi(e){return new Promise(t=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{const a=document.createElement("canvas");a.width=n.width,a.height=n.height;a.getContext("2d").drawImage(n,0,0);try{const e=a.toDataURL("image/jpeg",.85);t(e)}catch(Sg){console.warn("Could not load image:",e),t(null)}},n.onerror=()=>{console.warn("Image load error:",e),t(null)},n.src=e})}class er{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.doc=new yi("p","pt","letter"),this.profileP=e,this.profileS=t,this.options=n,this.kycData=n.kycData||null,this.pageWidth=612,this.pageHeight=792,this.margin=36,this.contentWidth=this.pageWidth-2*this.margin;const{data:a,metrics:i}=this.calculateCategoryDataFor(this.profileP);this.categoryData=a,this.overallMetrics=i;const r=e=>{var t,n,a;const i=(null===e||void 0===e||null===(t=e.session)||void 0===t||null===(n=t.profile)||void 0===n?void 0:n.scores)||(null===e||void 0===e||null===(a=e.profile)||void 0===a?void 0:a.scores)||{};return{formality:i.formality||5,warmth:i.warmth||5,drama:i.drama||5,tradition:i.tradition||5,openness:i.openness||5,art_focus:i.art_focus||5}};if(this.profileScoresP=r(this.profileP),this.categoryDataS=null,this.overallMetricsS=null,this.profileScoresS=null,this.hasPartnerData=!1,this.profileS){const{data:e,metrics:t}=this.calculateCategoryDataFor(this.profileS);Object.values(e).some(e=>e.hasSelection)&&(this.categoryDataS=e,this.overallMetricsS=t,this.profileScoresS=r(this.profileS),this.hasPartnerData=!0)}this.currentPage=1,this.totalPages=this.hasPartnerData?5:4}calculateCategoryDataFor(e){const t={};let n=0,a=0,i=0,r=0;if(!e)return{data:{},metrics:{styleEra:2.5,materialComplexity:2.5,moodPalette:2.5,styleLabel:"Transitional"}};Yi.forEach(o=>{const l=function(e,t){var n,a,i,r;const o=e.selections||(null===(n=e.session)||void 0===n?void 0:n.selections)||{},s=wi.filter(e=>e.category===t);for(const c of s){const e=o[c.quadId];if(e&&e.favorites&&e.favorites.length>0)return{quadId:c.quadId,positionIndex:e.favorites[0]}}const l=(null===(a=e.session)||void 0===a||null===(i=a.progress)||void 0===i||null===(r=i[t])||void 0===r?void 0:r.selections)||[];for(const c of l)if(c.selectedIndex>=0&&c.selectedIndex<=3)return{quadId:c.quadId,positionIndex:c.selectedIndex};return null}(e,o.id);if(l){const e=Qi($i(l.quadId,l.positionIndex)),c=function(e,t){const n=Qi($i(e,t));return n?{styleEra:Ji(n.as),materialComplexity:Ji(n.vd),moodPalette:Ji(n.mp)}:{styleEra:2.5,materialComplexity:2.5,moodPalette:2.5}}(l.quadId,l.positionIndex);t[o.id]=s(s({},o),{},{selection:l,metrics:c,asCode:(null===e||void 0===e?void 0:e.as)||5,hasSelection:!0}),n+=c.styleEra,a+=c.materialComplexity,i+=c.moodPalette,r++}else t[o.id]=s(s({},o),{},{selection:null,metrics:{styleEra:2.5,materialComplexity:2.5,moodPalette:2.5},asCode:5,hasSelection:!1})});const o=r>0?{styleEra:n/r,materialComplexity:a/r,moodPalette:i/r,styleLabel:(l=n/r,l<2.5?"Contemporary":l>3.5?"Traditional":"Transitional")}:{styleEra:2.5,materialComplexity:2.5,moodPalette:2.5,styleLabel:"Transitional"};var l;return{data:t,metrics:o}}calculateAlignmentScore(){if(!this.hasPartnerData)return null;let e=0,t=0;if(Yi.forEach(n=>{const a=this.categoryData[n.id],i=this.categoryDataS[n.id];if(null!==a&&void 0!==a&&a.hasSelection&&null!==i&&void 0!==i&&i.hasSelection){const n=Math.abs(a.asCode-i.asCode);e+=n,t++}}),0===t)return null;const n=e/t,a=Math.max(0,100-12.5*n);return Math.round(a)}findDivergences(){if(!this.hasPartnerData)return[];const e=[];return Yi.forEach(t=>{const n=this.categoryData[t.id],a=this.categoryDataS[t.id];if(null!==n&&void 0!==n&&n.hasSelection&&null!==a&&void 0!==a&&a.hasSelection){const i=Math.abs(n.asCode-a.asCode);i>=3&&e.push({category:t.name,categoryCode:t.code,principalAS:n.asCode,secondaryAS:a.asCode,principalLabel:Zi[n.asCode]||"AS".concat(n.asCode),secondaryLabel:Zi[a.asCode]||"AS".concat(a.asCode),difference:i,severity:i>=5?"significant":"notable"})}}),e}async generate(){return this.addPage1Cover(),this.hasPartnerData?(this.doc.addPage(),this.currentPage=2,this.addPartnerAlignmentPage(),this.doc.addPage(),this.currentPage=3,await this.addSelectionsPage([0,1,2,3]),this.doc.addPage(),this.currentPage=4,await this.addSelectionsPage([4,5,6,7]),this.doc.addPage(),this.currentPage=5,await this.addSelectionsPage([8])):(this.doc.addPage(),this.currentPage=2,await this.addSelectionsPage([0,1,2,3]),this.doc.addPage(),this.currentPage=3,await this.addSelectionsPage([4,5,6,7]),this.doc.addPage(),this.currentPage=4,await this.addSelectionsPage([8])),this.doc}getClientName(){var e,t;if(this.options.clientName)return this.options.clientName;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.portfolioContext;return null!==n&&void 0!==n&&n.principalFirstName||null!==n&&void 0!==n&&n.principalLastName?"".concat(n.principalFirstName||""," ").concat(n.principalLastName||"").trim():this.profileP.clientId||this.profileP.clientName||"Client"}getProjectName(){var e,t,n;return(null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t||null===(n=t.projectParameters)||void 0===n?void 0:n.projectName)||""}getLocation(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.projectParameters;return null!==n&&void 0!==n&&n.projectCity||null!==n&&void 0!==n&&n.projectCountry?"".concat(n.projectCity||"",", ").concat(n.projectCountry||"").replace(/^, |, $/g,""):this.options.location||""}getSecondaryName(){var e,t,n;const a=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.portfolioContext;return null!==a&&void 0!==a&&a.secondaryFirstName||null!==a&&void 0!==a&&a.secondaryLastName?"".concat(a.secondaryFirstName||""," ").concat(a.secondaryLastName||"").trim():(null===(n=this.profileS)||void 0===n?void 0:n.clientId)||"Partner"}addPartnerAlignmentPage(){let e=this.margin;this.doc.setFontSize(18),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("Partner Alignment Analysis",this.margin,e),e+=25;const t=this.getClientName(),n=this.getSecondaryName();this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zi,Di,Ei),this.doc.text("Comparing design preferences: ".concat(t," & ").concat(n),this.margin,e),e+=30;const a=this.calculateAlignmentScore();this.doc.setFillColor(Ai,Li,Mi),this.doc.roundedRect(this.margin,e,this.contentWidth,60,8,8,"F"),this.doc.setFontSize(12),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("Overall Design Alignment",this.margin+20,e+25),this.doc.setFontSize(28),this.doc.setTextColor(Ci,Pi,Fi),this.doc.text("".concat(a||0,"%"),this.pageWidth-this.margin-20,e+35,{align:"right"}),this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zi,Di,Ei);const i=a>=80?"Strong alignment - minimal compromise needed":a>=60?"Good alignment - some areas for discussion":a>=40?"Moderate alignment - focused discussions recommended":"Significant divergence - detailed mediation advised";this.doc.text(i,this.margin+20,e+45),e+=80,this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("DNA Axis Comparison",this.margin,e),e+=15,this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zi,Di,Ei),this.doc.setFillColor(Ci,Pi,Fi),this.doc.circle(this.margin+5,e-3,4,"F"),this.doc.text("P = ".concat(t),this.margin+15,e),this.doc.setFillColor(Ni,ki,_i),this.doc.circle(this.margin+150,e-3,4,"F"),this.doc.text("S = ".concat(n),this.margin+160,e),e+=25;const r=this.contentWidth-100;e=this.drawDualSlider(this.margin,e,r,this.overallMetrics.styleEra,this.overallMetricsS.styleEra,"Style Era","Contemporary","Traditional"),e+=30,e=this.drawDualSlider(this.margin,e,r,this.overallMetrics.materialComplexity,this.overallMetricsS.materialComplexity,"Material Complexity","Minimal","Layered"),e+=30,e=this.drawDualSlider(this.margin,e,r,this.overallMetrics.moodPalette,this.overallMetricsS.moodPalette,"Mood Palette","Warm","Cool"),e+=40;const o=this.findDivergences();this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("Flagged Divergences",this.margin,e),e+=8,this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zi,Di,Ei),this.doc.text("Categories where partners differ by 3+ style positions",this.margin,e),e+=20,0===o.length?(this.doc.setFillColor(Ui,Ki,Vi),this.doc.roundedRect(this.margin,e,this.contentWidth,40,6,6,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Hi,Gi,Wi),this.doc.text("No significant divergences detected",this.margin+20,e+25)):o.forEach((a,i)=>{if(e>this.pageHeight-100)return;const r="significant"===a.severity?{r:220,g:38,b:38}:{r:234,g:179,b:8};this.doc.setFillColor(Ri,Ii,Ti),this.doc.roundedRect(this.margin,e,this.contentWidth,55,6,6,"F"),this.doc.setFillColor(r.r,r.g,r.b),this.doc.rect(this.margin,e,4,55,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text(a.category,this.margin+15,e+18),this.doc.setFillColor(r.r,r.g,r.b),this.doc.roundedRect(this.pageWidth-this.margin-80,e+8,70,18,9,9,"F"),this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Hi,Gi,Wi),this.doc.text("".concat(a.difference," positions"),this.pageWidth-this.margin-45,e+20,{align:"center"}),this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Oi,Bi,qi),this.doc.text("".concat(t,": ").concat(a.principalLabel),this.margin+15,e+32),this.doc.text("".concat(n,": ").concat(a.secondaryLabel),this.margin+15,e+44),e+=65}),this.addPageFooter()}drawDualSlider(e,t,n,a,i,r,o,s){const l=10,c=(Math.max(1,Math.min(5,a))-1)/4*n,d=(Math.max(1,Math.min(5,i))-1)/4*n;return this.doc.setFontSize(10),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Oi,Bi,qi),this.doc.text(r,e,t),t+=12,this.doc.setFillColor(226,232,240),this.doc.roundedRect(e,t,n,l,5,5,"F"),this.doc.setFillColor(Ci,Pi,Fi),this.doc.circle(e+c,t+5,8,"F"),this.doc.setFontSize(7),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Hi,Gi,Wi),this.doc.text("P",e+c,t+5+2.5,{align:"center"}),this.doc.setFillColor(Ni,ki,_i),this.doc.circle(e+d,t+5,8,"F"),this.doc.setFontSize(7),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Hi,Gi,Wi),this.doc.text("S",e+d,t+5+2.5,{align:"center"}),this.doc.setFontSize(8),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zi,Di,Ei),this.doc.text(o,e,t+l+12),this.doc.text(s,e+n,t+l+12,{align:"right"}),t+l+20}addPageFooter(){const e=this.pageHeight-25;this.doc.setFontSize(8),this.doc.setTextColor(zi,Di,Ei),this.doc.text((new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),this.margin,e),this.doc.text("Page ".concat(this.currentPage," of ").concat(this.totalPages),this.pageWidth-this.margin,e,{align:"right"})}drawSlider5(e,t,n,a,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";const s=Math.max(1,Math.min(5,a)),l=(s-1)/4*n;return this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Oi,Bi,qi),this.doc.text(i,e,t),this.doc.setTextColor(Ci,Pi,Fi),this.doc.text(s.toFixed(1),e+n+10,t),t+=6,this.doc.setFillColor(226,232,240),this.doc.roundedRect(e,t,n,8,4,4,"F"),l>0&&(this.doc.setFillColor(Ci,Pi,Fi),this.doc.roundedRect(e,t,l,8,4,4,"F")),this.doc.setFillColor(Ni,ki,_i),this.doc.circle(e+l,t+4,6,"F"),r||o?(this.doc.setFontSize(7),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zi,Di,Ei),r&&this.doc.text(r,e,t+8+10),o&&this.doc.text(o,e+n,t+8+10,{align:"right"}),t+8+18):t+8+8}addPage1Cover(){let e=0;this.doc.setFillColor(Ni,ki,_i),this.doc.rect(0,0,this.pageWidth,50,"F"),this.doc.setFontSize(14),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Hi,Gi,Wi),this.doc.text("N4S Your Design Profile",this.margin,32),this.doc.setFont("helvetica","bold"),this.doc.text("Taste Exploration",this.pageWidth/2,32,{align:"center"}),e=65;const t=this.getClientName(),n=this.getProjectName(),a=this.getLocation();this.doc.setFontSize(10),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Oi,Bi,qi);const i="Client:  ";let r="".concat(i).concat(t);if(n&&(r+="     Project: ".concat(n)),a&&(r+="     Location: ".concat(a)),this.doc.text(r,this.margin,e),this.hasPartnerData){const t=this.getSecondaryName();e+=14;const n=this.doc.getTextWidth(i);this.doc.text(t,this.margin+n,e)}e+=20,this.doc.setFillColor(Ai,Li,Mi),this.doc.roundedRect(this.margin,e,this.contentWidth,50,6,6,"F"),this.doc.setFontSize(9),this.doc.setTextColor(zi,Di,Ei),this.doc.text("Your overall design aesthetic",this.margin+12,e+18),this.doc.setFontSize(24),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text(this.overallMetrics.styleLabel,this.pageWidth/2,e+35,{align:"center"}),e+=65,this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("Design DNA: Style Axes",this.margin,e),e+=25;e=this.drawSlider5(this.margin,e,200,this.overallMetrics.styleEra,"Style Era","Contemporary","Traditional"),e+=5,e=this.drawSlider5(this.margin,e,200,this.overallMetrics.materialComplexity,"Material Complexity","Minimal","Layered"),e+=5,e=this.drawSlider5(this.margin,e,200,this.overallMetrics.moodPalette,"Mood Palette","Warm","Cool"),e+=15,this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("Style Preferences",this.margin,e),e+=18;const o=this.contentWidth/2-20;this.doc.setFontSize(10),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Oi,Bi,qi),this.doc.text("Regional Influences",this.margin,e),this.doc.text("Material Preferences",this.margin+o+40,e),e+=14,this.doc.setFont("helvetica","normal"),this.doc.setFontSize(9);["European Contemporary","California Modern","Mediterranean"].forEach((t,n)=>{this.doc.text("\u2022 ".concat(t),this.margin,e+12*n)}),["Natural Stone","Warm Woods","Organic Textures"].forEach((t,n)=>{this.doc.text("\u2022 ".concat(t),this.margin+o+40,e+12*n)}),e+=50,this.doc.setFillColor(Ni,ki,_i),this.doc.roundedRect(this.margin,e,this.contentWidth,24,4,4,"F"),this.doc.rect(this.margin,e+16,this.contentWidth,8,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Hi,Gi,Wi),this.doc.text("Design Preferences",this.margin+10,e+16),e+=28,this.doc.setFillColor(Ri,Ii,Ti),this.doc.roundedRect(this.margin,e,this.contentWidth,180,4,4,"F");const s=e+10,l=(this.contentWidth-30)/3;this.doc.setFontSize(9),this.doc.setTextColor(zi,Di,Ei),this.doc.text("Style Direction",this.margin+15,s+12),this.doc.text("Formality",this.margin+l+20,s+12),this.doc.text("Mood",this.margin+2*l+25,s+12),this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text(this.overallMetrics.styleLabel,this.margin+15,s+28),this.doc.text("Relaxed",this.margin+l+20,s+28),this.doc.text("Warm",this.margin+2*l+25,s+28);const c=s+50,d=(this.contentWidth-40)/3;[{label:"Tradition",value:this.profileScoresP.tradition||(this.overallMetrics.styleEra-1)/4*9+1},{label:"Formality",value:this.profileScoresP.formality},{label:"Warmth",value:this.profileScoresP.warmth},{label:"Drama",value:this.profileScoresP.drama},{label:"Openness",value:this.profileScoresP.openness},{label:"Art Focus",value:this.profileScoresP.art_focus}].forEach((e,t)=>{const n=t%3,a=Math.floor(t/3),i=this.margin+10+n*(d+10),r=c+60*a;this.doc.setFillColor(Hi,Gi,Wi),this.doc.roundedRect(i,r,d,50,4,4,"F"),this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Oi,Bi,qi),this.doc.text(e.label,i+8,r+14),this.doc.setTextColor(Ci,Pi,Fi),this.doc.text(e.value.toFixed(1),i+d-25,r+14);const o=r+28,s=d-16,l=(e.value-1)/9*s;this.doc.setFillColor(226,232,240),this.doc.roundedRect(i+8,o,s,6,3,3,"F"),this.doc.setFillColor(Ci,Pi,Fi),this.doc.roundedRect(i+8,o,l,6,3,3,"F"),this.doc.setFillColor(Ni,ki,_i),this.doc.circle(i+8+l,o+3,4,"F")}),e=c+130,null===this.profileS&&this.options.partnerName&&(this.doc.setFontSize(9),this.doc.setTextColor(221,107,32),this.doc.text("Note: ".concat(this.options.partnerName," has not completed Taste Exploration..."),this.margin,e),e+=20),e+=10;const u=(this.contentWidth-30)/4;[{title:"Property Configuration",items:this.getPropertyConfigItems()},{title:"Household Composition",items:this.getHouseholdItems()},{title:"Lifestyle",items:this.getLifestyleItems()},{title:"Wellness Program",items:this.getWellnessItems()}].forEach((t,n)=>{const a=this.margin+n*(u+10);this.doc.setFillColor(Ri,Ii,Ti),this.doc.roundedRect(a,e,u,70,4,4,"F"),this.doc.setFontSize(8),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text(t.title,a+6,e+14),this.doc.setFont("helvetica","normal"),this.doc.setFontSize(7),this.doc.setTextColor(Oi,Bi,qi),t.items.slice(0,3).forEach((t,n)=>{this.doc.text(t,a+6,e+28+12*n)})}),e+=85;const h=this.getSelectedAmenities();if(h.length>0){this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("Selected Amenities",this.margin,e),e+=14;let t=this.margin;h.forEach(n=>{const a=this.doc.getTextWidth(n)+16;t+a>this.pageWidth-this.margin&&(t=this.margin,e+=20),this.doc.setFillColor(Ui,Ki,Vi),this.doc.roundedRect(t,e-10,a,16,8,8,"F"),this.doc.setFontSize(8),this.doc.setTextColor(Hi,Gi,Wi),this.doc.text(n,t+8,e),t+=a+8})}this.addPageFooter()}async addSelectionsPage(e){this.doc.setFillColor(248,250,252),this.doc.rect(0,0,this.pageWidth,this.pageHeight,"F");let t=this.margin;this.doc.setFontSize(16),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("Your Selections",this.margin,t),t+=14,this.doc.setFontSize(10),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zi,Di,Ei),this.doc.text("The images you selected during Taste Exploration",this.margin,t),t+=25;const n=(this.contentWidth-20)/2,a=.625*n,i=a+130,r=1===e.length;for(let o=0;o<e.length;o++){const s=e[o];if(s>=Yi.length)continue;const l=Yi[s],c=this.categoryData[l.id];let d,u,h,p;if(r?(h=(this.pageWidth-n)/2,p=t):(d=o%2,u=Math.floor(o/2),h=this.margin+d*(n+20),p=t+u*(i+20)),this.doc.setFillColor(Ri,Ii,Ti),this.doc.roundedRect(h,p,n,i,6,6,"F"),this.doc.setFillColor(226,232,240),this.doc.roundedRect(h+8,p+8,n-16,a,4,4,"F"),c.selection){const e=$i(c.selection.quadId,c.selection.positionIndex);if(e)try{const t=await Xi(e);t&&this.doc.addImage(t,"JPEG",h+8,p+8,n-16,a)}catch(Sg){}}const m=p+8+a;this.doc.setFillColor(Ni,ki,_i),this.doc.rect(h+8,m,n-16,24,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Hi,Gi,Wi),this.doc.text(l.name,h+n/2,m+16,{align:"center"});let f=m+42;this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ni,ki,_i),this.doc.text("Design DNA",h+12,f),f+=12;const g=n-60,v=c.metrics;this.drawCategorySlider(h+12,f,g,v.styleEra,"Style Era","Contemporary","Traditional"),f+=24,this.drawCategorySlider(h+12,f,g,v.materialComplexity,"Material Complexity","Minimal","Layered"),f+=24,this.drawCategorySlider(h+12,f,g,v.moodPalette,"Mood Palette","Warm","Cool")}this.addPageFooter()}drawCategorySlider(e,t,n,a,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";const s=Math.max(1,Math.min(5,a)),l=(s-1)/4*n;this.doc.setFontSize(7),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Oi,Bi,qi),this.doc.text(i,e,t),this.doc.setTextColor(Ci,Pi,Fi),this.doc.text(s.toFixed(1),e+n+8,t);const c=t+4;this.doc.setFillColor(226,232,240),this.doc.roundedRect(e,c,n,4,2,2,"F"),l>0&&(this.doc.setFillColor(Ci,Pi,Fi),this.doc.roundedRect(e,c,l,4,2,2,"F")),this.doc.setFillColor(Ni,ki,_i),this.doc.circle(e+l,c+2,3,"F"),(r||o)&&(this.doc.setFontSize(6),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zi,Di,Ei),r&&this.doc.text(r,e,c+12),o&&this.doc.text(o,e+n,c+12,{align:"right"}))}getPropertyConfigItems(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.projectParameters;return n?[n.targetGSF?"".concat(n.targetGSF.toLocaleString()," SF"):"",n.bedroomCount?"".concat(n.bedroomCount," Bedrooms"):"",n.bathroomCount?"".concat(n.bathroomCount," Bathrooms"):""].filter(Boolean):["No data"]}getHouseholdItems(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.familyHousehold;if(!n)return["No data"];const a=[];if(n.familyMembers&&n.familyMembers.length>0){a.push("".concat(n.familyMembers.length," Family Members"));const e=n.familyMembers.filter(e=>["child","young-child","teenager"].includes(e.role));e.length>0&&a.push("".concat(e.length," Children"))}if(n.staffingLevel&&"none"!==n.staffingLevel){const e="live_in"===n.staffingLevel?"".concat(n.liveInStaff||1," Live-in Staff"):"full_time"===n.staffingLevel?"Full-Time Staff":"Part-Time Staff";a.push(e)}return n.pets&&a.push("Has Pets"),a.length>0?a:["No data"]}getLifestyleItems(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.lifestyleLiving;if(!n)return["No data"];const a=[];if(n.entertainingStyle){const e={formal:"Formal Entertaining",casual:"Casual Entertaining",both:"Both Formal & Casual"};a.push(e[n.entertainingStyle]||n.entertainingStyle)}if(n.entertainingFrequency){const e={rarely:"Entertains Rarely",monthly:"Entertains Monthly",weekly:"Entertains Weekly",daily:"Entertains Daily"};a.push(e[n.entertainingFrequency]||"")}if(n.workFromHome&&"never"!==n.workFromHome){const e={sometimes:"WFH 1-2 days",often:"WFH 3-4 days",always:"Full Remote"};a.push(e[n.workFromHome]||"Works from Home")}return a.length>0?a:["No data"]}getWellnessItems(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.lifestyleLiving;if(null===n||void 0===n||!n.wellnessPriorities||0===n.wellnessPriorities.length)return["No data"];const a={gym:"Home Gym",pool:"Pool",spa:"Spa/Sauna",yoga:"Yoga Studio",massage:"Massage Room",meditation:"Meditation Space","cold-plunge":"Cold Plunge"};return n.wellnessPriorities.slice(0,3).map(e=>a[e]||e)}getSelectedAmenities(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.spaceRequirements;return null!==n&&void 0!==n&&n.amenities?n.amenities.slice(0,6):[]}download(e,t){const n=t||this.getClientName(),a=e||"N4S-Design-Profile-".concat(n.replace(/\s+/g,"-"),".pdf");this.doc.save(a)}openInNewTab(){const e=this.doc.output("blob"),t=URL.createObjectURL(e);window.open(t,"_blank")}getBlob(){return this.doc.output("blob")}getBase64(){return this.doc.output("datauristring")}}async function tr(e){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n=new er(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});await n.generate(),n.download(null,t)}async function nr(e){const t=new er(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});await t.generate(),t.openInNewTab()}const ar=d("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),ir=d("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),rr=d("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]),or=d("TreeDeciduous",[["path",{d:"M8 19h8a4 4 0 0 0 3.8-2.8 4 4 0 0 0-1.6-4.5c1-1.1 1-2.7.4-4-.7-1.2-2.2-2-3.6-1.7a3 3 0 0 0-3-3 3 3 0 0 0-3 3c-1.4-.2-2.9.5-3.6 1.7-.7 1.3-.5 2.9.4 4a4 4 0 0 0-1.6 4.5A4 4 0 0 0 8 19Z",key:"12ivfl"}],["path",{d:"M12 19v3",key:"npa21l"}]]),sr=d("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),lr=d("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),cr=d("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),dr=(e,t)=>{const n={warmth:0,formality:0,drama:0,tradition:0,openness:0,art_focus:0,materials:{}};let a=0;Object.entries(e).forEach(e=>{let[t,i]=e;const r=wi.find(e=>e.quadId===t);if(!r||!r.attributes||!i)return;const{favorites:o=[],least:s}=i;o.forEach((e,t)=>{const i=0===t?4:2.5;a+=Math.abs(i),Object.entries(r.attributes).forEach(t=>{let[a,r]=t;if(Array.isArray(r)&&void 0!==r[e])if("material_focus"===a){const t=r[e];n.materials[t]=(n.materials[t]||0)+i}else void 0!==n[a]&&(n[a]+=r[e]*i)})}),null!==s&&void 0!==s&&(a+=Math.abs(-2),Object.entries(r.attributes).forEach(e=>{let[t,a]=e;if(Array.isArray(a)&&void 0!==a[s])if("material_focus"===t){const e=a[s];n.materials[e]=(n.materials[e]||0)+-2}else void 0!==n[t]&&(n[t]+=-2*a[s])}))});const i={};["warmth","formality","drama","tradition","openness","art_focus"].forEach(e=>{i[e]=a>0?Math.min(10,Math.max(1,Math.round(10*(n[e]/a+5))/10)):5});const r=Object.entries(n.materials).filter(e=>{let[t,n]=e;return n>0}).sort((e,t)=>t[1]-e[1]).slice(0,5).map(e=>{let[t]=e;return t});return{scores:i,topMaterials:r,completedQuads:Object.keys(e).length,skippedQuads:t.length,totalQuads:wi.length}},ur={living_spaces:u,dining_spaces:ar,kitchens:ar,primary_bedrooms:ir,primary_bathrooms:rr,guest_bedrooms:ir,family_areas:u,exterior_architecture:L,outdoor_living:or},hr=e=>{let{quad:t,selections:n,onSelectionChange:i,onSkip:r,onConfirm:o}=e;const[l,c]=(0,a.useState)({}),{favorites:d=[],least:u=null}=n||{},h=2===d.length&&null!==u;return(0,T.jsxs)("div",{className:"taste-quad",children:[(0,T.jsxs)("div",{className:"taste-quad__instruction ".concat(h?"taste-quad__instruction--complete":""),children:[0===d.length?"Select your 2 favorite images":1===d.length?"Select 1 more favorite":null===u?"Now select your least favorite":"Ready to confirm",(0,T.jsx)("span",{className:"taste-quad__tap-hint",children:"Tap a selection to change it"})]}),(0,T.jsx)("div",{className:"taste-quad__grid",children:[0,1,2,3].map(e=>{const n=(e=>d.includes(e)?0===d.indexOf(e)?"favorite-1":"favorite-2":u===e?"least":null)(e);return(0,T.jsxs)("div",{className:"taste-quad__image-wrapper ".concat(n?"taste-quad__image-wrapper--".concat(n):""),onClick:()=>(e=>{d.includes(e)?i({favorites:d.filter(t=>t!==e),least:u}):u!==e?d.length<2?i({favorites:[...d,e],least:u}):null===u&&i({favorites:d,least:e}):i({favorites:d,least:null})})(e),children:[l[e]?(0,T.jsxs)("div",{className:"taste-quad__image-placeholder",children:[(0,T.jsx)(Pe,{size:32}),(0,T.jsx)("span",{children:"Image unavailable"})]}):(0,T.jsx)("img",{src:t.images[e],alt:"Option ".concat(String.fromCharCode(65+e)),className:"taste-quad__image",onError:()=>(e=>{c(t=>s(s({},t),{},{[e]:!0}))})(e),loading:"lazy"}),(0,T.jsx)("div",{className:"taste-quad__image-label",children:String.fromCharCode(65+e)}),"favorite-1"===n&&(0,T.jsxs)("div",{className:"taste-quad__selection-badge taste-quad__selection-badge--fav1",children:[(0,T.jsx)(Se,{size:20})," 1st"]}),"favorite-2"===n&&(0,T.jsxs)("div",{className:"taste-quad__selection-badge taste-quad__selection-badge--fav2",children:[(0,T.jsx)(Se,{size:20})," 2nd"]}),"least"===n&&(0,T.jsx)("div",{className:"taste-quad__selection-badge taste-quad__selection-badge--least",children:(0,T.jsx)(sr,{size:20})})]},e)})}),(0,T.jsxs)("div",{className:"taste-quad__actions",children:[(0,T.jsxs)("button",{className:"taste-quad__skip-btn",onClick:r,title:"None of these resonate with me",children:[(0,T.jsx)(y,{size:16})," Skip - Not My Style"]}),(d.length>0||null!==u)&&(0,T.jsxs)("button",{className:"taste-quad__reset-btn",onClick:()=>i({favorites:[],least:null}),title:"Clear all selections",children:[(0,T.jsx)(lr,{size:16})," Reset"]}),(0,T.jsxs)("button",{className:"taste-quad__confirm-btn ".concat(h?"taste-quad__confirm-btn--ready":""),onClick:o,disabled:!h,children:[(0,T.jsx)(cr,{size:16})," Confirm & Continue"]})]})]})},pr=e=>{let{category:t,categoryIndex:n,totalCategories:a,quadCount:i,onContinue:r,isFirstCategory:o}=e;const s=xi[t],l=ur[t]||L;return(0,T.jsxs)("div",{className:"taste-divider",children:[(0,T.jsxs)("div",{className:"taste-divider__progress",children:["Category ",n+1," of ",a]}),(0,T.jsx)("div",{className:"taste-divider__icon",style:{backgroundColor:s.color},children:(0,T.jsx)(l,{size:48})}),(0,T.jsx)("h2",{className:"taste-divider__title",children:s.name}),(0,T.jsx)("p",{className:"taste-divider__description",children:s.description}),(0,T.jsx)("div",{className:"taste-divider__info",children:(0,T.jsxs)("span",{children:[i," comparison",i>1?"s":""," in this category"]})}),o?(0,T.jsxs)("div",{className:"taste-divider__instructions",children:[(0,T.jsx)("h4",{children:"How It Works"}),(0,T.jsxs)("div",{className:"taste-divider__instruction-steps",children:[(0,T.jsxs)("div",{className:"taste-divider__step",children:[(0,T.jsx)("span",{className:"taste-divider__step-icon taste-divider__step-icon--fav",children:"\u2764\ufe0f"}),(0,T.jsxs)("span",{children:[(0,T.jsx)("strong",{children:"Step 1:"})," Tap your ",(0,T.jsx)("strong",{children:"2 favorite"})," images"]})]}),(0,T.jsxs)("div",{className:"taste-divider__step",children:[(0,T.jsx)("span",{className:"taste-divider__step-icon taste-divider__step-icon--least",children:"\ud83d\udc4e"}),(0,T.jsxs)("span",{children:[(0,T.jsx)("strong",{children:"Step 2:"})," Tap your ",(0,T.jsx)("strong",{children:"least favorite"})," image"]})]}),(0,T.jsxs)("div",{className:"taste-divider__step",children:[(0,T.jsx)("span",{className:"taste-divider__step-icon taste-divider__step-icon--confirm",children:"\u2713"}),(0,T.jsxs)("span",{children:[(0,T.jsx)("strong",{children:"Step 3:"})," Press ",(0,T.jsx)("strong",{children:"Confirm"})," to continue"]})]})]}),(0,T.jsx)("p",{className:"taste-divider__tip",children:"\ud83d\udca1 You can tap any selection to change it before confirming"})]}):(0,T.jsxs)("p",{className:"taste-divider__instruction",children:["Select your ",(0,T.jsx)("strong",{children:"2 favorites"}),", then your ",(0,T.jsx)("strong",{children:"least favorite"}),", and confirm."]}),(0,T.jsxs)("button",{className:"taste-divider__btn",onClick:r,children:["Begin ",s.name]})]})},mr=e=>{let{selections:t,skipped:n,onRestart:i}=e;const r=(0,a.useMemo)(()=>dr(t,n),[t,n]),o=e=>e>=8?"High":e>=6?"Moderate-High":e>=4?"Moderate":e>=2?"Moderate-Low":"Low";return(0,T.jsxs)("div",{className:"taste-results",children:[(0,T.jsxs)("div",{className:"taste-results__header",children:[(0,T.jsx)(cr,{size:48,className:"taste-results__icon"}),(0,T.jsx)("h2",{children:"Taste Exploration Complete"}),(0,T.jsx)("p",{children:"Your aesthetic preferences have been captured"})]}),(0,T.jsxs)("div",{className:"taste-results__stats",children:[(0,T.jsxs)("div",{className:"taste-results__stat",children:[(0,T.jsx)("span",{className:"taste-results__stat-value",children:r.completedQuads}),(0,T.jsx)("span",{className:"taste-results__stat-label",children:"Quads Ranked"})]}),(0,T.jsxs)("div",{className:"taste-results__stat",children:[(0,T.jsx)("span",{className:"taste-results__stat-value",children:r.skippedQuads}),(0,T.jsx)("span",{className:"taste-results__stat-label",children:"Skipped"})]})]}),(0,T.jsxs)("div",{className:"taste-results__profile",children:[(0,T.jsx)("h3",{children:"Your Design Profile"}),(0,T.jsx)("div",{className:"taste-results__axes",children:Object.entries(r.scores).map(e=>{let[t,n]=e;return(0,T.jsxs)("div",{className:"taste-results__axis",children:[(0,T.jsxs)("div",{className:"taste-results__axis-header",children:[(0,T.jsx)("span",{className:"taste-results__axis-name",children:t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,T.jsxs)("span",{className:"taste-results__axis-value",children:[n,"/10"]})]}),(0,T.jsx)("div",{className:"taste-results__axis-bar",children:(0,T.jsx)("div",{className:"taste-results__axis-fill",style:{width:"".concat(10*n,"%")}})}),(0,T.jsx)("span",{className:"taste-results__axis-label",children:o(n)})]},t)})}),r.topMaterials.length>0&&(0,T.jsxs)("div",{className:"taste-results__materials",children:[(0,T.jsx)("h4",{children:"Material Affinities"}),(0,T.jsx)("div",{className:"taste-results__material-tags",children:r.topMaterials.map(e=>(0,T.jsx)("span",{className:"taste-results__material-tag",children:e.replace(/_/g," ")},e))})]})]}),(0,T.jsxs)("button",{className:"taste-results__restart-btn",onClick:i,children:[(0,T.jsx)(lr,{size:16})," Start Over"]})]})},fr=e=>{let{clientName:t,respondentType:n,onComplete:i,onBack:r}=e;const o=(0,a.useMemo)(()=>{const e=[];let t=0;return Si.forEach((n,a)=>{const i=wi.filter(e=>e.category===n);0!==i.length&&(e.push({type:"divider",category:n,categoryIndex:a,quadCount:i.length}),i.forEach(n=>{e.push({type:"quad",quad:n,globalIndex:t++})}))}),e},[]),l=Si.filter(e=>wi.some(t=>t.category===e)).length,[c,d]=(0,a.useState)(0),[u,h]=(0,a.useState)({}),[p,m]=(0,a.useState)([]),[f,g]=(0,a.useState)(!1),v=o[c],y=wi.length,b=Object.keys(u).length+p.length,x=Math.round(b/y*100),S=(0,a.useCallback)((e,t)=>{h(n=>s(s({},n),{},{[e]:t}))},[]),j=(0,a.useCallback)(()=>{if(c<o.length-1)d(e=>e+1);else if(g(!0),i){const e=dr(u,p);i({selections:u,skipped:p,profile:e,completedAt:(new Date).toISOString()})}},[c,o.length,u,p,i]),w=(0,a.useCallback)(()=>{c>0&&d(e=>e-1)},[c]),N=(0,a.useCallback)(e=>{m(t=>[...t,e]),h(t=>{const n=s({},t);return delete n[e],n}),j()},[j]),k=(0,a.useCallback)(e=>{var t;const n=u[e];n&&2===(null===(t=n.favorites)||void 0===t?void 0:t.length)&&null!==n.least&&j()},[u,j]),_=()=>{d(0),h({}),m([]),g(!1)};return f?(0,T.jsx)("div",{className:"taste-exploration",children:(0,T.jsx)(mr,{selections:u,skipped:p,onRestart:_})}):(0,T.jsxs)("div",{className:"taste-exploration",children:[(0,T.jsxs)("div",{className:"taste-exploration__header",children:[(0,T.jsxs)("div",{className:"taste-exploration__info",children:[(0,T.jsxs)("span",{className:"taste-exploration__client",children:[t||"Client"," \u2022 ","secondary"===n?"Secondary":"Principal"]}),(0,T.jsx)("div",{className:"taste-exploration__progress-bar",children:(0,T.jsx)("div",{className:"taste-exploration__progress-fill",style:{width:"".concat(x,"%")}})}),(0,T.jsxs)("span",{className:"taste-exploration__progress-text",children:[b," of ",y," complete (",x,"%)"]})]}),r&&(0,T.jsxs)("button",{className:"taste-exploration__back-btn",onClick:r,children:[(0,T.jsx)(_e,{size:20})," Exit"]})]}),(0,T.jsxs)("div",{className:"taste-exploration__content",children:["divider"===(null===v||void 0===v?void 0:v.type)&&(0,T.jsx)(pr,{category:v.category,categoryIndex:v.categoryIndex,totalCategories:l,quadCount:v.quadCount,onContinue:j,isFirstCategory:0===v.categoryIndex}),"quad"===(null===v||void 0===v?void 0:v.type)&&(0,T.jsx)(hr,{quad:v.quad,selections:u[v.quad.quadId]||{favorites:[],least:null},onSelectionChange:e=>S(v.quad.quadId,e),onSkip:()=>N(v.quad.quadId),onConfirm:()=>k(v.quad.quadId)})]}),"quad"===(null===v||void 0===v?void 0:v.type)&&(0,T.jsx)("div",{className:"taste-exploration__nav taste-exploration__nav--simple",children:(0,T.jsxs)("button",{className:"taste-exploration__nav-btn",onClick:w,disabled:0===c,children:[(0,T.jsx)(_e,{size:20})," Previous"]})})]})},gr="n4s_taste_profile_",vr=[{id:"AS1",name:"Avant-Contemporary",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045989/AS1_tpnuxa.png",features:["Sculptural, experimental massing; asymmetry and bold cantilevers.","Parametric or faceted fa\xe7ade moves; deep reveals and dramatic shadow play.","High-contrast material palette (metal, glass, monolithic stone/concrete).",'"Statement" architecture: kinetic screens, expressive structure, theatrical lighting.'],appeal:"Attracts clients drawn to bold artistic expression, avant-garde culture, and design as spectacle."},{id:"AS2",name:"Architectural Modern",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045988/AS2_ty6rnh.png",features:["Clean, minimalist volumetric forms, often flat roofs and ribbon glazing.","Refined material joints\u2014flush details, frameless glass, concealed flashings.",'Emphasis on "honest" structure (exposed steel, board-formed concrete, natural wood).',"Landscape seamlessly merges with architecture via courtyards and indoor-outdoor flow."],appeal:"Speaks to clients who value intellectual rigor, craftsmanship transparency, and edited, gallery-like interiors."},{id:"AS3",name:"Curated Minimalism",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045989/AS3_vwoca5.png",features:["Simple rectilinear massing with low-profile roofs or subtle flat roof parapets.","White/off-white palette with textured plaster, lime wash, bleached wood, or matte stone.","Furniture and d\xe9cor as focal points; architecture recedes to a serene backdrop.","Light-wells, internal courtyards, and tranquil water features enhance calm ambience."],appeal:"Resonates with clients seeking sanctuary from visual noise\u2014wellness-minded, art collectors, or contemplative personalities."},{id:"AS4",name:"Nordic Contemporary",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045988/AS4_kdptrm.png",features:["Warm-wood cladding combined with dark metal or stone accents; pitched or shed roofs.","Large, carefully placed windows framing views; deep eaves and sheltered entries.",'Cozy, "hygge-inspired" interiors\u2014tactile textiles, fireplaces, natural light modulation.',"Integration with landscape: timber terraces, evergreen planting, stone pathways."],appeal:"Attracts those who want warmth without fuss\u2014nature lovers, families desiring comfort, and clients from colder climates."},{id:"AS5",name:"Mid-Century Refined",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045989/AS5_b5xgik.png",features:["Low-slung profiles, butterfly/gable roofs, and rhythmic post-and-beam structure.","Floor-to-ceiling glass walls blurring inside-out; open-plan living.","Mix of natural materials (teak, walnut, stone, leather) with period-correct detailing.","Restored or reimagined vintage furniture; curated art pieces from the 1950s\u201370s."],appeal:"Draws collectors and design-history enthusiasts who appreciate authenticity, vintage provenance, and understated glamour."},{id:"AS6",name:"Modern Classic",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045988/AS6_kdudr2.png",features:["Symmetrical fa\xe7ades with simplified classical proportions\u2014no heavy ornamentation.","Warm whites, limestones, and metal accents; standing-seam roofs or simple parapets.","Interiors balance traditional layouts with contemporary finishes.","Timeless elegance: paneled walls meet sleek cabinetry and curated antiques."],appeal:"Appeals to clients who want enduring elegance without flash\u2014often older wealth, diplomats, or those comfortable in traditional social settings."},{id:"AS7",name:"Classical Contemporary",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045987/AS7_csfm3r.png",features:["Classical motifs (columns, pediments, cornices) rendered in stone or stucco; updated scale.","Grand entry sequences with proportioned doors, sidelights, and fanlights.","Formal interiors\u2014high ceilings, crown moldings, wainscoting\u2014paired with current fabrics.","Gardens reference classical landscape traditions: symmetry, hedges, sculpture."],appeal:"Resonates with clients who value tradition, family heritage, and a visible sense of status rooted in historical continuity."},{id:"AS8",name:"Formal Classical",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045990/AS8_emtr7x.png",features:["Full classical vocabulary: Doric/Ionic columns, entablatures, balustrades, hipped slate roofs.","Limestone, brick, or rendered masonry; ornate ironwork and stately porte-coch\xe8res.","Enfilade room sequences; grand staircases, paneled libraries, and ballroom-scale spaces.","Formal gardens with parterre beds, fountains, and axial sight lines."],appeal:"Attracts those seeking overt prestige\u2014Old World aristocracy, philanthropists, or clients who host grand social and ceremonial events."},{id:"AS9",name:"Heritage Estate",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045990/AS9_s3btos.png",features:["Estate scale and layered historic character (manor, chateau, country house cues).","Deep-set windows, steep roofs, chimneys; materials with patina (stone, slate, brick).","Picturesque composition: wings, garden walls, service elements, inherited complexity.","Landscape is integral\u2014drives, hedges, gardens\u2014projecting longevity and legacy."],appeal:"Appeals to clients who want generational gravitas\u2014an estate that feels established, storied, and permanently valuable."}],yr=e=>{if(!e)return null;try{const t=localStorage.getItem("".concat(gr).concat(e));return t?JSON.parse(t):null}catch(Sg){return console.error("Error loading profile:",Sg),null}},br=(e,t)=>{if(!e)return null;try{const n=s(s({},t),{},{clientId:e,savedAt:(new Date).toISOString()});return localStorage.setItem("".concat(gr).concat(e),JSON.stringify(n)),n}catch(Sg){return console.error("Error saving profile:",Sg),null}},xr=e=>{var t,n;if(!e)return"not_started";if(e.completedAt||null!==(t=e.session)&&void 0!==t&&t.completedAt)return"complete";if(null!==(n=e.session)&&void 0!==n&&n.progress){const t=Object.values(e.session.progress).some(e=>e.completedQuads>0);return t?"in_progress":"not_started"}return e.selections&&Object.keys(e.selections).length>0?"complete":"not_started"},Sr=()=>{const[e,t]=(0,a.useState)(0),n=Math.ceil(vr.length/2),i=vr[2*e],r=vr[2*e+1],o=e=>{let{style:t}=e;if(!t)return null;const n=Math.ceil(t.features.length/2),a=t.features.slice(0,n),i=t.features.slice(n);return(0,T.jsxs)("div",{className:"style-card",children:[(0,T.jsx)("div",{className:"style-card__image-container",children:(0,T.jsx)("img",{src:t.image,alt:t.name,className:"style-card__image"})}),(0,T.jsx)("h4",{className:"style-card__title",children:t.name}),(0,T.jsxs)("div",{className:"style-card__features",children:[(0,T.jsx)("ul",{className:"style-card__feature-list",children:a.map((e,t)=>(0,T.jsx)("li",{children:e},t))}),(0,T.jsx)("ul",{className:"style-card__feature-list",children:i.map((e,t)=>(0,T.jsx)("li",{children:e},t))})]}),(0,T.jsx)("p",{className:"style-card__appeal",children:t.appeal})]})};return(0,T.jsxs)("div",{className:"arch-carousel",children:[(0,T.jsx)("button",{onClick:()=>t((e-1+n)%n),className:"arch-carousel__btn arch-carousel__btn--prev",children:"\u2039"}),(0,T.jsxs)("div",{className:"arch-carousel__cards",children:[(0,T.jsx)(o,{style:i}),(0,T.jsx)(o,{style:r})]}),(0,T.jsx)("button",{onClick:()=>t((e+1)%n),className:"arch-carousel__btn arch-carousel__btn--next",children:"\u203a"}),(0,T.jsx)("div",{className:"arch-carousel__dots",children:vr.map((t,n)=>(0,T.jsx)("span",{className:"arch-carousel__dot ".concat(n>=2*e&&n<2*e+2?"active":"")},n))})]})},jr=e=>{let{clientId:t,name:n,profile:a,status:i,onLaunch:r,isPrimary:o}=e;return(0,T.jsxs)("div",{className:"profile-card ".concat(o?"profile-card--primary":"profile-card--secondary"),children:[(0,T.jsxs)("div",{className:"profile-card__header",children:[(0,T.jsx)("span",{className:"profile-card__badge",children:o?"P":"S"}),(0,T.jsx)("span",{className:"profile-card__name",children:n||t})]}),(0,T.jsx)("div",{className:"profile-card__status",style:{color:{not_started:"#94a3b8",in_progress:"#f59e0b",complete:"#10b981"}[i]},children:{not_started:"Not Started",in_progress:"In Progress",complete:"Complete"}[i]}),"complete"!==i&&(0,T.jsxs)("button",{className:"profile-card__btn",onClick:()=>r(o?"principal":"secondary"),children:["in_progress"===i?"Continue":"Start"," Taste Exploration"]}),"complete"===i&&(null===a||void 0===a?void 0:a.session)&&(0,T.jsx)("div",{className:"profile-card__summary",children:(0,T.jsxs)("small",{children:["Completed ",new Date(a.session.completedAt).toLocaleDateString()]})})]})},wr=e=>{let{label:t,value:n,leftLabel:a,rightLabel:i,max:r=5}=e;const o=(n-1)/(r-1)*100;return(0,T.jsxs)("div",{className:"dna-slider",children:[(0,T.jsx)("div",{className:"dna-slider__label",children:t}),(0,T.jsx)("div",{className:"dna-slider__track",children:(0,T.jsx)("div",{className:"dna-slider__marker",style:{left:"".concat(o,"%")}})}),(0,T.jsxs)("div",{className:"dna-slider__labels",children:[(0,T.jsx)("span",{children:a}),(0,T.jsx)("span",{children:i})]})]})},Nr=e=>{let{label:t,valueP:n,valueS:a,leftLabel:i,rightLabel:r,principalName:o,secondaryName:s}=e;const l=(n||2.5)/5*100,c=(a||2.5)/5*100;return(0,T.jsxs)("div",{className:"comparison-slider",children:[(0,T.jsx)("div",{className:"comparison-slider__header",children:(0,T.jsx)("span",{className:"comparison-slider__label",children:t})}),(0,T.jsxs)("div",{className:"comparison-slider__track-container",children:[(0,T.jsxs)("div",{className:"comparison-slider__track",children:[(0,T.jsx)("div",{className:"comparison-slider__marker comparison-slider__marker--principal",style:{left:"".concat(l,"%")},title:"".concat(o||"Principal",": ").concat(null===n||void 0===n?void 0:n.toFixed(1))}),(0,T.jsx)("div",{className:"comparison-slider__marker comparison-slider__marker--secondary",style:{left:"".concat(c,"%")},title:"".concat(s||"Secondary",": ").concat(null===a||void 0===a?void 0:a.toFixed(1))})]}),(0,T.jsxs)("div",{className:"comparison-slider__labels",children:[(0,T.jsx)("span",{className:"comparison-slider__left-label",children:i}),(0,T.jsx)("span",{className:"comparison-slider__right-label",children:r})]})]})]})},kr=e=>{let{profileP:t,profileS:n,clientType:i,principalName:r,secondaryName:o,location:l,kycData:c,kycComplete:d,onRetake:u,onRefresh:h,onLaunchSecondary:p}=e;const[m,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(""),[y,b]=(0,a.useState)(!1),[x,S]=(0,a.useState)(""),j=e=>{if(!e)return{ct:3,ml:3,mp:3};const t=e=>(e-1)/8*4+1;let n=0,a=0,i=0,r=0;return Si.forEach(o=>{const s=(t=>{var n;const a=e.selections||(null===(n=e.session)||void 0===n?void 0:n.selections)||{},i=wi.filter(e=>e.category===t);for(const e of i){const t=a[e.quadId];if(t&&t.favorites&&t.favorites.length>0){const n=wi.find(t=>t.quadId===e.quadId);if(n&&n.images&&n.images[t.favorites[0]])return n.images[t.favorites[0]]}}return null})(o);if(s){const e=(e=>{if(!e)return null;const t=e.split("/").pop(),n=t.match(/AS(\d)/),a=t.match(/VD(\d)/),i=t.match(/MP(\d)/);return n&&a&&i?{as:parseInt(n[1]),vd:parseInt(a[1]),mp:parseInt(i[1])}:null})(s);e&&(n+=t(e.as),a+=t(e.vd),i+=t(e.mp),r++)}}),0===r?{ct:3,ml:3,mp:3}:{ct:n/r,ml:a/r,mp:i/r}},w=j(t),N=n?j(n):null,k=(()=>{if(!w||!N)return 0;const e=(Math.abs((w.ct||2.5)-(N.ct||2.5))+Math.abs((w.ml||2.5)-(N.ml||2.5))+Math.abs((w.mp||2.5)-(N.mp||2.5)))/3;return Math.max(0,Math.round(100-e/5*100))})(),_=e=>e<2.5?"Contemporary":e>3.5?"Traditional":"Transitional",C=()=>({location:l||null,kycData:c});return(0,T.jsxs)("div",{className:"completed-view",children:[(0,T.jsxs)("div",{className:"completed-view__header",children:[(0,T.jsx)("h3",{children:"\u2705 Taste Profile Complete"}),(0,T.jsxs)("p",{className:"completed-view__subtitle",children:[r||"Principal","'s design preferences have been captured"]}),l&&(0,T.jsxs)("p",{className:"completed-view__location",children:["\ud83d\udccd ",l]})]}),(0,T.jsxs)("div",{className:"completed-view__dna",children:[(0,T.jsx)("h4",{children:"Design DNA"}),(0,T.jsx)("div",{className:"dna-label",children:(0,T.jsx)("span",{className:"dna-label__style",children:_(w.ct)})}),(0,T.jsx)(wr,{label:"Style Era",value:w.ct,leftLabel:"Contemporary",rightLabel:"Traditional"}),(0,T.jsx)(wr,{label:"Material Complexity",value:w.ml,leftLabel:"Minimal",rightLabel:"Layered"}),(0,T.jsx)(wr,{label:"Mood Palette",value:w.mp,leftLabel:"Warm",rightLabel:"Cool"})]}),t&&n&&(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Partner Alignment"}),(0,T.jsxs)("p",{className:"kyc-section__group-description",children:["Comparison of ",r||"Principal"," and ",o||"Secondary"," preferences."]}),(0,T.jsxs)("div",{className:"partner-comparison",children:[(0,T.jsxs)("div",{className:"alignment-score",children:[(0,T.jsx)("span",{className:"alignment-score__label",children:"Overall Alignment"}),(0,T.jsxs)("span",{className:"alignment-score__value ".concat(k>=70?"alignment-score__value--good":k>=50?"alignment-score__value--moderate":"alignment-score__value--low"),children:[k,"%"]})]}),(0,T.jsxs)("div",{className:"comparison-legend",children:[(0,T.jsxs)("span",{className:"comparison-legend__item comparison-legend__item--p",children:["\u25cf ",r||"Principal"]}),(0,T.jsxs)("span",{className:"comparison-legend__item comparison-legend__item--s",children:["\u25cf ",o||"Secondary"]})]}),(0,T.jsxs)("div",{className:"comparison-sliders",children:[(0,T.jsx)(Nr,{label:"Style Era",valueP:null===w||void 0===w?void 0:w.ct,valueS:null===N||void 0===N?void 0:N.ct,leftLabel:"Contemporary",rightLabel:"Traditional",principalName:r,secondaryName:o}),(0,T.jsx)(Nr,{label:"Material Complexity",valueP:null===w||void 0===w?void 0:w.ml,valueS:null===N||void 0===N?void 0:N.ml,leftLabel:"Minimal",rightLabel:"Layered",principalName:r,secondaryName:o}),(0,T.jsx)(Nr,{label:"Mood Palette",valueP:null===w||void 0===w?void 0:w.mp,valueS:null===N||void 0===N?void 0:N.mp,leftLabel:"Warm",rightLabel:"Cool",principalName:r,secondaryName:o})]})]})]}),t&&!n&&(0,T.jsx)("div",{className:"kyc-section__group",children:(0,T.jsxs)("div",{className:"partner-pending-notice",children:[(0,T.jsx)("span",{className:"partner-pending-notice__icon",children:"\u25d0"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Partner Profile Pending"}),(0,T.jsxs)("p",{children:["Once ",o||"Secondary"," completes their Taste Exploration, a Partner Alignment Analysis will be available."]}),(0,T.jsx)("button",{className:"refresh-btn refresh-btn--inline",onClick:h,children:"\u21bb Check for Updates"})]})]})}),(0,T.jsxs)("div",{className:"completed-view__reports",children:[(0,T.jsx)("h4",{children:"\ud83d\udcc4 Taste Profile Report"}),(0,T.jsxs)("div",{className:"report-buttons",children:[(0,T.jsxs)("button",{className:"report-btn report-btn--view ".concat(d?"report-btn--complete":"report-btn--incomplete"),onClick:async()=>{f(!0);try{await nr(t,n,C())}catch(Sg){console.error("Error generating report:",Sg),alert("Error generating report. Please try again.")}f(!1)},disabled:m,children:[(0,T.jsx)("span",{className:"report-btn__icon",children:"\ud83d\udc41\ufe0f"}),(0,T.jsx)("span",{className:"report-btn__text",children:"View Report"})]}),(0,T.jsxs)("button",{className:"report-btn report-btn--download ".concat(d?"report-btn--complete":"report-btn--incomplete"),onClick:async()=>{f(!0);try{await tr(t,n,C())}catch(Sg){console.error("Error downloading report:",Sg),alert("Error downloading report. Please try again.")}f(!1)},disabled:m,children:[(0,T.jsx)("span",{className:"report-btn__icon",children:"\ud83d\udce5"}),(0,T.jsx)("span",{className:"report-btn__text",children:"Download PDF"})]}),(0,T.jsxs)("button",{className:"report-btn report-btn--email ".concat(d?"report-btn--complete":"report-btn--incomplete"),onClick:async()=>{f(!0),v("Downloading reports...");try{var e,a;const i=(null===c||void 0===c||null===(e=c.principal)||void 0===e||null===(a=e.projectParameters)||void 0===a?void 0:a.projectName)||"Project",l=r||"Client",d=o||"Partner",u=n&&n.completedAt;await tr(t,n,C()),u&&(await new Promise(e=>setTimeout(e,500)),await tr(n,null,s(s({},C()),{},{clientName:d}),d));const h=encodeURIComponent("".concat(i," - Design Preferences Report")),p=encodeURIComponent("Please find attached the Design Preferences Report for ".concat(i,".\n\n")+"The PDF report(s) have been downloaded to your computer. Please attach them to this email.\n\nReports included:\n"+"- ".concat(l,"'s Design Profile").concat(u?"\n- ".concat(d,"'s Design Profile"):"","\n\n")+"Best regards");setTimeout(()=>{window.location.href="mailto:?subject=".concat(h,"&body=").concat(p),v("".concat(u?"2 PDFs":"PDF"," downloaded - please attach to email"))},300)}catch(Sg){console.error("Error preparing email:",Sg),v("Error preparing email")}f(!1)},disabled:m,children:[(0,T.jsx)("span",{className:"report-btn__icon",children:"\u2709\ufe0f"}),(0,T.jsx)("span",{className:"report-btn__text",children:"Email Report"})]})]}),g&&(0,T.jsx)("p",{className:"report-status",children:g}),m&&(0,T.jsx)("p",{className:"report-status",children:"Generating report..."})]}),"couple"===i&&(0,T.jsxs)("div",{className:"completed-view__partner",children:[(0,T.jsx)("h4",{children:"Partner Profile"}),n?(0,T.jsxs)("div",{className:"partner-summary",children:[(0,T.jsxs)("p",{children:["\u2705 ",o||"Secondary"," has completed their Taste Exploration"]}),(0,T.jsx)("div",{className:"dna-label",style:{marginBottom:"16px"},children:(0,T.jsx)("span",{className:"dna-label__style",children:_(N.ct)})}),(0,T.jsx)(wr,{label:"Style Era",value:N.ct,leftLabel:"Contemporary",rightLabel:"Traditional"}),(0,T.jsx)(wr,{label:"Material Complexity",value:N.ml,leftLabel:"Minimal",rightLabel:"Layered"}),(0,T.jsx)(wr,{label:"Mood Palette",value:N.mp,leftLabel:"Warm",rightLabel:"Cool"}),(0,T.jsx)("p",{className:"comparison-note",children:"Full partner alignment analysis is included in the PDF report above."}),(0,T.jsxs)("div",{className:"partner-report-buttons",style:{marginTop:"16px",display:"flex",gap:"12px"},children:[(0,T.jsxs)("button",{className:"report-btn report-btn--view",onClick:async()=>{f(!0);try{await nr(n,null,s(s({},C()),{},{clientName:o||"Partner"}))}catch(Sg){console.error("Error generating report:",Sg)}f(!1)},disabled:m,children:[(0,T.jsx)("span",{className:"report-btn__icon",children:"\ud83d\udc41\ufe0f"}),(0,T.jsxs)("span",{className:"report-btn__text",children:["View ",o||"Partner","'s Report"]})]}),(0,T.jsxs)("button",{className:"report-btn report-btn--download",onClick:async()=>{f(!0);try{await tr(n,null,s(s({},C()),{},{clientName:o||"Partner"}),o||"Partner")}catch(Sg){console.error("Error downloading report:",Sg)}f(!1)},disabled:m,children:[(0,T.jsx)("span",{className:"report-btn__icon",children:"\ud83d\udce5"}),(0,T.jsxs)("span",{className:"report-btn__text",children:["Download ",o||"Partner","'s PDF"]})]})]})]}):(0,T.jsxs)("div",{className:"partner-pending",children:[(0,T.jsxs)("p",{children:["\u23f3 Waiting for ",o||"Secondary"," to complete their Taste Exploration"]}),(0,T.jsxs)("button",{className:"btn-launch-secondary",onClick:p,children:["Start ",o||"Secondary","'s Exploration"]})]})]}),"couple"===i&&t&&n&&(0,T.jsxs)("div",{className:"completed-view__combined",children:[(0,T.jsx)("h4",{children:"\ud83c\udfaf Combined Design DNA"}),(0,T.jsx)("p",{className:"combined-intro",children:"Averaged design preferences from both partners"}),((e,a,i,r,o,s)=>{const l=(null===t||void 0===t||null===(e=t.session)||void 0===e||null===(a=e.profile)||void 0===a?void 0:a.scores)||(null===t||void 0===t||null===(i=t.profile)||void 0===i?void 0:i.scores)||{},c=(null===n||void 0===n||null===(r=n.session)||void 0===r||null===(o=r.profile)||void 0===o?void 0:o.scores)||(null===n||void 0===n||null===(s=n.profile)||void 0===s?void 0:s.scores)||{},d=e=>{const t=l[e]||5,n=c[e]||5;return Math.round((t+n)/2*10)/10},u={tradition:d("tradition"),formality:d("formality"),warmth:d("warmth"),drama:d("drama"),openness:d("openness"),art_focus:d("art_focus")};return(0,T.jsxs)("div",{className:"combined-dna-grid",children:[(0,T.jsxs)("div",{className:"combined-dna-item",children:[(0,T.jsxs)("div",{className:"combined-dna-item__header",children:[(0,T.jsx)("span",{className:"combined-dna-item__label",children:"Tradition"}),(0,T.jsx)("span",{className:"combined-dna-item__value",children:u.tradition})]}),(0,T.jsxs)("div",{className:"combined-dna-item__slider",children:[(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Contemporary"}),(0,T.jsxs)("div",{className:"combined-dna-item__track",children:[(0,T.jsx)("div",{className:"combined-dna-item__fill",style:{width:"".concat((u.tradition-1)/9*100,"%")}}),(0,T.jsx)("div",{className:"combined-dna-item__thumb",style:{left:"".concat((u.tradition-1)/9*100,"%")}})]}),(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Traditional"})]})]}),(0,T.jsxs)("div",{className:"combined-dna-item",children:[(0,T.jsxs)("div",{className:"combined-dna-item__header",children:[(0,T.jsx)("span",{className:"combined-dna-item__label",children:"Formality"}),(0,T.jsx)("span",{className:"combined-dna-item__value",children:u.formality})]}),(0,T.jsxs)("div",{className:"combined-dna-item__slider",children:[(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Casual"}),(0,T.jsxs)("div",{className:"combined-dna-item__track",children:[(0,T.jsx)("div",{className:"combined-dna-item__fill combined-dna-item__fill--navy",style:{width:"".concat((u.formality-1)/9*100,"%")}}),(0,T.jsx)("div",{className:"combined-dna-item__thumb combined-dna-item__thumb--navy",style:{left:"".concat((u.formality-1)/9*100,"%")}})]}),(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Formal"})]})]}),(0,T.jsxs)("div",{className:"combined-dna-item",children:[(0,T.jsxs)("div",{className:"combined-dna-item__header",children:[(0,T.jsx)("span",{className:"combined-dna-item__label",children:"Warmth"}),(0,T.jsx)("span",{className:"combined-dna-item__value",children:u.warmth})]}),(0,T.jsxs)("div",{className:"combined-dna-item__slider",children:[(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Cool"}),(0,T.jsxs)("div",{className:"combined-dna-item__track",children:[(0,T.jsx)("div",{className:"combined-dna-item__fill combined-dna-item__fill--gold",style:{width:"".concat((u.warmth-1)/9*100,"%")}}),(0,T.jsx)("div",{className:"combined-dna-item__thumb combined-dna-item__thumb--gold",style:{left:"".concat((u.warmth-1)/9*100,"%")}})]}),(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Warm"})]})]}),(0,T.jsxs)("div",{className:"combined-dna-item",children:[(0,T.jsxs)("div",{className:"combined-dna-item__header",children:[(0,T.jsx)("span",{className:"combined-dna-item__label",children:"Drama"}),(0,T.jsx)("span",{className:"combined-dna-item__value",children:u.drama})]}),(0,T.jsxs)("div",{className:"combined-dna-item__slider",children:[(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Subtle"}),(0,T.jsxs)("div",{className:"combined-dna-item__track",children:[(0,T.jsx)("div",{className:"combined-dna-item__fill combined-dna-item__fill--gold",style:{width:"".concat((u.drama-1)/9*100,"%")}}),(0,T.jsx)("div",{className:"combined-dna-item__thumb combined-dna-item__thumb--gold",style:{left:"".concat((u.drama-1)/9*100,"%")}})]}),(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Bold"})]})]}),(0,T.jsxs)("div",{className:"combined-dna-item",children:[(0,T.jsxs)("div",{className:"combined-dna-item__header",children:[(0,T.jsx)("span",{className:"combined-dna-item__label",children:"Openness"}),(0,T.jsx)("span",{className:"combined-dna-item__value",children:u.openness})]}),(0,T.jsxs)("div",{className:"combined-dna-item__slider",children:[(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Enclosed"}),(0,T.jsxs)("div",{className:"combined-dna-item__track",children:[(0,T.jsx)("div",{className:"combined-dna-item__fill",style:{width:"".concat((u.openness-1)/9*100,"%")}}),(0,T.jsx)("div",{className:"combined-dna-item__thumb",style:{left:"".concat((u.openness-1)/9*100,"%")}})]}),(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Open"})]})]}),(0,T.jsxs)("div",{className:"combined-dna-item",children:[(0,T.jsxs)("div",{className:"combined-dna-item__header",children:[(0,T.jsx)("span",{className:"combined-dna-item__label",children:"Art Focus"}),(0,T.jsx)("span",{className:"combined-dna-item__value",children:u.art_focus})]}),(0,T.jsxs)("div",{className:"combined-dna-item__slider",children:[(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Understated"}),(0,T.jsxs)("div",{className:"combined-dna-item__track",children:[(0,T.jsx)("div",{className:"combined-dna-item__fill",style:{width:"".concat((u.art_focus-1)/9*100,"%")}}),(0,T.jsx)("div",{className:"combined-dna-item__thumb",style:{left:"".concat((u.art_focus-1)/9*100,"%")}})]}),(0,T.jsx)("span",{className:"combined-dna-item__endpoint",children:"Gallery-like"})]})]})]})})()]}),(0,T.jsxs)("div",{className:"completed-view__actions",children:[(0,T.jsx)("button",{className:"btn-refresh ".concat(y?"btn-refresh--loading":""),onClick:()=>{b(!0),S(""),h(),setTimeout(()=>{b(!1),S("Profiles refreshed!"),setTimeout(()=>S(""),2e3)},500)},disabled:y,children:y?"\u23f3 Refreshing...":"\ud83d\udd04 Refresh Profiles"}),x&&(0,T.jsx)("span",{className:"refresh-message",children:x}),(0,T.jsx)("button",{className:"btn-retake",onClick:u,children:"\u21a9\ufe0f Retake Exploration"})]})]})},_r=e=>{let{clientType:t,setClientType:n,clientBaseName:a,setClientBaseName:i,principalName:r,setPrincipalName:o,secondaryName:s,setSecondaryName:l,clientIdP:c,clientIdS:d,statusP:u,statusS:h,onLaunch:p,onRefresh:m}=e;return(0,T.jsxs)("div",{className:"welcome-view",children:[(0,T.jsxs)("div",{className:"section-header",children:[(0,T.jsx)("div",{className:"section-header__icon",children:"\ud83c\udfa8"}),(0,T.jsxs)("div",{className:"section-header__text",children:[(0,T.jsx)("h2",{children:"P1.A.5 Design Preferences"}),(0,T.jsx)("p",{children:"Discover your client's architectural and interior design aesthetic through the Taste Exploration experience."})]})]}),(0,T.jsxs)("div",{className:"style-reference",children:[(0,T.jsx)("h3",{children:"Architectural Style Spectrum"}),(0,T.jsx)("p",{children:"The 9-point scale from Avant-Contemporary (AS1) to Heritage Estate (AS9):"}),(0,T.jsx)(Sr,{})]}),(0,T.jsxs)("div",{className:"client-config",children:[(0,T.jsx)("h3",{children:"Client Configuration"}),(0,T.jsxs)("div",{className:"client-type-toggle",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat("individual"===t?"active":""),onClick:()=>n("individual"),children:"\ud83d\udc64 Individual"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat("couple"===t?"active":""),onClick:()=>n("couple"),children:"\ud83d\udc65 Couple"})]}),(0,T.jsxs)("div",{className:"client-names",children:[(0,T.jsxs)("div",{className:"name-field",children:[(0,T.jsx)("label",{children:"Family Name"}),(0,T.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"e.g. Thornwood"}),a&&(0,T.jsxs)("small",{children:["IDs: ",c,"couple"===t&&", ".concat(d)]})]}),(0,T.jsxs)("div",{className:"name-field",children:[(0,T.jsx)("label",{children:"couple"===t?"Principal Name":"Client Name"}),(0,T.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value),placeholder:"e.g. Peter"})]}),"couple"===t&&(0,T.jsxs)("div",{className:"name-field",children:[(0,T.jsx)("label",{children:"Secondary Name"}),(0,T.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"e.g. Mary"})]})]})]}),a&&(0,T.jsxs)("div",{className:"launch-section",children:[(0,T.jsx)("h3",{children:"Taste Exploration"}),(0,T.jsx)("p",{children:"Launch the visual preference discovery experience for your client(s)."}),(0,T.jsxs)("div",{className:"profile-cards",children:[(0,T.jsx)(jr,{clientId:c,name:r,profile:null,status:u,onLaunch:p,isPrimary:!0}),"couple"===t&&(0,T.jsx)(jr,{clientId:d,name:s,profile:null,status:h,onLaunch:p,isPrimary:!1})]}),(0,T.jsx)("button",{className:"btn-refresh-small",onClick:m,children:"\ud83d\udd04 Refresh Status"})]})]})},Cr=e=>{var t;let{respondent:n,tier:i}=e;const{kycData:r,updateKYCData:o,calculateCompleteness:s,saveNow:l}=W(),c=(null===(t=r[n])||void 0===t?void 0:t.designIdentity)||{},d=100===s(n),[u,h]=(0,a.useState)(c.clientType||"couple"),[p,m]=(0,a.useState)(c.clientBaseName||""),[f,g]=(0,a.useState)(c.principalName||""),[v,y]=(0,a.useState)(c.secondaryName||""),[b,x]=(0,a.useState)(null),[S,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(null),k=p?"".concat(p,"-P"):null,_="couple"===u&&p?"".concat(p,"-S"):null,C=(()=>{var e;const t=(null===(e=r[n])||void 0===e?void 0:e.lifestyleGeography)||{},a=t.primaryCity||t.city||"",i=t.primaryCountry||t.country||"";return a&&i?"".concat(a,", ").concat(i):a||(i||null)})();(0,a.useEffect)(()=>{const e=(()=>{try{const e=window.location.hash;if(e&&e.includes("tasteProfile=")){const t=e.split("tasteProfile=")[1];if(t){const e=JSON.parse(atob(decodeURIComponent(t)));return window.history.replaceState(null,"",window.location.pathname+window.location.search),e}}}catch(Sg){console.error("Error extracting profile from URL:",Sg)}return null})();e&&e.clientId&&(br(e.clientId,e),window.dispatchEvent(new Event("storage")))},[]);const P=(0,a.useCallback)(()=>{var e;const t=(null===r||void 0===r||null===(e=r.principal)||void 0===e?void 0:e.designIdentity)||{};let n=null;const a=t.principalTasteResults;null!==a&&void 0!==a&&a.completedAt?(n={clientId:k,session:a,completedAt:a.completedAt},k&&br(k,n)):k&&(n=yr(k)),x(n);let i=null;const o=t.secondaryTasteResults;null!==o&&void 0!==o&&o.completedAt?(i={clientId:_,session:o,completedAt:o.completedAt},_&&br(_,i)):_&&(i=yr(_)),j(i)},[k,_,r]);(0,a.useEffect)(()=>{P()},[P]),(0,a.useEffect)(()=>{const e=()=>{P()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[P]),(0,a.useEffect)(()=>{o(n,"designIdentity",{clientType:u,clientBaseName:p,principalName:f,secondaryName:v})},[u,p,f,v,o,n]);const F=xr(b),A=xr(S),L="complete"===("principal"===n?F:A),M=e=>{("principal"===e?k:_)?N(e):alert("Please enter a client name first")},R=async e=>{const t="principal"===w?k:_;if(e&&t){const n=(new Date).toISOString(),a={clientId:t,selections:e.selections,skipped:e.skipped||[],profile:e.profile,completedAt:n},i="principal"===w?"principalTasteResults":"secondaryTasteResults";console.log("[TASTE-SAVE] Saving ".concat(i," to kycData for backend sync")),o("principal","designIdentity",{[i]:a}),br(t,{clientId:t,session:e,completedAt:n}),setTimeout(async()=>{console.log("[TASTE-SAVE] Auto-saving to backend..."),await l(),console.log("[TASTE-SAVE] Backend sync complete")},100)}P(),N(null)},I=()=>{N(null)};if(w){const e="principal"===w?k:_,t="principal"===w?f:v;return(0,T.jsx)("div",{className:"kyc-section design-identity-section",children:(0,T.jsx)(fr,{clientId:e,clientName:t||e,respondentType:w,onComplete:R,onBack:I})})}return(0,T.jsx)("div",{className:"kyc-section design-identity-section",children:L?(0,T.jsx)(kr,{profileP:b,profileS:S,clientType:u,principalName:f,secondaryName:v,location:C,kycData:r,kycComplete:d,onRetake:()=>{window.confirm("This will reset your Taste Exploration results. Are you sure?")&&(k&&localStorage.removeItem("".concat(gr).concat(k)),_&&localStorage.removeItem("".concat(gr).concat(_)),console.log("[TASTE-RESET] Clearing taste results from kycData"),o("principal","designIdentity",{principalTasteResults:null,secondaryTasteResults:null}),x(null),j(null))},onRefresh:P,onLaunchSecondary:()=>M(_)}):(0,T.jsx)(_r,{clientType:u,setClientType:h,clientBaseName:p,setClientBaseName:m,principalName:f,setPrincipalName:g,secondaryName:v,setSecondaryName:y,clientIdP:k,clientIdS:_,statusP:F,statusS:A,onLaunch:M,onRefresh:P})})},Pr=e=>{let{label:t,value:n,onChange:a,min:i=1,max:r=10,step:o=1,leftLabel:s,rightLabel:l,showValue:c=!0,helpText:d,className:u=""}=e;const h="slider-".concat(t.toLowerCase().replace(/\s+/g,"-")),p=(n-i)/(r-i)*100;return(0,T.jsxs)("div",{className:"slider-field ".concat(u),children:[(0,T.jsxs)("div",{className:"slider-field__header",children:[(0,T.jsx)("label",{htmlFor:h,className:"slider-field__label",children:t}),c&&(0,T.jsx)("span",{className:"slider-field__value",children:n})]}),(0,T.jsxs)("div",{className:"slider-field__container",children:[s&&(0,T.jsx)("span",{className:"slider-field__endpoint slider-field__endpoint--left",children:s}),(0,T.jsxs)("div",{className:"slider-field__track-wrapper",children:[(0,T.jsx)("input",{type:"range",id:h,value:n,onChange:e=>{a(parseInt(e.target.value,10))},min:i,max:r,step:o,className:"slider-field__input",style:{background:"linear-gradient(to right, #1a365d 0%, #1a365d ".concat(p,"%, #e2e8f0 ").concat(p,"%, #e2e8f0 100%)")}}),(0,T.jsx)("div",{className:"slider-field__ticks",children:Array.from({length:r-i+1},(e,t)=>(0,T.jsx)("div",{className:"slider-field__tick ".concat(t+i===n?"slider-field__tick--active":"")},t))})]}),l&&(0,T.jsx)("span",{className:"slider-field__endpoint slider-field__endpoint--right",children:l})]}),d&&(0,T.jsx)("span",{className:"slider-field__help",children:d})]})},Fr=e=>{var t,n,a;let{respondent:i,tier:r}=e;const{kycData:o,updateKYCData:s}=W(),l=o[i].lifestyleLiving,c=((null===(t=o.principal)||void 0===t?void 0:t.lifestyleLiving)||{}).wfhPeopleCount||0,d=(null===(n=o.principal)||void 0===n||null===(a=n.portfolioContext)||void 0===a?void 0:a.principalFirstName)||"Principal",u="secondary"===i&&c>=2,h=(e,t)=>{s(i,"lifestyleLiving",{[e]:t})},p=(e,t)=>{const n=l[e]||[],a=n.includes(t)?n.filter(e=>e!==t):[...n,t];h(e,a)};return(0,T.jsxs)("div",{className:"kyc-section",children:[u&&(0,T.jsx)("div",{className:"kyc-section__group",children:(0,T.jsxs)("div",{className:"wfh-confirmation ".concat(!1===l.wfhConfirmation?"wfh-confirmation--discuss":""),children:[(0,T.jsxs)("div",{className:"wfh-confirmation__message",children:[(0,T.jsx)("strong",{children:d})," has indicated requirement for ",(0,T.jsxs)("strong",{children:[c," dedicated Home Offices"]}),"."]}),(0,T.jsx)("div",{className:"wfh-confirmation__actions",children:(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(!0===l.wfhConfirmation?"toggle-btn--active":""),onClick:()=>h("wfhConfirmation",!0),children:"\u2713 Confirm"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(!1===l.wfhConfirmation?"toggle-btn--active toggle-btn--warning":""),onClick:()=>h("wfhConfirmation",!1),children:"\u26a0 Discuss"})]})}),!1===l.wfhConfirmation&&(0,T.jsxs)("div",{className:"wfh-confirmation__flag",children:[(0,T.jsx)(Ze,{size:16}),(0,T.jsx)("span",{children:"Flagged for discussion - WFH requirements need alignment"})]})]})}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Work From Home"}),(0,T.jsx)(Qe,{label:"Work From Home Frequency",value:l.workFromHome,onChange:e=>h("workFromHome",e),options:[{value:"never",label:"Never"},{value:"sometimes",label:"Sometimes (1-2 days/week)"},{value:"often",label:"Often (3-4 days/week)"},{value:"always",label:"Always (Full Remote)"}],placeholder:"How often do you work from home?"}),l.workFromHome&&"never"!==l.workFromHome&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)($e,{label:"Number of People WFH",type:"number",value:l.wfhPeopleCount,onChange:e=>h("wfhPeopleCount",parseInt(e)||null),placeholder:"How many people need home office space?",min:1,helpText:"Include anyone who regularly works from home"}),l.wfhPeopleCount>=2&&(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Separate Offices Required?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Do you need separate, private office spaces for each person working from home?"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(!0===l.separateOfficesRequired?"toggle-btn--active":""),onClick:()=>h("separateOfficesRequired",!0),children:"Yes, separate offices"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(!1===l.separateOfficesRequired?"toggle-btn--active":""),onClick:()=>h("separateOfficesRequired",!1),children:"No, can share space"})]}),l.separateOfficesRequired&&(0,T.jsxs)("p",{className:"form-field__note",style:{marginTop:"8px",color:"var(--teal)"},children:["\u2713 Program will include ",l.wfhPeopleCount," separate home offices"]})]}),(0,T.jsx)($e,{label:"Office Requirements",type:"textarea",value:l.officeRequirements,onChange:e=>h("officeRequirements",e),placeholder:"Any specific requirements? Video calls, client meetings, specialized equipment...",rows:2})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Hobbies & Activities"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Space-Requiring Hobbies"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"12px"},children:"Select hobbies that need dedicated space in your home"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"art",label:"Art/Painting"},{value:"music",label:"Music/Instruments"},{value:"fitness",label:"Fitness/Home Gym"},{value:"yoga",label:"Yoga/Meditation"},{value:"cooking",label:"Cooking/Culinary"},{value:"wine",label:"Wine Collection"},{value:"cars",label:"Car Collection"},{value:"gardening",label:"Gardening"},{value:"reading",label:"Reading/Library"},{value:"gaming",label:"Gaming/Media"},{value:"spa",label:"Spa/Wellness"},{value:"crafts",label:"Crafts/Making"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((l.hobbies||[]).includes(e.value)?"chip--selected":""),onClick:()=>p("hobbies",e.value),children:e.label},e.value))})]}),(0,T.jsx)($e,{label:"Hobby Details",type:"textarea",value:l.hobbyDetails,onChange:e=>h("hobbyDetails",e),placeholder:"Specific equipment needs, space requirements, or details about your hobbies...",rows:2}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Late Night Media Use?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Do you watch movies or game late at night when others are sleeping? (Affects acoustic planning)"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(l.lateNightMediaUse?"toggle-btn--active":""),onClick:()=>h("lateNightMediaUse",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(l.lateNightMediaUse?"":"toggle-btn--active"),onClick:()=>h("lateNightMediaUse",!1),children:"No"})]})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Entertaining"}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)(Qe,{label:"Entertaining Frequency",value:l.entertainingFrequency,onChange:e=>h("entertainingFrequency",e),options:[{value:"rarely",label:"Rarely (Few times/year)"},{value:"monthly",label:"Monthly"},{value:"weekly",label:"Weekly"},{value:"daily",label:"Daily/Constantly"}],placeholder:"How often do you entertain?"}),(0,T.jsx)(Qe,{label:"Entertaining Style",value:l.entertainingStyle,onChange:e=>h("entertainingStyle",e),options:[{value:"formal",label:"Formal (Seated dinners)"},{value:"casual",label:"Casual (Relaxed gatherings)"},{value:"both",label:"Both Formal & Casual"}],placeholder:"What type of entertaining?"})]}),(0,T.jsx)($e,{label:"Typical Guest Count",value:l.typicalGuestCount,onChange:e=>h("typicalGuestCount",e),placeholder:"e.g., 8-12 for dinners, 50-100 for parties"})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Wellness"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Wellness Priorities"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"gym",label:"Home Gym"},{value:"pool",label:"Pool"},{value:"spa",label:"Spa/Sauna"},{value:"yoga",label:"Yoga Studio"},{value:"massage",label:"Massage Room"},{value:"meditation",label:"Meditation Space"},{value:"cold-plunge",label:"Cold Plunge"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((l.wellnessPriorities||[]).includes(e.value)?"chip--selected":""),onClick:()=>p("wellnessPriorities",e.value),children:e.label},e.value))})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Privacy & Environment"}),(0,T.jsx)(Pr,{label:"Privacy Level Required",value:l.privacyLevelRequired||3,onChange:e=>h("privacyLevelRequired",e),min:1,max:5,leftLabel:"Open/Social",rightLabel:"Maximum Privacy"}),(0,T.jsx)(Pr,{label:"Noise Sensitivity",value:l.noiseSensitivity||3,onChange:e=>h("noiseSensitivity",e),min:1,max:5,leftLabel:"Tolerant",rightLabel:"Very Sensitive"}),(0,T.jsx)(Pr,{label:"Indoor-Outdoor Living",value:l.indoorOutdoorLiving||3,onChange:e=>h("indoorOutdoorLiving",e),min:1,max:5,leftLabel:"Indoor Focused",rightLabel:"Seamless Integration"})]}),(0,T.jsx)($e,{label:"Daily Routines Summary",type:"textarea",value:l.dailyRoutinesSummary,onChange:e=>h("dailyRoutinesSummary",e),placeholder:"Describe a typical day - morning routines, how you use spaces, evening patterns...",rows:3})]})},Ar=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=W(),r=a[t].spaceRequirements,o=(e,n)=>{i(t,"spaceRequirements",{[e]:n})},s=[{value:"primary-suite",label:"Primary Suite"},{value:"secondary-suites",label:"Guest Suites"},{value:"kids-bedrooms",label:"Children's Bedrooms"},{value:"great-room",label:"Great Room/Living"},{value:"formal-living",label:"Formal Living Room"},{value:"family-room",label:"Family Room"},{value:"formal-dining",label:"Formal Dining"},{value:"casual-dining",label:"Casual Dining/Breakfast"},{value:"chef-kitchen",label:"Chef's Kitchen"},{value:"catering-kitchen",label:"Catering Kitchen"},{value:"home-office",label:"Home Office"},{value:"library",label:"Library"},{value:"media-room",label:"Media Room/Theater"},{value:"game-room",label:"Game Room"},{value:"wine-cellar",label:"Wine Cellar"},{value:"gym",label:"Home Gym"},{value:"spa-wellness",label:"Spa/Wellness Suite"},{value:"pool-indoor",label:"Indoor Pool"},{value:"sauna",label:"Sauna"},{value:"steam-room",label:"Steam Room"},{value:"staff-quarters",label:"Staff Quarters"},{value:"mudroom",label:"Mudroom"},{value:"laundry",label:"Laundry Room"},{value:"art-gallery",label:"Art Gallery"},{value:"music-room",label:"Music Room"},{value:"safe-room",label:"Safe Room/Panic Room"}],l=[{value:"swimming-pool",label:"Swimming Pool"},{value:"pool-house",label:"Pool House/Cabana"},{value:"spa-hot-tub",label:"Spa/Hot Tub"},{value:"reflecting-pool",label:"Reflecting Pool"},{value:"water-feature",label:"Fountain/Water Feature"},{value:"koi-pond",label:"Koi Pond"}],c=[{value:"tennis-court",label:"Tennis Court"},{value:"pickleball-court",label:"Pickleball Court"},{value:"basketball-full",label:"Basketball Court (Full)"},{value:"basketball-half",label:"Basketball Court (Half)"},{value:"sport-court",label:"Multi-Sport Court"},{value:"putting-green",label:"Putting Green"},{value:"bocce-court",label:"Bocce Court"},{value:"playground",label:"Children's Play Area"}],d=[{value:"outdoor-kitchen",label:"Summer/Outdoor Kitchen"},{value:"covered-outdoor",label:"Covered Outdoor Living"},{value:"fire-pit",label:"Fire Pit"},{value:"outdoor-fireplace",label:"Outdoor Fireplace"},{value:"event-lawn",label:"Event Lawn (for tenting)"},{value:"pergola-pavilion",label:"Pergola/Pavilion"},{value:"outdoor-dining",label:"Outdoor Dining Terrace"},{value:"bar-lounge",label:"Outdoor Bar/Lounge"}],u=[{value:"formal-garden",label:"Formal Garden"},{value:"kitchen-garden",label:"Kitchen Garden/Orchard"},{value:"cutting-garden",label:"Cutting Garden"},{value:"greenhouse",label:"Greenhouse"},{value:"potting-shed",label:"Potting Shed"},{value:"mature-trees",label:"Mature Trees/Specimen Plantings"}],h=[{value:"guest-house",label:"Guest House (Separate)"},{value:"staff-cottage",label:"Staff Cottage"},{value:"gym-pavilion",label:"Gym/Wellness Pavilion"},{value:"art-studio",label:"Art Studio"},{value:"workshop",label:"Workshop"}],p=[{value:"gated-entry",label:"Private Gated Entry"},{value:"long-driveway",label:"Long Private Driveway (500ft+)"},{value:"motor-court",label:"Motor Court"},{value:"porte-cochere",label:"Porte-Coch\xe8re"},{value:"helipad",label:"Helicopter Landing Area"},{value:"boat-dock",label:"Boat Dock/Water Access"}],m=[{value:"essential",label:"Essential"},{value:"preferred",label:"Preferred"},{value:"flexible",label:"Flexible"}],f=(e,t)=>{const n=r[e]||[],a=n.includes(t)?n.filter(e=>e!==t):[...n,t];o(e,a)};return(0,T.jsxs)("div",{className:"kyc-section",children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Must-Have Interior Spaces"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Select spaces that are essential to your program - non-negotiables."}),(0,T.jsx)("div",{className:"chip-select chip-select--wrap",children:s.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.mustHaveSpaces||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("mustHaveSpaces",e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Nice-to-Have Interior Spaces"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Spaces you'd like if budget and program allow."}),(0,T.jsx)("div",{className:"chip-select chip-select--wrap",children:s.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.niceToHaveSpaces||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("niceToHaveSpaces",e.value),disabled:(r.mustHaveSpaces||[]).includes(e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Space Program Clarifications"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"These questions help fine-tune your area program and spatial relationships."}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Separate Family Room?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"In addition to the Great Room - a more casual TV/hangout space"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsSeparateFamilyRoom?"toggle-btn--active":""),onClick:()=>o("wantsSeparateFamilyRoom",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsSeparateFamilyRoom?"":"toggle-btn--active"),onClick:()=>o("wantsSeparateFamilyRoom",!1),children:"No"})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Second Formal Living / Salon?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"A second formal sitting room beyond the main living space"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsSecondFormalLiving?"toggle-btn--active":""),onClick:()=>o("wantsSecondFormalLiving",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsSecondFormalLiving?"":"toggle-btn--active"),onClick:()=>o("wantsSecondFormalLiving",!1),children:"No"})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Built-in Bar?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Dedicated bar area (not just kitchen island seating)"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBar?"toggle-btn--active":""),onClick:()=>o("wantsBar",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBar?"":"toggle-btn--active"),onClick:()=>o("wantsBar",!1),children:"No"})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Kids Bunk Room?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Extra sleeping for sleepovers (in addition to bedrooms)"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBunkRoom?"toggle-btn--active":""),onClick:()=>o("wantsBunkRoom",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBunkRoom?"":"toggle-btn--active"),onClick:()=>o("wantsBunkRoom",!1),children:"No"})]})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Breakfast Nook?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Casual eat-in area adjacent to kitchen"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBreakfastNook?"toggle-btn--active":""),onClick:()=>o("wantsBreakfastNook",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBreakfastNook?"":"toggle-btn--active"),onClick:()=>o("wantsBreakfastNook",!1),children:"No"})]})]})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Garage & Auto Collection"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"For significant car collections, the garage becomes a showroom."}),(0,T.jsx)(Qe,{label:"Garage Size Requirement",value:r.garageSize,onChange:e=>o("garageSize",e),options:[{value:"2-car",label:"2-Car Garage"},{value:"4-car",label:"4-Car Garage"},{value:"6-car",label:"6-Car Garage"},{value:"8-car",label:"8-Car Garage"},{value:"10-car",label:"10-Car Garage"},{value:"12-plus",label:"12+ Car Gallery/Showroom"}],placeholder:"Select minimum garage capacity..."}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Garage Features"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"climate-controlled",label:"Climate Controlled"},{value:"car-lift",label:"Car Lift(s)"},{value:"display-lighting",label:"Display Lighting"},{value:"viewing-lounge",label:"Viewing Lounge"},{value:"car-wash-bay",label:"Car Wash Bay"},{value:"ev-charging",label:"EV Charging Stations"},{value:"turntable",label:"Turntable"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.garageFeatures||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("garageFeatures",e.value),children:e.label},e.value))})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Pools & Water Features"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,T.jsx)("div",{className:"chip-select",children:l.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.mustHavePoolWater||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("mustHavePoolWater",e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,T.jsx)("div",{className:"chip-select",children:l.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.wouldLikePoolWater||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("wouldLikePoolWater",e.value),disabled:(r.mustHavePoolWater||[]).includes(e.value),children:e.label},e.value))})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Sport & Recreation"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,T.jsx)("div",{className:"chip-select",children:c.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.mustHaveSport||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("mustHaveSport",e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,T.jsx)("div",{className:"chip-select",children:c.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.wouldLikeSport||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("wouldLikeSport",e.value),disabled:(r.mustHaveSport||[]).includes(e.value),children:e.label},e.value))})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Outdoor Living & Entertaining"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,T.jsx)("div",{className:"chip-select",children:d.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.mustHaveOutdoorLiving||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("mustHaveOutdoorLiving",e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,T.jsx)("div",{className:"chip-select",children:d.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.wouldLikeOutdoorLiving||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("wouldLikeOutdoorLiving",e.value),disabled:(r.mustHaveOutdoorLiving||[]).includes(e.value),children:e.label},e.value))})]})]}),"mvp"!==n&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Gardens & Landscape"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,T.jsx)("div",{className:"chip-select",children:u.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.mustHaveGarden||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("mustHaveGarden",e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,T.jsx)("div",{className:"chip-select",children:u.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.wouldLikeGarden||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("wouldLikeGarden",e.value),disabled:(r.mustHaveGarden||[]).includes(e.value),children:e.label},e.value))})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Ancillary Structures"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,T.jsx)("div",{className:"chip-select",children:h.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.mustHaveStructures||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("mustHaveStructures",e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,T.jsx)("div",{className:"chip-select",children:h.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.wouldLikeStructures||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("wouldLikeStructures",e.value),disabled:(r.mustHaveStructures||[]).includes(e.value),children:e.label},e.value))})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Arrival & Access"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,T.jsx)("div",{className:"chip-select",children:p.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.mustHaveAccess||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("mustHaveAccess",e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,T.jsx)("div",{className:"chip-select",children:p.map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.wouldLikeAccess||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("wouldLikeAccess",e.value),disabled:(r.mustHaveAccess||[]).includes(e.value),children:e.label},e.value))})]})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Privacy & Grounds Scale"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"These requirements directly impact site selection criteria."}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)(Qe,{label:"No Visible Neighbors",value:r.privacyNoNeighbors,onChange:e=>o("privacyNoNeighbors",e),options:m,placeholder:"How important?"}),(0,T.jsx)(Qe,{label:"Perimeter Fully Walled/Gated",value:r.privacyPerimeter,onChange:e=>o("privacyPerimeter",e),options:m,placeholder:"How important?"})]}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)($e,{label:"Minimum Setback from Road",value:r.minimumSetback,onChange:e=>o("minimumSetback",e),placeholder:"e.g., 200 ft, 500 ft..."}),(0,T.jsx)($e,{label:"Minimum Lot Size",value:r.minimumLotSize,onChange:e=>o("minimumLotSize",e),placeholder:"e.g., 2 acres, 5 acres..."})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"View Priorities"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Which rooms MUST have views?"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"primary-suite",label:"Primary Suite"},{value:"living",label:"Living Room"},{value:"dining",label:"Dining Room"},{value:"kitchen",label:"Kitchen"},{value:"office",label:"Home Office"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.viewPriorityRooms||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("viewPriorityRooms",e.value),children:e.label},e.value))})]})]}),"mvp"!==n&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Adjacencies & Pain Points"}),(0,T.jsx)($e,{label:"Adjacency Requirements",type:"textarea",value:r.adjacencyRequirements,onChange:e=>o("adjacencyRequirements",e),placeholder:"e.g., Kitchen must be near outdoor dining, Primary suite away from children's rooms...",rows:2}),(0,T.jsx)($e,{label:"Current Space Pain Points",type:"textarea",value:r.currentSpacePainPoints,onChange:e=>o("currentSpacePainPoints",e),placeholder:"What's wrong with your current home that you want to fix?",rows:2})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Storage, Accessibility & Technology"}),(0,T.jsx)(Qe,{label:"Storage Needs",value:r.storageNeeds,onChange:e=>o("storageNeeds",e),options:[{value:"standard",label:"Standard"},{value:"above-average",label:"Above Average"},{value:"extensive",label:"Extensive"}],placeholder:"How much storage do you need?"}),(0,T.jsx)($e,{label:"Accessibility Requirements",value:r.accessibilityRequirements,onChange:e=>o("accessibilityRequirements",e),placeholder:"ADA compliance, aging in place, mobility accommodations..."}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Technology Requirements"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"smart-home",label:"Smart Home System"},{value:"av-integration",label:"AV Integration"},{value:"security",label:"Advanced Security"},{value:"lighting-control",label:"Lighting Control"},{value:"climate-zones",label:"Climate Zones"},{value:"ev-charging",label:"EV Charging"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.technologyRequirements||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("technologyRequirements",e.value),children:e.label},e.value))})]}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Sustainability Priorities"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"solar",label:"Solar Power"},{value:"geothermal",label:"Geothermal"},{value:"leed",label:"LEED Certification"},{value:"passive-house",label:"Passive House"},{value:"net-zero",label:"Net Zero"},{value:"water-reclaim",label:"Water Reclamation"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.sustainabilityPriorities||[]).includes(e.value)?"chip--selected":""),onClick:()=>f("sustainabilityPriorities",e.value),children:e.label},e.value))})]})]})]})]})},Lr=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=W(),r=a[t].culturalContext,o=(e,n)=>{i(t,"culturalContext",{[e]:n})},s=(e,t)=>{const n=r[e]||[],a=n.includes(t)?n.filter(e=>e!==t):[...n,t];o(e,a)};return(0,T.jsxs)("div",{className:"kyc-section",children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Cultural Background"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"Understanding your cultural context helps us match you with designers who appreciate your heritage and can integrate appropriate elements."}),(0,T.jsx)($e,{label:"Cultural Heritage / Background",value:r.culturalBackground,onChange:e=>o("culturalBackground",e),placeholder:"e.g., Saudi Arabian, Indian-American, French-Moroccan..."}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Regional Sensibilities"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"12px"},children:"Select regional design influences that resonate with you"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"middle-east",label:"Middle Eastern"},{value:"south-asian",label:"South Asian"},{value:"east-asian",label:"East Asian"},{value:"european",label:"European"},{value:"latin",label:"Latin American"},{value:"american",label:"North American"},{value:"african",label:"African"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.regionalSensibilities||[]).includes(e.value)?"chip--selected":""),onClick:()=>s("regionalSensibilities",e.value),children:e.label},e.value))})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Religious & Cultural Observances"}),(0,T.jsx)($e,{label:"Religious Observances",type:"textarea",value:r.religiousObservances,onChange:e=>o("religiousObservances",e),placeholder:"Any spatial requirements? e.g., Prayer room facing Mecca, kosher kitchen, separate entertaining spaces...",rows:2}),(0,T.jsx)($e,{label:"Entertaining Cultural Norms",value:r.entertainingCulturalNorms,onChange:e=>o("entertainingCulturalNorms",e),placeholder:"e.g., Formal service with staff, family-style dining, gender-separated entertaining..."})]}),"fyi-extended"===n&&(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Cross-Cultural & Communication"}),(0,T.jsx)($e,{label:"Cross-Cultural Requirements",type:"textarea",value:r.crossCulturalRequirements,onChange:e=>o("crossCulturalRequirements",e),placeholder:"If blending multiple cultural influences, describe how...",rows:2}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Preferred Languages for Design Team"}),(0,T.jsx)("div",{className:"chip-select",children:[{value:"english",label:"English"},{value:"arabic",label:"Arabic"},{value:"mandarin",label:"Mandarin"},{value:"spanish",label:"Spanish"},{value:"french",label:"French"},{value:"portuguese",label:"Portuguese"},{value:"german",label:"German"},{value:"italian",label:"Italian"},{value:"japanese",label:"Japanese"},{value:"hindi",label:"Hindi"}].map(e=>(0,T.jsx)("button",{className:"chip ".concat((r.languagesPreferred||[]).includes(e.value)?"chip--selected":""),onClick:()=>s("languagesPreferred",e.value),children:e.label},e.value))})]})]})]})},Mr=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=W(),r=a[t].workingPreferences,o=(e,n)=>{i(t,"workingPreferences",{[e]:n})};return(0,T.jsxs)("div",{className:"kyc-section",children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Communication & Collaboration Style"}),(0,T.jsx)("p",{className:"kyc-section__group-description",children:"How do you prefer to work with your design team? This helps us match you with compatible professionals."}),(0,T.jsx)(Qe,{label:"Communication Style",value:r.communicationStyle,onChange:e=>o("communicationStyle",e),options:[{value:"direct",label:"Direct - Get to the point"},{value:"relational",label:"Relational - Build rapport first"},{value:"visual",label:"Visual - Show me, don't tell me"}],placeholder:"How do you prefer to communicate?",required:!0}),(0,T.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,T.jsx)(Qe,{label:"Decision Cadence",value:r.decisionCadence,onChange:e=>o("decisionCadence",e),options:[{value:"weekly",label:"Weekly Check-ins"},{value:"milestone",label:"Milestone-Based"},{value:"hands-off",label:"Hands-Off (Trust the Team)"}],placeholder:"How often do you want updates?"}),(0,T.jsx)(Qe,{label:"Collaboration Style",value:r.collaborationStyle,onChange:e=>o("collaborationStyle",e),options:[{value:"directive",label:"Directive - I know what I want"},{value:"consultative",label:"Consultative - Guide me through options"},{value:"delegative",label:"Delegative - Surprise me"}],placeholder:"How involved do you want to be?"})]})]}),"mvp"!==n&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Principal Involvement & Format"}),(0,T.jsx)(Qe,{label:"Principal Involvement Required",value:r.principalInvolvementRequired,onChange:e=>o("principalInvolvementRequired",e),options:[{value:"must-have",label:"Must Have - Principal involved in my project"},{value:"nice-to-have",label:"Nice to Have - Some principal access"},{value:"not-important",label:"Not Important - Trust the team"}],placeholder:"How important is the firm principal's involvement?",helpText:"Some clients want the 'name' designer personally involved"}),(0,T.jsx)(Qe,{label:"Presentation Format",value:r.presentationFormat,onChange:e=>o("presentationFormat",e),options:[{value:"in-person",label:"In-Person Only"},{value:"virtual",label:"Virtual/Remote"},{value:"hybrid",label:"Hybrid (Both)"}],placeholder:"In-person or virtual meetings?"})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Previous Experience"}),(0,T.jsx)($e,{label:"Previous Designer Experience",type:"textarea",value:r.previousDesignerExperience,onChange:e=>o("previousDesignerExperience",e),placeholder:"Have you worked with architects or interior designers before? What worked well? What didn't?",rows:3}),(0,T.jsx)($e,{label:"Red Flags to Avoid",type:"textarea",value:r.redFlagsToAvoid,onChange:e=>o("redFlagsToAvoid",e),placeholder:"Past frustrations or behaviors you want to avoid in your design team...",rows:2}),(0,T.jsx)($e,{label:"Existing Industry Connections",value:r.existingIndustryConnections,onChange:e=>o("existingIndustryConnections",e),placeholder:"Designers you know or have been referred to..."})]})]}),(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Designer Profile Preferences"}),(0,T.jsx)(Pr,{label:"Architect: Celebrity vs. Quiet Professional",value:r.architectCelebrityPreference||3,onChange:e=>o("architectCelebrityPreference",e),min:1,max:5,leftLabel:"Want the Starchitect",rightLabel:"Quiet Professional",helpText:"1 = Want the big name architect, 5 = Prefer discretion"}),(0,T.jsx)(Pr,{label:"Interior Designer: Celebrity vs. Quiet Professional",value:r.interiorDesignerCelebrityPreference||3,onChange:e=>o("interiorDesignerCelebrityPreference",e),min:1,max:5,leftLabel:"Want the Celebrity Designer",rightLabel:"Quiet Professional",helpText:"1 = Want the big name designer, 5 = Prefer discretion"})]}),"mvp"!==n&&(0,T.jsxs)("div",{className:"kyc-section__group",children:[(0,T.jsx)("h3",{className:"kyc-section__group-title",children:"Construction Administration"}),(0,T.jsx)(Qe,{label:"CA Requirement",value:r.caRequirement,onChange:e=>o("caRequirement",e),options:[{value:"full",label:"Full CA - Architect on site regularly"},{value:"limited",label:"Limited CA - Key milestones only"},{value:"none",label:"None - Contractor handles"}],placeholder:"How much architect involvement during construction?"}),(0,T.jsx)(Qe,{label:"Contractor Relationship Preference",value:r.contractorRelationshipPreference,onChange:e=>o("contractorRelationshipPreference",e),options:[{value:"design-bid-build",label:"Design-Bid-Build (Traditional)"},{value:"design-build",label:"Design-Build (Single Source)"},{value:"cm-at-risk",label:"CM at Risk"}],placeholder:"How should the contractor be engaged?"}),(0,T.jsxs)("div",{className:"form-field",children:[(0,T.jsx)("label",{className:"form-field__label",children:"Early Contractor Involvement (ECI)?"}),(0,T.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Bring a qualified contractor in during concept/design phase for constructability input and early costing (separate from procurement method)"}),(0,T.jsxs)("div",{className:"toggle-group",children:[(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.earlyContractorInvolvement?"toggle-btn--active":""),onClick:()=>o("earlyContractorInvolvement",!0),children:"Yes"}),(0,T.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.earlyContractorInvolvement?"":"toggle-btn--active"),onClick:()=>o("earlyContractorInvolvement",!1),children:"No"})]})]})]}),(0,T.jsxs)("div",{className:"kyc-section__footer",children:[(0,T.jsx)("div",{className:"kyc-section__footer-message",children:(0,T.jsx)("p",{children:"Your responses are automatically saved as you go."})}),(0,T.jsx)("button",{className:"btn btn--primary btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Save & Return to Dashboard"})]})]})},Rr=e=>{var t,n;let{showDocs:i,onCloseDocs:r}=e;const{activeRespondent:o,setActiveRespondent:l,currentKYCSection:c,setCurrentKYCSection:d,disclosureTier:p,setDisclosureTier:m,calculateCompleteness:f,getSectionCompletionStatus:g,saveNow:v,isSaving:y,hasUnsavedChanges:b,lastSaved:S}=W(),[j,w]=(0,a.useState)(null),[N,k]=(0,a.useState)(!1),_=(0,a.useCallback)(async()=>{await v()?(w("Saved!"),setTimeout(()=>w(null),3e3)):(w("Save failed"),setTimeout(()=>w(null),5e3))},[v]),P=[{id:"portfolioContext",label:"Portfolio Context",icon:be,tier:"mvp",taskCode:"P1.A.1"},{id:"familyHousehold",label:"Family & Household",icon:h,tier:"mvp",taskCode:"P1.A.2"},{id:"projectParameters",label:"Project Parameters",icon:u,tier:"mvp",taskCode:"P1.A.3"},{id:"budgetFramework",label:"Budget Framework",icon:xe,tier:"mvp",taskCode:"P1.A.4"},{id:"designIdentity",label:"Design Preferences",icon:L,tier:"mvp",taskCode:"P1.A.5"},{id:"lifestyleLiving",label:"Lifestyle & Living",icon:Se,tier:"enhanced",taskCode:"P1.A.6"},{id:"spaceRequirements",label:"Space Requirements",icon:je,tier:"mvp",taskCode:"P1.A.7"},{id:"culturalContext",label:"Cultural Context",icon:we,tier:"enhanced",taskCode:"P1.A.8"},{id:"workingPreferences",label:"Working Preferences",icon:be,tier:"enhanced",taskCode:"P1.A.9"}],F=["designIdentity","lifestyleLiving","spaceRequirements"],A=P.filter(e=>{return t=e,!("secondary"===o&&!F.includes(t.id))&&("enhanced"===p||"mvp"===t.tier);var t}),M=e=>{const t=14,n=1.25;switch(e){case"complete":return(0,T.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"var(--teal)",strokeWidth:n,strokeLinecap:"round",strokeLinejoin:"round",className:"status-icon",children:[(0,T.jsx)("circle",{cx:"8",cy:"8",r:"6.5"}),(0,T.jsx)("path",{d:"M5.2 8.3l1.6 1.6 3.4-3.6"})]});case"partial":return(0,T.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"var(--gold)",strokeWidth:n,className:"status-icon",children:(0,T.jsx)("circle",{cx:"8",cy:"8",r:"6.5"})});default:return(0,T.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"var(--gray-300)",strokeWidth:n,className:"status-icon",children:(0,T.jsx)("circle",{cx:"8",cy:"8",r:"6.5"})})}},R=A.filter(e=>"complete"!==g(o,e.id)),I=f(o);return i?(0,T.jsx)(Ve,{onClose:r}):(0,T.jsxs)("div",{className:"kyc-module",children:[(0,T.jsxs)("div",{className:"kyc-module__tier-selector",children:[(0,T.jsx)("span",{className:"kyc-module__tier-label",children:"Disclosure Level:"}),(0,T.jsx)("div",{className:"tier-tabs",children:[{id:"mvp",label:"Quick Capture",description:"15-20 min"},{id:"enhanced",label:"Full Discovery",description:"45-60 min"}].map(e=>(0,T.jsxs)("button",{className:"tier-tab ".concat(p===e.id?"tier-tab--active":""),onClick:()=>m(e.id),children:[(0,T.jsx)("span",{className:"tier-tab__label",children:e.label}),(0,T.jsx)("span",{className:"tier-tab__duration",children:e.description})]},e.id))}),(0,T.jsxs)("div",{className:"kyc-module__save-area",children:[(0,T.jsxs)("button",{className:"kyc-save-btn ".concat(b?"kyc-save-btn--unsaved":""," ").concat(y?"kyc-save-btn--saving":""),onClick:_,disabled:y,children:[(0,T.jsx)(Ne,{size:16}),y?"Saving...":"SAVE"]}),b&&!y&&(0,T.jsx)("span",{className:"kyc-save-indicator",children:"Unsaved"}),j&&(0,T.jsx)("span",{className:"kyc-save-message ".concat(j.includes("failed")?"kyc-save-message--error":"kyc-save-message--success"),children:j}),S&&!j&&!b&&(0,T.jsxs)("span",{className:"kyc-save-time",children:["Saved: ",S.toLocaleTimeString()]})]})]}),(0,T.jsx)("div",{className:"kyc-module__respondent-tabs",children:[{id:"principal",label:"Principal",color:"navy",description:"Primary decision-maker"},{id:"secondary",label:"Secondary",color:"teal",description:"Spouse / Co-decision-maker"}].map(e=>(0,T.jsxs)("button",{className:"respondent-tab respondent-tab--".concat(e.color," ").concat(o===e.id?"respondent-tab--active":""),onClick:()=>{var t;const n=null===(t=A[c])||void 0===t?void 0:t.id;l(e.id);const a=P.filter(t=>!("secondary"===e.id&&!F.includes(t.id))&&("enhanced"===p||"mvp"===t.tier)).findIndex(e=>e.id===n);d(a>=0?a:0)},children:[(0,T.jsx)(ke,{size:18}),(0,T.jsxs)("div",{className:"respondent-tab__content",children:[(0,T.jsx)("span",{className:"respondent-tab__label",children:e.label}),(0,T.jsx)("span",{className:"respondent-tab__description",children:e.description})]}),(0,T.jsxs)("span",{className:"respondent-tab__progress",children:[f(e.id),"%"]})]},e.id))}),(0,T.jsxs)("div",{className:"kyc-module__layout",children:[(0,T.jsxs)("nav",{className:"kyc-module__nav",children:[(0,T.jsx)("div",{className:"kyc-module__nav-header",children:(0,T.jsxs)("div",{children:[(0,T.jsx)("h3",{className:"kyc-module__nav-title",children:"Module A: KYC"}),(0,T.jsx)("p",{className:"kyc-module__nav-subtitle",children:"Know Your Client"})]})}),I<100&&R.length>0&&(0,T.jsxs)("div",{className:"remaining-dropdown-wrapper",children:[(0,T.jsxs)("button",{className:"remaining-trigger ".concat(N?"active":""),onClick:()=>k(!N),children:[(0,T.jsxs)("span",{children:[R.length," Remaining"]}),(0,T.jsx)(C,{size:14,className:N?"rotated":""})]}),N&&(0,T.jsxs)("div",{className:"remaining-dropdown",children:[(0,T.jsx)("div",{className:"remaining-dropdown__header",children:"Incomplete Sections"}),(0,T.jsx)("div",{className:"remaining-dropdown__list",children:R.map((e,t)=>{const n=g(o,e.id),a=e.icon,i=A.findIndex(t=>t.id===e.id);return(0,T.jsxs)("button",{className:"remaining-dropdown__item",onClick:()=>{d(i),k(!1)},children:[(0,T.jsx)(a,{size:14}),(0,T.jsx)("span",{className:"remaining-dropdown__code",children:e.taskCode}),(0,T.jsx)("span",{className:"remaining-dropdown__label",children:e.label}),"partial"===n&&(0,T.jsx)("span",{className:"remaining-dropdown__badge partial",children:"Partial"}),"empty"===n&&(0,T.jsx)("span",{className:"remaining-dropdown__badge empty",children:"Empty"})]},e.id)})})]})]}),(0,T.jsx)("ul",{className:"kyc-module__nav-list",children:A.map((e,t)=>{const n=e.icon,a=g(o,e.id),i=c===t;return(0,T.jsx)("li",{children:(0,T.jsxs)("button",{className:"kyc-nav-item ".concat(i?"kyc-nav-item--active":""),onClick:()=>d(t),children:[(0,T.jsx)("span",{className:"kyc-nav-item__code",children:e.taskCode}),(0,T.jsx)("div",{className:"kyc-nav-item__icon",children:(0,T.jsx)(n,{size:18})}),(0,T.jsx)("span",{className:"kyc-nav-item__label",children:e.label}),M(a)]})},e.id)})})]}),(0,T.jsxs)("div",{className:"kyc-module__content",children:[(0,T.jsxs)("div",{className:"kyc-module__section-header",children:[(0,T.jsxs)("div",{className:"kyc-module__section-title-group",children:[(0,T.jsx)("span",{className:"kyc-module__task-code",children:null===(t=A[c])||void 0===t?void 0:t.taskCode}),(0,T.jsx)("h2",{className:"kyc-module__section-title",children:null===(n=A[c])||void 0===n?void 0:n.label})]}),(0,T.jsxs)("span",{className:"kyc-module__section-counter",children:["Section ",c+1," of ",A.length]})]}),(0,T.jsx)("div",{className:"kyc-module__section-body",children:(()=>{const e=A[c];if(!e)return null;const t={respondent:o,tier:p};switch(e.id){case"portfolioContext":return(0,T.jsx)(Je,s({},t));case"familyHousehold":return(0,T.jsx)(Xe,s({},t));case"projectParameters":return(0,T.jsx)(et,s({},t));case"budgetFramework":return(0,T.jsx)(tt,s({},t));case"designIdentity":return(0,T.jsx)(Cr,s({},t));case"lifestyleLiving":return(0,T.jsx)(Fr,s({},t));case"spaceRequirements":return(0,T.jsx)(Ar,s({},t));case"culturalContext":return(0,T.jsx)(Lr,s({},t));case"workingPreferences":return(0,T.jsx)(Mr,s({},t));default:return null}})()}),(0,T.jsxs)("div",{className:"kyc-module__section-nav",children:[(0,T.jsxs)("button",{className:"btn btn--secondary",onClick:()=>d(Math.max(0,c-1)),disabled:0===c,children:[(0,T.jsx)(_e,{size:18}),"Previous"]}),c<A.length-1&&(0,T.jsxs)("button",{className:"btn btn--primary",onClick:()=>d(c+1),children:["Next",(0,T.jsx)(x,{size:18})]})]})]})]})]})},Ir=d("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Tr=d("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),zr=d("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Dr=d("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),Er=d("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Or=d("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Br=d("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),qr=d("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Hr=d("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Gr=d("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);function Wr(){var e,t;const n=(0,a.useContext)(U),{kycData:i,mvpConfig:r,projectId:o,projectName:s}=n||{},l=function(){var e;const t=(0,a.useContext)(U),{kycData:n,mvpConfig:i}=t||{},r=null===n||void 0===n||null===(e=n.principal)||void 0===e?void 0:e.designIdentity,o=(0,a.useMemo)(()=>({familyHousehold:Ur(n),lifestyleLiving:Kr(n),workingPreferences:Vr(n),projectParameters:Yr(n),spaceRequirements:Zr(n),designIdentity:$r(r),budgetFramework:Qr(n),culturalContext:!0,portfolioContext:!0}),[n,i,r]),s=Object.values(o).filter(Boolean).length,l=Object.keys(o).length,c=Math.round(s/l*100),d=["familyHousehold","projectParameters","lifestyleLiving"],u=d.every(e=>o[e]);return{sections:o,completedCount:s,totalCount:l,percentage:c,hasMinimumData:u,missingRequired:d.filter(e=>!o[e])}}(),c=(0,a.useMemo)(()=>{var e,t;const n=null===i||void 0===i||null===(e=i.principal)||void 0===e||null===(t=e.designIdentity)||void 0===t?void 0:t.principalTasteResults;return n&&n.selections?n:null},[null===i||void 0===i||null===(e=i.principal)||void 0===e||null===(t=e.designIdentity)||void 0===t?void 0:t.principalTasteResults]);return{kycResponse:(0,a.useMemo)(()=>function(e,t,n){const a=e||{},i=t||{},r=n||{};return{propertyContext:{residenceType:i.residenceType||"primary",estimatedSF:i.sfCap||15e3,numberOfLevels:i.levels||2,hasBasement:i.basement||!1,lotSize:i.lotSize||null,climate:i.climate||null,viewOrientation:i.viewOrientation||null},householdProfile:{composition:Jr(a,i),primaryResidents:i.primaryResidents||a.primaryResidents||2,childrenCount:i.children||a.childrenCount||0,childrenAges:a.childrenAges||[],pets:Xr(a,i),elderlyResidents:a.elderlyResidents||i.elderlyResidents||!1,mobilityConsiderations:a.mobilityNeeds||i.mobilityNeeds||!1,frequentOvernightGuests:a.frequentGuests||i.frequentGuests||!1},entertainingProfile:{frequency:no(a.entertainingFrequency||i.entertaining),typicalScale:a.typicalEventScale||i.typicalEventScale||"moderate",maxEventScale:a.maxEventScale||i.maxEventScale||"large",formalDiningImportance:a.formalDining||i.formalDining||3,outdoorEntertainingImportance:a.outdoorEntertaining||3,cateringSupport:a.cateringSupport||i.cateringSupport||!1,wineCollection:a.wineCollection||i.wineCollection||!1,wineBottleCount:a.wineBottles||i.wineBottles||0},staffingProfile:{preference:ao(a.staffing||i.staffing),currentStaff:a.currentStaff||[],plannedStaff:a.plannedStaff||[],staffQuarters:a.staffQuarters||i.staffQuarters||!1,securityRequirements:a.security||i.security||"minimal"},privacyProfile:{preference:io(a.privacy||i.privacy),separateGuestAccess:a.separateGuestAccess||i.separateGuestAccess||!1,guestStayFrequency:a.guestFrequency||i.guestFrequency||"occasionally",typicalGuestStayDuration:a.guestDuration||i.guestDuration||"weekend",multiGenerationalHosting:a.multiGen||i.multiGen||!1,workFromHome:ro(a.workFromHome||i.workFromHome),clientMeetingsAtHome:a.clientMeetings||i.clientMeetings||!1,lateNightMediaUse:a.lateNightMedia||i.lateNightMedia||!1},kitchenProfile:{cookingStyle:oo(a.cooking||i.cooking),primaryCook:a.primaryCook||i.primaryCook||"family",showKitchenImportance:a.showKitchen||i.showKitchen||4,separateCateringKitchen:a.cateringKitchen||i.cateringKitchen||!1,professionalAppliances:a.proAppliances||i.proAppliances||!1,multipleRefrigeration:a.multipleRefrig||i.multipleRefrig||!1},wellnessProfile:{interest:eo(a,i),poolDesired:a.pool||i.pool||!1,poolType:a.poolType||i.poolType||"lap",spaFeatures:to(a,i),fitnessRoutine:a.fitness||i.fitness||"occasional",garageBays:a.garageBays||i.garageBays||3,evCharging:a.evCharging||i.evCharging||!1},specialRequirements:{artCollection:a.artCollection||i.artCollection||!1,artClimateControl:a.artClimate||i.artClimate||!1,safe_room:a.safeRoom||i.safeRoom||!1,elevator:a.elevator||i.elevator||!1,musicRoom:a.musicRoom||i.musicRoom||!1,recordingStudio:a.recordingStudio||i.recordingStudio||!1,workshop:a.workshop||i.workshop||!1,customSpaces:a.customSpaces||i.customSpaces||[]},budgetProfile:{constructionBudgetRange:a.budget||i.budget||"premium",ffeBudgetRange:a.ffeBudget||null},tasteProfile:r}}(i,r,c),[i,r,c]),preset:(0,a.useMemo)(()=>{const e=(null===r||void 0===r?void 0:r.sfCap)||15e3;return e<=12e3?"10k":e<=17e3?"15k":"20k"},[null===r||void 0===r?void 0:r.sfCap]),baseSF:(null===r||void 0===r?void 0:r.sfCap)||15e3,projectId:o,projectName:s,completeness:l,rawData:{kycData:i,mvpConfig:r,tasteProfile:c}}}function Ur(e){var t,n;if(null===e||void 0===e||null===(t=e.principal)||void 0===t||!t.familyHousehold)return!1;const a=e.principal.familyHousehold;return!!((null===(n=a.familyMembers)||void 0===n?void 0:n.length)>0||a.pets)}function Kr(e){var t;if(null===e||void 0===e||null===(t=e.principal)||void 0===t||!t.lifestyleLiving)return!1;const n=e.principal.lifestyleLiving;return!!(n.entertainingFrequency||n.privacyLevelRequired||n.workFromHome)}function Vr(e){var t;if(null===e||void 0===e||null===(t=e.principal)||void 0===t||!t.workingPreferences)return!1;const n=e.principal.workingPreferences;return!!(n.communicationStyle||n.decisionCadence||n.collaborationStyle)}function Yr(e){var t;if(null===e||void 0===e||null===(t=e.principal)||void 0===t||!t.projectParameters)return!1;const n=e.principal.projectParameters;return!!(n.targetGSF||n.bedroomCount||n.propertyType)}function Zr(e){var t,n,a;if(null===e||void 0===e||null===(t=e.principal)||void 0===t||!t.spaceRequirements)return!1;const i=e.principal.spaceRequirements;return!!((null===(n=i.mustHaveSpaces)||void 0===n?void 0:n.length)>0||i.garageSize||(null===(a=i.niceToHaveSpaces)||void 0===a?void 0:a.length)>0)}function $r(e){if(!e)return!1;const t=e.principalTasteResults;return!(!t||!t.completedAt)||!!(e.styleEra||e.formality||e.warmth)}function Qr(e){var t;if(null===e||void 0===e||null===(t=e.principal)||void 0===t||!t.budgetFramework)return!1;const n=e.principal.budgetFramework;return!!(n.totalProjectBudget||n.perSFExpectation||n.budgetFlexibility)}function Jr(e,t){if(e.multiGen||t.multiGen)return"multi_generational";if(e.blendedFamily)return"blended_family";if((t.children||e.childrenCount||0)>0)return"family_with_children";return 1===(t.primaryResidents||e.primaryResidents||2)?"single":"couple"}function Xr(e,t){const n=[],a=t.dogs||e.dogs||0,i=t.cats||e.cats||0;return a>0&&n.push({type:"dog",count:a,size:t.dogSize||e.dogSize||"medium"}),i>0&&n.push({type:"cat",count:i}),e.otherPets&&n.push(...e.otherPets),n}function eo(e,t){const n=e.pool||t.pool,a=e.spa||t.spa,i=e.gym||t.gym;return a&&i&&n?"resort":a||i?"dedicated":n?"casual":"basic"}function to(e,t){const n=[];return(e.sauna||t.sauna)&&n.push("sauna"),(e.steam||t.steam)&&n.push("steam"),(e.hotTub||t.hotTub)&&n.push("hot_tub"),(e.coldPlunge||t.coldPlunge)&&n.push("cold_plunge"),(e.massage||t.massage)&&n.push("massage_room"),n}function no(e){return{never:"rarely",rarely:"rarely",occasionally:"occasionally",monthly:"regularly",weekly:"frequently",frequently:"frequently"}[e]||"occasionally"}function ao(e){return{none:"self_sufficient",occasional:"occasional","part-time":"regular",regular:"regular","full-time":"full_service",full_service:"full_service",estate:"estate"}[e]||"self_sufficient"}function io(e){return{open:"welcoming",welcoming:"welcoming",balanced:"selective",selective:"selective",formal:"formal",private:"sanctuary",sanctuary:"sanctuary"}[e]||"selective"}function ro(e){return{no:"no",none:"no",occasional:"occasional",regular:"regular",primary:"primary",executive:"executive","full-time":"primary"}[e]||"occasional"}function oo(e){return{none:"minimal",minimal:"minimal",basic:"casual",casual:"casual",enthusiast:"enthusiast",serious:"serious",professional:"professional"}[e]||"enthusiast"}var so,lo;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter(e=>"number"!==typeof t[t[e]]),a={};for(const e of n)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map(e=>"string"===typeof e?"'".concat(e,"'"):e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t}(so||(so={})),function(e){e.mergeShapes=(e,t)=>s(s({},e),t)}(lo||(lo={}));const co=so.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),uo=e=>{switch(typeof e){case"undefined":return co.undefined;case"string":return co.string;case"number":return isNaN(e)?co.nan:co.number;case"boolean":return co.boolean;case"function":return co.function;case"bigint":return co.bigint;case"symbol":return co.symbol;case"object":return Array.isArray(e)?co.array:null===e?co.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?co.promise:"undefined"!==typeof Map&&e instanceof Map?co.map:"undefined"!==typeof Set&&e instanceof Set?co.set:"undefined"!==typeof Date&&e instanceof Date?co.date:co.object;default:return co.unknown}},ho=so.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class po extends Error{constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},a=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(a);else if("invalid_return_type"===i.code)a(i.returnTypeError);else if("invalid_arguments"===i.code)a(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,a=0;for(;a<i.path.length;){const n=i.path[a];a===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(this),n}static assert(e){if(!(e instanceof po))throw new Error("Not a ZodError: ".concat(e))}toString(){return this.message}get message(){return JSON.stringify(this.issues,so.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}po.create=e=>new po(e);const mo=(e,t)=>{let n;switch(e.code){case ho.invalid_type:n=e.received===co.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case ho.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,so.jsonStringifyReplacer));break;case ho.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(so.joinValues(e.keys,", "));break;case ho.invalid_union:n="Invalid input";break;case ho.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(so.joinValues(e.options));break;case ho.invalid_enum_value:n="Invalid enum value. Expected ".concat(so.joinValues(e.options),", received '").concat(e.received,"'");break;case ho.invalid_arguments:n="Invalid function arguments";break;case ho.invalid_return_type:n="Invalid function return type";break;case ho.invalid_date:n="Invalid date";break;case ho.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"===typeof e.validation.position&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):so.assertNever(e.validation):n="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case ho.too_small:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case ho.too_big:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case ho.custom:n="Invalid input";break;case ho.invalid_intersection_types:n="Intersection results could not be merged";break;case ho.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case ho.not_finite:n="Number must be finite";break;default:n=t.defaultError,so.assertNever(e)}return{message:n}};let fo=mo;function go(){return fo}const vo=e=>{const{data:t,path:n,errorMaps:a,issueData:i}=e,r=[...n,...i.path||[]],o=s(s({},i),{},{path:r});if(void 0!==i.message)return s(s({},i),{},{path:r,message:i.message});let l="";const c=a.filter(e=>!!e).slice().reverse();for(const s of c)l=s(o,{data:t,defaultError:l}).message;return s(s({},i),{},{path:r,message:l})};function yo(e,t){const n=go(),a=vo({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===mo?void 0:mo].filter(e=>!!e)});e.common.issues.push(a)}class bo{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if("aborted"===a.status)return xo;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const e=await a.key,t=await a.value;n.push({key:e,value:t})}return bo.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:t,value:i}=a;if("aborted"===t.status)return xo;if("aborted"===i.status)return xo;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof i.value&&!a.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const xo=Object.freeze({status:"aborted"}),So=e=>({status:"dirty",value:e}),jo=e=>({status:"valid",value:e}),wo=e=>"aborted"===e.status,No=e=>"dirty"===e.status,ko=e=>"valid"===e.status,_o=e=>"undefined"!==typeof Promise&&e instanceof Promise;function Co(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)}function Po(e,t,n,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,n):i?i.value=n:t.set(e,n),n}var Fo,Ao,Lo;"function"===typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message}(Fo||(Fo={}));class Mo{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ro=(e,t)=>{if(ko(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new po(e.common.issues);return this._error=t,this._error}}};function Io(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:a,description:i}=e;if(t&&(n||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var r,o;const{message:s}=e;return"invalid_enum_value"===t.code?{message:null!==s&&void 0!==s?s:i.defaultError}:"undefined"===typeof i.data?{message:null!==(r=null!==s&&void 0!==s?s:a)&&void 0!==r?r:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(o=null!==s&&void 0!==s?s:n)&&void 0!==o?o:i.defaultError}},description:i}}class To{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return uo(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:uo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new bo,ctx:{common:e.parent.common,data:e.data,parsedType:uo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(_o(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:null!==(n=null===t||void 0===t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:uo(e)},i=this._parseSync({data:e,path:a.path,parent:a});return Ro(a,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:uo(e)},a=this._parse({data:e,path:n.path,parent:n}),i=await(_o(a)?a:Promise.resolve(a));return Ro(n,i)}refine(e,t){return this._refinement((n,a)=>{const i=e(n),r=()=>a.addIssue(s({code:ho.custom},(e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t)(n)));return"undefined"!==typeof Promise&&i instanceof Promise?i.then(e=>!!e||(r(),!1)):!!i||(r(),!1)})}refinement(e,t){return this._refinement((n,a)=>!!e(n)||(a.addIssue("function"===typeof t?t(n,a):t),!1))}_refinement(e){return new Ls({schema:this,typeName:Gs.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ms.create(this,this._def)}nullable(){return Rs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hs.create(this,this._def)}promise(){return As.create(this,this._def)}or(e){return fs.create([this,e],this._def)}and(e){return bs.create(this,e,this._def)}transform(e){return new Ls(s(s({},Io(this._def)),{},{schema:this,typeName:Gs.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t="function"===typeof e?e:()=>e;return new Is(s(s({},Io(this._def)),{},{innerType:this,defaultValue:t,typeName:Gs.ZodDefault}))}brand(){return new Es(s({typeName:Gs.ZodBranded,type:this},Io(this._def)))}catch(e){const t="function"===typeof e?e:()=>e;return new Ts(s(s({},Io(this._def)),{},{innerType:this,catchValue:t,typeName:Gs.ZodCatch}))}describe(e){return new(0,this.constructor)(s(s({},this._def),{},{description:e}))}pipe(e){return Os.create(this,e)}readonly(){return Bs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zo=/^c[^\s-]{8,}$/i,Do=/^[0-9a-z]+$/,Eo=/^[0-9A-HJKMNP-TV-Z]{26}$/,Oo=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Bo=/^[a-z0-9_-]{21}$/i,qo=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ho=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Go;const Wo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Uo=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Ko=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Vo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Yo=new RegExp("^".concat(Vo,"$"));function Zo(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):null==e.precision&&(t="".concat(t,"(\\.\\d+)?")),t}function $o(e){return new RegExp("^".concat(Zo(e),"$"))}function Qo(e){let t="".concat(Vo,"T").concat(Zo(e));const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(n.join("|"),")"),new RegExp("^".concat(t,"$"))}function Jo(e,t){return!("v4"!==t&&t||!Wo.test(e))||!("v6"!==t&&t||!Uo.test(e))}class Xo extends To{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==co.string){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.string,received:t.parsedType}),xo}const t=new bo;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const i=e.data.length>a.value,r=e.data.length<a.value;(i||r)&&(n=this._getOrReturnCtx(e,n),i?yo(n,{code:ho.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):r&&yo(n,{code:ho.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)Ho.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"email",code:ho.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)Go||(Go=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Go.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"emoji",code:ho.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)Oo.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"uuid",code:ho.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)Bo.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"nanoid",code:ho.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)zo.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"cuid",code:ho.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)Do.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"cuid2",code:ho.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)Eo.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"ulid",code:ho.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(dt){n=this._getOrReturnCtx(e,n),yo(n,{validation:"url",code:ho.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"regex",code:ho.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){Qo(a).test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else if("date"===a.kind){Yo.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.invalid_string,validation:"date",message:a.message}),t.dirty())}else if("time"===a.kind){$o(a).test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.invalid_string,validation:"time",message:a.message}),t.dirty())}else"duration"===a.kind?qo.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"duration",code:ho.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?Jo(e.data,a.version)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"ip",code:ho.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?Ko.test(e.data)||(n=this._getOrReturnCtx(e,n),yo(n,{validation:"base64",code:ho.invalid_string,message:a.message}),t.dirty()):so.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),s({validation:t,code:ho.invalid_string},Fo.errToObj(n)))}_addCheck(e){return new Xo(s(s({},this._def),{},{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(s({kind:"email"},Fo.errToObj(e)))}url(e){return this._addCheck(s({kind:"url"},Fo.errToObj(e)))}emoji(e){return this._addCheck(s({kind:"emoji"},Fo.errToObj(e)))}uuid(e){return this._addCheck(s({kind:"uuid"},Fo.errToObj(e)))}nanoid(e){return this._addCheck(s({kind:"nanoid"},Fo.errToObj(e)))}cuid(e){return this._addCheck(s({kind:"cuid"},Fo.errToObj(e)))}cuid2(e){return this._addCheck(s({kind:"cuid2"},Fo.errToObj(e)))}ulid(e){return this._addCheck(s({kind:"ulid"},Fo.errToObj(e)))}base64(e){return this._addCheck(s({kind:"base64"},Fo.errToObj(e)))}ip(e){return this._addCheck(s({kind:"ip"},Fo.errToObj(e)))}datetime(e){var t,n;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(s({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null===e||void 0===e?void 0:e.local)&&void 0!==n&&n},Fo.errToObj(null===e||void 0===e?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"===typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(s({kind:"time",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision},Fo.errToObj(null===e||void 0===e?void 0:e.message)))}duration(e){return this._addCheck(s({kind:"duration"},Fo.errToObj(e)))}regex(e,t){return this._addCheck(s({kind:"regex",regex:e},Fo.errToObj(t)))}includes(e,t){return this._addCheck(s({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position},Fo.errToObj(null===t||void 0===t?void 0:t.message)))}startsWith(e,t){return this._addCheck(s({kind:"startsWith",value:e},Fo.errToObj(t)))}endsWith(e,t){return this._addCheck(s({kind:"endsWith",value:e},Fo.errToObj(t)))}min(e,t){return this._addCheck(s({kind:"min",value:e},Fo.errToObj(t)))}max(e,t){return this._addCheck(s({kind:"max",value:e},Fo.errToObj(t)))}length(e,t){return this._addCheck(s({kind:"length",value:e},Fo.errToObj(t)))}nonempty(e){return this.min(1,Fo.errToObj(e))}trim(){return new Xo(s(s({},this._def),{},{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new Xo(s(s({},this._def),{},{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new Xo(s(s({},this._def),{},{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function es(e,t){const n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=n>a?n:a;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}Xo.create=e=>{var t;return new Xo(s({checks:[],typeName:Gs.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t},Io(e)))};class ts extends To{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==co.number){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.number,received:t.parsedType}),xo}let t;const n=new bo;for(const a of this._def.checks)if("int"===a.kind)so.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),yo(t,{code:ho.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty());else if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),yo(t,{code:ho.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),yo(t,{code:ho.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else"multipleOf"===a.kind?0!==es(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),yo(t,{code:ho.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),yo(t,{code:ho.not_finite,message:a.message}),n.dirty()):so.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Fo.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Fo.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Fo.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Fo.toString(t))}setLimit(e,t,n,a){return new ts(s(s({},this._def),{},{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Fo.toString(a)}]}))}_addCheck(e){return new ts(s(s({},this._def),{},{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:Fo.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Fo.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Fo.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Fo.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Fo.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Fo.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Fo.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Fo.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Fo.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&so.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ts.create=e=>new ts(s({checks:[],typeName:Gs.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1},Io(e)));class ns extends To{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==co.bigint){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.bigint,received:t.parsedType}),xo}let t;const n=new bo;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),yo(t,{code:ho.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),yo(t,{code:ho.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),yo(t,{code:ho.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):so.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Fo.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Fo.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Fo.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Fo.toString(t))}setLimit(e,t,n,a){return new ns(s(s({},this._def),{},{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Fo.toString(a)}]}))}_addCheck(e){return new ns(s(s({},this._def),{},{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Fo.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Fo.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Fo.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Fo.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Fo.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ns.create=e=>{var t;return new ns(s({checks:[],typeName:Gs.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t},Io(e)))};class as extends To{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==co.boolean){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.boolean,received:t.parsedType}),xo}return jo(e.data)}}as.create=e=>new as(s({typeName:Gs.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1},Io(e)));class is extends To{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==co.date){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.date,received:t.parsedType}),xo}if(isNaN(e.data.getTime())){return yo(this._getOrReturnCtx(e),{code:ho.invalid_date}),xo}const t=new bo;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),yo(n,{code:ho.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):so.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new is(s(s({},this._def),{},{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Fo.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Fo.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}is.create=e=>new is(s({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:Gs.ZodDate},Io(e)));class rs extends To{_parse(e){if(this._getType(e)!==co.symbol){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.symbol,received:t.parsedType}),xo}return jo(e.data)}}rs.create=e=>new rs(s({typeName:Gs.ZodSymbol},Io(e)));class os extends To{_parse(e){if(this._getType(e)!==co.undefined){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.undefined,received:t.parsedType}),xo}return jo(e.data)}}os.create=e=>new os(s({typeName:Gs.ZodUndefined},Io(e)));class ss extends To{_parse(e){if(this._getType(e)!==co.null){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.null,received:t.parsedType}),xo}return jo(e.data)}}ss.create=e=>new ss(s({typeName:Gs.ZodNull},Io(e)));class ls extends To{constructor(){super(...arguments),this._any=!0}_parse(e){return jo(e.data)}}ls.create=e=>new ls(s({typeName:Gs.ZodAny},Io(e)));class cs extends To{constructor(){super(...arguments),this._unknown=!0}_parse(e){return jo(e.data)}}cs.create=e=>new cs(s({typeName:Gs.ZodUnknown},Io(e)));class ds extends To{_parse(e){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.never,received:t.parsedType}),xo}}ds.create=e=>new ds(s({typeName:Gs.ZodNever},Io(e)));class us extends To{_parse(e){if(this._getType(e)!==co.undefined){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.void,received:t.parsedType}),xo}return jo(e.data)}}us.create=e=>new us(s({typeName:Gs.ZodVoid},Io(e)));class hs extends To{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==co.array)return yo(t,{code:ho.invalid_type,expected:co.array,received:t.parsedType}),xo;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,i=t.data.length<a.exactLength.value;(e||i)&&(yo(t,{code:e?ho.too_big:ho.too_small,minimum:i?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(yo(t,{code:ho.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(yo(t,{code:ho.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>a.type._parseAsync(new Mo(t,e,t.path,n)))).then(e=>bo.mergeArray(n,e));const i=[...t.data].map((e,n)=>a.type._parseSync(new Mo(t,e,t.path,n)));return bo.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new hs(s(s({},this._def),{},{minLength:{value:e,message:Fo.toString(t)}}))}max(e,t){return new hs(s(s({},this._def),{},{maxLength:{value:e,message:Fo.toString(t)}}))}length(e,t){return new hs(s(s({},this._def),{},{exactLength:{value:e,message:Fo.toString(t)}}))}nonempty(e){return this.min(1,e)}}function ps(e){if(e instanceof ms){const t={};for(const n in e.shape){const a=e.shape[n];t[n]=Ms.create(ps(a))}return new ms(s(s({},e._def),{},{shape:()=>t}))}return e instanceof hs?new hs(s(s({},e._def),{},{type:ps(e.element)})):e instanceof Ms?Ms.create(ps(e.unwrap())):e instanceof Rs?Rs.create(ps(e.unwrap())):e instanceof xs?xs.create(e.items.map(e=>ps(e))):e}hs.create=(e,t)=>new hs(s({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Gs.ZodArray},Io(t)));class ms extends To{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=so.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==co.object){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.object,received:t.parsedType}),xo}const{status:t,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof ds&&"strip"===this._def.unknownKeys))for(const s in n.data)i.includes(s)||r.push(s);const o=[];for(const s of i){const e=a[s],t=n.data[s];o.push({key:{status:"valid",value:s},value:e._parse(new Mo(n,t,n.path,s)),alwaysSet:s in n.data})}if(this._def.catchall instanceof ds){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of r)o.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)r.length>0&&(yo(n,{code:ho.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const a=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new Mo(n,a,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of o){const n=await t.key,a=await t.value;e.push({key:n,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>bo.mergeObjectSync(t,e)):bo.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return Fo.errToObj,new ms(s(s({},this._def),{},{unknownKeys:"strict"},void 0!==e?{errorMap:(t,n)=>{var a,i,r,o;const s=null!==(r=null===(i=(a=this._def).errorMap)||void 0===i?void 0:i.call(a,t,n).message)&&void 0!==r?r:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=Fo.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}))}strip(){return new ms(s(s({},this._def),{},{unknownKeys:"strip"}))}passthrough(){return new ms(s(s({},this._def),{},{unknownKeys:"passthrough"}))}extend(e){return new ms(s(s({},this._def),{},{shape:()=>s(s({},this._def.shape()),e)}))}merge(e){return new ms({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>s(s({},this._def.shape()),e._def.shape()),typeName:Gs.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ms(s(s({},this._def),{},{catchall:e}))}pick(e){const t={};return so.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new ms(s(s({},this._def),{},{shape:()=>t}))}omit(e){const t={};return so.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new ms(s(s({},this._def),{},{shape:()=>t}))}deepPartial(){return ps(this)}partial(e){const t={};return so.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}),new ms(s(s({},this._def),{},{shape:()=>t}))}required(e){const t={};return so.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Ms;)e=e._def.innerType;t[n]=e}}),new ms(s(s({},this._def),{},{shape:()=>t}))}keyof(){return Cs(so.objectKeys(this.shape))}}ms.create=(e,t)=>new ms(s({shape:()=>e,unknownKeys:"strip",catchall:ds.create(),typeName:Gs.ZodObject},Io(t))),ms.strictCreate=(e,t)=>new ms(s({shape:()=>e,unknownKeys:"strict",catchall:ds.create(),typeName:Gs.ZodObject},Io(t))),ms.lazycreate=(e,t)=>new ms(s({shape:e,unknownKeys:"strip",catchall:ds.create(),typeName:Gs.ZodObject},Io(t)));class fs extends To{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n=s(s({},t),{},{common:s(s({},t.common),{},{issues:[]}),parent:null});return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;const n=e.map(e=>new po(e.ctx.common.issues));return yo(t,{code:ho.invalid_union,unionErrors:n}),xo});{let e;const a=[];for(const r of n){const n=s(s({},t),{},{common:s(s({},t.common),{},{issues:[]}),parent:null}),i=r._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&a.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=a.map(e=>new po(e));return yo(t,{code:ho.invalid_union,unionErrors:i}),xo}}get options(){return this._def.options}}fs.create=(e,t)=>new fs(s({options:e,typeName:Gs.ZodUnion},Io(t)));const gs=e=>e instanceof ks?gs(e.schema):e instanceof Ls?gs(e.innerType()):e instanceof _s?[e.value]:e instanceof Ps?e.options:e instanceof Fs?so.objectValues(e.enum):e instanceof Is?gs(e._def.innerType):e instanceof os?[void 0]:e instanceof ss?[null]:e instanceof Ms?[void 0,...gs(e.unwrap())]:e instanceof Rs?[null,...gs(e.unwrap())]:e instanceof Es||e instanceof Bs?gs(e.unwrap()):e instanceof Ts?gs(e._def.innerType):[];class vs extends To{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==co.object)return yo(t,{code:ho.invalid_type,expected:co.object,received:t.parsedType}),xo;const n=this.discriminator,a=t.data[n],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(yo(t,{code:ho.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),xo)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const i of t){const t=gs(i.shape[e]);if(!t.length)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(const n of t){if(a.has(n))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(n)));a.set(n,i)}}return new vs(s({typeName:Gs.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a},Io(n)))}}function ys(e,t){const n=uo(e),a=uo(t);if(e===t)return{valid:!0,data:e};if(n===co.object&&a===co.object){const n=so.objectKeys(t),a=so.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i=s(s({},e),t);for(const r of a){const n=ys(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(n===co.array&&a===co.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let a=0;a<e.length;a++){const i=ys(e[a],t[a]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===co.date&&a===co.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class bs extends To{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(e,a)=>{if(wo(e)||wo(a))return xo;const i=ys(e.value,a.value);return i.valid?((No(e)||No(a))&&t.dirty(),{status:t.value,value:i.data}):(yo(n,{code:ho.invalid_intersection_types}),xo)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(e=>{let[t,n]=e;return a(t,n)}):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}bs.create=(e,t,n)=>new bs(s({left:e,right:t,typeName:Gs.ZodIntersection},Io(n)));class xs extends To{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==co.array)return yo(n,{code:ho.invalid_type,expected:co.array,received:n.parsedType}),xo;if(n.data.length<this._def.items.length)return yo(n,{code:ho.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xo;!this._def.rest&&n.data.length>this._def.items.length&&(yo(n,{code:ho.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((e,t)=>{const a=this._def.items[t]||this._def.rest;return a?a._parse(new Mo(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(a).then(e=>bo.mergeArray(t,e)):bo.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new xs(s(s({},this._def),{},{rest:e}))}}xs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xs(s({items:e,typeName:Gs.ZodTuple,rest:null},Io(t)))};class Ss extends To{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==co.object)return yo(n,{code:ho.invalid_type,expected:co.object,received:n.parsedType}),xo;const a=[],i=this._def.keyType,r=this._def.valueType;for(const o in n.data)a.push({key:i._parse(new Mo(n,o,n.path,o)),value:r._parse(new Mo(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?bo.mergeObjectAsync(t,a):bo.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return new Ss(t instanceof To?s({keyType:e,valueType:t,typeName:Gs.ZodRecord},Io(n)):s({keyType:Xo.create(),valueType:e,typeName:Gs.ZodRecord},Io(t)))}}class js extends To{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==co.map)return yo(n,{code:ho.invalid_type,expected:co.map,received:n.parsedType}),xo;const a=this._def.keyType,i=this._def.valueType,r=[...n.data.entries()].map((e,t)=>{let[r,o]=e;return{key:a._parse(new Mo(n,r,n.path,[t,"key"])),value:i._parse(new Mo(n,o,n.path,[t,"value"]))}});if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of r){const a=await n.key,i=await n.value;if("aborted"===a.status||"aborted"===i.status)return xo;"dirty"!==a.status&&"dirty"!==i.status||t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of r){const a=n.key,i=n.value;if("aborted"===a.status||"aborted"===i.status)return xo;"dirty"!==a.status&&"dirty"!==i.status||t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}}}}js.create=(e,t,n)=>new js(s({valueType:t,keyType:e,typeName:Gs.ZodMap},Io(n)));class ws extends To{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==co.set)return yo(n,{code:ho.invalid_type,expected:co.set,received:n.parsedType}),xo;const a=this._def;null!==a.minSize&&n.data.size<a.minSize.value&&(yo(n,{code:ho.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&n.data.size>a.maxSize.value&&(yo(n,{code:ho.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function r(e){const n=new Set;for(const a of e){if("aborted"===a.status)return xo;"dirty"===a.status&&t.dirty(),n.add(a.value)}return{status:t.value,value:n}}const o=[...n.data.values()].map((e,t)=>i._parse(new Mo(n,e,n.path,t)));return n.common.async?Promise.all(o).then(e=>r(e)):r(o)}min(e,t){return new ws(s(s({},this._def),{},{minSize:{value:e,message:Fo.toString(t)}}))}max(e,t){return new ws(s(s({},this._def),{},{maxSize:{value:e,message:Fo.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ws.create=(e,t)=>new ws(s({valueType:e,minSize:null,maxSize:null,typeName:Gs.ZodSet},Io(t)));class Ns extends To{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==co.function)return yo(t,{code:ho.invalid_type,expected:co.function,received:t.parsedType}),xo;function n(e,n){return vo({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,go(),mo].filter(e=>!!e),issueData:{code:ho.invalid_arguments,argumentsError:n}})}function a(e,n){return vo({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,go(),mo].filter(e=>!!e),issueData:{code:ho.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof As){const e=this;return jo(async function(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];const l=new po([]),c=await e._def.args.parseAsync(o,i).catch(e=>{throw l.addIssue(n(o,e)),l}),d=await Reflect.apply(r,this,c);return await e._def.returns._def.type.parseAsync(d,i).catch(e=>{throw l.addIssue(a(d,e)),l})})}{const e=this;return jo(function(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];const l=e._def.args.safeParse(o,i);if(!l.success)throw new po([n(o,l.error)]);const c=Reflect.apply(r,this,l.data),d=e._def.returns.safeParse(c,i);if(!d.success)throw new po([a(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ns(s(s({},this._def),{},{args:xs.create(t).rest(cs.create())}))}returns(e){return new Ns(s(s({},this._def),{},{returns:e}))}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Ns(s({args:e||xs.create([]).rest(cs.create()),returns:t||cs.create(),typeName:Gs.ZodFunction},Io(n)))}}class ks extends To{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ks.create=(e,t)=>new ks(s({getter:e,typeName:Gs.ZodLazy},Io(t)));class _s extends To{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return yo(t,{received:t.data,code:ho.invalid_literal,expected:this._def.value}),xo}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Cs(e,t){return new Ps(s({values:e,typeName:Gs.ZodEnum},Io(t)))}_s.create=(e,t)=>new _s(s({value:e,typeName:Gs.ZodLiteral},Io(t)));class Ps extends To{constructor(){super(...arguments),Ao.set(this,void 0)}_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return yo(t,{expected:so.joinValues(n),received:t.parsedType,code:ho.invalid_type}),xo}if(Co(this,Ao,"f")||Po(this,Ao,new Set(this._def.values),"f"),!Co(this,Ao,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return yo(t,{received:t.data,code:ho.invalid_enum_value,options:n}),xo}return jo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return Ps.create(e,s(s({},this._def),t))}exclude(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return Ps.create(this.options.filter(t=>!e.includes(t)),s(s({},this._def),t))}}Ao=new WeakMap,Ps.create=Cs;class Fs extends To{constructor(){super(...arguments),Lo.set(this,void 0)}_parse(e){const t=so.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==co.string&&n.parsedType!==co.number){const e=so.objectValues(t);return yo(n,{expected:so.joinValues(e),received:n.parsedType,code:ho.invalid_type}),xo}if(Co(this,Lo,"f")||Po(this,Lo,new Set(so.getValidEnumValues(this._def.values)),"f"),!Co(this,Lo,"f").has(e.data)){const e=so.objectValues(t);return yo(n,{received:n.data,code:ho.invalid_enum_value,options:e}),xo}return jo(e.data)}get enum(){return this._def.values}}Lo=new WeakMap,Fs.create=(e,t)=>new Fs(s({values:e,typeName:Gs.ZodNativeEnum},Io(t)));class As extends To{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==co.promise&&!1===t.common.async)return yo(t,{code:ho.invalid_type,expected:co.promise,received:t.parsedType}),xo;const n=t.parsedType===co.promise?t.data:Promise.resolve(t.data);return jo(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}As.create=(e,t)=>new As(s({type:e,typeName:Gs.ZodPromise},Io(t)));class Ls extends To{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Gs.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{yo(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){const e=a.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return xo;const a=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===a.status?xo:"dirty"===a.status||"dirty"===t.value?So(a.value):a});{if("aborted"===t.value)return xo;const a=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===a.status?xo:"dirty"===a.status||"dirty"===t.value?So(a.value):a}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===a.status?xo:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?xo:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ko(e))return e;const r=a.transform(e.value,i);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>ko(e)?Promise.resolve(a.transform(e.value,i)).then(e=>({status:t.value,value:e})):e)}so.assertNever(a)}}Ls.create=(e,t,n)=>new Ls(s({schema:e,typeName:Gs.ZodEffects,effect:t},Io(n))),Ls.createWithPreprocess=(e,t,n)=>new Ls(s({schema:t,effect:{type:"preprocess",transform:e},typeName:Gs.ZodEffects},Io(n)));class Ms extends To{_parse(e){return this._getType(e)===co.undefined?jo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ms.create=(e,t)=>new Ms(s({innerType:e,typeName:Gs.ZodOptional},Io(t)));class Rs extends To{_parse(e){return this._getType(e)===co.null?jo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rs.create=(e,t)=>new Rs(s({innerType:e,typeName:Gs.ZodNullable},Io(t)));class Is extends To{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===co.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Is.create=(e,t)=>new Is(s({innerType:e,typeName:Gs.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default},Io(t)));class Ts extends To{_parse(e){const{ctx:t}=this._processInputParams(e),n=s(s({},t),{},{common:s(s({},t.common),{},{issues:[]})}),a=this._def.innerType._parse({data:n.data,path:n.path,parent:s({},n)});return _o(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new po(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new po(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ts.create=(e,t)=>new Ts(s({innerType:e,typeName:Gs.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch},Io(t)));class zs extends To{_parse(e){if(this._getType(e)!==co.nan){const t=this._getOrReturnCtx(e);return yo(t,{code:ho.invalid_type,expected:co.nan,received:t.parsedType}),xo}return{status:"valid",value:e.data}}}zs.create=e=>new zs(s({typeName:Gs.ZodNaN},Io(e)));const Ds=Symbol("zod_brand");class Es extends To{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Os extends To{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?xo:"dirty"===e.status?(t.dirty(),So(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?xo:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Os({in:e,out:t,typeName:Gs.ZodPipeline})}}class Bs extends To{_parse(e){const t=this._def.innerType._parse(e),n=e=>(ko(e)&&(e.value=Object.freeze(e.value)),e);return _o(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}function qs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?ls.create().superRefine((a,i)=>{var r,o;if(!e(a)){const e="function"===typeof t?t(a):"string"===typeof t?{message:t}:t,l=null===(o=null!==(r=e.fatal)&&void 0!==r?r:n)||void 0===o||o,c="string"===typeof e?{message:e}:e;i.addIssue(s(s({code:"custom"},c),{},{fatal:l}))}}):ls.create()}Bs.create=(e,t)=>new Bs(s({innerType:e,typeName:Gs.ZodReadonly},Io(t)));const Hs={object:ms.lazycreate};var Gs;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Gs||(Gs={}));const Ws=Xo.create,Us=ts.create,Ks=zs.create,Vs=ns.create,Ys=as.create,Zs=is.create,$s=rs.create,Qs=os.create,Js=ss.create,Xs=ls.create,el=cs.create,tl=ds.create,nl=us.create,al=hs.create,il=ms.create,rl=ms.strictCreate,ol=fs.create,sl=vs.create,ll=bs.create,cl=xs.create,dl=Ss.create,ul=js.create,hl=ws.create,pl=Ns.create,ml=ks.create,fl=_s.create,gl=Ps.create,vl=Fs.create,yl=As.create,bl=Ls.create,xl=Ms.create,Sl=Rs.create,jl=Ls.createWithPreprocess,wl=Os.create,Nl={string:e=>Xo.create(s(s({},e),{},{coerce:!0})),number:e=>ts.create(s(s({},e),{},{coerce:!0})),boolean:e=>as.create(s(s({},e),{},{coerce:!0})),bigint:e=>ns.create(s(s({},e),{},{coerce:!0})),date:e=>is.create(s(s({},e),{},{coerce:!0}))},kl=xo;var _l=Object.freeze({__proto__:null,defaultErrorMap:mo,setErrorMap:function(e){fo=e},getErrorMap:go,makeIssue:vo,EMPTY_PATH:[],addIssueToContext:yo,ParseStatus:bo,INVALID:xo,DIRTY:So,OK:jo,isAborted:wo,isDirty:No,isValid:ko,isAsync:_o,get util(){return so},get objectUtil(){return lo},ZodParsedType:co,getParsedType:uo,ZodType:To,datetimeRegex:Qo,ZodString:Xo,ZodNumber:ts,ZodBigInt:ns,ZodBoolean:as,ZodDate:is,ZodSymbol:rs,ZodUndefined:os,ZodNull:ss,ZodAny:ls,ZodUnknown:cs,ZodNever:ds,ZodVoid:us,ZodArray:hs,ZodObject:ms,ZodUnion:fs,ZodDiscriminatedUnion:vs,ZodIntersection:bs,ZodTuple:xs,ZodRecord:Ss,ZodMap:js,ZodSet:ws,ZodFunction:Ns,ZodLazy:ks,ZodLiteral:_s,ZodEnum:Ps,ZodNativeEnum:Fs,ZodPromise:As,ZodEffects:Ls,ZodTransformer:Ls,ZodOptional:Ms,ZodNullable:Rs,ZodDefault:Is,ZodCatch:Ts,ZodNaN:zs,BRAND:Ds,ZodBranded:Es,ZodPipeline:Os,ZodReadonly:Bs,custom:qs,Schema:To,ZodSchema:To,late:Hs,get ZodFirstPartyTypeKind(){return Gs},coerce:Nl,any:Xs,array:al,bigint:Vs,boolean:Ys,date:Zs,discriminatedUnion:sl,effect:bl,enum:gl,function:pl,instanceof:function(e){return qs(t=>t instanceof e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)})},intersection:ll,lazy:ml,literal:fl,map:ul,nan:Ks,nativeEnum:vl,never:tl,null:Js,nullable:Sl,number:Us,object:il,oboolean:()=>Ys().optional(),onumber:()=>Us().optional(),optional:xl,ostring:()=>Ws().optional(),pipeline:wl,preprocess:jl,promise:yl,record:dl,set:hl,strictObject:rl,string:Ws,symbol:$s,transformer:bl,tuple:cl,undefined:Qs,union:ol,unknown:el,void:nl,NEVER:kl,ZodIssueCode:ho,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:po});const Cl=_l.enum(["single_family","multi_family","vacation","winter"]),Pl=_l.enum(["rare","quarterly","monthly","weekly"]),Fl=_l.enum(["none","part_time","full_time","live_in"]),Al=_l.enum(["open","balanced","formal","private"]),Ll=_l.enum(["none","pool_only","pool_spa","full_wellness"]),Ml=_l.enum(["pass","warning","fail","pending"]),Rl=_l.enum(["kickoff","concept","schematic","development"]),Il=_l.enum(["zone_0","zone_1","zone_2","zone_3"]),Tl=_l.enum(["critical","warning"]),zl=_l.object({id:_l.string(),name:_l.string(),zone:_l.string(),acousticZone:Il.optional(),tags:_l.array(_l.string()).default([]),moduleId:_l.string().optional()}),Dl=_l.object({id:_l.string(),fromRoomId:_l.string(),toRoomId:_l.string(),type:_l.enum(["door","opening","passage"]).default("door")}),El=_l.object({id:_l.string(),name:_l.string(),type:_l.enum(["delivery_route","refuse_route","foh_to_terrace","guest_circulation","service_circulation"]),roomIds:_l.array(_l.string())}),Ol=_l.object({id:_l.string(),room1Id:_l.string(),room2Id:_l.string(),isFloor:_l.boolean().default(!1)}),Bl=_l.object({rooms:_l.array(zl).default([]),edges:_l.array(Dl).default([]),namedPaths:_l.array(El).default([]),sharedWalls:_l.array(Ol).default([])}),ql=_l.object({id:_l.string(),ruleId:_l.string(),severity:Tl,description:_l.string(),affectedRooms:_l.array(_l.string()).default([]),correctiveAction:_l.string()}),Hl=_l.object({id:_l.string(),name:_l.string(),trigger:_l.string(),description:_l.string().optional(),isPresent:_l.boolean().default(!1)}),Gl=_l.object({moduleId:_l.string(),moduleName:_l.string(),score:_l.number().min(0).max(100),threshold:_l.number().default(80),checklistItems:_l.array(_l.object({id:_l.string(),name:_l.string(),completed:_l.boolean().default(!1)})).default([])}),Wl=_l.object({id:_l.string(),projectId:_l.string(),timestamp:_l.string(),gateStatus:Ml,redFlags:_l.array(ql).default([]),requiredBridges:_l.array(Hl).default([]),moduleScores:_l.array(Gl).default([]),overallScore:_l.number().min(0).max(100)}),Ul=_l.object({typology:Cl.default("single_family"),entertainingLoad:Pl.default("monthly"),staffingLevel:Fl.default("none"),privacyPosture:Al.default("balanced"),wetProgram:Ll.default("none")}),Kl=_l.object({chefLedCooking:_l.boolean().default(!1),multiFamilyHosting:_l.boolean().default(!1),lateNightMedia:_l.boolean().default(!1),homeOffice:_l.boolean().default(!1),fitnessRecovery:_l.boolean().default(!1),poolEntertainment:_l.boolean().default(!1)}),Vl=_l.enum(["10k","15k","20k","custom"]),Yl=(_l.object({id:_l.string(),name:_l.string().min(1,"Project name is required"),description:_l.string().optional(),phase:Rl.default("kickoff"),activePreset:Vl.optional(),operatingModel:Ul.default({}),lifestylePriorities:Kl.default({}),scoreThreshold:_l.number().min(0).max(100).default(80),planGraph:Bl.optional(),latestValidation:Wl.optional(),createdAt:_l.string(),updatedAt:_l.string()}).omit({id:!0,createdAt:!0,updatedAt:!0,latestValidation:!0}),zl.omit({id:!0}),Dl.omit({id:!0}),_l.object({id:_l.string(),number:_l.number().min(1).max(8),name:_l.string(),shortName:_l.string(),description:_l.string(),primaryFocus:_l.string(),gateDeliverables:_l.array(_l.string()),checklistItems:_l.array(_l.object({id:_l.string(),name:_l.string(),description:_l.string().optional()}))}),_l.enum(["A","N","B","S"])),Zl=_l.object({id:_l.string(),code:_l.string(),name:_l.string(),targetSF:_l.number().min(0),zone:_l.string(),level:_l.number().min(1).default(1),bubbleId:_l.string().optional(),rationale:_l.string().optional()}),$l=_l.object({fromSpaceCode:_l.string(),toSpaceCode:_l.string(),relationship:Yl}),Ql=_l.object({id:_l.string(),name:_l.string(),description:_l.string().optional(),spaceCodes:_l.array(_l.string())}),Jl=_l.object({id:_l.string(),number:_l.number(),name:_l.string(),description:_l.string(),fromSpaceCode:_l.string(),toSpaceCode:_l.string(),purpose:_l.string().optional()}),Xl=_l.object({butlerPantry:_l.boolean().default(!1),guestAutonomy:_l.boolean().default(!1),soundLock:_l.boolean().default(!1),wetFeetIntercept:_l.boolean().default(!1),opsCore:_l.boolean().default(!1)}),ec=_l.object({id:_l.string(),projectId:_l.string(),name:_l.string(),totalSF:_l.number().min(0),levels:_l.number().min(1).default(2),hasBasement:_l.boolean().default(!1),bedrooms:_l.number().min(0).default(5),executiveSummary:_l.string().optional(),spaces:_l.array(Zl).default([]),adjacencyMatrix:_l.array($l).default([]),nodes:_l.array(Ql).default([]),crossLinks:_l.array(Jl).default([]),bridgeConfig:Xl.optional(),mermaidCode:_l.string().optional(),createdAt:_l.string(),updatedAt:_l.string()}),tc=(ec.omit({id:!0,createdAt:!0,updatedAt:!0}),_l.object({id:_l.string(),briefId:_l.string(),versionNumber:_l.number().min(1),name:_l.string(),description:_l.string().optional(),snapshot:ec,createdAt:_l.string()}).omit({id:!0,createdAt:!0}),_l.enum(["primary","secondary","vacation","winter","investment"])),nc=_l.enum(["couple_no_children","couple_young_children","couple_teenagers","couple_adult_children","multi_generational","single_occupant","blended_family"]),ac=_l.enum(["rarely","occasionally","regularly","frequently"]),ic=_l.enum(["intimate","moderate","large","grand"]),rc=_l.enum(["self_sufficient","occasional","regular","full_service","estate"]),oc=_l.enum(["welcoming","selective","formal","sanctuary"]),sc=_l.enum(["minimal","casual","enthusiast","serious","professional"]),lc=_l.enum(["none","basic","active","dedicated","resort"]),cc=_l.enum(["never","occasional","regular","primary","executive"]),dc=(_l.enum(["casual","enthusiast","dedicated","professional"]),_l.object({residenceType:tc,estimatedSF:_l.number().min(5e3).max(5e4),siteLotSize:_l.string().optional(),hasBasement:_l.boolean().default(!1),numberOfLevels:_l.number().min(1).max(5).default(2),climateZone:_l.string().optional(),existingStructure:_l.boolean().default(!1),targetCompletionDate:_l.string().optional()})),uc=_l.object({composition:nc,primaryResidents:_l.number().min(1).max(10),childrenAges:_l.array(_l.number()).default([]),elderlyResidents:_l.boolean().default(!1),mobilityConsiderations:_l.boolean().default(!1),pets:_l.array(_l.object({type:_l.string(),size:_l.enum(["small","medium","large"]).optional(),count:_l.number().default(1),specialNeeds:_l.string().optional()})).default([])}),hc=_l.object({frequency:ac,typicalScale:ic,maxEventScale:ic,formalDiningImportance:_l.number().min(1).max(5),outdoorEntertainingImportance:_l.number().min(1).max(5),cateringSupport:_l.boolean().default(!1),wineCollection:_l.boolean().default(!1),wineBottleCount:_l.number().optional(),barEntertainingImportance:_l.number().min(1).max(5)}),pc=_l.object({preference:rc,currentStaff:_l.array(_l.object({role:_l.string(),liveIn:_l.boolean().default(!1),fullTime:_l.boolean().default(!1)})).default([]),plannedStaff:_l.array(_l.string()).default([]),securityRequirements:_l.enum(["minimal","moderate","enhanced","comprehensive"]).default("minimal"),packageDeliveryVolume:_l.enum(["light","moderate","heavy"]).default("moderate")}),mc=_l.object({preference:oc,guestStayFrequency:_l.enum(["rarely","occasionally","regularly","frequently"]),typicalGuestStayDuration:_l.enum(["overnight","weekend","week","extended"]),multiGenerationalHosting:_l.boolean().default(!1),separateGuestAccess:_l.boolean().default(!1),workFromHome:cc,clientMeetingsAtHome:_l.boolean().default(!1),mediaRoom:_l.boolean().default(!1),lateNightMediaUse:_l.boolean().default(!1)}),fc=_l.object({cookingStyle:sc,primaryCook:_l.enum(["self","spouse","both","staff","mixed"]),breakfastStyle:_l.enum(["quick","casual","formal"]),dailyMealsAtHome:_l.number().min(0).max(3),showKitchenImportance:_l.number().min(1).max(5),professionalAppliances:_l.boolean().default(!1),multipleOvens:_l.boolean().default(!1),wineStorage:_l.boolean().default(!1),separateCateringKitchen:_l.boolean().default(!1)}),gc=_l.object({interest:lc,fitnessRoutine:_l.enum(["none","light","regular","intensive"]),poolDesired:_l.boolean().default(!1),poolType:_l.enum(["lap","recreational","infinity","indoor"]).optional(),spaFeatures:_l.array(_l.enum(["sauna","steam","hot_tub","cold_plunge","massage_room","meditation"])).default([]),outdoorActivities:_l.array(_l.string()).default([]),garageBays:_l.number().min(1).max(10).default(2),carCollection:_l.boolean().default(!1)}),vc=_l.object({accessibility:_l.array(_l.string()).default([]),medicalEquipment:_l.boolean().default(!1),artCollection:_l.boolean().default(!1),artClimateControl:_l.boolean().default(!1),musicRoom:_l.boolean().default(!1),recordingStudio:_l.boolean().default(!1),workshop:_l.boolean().default(!1),wineRoom:_l.boolean().default(!1),safe_room:_l.boolean().default(!1),customSpaces:_l.array(_l.object({name:_l.string(),description:_l.string(),estimatedSF:_l.number().optional(),adjacencyNeeds:_l.string().optional()})).default([])}),yc=_l.object({constructionBudgetRange:_l.enum(["under_5m","5m_10m","10m_20m","20m_50m","over_50m"]).optional(),ffeBudgetRange:_l.enum(["under_500k","500k_1m","1m_2m","2m_5m","over_5m"]).optional(),prioritizeQuality:_l.boolean().default(!0),phaseConstruction:_l.boolean().default(!1)});_l.object({id:_l.string(),clientId:_l.string(),projectId:_l.string().optional(),completedAt:_l.string().optional(),propertyContext:dc,householdProfile:uc,entertainingProfile:hc,staffingProfile:pc,privacyProfile:mc,kitchenProfile:fc,wellnessProfile:gc,specialRequirements:vc,budgetProfile:yc.optional(),additionalNotes:_l.string().optional(),createdAt:_l.string(),updatedAt:_l.string()});function bc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}const xc="Kitchen Rules Engine",Sc="Entertaining Spine",jc="Primary Suite Ecosystem",wc="Guest Wing Logic",Nc="Media & Acoustic Control",kc="Service Spine",_c="Wellness Program",Cc="Staff Layer",Pc=new Set(["FOY","GR","DR","FR","LIB","OFF","Foyer","Gallery","Great Room","Dining","Dining Room","Family Room","Library","Office","Living Room","Salon","Drawing Room"]),Fc=new Set(["PRI","PRIBATH","PRICL","PRILOUNGE","PRISIT","Primary Bedroom","Primary Bath","Primary Closet","Primary Lounge","Primary Sitting","Master Bedroom","Master Bath","Master Closet"]),Ac=new Set(["KIT","CHEF","SCUL","Kitchen","Show Kitchen","Chef's Kitchen","Scullery","Prep Kitchen"]),Lc=new Set(["KIT"]),Mc=new Set(["Kitchen","Show Kitchen","Principal Kitchen","Main Kitchen"]),Rc={zone_0:0,zone_1:1,zone_2:2,zone_3:3};function Ic(e){const{operatingModel:t,lifestylePriorities:n,planBrief:a,planGraph:i}=e,r=[],o=function(e,t){const n=[];t.lateNightMedia&&"private"===e.privacyPosture&&n.push({id:bc(),ruleId:"acoustic-001",severity:"warning",description:"Late-night media use may conflict with private posture - ensure sound isolation",affectedRooms:["Media Room","Primary Suite"],correctiveAction:"Add sound lock vestibule between media and sleeping zones"});"weekly"===e.entertainingLoad&&"none"===e.staffingLevel&&n.push({id:bc(),ruleId:"service-001",severity:"warning",description:"Weekly entertaining without staff may create service bottlenecks",affectedRooms:["Kitchen","Dining","Service Areas"],correctiveAction:"Consider part-time staffing or enhanced self-service design"});"full_wellness"===e.wetProgram&&"winter"===e.typology&&n.push({id:bc(),ruleId:"wellness-001",severity:"warning",description:"Full wellness program in winter residence requires enhanced humidity control",affectedRooms:["Spa","Steam Room","Pool Area"],correctiveAction:"Confirm MEP dehumidification strategy for cold climate operation"});t.multiFamilyHosting&&"private"===e.privacyPosture&&n.push({id:bc(),ruleId:"privacy-001",severity:"warning",description:"Multi-family hosting with private posture requires careful circulation design",affectedRooms:["Primary Suite","Guest Wing","Common Areas"],correctiveAction:"Verify guest circulation does not cross primary suite threshold"});t.chefLedCooking&&"live_in"===e.staffingLevel&&n.push({id:bc(),ruleId:"kitchen-001",severity:"warning",description:"Chef-led cooking with live-in staff requires clear kitchen territory boundaries",affectedRooms:["Show Kitchen","Scullery","Staff Kitchen"],correctiveAction:"Define primary cook zones and service support areas"});return n}(t,n);if(r.push(...o),i&&i.rooms.length>0){const e=Tc(i);r.push(...e);const t=Hc(i);r.push(...t);const n=Gc(i);n&&r.push(n)}if(a&&a.adjacencyMatrix&&a.adjacencyMatrix.length>0){const e=function(e){const t=[],n=new Map(e.spaces.map(e=>[e.code,e.name])),a=new Map;for(const o of e.adjacencyMatrix){a.has(o.fromSpaceCode)||a.set(o.fromSpaceCode,new Map),a.get(o.fromSpaceCode).set(o.toSpaceCode,o.relationship),a.has(o.toSpaceCode)||a.set(o.toSpaceCode,new Map);a.get(o.toSpaceCode).get(o.fromSpaceCode)||a.get(o.toSpaceCode).set(o.fromSpaceCode,o.relationship)}const i=new Set;for(const o of e.adjacencyMatrix){var r;const s=[o.fromSpaceCode,o.toSpaceCode].sort().join("-");if(i.has(s))continue;i.add(s);const l=o.relationship,c=null===(r=a.get(o.toSpaceCode))||void 0===r?void 0:r.get(o.fromSpaceCode);if(c&&l!==c&&("S"===l&&"A"===c||"A"===l&&"S"===c)){const e=n.get(o.fromSpaceCode)||o.fromSpaceCode,a=n.get(o.toSpaceCode)||o.toSpaceCode;t.push({id:bc(),ruleId:"adjacency-conflict-".concat(o.fromSpaceCode,"-").concat(o.toSpaceCode),severity:"critical",description:"Conflicting requirements: ".concat(e," and ").concat(a," have incompatible adjacency requirements (").concat(Wc[l]," vs ").concat(Wc[c],")"),affectedRooms:[e,a],correctiveAction:"Resolve the conflicting adjacency requirements in the program"})}if("S"===l){const a=e.nodes.find(e=>e.spaceCodes.includes(o.fromSpaceCode)),i=e.nodes.find(e=>e.spaceCodes.includes(o.toSpaceCode));if(a&&i&&a.id===i.id){const e=n.get(o.fromSpaceCode)||o.fromSpaceCode,i=n.get(o.toSpaceCode)||o.toSpaceCode;t.push({id:bc(),ruleId:"adjacency-".concat(o.fromSpaceCode,"-").concat(o.toSpaceCode),severity:"warning",description:"".concat(e," and ").concat(i," require separation but are grouped in the same circulation node (").concat(a.name,")"),affectedRooms:[e,i],correctiveAction:"Consider relocating one space to a different circulation node or ensure adequate acoustic/visual buffering"})}}}for(const o of e.adjacencyMatrix)if("A"===o.relationship){const e=n.has(o.fromSpaceCode),a=n.has(o.toSpaceCode);if(!e||!a){const a=e?o.toSpaceCode:o.fromSpaceCode,i=e?o.fromSpaceCode:o.toSpaceCode,r=n.get(i)||i;t.push({id:bc(),ruleId:"adjacency-missing-".concat(o.fromSpaceCode,"-").concat(o.toSpaceCode),severity:"warning",description:"".concat(r," requires adjacency to ").concat(a," but that space is not included in the program"),affectedRooms:[r],correctiveAction:"Consider adding ".concat(a," to the program or removing this adjacency requirement")})}}return t}(a);r.push(...e)}const l=function(e,t,n){const a=[],i=null===n||void 0===n?void 0:n.bridgeConfig,r=void 0!==i,o=("monthly"===e.entertainingLoad||"weekly"===e.entertainingLoad)&&("balanced"===e.privacyPosture||"formal"===e.privacyPosture);o&&a.push({id:bc(),name:"Butler Pantry Bridge",trigger:"".concat(Xc(e.entertainingLoad)," entertaining + ").concat(Xc(e.privacyPosture)," posture"),description:"Service corridor between kitchen and formal dining for seamless staff operation.",isPresent:!r||i.butlerPantry});const s=t.multiFamilyHosting||"vacation"===e.typology||"winter"===e.typology;s&&a.push({id:bc(),name:"Guest Autonomy Node",trigger:t.multiFamilyHosting?"Multi-family hosting enabled":"".concat(Xc(e.typology)," typology"),description:"Self-contained guest zone with independent entry, kitchenette, and living area.",isPresent:!r||i.guestAutonomy});t.lateNightMedia&&a.push({id:bc(),name:"Sound Lock Vestibule",trigger:"Late-night media use enabled",description:"Acoustic buffer zone (double-door vestibule) between media room and bedroom wing.",isPresent:!r||i.soundLock});const l="none"!==e.wetProgram||t.poolEntertainment;l&&a.push({id:bc(),name:"Wet-Feet Intercept",trigger:"none"!==e.wetProgram?"".concat(ed(e.wetProgram)," program"):"Pool entertainment enabled",description:"Transition zone with drainage, towel storage, and outdoor shower between pool and main house.",isPresent:!r||i.wetFeetIntercept});"none"!==e.staffingLevel&&a.push({id:bc(),name:"Ops Core",trigger:"".concat(td(e.staffingLevel)," staffing"),description:"Dedicated operations hub for staff including secure package receipt and deliveries staging.",isPresent:!r||i.opsCore});return a}(t,n,a);let c=function(e,t){const n=75;return[{moduleId:"module-01",moduleName:xc,score:Uc(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-02",moduleName:Sc,score:Kc(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-03",moduleName:jc,score:Vc(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-04",moduleName:wc,score:Yc(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-05",moduleName:Nc,score:Zc(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-06",moduleName:kc,score:$c(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-07",moduleName:_c,score:Qc(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-08",moduleName:Cc,score:Jc(n,e,t),threshold:80,checklistItems:[]}]}(t,n);a&&(c=function(e,t){const n={KIT:"module-01",SCUL:"module-01",BKFST:"module-01",CHEF:"module-01",FOY:"module-02",GR:"module-02",FDR:"module-02",TERR:"module-02",DR:"module-02",PRI:"module-03",PRIBATH:"module-03",PRICL:"module-03",PRILOUNGE:"module-03",GUEST1:"module-04",GUEST2:"module-04",GSL1:"module-04",SEC1:"module-04",MEDIA:"module-05",LIB:"module-05",MUD:"module-06",LAUN:"module-06",MEP:"module-06",GAR:"module-06",GYM:"module-07",SPA:"module-07",POOL:"module-07",STAFF:"module-08"},a={};for(const i of t){const e="critical"===i.severity?3:1;for(const t of i.affectedRooms){const i=t.toUpperCase().replace(/\s+/g,"");if(n[i]){const t=n[i];a[t]=(a[t]||0)+e;continue}for(const[t,r]of Object.entries(n))if(i.includes(t)||t.includes(i.slice(0,3))){a[r]=(a[r]||0)+e;break}}}return e.map(e=>{const t=a[e.moduleId]||0;if(t>0){const n=5*t;return s(s({},e),{},{score:Math.max(40,e.score-n)})}return e})}(c,r));const d=r.filter(e=>"critical"===e.severity).length,u=l.filter(e=>!e.isPresent).length,h=Math.round(c.reduce((e,t)=>e+t.score,0)/c.length);let p="pass";return d>0?p="fail":(u>0||h<80||r.length>0)&&(p="warning"),{id:bc(),projectId:e.projectId||"",timestamp:(new Date).toISOString(),gateStatus:p,redFlags:r,requiredBridges:l,moduleScores:c,overallScore:h}}function Tc(e){const t=[],n=zc(e.rooms);for(const a of e.namedPaths){const e=Dc(a,n);for(const n of e.violations)t.push(qc(a,n,e.roomsTraversed))}return t}function zc(e){const t=new Map;for(const n of e)t.set(n.id,n);return t}function Dc(e,t){const n=[],a=[];for(const i of e.roomIds){const r=t.get(i);if(r)switch(a.push(r.name),e.type){case"delivery_route":case"refuse_route":Ec(r)&&n.push({type:"foh_crossing",room:r.name,description:"".concat("delivery_route"===e.type?"Delivery":"Refuse"," route passes through front-of-house room: ").concat(r.name)});break;case"guest_circulation":Oc(r)&&n.push({type:"primary_threshold",room:r.name,description:"Guest circulation crosses primary suite threshold at: ".concat(r.name)});break;case"foh_to_terrace":Bc(r)&&n.push({type:"kitchen_aisle",room:r.name,description:"Guest route to terrace crosses kitchen work aisle at: ".concat(r.name)})}}return{pathName:e.name,pathType:e.type,roomsTraversed:a,violations:n}}function Ec(e){if(e.tags.includes("foh")||e.tags.includes("front_of_house"))return!0;if("formal"===e.zone||"entertaining"===e.zone||"arrival"===e.zone)return!0;const t=e.name.toUpperCase();for(const n of Pc)if(t.includes(n.toUpperCase()))return!0;return Pc.has(e.name)}function Oc(e){if(e.tags.includes("primary_suite")||e.tags.includes("master_suite"))return!0;if("primary"===e.zone||"primary_suite"===e.zone||"master"===e.zone)return!0;const t=e.name.toUpperCase();for(const n of Fc)if(t.includes(n.toUpperCase()))return!0;return Fc.has(e.name)}function Bc(e){if(e.tags.includes("kitchen_work")||e.tags.includes("work_aisle"))return!0;const t=e.name.toUpperCase();for(const n of Ac)if(t.includes(n.toUpperCase()))return!0;return Ac.has(e.name)}function qc(e,t,n){return{id:bc(),ruleId:{foh_crossing:"critical-002",primary_threshold:"critical-001",kitchen_aisle:"critical-005",zone_conflict:"critical-003"}[t.type]||"path-violation",severity:"critical",description:t.description,affectedRooms:n,correctiveAction:{foh_crossing:"Reroute service circulation through back-of-house areas. Consider adding a dedicated service corridor.",primary_threshold:"Redesign guest circulation to approach guest wing without crossing primary suite threshold. Add a buffer zone or redirect via common areas.",kitchen_aisle:"Provide an alternate guest route to terrace that bypasses the kitchen work triangle. Consider a butler pantry pass-through or gallery bypass.",zone_conflict:"Add acoustic buffer (vestibule, corridor, or solid partition) between conflicting zones."}[t.type]||"Review circulation path and eliminate violation."}}function Hc(e){const t=[],n=zc(e.rooms);for(const a of e.sharedWalls){const e=n.get(a.room1Id),i=n.get(a.room2Id);if(!e||!i)continue;if(!e.acousticZone||!i.acousticZone)continue;const r=Rc[e.acousticZone],o=Rc[i.acousticZone];if(3===r&&0===o||0===r&&3===o){const n=3===r?e:i,o=0===r?e:i,s=a.isFloor?"floor/ceiling":"wall";t.push({id:bc(),ruleId:"critical-003",severity:"critical",description:"Acoustic conflict: Zone 3 room (".concat(n.name,") shares ").concat(s," with Zone 0 bedroom (").concat(o.name,"). High-noise functions must not be adjacent to sleeping areas."),affectedRooms:[n.name,o.name],correctiveAction:"Relocate ".concat(n.name," away from ").concat(o.name,", or insert a buffer zone (corridor, closet, or storage) between them. If structural constraints prevent relocation, specify enhanced acoustic construction (STC 60+ wall assembly).")})}if(3===r&&1===o||1===r&&3===o){const n=3===r?e:i,a=1===r?e:i;t.push({id:bc(),ruleId:"acoustic-002",severity:"warning",description:"Acoustic concern: Zone 3 room (".concat(n.name,") is adjacent to Zone 1 living area (").concat(a.name,"). Consider acoustic treatment."),affectedRooms:[n.name,a.name],correctiveAction:"Add sound lock vestibule at ".concat(n.name," entry, or specify enhanced wall construction.")})}}return t}function Gc(e){return e.rooms.some(e=>{if(e.tags.includes("show_kitchen")||e.tags.includes("principal_kitchen"))return!0;if(Lc.has(e.id.toUpperCase())||Lc.has(e.name.toUpperCase().replace(/\s+/g,"")))return!0;for(const t of Mc)if(e.name.toLowerCase().includes(t.toLowerCase()))return!0;return!1})?null:{id:bc(),ruleId:"critical-004",severity:"critical",description:"No principal-level show kitchen detected. Luxury residences require a presentation kitchen on the main living level, not hidden or basement-only.",affectedRooms:[],correctiveAction:"Add a show kitchen to Level 1 with island, tall glazing, and guest-appropriate finishes. The show kitchen should be adjacent to the family hub and have visual connection to entertaining areas."}}const Wc={A:"Adjacent (direct connection required)",N:"Near (close proximity needed)",B:"Buffered (buffer zone required)",S:"Separate (isolation required)"};function Uc(e,t,n){let a=e;return n.chefLedCooking&&(a+=10),"weekly"===t.entertainingLoad&&(a+=5),"none"!==t.staffingLevel&&(a+=5),Math.min(100,a)}function Kc(e,t,n){let a=e;return"weekly"!==t.entertainingLoad&&"monthly"!==t.entertainingLoad||(a+=10),n.poolEntertainment&&(a+=5),"open"!==t.privacyPosture&&"balanced"!==t.privacyPosture||(a+=5),Math.min(100,a)}function Vc(e,t,n){let a=e;return"private"!==t.privacyPosture&&"formal"!==t.privacyPosture||(a+=10),"none"!==t.staffingLevel&&(a+=5),Math.min(100,a)}function Yc(e,t,n){let a=e;return n.multiFamilyHosting&&(a+=10),"vacation"!==t.typology&&"winter"!==t.typology||(a+=5),Math.min(100,a)}function Zc(e,t,n){let a=e;return n.lateNightMedia&&(a+=5),"private"===t.privacyPosture&&(a-=5),Math.min(100,Math.max(50,a))}function $c(e,t,n){let a=e;return"full_time"!==t.staffingLevel&&"live_in"!==t.staffingLevel||(a+=10),"weekly"===t.entertainingLoad&&(a+=5),Math.min(100,a)}function Qc(e,t,n){let a=e;return"full_wellness"===t.wetProgram?a+=15:"pool_spa"===t.wetProgram?a+=10:"pool_only"===t.wetProgram&&(a+=5),n.fitnessRecovery&&(a+=5),Math.min(100,a)}function Jc(e,t,n){let a=e;return"live_in"===t.staffingLevel?a+=15:"full_time"===t.staffingLevel?a+=10:"part_time"===t.staffingLevel&&(a+=5),Math.min(100,a)}function Xc(e){return e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}function ed(e){return{none:"None",pool_only:"Pool only",pool_spa:"Pool + Spa",full_wellness:"Full wellness"}[e]||e}function td(e){return{none:"No",part_time:"Part-time",full_time:"Full-time",live_in:"Live-in"}[e]||e}const nd=[{id:"module-01",number:1,name:"Kitchen Rules Engine",shortName:"Kitchen",description:"Show vs BOH kitchen, flow, and bespoke credibility. Defines the relationship between presentation cooking and back-of-house operations.",primaryFocus:"Show vs BOH kitchen, flow, bespoke credibility",gateDeliverables:["Kitchen ecosystem plan with guest/service arrows","Scullery loop documentation","Storage schedule","Work-aisle red-flag check"],checklistItems:[{id:"k1",name:"Principal-level show kitchen present",description:"Kitchen not hidden or basement-only"},{id:"k2",name:"Guest route avoids work aisle",description:"Guests can reach dining/terrace without crossing work zone"},{id:"k3",name:"Scullery/prep kitchen connected",description:"Back-of-house support kitchen adjacent"},{id:"k4",name:"Service entry separate",description:"Deliveries don't pass through FOH"},{id:"k5",name:"Storage schedule complete",description:"Dry, cold, equipment storage documented"}]},{id:"module-02",number:2,name:"Entertaining Spine",shortName:"Entertaining",description:"Arrival-to-terrace social axis and lane integrity. Manages the processional sequence from entry through social spaces to outdoor entertaining.",primaryFocus:"Arrival-to-terrace social axis + lane integrity",gateDeliverables:["Procession diagram","Lane overlay","FOH program schedule","Powder room placement logic"],checklistItems:[{id:"e1",name:"Clear arrival sequence",description:"Entry creates sense of procession"},{id:"e2",name:"Great room terrace connection",description:"Seamless indoor-outdoor flow"},{id:"e3",name:"Dining positioned correctly",description:"Serves both formal and casual entertaining"},{id:"e4",name:"Powder room strategically placed",description:"Accessible but discrete from social zones"},{id:"e5",name:"Lane separation maintained",description:"Guest, family, and service lanes distinct"}]},{id:"module-03",number:3,name:"Primary Suite Ecosystem",shortName:"Primary Suite",description:"Privacy gradient and two-person functionality. Ensures the primary suite offers complete privacy with dual-person operation and service access without invasion.",primaryFocus:"Privacy gradient + two-person functionality",gateDeliverables:["Privacy gradient diagram","Daily loop documentation","Acoustic adjacency check","Service-without-invasion notes"],checklistItems:[{id:"p1",name:"Privacy threshold defined",description:"Clear boundary between private and semi-private"},{id:"p2",name:"Two-person bath operation",description:"Both can prepare simultaneously"},{id:"p3",name:"His/hers closet separation",description:"Adequate storage for both"},{id:"p4",name:"Morning coffee route exists",description:"Can access kitchen/coffee without full dress"},{id:"p5",name:"Service access without suite entry",description:"Housekeeping doesn't cross bedroom"}]},{id:"module-04",number:4,name:"Guest Wing Logic",shortName:"Guest Wing",description:"Hotel-grade guest autonomy and multi-family resilience. Provides guests with independent operation while maintaining separation from family zones.",primaryFocus:"Hotel-grade guest autonomy + multi-family resilience",gateDeliverables:["Suite mix schedule","Autonomy node plan","Guest/service overlay","Buffer confirmation"],checklistItems:[{id:"g1",name:"Guest suite mix defined",description:"Number and type of guest accommodations"},{id:"g2",name:"Autonomy node present",description:"Guests can operate independently"},{id:"g3",name:"Guest doesn't cross primary threshold",description:"Routes don't invade family zone"},{id:"g4",name:"Multi-family accommodation",description:"Can host extended family stays"},{id:"g5",name:"Buffer zones confirmed",description:"Adequate separation from primary suite"}]},{id:"module-05",number:5,name:"Media & Acoustic Control",shortName:"Media/Acoustic",description:"Zone 3 containment and late-night integrity. Manages high-noise activities like cinema and karaoke without disturbing sleeping zones.",primaryFocus:"Zone 3 containment + late-night integrity",gateDeliverables:["Acoustic overlay diagram","Sound lock concept","Late-night circulation map","AV/IT service notes"],checklistItems:[{id:"m1",name:"Zone 3 functions isolated",description:"No shared walls with Zone 0 bedrooms"},{id:"m2",name:"Sound lock vestibule present",description:"Acoustic buffer at media room entry"},{id:"m3",name:"Late-night route defined",description:"Can use media without disturbing sleepers"},{id:"m4",name:"AV equipment access planned",description:"Service can access without crossing living"},{id:"m5",name:"Acoustic treatment noted",description:"Wall/ceiling construction requirements flagged"}]},{id:"module-06",number:6,name:"Service Spine",shortName:"Service",description:"Receiving, storage, laundry, refuse, and BOH separation. Creates complete back-of-house operations without contaminating front-of-house spaces.",primaryFocus:"Receiving, storage, laundry, refuse; BOH separation",gateDeliverables:["Service lane plan","Laundry pipeline documentation","Housekeeping closet map","Refuse egress confirmation"],checklistItems:[{id:"s1",name:"Receiving dock/area defined",description:"Deliveries have dedicated entry"},{id:"s2",name:"Laundry positioned correctly",description:"Near bedrooms, accessible to staff"},{id:"s3",name:"Storage hierarchy complete",description:"Bulk, linen, equipment separated"},{id:"s4",name:"Refuse route clear",description:"Trash never crosses FOH"},{id:"s5",name:"Housekeeping closets distributed",description:"Supplies accessible across zones"}]},{id:"module-07",number:7,name:"Wellness Program",shortName:"Wellness",description:"Training/recovery loop with humidity and vibration control. Manages gym, spa, pool, and recovery facilities with proper environmental controls.",primaryFocus:"Training/recovery loop; humidity + vibration control",gateDeliverables:["Wellness loop map","Wet-feet intercept documentation","MEP intent notes","Buffer confirmation"],checklistItems:[{id:"w1",name:"Training loop complete",description:"Gym flows to recovery spaces"},{id:"w2",name:"Wet-feet intercept present",description:"Pool/spa users don't track water"},{id:"w3",name:"Humidity zones isolated",description:"Steam/sauna don't affect adjacent"},{id:"w4",name:"Vibration considerations noted",description:"Gym equipment isolated from living"},{id:"w5",name:"Outdoor wellness connection",description:"Access to pool/terrace from wellness"}]},{id:"module-08",number:8,name:"Staff Layer",shortName:"Staff",description:"Staff ops core with security and driver logic. Provides staff operational base with appropriate visibility and event scale-up capability.",primaryFocus:"Staff ops core + security/driver logic",gateDeliverables:["Staff/vendor overlay","Ops core plan","Security posture diagram","Event scale-up staging (if applicable)"],checklistItems:[{id:"st1",name:"Ops core location defined",description:"Staff base of operations positioned"},{id:"st2",name:"Staff circulation overlay",description:"Staff routes don't cross family zones"},{id:"st3",name:"Security sight lines confirmed",description:"Monitoring positions functional"},{id:"st4",name:"Vendor access controlled",description:"Service providers have clear routes"},{id:"st5",name:"Event staging possible",description:"Can scale up for large gatherings"}]}],ad=[{id:"5k",name:"5,000 SF",targetSF:5e3,description:"Compact luxury | 4 bedrooms | single-level living | pool",available:!0,spaces:[{id:"s1",code:"FOY",name:"Foyer / Gallery",targetSF:200,zone:"Entry + Formal",level:1,rationale:"Efficient arrival with coat storage"},{id:"s2",code:"PWD",name:"Powder Room",targetSF:45,zone:"Entry + Formal",level:1,rationale:"Guest half-bath near entry"},{id:"s3",code:"OFF",name:"Home Office",targetSF:120,zone:"Entry + Formal",level:1,rationale:"Work from home with professional separation"},{id:"s4",code:"GR",name:"Great Room",targetSF:350,zone:"Entry + Formal",level:1,rationale:"Formal living and entertaining"},{id:"s5",code:"DR",name:"Dining Room",targetSF:180,zone:"Entry + Formal",level:1,rationale:"Seats 6-8 with proper circulation"},{id:"s6",code:"FR",name:"Family Room",targetSF:300,zone:"Family Hub",level:1,rationale:"Casual daily living; open to kitchen"},{id:"s7",code:"KIT",name:"Kitchen",targetSF:250,zone:"Family Hub",level:1,rationale:"Efficient layout with island"},{id:"s8",code:"BKF",name:"Breakfast Nook",targetSF:80,zone:"Family Hub",level:1,rationale:"Casual daily dining"},{id:"s9",code:"SCUL",name:"Scullery",targetSF:100,zone:"Family Hub",level:1,rationale:"Cleanup, pantry, service staging"},{id:"s10",code:"MEDIA",name:"Media Room",targetSF:180,zone:"Family Hub",level:1,rationale:"TV viewing; acoustically considered"},{id:"s11",code:"MUD",name:"Mudroom",targetSF:100,zone:"Service",level:1,rationale:"Daily entry from garage"},{id:"s12",code:"LND",name:"Laundry",targetSF:100,zone:"Service",level:1,rationale:"Main floor laundry for convenience"},{id:"s13",code:"MEP",name:"Mechanical",targetSF:180,zone:"Service",level:1,rationale:"HVAC, water heater, panels"},{id:"s14",code:"STR",name:"Storage",targetSF:120,zone:"Service",level:1,rationale:"General household storage"},{id:"s15",code:"GAR",name:"Garage (2-car)",targetSF:450,zone:"Service",level:1,rationale:"Attached two-car garage"},{id:"s16",code:"GYM",name:"Gym / Exercise",targetSF:150,zone:"Wellness",level:1,rationale:"Home fitness area"},{id:"s17",code:"POOLSUP",name:"Pool Support",targetSF:60,zone:"Wellness",level:1,rationale:"Pool equipment and storage"},{id:"s18",code:"TERR",name:"Terrace",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s19",code:"POOL",name:"Pool",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s20",code:"PRI",name:"Primary Bedroom",targetSF:280,zone:"Primary Wing",level:2,rationale:"Comfortable scale with seating area"},{id:"s21",code:"PRIBATH",name:"Primary Bath",targetSF:180,zone:"Primary Wing",level:2,rationale:"Double vanity, shower, tub"},{id:"s22",code:"PRICL_HIS",name:"His Closet",targetSF:80,zone:"Primary Wing",level:2,rationale:"Walk-in closet"},{id:"s23",code:"PRICL_HER",name:"Her Closet",targetSF:80,zone:"Primary Wing",level:2,rationale:"Walk-in closet"},{id:"s24",code:"GST1",name:"Guest Suite 1",targetSF:300,zone:"Guest Wing",level:2,rationale:"First guest bedroom with en-suite"},{id:"s25",code:"GST2",name:"Guest Suite 2",targetSF:280,zone:"Guest Wing",level:2,rationale:"Second guest bedroom"},{id:"s26",code:"GST3",name:"Guest Suite 3",targetSF:280,zone:"Guest Wing",level:2,rationale:"Third guest bedroom or flex"},{id:"s27",code:"CIRC2",name:"L2 Circulation",targetSF:350,zone:"Circulation",level:2,rationale:"Landing, hallways, stair"}],adjacencyMatrix:[{fromSpaceCode:"FOY",toSpaceCode:"OFF",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GR",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"FOY",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"SCUL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MUD",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"TERR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GYM",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"POOL",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"GR",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"DR",relationship:"S"},{fromSpaceCode:"GR",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"GR",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"GR",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"FOY",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"DR",toSpaceCode:"SCUL",relationship:"N"},{fromSpaceCode:"FR",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"MEDIA",relationship:"N"},{fromSpaceCode:"FR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"GYM",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"KIT",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"BKF",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"DR",relationship:"B"},{fromSpaceCode:"KIT",toSpaceCode:"MUD",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SCUL",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"MUD",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"MUD",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"MUD",toSpaceCode:"GAR",relationship:"A"},{fromSpaceCode:"MEDIA",toSpaceCode:"FR",relationship:"N"},{fromSpaceCode:"MEDIA",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GST1",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GST2",relationship:"S"},{fromSpaceCode:"GYM",toSpaceCode:"FR",relationship:"N"},{fromSpaceCode:"GYM",toSpaceCode:"POOLSUP",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"PRI",toSpaceCode:"PRIBATH",relationship:"A"},{fromSpaceCode:"PRI",toSpaceCode:"PRICL_HIS",relationship:"A"},{fromSpaceCode:"PRI",toSpaceCode:"PRICL_HER",relationship:"A"},{fromSpaceCode:"PRI",toSpaceCode:"GST1",relationship:"B"},{fromSpaceCode:"PRI",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"GST1",toSpaceCode:"GST2",relationship:"N"},{fromSpaceCode:"GST2",toSpaceCode:"GST3",relationship:"N"},{fromSpaceCode:"GST1",toSpaceCode:"PRI",relationship:"B"}],nodes:[{id:"node-1",name:"Node 1: Entry + Formal",description:"Arrival, formal entertaining, and office",spaceCodes:["FOY","OFF","GR","DR","PWD"]},{id:"node-2",name:"Node 2: Family Hub + Service",description:"Daily living, kitchen, media, and service",spaceCodes:["FR","KIT","BKF","SCUL","MUD","MEDIA","TERR","GYM","POOLSUP"]}],crossLinks:[{id:"cl-1",number:1,name:"Formal View Axis",description:"Great Room to Terrace",fromSpaceCode:"GR",toSpaceCode:"TERR",purpose:"Near connection for formal view"},{id:"cl-2",number:2,name:"Daily Connector",description:"Foyer to Family",fromSpaceCode:"FOY",toSpaceCode:"FR",purpose:"Buffered daily connector"},{id:"cl-3",number:3,name:"Service Link",description:"Dining to Scullery",fromSpaceCode:"DR",toSpaceCode:"SCUL",purpose:"Near service connection"}],bridgeConfig:{butlerPantry:!1,guestAutonomy:!1,soundLock:!1,wetFeetIntercept:!0,opsCore:!0},bubbleDiagramCode:'flowchart TB\n  subgraph ENTRY["Entry + Formal"]\n    FOY["FOY: Foyer"]\n    OFF["OFF: Office"]\n    GR["GR: Great Room"]\n    DR["DR: Dining"]\n  end\n\n  subgraph FAMILY["Family Hub"]\n    FR["FR: Family Room"]\n    KIT["KIT: Kitchen"]\n    BKF["BKF: Breakfast"]\n    MEDIA["MEDIA: Media"]\n  end\n\n  subgraph SERVICE["Service Core"]\n    SCUL["SCUL: Scullery"]\n    MUD["MUD: Mudroom"]\n    LND["LND: Laundry"]\n  end\n\n  subgraph WELLNESS["Wellness"]\n    GYM["GYM: Gym"]\n    POOLSUP["POOLSUP: Pool Support"]\n  end\n\n  subgraph OUTDOOR["Outdoor"]\n    TERR["TERR: Terrace"]\n    POOL["POOL: Pool"]\n  end\n\n  subgraph PRIMARY["Primary Suite (L2)"]\n    PRI["PRI: Primary Bed"]\n    PRIBATH["PRIBATH: Bath"]\n    PRICL["PRICL: Closets"]\n  end\n\n  subgraph GUEST["Guest Wing (L2)"]\n    GST1["GST1: Guest 1"]\n    GST2["GST2: Guest 2"]\n    GST3["GST3: Guest 3"]\n  end\n\n  FOY === OFF\n  FOY === GR\n  FOY --- DR\n  FOY -.- FR\n\n  GR --- TERR\n  DR -.- KIT\n\n  FR === KIT\n  FR --- MEDIA\n  FR === TERR\n  KIT === BKF\n  KIT === SCUL\n  KIT --- MUD\n\n  SCUL === MUD\n  MUD === GAR\n\n  FR --- GYM\n  GYM === POOLSUP\n  TERR === POOL\n\n  MEDIA x--x PRI\n\n  PRI === PRIBATH\n  PRI === PRICL\n  PRI -.- GST1\n  GST1 --- GST2\n  GST2 --- GST3',twoNodeDescription:"Two-Node Circulation Strategy (5,000 SF - Compact Luxury)\n\nNode 1: Entry + Formal\n- Arrival and formal presentation zone\n- Contains: Foyer, Office, Great Room, Dining Room, Powder\n- Character: Welcoming, professional, guest-ready\n- Office adjacent to entry for work-from-home with separation\n\nNode 2: Family Hub + Service\n- Daily living and service zone\n- Contains: Family Room, Kitchen, Breakfast, Scullery, Mudroom, Media, Terrace, Gym\n- Character: Casual, functional, family-oriented\n- Open kitchen-family connection with service spine to back\n\nSingle Kitchen Strategy (5K):\n- One efficient kitchen open to family room\n- Scullery provides cleanup/staging buffer\n- Direct dining connection for smaller-scale entertaining\n\nLevel 2 Organization:\n- Primary Wing: Isolated with full bath and dual closets\n- Guest Suites: Three bedrooms clustered together\n- Shared bath option for two guest suites\n\nCross-Links (Controlled Connections):\n1. Great Room to Terrace: Near connection (N) for indoor-outdoor flow\n2. Foyer to Family: Buffered (B) daily connector\n3. Dining to Scullery: Near (N) service connection\n\nKey 5K Optimizations:\n- No wine room, library, or chef's kitchen (not at tier)\n- Gym replaces full spa program\n- Pool support for basic wellness\n- Three guest suites maximum\n- Single-level main living preferred"},{id:"10k",name:"10,000 SF",targetSF:1e4,description:"2-level | 4 bedrooms | no basement | lap pool scenario",available:!0,spaces:[{id:"s1",code:"FOY",name:"Foyer / Gallery + coat + powder",targetSF:420,zone:"Arrival + Formal",level:1,rationale:"Sets luxury arrival and art wall; controls privacy"},{id:"s2",code:"OFF",name:"Private Office",targetSF:220,zone:"Arrival + Formal",level:1,rationale:"Quiet spur for meetings without entering family areas"},{id:"s3",code:"GR",name:"Great Room (formal)",targetSF:520,zone:"Arrival + Formal",level:1,rationale:"Primary showcase room; accommodates large seating group"},{id:"s4",code:"DR",name:"Formal Dining",targetSF:320,zone:"Arrival + Formal",level:1,rationale:"Seats 10-12 with proper circulation and service access"},{id:"s5",code:"WINE",name:"Wine Storage",targetSF:110,zone:"Arrival + Formal",level:1,rationale:"Adjacent to dining; temperature control and presentation"},{id:"s6",code:"FR",name:"Family Room (hub)",targetSF:520,zone:"Family Hub",level:1,rationale:"Daily distributor; adjacency to library and buffered media"},{id:"s7",code:"KIT",name:"Kitchen",targetSF:380,zone:"Family Hub",level:1,rationale:"High-function chef kitchen with island and tall glazing"},{id:"s8",code:"BKF",name:"Breakfast Nook",targetSF:150,zone:"Family Hub",level:1,rationale:"Morning light; daily meals without formal dining"},{id:"s9",code:"SCUL",name:"Scullery / Prep + pantry",targetSF:220,zone:"Family Hub",level:1,rationale:"Catering support, cleanup, overflow appliances"},{id:"s9b",code:"CHEF",name:"Chef's Kitchen (service)",targetSF:180,zone:"Service Core",level:1,rationale:"Discrete service kitchen for formal dining; buffered from dining room to control noise and smells"},{id:"s10",code:"LIB",name:"Library",targetSF:220,zone:"Family Hub",level:1,rationale:"Soft-use room; can close for quiet work/reading"},{id:"s11",code:"MEDIA",name:"Media / Theater (buffered)",targetSF:280,zone:"Family Hub",level:1,rationale:"High-use; close to family but acoustically controlled"},{id:"s12",code:"MUD",name:"Mudroom / Daily Entry",targetSF:180,zone:"Service Core",level:1,rationale:"Controls clutter; connects to scullery"},{id:"s13",code:"GYM",name:"Gym (daylight + views)",targetSF:260,zone:"Wellness",level:1,rationale:"Premium wellness requires daylight and outlook"},{id:"s14",code:"SPA",name:"Spa / Wellness",targetSF:220,zone:"Wellness",level:1,rationale:"Steam/sauna + massage nook; visual connection to pool"},{id:"s15",code:"POOLSUP",name:"Pool Support",targetSF:120,zone:"Wellness",level:1,rationale:"Keeps wet traffic out of main house"},{id:"s16",code:"GSL1",name:"Guest Suite (Level 1)",targetSF:460,zone:"Hospitality",level:1,rationale:"Ground-floor option for visitors/aging-in-place"},{id:"s17",code:"LAUN1",name:"Laundry (L1)",targetSF:140,zone:"Service Core",level:1,rationale:"Primary household laundry + utility sink"},{id:"s18",code:"MEP",name:"Mechanical / Storage / AV / IT",targetSF:320,zone:"Service Core",level:1,rationale:"No-basement requires robust above-grade support"},{id:"s19",code:"CIRC1",name:"Circulation + stair/lift allowance",targetSF:940,zone:"Circulation",level:1,rationale:"Comfortable galleries and non-linear connectors"},{id:"s20",code:"TERR",name:"Main Terrace / Outdoor Dining",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s21",code:"POOL",name:"Lap Pool + Deck",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s22",code:"PRI",name:"Primary Bedroom",targetSF:360,zone:"Primary Wing",level:2,rationale:"Luxury scale without excess; room for seating area"},{id:"s23",code:"PRIBATH",name:"Primary Bath",targetSF:260,zone:"Primary Wing",level:2,rationale:"Double vanity, wet room, daylight; correct fixture spacing"},{id:"s24",code:"PRICL",name:"Primary Closets (his/hers)",targetSF:260,zone:"Primary Wing",level:2,rationale:"Proper dressing corridors + island storage"},{id:"s25",code:"PRILNG",name:"Primary Lounge",targetSF:180,zone:"Primary Wing",level:2,rationale:"Private decompression away from family hub"},{id:"s26",code:"LAND",name:"Landing (daylit)",targetSF:520,zone:"Guest Wing Node",level:2,rationale:"Compact node; avoids long hall"},{id:"s27",code:"GUEST1",name:"Guest Suite (L2) #1",targetSF:340,zone:"Guest Wing Node",level:2,rationale:"True suite proportions; accommodates queen/king"},{id:"s28",code:"GUEST2",name:"Guest Suite (L2) #2",targetSF:340,zone:"Guest Wing Node",level:2,rationale:"Consistent comfort for long stays"},{id:"s29",code:"LAUN2",name:"Laundry + linen (L2)",targetSF:140,zone:"Support",level:2,rationale:"Reduces vertical laundry traffic; supports suites"},{id:"s30",code:"MEP2",name:"Storage / IT (L2)",targetSF:120,zone:"Support",level:2,rationale:"No-basement systems and seasonal storage"},{id:"s31",code:"CIRC2",name:"Corridors (generous)",targetSF:1040,zone:"Circulation",level:2,rationale:"Short connectors; no long corridors"},{id:"s32",code:"CORE2",name:"Stair / lift distribution",targetSF:440,zone:"Circulation",level:2,rationale:"Vertical core allowance within Level 2 target"}],adjacencyMatrix:[{fromSpaceCode:"FOY",toSpaceCode:"OFF",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GR",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"FOY",toSpaceCode:"WINE",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"CHEF",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SCUL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MUD",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"LIB",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"TERR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GYM",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SPA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"POOL",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"GR",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"DR",relationship:"S"},{fromSpaceCode:"GR",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"GR",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"FOY",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"WINE",relationship:"A"},{fromSpaceCode:"DR",toSpaceCode:"CHEF",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"DR",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"CHEF",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"CHEF",toSpaceCode:"FOY",relationship:"S"},{fromSpaceCode:"WINE",toSpaceCode:"DR",relationship:"A"},{fromSpaceCode:"WINE",toSpaceCode:"SCUL",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"LIB",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"MEDIA",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"KIT",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"BKF",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"CHEF",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"MUD",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SCUL",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"CHEF",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"WINE",relationship:"B"},{fromSpaceCode:"MUD",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"MUD",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"GYM",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"SPA",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"MEDIA",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST1",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST2",relationship:"S"}],nodes:[{id:"node-1",name:"Node 1: Front Gallery + Formal",description:"Arrival, formal entertaining, and office",spaceCodes:["FOY","OFF","GR","DR","WINE"]},{id:"node-2",name:"Node 2: Family Hub + Service + Wellness",description:"Daily living, dual-kitchen service, wellness, and outdoor",spaceCodes:["FR","KIT","BKF","CHEF","SCUL","MUD","LIB","MEDIA","TERR","GYM","SPA","POOL"]}],crossLinks:[{id:"cl-1",number:1,name:"Formal View Axis",description:"Great Room to Terrace",fromSpaceCode:"GR",toSpaceCode:"TERR",purpose:"Near connection for formal view"},{id:"cl-2",number:2,name:"Wine Service Link",description:"Wine to Scullery",fromSpaceCode:"WINE",toSpaceCode:"SCUL",purpose:"Buffered service connection"},{id:"cl-3",number:3,name:"Daily Connector",description:"Foyer to Family",fromSpaceCode:"FOY",toSpaceCode:"FR",purpose:"Buffered daily connector"}],bridgeConfig:{butlerPantry:!0,guestAutonomy:!0,soundLock:!0,wetFeetIntercept:!0,opsCore:!0},bubbleDiagramCode:'graph LR\n  EXT["Exterior Arrival / Entry"]\n  FOY["Foyer / Gallery"]\n  CORE["Main Stair / Lift Core"]\n\n  OFF["Private Office (visitor entry)"]\n  GR["Great Room (formal)"]\n  DR["Formal Dining"]\n  WINE["Wine Storage"]\n\n  FR["Family Room (hub)"]\n  KIT["Show Kitchen (family)"]\n  BKF["Breakfast Nook"]\n  CHEF["Chef\'s Kitchen (service)"]\n  SCUL["Scullery / Prep"]\n  MUD["Mudroom / Daily Entry"]\n  LIB["Library"]\n  MEDIA["Media / Theater (buffered)"]\n\n  TERR["Main Terrace / Outdoor Dining"]\n  GYM["Gym (daylight + views)"]\n  SPA["Spa / Wellness"]\n  POOL["Lap Pool + Deck"]\n\n  PRI["Primary Suite (L2)"]\n  LAND["Landing (daylit)"]\n  G1["Guest Suite (L2) #1"]\n  G2["Guest Suite (L2) #2"]\n\n  EXT --\x3e FOY --\x3e CORE\n\n  subgraph N1[Node 1: Front Gallery + Formal]\n    FOY\n    OFF\n    GR\n    DR\n    WINE\n  end\n\n  subgraph N2[Node 2: Family Hub + Service + Wellness]\n    FR\n    KIT\n    BKF\n    CHEF\n    SCUL\n    MUD\n    LIB\n    MEDIA\n    TERR\n    GYM\n    SPA\n    POOL\n  end\n\n  subgraph L2A[Level 2: Primary Wing]\n    PRI\n  end\n\n  subgraph L2B[Level 2: Guest Wing Node]\n    LAND\n    G1\n    G2\n  end\n\n  FOY --\x3e OFF\n  FOY --\x3e GR\n  FOY --\x3e DR --\x3e WINE\n  FOY --\x3e|B| KIT\n  FOY --\x3e|B| FR\n\n  FR --\x3e KIT --\x3e BKF\n  KIT --\x3e SCUL\n  KIT --\x3e|N| CHEF\n  CHEF --\x3e SCUL\n  DR --\x3e|B| CHEF\n  MUD --\x3e SCUL\n  FR --\x3e LIB\n  FR --\x3e MEDIA\n  FR --\x3e TERR\n  KIT --\x3e|N| TERR\n\n  FR --\x3e GYM --\x3e SPA --\x3e POOL\n  TERR --\x3e POOL\n\n  GR --\x3e|N| TERR\n  WINE --\x3e|Service| SCUL\n\n  CORE --\x3e PRI\n  CORE --\x3e LAND\n  LAND --\x3e G1\n  LAND --\x3e G2',twoNodeDescription:"Two-Node Circulation Strategy (10,000 SF)\n\nNode 1: Front Gallery + Formal\n- Primary arrival and formal presentation zone\n- Contains: Foyer/Gallery, Private Office, Great Room, Formal Dining, Wine Storage\n- Character: Formal, curated, impressive first impression\n- Private Office has exterior visitor door for meetings without entering family areas\n\nNode 2: Family Hub + Service + Wellness\n- Daily living, dual-kitchen service, and wellness zone\n- Contains: Family Room, Show Kitchen, Breakfast, Chef's Kitchen, Scullery, Mudroom, Library, Media, Gym, Spa, Pool, Terrace\n- Character: Casual, functional, activity-based\n- Media/Theater is buffered acoustically from family areas\n\nDual-Kitchen Strategy:\n- Show Kitchen (KIT): Family \"performer\" kitchen open to living spaces; island-centric, guest-friendly\n- Chef's Kitchen (CHEF): Discrete service kitchen for formal dining events; buffered from Dining Room to control noise/smells; adjacent to Scullery\n\nLevel 2 Organization:\n- Primary Wing: Separated for privacy with lounge for decompression\n- Guest Wing Node: Landing serves as compact node avoiding long corridors\n- Two guest suites with consistent comfort standards\n\nCross-Links (Controlled Connections):\n1. Great Room to Terrace: Near connection for formal view axis\n2. Wine to Scullery: Buffered service connection\n3. Foyer to Family: Buffered daily connector\n4. Dining to Chef's Kitchen: Buffered service connection\n\nKey Design Principles:\n- No basement: robust above-grade mechanical/storage\n- Wellness spaces require daylight and pool connection\n- Library and Media adjacent to Family but with acoustic control\n- Dual-kitchen system separates family daily use from formal service"},{id:"15k",name:"15,000 SF",targetSF:15e3,description:"2-level | 5 bedrooms | no basement | lap pool + acreage",available:!0,spaces:[{id:"s1",code:"FOY",name:"Foyer / Gallery + coat + powder",targetSF:520,zone:"Arrival + Formal",level:1,rationale:"Arrival sequence and art wall; controls privacy"},{id:"s2",code:"OFF",name:"Private Office",targetSF:260,zone:"Arrival + Formal",level:1,rationale:"Visitor-ready without entering family zones"},{id:"s3",code:"GR",name:"Great Room (formal)",targetSF:680,zone:"Arrival + Formal",level:1,rationale:"Showcase volume; formal entertaining anchor"},{id:"s4",code:"DR",name:"Formal Dining",targetSF:380,zone:"Arrival + Formal",level:1,rationale:"Seats 12 with proper service clearances"},{id:"s5",code:"WINE",name:"Wine Storage / Tasting",targetSF:180,zone:"Arrival + Formal",level:1,rationale:"Adjacent to DR; tasting table and display"},{id:"s6",code:"FR",name:"Family Room (hub)",targetSF:640,zone:"Family Hub",level:1,rationale:"Daily distributor adjacent to LIB and buffered MEDIA"},{id:"s7",code:"KIT",name:"Kitchen",targetSF:460,zone:"Family Hub",level:1,rationale:"Chef-grade kitchen; island and appliance wall"},{id:"s8",code:"BKF",name:"Breakfast Nook",targetSF:180,zone:"Family Hub",level:1,rationale:"Daily meals with light and terrace proximity"},{id:"s9",code:"SCUL",name:"Scullery / Prep + pantry",targetSF:300,zone:"Family Hub",level:1,rationale:"Catering support, cleanup, overflow appliances"},{id:"s9b",code:"CHEF",name:"Chef's Kitchen (service)",targetSF:220,zone:"Service Core",level:1,rationale:"Discrete service kitchen for formal dining; buffered from dining room to control noise and smells"},{id:"s10",code:"MUD",name:"Mudroom / Daily Entry",targetSF:220,zone:"Family Hub",level:1,rationale:"Daily entry; direct to SCUL"},{id:"s11",code:"LIB",name:"Library",targetSF:260,zone:"Family Hub",level:1,rationale:"High-use quiet room at the hub edge"},{id:"s12",code:"MEDIA",name:"Media / Theater (buffered)",targetSF:360,zone:"Family Hub",level:1,rationale:"Adjacent for usage but acoustically controlled"},{id:"s13",code:"WLINK",name:"Wellness Link (room)",targetSF:160,zone:"Wellness",level:1,rationale:"A room-like connector; avoids corridor feel and buffers noise"},{id:"s14",code:"GYM",name:"Gym (daylight + views)",targetSF:320,zone:"Wellness",level:1,rationale:"View-facing fitness space"},{id:"s15",code:"SPA",name:"Spa / Wellness (daylight + views)",targetSF:300,zone:"Wellness",level:1,rationale:"Steam/sauna + treatment; visual connection to pool"},{id:"s16",code:"POOLSUP",name:"Pool Support",targetSF:160,zone:"Wellness",level:1,rationale:"Wet support keeps interiors dry"},{id:"s17",code:"GSL1",name:"Guest Suite (Level 1)",targetSF:520,zone:"Hospitality",level:1,rationale:"Main-level guest accommodation / accessibility"},{id:"s18",code:"LAUN1",name:"Laundry (L1)",targetSF:160,zone:"Service Core",level:1,rationale:"Primary laundry and utility sink"},{id:"s19",code:"MEP",name:"Mechanical / Storage / AV / IT",targetSF:420,zone:"Service Core",level:1,rationale:"No-basement systems and storage"},{id:"s20",code:"CIRC1",name:"Circulation + stair/lift allowance",targetSF:2520,zone:"Circulation",level:1,rationale:"Generous galleries and node-based connectors"},{id:"s21",code:"TERR",name:"Main Terrace / Outdoor Living",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s22",code:"POOL",name:"Lap Pool + Deck",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s23",code:"PRI",name:"Primary Bedroom",targetSF:440,zone:"Primary Wing",level:2,rationale:"Sleeping + seating zone with outlook; quiet separation"},{id:"s24",code:"PRIBATH",name:"Primary Bath",targetSF:340,zone:"Primary Wing",level:2,rationale:"Wet room + tub; daylight"},{id:"s25",code:"PRICL",name:"Primary Closets (his/hers)",targetSF:420,zone:"Primary Wing",level:2,rationale:"Dressing experience with islands and storage"},{id:"s26",code:"PRILNG",name:"Primary Lounge",targetSF:240,zone:"Primary Wing",level:2,rationale:"Private decompression/reading"},{id:"s27",code:"LAND",name:"Landing (daylit)",targetSF:760,zone:"Guest Suites",level:2,rationale:"Compact node; avoids long corridors"},{id:"s28",code:"GUEST1",name:"Guest Suite (L2) #1",targetSF:420,zone:"Guest Suites",level:2,rationale:"True suite proportions; long-stay comfort"},{id:"s29",code:"GUEST2",name:"Guest Suite (L2) #2",targetSF:420,zone:"Guest Suites",level:2,rationale:"Consistent luxury standard"},{id:"s30",code:"GUEST3",name:"Guest Suite (L2) #3",targetSF:420,zone:"Guest Suites",level:2,rationale:"Consistent luxury standard"},{id:"s31",code:"LAUN2",name:"Laundry + linen (L2)",targetSF:200,zone:"Support",level:2,rationale:"Reduces vertical traffic; supports suites"},{id:"s32",code:"MEP2",name:"Storage / IT (L2)",targetSF:180,zone:"Support",level:2,rationale:"No-basement systems and seasonal storage"},{id:"s33",code:"CORE2",name:"Stair/lift distribution + corridors",targetSF:2160,zone:"Circulation",level:2,rationale:"Generous landing and short connectors"}],adjacencyMatrix:[{fromSpaceCode:"FOY",toSpaceCode:"OFF",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GR",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"FOY",toSpaceCode:"WINE",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"CHEF",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SCUL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MUD",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"LIB",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"WLINK",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GYM",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SPA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"TERR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"POOL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GUEST1",relationship:"B"},{fromSpaceCode:"OFF",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"GR",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"DR",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"GR",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"GR",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"GR",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"GR",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"DR",toSpaceCode:"FOY",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"WINE",relationship:"A"},{fromSpaceCode:"DR",toSpaceCode:"CHEF",relationship:"B"},{fromSpaceCode:"DR",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"WINE",toSpaceCode:"DR",relationship:"A"},{fromSpaceCode:"WINE",toSpaceCode:"SCUL",relationship:"B"},{fromSpaceCode:"WINE",toSpaceCode:"CHEF",relationship:"N"},{fromSpaceCode:"FR",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"GR",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"BKF",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"LIB",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"MEDIA",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"WLINK",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"POOL",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"KIT",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"BKF",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"CHEF",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"MUD",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"GUEST1",relationship:"S"},{fromSpaceCode:"KIT",toSpaceCode:"DR",relationship:"B"},{fromSpaceCode:"BKF",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"BKF",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"BKF",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"LIB",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"LIB",toSpaceCode:"OFF",relationship:"B"},{fromSpaceCode:"MEDIA",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"MEDIA",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST1",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST2",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST3",relationship:"S"},{fromSpaceCode:"CHEF",toSpaceCode:"DR",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"CHEF",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"CHEF",toSpaceCode:"FOY",relationship:"S"},{fromSpaceCode:"CHEF",toSpaceCode:"WINE",relationship:"N"},{fromSpaceCode:"SCUL",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"CHEF",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"WINE",relationship:"B"},{fromSpaceCode:"SCUL",toSpaceCode:"LND",relationship:"N"},{fromSpaceCode:"MUD",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"MUD",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"MUD",toSpaceCode:"GAR",relationship:"A"},{fromSpaceCode:"MUD",toSpaceCode:"LND",relationship:"N"},{fromSpaceCode:"GAR",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"GAR",toSpaceCode:"FOY",relationship:"S"},{fromSpaceCode:"GAR",toSpaceCode:"GR",relationship:"S"},{fromSpaceCode:"GAR",toSpaceCode:"DR",relationship:"S"},{fromSpaceCode:"LND",toSpaceCode:"MUD",relationship:"N"},{fromSpaceCode:"LND",toSpaceCode:"SCUL",relationship:"N"},{fromSpaceCode:"WLINK",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"WLINK",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"WLINK",toSpaceCode:"SPA",relationship:"A"},{fromSpaceCode:"WLINK",toSpaceCode:"POOLSUP",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"WLINK",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"SPA",relationship:"N"},{fromSpaceCode:"GYM",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SPA",toSpaceCode:"WLINK",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"GYM",relationship:"N"},{fromSpaceCode:"SPA",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"POOLSUP",relationship:"A"},{fromSpaceCode:"POOLSUP",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"POOLSUP",toSpaceCode:"SPA",relationship:"A"},{fromSpaceCode:"POOLSUP",toSpaceCode:"WLINK",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"BKF",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"GYM",relationship:"N"},{fromSpaceCode:"PRI",toSpaceCode:"PRIBATH",relationship:"A"},{fromSpaceCode:"PRI",toSpaceCode:"PRICL",relationship:"A"},{fromSpaceCode:"PRI",toSpaceCode:"PRILOUNGE",relationship:"A"},{fromSpaceCode:"PRI",toSpaceCode:"FOY",relationship:"S"},{fromSpaceCode:"PRI",toSpaceCode:"GUEST1",relationship:"B"},{fromSpaceCode:"PRI",toSpaceCode:"GUEST2",relationship:"B"},{fromSpaceCode:"PRI",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"PRIBATH",toSpaceCode:"PRI",relationship:"A"},{fromSpaceCode:"PRIBATH",toSpaceCode:"PRICL",relationship:"N"},{fromSpaceCode:"PRICL",toSpaceCode:"PRI",relationship:"A"},{fromSpaceCode:"PRICL",toSpaceCode:"PRIBATH",relationship:"N"},{fromSpaceCode:"GUEST1",toSpaceCode:"GUEST2",relationship:"N"},{fromSpaceCode:"GUEST1",toSpaceCode:"PRI",relationship:"B"},{fromSpaceCode:"GUEST1",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"GUEST1",toSpaceCode:"KIT",relationship:"S"},{fromSpaceCode:"GUEST1",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"GUEST2",toSpaceCode:"GUEST1",relationship:"N"},{fromSpaceCode:"GUEST2",toSpaceCode:"GUEST3",relationship:"N"},{fromSpaceCode:"GUEST2",toSpaceCode:"PRI",relationship:"B"},{fromSpaceCode:"GUEST2",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"GUEST3",toSpaceCode:"GUEST2",relationship:"N"},{fromSpaceCode:"GUEST3",toSpaceCode:"PRI",relationship:"B"},{fromSpaceCode:"GUEST3",toSpaceCode:"MEDIA",relationship:"S"}],nodes:[{id:"node-1",name:"Node 1: Front Gallery + Formal",description:"Arrival, formal entertaining, and office",spaceCodes:["FOY","OFF","GR","DR","WINE"]},{id:"node-2",name:"Node 2: Family Hub + Service + Wellness",description:"Daily living, dual-kitchen service, wellness, and outdoor",spaceCodes:["FR","KIT","BKF","CHEF","SCUL","MUD","LIB","MEDIA","WLINK","GYM","SPA","TERR","POOL"]}],crossLinks:[{id:"cl-1",number:1,name:"Formal View Axis",description:"Great Room to Terrace",fromSpaceCode:"GR",toSpaceCode:"TERR",purpose:"Near connection for formal view"},{id:"cl-2",number:2,name:"Wine Service Link",description:"Wine to Scullery",fromSpaceCode:"WINE",toSpaceCode:"SCUL",purpose:"Buffered service connection"},{id:"cl-3",number:3,name:"Daily Connector",description:"Foyer to Family",fromSpaceCode:"FOY",toSpaceCode:"FR",purpose:"Buffered daily connector"}],bridgeConfig:{butlerPantry:!0,guestAutonomy:!0,soundLock:!0,wetFeetIntercept:!0,opsCore:!0},bubbleDiagramCode:'graph LR\n  EXT["Exterior Arrival / Entry"]\n  FOY["Foyer / Gallery"]\n  CORE["Main Stair / Lift Core"]\n\n  OFF["Private Office (visitor entry)"]\n  GR["Great Room (formal)"]\n  DR["Formal Dining"]\n  WINE["Wine Storage / Tasting"]\n\n  FR["Family Room (hub)"]\n  KIT["Show Kitchen (family)"]\n  BKF["Breakfast Nook"]\n  CHEF["Chef\'s Kitchen (service)"]\n  SCUL["Scullery / Prep"]\n  MUD["Mudroom / Daily Entry"]\n  LIB["Library"]\n  MEDIA["Media / Theater (buffered)"]\n\n  WLINK["Wellness Link (room)"]\n  GYM["Gym (daylight + views)"]\n  SPA["Spa / Wellness (daylight + views)"]\n  TERR["Main Terrace / Outdoor Living"]\n  POOL["Lap Pool + Deck"]\n\n  PRI["Primary Suite (L2)"]\n  LAND["Landing (daylit)"]\n  G1["Guest Suite (L2) #1"]\n  G2["Guest Suite (L2) #2"]\n  G3["Guest Suite (L2) #3"]\n\n  EXT --\x3e FOY --\x3e CORE\n\n  subgraph N1[Node 1: Front Gallery + Formal]\n    FOY\n    OFF\n    GR\n    DR\n    WINE\n  end\n\n  subgraph N2[Node 2: Family Hub + Service + Wellness]\n    FR\n    KIT\n    BKF\n    CHEF\n    SCUL\n    MUD\n    LIB\n    MEDIA\n    WLINK\n    GYM\n    SPA\n    TERR\n    POOL\n  end\n\n  subgraph L2[Level 2: Sleeping Level]\n    PRI\n    LAND\n    G1\n    G2\n    G3\n  end\n\n  FOY --\x3e OFF\n  FOY --\x3e GR\n  FOY --\x3e DR --\x3e WINE\n  FOY --\x3e|B| KIT\n  FOY --\x3e|B| FR\n\n  FR --\x3e KIT --\x3e BKF\n  KIT --\x3e SCUL\n  KIT --\x3e|N| CHEF\n  CHEF --\x3e SCUL\n  DR --\x3e|B| CHEF\n  MUD --\x3e SCUL\n  FR --\x3e LIB\n  FR --\x3e MEDIA\n  FR --\x3e TERR\n  KIT --\x3e|N| TERR\n\n  FR --\x3e WLINK\n  WLINK --\x3e GYM\n  WLINK --\x3e SPA --\x3e POOL\n  TERR --\x3e POOL\n\n  GR --\x3e|N| TERR\n  WINE --\x3e|Service| SCUL\n\n  CORE --\x3e PRI\n  CORE --\x3e LAND\n  LAND --\x3e G1\n  LAND --\x3e G2\n  LAND --\x3e G3',twoNodeDescription:"Two-Node Circulation Strategy (15,000 SF)\n\nNode 1: Front Gallery + Formal\n- Primary arrival and formal presentation zone\n- Contains: Foyer/Gallery, Private Office, Great Room, Formal Dining, Wine Storage/Tasting\n- Character: Formal, curated, impressive first impression\n- Private Office has exterior visitor door\n\nNode 2: Family Hub + Service + Wellness\n- Daily living, dual-kitchen service, and wellness zone\n- Contains: Family Room, Show Kitchen, Breakfast, Chef's Kitchen, Scullery, Mudroom, Library, Media, Wellness Link, Gym, Spa, Pool, Terrace\n- Character: Casual, functional, activity-based\n- WLINK is a room (not corridor) that connects to Gym and Spa only\n\nDual-Kitchen Strategy:\n- Show Kitchen (KIT): Family \"performer\" kitchen open to living spaces; island-centric, guest-friendly\n- Chef's Kitchen (CHEF): Discrete service kitchen for formal dining events; buffered from Dining Room to control noise/smells; adjacent to Scullery\n\nLevel 2 Organization:\n- Primary Wing: Full suite with lounge for private decompression\n- Guest Suites: Three suites accessed from daylit landing node\n- Compact circulation avoids long corridors\n\nCross-Links (Controlled Connections):\n1. Great Room to Terrace: Near connection (N) for formal view axis\n2. Wine to Scullery: Buffered (B) service connection\n3. Foyer to Family: Buffered (B) daily connector\n4. Dining to Chef's Kitchen: Buffered (B) service connection\n\nKey Corrections Applied:\n- Terrace relationships: GR and KIT are Near (N) to TERR\n- WLINK connects only to SPA/GYM (not bedrooms)\n- All S (Separate) pairs are in different nodes\n- Dual-kitchen system separates family daily use from formal service"},{id:"20k",name:"20,000 SF",targetSF:2e4,description:"2-level | 8 bedrooms | expanded amenities | no basement",available:!0,spaces:[{id:"s1",code:"FOY",name:"Foyer / Gallery + coat + powder",targetSF:650,zone:"Arrival + Formal",level:1,rationale:"Grand but controlled arrival; art wall and sightlines"},{id:"s2",code:"OFF",name:"Private Office",targetSF:280,zone:"Arrival + Formal",level:1,rationale:"Meetings without entering family zones"},{id:"s3",code:"GR",name:"Great Room (formal)",targetSF:800,zone:"Arrival + Formal",level:1,rationale:"Showcase volume; supports larger entertaining"},{id:"s4",code:"SAL",name:"Formal Lounge / Salon",targetSF:520,zone:"Arrival + Formal",level:1,rationale:"Secondary formal sitting; spreads entertaining load"},{id:"s5",code:"DR",name:"Formal Dining",targetSF:420,zone:"Arrival + Formal",level:1,rationale:"Seats 12-14; correct service clearances"},{id:"s6",code:"WINE",name:"Wine Storage / Tasting",targetSF:220,zone:"Arrival + Formal",level:1,rationale:"Tasting table + display; adjacent to DR"},{id:"s7",code:"FR",name:"Family Room (hub)",targetSF:760,zone:"Family Hub",level:1,rationale:"High-use distributor adjacent to LIB/MEDIA/BAR"},{id:"s8",code:"KIT",name:"Kitchen",targetSF:520,zone:"Family Hub",level:1,rationale:"Chef-grade kitchen; larger island and appliance wall"},{id:"s9",code:"BKF",name:"Breakfast Nook",targetSF:190,zone:"Family Hub",level:1,rationale:"Daily meals; terrace proximity"},{id:"s10",code:"SCUL",name:"Scullery / Catering Prep",targetSF:360,zone:"Family Hub",level:1,rationale:"Secondary kitchen functions for events"},{id:"s10b",code:"CHEF",name:"Chef's Kitchen (service)",targetSF:280,zone:"Service Core",level:1,rationale:"Discrete service kitchen for formal dining; buffered from dining room to control noise and smells"},{id:"s11",code:"MUD",name:"Mudroom / Daily Entry",targetSF:260,zone:"Family Hub",level:1,rationale:"Direct adjacency to service spine (SCUL)"},{id:"s12",code:"LIB",name:"Library",targetSF:320,zone:"Family Hub",level:1,rationale:"Quiet edge to hub"},{id:"s13",code:"MEDIA",name:"Media / Theater (buffered)",targetSF:420,zone:"Family Hub",level:1,rationale:"High performance A/V; sound lock"},{id:"s14",code:"BAR",name:"Bar / Lounge",targetSF:280,zone:"Family Hub",level:1,rationale:"Social node; supports outdoor living"},{id:"s15",code:"GAME",name:"Game / Recreation",targetSF:420,zone:"Family Hub",level:1,rationale:"Dedicated activity room"},{id:"s16",code:"GYM",name:"Gym (daylight + views)",targetSF:380,zone:"Wellness",level:1,rationale:"Premium fitness space with glazing"},{id:"s17",code:"SPA",name:"Spa / Wellness (daylight + views)",targetSF:360,zone:"Wellness",level:1,rationale:"Steam/sauna + treatment; adjacency to pool"},{id:"s18",code:"POOLSUP",name:"Pool Support",targetSF:180,zone:"Wellness",level:1,rationale:"Wet support to keep interiors dry"},{id:"s19",code:"GSL1A",name:"Guest Suite 1 (L1)",targetSF:520,zone:"Hospitality",level:1,rationale:"Main-level guest accommodation"},{id:"s20",code:"GSL1B",name:"Guest Suite 2 (L1)",targetSF:520,zone:"Hospitality",level:1,rationale:"Second suite enables simultaneous hosting"},{id:"s21",code:"LAUN1",name:"Laundry (L1)",targetSF:180,zone:"Service Core",level:1,rationale:"Primary laundry; utility sink + folding"},{id:"s22",code:"MEP",name:"Mechanical / Storage / AV / IT",targetSF:520,zone:"Service Core",level:1,rationale:"No-basement requires robust above-grade support"},{id:"s23",code:"CIRC1",name:"Circulation + stair/lift allowance",targetSF:2920,zone:"Circulation",level:1,rationale:"Generous galleries; node-based plan"},{id:"s24",code:"TERR",name:"Main Terrace / Outdoor Living",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s25",code:"POOL",name:"Lap Pool + Deck",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s26",code:"PRI",name:"Primary Bedroom",targetSF:520,zone:"Primary Wing",level:2,rationale:"Outlook and privacy; separated from kids/guest circulation"},{id:"s27",code:"PRIBATH",name:"Primary Bath",targetSF:420,zone:"Primary Wing",level:2,rationale:"Wet room + tub; daylight"},{id:"s28",code:"PRICL",name:"Primary Closets (his/hers)",targetSF:520,zone:"Primary Wing",level:2,rationale:"Dressing experience"},{id:"s29",code:"PRILNG",name:"Primary Lounge",targetSF:280,zone:"Primary Wing",level:2,rationale:"Private decompression"},{id:"s30",code:"LAND",name:"Landing (daylit)",targetSF:980,zone:"Guest Suites",level:2,rationale:"Node distribution; avoids long corridors"},{id:"s31",code:"GUEST1",name:"Guest Suite (L2) #1",targetSF:360,zone:"Guest Suites",level:2,rationale:"Long-stay comfort"},{id:"s32",code:"GUEST2",name:"Guest Suite (L2) #2",targetSF:360,zone:"Guest Suites",level:2,rationale:"Long-stay comfort"},{id:"s33",code:"GUEST3",name:"Guest Suite (L2) #3",targetSF:360,zone:"Guest Suites",level:2,rationale:"Long-stay comfort"},{id:"s34",code:"GUEST4",name:"Guest Suite (L2) #4",targetSF:360,zone:"Guest Suites",level:2,rationale:"Long-stay comfort"},{id:"s35",code:"PLAY",name:"Kids Playroom (L2)",targetSF:320,zone:"Kids Zone",level:2,rationale:"Buffer between landing and kids sleeping"},{id:"s36",code:"KIDS",name:"Kids Room / Bunk Room (L2)",targetSF:300,zone:"Kids Zone",level:2,rationale:"Bunks + lounge; close to playroom for supervision"},{id:"s37",code:"HW",name:"Homework / Loft Perch (L2)",targetSF:220,zone:"Kids Zone",level:2,rationale:"After-school use; reduces clutter"},{id:"s38",code:"LAUN2",name:"Laundry + linen (L2)",targetSF:220,zone:"Support",level:2,rationale:"Supports guest suites; reduces vertical traffic"},{id:"s39",code:"MEP2",name:"Storage / IT (L2)",targetSF:200,zone:"Support",level:2,rationale:"No-basement systems"},{id:"s40",code:"CORE2",name:"Stair/lift distribution + corridors",targetSF:2580,zone:"Circulation",level:2,rationale:"Generous landing and short connectors"}],adjacencyMatrix:[{fromSpaceCode:"FOY",toSpaceCode:"OFF",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GR",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"SAL",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"FOY",toSpaceCode:"WINE",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"CHEF",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SCUL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MUD",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"LIB",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"BAR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GAME",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"TERR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GYM",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SPA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"POOL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GSL1A",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GSL1B",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"GR",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"SAL",relationship:"S"},{fromSpaceCode:"GR",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"GR",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SAL",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"DR",toSpaceCode:"FOY",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"WINE",relationship:"A"},{fromSpaceCode:"DR",toSpaceCode:"CHEF",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"DR",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"CHEF",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"CHEF",toSpaceCode:"FOY",relationship:"S"},{fromSpaceCode:"WINE",toSpaceCode:"DR",relationship:"A"},{fromSpaceCode:"WINE",toSpaceCode:"SCUL",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"LIB",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"MEDIA",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"BAR",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"KIT",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"BKF",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"CHEF",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"MUD",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SCUL",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"CHEF",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"WINE",relationship:"B"},{fromSpaceCode:"MUD",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"MUD",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"BAR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"BAR",toSpaceCode:"GAME",relationship:"A"},{fromSpaceCode:"BAR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"GAME",toSpaceCode:"BAR",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"SPA",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"BAR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"MEDIA",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST1",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST2",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST3",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST4",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"KIDS",relationship:"S"}],nodes:[{id:"node-1",name:"Node 1: Front Gallery + Formal",description:"Arrival, formal entertaining, office, and main-level guest suites",spaceCodes:["FOY","OFF","GR","SAL","DR","WINE","GSL1A","GSL1B"]},{id:"node-2",name:"Node 2: Family Hub + Entertainment + Service",description:"Daily living, dual-kitchen service, bar, game room, wellness, and outdoor",spaceCodes:["FR","KIT","BKF","CHEF","SCUL","MUD","LIB","MEDIA","BAR","GAME","TERR","GYM","SPA","POOL"]}],crossLinks:[{id:"cl-1",number:1,name:"Formal View Axis",description:"Great Room to Terrace",fromSpaceCode:"GR",toSpaceCode:"TERR",purpose:"Near connection for formal view"},{id:"cl-2",number:2,name:"Wine Service Link",description:"Wine to Scullery",fromSpaceCode:"WINE",toSpaceCode:"SCUL",purpose:"Buffered service connection"},{id:"cl-3",number:3,name:"Daily Connector",description:"Foyer to Family",fromSpaceCode:"FOY",toSpaceCode:"FR",purpose:"Buffered daily connector"},{id:"cl-4",number:4,name:"Entertainment Link",description:"Bar to Terrace",fromSpaceCode:"BAR",toSpaceCode:"TERR",purpose:"Adjacent outdoor entertaining"}],bridgeConfig:{butlerPantry:!0,guestAutonomy:!0,soundLock:!0,wetFeetIntercept:!0,opsCore:!0},bubbleDiagramCode:'graph LR\n  EXT["Exterior Arrival / Entry"]\n  FOY["Foyer / Gallery"]\n  CORE["Main Stair / Lift Core"]\n\n  OFF["Private Office (visitor entry)"]\n  GR["Great Room (formal)"]\n  SAL["Formal Lounge / Salon"]\n  DR["Formal Dining"]\n  WINE["Wine Storage / Tasting"]\n  GS1["Guest Suite (L1) #1"]\n  GS2["Guest Suite (L1) #2"]\n\n  FR["Family Room (hub)"]\n  KIT["Show Kitchen (family)"]\n  BKF["Breakfast Nook"]\n  CHEF["Chef\'s Kitchen (service)"]\n  SCUL["Scullery / Catering Prep"]\n  MUD["Mudroom / Daily Entry"]\n  LIB["Library"]\n  MEDIA["Media / Theater (buffered)"]\n  BAR["Bar / Lounge"]\n  GAME["Game / Recreation"]\n\n  TERR["Main Terrace / Outdoor Living"]\n  GYM["Gym (daylight + views)"]\n  SPA["Spa / Wellness (daylight + views)"]\n  POOL["Lap Pool + Deck"]\n\n  PRI["Primary Suite (L2)"]\n  LAND["Landing (daylit)"]\n  G1["Guest Suite (L2) #1"]\n  G2["Guest Suite (L2) #2"]\n  G3["Guest Suite (L2) #3"]\n  G4["Guest Suite (L2) #4"]\n  PLAY["Kids Playroom (L2)"]\n  KIDS["Kids Room / Bunk (L2)"]\n  HW["Homework / Loft (L2)"]\n\n  EXT --\x3e FOY --\x3e CORE\n\n  subgraph N1[Node 1: Front Gallery + Formal]\n    FOY\n    OFF\n    GR\n    SAL\n    DR\n    WINE\n    GS1\n    GS2\n  end\n\n  subgraph N2[Node 2: Family Hub + Entertainment + Service]\n    FR\n    KIT\n    BKF\n    CHEF\n    SCUL\n    MUD\n    LIB\n    MEDIA\n    BAR\n    GAME\n    TERR\n    GYM\n    SPA\n    POOL\n  end\n\n  subgraph L2[Level 2: Sleeping + Kids]\n    PRI\n    LAND\n    G1\n    G2\n    G3\n    G4\n    PLAY\n    KIDS\n    HW\n  end\n\n  FOY --\x3e OFF\n  FOY --\x3e GR\n  FOY --\x3e SAL\n  FOY --\x3e DR --\x3e WINE\n  FOY --\x3e GS1\n  FOY --\x3e GS2\n  FOY --\x3e|B| KIT\n  FOY --\x3e|B| FR\n\n  FR --\x3e KIT --\x3e BKF\n  KIT --\x3e SCUL\n  KIT --\x3e|N| CHEF\n  CHEF --\x3e SCUL\n  DR --\x3e|B| CHEF\n  MUD --\x3e SCUL\n  FR --\x3e LIB\n  FR --\x3e MEDIA\n  FR --\x3e BAR --\x3e GAME\n  FR --\x3e TERR\n  KIT --\x3e|N| TERR\n  BAR --\x3e TERR\n\n  FR --\x3e GYM --\x3e SPA --\x3e POOL\n  TERR --\x3e POOL\n\n  GR --\x3e|N| TERR\n  WINE --\x3e|Service| SCUL\n\n  CORE --\x3e PRI\n  CORE --\x3e LAND\n  LAND --\x3e G1\n  LAND --\x3e G2\n  LAND --\x3e G3\n  LAND --\x3e G4\n  LAND --\x3e PLAY --\x3e KIDS\n  LAND --\x3e HW',twoNodeDescription:"Two-Node Circulation Strategy (20,000 SF)\n\nNode 1: Front Gallery + Formal\n- Primary arrival and formal presentation zone\n- Contains: Foyer/Gallery, Private Office, Great Room, Salon, Formal Dining, Wine Storage, 2 Main-Level Guest Suites\n- Character: Grand, formal, visitor-ready\n- Salon provides secondary formal sitting to spread entertaining load\n- Two L1 guest suites enable simultaneous hosting\n\nNode 2: Family Hub + Entertainment + Service\n- Daily living, dual-kitchen service, entertainment, and wellness zone\n- Contains: Family Room, Show Kitchen, Breakfast, Chef's Kitchen, Scullery, Mudroom, Library, Media, Bar, Game Room, Terrace, Gym, Spa, Pool\n- Character: Casual, activity-based, family-oriented\n- Bar/Game Room form entertainment wing with terrace access\n- Mudroom is Adjacent to Scullery (service spine requirement)\n\nDual-Kitchen Strategy:\n- Show Kitchen (KIT): Family \"performer\" kitchen open to living spaces; island-centric, guest-friendly\n- Chef's Kitchen (CHEF): Discrete service kitchen for formal dining events; buffered from Dining Room to control noise/smells; adjacent to Scullery\n\nLevel 2 Organization:\n- Primary Wing: Isolated from kids/guest circulation with full lounge\n- Guest Suites: Four suites accessed from daylit landing node\n- Kids Zone: Playroom, Bunk Room, and Homework loft with supervision proximity\n\nCross-Links (Controlled Connections):\n1. Great Room to Terrace: Near connection (N) for formal view axis\n2. Wine to Scullery: Buffered (B) service connection\n3. Foyer to Family: Buffered (B) daily connector\n4. Bar to Terrace: Adjacent (A) for outdoor entertaining\n5. Dining to Chef's Kitchen: Buffered (B) service connection\n\nKey Corrections Applied:\n- FOY to KIT is Buffered (B)\n- MUD is Adjacent (A) to SCUL (service spine)\n- GR and KIT are Near (N) to TERR\n- Primary suite isolated from entertainment wing\n- Dual-kitchen system separates family daily use from formal service"},{id:"custom",name:"Custom",targetSF:0,description:"Define your own program with basement options",available:!0,spaces:[],adjacencyMatrix:[],nodes:[],crossLinks:[],bridgeConfig:{butlerPantry:!1,guestAutonomy:!1,soundLock:!1,wetFeetIntercept:!1,opsCore:!1},bubbleDiagramCode:"",twoNodeDescription:"Custom program allows full flexibility including basement allocation"}];function id(e){return ad.find(t=>t.id===e)}const rd={rooms:[{id:"foy",name:"Foyer",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"gr",name:"Great Room",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"dr",name:"Dining Room",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"terr",name:"Terrace",zone:"outdoor",acousticZone:"zone_2",tags:["outdoor"],moduleId:"module-02"},{id:"kit",name:"Kitchen",zone:"family",acousticZone:"zone_2",tags:["show_kitchen"],moduleId:"module-01"},{id:"scul",name:"Scullery",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-01"},{id:"butler",name:"Butler Pantry",zone:"service",acousticZone:"zone_2",tags:["bridge"],moduleId:"module-01"},{id:"fr",name:"Family Room",zone:"family",acousticZone:"zone_1",tags:[],moduleId:"module-02"},{id:"pri",name:"Primary Bedroom",zone:"primary",acousticZone:"zone_0",tags:["primary_suite"],moduleId:"module-03"},{id:"pribath",name:"Primary Bath",zone:"primary",acousticZone:"zone_0",tags:["primary_suite"],moduleId:"module-03"},{id:"guest1",name:"Guest Suite 1",zone:"guest",acousticZone:"zone_0",tags:["guest"],moduleId:"module-04"},{id:"guestliv",name:"Guest Living",zone:"guest",acousticZone:"zone_1",tags:["guest"],moduleId:"module-04"},{id:"media",name:"Media Room",zone:"entertainment",acousticZone:"zone_3",tags:[],moduleId:"module-05"},{id:"soundlock",name:"Sound Lock",zone:"buffer",acousticZone:"zone_2",tags:["bridge"],moduleId:"module-05"},{id:"mud",name:"Mudroom",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"},{id:"gar",name:"Garage",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"},{id:"serv",name:"Service Corridor",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"}],edges:[{id:"e1",fromRoomId:"foy",toRoomId:"gr",type:"opening"},{id:"e2",fromRoomId:"gr",toRoomId:"dr",type:"opening"},{id:"e3",fromRoomId:"gr",toRoomId:"terr",type:"door"},{id:"e4",fromRoomId:"dr",toRoomId:"butler",type:"door"},{id:"e5",fromRoomId:"butler",toRoomId:"kit",type:"door"},{id:"e6",fromRoomId:"kit",toRoomId:"scul",type:"opening"},{id:"e7",fromRoomId:"scul",toRoomId:"mud",type:"door"},{id:"e8",fromRoomId:"mud",toRoomId:"gar",type:"door"}],namedPaths:[{id:"delivery",name:"Delivery Route",type:"delivery_route",roomIds:["gar","mud","serv","scul"]},{id:"guest-circ",name:"Guest Circulation",type:"guest_circulation",roomIds:["foy","guestliv","guest1"]},{id:"terrace-route",name:"Guest to Terrace",type:"foh_to_terrace",roomIds:["foy","gr","terr"]}],sharedWalls:[{id:"sw1",room1Id:"media",room2Id:"soundlock",isFloor:!1},{id:"sw2",room1Id:"soundlock",room2Id:"fr",isFloor:!1}]},od={rooms:[{id:"foy",name:"Foyer",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"gr",name:"Great Room",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"dr",name:"Dining Room",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"terr",name:"Terrace",zone:"outdoor",acousticZone:"zone_2",tags:[],moduleId:"module-02"},{id:"scul",name:"Basement Kitchen",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-01"},{id:"pri",name:"Primary Bedroom",zone:"primary",acousticZone:"zone_0",tags:["primary_suite"],moduleId:"module-03"},{id:"guest1",name:"Guest Suite 1",zone:"guest",acousticZone:"zone_0",tags:["guest"],moduleId:"module-04"},{id:"media",name:"Media Room",zone:"entertainment",acousticZone:"zone_3",tags:[],moduleId:"module-05"},{id:"mud",name:"Mudroom",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"},{id:"gar",name:"Garage",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"}],edges:[],namedPaths:[{id:"delivery-bad",name:"Delivery Route",type:"delivery_route",roomIds:["gar","gr","scul"]},{id:"guest-circ-bad",name:"Guest Circulation",type:"guest_circulation",roomIds:["foy","pri","guest1"]},{id:"terrace-bad",name:"Guest to Terrace",type:"foh_to_terrace",roomIds:["foy","gr","scul","terr"]}],sharedWalls:[{id:"sw-bad",room1Id:"media",room2Id:"pri",isFloor:!1}]};function sd(e){const t=ld(e),n=md(e),a=function(e,t,n){return{butlerPantry:vd(e,t),guestAutonomy:yd(e,n),soundLock:bd(e,n),wetFeetIntercept:xd(e,t),opsCore:Sd(e,t)}}(e,t,n),i=jd(e),r=wd(e),o=function(e){let t=0,n=0;const a=[e.propertyContext,e.householdProfile,e.entertainingProfile,e.staffingProfile,e.privacyProfile,e.kitchenProfile,e.wellnessProfile,e.specialRequirements];for(const i of a){const e=Object.keys(i);n+=e.length;for(const n of e){const e=i[n];void 0===e||null===e||""===e||Array.isArray(e)&&0===e.length||t++}}return Math.round(t/n*100)}(e);return{operatingModel:t,lifestylePriorities:n,bridgeConfig:a,uniqueRequirements:i,recommendedPreset:r,confidenceScore:o,warnings:Nd(e,t,n)}}function ld(e){return{typology:cd(e.propertyContext.residenceType),entertainingLoad:dd(e.entertainingProfile.frequency),staffingLevel:ud(e.staffingProfile.preference),privacyPosture:hd(e.privacyProfile.preference),wetProgram:pd(e.wellnessProfile)}}function cd(e){return{primary:"single_family",secondary:"single_family",vacation:"vacation",winter:"winter",investment:"multi_family"}[e]||"single_family"}function dd(e){return{rarely:"rare",occasionally:"quarterly",regularly:"monthly",frequently:"weekly"}[e]||"monthly"}function ud(e){return{self_sufficient:"none",occasional:"none",regular:"part_time",full_service:"full_time",estate:"live_in"}[e]||"none"}function hd(e){return{welcoming:"open",selective:"balanced",formal:"formal",sanctuary:"private"}[e]||"balanced"}function pd(e){const{interest:t,poolDesired:n,spaFeatures:a}=e;return"resort"===t||"dedicated"===t?"full_wellness":n&&a.length>0?"pool_spa":n?"pool_only":"none"}function md(e){return{chefLedCooking:(a=e.kitchenProfile,"serious"===a.cookingStyle||"professional"===a.cookingStyle||a.separateCateringKitchen||"staff"===a.primaryCook),multiFamilyHosting:fd(e),lateNightMedia:e.privacyProfile.lateNightMediaUse,homeOffice:(n=e.privacyProfile.workFromHome,"primary"===n||"executive"===n),fitnessRecovery:(t=e.wellnessProfile,"regular"===t.fitnessRoutine||"intensive"===t.fitnessRoutine||t.spaFeatures.length>=2),poolEntertainment:gd(e)};var t,n,a}function fd(e){return e.privacyProfile.multiGenerationalHosting||"multi_generational"===e.householdProfile.composition||"blended_family"===e.householdProfile.composition||"frequently"===e.privacyProfile.guestStayFrequency&&"overnight"!==e.privacyProfile.typicalGuestStayDuration}function gd(e){return e.wellnessProfile.poolDesired&&e.entertainingProfile.outdoorEntertainingImportance>=4}function vd(e,t){return e.entertainingProfile.cateringSupport||e.entertainingProfile.formalDiningImportance>=4||e.kitchenProfile.separateCateringKitchen||"weekly"===t.entertainingLoad&&"open"!==t.privacyPosture}function yd(e,t){return t.multiFamilyHosting||e.privacyProfile.separateGuestAccess||"extended"===e.privacyProfile.typicalGuestStayDuration||"week"===e.privacyProfile.typicalGuestStayDuration}function bd(e,t){return t.lateNightMedia||e.privacyProfile.mediaRoom||e.specialRequirements.recordingStudio||e.specialRequirements.musicRoom}function xd(e,t){return"none"!==t.wetProgram||e.wellnessProfile.poolDesired||e.wellnessProfile.spaFeatures.includes("hot_tub")}function Sd(e,t){return"none"!==t.staffingLevel||"heavy"===e.staffingProfile.packageDeliveryVolume||"minimal"!==e.staffingProfile.securityRequirements}function jd(e){const t=[];for(const n of e.householdProfile.pets)"dog"===n.type.toLowerCase()&&"small"!==n.size&&(t.push({id:"pet-".concat(n.type,"-wash"),type:"addition",category:"pets",description:"Dog wash station for ".concat(n.size||"medium/large"," ").concat(n.type),spaceCode:"DOGWASH",estimatedSF:40,adjacencyNeeds:["MUD","GAR"],priority:"preferred",sourceQuestion:"householdProfile.pets"}),t.push({id:"pet-".concat(n.type,"-run"),type:"addition",category:"pets",description:"Dog run access from mudroom",priority:"preferred",sourceQuestion:"householdProfile.pets"}));if(e.entertainingProfile.wineCollection&&e.entertainingProfile.wineBottleCount){const n=e.entertainingProfile.wineBottleCount;let a=110;n>500&&(a=200),n>1e3&&(a=350),n>2e3&&(a=500),t.push({id:"wine-expansion",type:"modification",category:"entertaining",description:"Expanded wine storage for ".concat(n," bottles"),spaceCode:"WINE",estimatedSF:a,adjacencyNeeds:["DR","SCUL"],priority:"required",sourceQuestion:"entertainingProfile.wineBottleCount"})}if(e.specialRequirements.artCollection&&(t.push({id:"art-gallery",type:"modification",category:"special",description:"Gallery-quality wall space and lighting for art collection",adjacencyNeeds:["FOY","GR"],priority:e.specialRequirements.artClimateControl?"required":"preferred",sourceQuestion:"specialRequirements.artCollection"}),e.specialRequirements.artClimateControl&&t.push({id:"art-climate",type:"addition",category:"special",description:"Climate-controlled art storage",spaceCode:"ARTSTORE",estimatedSF:150,priority:"required",sourceQuestion:"specialRequirements.artClimateControl"})),e.specialRequirements.musicRoom&&t.push({id:"music-room",type:"addition",category:"special",description:"Sound-isolated music room",spaceCode:"MUSIC",estimatedSF:250,adjacencyNeeds:["MEDIA"],priority:"required",sourceQuestion:"specialRequirements.musicRoom"}),e.specialRequirements.recordingStudio&&t.push({id:"recording-studio",type:"addition",category:"special",description:"Professional recording studio with control room",spaceCode:"STUDIO",estimatedSF:400,priority:"required",sourceQuestion:"specialRequirements.recordingStudio"}),e.specialRequirements.workshop&&t.push({id:"workshop",type:"addition",category:"special",description:"Workshop/maker space",spaceCode:"WORKSHOP",estimatedSF:300,adjacencyNeeds:["GAR"],priority:"preferred",sourceQuestion:"specialRequirements.workshop"}),e.wellnessProfile.carCollection){const n=e.wellnessProfile.garageBays;n>4&&t.push({id:"car-collection",type:"modification",category:"automotive",description:"Expanded garage for ".concat(n," vehicles with display area"),spaceCode:"GAR",estimatedSF:250*n,priority:"required",sourceQuestion:"wellnessProfile.garageBays"})}e.specialRequirements.safe_room&&t.push({id:"safe-room",type:"addition",category:"security",description:"Secure safe room / panic room",spaceCode:"SAFE",estimatedSF:100,adjacencyNeeds:["PRI"],priority:"required",sourceQuestion:"specialRequirements.safe_room"}),(e.householdProfile.mobilityConsiderations||e.householdProfile.elderlyResidents)&&(t.push({id:"accessibility",type:"modification",category:"accessibility",description:"Elevator and accessible design throughout",priority:"required",sourceQuestion:"householdProfile.mobilityConsiderations"}),t.push({id:"main-level-suite",type:"modification",category:"accessibility",description:"Full suite capability on main level",adjacencyNeeds:["GYM","WELLNESS"],priority:"required",sourceQuestion:"householdProfile.elderlyResidents"}));for(const n of e.specialRequirements.customSpaces)t.push({id:"custom-".concat(n.name.toLowerCase().replace(/\s+/g,"-")),type:"addition",category:"custom",description:n.description,estimatedSF:n.estimatedSF,adjacencyNeeds:n.adjacencyNeeds?[n.adjacencyNeeds]:void 0,priority:"preferred",sourceQuestion:"specialRequirements.customSpaces"});return e.privacyProfile.clientMeetingsAtHome&&t.push({id:"executive-office",type:"modification",category:"work",description:"Executive office with separate visitor access",spaceCode:"OFF",estimatedSF:300,adjacencyNeeds:["FOY"],priority:"required",sourceQuestion:"privacyProfile.clientMeetingsAtHome"}),t}function wd(e){const t=e.propertyContext.estimatedSF,n=function(e){let t=0;"multi_generational"===e.householdProfile.composition&&(t+=2);"blended_family"===e.householdProfile.composition&&(t+=1);e.householdProfile.elderlyResidents&&(t+=1);e.householdProfile.pets.length>1&&(t+=1);"frequently"===e.entertainingProfile.frequency&&(t+=2);"grand"===e.entertainingProfile.maxEventScale&&(t+=2);e.entertainingProfile.wineCollection&&(t+=1);"estate"===e.staffingProfile.preference&&(t+=2);"full_service"===e.staffingProfile.preference&&(t+=1);"resort"===e.wellnessProfile.interest&&(t+=2);e.wellnessProfile.spaFeatures.length>=3&&(t+=1);e.specialRequirements.artClimateControl&&(t+=1);e.specialRequirements.recordingStudio&&(t+=2);e.specialRequirements.safe_room&&(t+=1);return t+=e.specialRequirements.customSpaces.length,t}(e);return t<=12e3&&n<=3?"10k":t<=17e3&&n<=4?"15k":t<=22e3?"20k":"custom"}function Nd(e,t,n){const a=[];return"private"===t.privacyPosture&&n.multiFamilyHosting&&a.push("Private posture conflicts with multi-family hosting. Consider redesigning guest circulation to maintain primary suite sanctuary."),"grand"===e.entertainingProfile.maxEventScale&&"none"===t.staffingLevel&&a.push("Grand-scale entertaining (50+ guests) without staff may create service bottlenecks. Consider at least part-time staff or enhanced self-service design."),n.lateNightMedia&&"private"===t.privacyPosture&&a.push("Late-night media use requires sound lock vestibule to protect bedroom acoustics. Ensure media room is not adjacent to primary suite."),"full_wellness"===t.wetProgram&&"winter"===t.typology&&a.push("Full wellness program in winter residence requires enhanced MEP for humidity control. Budget for dedicated dehumidification systems."),(e.householdProfile.elderlyResidents||e.householdProfile.mobilityConsiderations)&&e.propertyContext.numberOfLevels>1&&a.push("Multi-level home with accessibility needs requires elevator. Also ensure main-level suite capability."),e.wellnessProfile.carCollection&&e.wellnessProfile.garageBays<4&&a.push("Car collection indicated but garage bays seem insufficient. Recommend minimum 4+ bays with climate control."),e.specialRequirements.artCollection&&!e.specialRequirements.artClimateControl&&a.push("Significant art collection may require climate control for preservation. Consider adding climate-controlled storage."),e.privacyProfile.clientMeetingsAtHome&&!e.privacyProfile.separateGuestAccess&&a.push("Client meetings at home should have separate visitor routing. Office should connect to foyer without crossing family spaces."),a}!function(){console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("N4S VALIDATION ENGINE - PATH TRACING TESTS"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");const e={typology:"single_family",entertainingLoad:"monthly",staffingLevel:"part_time",privacyPosture:"balanced",wetProgram:"pool_spa"},t={chefLedCooking:!0,multiFamilyHosting:!1,lateNightMedia:!0,homeOffice:!0,fitnessRecovery:!0,poolEntertainment:!0};console.log("TEST 1: PASSING PLAN (Correct Circulation)"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const n=Ic({projectId:"test-passing",operatingModel:e,lifestylePriorities:t,planGraph:rd});console.log("Gate Status: ".concat(n.gateStatus.toUpperCase())),console.log("Overall Score: ".concat(n.overallScore)),console.log("Critical Flags: ".concat(n.redFlags.filter(e=>"critical"===e.severity).length)),console.log("Warning Flags: ".concat(n.redFlags.filter(e=>"warning"===e.severity).length)),n.redFlags.length>0?(console.log("\nFlags:"),n.redFlags.forEach(e=>{console.log("  [".concat(e.severity.toUpperCase(),"] ").concat(e.description))})):console.log("\n\u2713 No path tracing violations detected"),console.log("\n\nTEST 2: FAILING PLAN (Multiple Violations)"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const a=Ic({projectId:"test-failing",operatingModel:e,lifestylePriorities:t,planGraph:od});console.log("Gate Status: ".concat(a.gateStatus.toUpperCase())),console.log("Overall Score: ".concat(a.overallScore)),console.log("Critical Flags: ".concat(a.redFlags.filter(e=>"critical"===e.severity).length)),console.log("Warning Flags: ".concat(a.redFlags.filter(e=>"warning"===e.severity).length)),console.log("\nCritical Violations:"),a.redFlags.filter(e=>"critical"===e.severity).forEach((e,t)=>{console.log("\n  ".concat(t+1,". [").concat(e.ruleId,"] ").concat(e.description)),console.log("     Affected: ".concat(e.affectedRooms.join(", "))),console.log("     Action: ".concat(e.correctiveAction))}),console.log("\n\nTEST 3: ISOLATED PATH TRACING"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const i=Tc(od);console.log("Path violations detected: ".concat(i.length)),i.forEach(e=>{console.log("  - ".concat(e.description))}),console.log("\n\nTEST 4: ACOUSTIC ZONE VIOLATIONS"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const r=Hc(od);console.log("Acoustic violations detected: ".concat(r.length)),r.forEach(e=>{console.log("  - ".concat(e.description))}),console.log("\n\nTEST 5: SHOW KITCHEN CHECK"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const o=Gc(rd),s=Gc(od);console.log("Passing plan has show kitchen: ".concat(null===o?"\u2713 YES":"\u2717 NO")),console.log("Failing plan has show kitchen: ".concat(null===s?"\u2713 YES":"\u2717 NO")),s&&console.log("  Violation: ".concat(s.description)),console.log("\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("TEST SUMMARY"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");const l=[{name:"Passing Plan Gate Status",pass:"fail"!==n.gateStatus},{name:"Failing Plan Gate Status",pass:"fail"===a.gateStatus},{name:"Path Tracing Detects FOH Crossing",pass:i.some(e=>"critical-002"===e.ruleId)},{name:"Path Tracing Detects Primary Threshold",pass:i.some(e=>"critical-001"===e.ruleId)},{name:"Path Tracing Detects Kitchen Aisle",pass:i.some(e=>"critical-005"===e.ruleId)},{name:"Acoustic Check Detects Zone Conflict",pass:r.length>0},{name:"Kitchen Check Passes Good Plan",pass:null===o},{name:"Kitchen Check Fails Bad Plan",pass:null!==s}];let c=0;l.forEach(e=>{const t=e.pass?"\u2713":"\u2717";console.log("  ".concat(t," ").concat(e.name)),e.pass&&c++}),console.log("\n  PASSED: ".concat(c,"/").concat(l.length)),console.log("\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n")}();const kd={id:"kyc-001",clientId:"client-thornwood",projectId:"thornwood-estate",createdAt:"2026-01-03T00:00:00Z",updatedAt:"2026-01-03T00:00:00Z",propertyContext:{residenceType:"primary",estimatedSF:12e3,siteLotSize:"3 acres",hasBasement:!1,numberOfLevels:2,climateZone:"temperate",existingStructure:!1},householdProfile:{composition:"couple_adult_children",primaryResidents:2,childrenAges:[28,25],elderlyResidents:!1,mobilityConsiderations:!1,pets:[{type:"dog",size:"large",count:2,specialNeeds:"Needs outdoor access and wash station"}]},entertainingProfile:{frequency:"regularly",typicalScale:"moderate",maxEventScale:"large",formalDiningImportance:4,outdoorEntertainingImportance:5,cateringSupport:!0,wineCollection:!0,wineBottleCount:800,barEntertainingImportance:3},staffingProfile:{preference:"regular",currentStaff:[{role:"housekeeper",liveIn:!1,fullTime:!1}],plannedStaff:["part-time chef"],securityRequirements:"moderate",packageDeliveryVolume:"moderate"},privacyProfile:{preference:"selective",guestStayFrequency:"regularly",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!1,separateGuestAccess:!1,workFromHome:"occasional",clientMeetingsAtHome:!1,mediaRoom:!0,lateNightMediaUse:!0},kitchenProfile:{cookingStyle:"enthusiast",primaryCook:"both",breakfastStyle:"casual",dailyMealsAtHome:2,showKitchenImportance:5,professionalAppliances:!0,multipleOvens:!0,wineStorage:!0,separateCateringKitchen:!1},wellnessProfile:{interest:"active",fitnessRoutine:"regular",poolDesired:!0,poolType:"lap",spaFeatures:["hot_tub","sauna"],outdoorActivities:["gardening"],garageBays:3,carCollection:!1},specialRequirements:{accessibility:[],medicalEquipment:!1,artCollection:!1,artClimateControl:!1,musicRoom:!1,recordingStudio:!1,workshop:!1,wineRoom:!0,safe_room:!1,customSpaces:[]}},_d={id:"kyc-002",clientId:"client-multigen",projectId:"multi-gen-compound",createdAt:"2026-01-03T00:00:00Z",updatedAt:"2026-01-03T00:00:00Z",propertyContext:{residenceType:"primary",estimatedSF:18e3,siteLotSize:"5 acres",hasBasement:!1,numberOfLevels:2,climateZone:"temperate",existingStructure:!1},householdProfile:{composition:"multi_generational",primaryResidents:6,childrenAges:[12,8],elderlyResidents:!0,mobilityConsiderations:!0,pets:[]},entertainingProfile:{frequency:"occasionally",typicalScale:"intimate",maxEventScale:"moderate",formalDiningImportance:3,outdoorEntertainingImportance:3,cateringSupport:!1,wineCollection:!1,barEntertainingImportance:2},staffingProfile:{preference:"full_service",currentStaff:[{role:"housekeeper",liveIn:!0,fullTime:!0},{role:"caregiver",liveIn:!1,fullTime:!0}],plannedStaff:[],securityRequirements:"enhanced",packageDeliveryVolume:"heavy"},privacyProfile:{preference:"sanctuary",guestStayFrequency:"rarely",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!0,separateGuestAccess:!0,workFromHome:"primary",clientMeetingsAtHome:!0,mediaRoom:!0,lateNightMediaUse:!1},kitchenProfile:{cookingStyle:"casual",primaryCook:"staff",breakfastStyle:"casual",dailyMealsAtHome:3,showKitchenImportance:3,professionalAppliances:!0,multipleOvens:!1,wineStorage:!1,separateCateringKitchen:!0},wellnessProfile:{interest:"dedicated",fitnessRoutine:"light",poolDesired:!0,poolType:"recreational",spaFeatures:["hot_tub","steam","massage_room"],outdoorActivities:[],garageBays:4,carCollection:!1},specialRequirements:{accessibility:["elevator","wide_doorways","grab_bars"],medicalEquipment:!0,artCollection:!0,artClimateControl:!0,musicRoom:!1,recordingStudio:!1,workshop:!1,wineRoom:!1,safe_room:!0,customSpaces:[{name:"Meditation Garden",description:"Enclosed courtyard garden for quiet reflection",estimatedSF:200,adjacencyNeeds:"SPA"}]}},Cd={id:"kyc-003",clientId:"client-exec",projectId:"executive-retreat",createdAt:"2026-01-03T00:00:00Z",updatedAt:"2026-01-03T00:00:00Z",propertyContext:{residenceType:"secondary",estimatedSF:15e3,siteLotSize:"10 acres",hasBasement:!1,numberOfLevels:2,climateZone:"temperate",existingStructure:!1},householdProfile:{composition:"couple_no_children",primaryResidents:2,childrenAges:[],elderlyResidents:!1,mobilityConsiderations:!1,pets:[{type:"dog",size:"medium",count:1}]},entertainingProfile:{frequency:"rarely",typicalScale:"intimate",maxEventScale:"moderate",formalDiningImportance:4,outdoorEntertainingImportance:3,cateringSupport:!0,wineCollection:!0,wineBottleCount:2500,barEntertainingImportance:4},staffingProfile:{preference:"estate",currentStaff:[],plannedStaff:["estate manager","chef","housekeeper"],securityRequirements:"comprehensive",packageDeliveryVolume:"heavy"},privacyProfile:{preference:"sanctuary",guestStayFrequency:"occasionally",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!1,separateGuestAccess:!0,workFromHome:"executive",clientMeetingsAtHome:!0,mediaRoom:!0,lateNightMediaUse:!0},kitchenProfile:{cookingStyle:"serious",primaryCook:"mixed",breakfastStyle:"formal",dailyMealsAtHome:2,showKitchenImportance:5,professionalAppliances:!0,multipleOvens:!0,wineStorage:!0,separateCateringKitchen:!0},wellnessProfile:{interest:"resort",fitnessRoutine:"intensive",poolDesired:!0,poolType:"infinity",spaFeatures:["sauna","steam","cold_plunge","massage_room"],outdoorActivities:["tennis"],garageBays:8,carCollection:!0},specialRequirements:{accessibility:[],medicalEquipment:!1,artCollection:!0,artClimateControl:!0,musicRoom:!0,recordingStudio:!1,workshop:!1,wineRoom:!0,safe_room:!0,customSpaces:[{name:"Trophy Room",description:"Display room for awards and memorabilia",estimatedSF:200}]}};!function(){console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("N4S KYC INTEGRATION TESTS"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");const e=[{name:"Thornwood Estate",kyc:kd},{name:"Multi-Gen Compound",kyc:_d},{name:"Executive Retreat",kyc:Cd}];for(const a of e){console.log("\n".concat("\u2500".repeat(65))),console.log("PROFILE: ".concat(a.name)),console.log("".concat("\u2500".repeat(65),"\n"));const e=sd(a.kyc);if(console.log("OPERATING MODEL:"),console.log("  Typology:        ".concat(e.operatingModel.typology)),console.log("  Entertaining:    ".concat(e.operatingModel.entertainingLoad)),console.log("  Staffing:        ".concat(e.operatingModel.staffingLevel)),console.log("  Privacy:         ".concat(e.operatingModel.privacyPosture)),console.log("  Wet Program:     ".concat(e.operatingModel.wetProgram)),console.log("\nLIFESTYLE PRIORITIES:"),console.log("  Chef-Led Cooking:      ".concat(e.lifestylePriorities.chefLedCooking)),console.log("  Multi-Family Hosting:  ".concat(e.lifestylePriorities.multiFamilyHosting)),console.log("  Late-Night Media:      ".concat(e.lifestylePriorities.lateNightMedia)),console.log("  Home Office:           ".concat(e.lifestylePriorities.homeOffice)),console.log("  Fitness/Recovery:      ".concat(e.lifestylePriorities.fitnessRecovery)),console.log("  Pool Entertainment:    ".concat(e.lifestylePriorities.poolEntertainment)),console.log("\nBRIDGE REQUIREMENTS:"),console.log("  Butler Pantry:     ".concat(e.bridgeConfig.butlerPantry?"\u2713":"\u2013")),console.log("  Guest Autonomy:    ".concat(e.bridgeConfig.guestAutonomy?"\u2713":"\u2013")),console.log("  Sound Lock:        ".concat(e.bridgeConfig.soundLock?"\u2713":"\u2013")),console.log("  Wet-Feet Intercept:".concat(e.bridgeConfig.wetFeetIntercept?"\u2713":"\u2013")),console.log("  Ops Core:          ".concat(e.bridgeConfig.opsCore?"\u2713":"\u2013")),e.uniqueRequirements.length>0){console.log("\nUNIQUE REQUIREMENTS:");for(const t of e.uniqueRequirements)console.log("  \u2022 [".concat(t.priority.toUpperCase(),"] ").concat(t.description)),t.spaceCode&&console.log("    Space: ".concat(t.spaceCode," (").concat(t.estimatedSF||"?"," SF)")),t.adjacencyNeeds&&console.log("    Adjacent to: ".concat(t.adjacencyNeeds.join(", ")))}if(console.log("\nRECOMMENDATIONS:"),console.log("  Preset:           ".concat(e.recommendedPreset.toUpperCase())),console.log("  Confidence:       ".concat(e.confidenceScore,"%")),e.warnings.length>0){console.log("\nWARNINGS:");for(const t of e.warnings)console.log("  \u26a0 ".concat(t))}console.log("\n--- VALIDATION RESULT ---");const t=Ic({projectId:a.kyc.projectId,operatingModel:e.operatingModel,lifestylePriorities:e.lifestylePriorities});console.log("  Gate Status:      ".concat(t.gateStatus.toUpperCase())),console.log("  Overall Score:    ".concat(t.overallScore)),console.log("  Red Flags:        ".concat(t.redFlags.length)),console.log("  Missing Bridges:  ".concat(t.requiredBridges.filter(e=>!e.isPresent).length))}console.log("\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("KYC INTEGRATION TEST SUMMARY"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");const t=[{name:"Thornwood \u2192 monthly entertaining",pass:"monthly"===sd(kd).operatingModel.entertainingLoad},{name:"Thornwood \u2192 pool_spa wet program",pass:"pool_spa"===sd(kd).operatingModel.wetProgram},{name:"Thornwood \u2192 dog wash extracted",pass:jd(kd).some(e=>e.id.includes("dog"))},{name:"Thornwood \u2192 wine expansion extracted",pass:jd(kd).some(e=>"wine-expansion"===e.id)},{name:"MultiGen \u2192 private posture",pass:"private"===sd(_d).operatingModel.privacyPosture},{name:"MultiGen \u2192 multi-family hosting flag",pass:!0===sd(_d).lifestylePriorities.multiFamilyHosting},{name:"MultiGen \u2192 accessibility extracted",pass:jd(_d).some(e=>"accessibility"===e.id)},{name:"MultiGen \u2192 safe room extracted",pass:jd(_d).some(e=>"safe-room"===e.id)},{name:"MultiGen \u2192 20k preset recommended",pass:"20k"===wd(_d)},{name:"Executive \u2192 live-in staffing",pass:"live_in"===sd(Cd).operatingModel.staffingLevel},{name:"Executive \u2192 full_wellness",pass:"full_wellness"===sd(Cd).operatingModel.wetProgram},{name:"Executive \u2192 car collection garage",pass:jd(Cd).some(e=>"car-collection"===e.id)},{name:"Executive \u2192 executive office",pass:jd(Cd).some(e=>"executive-office"===e.id)},{name:"Executive \u2192 late-night media warning",pass:Nd(Cd,ld(Cd),md(Cd)).some(e=>e.includes("media"))}];let n=0;for(const a of t){const e=a.pass?"\u2713":"\u2717";console.log("  ".concat(e," ").concat(a.name)),a.pass&&n++}console.log("\n  PASSED: ".concat(n,"/").concat(t.length)),console.log("\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n")}();var Pd=n(9367),Fd=n(8907);n(8237);const Ad=d("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),Ld=d("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]),Md=d("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),Rd=d("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]),Id={Briefcase:be,ChefHat:Ad,Tv:Ld,Users:h,BedDouble:Md,Wine:Rd,Dumbbell:Dr,Home:u};function Td(e){let{option:t,isSelected:n,isRecommended:a,onSelect:i}=e;return(0,T.jsxs)("div",{className:"option-item ".concat(n?"selected":""," ").concat(a?"recommended":""),onClick:i,children:[(0,T.jsx)("div",{className:"option-radio",children:(0,T.jsx)("div",{className:"radio-circle ".concat(n?"checked":""),children:n&&(0,T.jsx)("div",{className:"radio-dot"})})}),(0,T.jsxs)("div",{className:"option-content",children:[(0,T.jsxs)("div",{className:"option-header",children:[(0,T.jsx)("span",{className:"option-label",children:t.label}),a&&(0,T.jsx)("span",{className:"recommended-tag",children:"Recommended"}),t.sfImpact&&t.sfImpact>0&&(0,T.jsxs)("span",{className:"sf-impact",children:["+",t.sfImpact," SF"]})]}),(0,T.jsx)("p",{className:"option-description",children:t.description}),t.warnings.length>0&&!n&&(0,T.jsxs)("span",{className:"option-warning-hint",children:[(0,T.jsx)(Ze,{className:"hint-icon"}),t.warnings.length," consideration",1!==t.warnings.length?"s":""]})]})]})}const zd=function(e){let{decision:t,selectedOptionId:n,recommendedOptionId:a,confidence:i,reasoning:r,onSelect:o,onExpand:s,compact:l=!1}=e;const c=t.options.find(e=>e.id===n),d=n===a,u=(null===c||void 0===c?void 0:c.warnings)&&c.warnings.length>0,h=Id[t.icon]||be;return l?(0,T.jsxs)("div",{className:"decision-card compact ".concat(u?"has-warnings":""),onClick:s,children:[(0,T.jsx)("div",{className:"card-icon",children:(0,T.jsx)(h,{className:"icon"})}),(0,T.jsxs)("div",{className:"card-content",children:[(0,T.jsx)("h3",{className:"card-title",children:t.title}),(0,T.jsx)("p",{className:"card-selection",children:(null===c||void 0===c?void 0:c.label)||"Not selected"})]}),(0,T.jsxs)("div",{className:"card-status",children:[d?(0,T.jsxs)("span",{className:"status-badge recommended",children:[(0,T.jsx)(K,{className:"badge-icon"}),"Recommended"]}):u?(0,T.jsxs)("span",{className:"status-badge warning",children:[(0,T.jsx)(Ze,{className:"badge-icon"}),null===c||void 0===c?void 0:c.warnings.length," warning",1!==(null===c||void 0===c?void 0:c.warnings.length)?"s":""]}):(0,T.jsx)("span",{className:"status-badge custom",children:"Custom"}),(0,T.jsx)(x,{className:"chevron"})]})]}):(0,T.jsxs)("div",{className:"decision-card expanded ".concat(u?"has-warnings":""),children:[(0,T.jsxs)("div",{className:"card-header",children:[(0,T.jsx)("div",{className:"header-icon",children:(0,T.jsx)(h,{className:"icon"})}),(0,T.jsxs)("div",{className:"header-content",children:[(0,T.jsx)("h3",{className:"card-title",children:t.title}),(0,T.jsx)("p",{className:"card-question",children:t.question})]}),i&&(0,T.jsxs)("div",{className:"confidence-badge ".concat(i),children:[i," confidence"]})]}),(0,T.jsx)("p",{className:"card-context",children:t.context}),r&&(0,T.jsxs)("div",{className:"recommendation-reasoning",children:[(0,T.jsx)("strong",{children:"Why we recommend:"})," ",r]}),(0,T.jsx)("div",{className:"options-list",children:t.options.map(e=>(0,T.jsx)(Td,{option:e,isSelected:e.id===n,isRecommended:e.id===a,onSelect:()=>o(e.id)},e.id))}),u&&c&&(0,T.jsxs)("div",{className:"warnings-panel",children:[(0,T.jsxs)("h4",{children:[(0,T.jsx)(Ze,{className:"warning-icon"}),"Considerations"]}),(0,T.jsx)("ul",{children:c.warnings.map((e,t)=>(0,T.jsx)("li",{children:e},t))})]})]})};const Dd=function(e){let{recommendations:t,selections:n,presetName:a,totalSF:i,onSelectionChange:r,onExpandDecision:o,onAcceptAll:s,onReviewAll:l}=e;const c=t.length,d=t.filter(e=>n[e.decision.id]!==e.recommendedOption.id).length,u=t.reduce((e,t)=>{var a;const i=n[t.decision.id],r=t.decision.options.find(e=>e.id===i);return e+((null===r||void 0===r||null===(a=r.warnings)||void 0===a?void 0:a.length)||0)},0),h=t.reduce((e,t)=>{const a=n[t.decision.id],i=t.decision.options.find(e=>e.id===a);return e+((null===i||void 0===i?void 0:i.sfImpact)||0)},0),p=t.filter(e=>"high"===e.confidence),m=t.filter(e=>"medium"===e.confidence),f=t.filter(e=>"low"===e.confidence);return(0,T.jsxs)("div",{className:"recommendations-summary",children:[(0,T.jsxs)("header",{className:"summary-header",children:[(0,T.jsx)("div",{className:"header-icon",children:(0,T.jsx)(Br,{className:"icon"})}),(0,T.jsxs)("div",{className:"header-content",children:[(0,T.jsx)("h2",{children:"Your Personalized Layout"}),(0,T.jsxs)("p",{children:["Based on your lifestyle, we recommend these key relationships for your ",a," home."]})]})]}),(0,T.jsxs)("div",{className:"summary-stats",children:[(0,T.jsxs)("div",{className:"stat",children:[(0,T.jsx)("span",{className:"stat-value",children:c}),(0,T.jsx)("span",{className:"stat-label",children:"Decisions"})]}),(0,T.jsxs)("div",{className:"stat",children:[(0,T.jsx)("span",{className:"stat-value",children:c-d}),(0,T.jsx)("span",{className:"stat-label",children:"Recommended"})]}),(0,T.jsxs)("div",{className:"stat ".concat(u>0?"has-warnings":""),children:[(0,T.jsx)("span",{className:"stat-value",children:u}),(0,T.jsx)("span",{className:"stat-label",children:"Warnings"})]}),(0,T.jsxs)("div",{className:"stat",children:[(0,T.jsx)("span",{className:"stat-value",children:h>0?"+".concat(h.toLocaleString()):"0"}),(0,T.jsx)("span",{className:"stat-label",children:"SF Impact"})]})]}),p.length>0&&(0,T.jsxs)("section",{className:"confidence-section high",children:[(0,T.jsxs)("h3",{className:"section-title",children:[(0,T.jsx)(K,{className:"section-icon"}),"Strong Recommendations"]}),(0,T.jsx)("p",{className:"section-description",children:"Based on clear signals from your lifestyle profile"}),(0,T.jsx)("div",{className:"decisions-list",children:p.map(e=>(0,T.jsx)(zd,{decision:e.decision,selectedOptionId:n[e.decision.id],recommendedOptionId:e.recommendedOption.id,confidence:e.confidence,reasoning:e.reasoning,onSelect:t=>r(e.decision.id,t),onExpand:()=>o(e.decision.id),compact:!0},e.decision.id))})]}),m.length>0&&(0,T.jsxs)("section",{className:"confidence-section medium",children:[(0,T.jsxs)("h3",{className:"section-title",children:[(0,T.jsx)(g,{className:"section-icon"}),"Suggested Defaults"]}),(0,T.jsx)("p",{className:"section-description",children:"Reasonable defaults you may want to customize"}),(0,T.jsx)("div",{className:"decisions-list",children:m.map(e=>(0,T.jsx)(zd,{decision:e.decision,selectedOptionId:n[e.decision.id],recommendedOptionId:e.recommendedOption.id,confidence:e.confidence,reasoning:e.reasoning,onSelect:t=>r(e.decision.id,t),onExpand:()=>o(e.decision.id),compact:!0},e.decision.id))})]}),f.length>0&&(0,T.jsxs)("section",{className:"confidence-section low",children:[(0,T.jsxs)("h3",{className:"section-title",children:[(0,T.jsx)(Ze,{className:"section-icon"}),"Needs Your Input"]}),(0,T.jsx)("p",{className:"section-description",children:"We need more information to recommend these"}),(0,T.jsx)("div",{className:"decisions-list",children:f.map(e=>(0,T.jsx)(zd,{decision:e.decision,selectedOptionId:n[e.decision.id],recommendedOptionId:e.recommendedOption.id,confidence:e.confidence,reasoning:e.reasoning,onSelect:t=>r(e.decision.id,t),onExpand:()=>o(e.decision.id),compact:!0},e.decision.id))})]}),(0,T.jsxs)("div",{className:"summary-actions",children:[(0,T.jsxs)("button",{className:"btn-secondary",onClick:l,children:["Review Each Decision",(0,T.jsx)(x,{className:"btn-icon"})]}),(0,T.jsxs)("button",{className:"btn-primary",onClick:s,children:[(0,T.jsx)(K,{className:"btn-icon"}),"Accept All & Continue"]})]}),d>0&&(0,T.jsxs)("div",{className:"custom-notice",children:[(0,T.jsx)(Ze,{className:"notice-icon"}),(0,T.jsxs)("span",{children:["You've customized ",d," decision",1!==d?"s":"","from recommendations."]})]})]})},Ed={Briefcase:be,ChefHat:Ad,Tv:Ld,Users:h,BedDouble:Md,Wine:Rd,Dumbbell:Dr,Home:u};function Od(e){let{option:t,isSelected:n,isRecommended:a,onSelect:i}=e;return(0,T.jsxs)("div",{className:"detail-option-card ".concat(n?"selected":""," ").concat(a?"recommended":""),onClick:i,children:[(0,T.jsxs)("div",{className:"option-header",children:[(0,T.jsx)("div",{className:"option-radio",children:(0,T.jsx)("div",{className:"radio-circle ".concat(n?"checked":""),children:n&&(0,T.jsx)("div",{className:"radio-dot"})})}),(0,T.jsx)("h4",{className:"option-title",children:t.label}),a&&(0,T.jsxs)("span",{className:"recommended-tag",children:[(0,T.jsx)(K,{className:"tag-icon"}),"Recommended"]})]}),(0,T.jsx)("p",{className:"option-description",children:t.description}),(0,T.jsxs)("div",{className:"option-meta",children:[t.sfImpact&&t.sfImpact>0&&(0,T.jsxs)("span",{className:"meta-item sf",children:["+",t.sfImpact," SF"]}),t.bridgeRequired&&(0,T.jsxs)("span",{className:"meta-item bridge",children:["Adds ",t.bridgeRequired.replace(/([A-Z])/g," $1").trim()]}),t.warnings.length>0&&(0,T.jsxs)("span",{className:"meta-item warnings",children:[(0,T.jsx)(Ze,{className:"meta-icon"}),t.warnings.length," consideration",1!==t.warnings.length?"s":""]})]}),(0,T.jsxs)("div",{className:"option-relationship",children:[(0,T.jsx)("span",{className:"relationship-label",children:"Creates:"}),(0,T.jsxs)("span",{className:"relationship-value",children:["A"===t.relationship&&"Adjacent connection","N"===t.relationship&&"Near placement","B"===t.relationship&&"Buffered separation","S"===t.relationship&&"Full separation"]})]})]})}const Bd=function(e){let{decision:t,selectedOptionId:n,recommendedOptionId:a,reasoning:i,currentIndex:r,totalCount:o,onSelect:s,onPrevious:l,onNext:c,onBack:d}=e;const u=t.options.find(e=>e.id===n),h=Ed[t.icon]||be;return(0,T.jsxs)("div",{className:"decision-detail",children:[(0,T.jsxs)("header",{className:"detail-header",children:[(0,T.jsxs)("button",{className:"back-btn",onClick:d,children:[(0,T.jsx)(Z,{className:"btn-icon"}),"All Decisions"]}),(0,T.jsxs)("div",{className:"progress-indicator",children:[r+1," of ",o]})]}),(0,T.jsxs)("div",{className:"detail-content",children:[(0,T.jsxs)("div",{className:"decision-header",children:[(0,T.jsx)("div",{className:"header-icon large",children:(0,T.jsx)(h,{className:"icon"})}),(0,T.jsxs)("div",{className:"header-text",children:[(0,T.jsx)("h2",{children:t.title}),(0,T.jsx)("p",{className:"question",children:t.question})]})]}),(0,T.jsxs)("div",{className:"context-panel",children:[(0,T.jsx)(Ce,{className:"context-icon"}),(0,T.jsx)("p",{children:t.context})]}),i&&(0,T.jsxs)("div",{className:"recommendation-panel",children:[(0,T.jsxs)("div",{className:"panel-header",children:[(0,T.jsx)(K,{className:"panel-icon"}),(0,T.jsx)("strong",{children:"Our Recommendation"})]}),(0,T.jsx)("p",{children:i})]}),(0,T.jsxs)("div",{className:"options-section",children:[(0,T.jsx)("h3",{children:"Choose Your Preference"}),(0,T.jsx)("div",{className:"options-grid",children:t.options.map(e=>(0,T.jsx)(Od,{option:e,isSelected:e.id===n,isRecommended:e.id===a,onSelect:()=>s(e.id)},e.id))})]}),u&&u.warnings.length>0&&(0,T.jsxs)("div",{className:"warnings-section",children:[(0,T.jsxs)("h3",{children:[(0,T.jsx)(Ze,{className:"section-icon warning"}),"Things to Consider"]}),(0,T.jsx)("ul",{className:"warnings-list",children:u.warnings.map((e,t)=>(0,T.jsxs)("li",{className:"warning-item",children:[(0,T.jsx)(Ze,{className:"warning-icon"}),(0,T.jsx)("span",{children:e})]},t))}),(0,T.jsx)("p",{className:"warning-note",children:"These aren't dealbreakers \u2014 just factors to keep in mind as you plan your home. You can proceed with this choice if it fits your priorities."})]}),(null===u||void 0===u?void 0:u.bridgeRequired)&&(0,T.jsxs)("div",{className:"bridge-notice",children:[(0,T.jsx)(Ce,{className:"notice-icon"}),(0,T.jsxs)("div",{className:"notice-content",children:[(0,T.jsx)("strong",{children:"This choice adds a bridge space"}),(0,T.jsxs)("p",{children:["A ",u.bridgeRequired.replace(/([A-Z])/g," $1").trim(),"will be added to support this layout choice.",u.sfImpact&&" (+".concat(u.sfImpact," SF)")]})]})]})]}),(0,T.jsxs)("footer",{className:"detail-footer",children:[(0,T.jsxs)("button",{className:"nav-btn prev",onClick:l,disabled:0===r,children:[(0,T.jsx)(Z,{className:"btn-icon"}),"Previous"]}),(0,T.jsxs)("div",{className:"selection-summary",children:[(0,T.jsx)("span",{className:"summary-label",children:"Selected:"}),(0,T.jsx)("span",{className:"summary-value",children:null===u||void 0===u?void 0:u.label}),(null===u||void 0===u?void 0:u.id)===a&&(0,T.jsxs)("span",{className:"recommended-badge",children:[(0,T.jsx)(K,{className:"badge-icon"}),"Recommended"]})]}),(0,T.jsxs)("button",{className:"nav-btn next",onClick:c,disabled:r===o-1,children:["Next",(0,T.jsx)(A,{className:"btn-icon"})]})]})]})},qd=d("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Hd=d("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Gd=d("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Wd=d("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ud={Briefcase:be,ChefHat:Ad,Tv:Ld,Users:h,BedDouble:Md,Wine:Rd,Dumbbell:Dr,Home:u};function Kd(e){return{butlerPantry:"Service corridor between kitchen and dining for discreet service",soundLock:"Acoustic vestibule to isolate media room from sleeping areas",guestAutonomy:"Independent guest suite with kitchenette and separate entry option",wetFeetIntercept:"Pool-to-house transition zone with drainage and towel storage",opsCore:"Staff operations hub for deliveries, packages, and housekeeping"}[e]||"Supporting space for your layout"}const Vd=function(e){let{result:t,decisions:i,presetName:r,baseSF:o,onBack:s,onViewDiagram:l,onExport:c,onContinueToBuilder:d}=e;const u=o+t.totalSfImpact,h=t.warningCount>0,p=t.redFlagCount>0?"warning":h?"advisory":"pass",[m,f]=(0,a.useState)(!0),[g,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),x=(0,a.useRef)(null),j=t.choices.filter(e=>e.isDefault),w=t.choices.filter(e=>!e.isDefault),N=t.choices.filter(e=>e.warnings.length>0),k=a.useMemo(()=>{try{const e=["flowchart LR"],n=new Set;return t.choices.forEach(t=>{const a=i.find(e=>e.id===t.decisionId),r=null===a||void 0===a?void 0:a.options.find(e=>e.id===t.selectedOptionId);if(!a||!r)return;const o=a.primarySpace,s=r.targetSpace;n.has(o)||(e.push("  ".concat(o,"[").concat(o,"]")),n.add(o)),n.has(s)||(e.push("  ".concat(s,"[").concat(s,"]")),n.add(s));const l=r.relationship;"A"===l?e.push("  ".concat(o," === ").concat(s)):"B"===l?e.push("  ".concat(o," --- ").concat(s)):"S"===l&&e.push("  ".concat(o," -.- ").concat(s))}),e.join("\n")}catch(Sg){return console.error("Failed to generate diagram:",Sg),null}},[t.choices,i]);(0,a.useEffect)(()=>{if(!k||!x.current||!m)return;(async()=>{try{const e=window.mermaid;if(!e)return void console.warn("Mermaid not loaded");x.current.innerHTML="";const t=document.createElement("div");t.className="mermaid",t.textContent=k,x.current.appendChild(t),await e.init(void 0,t),b(!0)}catch(Sg){console.error("Mermaid render error:",Sg)}})()},[k,m]);const _=()=>{const e={exportDate:(new Date).toISOString(),preset:r,baseSF:o,totalSF:u,sfImpact:t.totalSfImpact,decisions:t.choices.map(e=>{const t=i.find(t=>t.id===e.decisionId),n=null===t||void 0===t?void 0:t.options.find(t=>t.id===e.selectedOptionId);return{decision:null===t||void 0===t?void 0:t.title,selection:null===n||void 0===n?void 0:n.label,relationship:null===n||void 0===n?void 0:n.relationship,targetSpace:null===n||void 0===n?void 0:n.targetSpace,isRecommended:e.isDefault,warnings:e.warnings,sfImpact:(null===n||void 0===n?void 0:n.sfImpact)||0}}),bridges:t.requiredBridges,totalWarnings:t.warningCount,status:p},n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download="adjacency-personalization-".concat(r.replace(/[^a-z0-9]/gi,""),".json"),s.click(),URL.revokeObjectURL(a)};return(0,T.jsxs)("div",{className:"personalization-result",children:[(0,T.jsx)("header",{className:"result-header",children:(0,T.jsxs)("button",{className:"back-btn",onClick:s,children:[(0,T.jsx)(Z,{className:"btn-icon"}),"Back to Decisions"]})}),(0,T.jsxs)("div",{className:"result-content",children:[(0,T.jsxs)("div",{className:"status-banner ".concat(p),children:["pass"===p&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(K,{className:"status-icon"}),(0,T.jsxs)("div",{className:"status-text",children:[(0,T.jsx)("h2",{children:"Your Layout is Optimized"}),(0,T.jsx)("p",{children:"All recommendations accepted with no concerns"})]})]}),"advisory"===p&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ze,{className:"status-icon"}),(0,T.jsxs)("div",{className:"status-text",children:[(0,T.jsx)("h2",{children:"Ready with Advisories"}),(0,T.jsxs)("p",{children:[t.warningCount," consideration",1!==t.warningCount?"s":""," to review"]})]})]}),"warning"===p&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ze,{className:"status-icon"}),(0,T.jsxs)("div",{className:"status-text",children:[(0,T.jsx)("h2",{children:"Review Recommended"}),(0,T.jsxs)("p",{children:[t.redFlagCount," potential issue",1!==t.redFlagCount?"s":""," detected"]})]})]})]}),(0,T.jsxs)("div",{className:"summary-cards",children:[(0,T.jsxs)("div",{className:"summary-card",children:[(0,T.jsx)("span",{className:"card-label",children:"Total Program"}),(0,T.jsxs)("span",{className:"card-value",children:[u.toLocaleString()," SF"]}),(0,T.jsxs)("span",{className:"card-detail",children:[r," baseline",t.totalSfImpact>0&&" + ".concat(t.totalSfImpact," SF")]})]}),(0,T.jsxs)("div",{className:"summary-card",children:[(0,T.jsx)("span",{className:"card-label",children:"Decisions Made"}),(0,T.jsx)("span",{className:"card-value",children:t.choices.length}),(0,T.jsxs)("span",{className:"card-detail",children:[j.length," recommended, ",w.length," custom"]})]}),(0,T.jsxs)("div",{className:"summary-card ".concat(h?"has-warnings":""),children:[(0,T.jsx)("span",{className:"card-label",children:"Considerations"}),(0,T.jsx)("span",{className:"card-value",children:t.warningCount}),(0,T.jsx)("span",{className:"card-detail",children:0===t.warningCount?"None":"Review below"})]}),(0,T.jsxs)("div",{className:"summary-card",children:[(0,T.jsx)("span",{className:"card-label",children:"Bridges Added"}),(0,T.jsx)("span",{className:"card-value",children:t.requiredBridges.length}),(0,T.jsx)("span",{className:"card-detail",children:0===t.requiredBridges.length?"None required":t.requiredBridges.map(e=>e.replace(/([A-Z])/g," $1").trim()).join(", ")})]})]}),k&&(0,T.jsxs)("section",{className:"diagram-section",children:[(0,T.jsxs)("div",{className:"section-header",children:[(0,T.jsxs)("h3",{children:[(0,T.jsx)(Pe,{className:"section-icon"}),"Relationship Diagram"]}),(0,T.jsxs)("div",{className:"diagram-controls",children:[(0,T.jsxs)("button",{className:"control-btn",onClick:()=>f(!m),children:[m?(0,T.jsx)(qd,{className:"btn-icon"}):(0,T.jsx)(Pe,{className:"btn-icon"}),m?"Hide":"Show"]}),m&&(0,T.jsxs)("button",{className:"control-btn",onClick:()=>v(!g),children:[g?(0,T.jsx)(Hd,{className:"btn-icon"}):(0,T.jsx)(Gd,{className:"btn-icon"}),g?"Collapse":"Expand"]})]})]}),m&&(0,T.jsxs)("div",{className:"diagram-container ".concat(g?"expanded":""),children:[(0,T.jsx)("div",{ref:x,className:"mermaid-diagram"}),!y&&(0,T.jsx)("div",{className:"diagram-loading",children:"Loading diagram..."})]})]}),(0,T.jsxs)("section",{className:"choices-section",children:[(0,T.jsx)("h3",{children:"Your Selections"}),(0,T.jsx)("div",{className:"choices-list",children:t.choices.map(e=>{const t=i.find(t=>t.id===e.decisionId);if(!t)return null;const n=t.options.find(t=>t.id===e.selectedOptionId);if(!n)return null;const a=Ud[t.icon]||be;return(0,T.jsxs)("div",{className:"choice-item ".concat(e.warnings.length>0?"has-warnings":""),children:[(0,T.jsx)("div",{className:"choice-icon",children:(0,T.jsx)(a,{className:"icon"})}),(0,T.jsxs)("div",{className:"choice-content",children:[(0,T.jsxs)("div",{className:"choice-header",children:[(0,T.jsx)("span",{className:"choice-title",children:t.title}),e.isDefault?(0,T.jsxs)("span",{className:"choice-badge recommended",children:[(0,T.jsx)(K,{className:"badge-icon"}),"Recommended"]}):(0,T.jsx)("span",{className:"choice-badge custom",children:"Custom"})]}),(0,T.jsx)("span",{className:"choice-selection",children:n.label}),(0,T.jsxs)("span",{className:"choice-relationship",children:[t.primarySpace," \u2192 ",n.targetSpace," (",n.relationship,")"]}),e.warnings.length>0&&(0,T.jsx)("div",{className:"choice-warnings",children:e.warnings.map((e,t)=>(0,T.jsxs)("span",{className:"warning-tag",children:[(0,T.jsx)(Ze,{className:"warning-icon"}),e]},t))})]})]},e.decisionId)})})]}),t.requiredBridges.length>0&&(0,T.jsxs)("section",{className:"bridges-section",children:[(0,T.jsx)("h3",{children:"Required Bridge Spaces"}),(0,T.jsx)("p",{className:"section-description",children:"These spaces will be added to support your layout choices:"}),(0,T.jsx)("div",{className:"bridges-list",children:t.requiredBridges.map(e=>(0,T.jsxs)("div",{className:"bridge-item",children:[(0,T.jsx)(K,{className:"bridge-icon"}),(0,T.jsxs)("div",{className:"bridge-content",children:[(0,T.jsx)("span",{className:"bridge-name",children:e.replace(/([A-Z])/g," $1").trim()}),(0,T.jsx)("span",{className:"bridge-description",children:Kd(e)})]})]},e))})]}),N.length>0&&(0,T.jsxs)("section",{className:"warnings-section",children:[(0,T.jsxs)("h3",{children:[(0,T.jsx)(Ze,{className:"section-icon"}),"Considerations Summary"]}),(0,T.jsx)("p",{className:"section-description",children:"These aren't problems \u2014 just factors to keep in mind when discussing your home with your architect."}),(0,T.jsx)("ul",{className:"warnings-detail-list",children:N.flatMap(e=>{const t=i.find(t=>t.id===e.decisionId);return e.warnings.map((n,a)=>(0,T.jsxs)("li",{className:"warning-detail-item",children:[(0,T.jsxs)("span",{className:"warning-context",children:[null===t||void 0===t?void 0:t.title,":"]}),(0,T.jsx)("span",{className:"warning-text",children:n})]},"".concat(e.decisionId,"-").concat(a)))})})]})]}),(0,T.jsxs)("footer",{className:"result-footer",children:[(0,T.jsxs)("button",{className:"btn-secondary",onClick:l,children:[(0,T.jsx)(Pe,{className:"btn-icon"}),"Full Diagram View"]}),(0,T.jsxs)("button",{className:"btn-secondary",onClick:async()=>{try{const{generatePersonalizationPDF:e}=await n.e(596).then(n.bind(n,2596));await e({result:t,decisions:i,presetName:r,baseSF:o,totalSF:u,mermaidCode:k})}catch(Sg){console.error("PDF export failed:",Sg),_()}},children:[(0,T.jsx)(Wd,{className:"btn-icon"}),"Export PDF"]}),(0,T.jsxs)("button",{className:"btn-primary",onClick:d,children:[(0,T.jsx)(S,{className:"btn-icon"}),"Continue to Full Brief"]})]})]})};function Yd(e){let{kyc:t,preset:n,baseSF:i,baseMatrix:r,savedDecisions:o,onDecisionChange:l,onComplete:c,onCancel:d,onViewDiagram:u}=e;const[h,p]=(0,a.useState)("summary"),[m,f]=(0,a.useState)(null),g=(0,a.useMemo)(()=>(0,Fd.n5)(t,n),[t,n]),[v,y]=(0,a.useState)(()=>{const e={};for(const t of g)e[t.decision.id]=(null===o||void 0===o?void 0:o[t.decision.id])||t.recommendedOption.id;return e}),b=(0,a.useMemo)(()=>g.map(e=>({decisionId:e.decision.id,selectedOptionId:v[e.decision.id],isDefault:v[e.decision.id]===e.recommendedOption.id,warnings:[]})),[g,v]),x=(0,a.useMemo)(()=>(0,Fd.q5)([...b]),[b]),S=(0,a.useMemo)(()=>({"5k":"5,000 SF","10k":"10,000 SF","15k":"15,000 SF","20k":"20,000 SF"}[n]||n),[n]),j=(0,a.useCallback)((e,t)=>{y(n=>s(s({},n),{},{[e]:t})),l&&l(e,t)},[l]),w=(0,a.useCallback)(e=>{f(e),p("detail")},[]),N=(0,a.useCallback)(()=>{p("result")},[]),k=(0,a.useCallback)(()=>{g.length>0&&(f(g[0].decision.id),p("detail"))},[g]),_=(0,a.useCallback)(()=>{p("summary"),f(null)},[]),C=(0,a.useCallback)(()=>{const e=g.findIndex(e=>e.decision.id===m);e>0&&f(g[e-1].decision.id)},[g,m]),P=(0,a.useCallback)(()=>{const e=g.findIndex(e=>e.decision.id===m);e<g.length-1?f(g[e+1].decision.id):p("result")},[g,m]),F=(0,a.useCallback)(()=>{const e={preset:n,baseSF:i,totalSF:i+x.totalSfImpact,decisions:x.choices.map(e=>{const t=Pd.FK.find(t=>t.id===e.decisionId),n=null===t||void 0===t?void 0:t.options.find(t=>t.id===e.selectedOptionId);return{decision:null===t||void 0===t?void 0:t.title,selection:null===n||void 0===n?void 0:n.label,isRecommended:e.isDefault,warnings:e.warnings}}),bridges:x.requiredBridges,warnings:x.warningCount},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="adjacency-personalization-".concat(n,".json"),r.click(),URL.revokeObjectURL(a)},[n,i,x]),A=(0,a.useCallback)(()=>{const e=(0,Fd.Qy)(r,x.choices),t=(0,Fd.Rh)(x.choices);c({choices:x.choices,updatedMatrix:e,bridgeConfig:t,totalSfImpact:x.totalSfImpact,warningCount:x.warningCount})},[r,x,c]);return(0,T.jsxs)("div",{className:"adjacency-personalization",children:[(0,T.jsxs)("header",{className:"personalization-header",children:[(0,T.jsxs)("button",{className:"cancel-btn",onClick:d,children:[(0,T.jsx)(Z,{className:"btn-icon"}),"Back"]}),(0,T.jsxs)("div",{className:"header-title",children:[(0,T.jsx)("h1",{children:"Personalize Your Layout"}),(0,T.jsx)("span",{className:"preset-badge",children:S})]}),(0,T.jsx)("div",{className:"header-spacer"})]}),(0,T.jsx)("main",{className:"personalization-content",children:(()=>{switch(h){case"summary":return(0,T.jsx)(Dd,{recommendations:g,selections:v,presetName:S,totalSF:i,onSelectionChange:j,onExpandDecision:w,onAcceptAll:N,onReviewAll:k});case"detail":const e=g.find(e=>e.decision.id===m),t=g.findIndex(e=>e.decision.id===m);return e?(0,T.jsx)(Bd,{decision:e.decision,selectedOptionId:v[e.decision.id],recommendedOptionId:e.recommendedOption.id,reasoning:e.reasoning,currentIndex:t,totalCount:g.length,onSelect:t=>j(e.decision.id,t),onPrevious:C,onNext:P,onBack:_}):(p("summary"),null);case"result":return(0,T.jsx)(Vd,{result:x,decisions:Pd.FK,presetName:S,baseSF:i,onBack:_,onViewDiagram:u||(()=>{}),onExport:F,onContinueToBuilder:A});default:return null}})()})]})}function Zd(e){let{completeness:t}=e;const{sections:n,percentage:a}=t;return(0,T.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,T.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Profile Completeness"}),(0,T.jsxs)("span",{className:"text-sm text-gray-500",children:[a,"%"]})]}),(0,T.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:(0,T.jsx)("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:"".concat(a,"%"),background:"#1e3a5f"}})}),(0,T.jsx)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:Object.entries(n).map(e=>{let[t,n]=e;return(0,T.jsxs)("div",{className:"flex items-center gap-1 ".concat(n?"text-green-600":"text-gray-400"),children:[n?(0,T.jsx)(K,{className:"w-3 h-3"}):(0,T.jsx)("div",{className:"w-3 h-3 rounded-full border border-current"}),(0,T.jsx)("span",{children:$d(t)})]},t)})})]})}function $d(e){return{familyHousehold:"Family & Household",lifestyleLiving:"Lifestyle",workingPreferences:"Work Preferences",projectParameters:"Project Parameters",spaceRequirements:"Space Requirements",designIdentity:"Design Identity",budgetFramework:"Budget",culturalContext:"Cultural Context",portfolioContext:"Portfolio"}[e]||e}function Qd(e){var t,n;let{onBack:i,onComplete:r,onViewDiagram:o,onGoToKYC:s,showProgress:l=!0}=e;const{fyiData:c,updateMVPAdjacencyConfig:d,updateMVPDecisionAnswer:u}=(0,a.useContext)(U),{kycResponse:h,preset:p,baseSF:m,completeness:f}=Wr(),g=(null===c||void 0===c||null===(t=c.mvpAdjacencyConfig)||void 0===t?void 0:t.decisionAnswers)||{},v=null===c||void 0===c||null===(n=c.mvpAdjacencyConfig)||void 0===n?void 0:n.tier,y=(0,a.useMemo)(()=>{try{return id(p)}catch(Sg){return console.error("Failed to get preset:",Sg),null}},[p]),b=(null===y||void 0===y?void 0:y.adjacencyMatrix)||[];(0,a.useEffect)(()=>{p&&p!==v&&(console.log("[AdjacencyView] Updating tier:",p),d({tier:p}))},[p,v,d]);const x=(0,a.useCallback)((e,t)=>{console.log("[AdjacencyView] Decision changed:",e,t),u(e,t)},[u]),S=(0,a.useCallback)(e=>{console.log("[AdjacencyView] Personalization complete:",e);const t={};e.choices.forEach(e=>{t[e.decisionId]=e.selectedOptionId}),d({tier:p,decisionAnswers:t,questionnaireCompletedAt:(new Date).toISOString()}),r&&r(e)},[p,d,r]);return y?f.hasMinimumData?(0,T.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l&&f.percentage<100&&(0,T.jsx)("div",{className:"bg-white border-b px-6 py-3",children:(0,T.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,T.jsxs)("span",{className:"text-gray-600",children:["Profile ",f.percentage,"% complete"]}),(0,T.jsx)("button",{onClick:s,className:"text-navy hover:opacity-80",style:{color:"#1e3a5f"},children:"Improve recommendations \u2192"})]}),(0,T.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-2",children:(0,T.jsx)("div",{className:"h-1 rounded-full",style:{width:"".concat(f.percentage,"%"),background:"#1e3a5f"}})})]})}),(0,T.jsx)(Yd,{kyc:h,preset:p,baseSF:m,baseMatrix:b,savedDecisions:g,onDecisionChange:x,onComplete:S,onCancel:i,onViewDiagram:o})]}):(0,T.jsxs)("div",{className:"p-6 max-w-2xl mx-auto",children:[(0,T.jsxs)("button",{onClick:i,className:"n4s-btn n4s-btn--ghost mb-6",children:[(0,T.jsx)(Z,{className:"w-4 h-4"}),"Back to Overview"]}),(0,T.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,T.jsxs)("div",{className:"text-center mb-6",children:[(0,T.jsx)("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,T.jsx)(Ce,{className:"w-8 h-8 text-amber-600"})}),(0,T.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Complete Your Profile First"}),(0,T.jsx)("p",{className:"text-gray-600 mt-2",children:"We need some basic information about your household and lifestyle to provide personalized layout recommendations."})]}),(0,T.jsx)(Zd,{completeness:f}),(0,T.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[(0,T.jsx)("h4",{className:"font-medium text-amber-800 mb-2",children:"Required sections:"}),(0,T.jsx)("ul",{className:"space-y-2",children:f.missingRequired.map(e=>(0,T.jsxs)("li",{className:"flex items-center gap-2 text-amber-700",children:[(0,T.jsx)(Tr,{className:"w-4 h-4"}),$d(e)]},e))})]}),(0,T.jsxs)("div",{className:"flex gap-4",children:[(0,T.jsx)("button",{onClick:s,className:"n4s-btn n4s-btn--primary flex-1",children:"Go to KYC Profile"}),(0,T.jsx)("button",{onClick:i,className:"n4s-btn n4s-btn--secondary",children:"Cancel"})]})]})]}):(0,T.jsxs)("div",{className:"p-6",children:[(0,T.jsxs)("button",{onClick:i,className:"n4s-btn n4s-btn--ghost mb-4",children:[(0,T.jsx)(Z,{className:"w-4 h-4"}),"Back to Overview"]}),(0,T.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,T.jsx)("h3",{className:"text-red-800 font-medium",children:"Unable to load Personalization"}),(0,T.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"Please ensure property configuration is complete."})]})]})}const Jd=d("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Xd=d("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),eu=e=>{let{currentGate:t,gateStatus:n}=e;const a=[{id:"A",name:"Profile Complete",description:"KYC sections filled",shortDesc:"Capture operating model, lifestyle priorities, and target thresholds"},{id:"B",name:"Space Program",description:"FYI selections done",shortDesc:"Draft 8-zone concept zoning and run Master Adjacency Gate"},{id:"C",name:"Module Validation",description:"Rules reviewed",shortDesc:"Run module-level checklists and confirm circulation overlays"},{id:"D",name:"Adjacency Lock",description:"Decisions made",shortDesc:"Translate intent into dimensioned plans, freeze adjacency logic"},{id:"E",name:"Brief Ready",description:"Export available",shortDesc:"Final validation complete, ready for architect handoff"}];return(0,T.jsxs)("div",{className:"module-workflow",children:[(0,T.jsx)("h3",{className:"module-workflow__title",children:"Deployment Workflow"}),(0,T.jsx)("p",{className:"module-workflow__subtitle",children:"Deploy the modules as a staged validation process. Lock zoning, adjacencies, and operating loops early, then refine dimensions, detailing, and materiality."}),(0,T.jsx)("div",{className:"module-workflow__gates",children:a.map((e,t)=>{const i=(r=e.id,"complete"===n[r]?"complete":"current"===n[r]?"current":"warning"===n[r]?"warning":"locked");var r;return(0,T.jsxs)("div",{className:"module-gate module-gate--".concat(i),children:[(0,T.jsx)("div",{className:"module-gate__badge",children:e.id}),(0,T.jsxs)("div",{className:"module-gate__content",children:[(0,T.jsx)("div",{className:"module-gate__name",children:e.name}),(0,T.jsx)("div",{className:"module-gate__desc",children:e.shortDesc})]}),t<a.length-1&&(0,T.jsx)("div",{className:"module-gate__arrow",children:(0,T.jsx)(x,{size:16})})]},e.id)})})]})},tu=e=>{let{module:t,isExpanded:n,onToggle:a,checklistState:i,onChecklistChange:r}=e;const o=i?t.checklistItems.filter(e=>i[e.id]).length:0,s=t.checklistItems.length,l=o===s;return(0,T.jsxs)("div",{className:"module-card ".concat(n?"module-card--expanded":""),children:[(0,T.jsxs)("div",{className:"module-card__header",onClick:a,children:[(0,T.jsx)("div",{className:"module-card__number",children:String(t.number).padStart(2,"0")}),(0,T.jsxs)("div",{className:"module-card__info",children:[(0,T.jsx)("h4",{className:"module-card__name",children:t.name}),(0,T.jsx)("p",{className:"module-card__focus",children:t.primaryFocus})]}),(0,T.jsxs)("div",{className:"module-card__meta",children:[(0,T.jsxs)("span",{className:"module-card__progress ".concat(l?"module-card__progress--complete":""),children:[o,"/",s," items"]}),n?(0,T.jsx)(C,{size:20}):(0,T.jsx)(x,{size:20})]})]}),n&&(0,T.jsxs)("div",{className:"module-card__body",children:[(0,T.jsxs)("div",{className:"module-section",children:[(0,T.jsx)("h5",{className:"module-section__title",children:"Overview"}),(0,T.jsx)("p",{className:"module-section__text",children:t.description}),(0,T.jsxs)("div",{className:"module-section__focus",children:[(0,T.jsx)("span",{className:"module-section__label",children:"Primary Focus"}),(0,T.jsx)("span",{className:"module-section__value",children:t.primaryFocus})]})]}),(0,T.jsxs)("div",{className:"module-section",children:[(0,T.jsxs)("h5",{className:"module-section__title",children:[(0,T.jsx)(S,{size:16}),"Gate Deliverables"]}),(0,T.jsx)("p",{className:"module-section__subtitle",children:"Minimum required deliverables for gate approval:"}),(0,T.jsx)("ol",{className:"module-deliverables",children:t.gateDeliverables.map((e,t)=>(0,T.jsx)("li",{className:"module-deliverable",children:e},t))})]}),(0,T.jsxs)("div",{className:"module-section",children:[(0,T.jsxs)("h5",{className:"module-section__title",children:[(0,T.jsx)(Jd,{size:16}),"Checklist Items"]}),(0,T.jsx)("p",{className:"module-section__subtitle",children:"Review these items during validation:"}),(0,T.jsx)("div",{className:"module-checklist",children:t.checklistItems.map(e=>(0,T.jsxs)("label",{className:"module-checklist-item",children:[(0,T.jsx)("input",{type:"checkbox",checked:(null===i||void 0===i?void 0:i[e.id])||!1,onChange:t=>r(e.id,t.target.checked),className:"module-checklist-item__input"}),(0,T.jsx)("div",{className:"module-checklist-item__box",children:null!==i&&void 0!==i&&i[e.id]?(0,T.jsx)(K,{size:18,className:"module-checklist-item__icon--checked"}):(0,T.jsx)(Xd,{size:18,className:"module-checklist-item__icon"})}),(0,T.jsxs)("div",{className:"module-checklist-item__content",children:[(0,T.jsx)("span",{className:"module-checklist-item__name",children:e.name}),(0,T.jsx)("span",{className:"module-checklist-item__desc",children:e.description})]})]},e.id))})]})]})]})},nu=e=>{let{onBack:t,onProceedToValidation:n,gateStatus:i={},checklistState:r={},onChecklistChange:o,hasUnsavedChanges:s=!1,isSaving:l=!1,onSave:c}=e;const[d,u]=(0,a.useState)(null),h=(0,a.useMemo)(()=>{let e=0,t=0;return nd.forEach(n=>{n.checklistItems.forEach(n=>{t++,r[n.id]&&e++})}),{completed:e,total:t,percentage:t>0?Math.round(e/t*100):0}},[r]),p=(e,t)=>{o&&o(e,t)};return(0,T.jsxs)("div",{className:"module-library",children:[(0,T.jsxs)("div",{className:"module-library__header",children:[(0,T.jsxs)("button",{className:"n4s-btn n4s-btn--ghost",onClick:()=>{d?u(null):t()},children:[(0,T.jsx)(Z,{size:16}),d?"Back to Module Library":"Back to Overview"]}),c&&(0,T.jsx)("button",{className:"n4s-btn ".concat(s?"n4s-btn--primary":"n4s-btn--secondary"),onClick:c,disabled:l||!s,children:l?"Saving...":s?"Save Changes":"Saved"})]}),(0,T.jsxs)("div",{className:"module-library__title-section",children:[(0,T.jsx)("h2",{className:"module-library__title",children:"Module Library"}),(0,T.jsx)("p",{className:"module-library__subtitle",children:"8 deployable modules for mansion program validation"}),(0,T.jsxs)("div",{className:"module-library__progress",children:[(0,T.jsx)("div",{className:"module-library__progress-bar",children:(0,T.jsx)("div",{className:"module-library__progress-fill",style:{width:"".concat(h.percentage,"%")}})}),(0,T.jsxs)("span",{className:"module-library__progress-text",children:[h.completed," of ",h.total," checklist items complete (",h.percentage,"%)"]})]})]}),(0,T.jsx)("div",{className:"module-library__grid",children:nd.map(e=>(0,T.jsx)(tu,{module:e,isExpanded:d===e.id,onToggle:()=>{return t=e.id,void u(d===t?null:t);var t},checklistState:r,onChecklistChange:p},e.id))}),(0,T.jsx)(eu,{currentGate:"C",gateStatus:i}),(0,T.jsx)("div",{className:"module-library__actions",children:(0,T.jsxs)("button",{className:"n4s-btn n4s-btn--primary",onClick:n,children:[(0,T.jsx)(qr,{size:16}),"Run Validation"]})})]})},au="#1e3a5f",iu="#fafaf8",ru="#ffffff",ou="#e5e5e0",su="#1a1a1a",lu="#6b6b6b",cu="#f57c00",du={A:{label:"A",color:"#4caf50",description:"Adjacent - Direct connection required"},N:{label:"N",color:"#2196f3",description:"Near - Close proximity needed"},B:{label:"B",color:"#ff9800",description:"Buffered - Buffer zone required"},S:{label:"S",color:"#f44336",description:"Separate - Isolation required"}};function uu(e){var t;let{onBack:n,onRunValidation:i}=e;const[r,o]=(0,a.useState)("desired"),[s,l]=(0,a.useState)("all"),[c,d]=(0,a.useState)("all"),{fyiData:u}=(0,a.useContext)(U),{preset:h,baseSF:p}=Wr(),m=(0,a.useMemo)(()=>{try{return h?id(h):null}catch(Sg){return console.error("Failed to get preset:",Sg),null}},[h]),f=((0,a.useMemo)(()=>{if(!h)return[];try{return(0,Pd.w8)(h)}catch(Sg){return[]}},[h]),(null===u||void 0===u||null===(t=u.mvpAdjacencyConfig)||void 0===t?void 0:t.decisionAnswers)||{}),g=(0,a.useMemo)(()=>{if(null===m||void 0===m||!m.adjacencyMatrix)return{};const e={};return m.adjacencyMatrix.forEach(t=>{t.fromSpaceCode&&t.toSpaceCode&&(e["".concat(t.fromSpaceCode,"-").concat(t.toSpaceCode)]=t.relationship)}),e},[m]),v=(0,a.useMemo)(()=>{if(null===m||void 0===m||!m.adjacencyMatrix)return{};const e=Object.entries(f).map(e=>{let[t,n]=e;return{decisionId:t,selectedOptionId:n,isDefault:!1,warnings:[]}}),t=(0,Fd.Qy)(m.adjacencyMatrix,e),n={};return t.forEach(e=>{e.fromSpaceCode&&e.toSpaceCode&&(n["".concat(e.fromSpaceCode,"-").concat(e.toSpaceCode)]=e.relationship)}),n},[m,f]),y="desired"===r?g:v,b=(0,a.useMemo)(()=>{const e=[];return Object.keys(g).forEach(t=>{const n=g[t],a=v[t];if(n&&a&&n!==a){const[i,r]=t.split("-");e.push({fromSpace:i,toSpace:r,desired:n,proposed:a})}}),e},[g,v]),x=(0,a.useMemo)(()=>{const e=new Set;return Object.keys(g).forEach(t=>{const[n,a]=t.split("-");e.add(n),e.add(a)}),Array.from(e).sort()},[g]),S=(0,a.useMemo)(()=>x,[x]);return m?(0,T.jsxs)("div",{className:"acg-container",children:[(0,T.jsxs)("div",{className:"acg-header",children:[(0,T.jsxs)("button",{className:"acg-back-btn",onClick:n,children:[(0,T.jsx)(Z,{size:16}),"Back to MVP Overview"]}),(0,T.jsxs)("div",{className:"acg-title-row",children:[(0,T.jsx)("h1",{className:"acg-title",children:"Adjacency Matrix"}),(0,T.jsxs)("span",{className:"acg-tier-badge",children:[null===h||void 0===h?void 0:h.toUpperCase()," TIER"]})]}),(0,T.jsxs)("p",{className:"acg-subtitle",children:["Zone adjacency relationships for mansion program validation",p&&" \u2022 ".concat(p.toLocaleString()," SF Target")]})]}),(0,T.jsx)("div",{className:"acg-content",children:(0,T.jsxs)("div",{className:"acg-card",children:[(0,T.jsxs)("div",{className:"acg-controls-row",children:[(0,T.jsx)("div",{className:"acg-legend",children:Object.entries(du).map(e=>{let[t,n]=e;return(0,T.jsxs)("div",{className:"acg-legend-item",children:[(0,T.jsx)("span",{className:"acg-legend-badge",style:{backgroundColor:n.color},children:n.label}),(0,T.jsx)("span",{className:"acg-legend-text",children:n.description})]},t)})}),(0,T.jsx)("div",{className:"acg-toggle-wrapper",children:(0,T.jsxs)("div",{className:"acg-toggle",children:[(0,T.jsx)("button",{className:"acg-toggle-option ".concat("desired"===r?"active":""),onClick:()=>o("desired"),children:"Desired"}),(0,T.jsx)("button",{className:"acg-toggle-option ".concat("proposed"===r?"active":""),onClick:()=>o("proposed"),children:"Achieved"})]})})]}),(0,T.jsxs)("div",{className:"acg-filters-row",children:[(0,T.jsxs)("label",{className:"acg-filter",children:[(0,T.jsx)("span",{children:"Filter by Zone:"}),(0,T.jsx)("select",{value:s,onChange:e=>l(e.target.value),children:(0,T.jsx)("option",{value:"all",children:"All Zones"})})]}),(0,T.jsxs)("label",{className:"acg-filter",children:[(0,T.jsx)("span",{children:"Filter by Level:"}),(0,T.jsx)("select",{value:c,onChange:e=>d(e.target.value),children:(0,T.jsx)("option",{value:"all",children:"All Levels"})})]}),(0,T.jsxs)("span",{className:"acg-space-count",children:["Showing ",S.length," of ",S.length," spaces"]})]}),(0,T.jsx)("div",{className:"acg-matrix-wrapper",children:(0,T.jsxs)("table",{className:"acg-matrix-table",children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"acg-corner-cell"}),S.map(e=>(0,T.jsx)("th",{className:"acg-header-cell",children:e},e))]})}),(0,T.jsx)("tbody",{children:S.map(e=>(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"acg-row-header",children:e}),S.map(t=>{if(e===t)return(0,T.jsx)("td",{className:"acg-cell acg-cell--diagonal",children:"\u2013"},"".concat(e,"-").concat(t));const n="".concat(e,"-").concat(t),a=y[n],i="proposed"===r&&(o=e,s=t,b.some(e=>e.fromSpace===o&&e.toSpace===s));var o,s;const l=a?du[a]:null;return(0,T.jsx)("td",{className:"acg-cell ".concat(i?"acg-cell--deviation":""),style:l?{backgroundColor:l.color,color:"#fff"}:{},title:null===l||void 0===l?void 0:l.description,children:a||"\xb7"},"".concat(e,"-").concat(t))})]},e))})]})}),b.length>0&&(0,T.jsxs)("div",{className:"acg-deviation-summary",children:[(0,T.jsxs)("div",{className:"acg-deviation-header",children:[(0,T.jsx)(Ze,{size:18,color:cu}),(0,T.jsxs)("span",{children:[b.length," Deviation",1!==b.length?"s":""," from N4S Standard"]})]}),(0,T.jsxs)("ul",{className:"acg-deviation-list",children:[b.slice(0,5).map((e,t)=>(0,T.jsxs)("li",{children:[(0,T.jsxs)("strong",{children:[e.fromSpace," \u2192 ",e.toSpace,":"]})," ","Desired ",(0,T.jsx)("code",{children:e.desired}),", Proposed ",(0,T.jsx)("code",{children:e.proposed})]},t)),b.length>5&&(0,T.jsxs)("li",{className:"acg-deviation-more",children:["...and ",b.length-5," more"]})]})]}),(0,T.jsxs)("div",{className:"acg-action-row",children:[(0,T.jsx)("span",{className:"acg-note",children:"This grid is read-only. To modify adjacencies, use the Layout Questionnaire."}),i&&(0,T.jsxs)("button",{className:"acg-primary-btn",onClick:i,children:[(0,T.jsxs)("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Run Validation"]})]})]})}),(0,T.jsx)("style",{children:hu})]}):(0,T.jsxs)("div",{className:"acg-container",children:[(0,T.jsxs)("div",{className:"acg-header",children:[(0,T.jsxs)("button",{className:"acg-back-btn",onClick:n,children:[(0,T.jsx)(Z,{size:16}),"Back to MVP Overview"]}),(0,T.jsx)("h1",{className:"acg-title",children:"Adjacency Matrix"})]}),(0,T.jsx)("div",{className:"acg-content",children:(0,T.jsx)("div",{className:"acg-card",children:(0,T.jsx)("p",{children:"No preset data available. Please complete the FYI module first."})})}),(0,T.jsx)("style",{children:hu})]})}const hu="\n.acg-container {\n  min-height: 100vh;\n  background-color: ".concat(iu,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.acg-header {\n  background-color: ").concat(ru,";\n  border-bottom: 1px solid ").concat(ou,";\n  padding: 1rem 1.5rem;\n}\n\n.acg-back-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(ou,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(lu,";\n  cursor: pointer;\n  margin-bottom: 1rem;\n  transition: all 0.15s ease;\n}\n\n.acg-back-btn:hover {\n  border-color: ").concat(au,";\n  color: ").concat(au,";\n}\n\n.acg-title-row {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.acg-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.5rem;\n  font-weight: 500;\n  color: ").concat(su,";\n  margin: 0;\n}\n\n.acg-tier-badge {\n  display: inline-block;\n  padding: 0.25rem 0.75rem;\n  background-color: ").concat(au,";\n  color: #ffffff;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n\n.acg-subtitle {\n  font-size: 0.875rem;\n  color: ").concat(lu,";\n  margin-top: 0.25rem;\n}\n\n.acg-content {\n  padding: 1.5rem;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.acg-card {\n  background-color: ").concat(ru,";\n  border: 1px solid ").concat(ou,";\n  border-radius: 8px;\n  padding: 1.5rem;\n}\n\n.acg-controls-row {\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  margin-bottom: 1.5rem;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.acg-legend {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.acg-legend-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.acg-legend-badge {\n  width: 28px;\n  height: 28px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #ffffff;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n\n.acg-legend-text {\n  font-size: 0.8125rem;\n  color: ").concat(su,";\n}\n\n.acg-toggle-wrapper {\n  display: flex;\n  align-items: center;\n}\n\n.acg-toggle {\n  display: flex;\n  background-color: ").concat(ou,";\n  border-radius: 20px;\n  padding: 4px;\n}\n\n.acg-toggle-option {\n  padding: 0.5rem 1.25rem;\n  border-radius: 16px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border: none;\n  background-color: transparent;\n  color: ").concat(lu,";\n}\n\n.acg-toggle-option.active {\n  background-color: ").concat(au,";\n  color: #ffffff;\n}\n\n.acg-filters-row {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n}\n\n.acg-filter {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8125rem;\n  color: ").concat(lu,";\n}\n\n.acg-filter select {\n  padding: 0.5rem 0.75rem;\n  border: 1px solid ").concat(ou,";\n  border-radius: 4px;\n  font-size: 0.875rem;\n  background-color: ").concat(ru,";\n  color: ").concat(su,";\n}\n\n.acg-space-count {\n  font-size: 0.8125rem;\n  color: ").concat(lu,";\n  margin-left: auto;\n}\n\n.acg-matrix-wrapper {\n  overflow-x: auto;\n  border: 1px solid ").concat(ou,";\n  border-radius: 8px;\n}\n\n.acg-matrix-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.75rem;\n}\n\n.acg-corner-cell,\n.acg-header-cell {\n  padding: 0.5rem;\n  background-color: ").concat(iu,";\n  border-bottom: 1px solid ").concat(ou,";\n  border-right: 1px solid ").concat(ou,";\n  font-weight: 600;\n  text-align: center;\n  min-width: 45px;\n  color: ").concat(su,";\n}\n\n.acg-corner-cell {\n  position: sticky;\n  left: 0;\n  z-index: 2;\n}\n\n.acg-row-header {\n  padding: 0.5rem;\n  background-color: ").concat(iu,";\n  border-right: 1px solid ").concat(ou,";\n  font-weight: 600;\n  text-align: left;\n  color: ").concat(su,";\n  position: sticky;\n  left: 0;\n  z-index: 1;\n}\n\n.acg-cell {\n  padding: 0.5rem;\n  text-align: center;\n  border-right: 1px solid ").concat(ou,";\n  border-bottom: 1px solid ").concat(ou,";\n  font-weight: 600;\n  min-width: 45px;\n  cursor: default;\n  color: ").concat(lu,";\n}\n\n.acg-cell--diagonal {\n  background-color: #f0f0f0;\n  color: ").concat(lu,";\n}\n\n.acg-cell--deviation {\n  outline: 2px solid ").concat(cu,";\n  outline-offset: -2px;\n}\n\n.acg-deviation-summary {\n  background-color: #fff8e1;\n  border: 1px solid ").concat(cu,";\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1.5rem;\n}\n\n.acg-deviation-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.75rem;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: ").concat(cu,";\n}\n\n.acg-deviation-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.acg-deviation-list li {\n  font-size: 0.8125rem;\n  color: ").concat(su,";\n  padding: 0.25rem 0;\n}\n\n.acg-deviation-list code {\n  background-color: #f5f0e8;\n  padding: 0 4px;\n  border-radius: 2px;\n}\n\n.acg-deviation-more {\n  color: ").concat(lu," !important;\n}\n\n.acg-action-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 1.5rem;\n  padding-top: 1rem;\n  border-top: 1px solid ").concat(ou,";\n}\n\n.acg-note {\n  font-size: 0.8125rem;\n  color: ").concat(lu,";\n}\n\n.acg-primary-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1.25rem;\n  background-color: ").concat(au,";\n  color: #ffffff;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.acg-primary-btn:hover {\n  opacity: 0.9;\n}\n"),pu="#1e3a5f",mu="#fafaf8",fu="#ffffff",gu="#e5e5e0",vu="#1a1a1a",yu="#6b6b6b",bu="#2e7d32",xu="#f57c00",Su="#d32f2f",ju=[{id:"module-01",name:"Kitchen Rules Engine",spaces:["KIT","CHEF","SCUL","BKF","DR"]},{id:"module-02",name:"Entertaining Spine",spaces:["GR","DR","WINE","FOY","TERR"]},{id:"module-03",name:"Primary Suite Ecosystem",spaces:["PRI","PRIBATH","PRICL","PRILOUNGE"]},{id:"module-04",name:"Guest Wing Logic",spaces:["GUEST1","GUEST2","GUEST3","GST1","GST2"]},{id:"module-05",name:"Media & Acoustic Control",spaces:["MEDIA","THR","FR"]},{id:"module-06",name:"Service Spine",spaces:["SCUL","MUD","LND","MEP","GAR"]},{id:"module-07",name:"Wellness Program",spaces:["GYM","SPA","POOL","WLINK","POOLSUP"]},{id:"module-08",name:"Staff Layer",spaces:["STF","STFQ","OPSCORE"]}],wu=[{id:"butlerPantry",name:"Butler Pantry",description:"Service staging between kitchen and dining",enabledBy:["kitchen-family-connect","dining-entertaining"]},{id:"guestAutonomy",name:"Guest Autonomy",description:"Independent guest suite access",enabledBy:["guest-independence"]},{id:"soundLock",name:"Sound Lock",description:"Acoustic buffer for media spaces",enabledBy:["media-bedroom-separation"]},{id:"wetFeetIntercept",name:"Wet-Feet Intercept",description:"Pool to house transition zone",enabledBy:["wellness-placement"]},{id:"opsCore",name:"Ops Core",description:"Service entry and operations hub",enabledBy:["service-access"]}],Nu=[{id:"rf-1",name:"Guest \u2192 Primary Suite",description:"Primary suite should not be directly accessible from guest areas",check:e=>{const t=e["GUEST1-PRI"]||e["PRI-GUEST1"];return"A"===t||"N"===t}},{id:"rf-2",name:"Delivery \u2192 Front of House",description:"Service/garage should not connect through formal areas",check:e=>{const t=e["GAR-FOY"]||e["FOY-GAR"],n=e["GAR-GR"]||e["GR-GAR"];return"A"===t||"N"===t||"A"===n}},{id:"rf-3",name:"Media \u2192 Bedroom Bleed",description:"Media room should be acoustically separated from bedrooms",check:e=>{const t=e["MEDIA-PRI"]||e["PRI-MEDIA"],n=e["MEDIA-GUEST1"]||e["GUEST1-MEDIA"];return"A"===t||"N"===t||"A"===n||"N"===n}},{id:"rf-4",name:"Kitchen at Entry",description:"Kitchen should not be the first thing visible from entry",check:e=>"A"===(e["KIT-FOY"]||e["FOY-KIT"])},{id:"rf-5",name:"Guest Through Kitchen",description:"Guest circulation should not route through kitchen work zones",check:e=>{const t=e["GUEST1-KIT"]||e["KIT-GUEST1"];return"A"===t||"N"===t}}];function ku(e){let{score:t,size:n=120}=e;const a=(n-16)/2,i=2*Math.PI*a,r=i-t/100*i,o=t>=80?bu:t>=60?xu:Su;return(0,T.jsxs)("div",{style:{position:"relative",width:n,height:n},children:[(0,T.jsxs)("svg",{width:n,height:n,style:{transform:"rotate(-90deg)"},children:[(0,T.jsx)("circle",{cx:n/2,cy:n/2,r:a,fill:"none",stroke:gu,strokeWidth:"8"}),(0,T.jsx)("circle",{cx:n/2,cy:n/2,r:a,fill:"none",stroke:o,strokeWidth:"8",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:r,style:{transition:"stroke-dashoffset 0.5s ease"}})]}),(0,T.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:[(0,T.jsx)("div",{style:{fontSize:"2rem",fontWeight:600,color:vu},children:t}),(0,T.jsx)("div",{style:{fontSize:"0.875rem",color:yu},children:"/ 100"})]})]})}function _u(e){let{score:t,threshold:n=80}=e;const a=t>=n?bu:xu;return(0,T.jsx)("div",{style:{width:"100%",height:"8px",backgroundColor:gu,borderRadius:"4px",overflow:"hidden"},children:(0,T.jsx)("div",{style:{width:"".concat(t,"%"),height:"100%",backgroundColor:a,borderRadius:"4px",transition:"width 0.3s ease"}})})}function Cu(e){let{module:t,score:n,deviationCount:a=0}=e;const i=n>=80;return(0,T.jsxs)("div",{style:{backgroundColor:fu,border:"1px solid ".concat(gu),borderRadius:"8px",padding:"1rem",marginBottom:"0.75rem"},children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,T.jsx)(K,{size:18,color:i?bu:xu}),(0,T.jsx)("span",{style:{fontWeight:500,color:vu},children:t.name})]}),(0,T.jsxs)("span",{style:{fontSize:"0.875rem",fontWeight:600,color:i?bu:xu},children:[n," / 100"]})]}),(0,T.jsx)(_u,{score:n}),a>0&&(0,T.jsxs)("div",{style:{fontSize:"0.75rem",color:xu,marginTop:"0.5rem"},children:[a," deviation",1!==a?"s":""," from benchmark"]})]})}function Pu(e){let t,n,a,{bridge:i,required:r,present:o}=e;return r?o?(t="Present",n=bu,a="#e8f5e9"):(t="Missing",n=Su,a="#ffebee"):(t="Not Required",n=yu,a="#f5f5f5"),(0,T.jsxs)("div",{style:{backgroundColor:fu,border:"1px solid ".concat(r&&!o?Su:gu),borderRadius:"8px",padding:"1rem",marginBottom:"0.75rem"},children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{style:{fontWeight:500,color:vu},children:i.name}),(0,T.jsx)("div",{style:{fontSize:"0.8125rem",color:yu},children:i.description})]}),(0,T.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,backgroundColor:a,color:n},children:t})]}),r&&!o&&(0,T.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:Su,display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,T.jsx)(Ce,{size:12}),"Enable via Layout Questions to add this bridge"]})]})}function Fu(e){let{flag:t,triggered:n}=e;return(0,T.jsx)("div",{style:{backgroundColor:n?"#ffebee":"#e8f5e9",border:"1px solid ".concat(n?Su:bu),borderRadius:"8px",padding:"1rem",marginBottom:"0.75rem"},children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[n?(0,T.jsx)(Tr,{size:20,color:Su,style:{flexShrink:0}}):(0,T.jsx)(K,{size:20,color:bu,style:{flexShrink:0}}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{style:{fontWeight:500,color:vu},children:t.name}),(0,T.jsx)("div",{style:{fontSize:"0.8125rem",color:yu},children:t.description}),n&&(0,T.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:Su,fontWeight:500},children:"\u26a0 Resolve via Edit Decisions"})]})]})})}function Au(e){var t;let{onBack:n,onViewMatrix:i,onEditDecisions:r}=e;const[o,l]=(0,a.useState)("modules"),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),{fyiData:p,updateMVPAdjacencyConfig:m}=(0,a.useContext)(U),{preset:f,baseSF:g}=Wr(),v=(0,a.useMemo)(()=>{try{return f?id(f):null}catch(Sg){return null}},[f]),y=(0,a.useMemo)(()=>{var e;return(null===p||void 0===p||null===(e=p.mvpAdjacencyConfig)||void 0===e?void 0:e.decisionAnswers)||{}},[null===p||void 0===p||null===(t=p.mvpAdjacencyConfig)||void 0===t?void 0:t.decisionAnswers]),b=Object.keys(y).length>0,x=(0,a.useMemo)(()=>{if(null===v||void 0===v||!v.adjacencyMatrix)return{};const e={};return v.adjacencyMatrix.forEach(t=>{t.fromSpaceCode&&t.toSpaceCode&&(e["".concat(t.fromSpaceCode,"-").concat(t.toSpaceCode)]=t.relationship)}),e},[v]),S=(0,a.useMemo)(()=>{if(null===v||void 0===v||!v.adjacencyMatrix)return x;if(!b)return x;const e=Object.entries(y).map(e=>{let[t,n]=e;return{decisionId:t,selectedOptionId:n,isDefault:!1,warnings:[]}}),t=(0,Fd.Qy)(v.adjacencyMatrix,e),n={};return t.forEach(e=>{e.fromSpaceCode&&e.toSpaceCode&&(n["".concat(e.fromSpaceCode,"-").concat(e.toSpaceCode)]=e.relationship)}),n},[v,y,b,x]),j=(0,a.useMemo)(()=>{const e=[];return Object.keys(x).forEach(t=>{const n=x[t],a=S[t];if(n&&a&&n!==a){const[i,r]=t.split("-");e.push({fromSpace:i,toSpace:r,desired:n,proposed:a})}}),e},[x,S]),w=(0,a.useMemo)(()=>{if(!b)return new Set;const e=new Set;return Object.entries(y).forEach(t=>{let[n,a]=t;const i=null===Pd.FK||void 0===Pd.FK?void 0:Pd.FK.find(e=>e.id===n);if(i){const t=i.options.find(e=>e.id===a);null!==t&&void 0!==t&&t.bridgeRequired&&e.add(t.bridgeRequired)}}),e},[y,b]),N=(0,a.useMemo)(()=>wu.map(e=>{var t;return s(s({},e),{},{required:(null===v||void 0===v||null===(t=v.bridgeConfig)||void 0===t?void 0:t[e.id])||!1,present:w.has(e.id)})}),[v,w]),k=(0,a.useMemo)(()=>Nu.map(e=>s(s({},e),{},{triggered:e.check(S)})),[S]),_=(0,a.useMemo)(()=>ju.map(e=>{const t=j.filter(t=>e.spaces.includes(t.fromSpace)||e.spaces.includes(t.toSpace));let n=0;Object.keys(x).forEach(t=>{const[a,i]=t.split("-");(e.spaces.includes(a)||e.spaces.includes(i))&&n++});const a=n>0?t.length/n*50:0,i=Math.max(0,Math.round(100-a));return s(s({},e),{},{score:i,passed:i>=80,deviationCount:t.length})}),[j,x]),C=(0,a.useMemo)(()=>{if(0===_.length)return 100;const e=Math.round(_.reduce((e,t)=>e+t.score,0)/_.length),t=5*k.filter(e=>e.triggered).length;return Math.max(0,e-t)},[_,k]),P=(0,a.useCallback)(()=>{d(!0),h((new Date).toLocaleString()),m&&m({validationRunAt:(new Date).toISOString(),validationResults:{overallScore:C,moduleScores:_.map(e=>({id:e.id,score:e.score})),redFlagsTriggered:k.filter(e=>e.triggered).map(e=>e.id),bridgesEnabled:Array.from(w)}})},[C,_,k,w,m]),F=k.filter(e=>e.triggered),A=N.filter(e=>e.required&&!e.present),L=0===F.length&&C>=80;return(0,T.jsxs)("div",{className:"vrp-container",children:[(0,T.jsxs)("div",{className:"vrp-header",children:[(0,T.jsxs)("button",{className:"vrp-back-btn",onClick:n,children:[(0,T.jsx)(Z,{size:16}),"Back to MVP Overview"]}),(0,T.jsxs)("div",{className:"vrp-title-row",children:[(0,T.jsx)("h1",{className:"vrp-title",children:"Validation Results"}),f&&(0,T.jsxs)("span",{className:"vrp-tier-badge",children:[f.toUpperCase()," TIER"]})]}),g&&(0,T.jsxs)("p",{className:"vrp-subtitle",children:["Target: ",g.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"vrp-content",children:[!b&&(0,T.jsxs)("div",{className:"vrp-warning-card",children:[(0,T.jsx)(Ze,{size:20,color:xu}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"No Layout Decisions Found"}),(0,T.jsx)("p",{children:"Complete the Layout Questions to personalize your adjacency matrix. Currently showing benchmark defaults."}),(0,T.jsx)("button",{className:"vrp-link-btn",onClick:r,children:"Answer Layout Questions \u2192"})]})]}),!c&&(0,T.jsxs)("div",{className:"vrp-run-card",children:[(0,T.jsxs)("button",{className:"vrp-run-btn",onClick:P,children:[(0,T.jsx)(qr,{size:20}),"Run Validation"]}),(0,T.jsxs)("p",{className:"vrp-run-hint",children:["Validate your adjacency selections against the N4S ",null===f||void 0===f?void 0:f.toUpperCase()," benchmark."]})]}),c&&(0,T.jsxs)("div",{className:"vrp-results-card",children:[(0,T.jsxs)("div",{className:"vrp-score-section",children:[(0,T.jsx)(ku,{score:C}),(0,T.jsxs)("div",{className:"vrp-score-info",children:[(0,T.jsxs)("span",{className:"vrp-pass-badge ".concat(L?"pass":"warning"),children:[L?(0,T.jsx)(K,{size:16}):(0,T.jsx)(Ze,{size:16}),L?"Pass":"Review Needed"]}),(0,T.jsx)("div",{className:"vrp-score-details",children:L?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(K,{size:16,color:bu}),(0,T.jsx)("span",{children:"All gates passed"})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ze,{size:16,color:xu}),(0,T.jsx)("span",{children:"Some items need attention"})]})}),(0,T.jsxs)("div",{className:"vrp-score-meta",children:[F.length," red flag",1!==F.length?"s":"",","," ",j.length," deviation",1!==j.length?"s":""]}),u&&(0,T.jsxs)("div",{className:"vrp-timestamp",children:["Validated at ",u]})]})]}),(0,T.jsxs)("div",{className:"vrp-tabs",children:[(0,T.jsxs)("button",{className:"vrp-tab ".concat("redflags"===o?"active":""),onClick:()=>l("redflags"),children:["Red Flags (",F.length,")"]}),(0,T.jsxs)("button",{className:"vrp-tab ".concat("bridges"===o?"active":""),onClick:()=>l("bridges"),children:["Bridges (",w.size,"/",N.filter(e=>e.required).length,")"]}),(0,T.jsx)("button",{className:"vrp-tab ".concat("modules"===o?"active":""),onClick:()=>l("modules"),children:"Module Scores"})]}),(0,T.jsxs)("div",{className:"vrp-tab-content",children:["redflags"===o&&(0,T.jsx)("div",{children:0===k.length?(0,T.jsx)("p",{className:"vrp-empty",children:"No red flag rules defined."}):k.map(e=>(0,T.jsx)(Fu,{flag:e,triggered:e.triggered},e.id))}),"bridges"===o&&(0,T.jsxs)("div",{children:[N.map(e=>(0,T.jsx)(Pu,{bridge:e,required:e.required,present:e.present},e.id)),A.length>0&&(0,T.jsxs)("div",{className:"vrp-bridge-hint",children:[(0,T.jsx)(Ce,{size:14}),(0,T.jsx)("span",{children:"Missing bridges can be enabled by selecting appropriate options in Layout Questions."})]})]}),"modules"===o&&(0,T.jsx)("div",{children:_.map(e=>(0,T.jsx)(Cu,{module:e,score:e.score,deviationCount:e.deviationCount},e.id))})]}),(0,T.jsxs)("div",{className:"vrp-actions",children:[i&&(0,T.jsx)("button",{className:"vrp-secondary-btn",onClick:i,children:"View Adjacency Matrix"}),r&&(0,T.jsx)("button",{className:"vrp-primary-btn",onClick:r,children:"Edit Decisions"})]})]})]}),(0,T.jsx)("style",{children:Lu})]})}const Lu="\n.vrp-container {\n  min-height: 100vh;\n  background-color: ".concat(mu,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.vrp-header {\n  background-color: ").concat(fu,";\n  border-bottom: 1px solid ").concat(gu,";\n  padding: 1rem 1.5rem;\n}\n\n.vrp-back-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(gu,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(yu,";\n  cursor: pointer;\n  margin-bottom: 1rem;\n  transition: all 0.15s ease;\n}\n\n.vrp-back-btn:hover {\n  border-color: ").concat(pu,";\n  color: ").concat(pu,";\n}\n\n.vrp-title-row {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.vrp-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.5rem;\n  font-weight: 500;\n  color: ").concat(vu,";\n  margin: 0;\n}\n\n.vrp-tier-badge {\n  display: inline-block;\n  padding: 0.25rem 0.75rem;\n  background-color: ").concat(pu,";\n  color: #ffffff;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n\n.vrp-subtitle {\n  font-size: 0.875rem;\n  color: ").concat(yu,";\n  margin-top: 0.25rem;\n}\n\n.vrp-content {\n  padding: 1.5rem;\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.vrp-warning-card {\n  display: flex;\n  gap: 1rem;\n  padding: 1rem;\n  background-color: #fff8e1;\n  border: 1px solid ").concat(xu,";\n  border-radius: 8px;\n  margin-bottom: 1.5rem;\n}\n\n.vrp-warning-card strong {\n  display: block;\n  color: ").concat(vu,";\n  margin-bottom: 0.25rem;\n}\n\n.vrp-warning-card p {\n  font-size: 0.875rem;\n  color: ").concat(yu,";\n  margin: 0 0 0.5rem 0;\n}\n\n.vrp-link-btn {\n  background: none;\n  border: none;\n  color: ").concat(pu,";\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  padding: 0;\n}\n\n.vrp-link-btn:hover {\n  text-decoration: underline;\n}\n\n.vrp-run-card {\n  background-color: ").concat(fu,";\n  border: 1px solid ").concat(gu,";\n  border-radius: 8px;\n  padding: 2rem;\n  text-align: center;\n}\n\n.vrp-run-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 2rem;\n  background-color: ").concat(pu,";\n  color: #ffffff;\n  border: none;\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.vrp-run-btn:hover {\n  opacity: 0.9;\n}\n\n.vrp-run-hint {\n  margin-top: 1rem;\n  font-size: 0.875rem;\n  color: ").concat(yu,";\n}\n\n.vrp-results-card {\n  background-color: ").concat(fu,";\n  border: 1px solid ").concat(gu,";\n  border-radius: 8px;\n  padding: 1.5rem;\n}\n\n.vrp-score-section {\n  display: flex;\n  align-items: center;\n  gap: 2rem;\n  padding-bottom: 1.5rem;\n  border-bottom: 1px solid ").concat(gu,";\n  margin-bottom: 1.5rem;\n}\n\n.vrp-score-info {\n  flex: 1;\n}\n\n.vrp-pass-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.75rem;\n  border-radius: 4px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  margin-bottom: 0.75rem;\n}\n\n.vrp-pass-badge.pass {\n  background-color: #e8f5e9;\n  color: ").concat(bu,";\n}\n\n.vrp-pass-badge.warning {\n  background-color: #fff3e0;\n  color: ").concat(xu,";\n}\n\n.vrp-score-details {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9375rem;\n  color: ").concat(vu,";\n  margin-bottom: 0.25rem;\n}\n\n.vrp-score-meta {\n  font-size: 0.8125rem;\n  color: ").concat(yu,";\n}\n\n.vrp-timestamp {\n  font-size: 0.75rem;\n  color: ").concat(yu,";\n  margin-top: 0.5rem;\n}\n\n.vrp-tabs {\n  display: flex;\n  gap: 0;\n  margin-bottom: 1.5rem;\n  border: 1px solid ").concat(gu,";\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.vrp-tab {\n  flex: 1;\n  padding: 0.75rem 1rem;\n  background-color: ").concat(mu,";\n  border: none;\n  border-right: 1px solid ").concat(gu,";\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(yu,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.vrp-tab:last-child {\n  border-right: none;\n}\n\n.vrp-tab:hover {\n  background-color: ").concat(fu,";\n}\n\n.vrp-tab.active {\n  background-color: ").concat(fu,";\n  color: ").concat(pu,";\n  box-shadow: inset 0 -2px 0 ").concat(pu,";\n}\n\n.vrp-tab-content {\n  min-height: 300px;\n}\n\n.vrp-empty {\n  text-align: center;\n  color: ").concat(yu,";\n  padding: 2rem;\n}\n\n.vrp-bridge-hint {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  background-color: #e3f2fd;\n  border-radius: 4px;\n  font-size: 0.8125rem;\n  color: #1565c0;\n  margin-top: 0.5rem;\n}\n\n.vrp-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  margin-top: 1.5rem;\n  padding-top: 1rem;\n  border-top: 1px solid ").concat(gu,";\n}\n\n.vrp-secondary-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  color: ").concat(pu,";\n  border: 1px solid ").concat(gu,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.vrp-secondary-btn:hover {\n  border-color: ").concat(pu,";\n}\n\n.vrp-primary-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1.25rem;\n  background-color: ").concat(pu,";\n  color: #ffffff;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.vrp-primary-btn:hover {\n  opacity: 0.9;\n}\n"),Mu="#1e3a5f",Ru="#fafaf8",Iu="#ffffff",Tu="#e5e5e0",zu="#1a1a1a",Du="#6b6b6b",Eu="#2e7d32",Ou={A:"#4caf50",N:"#2196f3",B:"#ff9800",S:"#f44336"};function Bu(e){var t;let{tier:n,isActive:i,onClick:r}=e;const o=(0,a.useMemo)(()=>{try{return id(n.id)}catch(Sg){return null}},[n.id]),s=(0,a.useMemo)(()=>{if(null===o||void 0===o||!o.adjacencyMatrix)return{A:0,N:0,B:0,S:0};const e={A:0,N:0,B:0,S:0};return o.adjacencyMatrix.forEach(t=>{t.relationship&&void 0!==e[t.relationship]&&e[t.relationship]++}),e},[o]),l=(0,a.useMemo)(()=>null!==o&&void 0!==o&&o.bridgeConfig?Object.values(o.bridgeConfig).filter(e=>e).length:0,[o]);return(0,T.jsxs)("div",{className:"tda-tier-card ".concat(i?"active":""),onClick:r,style:{cursor:"pointer"},children:[(0,T.jsxs)("div",{className:"tda-tier-header",children:[(0,T.jsx)("span",{className:"tda-tier-name",children:n.name}),i&&(0,T.jsxs)("span",{className:"tda-active-badge",children:[(0,T.jsx)(K,{size:14}),"CURRENT"]})]}),(0,T.jsx)("div",{className:"tda-tier-desc",children:n.description}),(0,T.jsxs)("div",{className:"tda-tier-stats",children:[(0,T.jsxs)("div",{className:"tda-stat",children:[(0,T.jsx)("span",{className:"tda-stat-value",children:(null===o||void 0===o||null===(t=o.adjacencyMatrix)||void 0===t?void 0:t.length)||0}),(0,T.jsx)("span",{className:"tda-stat-label",children:"Relationships"})]}),(0,T.jsxs)("div",{className:"tda-stat",children:[(0,T.jsx)("span",{className:"tda-stat-value",children:l}),(0,T.jsx)("span",{className:"tda-stat-label",children:"Bridges"})]})]}),(0,T.jsx)("div",{className:"tda-relationship-counts",children:Object.entries(s).map(e=>{let[t,n]=e;return(0,T.jsxs)("span",{className:"tda-rel-badge",style:{backgroundColor:Ou[t]},children:[t,": ",n]},t)})})]})}function qu(e){let{tierId:t}=e;const n=(0,a.useMemo)(()=>{try{return id(t)}catch(Sg){return null}},[t]),i=(0,a.useMemo)(()=>{if(null===n||void 0===n||!n.adjacencyMatrix)return{};const e={};return n.adjacencyMatrix.forEach(t=>{e[t.fromSpaceCode]||(e[t.fromSpaceCode]=[]),e[t.fromSpaceCode].push(t)}),e},[n]);return n?(0,T.jsxs)("div",{className:"tda-matrix-preview",children:[(0,T.jsxs)("h4",{className:"tda-section-title",children:["Adjacency Matrix - ",n.name,(0,T.jsxs)("span",{className:"tda-count",children:["(",n.adjacencyMatrix.length," relationships)"]})]}),(0,T.jsx)("div",{className:"tda-matrix-grid",children:Object.entries(i).sort((e,t)=>{let[n]=e,[a]=t;return n.localeCompare(a)}).map(e=>{let[t,n]=e;return(0,T.jsxs)("div",{className:"tda-space-group",children:[(0,T.jsx)("div",{className:"tda-space-header",children:t}),(0,T.jsx)("div",{className:"tda-space-relationships",children:n.map((e,t)=>(0,T.jsxs)("span",{className:"tda-rel-item",style:{backgroundColor:Ou[e.relationship]},title:"".concat(e.fromSpaceCode," \u2192 ").concat(e.toSpaceCode,": ").concat(e.relationship),children:["\u2192 ",e.toSpaceCode,": ",e.relationship]},t))})]},t)})}),(0,T.jsx)("h4",{className:"tda-section-title",style:{marginTop:"1.5rem"},children:"Bridge Configuration"}),(0,T.jsx)("div",{className:"tda-bridges",children:Object.entries(n.bridgeConfig||{}).map(e=>{let[t,n]=e;return(0,T.jsxs)("div",{className:"tda-bridge-item ".concat(n?"enabled":"disabled"),children:[n?(0,T.jsx)(K,{size:14}):(0,T.jsx)(k,{size:14}),(0,T.jsx)("span",{children:t})]},t)})})]}):(0,T.jsx)("div",{className:"tda-no-data",children:"No data available for this tier."})}function Hu(e){let{onBack:t}=e;const{fyiData:n}=(0,a.useContext)(U),{preset:i,baseSF:r}=Wr(),[o,s]=(0,a.useState)(i||"15k"),l=(0,a.useMemo)(()=>ad.map(e=>({id:e.id,name:e.name,description:e.description,targetSF:e.targetSF})),[]);return(0,T.jsxs)("div",{className:"tda-container",children:[(0,T.jsxs)("div",{className:"tda-header",children:[(0,T.jsxs)("button",{className:"tda-back-btn",onClick:t,children:[(0,T.jsx)(Z,{size:16}),"Back to MVP Overview"]}),(0,T.jsxs)("div",{className:"tda-title-row",children:[(0,T.jsx)(Gr,{size:24,color:Mu}),(0,T.jsx)("h1",{className:"tda-title",children:"Tier Data Administration"})]}),(0,T.jsx)("p",{className:"tda-subtitle",children:"View and verify adjacency matrices for each tier benchmark"})]}),(0,T.jsxs)("div",{className:"tda-content",children:[(0,T.jsxs)("div",{className:"tda-detection-card",children:[(0,T.jsx)("h3",{className:"tda-card-title",children:"Current Tier Detection"}),(0,T.jsxs)("div",{className:"tda-detection-info",children:[(0,T.jsxs)("div",{className:"tda-detection-item",children:[(0,T.jsx)("span",{className:"tda-detection-label",children:"Target SF:"}),(0,T.jsxs)("span",{className:"tda-detection-value",children:[(null===r||void 0===r?void 0:r.toLocaleString())||"Not set"," SF"]})]}),(0,T.jsxs)("div",{className:"tda-detection-item",children:[(0,T.jsx)("span",{className:"tda-detection-label",children:"Detected Tier:"}),(0,T.jsx)("span",{className:"tda-detection-value tda-tier-highlight",children:(null===i||void 0===i?void 0:i.toUpperCase())||"Unknown"})]}),(0,T.jsxs)("div",{className:"tda-detection-item",children:[(0,T.jsx)("span",{className:"tda-detection-label",children:"Tier Thresholds:"}),(0,T.jsx)("span",{className:"tda-detection-value",children:"<7,500 SF = 5K | <12,500 SF = 10K | <17,500 SF = 15K | \u226517,500 SF = 20K"})]})]})]}),(0,T.jsxs)("div",{className:"tda-tiers-section",children:[(0,T.jsx)("h3",{className:"tda-card-title",children:"Available Tier Benchmarks"}),(0,T.jsx)("p",{className:"tda-hint",children:"Click a tier to view its adjacency matrix data"}),(0,T.jsx)("div",{className:"tda-tiers-grid",children:l.map(e=>(0,T.jsx)(Bu,{tier:e,isActive:e.id===i,onClick:()=>s(e.id)},e.id))})]}),(0,T.jsx)("div",{className:"tda-preview-section",children:(0,T.jsx)(qu,{tierId:o})})]}),(0,T.jsx)("style",{children:Gu})]})}const Gu="\n.tda-container {\n  min-height: 100vh;\n  background-color: ".concat(Ru,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.tda-header {\n  background-color: ").concat(Iu,";\n  border-bottom: 1px solid ").concat(Tu,";\n  padding: 1rem 1.5rem;\n}\n\n.tda-back-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(Tu,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(Du,";\n  cursor: pointer;\n  margin-bottom: 1rem;\n  transition: all 0.15s ease;\n}\n\n.tda-back-btn:hover {\n  border-color: ").concat(Mu,";\n  color: ").concat(Mu,";\n}\n\n.tda-title-row {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.tda-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.5rem;\n  font-weight: 500;\n  color: ").concat(zu,";\n  margin: 0;\n}\n\n.tda-subtitle {\n  font-size: 0.875rem;\n  color: ").concat(Du,";\n  margin-top: 0.25rem;\n}\n\n.tda-content {\n  padding: 1.5rem;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.tda-detection-card {\n  background-color: ").concat(Iu,";\n  border: 1px solid ").concat(Tu,";\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n}\n\n.tda-card-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: ").concat(zu,";\n  margin: 0 0 1rem 0;\n}\n\n.tda-detection-info {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.tda-detection-item {\n  display: flex;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n}\n\n.tda-detection-label {\n  color: ").concat(Du,";\n  min-width: 120px;\n}\n\n.tda-detection-value {\n  color: ").concat(zu,";\n  font-weight: 500;\n}\n\n.tda-tier-highlight {\n  background-color: ").concat(Mu,";\n  color: #ffffff;\n  padding: 0.125rem 0.5rem;\n  border-radius: 4px;\n}\n\n.tda-tiers-section {\n  background-color: ").concat(Iu,";\n  border: 1px solid ").concat(Tu,";\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n}\n\n.tda-hint {\n  font-size: 0.8125rem;\n  color: ").concat(Du,";\n  margin-bottom: 1rem;\n}\n\n.tda-tiers-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1rem;\n}\n\n.tda-tier-card {\n  background-color: ").concat(Ru,";\n  border: 1px solid ").concat(Tu,";\n  border-radius: 8px;\n  padding: 1rem;\n  transition: all 0.15s ease;\n}\n\n.tda-tier-card:hover {\n  border-color: ").concat(Mu,";\n}\n\n.tda-tier-card.active {\n  border-color: ").concat(Eu,";\n  background-color: #f1f8e9;\n}\n\n.tda-tier-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n}\n\n.tda-tier-name {\n  font-weight: 600;\n  color: ").concat(zu,";\n}\n\n.tda-active-badge {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  color: ").concat(Eu,";\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.tda-tier-desc {\n  font-size: 0.8125rem;\n  color: ").concat(Du,";\n  margin-bottom: 0.75rem;\n}\n\n.tda-tier-stats {\n  display: flex;\n  gap: 1.5rem;\n  margin-bottom: 0.75rem;\n}\n\n.tda-stat {\n  display: flex;\n  flex-direction: column;\n}\n\n.tda-stat-value {\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: ").concat(Mu,";\n}\n\n.tda-stat-label {\n  font-size: 0.6875rem;\n  color: ").concat(Du,";\n  text-transform: uppercase;\n}\n\n.tda-relationship-counts {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n}\n\n.tda-rel-badge {\n  padding: 0.125rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.tda-preview-section {\n  background-color: ").concat(Iu,";\n  border: 1px solid ").concat(Tu,";\n  border-radius: 8px;\n  padding: 1.5rem;\n}\n\n.tda-section-title {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: ").concat(zu,";\n  margin: 0 0 1rem 0;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.tda-count {\n  font-weight: 400;\n  color: ").concat(Du,";\n}\n\n.tda-matrix-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  max-height: 400px;\n  overflow-y: auto;\n}\n\n.tda-space-group {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 0.5rem;\n  background-color: ").concat(Ru,";\n  border-radius: 4px;\n}\n\n.tda-space-header {\n  min-width: 60px;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  color: ").concat(Mu,";\n}\n\n.tda-space-relationships {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n}\n\n.tda-rel-item {\n  padding: 0.125rem 0.375rem;\n  border-radius: 2px;\n  font-size: 0.6875rem;\n  font-weight: 500;\n  color: #ffffff;\n}\n\n.tda-bridges {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n\n.tda-bridge-item {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.375rem 0.75rem;\n  border-radius: 4px;\n  font-size: 0.8125rem;\n}\n\n.tda-bridge-item.enabled {\n  background-color: #e8f5e9;\n  color: ").concat(Eu,";\n}\n\n.tda-bridge-item.disabled {\n  background-color: #f5f5f5;\n  color: ").concat(Du,";\n}\n\n.tda-no-data {\n  padding: 2rem;\n  text-align: center;\n  color: ").concat(Du,";\n}\n"),Wu=d("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),Uu=d("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Ku="#1e3a5f",Vu="#fafaf8",Yu="#ffffff",Zu="#e5e5e0",$u="#1a1a1a",Qu="#6b6b6b",Ju="#2e7d32",Xu="#f57c00",eh="#f5f0e8",th={Arrival:{icon:u,color:"#1e3a5f",order:1},"Zone 1":{icon:u,color:"#1e3a5f",order:1},Living:{icon:h,color:"#2e7d32",order:2},"Zone 2":{icon:h,color:"#2e7d32",order:2},Family:{icon:h,color:"#2e7d32",order:2},Primary:{icon:u,color:"#7b1fa2",order:3},"Zone 5":{icon:u,color:"#7b1fa2",order:3},Guest:{icon:h,color:"#1976d2",order:4},"Zone 6":{icon:h,color:"#1976d2",order:4},Wellness:{icon:Dr,color:"#00897b",order:5},"Zone 4":{icon:Dr,color:"#00897b",order:5},Service:{icon:be,color:"#5d4037",order:6},"Zone 7":{icon:be,color:"#5d4037",order:6},Garage:{icon:Wu,color:"#455a64",order:7},"Zone 8":{icon:Wu,color:"#455a64",order:7},Outdoor:{icon:u,color:"#388e3c",order:8}};function nh(e){if(th[e])return th[e];for(const[t,n]of Object.entries(th))if(null!==e&&void 0!==e&&e.toLowerCase().includes(t.toLowerCase()))return n;return{icon:Er,color:Qu,order:99}}function ah(e){let{zoneName:t,spaces:n,totalSF:a}=e;const i=nh(t),r=i.icon;return(0,T.jsxs)("div",{className:"psv-zone-card",children:[(0,T.jsxs)("div",{className:"psv-zone-header",style:{borderLeftColor:i.color},children:[(0,T.jsx)("div",{className:"psv-zone-icon",style:{backgroundColor:"".concat(i.color,"15"),color:i.color},children:(0,T.jsx)(r,{size:18})}),(0,T.jsxs)("div",{className:"psv-zone-info",children:[(0,T.jsx)("h3",{className:"psv-zone-name",children:t}),(0,T.jsxs)("span",{className:"psv-zone-meta",children:[n.length," space",1!==n.length?"s":""," \u2022 ",a.toLocaleString()," SF"]})]})]}),(0,T.jsx)("div",{className:"psv-space-list",children:n.map((e,t)=>(0,T.jsxs)("div",{className:"psv-space-row",children:[(0,T.jsx)("div",{className:"psv-space-code",children:e.code}),(0,T.jsx)("div",{className:"psv-space-name",children:e.name||e.displayName}),(0,T.jsxs)("div",{className:"psv-space-level",children:["L",e.level]}),(0,T.jsxs)("div",{className:"psv-space-sf",children:[(e.targetSF||e.baseSF||0).toLocaleString()," SF"]})]},e.code||t))})]})}function ih(e){let{totalSpaces:t,totalSF:n,levels:a,zones:i}=e;return(0,T.jsxs)("div",{className:"psv-stats-grid",children:[(0,T.jsxs)("div",{className:"psv-stat-card",children:[(0,T.jsx)("div",{className:"psv-stat-value",children:t}),(0,T.jsx)("div",{className:"psv-stat-label",children:"Spaces"})]}),(0,T.jsxs)("div",{className:"psv-stat-card",children:[(0,T.jsx)("div",{className:"psv-stat-value",children:n.toLocaleString()}),(0,T.jsx)("div",{className:"psv-stat-label",children:"Total SF"})]}),(0,T.jsxs)("div",{className:"psv-stat-card",children:[(0,T.jsx)("div",{className:"psv-stat-value",children:a}),(0,T.jsx)("div",{className:"psv-stat-label",children:"Levels"})]}),(0,T.jsxs)("div",{className:"psv-stat-card",children:[(0,T.jsx)("div",{className:"psv-stat-value",children:i}),(0,T.jsx)("div",{className:"psv-stat-label",children:"Zones"})]})]})}function rh(e){let{onBack:t,onGoToFYI:n}=e;const{fyiData:i}=(0,a.useContext)(U),{preset:r,baseSF:o}=Wr(),s=(0,a.useMemo)(()=>{try{return r?id(r):null}catch(Sg){return console.error("Failed to get preset:",Sg),null}},[r]),l=(null===s||void 0===s?void 0:s.spaces)||[],c=(0,a.useMemo)(()=>{const e={};l.forEach(t=>{const n=t.zone||"Unassigned";e[n]||(e[n]=[]),e[n].push(t)});const t=Object.keys(e).sort((e,t)=>{const n=nh(e),a=nh(t);return n.order-a.order});return t.map(t=>({name:t,spaces:e[t],totalSF:e[t].reduce((e,t)=>e+(t.targetSF||t.baseSF||0),0)}))},[l]),d=l.reduce((e,t)=>e+(t.targetSF||t.baseSF||0),0),u=[...new Set(l.map(e=>e.level))].length,h=c.length;return s&&0!==l.length?(0,T.jsxs)("div",{className:"psv-container",children:[(0,T.jsxs)("div",{className:"psv-header",children:[(0,T.jsxs)("button",{className:"psv-back-btn",onClick:t,children:[(0,T.jsx)(Z,{size:16}),"Back to MVP Overview"]}),(0,T.jsxs)("div",{className:"psv-title-row",children:[(0,T.jsx)("h1",{className:"psv-title",children:"Program Summary"}),r&&(0,T.jsxs)("span",{className:"psv-tier-badge",children:[r.toUpperCase()," TIER"]})]}),(0,T.jsx)("p",{className:"psv-subtitle",children:"Imported from FYI module \u2022 Read-only reference"})]}),(0,T.jsxs)("div",{className:"psv-content",children:[(0,T.jsxs)("div",{className:"psv-notice",children:[(0,T.jsx)(Ce,{size:16}),(0,T.jsx)("span",{children:"This view is read-only. To modify spaces or sizes, edit the FYI module."}),n&&(0,T.jsxs)("button",{className:"psv-link-btn",onClick:n,children:["Edit in FYI ",(0,T.jsx)(Uu,{size:12})]})]}),(0,T.jsx)(ih,{totalSpaces:l.length,totalSF:d,levels:u,zones:h}),o&&(0,T.jsxs)("div",{className:"psv-target-card",children:[(0,T.jsxs)("div",{className:"psv-target-row",children:[(0,T.jsx)("span",{className:"psv-target-label",children:"Target SF (from KYC):"}),(0,T.jsxs)("span",{className:"psv-target-value",children:[o.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"psv-target-row",children:[(0,T.jsx)("span",{className:"psv-target-label",children:"Program Total:"}),(0,T.jsxs)("span",{className:"psv-target-value",children:[d.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"psv-target-row",children:[(0,T.jsx)("span",{className:"psv-target-label",children:"Variance:"}),(0,T.jsxs)("span",{className:"psv-target-value ".concat(d>o?"over":"under"),children:[d>o?"+":"",(d-o).toLocaleString()," SF (",((d-o)/o*100).toFixed(1),"%)"]})]})]}),(0,T.jsxs)("div",{className:"psv-zones-section",children:[(0,T.jsx)("h2",{className:"psv-section-title",children:"Spaces by Zone"}),(0,T.jsx)("div",{className:"psv-zones-grid",children:c.map(e=>(0,T.jsx)(ah,{zoneName:e.name,spaces:e.spaces,totalSF:e.totalSF},e.name))})]}),(0,T.jsxs)("div",{className:"psv-levels-section",children:[(0,T.jsx)("h2",{className:"psv-section-title",children:"Distribution by Level"}),(0,T.jsx)("div",{className:"psv-levels-grid",children:[...new Set(l.map(e=>e.level))].sort().map(e=>{const t=l.filter(t=>t.level===e),n=t.reduce((e,t)=>e+(t.targetSF||t.baseSF||0),0);return(0,T.jsxs)("div",{className:"psv-level-card",children:[(0,T.jsxs)("div",{className:"psv-level-header",children:[(0,T.jsxs)("span",{className:"psv-level-name",children:["Level ",e]}),(0,T.jsxs)("span",{className:"psv-level-sf",children:[n.toLocaleString()," SF"]})]}),(0,T.jsx)("div",{className:"psv-level-bar",children:(0,T.jsx)("div",{className:"psv-level-fill",style:{width:"".concat(n/d*100,"%")}})}),(0,T.jsxs)("div",{className:"psv-level-meta",children:[t.length," spaces \u2022 ",(n/d*100).toFixed(0),"% of program"]})]},e)})})]})]}),(0,T.jsx)("style",{children:oh})]}):(0,T.jsxs)("div",{className:"psv-container",children:[(0,T.jsxs)("div",{className:"psv-header",children:[(0,T.jsxs)("button",{className:"psv-back-btn",onClick:t,children:[(0,T.jsx)(Z,{size:16}),"Back to MVP Overview"]}),(0,T.jsx)("h1",{className:"psv-title",children:"Program Summary"})]}),(0,T.jsx)("div",{className:"psv-content",children:(0,T.jsxs)("div",{className:"psv-empty-card",children:[(0,T.jsx)(Ce,{size:48,color:Qu}),(0,T.jsx)("h2",{children:"No Program Data"}),(0,T.jsx)("p",{children:"Complete the FYI module to define your space program."}),n&&(0,T.jsx)("button",{className:"psv-primary-btn",onClick:n,children:"Go to FYI Module"})]})}),(0,T.jsx)("style",{children:oh})]})}const oh="\n.psv-container {\n  min-height: 100vh;\n  background-color: ".concat(Vu,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.psv-header {\n  background-color: ").concat(Yu,";\n  border-bottom: 1px solid ").concat(Zu,";\n  padding: 1rem 1.5rem;\n}\n\n.psv-back-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(Zu,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(Qu,";\n  cursor: pointer;\n  margin-bottom: 1rem;\n  transition: all 0.15s ease;\n}\n\n.psv-back-btn:hover {\n  border-color: ").concat(Ku,";\n  color: ").concat(Ku,";\n}\n\n.psv-title-row {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.psv-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.5rem;\n  font-weight: 500;\n  color: ").concat($u,";\n  margin: 0;\n}\n\n.psv-tier-badge {\n  display: inline-block;\n  padding: 0.25rem 0.75rem;\n  background-color: ").concat(Ku,";\n  color: #ffffff;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n\n.psv-subtitle {\n  font-size: 0.875rem;\n  color: ").concat(Qu,";\n  margin-top: 0.25rem;\n}\n\n.psv-content {\n  padding: 1.5rem;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.psv-notice {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem 1rem;\n  background-color: ").concat(eh,";\n  border-radius: 8px;\n  margin-bottom: 1.5rem;\n  font-size: 0.875rem;\n  color: ").concat($u,";\n}\n\n.psv-link-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  background: none;\n  border: none;\n  color: ").concat(Ku,";\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  margin-left: auto;\n}\n\n.psv-link-btn:hover {\n  text-decoration: underline;\n}\n\n.psv-stats-grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n}\n\n.psv-stat-card {\n  background-color: ").concat(Yu,";\n  border: 1px solid ").concat(Zu,";\n  border-radius: 8px;\n  padding: 1rem;\n  text-align: center;\n}\n\n.psv-stat-value {\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: ").concat(Ku,";\n}\n\n.psv-stat-label {\n  font-size: 0.75rem;\n  color: ").concat(Qu,";\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin-top: 0.25rem;\n}\n\n.psv-target-card {\n  background-color: ").concat(Yu,";\n  border: 1px solid ").concat(Zu,";\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n}\n\n.psv-target-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid ").concat(Zu,";\n}\n\n.psv-target-row:last-child {\n  border-bottom: none;\n}\n\n.psv-target-label {\n  font-size: 0.875rem;\n  color: ").concat(Qu,";\n}\n\n.psv-target-value {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: ").concat($u,";\n}\n\n.psv-target-value.over {\n  color: ").concat(Xu,";\n}\n\n.psv-target-value.under {\n  color: ").concat(Ju,";\n}\n\n.psv-section-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.25rem;\n  font-weight: 500;\n  color: ").concat($u,";\n  margin: 0 0 1rem 0;\n}\n\n.psv-zones-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n  gap: 1rem;\n  margin-bottom: 2rem;\n}\n\n.psv-zone-card {\n  background-color: ").concat(Yu,";\n  border: 1px solid ").concat(Zu,";\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.psv-zone-header {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 1rem;\n  border-left: 4px solid;\n  background-color: ").concat(Vu,";\n}\n\n.psv-zone-icon {\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.psv-zone-name {\n  font-size: 1rem;\n  font-weight: 600;\n  color: ").concat($u,";\n  margin: 0;\n}\n\n.psv-zone-meta {\n  font-size: 0.8125rem;\n  color: ").concat(Qu,";\n}\n\n.psv-space-list {\n  padding: 0.5rem 0;\n}\n\n.psv-space-row {\n  display: grid;\n  grid-template-columns: 60px 1fr 40px 80px;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  font-size: 0.8125rem;\n  border-bottom: 1px solid ").concat(Zu,";\n}\n\n.psv-space-row:last-child {\n  border-bottom: none;\n}\n\n.psv-space-code {\n  font-weight: 600;\n  color: ").concat(Ku,";\n}\n\n.psv-space-name {\n  color: ").concat($u,";\n}\n\n.psv-space-level {\n  color: ").concat(Qu,";\n  text-align: center;\n}\n\n.psv-space-sf {\n  color: ").concat($u,";\n  text-align: right;\n  font-weight: 500;\n}\n\n.psv-levels-section {\n  margin-top: 1.5rem;\n}\n\n.psv-levels-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 1rem;\n}\n\n.psv-level-card {\n  background-color: ").concat(Yu,";\n  border: 1px solid ").concat(Zu,";\n  border-radius: 8px;\n  padding: 1rem;\n}\n\n.psv-level-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n}\n\n.psv-level-name {\n  font-weight: 600;\n  color: ").concat($u,";\n}\n\n.psv-level-sf {\n  font-weight: 600;\n  color: ").concat(Ku,";\n}\n\n.psv-level-bar {\n  height: 8px;\n  background-color: ").concat(Zu,";\n  border-radius: 4px;\n  overflow: hidden;\n  margin-bottom: 0.5rem;\n}\n\n.psv-level-fill {\n  height: 100%;\n  background-color: ").concat(Ku,";\n  border-radius: 4px;\n  transition: width 0.3s ease;\n}\n\n.psv-level-meta {\n  font-size: 0.75rem;\n  color: ").concat(Qu,";\n}\n\n.psv-empty-card {\n  background-color: ").concat(Yu,";\n  border: 1px solid ").concat(Zu,";\n  border-radius: 8px;\n  padding: 3rem;\n  text-align: center;\n}\n\n.psv-empty-card h2 {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.25rem;\n  color: ").concat($u,";\n  margin: 1rem 0 0.5rem;\n}\n\n.psv-empty-card p {\n  color: ").concat(Qu,";\n  margin-bottom: 1.5rem;\n}\n\n.psv-primary-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1.5rem;\n  background-color: ").concat(Ku,";\n  color: #ffffff;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.psv-primary-btn:hover {\n  opacity: 0.9;\n}\n\n@media (max-width: 768px) {\n  .psv-stats-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .psv-zones-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .psv-space-row {\n    grid-template-columns: 50px 1fr 60px;\n  }\n  \n  .psv-space-level {\n    display: none;\n  }\n}\n"),sh=d("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),lh=d("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),ch="#1e3a5f",dh="#c9a227",uh="#fafaf8",hh="#ffffff",ph="#e5e5e0",mh="#1a1a1a",fh="#6b6b6b",gh="#2e7d32",vh="#f57c00",yh="#d32f2f";function bh(e){let{title:t,children:n,defaultOpen:i=!1}=e;const[r,o]=(0,a.useState)(i);return(0,T.jsxs)("div",{className:"doc-expandable",children:[(0,T.jsxs)("button",{className:"doc-expandable-header",onClick:()=>o(!r),children:[r?(0,T.jsx)(C,{size:18}):(0,T.jsx)(x,{size:18}),(0,T.jsx)("span",{children:t})]}),r&&(0,T.jsx)("div",{className:"doc-expandable-content",children:n})]})}function xh(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"What is MVP?"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"The Master Validation Program (MVP) is your adjacency validation tool. It ensures the spatial relationships in your home design protect what matters most: family privacy, acoustic comfort, and seamless operations. MVP uses your lifestyle inputs from KYC and space requirements from FYI to validate your custom mansion program before expensive design decisions are made."}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Think of MVP as a pre-flight checklist for your home. Just as pilots verify critical systems before takeoff, MVP verifies that your room relationships won't create conflicts that are costly to fix later\u2014like discovering your guest suite shares a wall with your home theater, or that delivery drivers will walk through your formal dining room."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Primary Outcomes"}),(0,T.jsxs)("ul",{className:"doc-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Validated Adjacency Matrix"}),(0,T.jsx)("p",{children:"A verified map of room relationships that protects family privacy and operational flow"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Red Flag Detection"}),(0,T.jsx)("p",{children:"Early identification of critical conflicts before they become expensive redesigns"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Bridge Recommendations"}),(0,T.jsx)("p",{children:"Suggested transition spaces that solve common circulation and acoustic challenges"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Module Scores"}),(0,T.jsx)("p",{children:"Quantified performance metrics showing how well each area of your home functions"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"What's Included"}),(0,T.jsxs)("div",{className:"doc-grid-2",children:[(0,T.jsxs)("div",{className:"doc-feature",children:[(0,T.jsx)("div",{className:"doc-feature-number",children:"8"}),(0,T.jsxs)("div",{className:"doc-feature-text",children:[(0,T.jsx)("strong",{children:"Validation Modules"}),(0,T.jsx)("p",{children:"Covering all mansion program areas from kitchen to staff quarters"})]})]}),(0,T.jsxs)("div",{className:"doc-feature",children:[(0,T.jsx)("div",{className:"doc-feature-number",children:"10"}),(0,T.jsxs)("div",{className:"doc-feature-text",children:[(0,T.jsx)("strong",{children:"Layout Questions"}),(0,T.jsx)("p",{children:"Personalization decisions that shape your unique adjacency requirements"})]})]}),(0,T.jsxs)("div",{className:"doc-feature",children:[(0,T.jsx)("div",{className:"doc-feature-number",children:"5"}),(0,T.jsxs)("div",{className:"doc-feature-text",children:[(0,T.jsx)("strong",{children:"Critical Red Flags"}),(0,T.jsx)("p",{children:"Must-resolve violations that would compromise your home's function"})]})]}),(0,T.jsxs)("div",{className:"doc-feature",children:[(0,T.jsx)("div",{className:"doc-feature-number",children:"5"}),(0,T.jsxs)("div",{className:"doc-feature-text",children:[(0,T.jsx)("strong",{children:"Operational Bridges"}),(0,T.jsx)("p",{children:"Recommended transition spaces for circulation optimization"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card doc-card--highlight",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Tiered Benchmarks"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"MVP automatically detects your project tier based on target square footage and applies the appropriate benchmark relationships. Larger homes require more sophisticated adjacency logic to maintain privacy and operational efficiency at scale."}),(0,T.jsxs)("div",{className:"doc-tiers",children:[(0,T.jsxs)("div",{className:"doc-tier",children:[(0,T.jsx)("span",{className:"doc-tier-label",children:"5K"}),(0,T.jsx)("span",{className:"doc-tier-range",children:"< 7,500 SF"})]}),(0,T.jsxs)("div",{className:"doc-tier",children:[(0,T.jsx)("span",{className:"doc-tier-label",children:"10K"}),(0,T.jsx)("span",{className:"doc-tier-range",children:"7,500 - 12,500 SF"})]}),(0,T.jsxs)("div",{className:"doc-tier",children:[(0,T.jsx)("span",{className:"doc-tier-label",children:"15K"}),(0,T.jsx)("span",{className:"doc-tier-range",children:"12,500 - 17,500 SF"})]}),(0,T.jsxs)("div",{className:"doc-tier",children:[(0,T.jsx)("span",{className:"doc-tier-label",children:"20K"}),(0,T.jsx)("span",{className:"doc-tier-range",children:"17,500+ SF"})]})]})]})]})}function Sh(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"MVP Validation Workflow"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Complete these steps to validate your mansion program. The goal is to lock your adjacency logic early\u2014before schematic design\u2014so you can refine dimensions, detailing, and materiality without re-breaking the spatial relationships that protect privacy and operations."})]}),(0,T.jsxs)("div",{className:"doc-card doc-card--warning",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Before You Begin"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"MVP requires inputs from earlier modules. Confirm these are complete:"}),(0,T.jsxs)("div",{className:"doc-prereq-list",children:[(0,T.jsxs)("div",{className:"doc-prereq",children:[(0,T.jsx)("span",{className:"doc-prereq-module",children:"KYC"}),(0,T.jsx)("span",{className:"doc-prereq-items",children:"Operating model, privacy posture, staffing level, entertaining frequency"})]}),(0,T.jsxs)("div",{className:"doc-prereq",children:[(0,T.jsx)("span",{className:"doc-prereq-module",children:"FYI"}),(0,T.jsx)("span",{className:"doc-prereq-items",children:"Space program with zones, S/M/L sizing selections, lifestyle requirements"})]})]})]}),(0,T.jsxs)("div",{className:"doc-phase",children:[(0,T.jsx)("div",{className:"doc-phase-badge",children:"Step 1"}),(0,T.jsx)("h3",{className:"doc-phase-title",children:"Review Your Program"}),(0,T.jsxs)("div",{className:"doc-phase-content",children:[(0,T.jsx)("p",{children:"Start by confirming your imported program is correct:"}),(0,T.jsxs)("ul",{className:"doc-checklist",children:[(0,T.jsxs)("li",{children:["View ",(0,T.jsx)("strong",{children:"Program Summary"})," to see all imported spaces"]}),(0,T.jsx)("li",{children:"Confirm your tier detection matches your target SF"}),(0,T.jsxs)("li",{children:["Browse the ",(0,T.jsx)("strong",{children:"Module Library"})," to understand what each validation module covers"]})]}),(0,T.jsxs)("div",{className:"doc-tip",children:[(0,T.jsx)(Ce,{size:14}),(0,T.jsx)("span",{children:"If spaces are missing or incorrect, return to the FYI module to make changes."})]})]})]}),(0,T.jsxs)("div",{className:"doc-phase",children:[(0,T.jsx)("div",{className:"doc-phase-badge",children:"Step 2"}),(0,T.jsx)("h3",{className:"doc-phase-title",children:"Answer Layout Questions"}),(0,T.jsxs)("div",{className:"doc-phase-content",children:[(0,T.jsx)("p",{children:"The heart of MVP: 10 personalization decisions that shape your adjacency requirements."}),(0,T.jsxs)("ul",{className:"doc-checklist",children:[(0,T.jsx)("li",{children:"Each question addresses a specific lifestyle trade-off"}),(0,T.jsx)("li",{children:"Your answers determine which rooms should be adjacent, near, buffered, or separated"}),(0,T.jsxs)("li",{children:["Some choices enable ",(0,T.jsx)("strong",{children:"operational bridges"})," (transition spaces)"]}),(0,T.jsx)("li",{children:"Selections save automatically\u2014you can return and change them anytime"})]}),(0,T.jsxs)("div",{className:"doc-example",children:[(0,T.jsx)("strong",{children:"Example:"}),' "How should your kitchen relate to family activities?"',(0,T.jsx)("p",{children:'Choosing "Open Connection" creates an Adjacent relationship between Kitchen and Great Room. Choosing "Formal Separation" adds a Butler Pantry bridge and creates a Buffered relationship.'})]})]})]}),(0,T.jsxs)("div",{className:"doc-phase",children:[(0,T.jsx)("div",{className:"doc-phase-badge",children:"Step 3"}),(0,T.jsx)("h3",{className:"doc-phase-title",children:"Review Adjacency Matrix"}),(0,T.jsxs)("div",{className:"doc-phase-content",children:[(0,T.jsx)("p",{children:"Compare your personalized adjacencies against the benchmark:"}),(0,T.jsxs)("ul",{className:"doc-checklist",children:[(0,T.jsxs)("li",{children:["Toggle between ",(0,T.jsx)("strong",{children:"Desired"})," (benchmark) and ",(0,T.jsx)("strong",{children:"Achieved"})," (your selections)"]}),(0,T.jsx)("li",{children:"Deviations are highlighted\u2014these aren't necessarily wrong, just different from typical"}),(0,T.jsx)("li",{children:"Understand the relationship types: A (Adjacent), N (Near), B (Buffered), S (Separated)"})]})]})]}),(0,T.jsxs)("div",{className:"doc-phase",children:[(0,T.jsx)("div",{className:"doc-phase-badge",children:"Step 4"}),(0,T.jsx)("h3",{className:"doc-phase-title",children:"Run Validation"}),(0,T.jsxs)("div",{className:"doc-phase-content",children:[(0,T.jsx)("p",{children:"Execute the validation engine to check your program against the N4S ruleset:"}),(0,T.jsxs)("div",{className:"doc-validation-checks",children:[(0,T.jsxs)("div",{className:"doc-check",children:[(0,T.jsx)(Tr,{size:16,className:"doc-check-icon error"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Red Flags"}),(0,T.jsx)("p",{children:"Critical violations that must be resolved (target: 0)"})]})]}),(0,T.jsxs)("div",{className:"doc-check",children:[(0,T.jsx)(Ze,{size:16,className:"doc-check-icon warning"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Bridges"}),(0,T.jsx)("p",{children:"Recommended transition spaces (target: all required bridges enabled)"})]})]}),(0,T.jsxs)("div",{className:"doc-check",children:[(0,T.jsx)(K,{size:16,className:"doc-check-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Module Scores"}),(0,T.jsx)("p",{children:"Performance by area (target: 80+ for each module)"})]})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-phase",children:[(0,T.jsx)("div",{className:"doc-phase-badge",children:"Step 5"}),(0,T.jsx)("h3",{className:"doc-phase-title",children:"Iterate or Proceed"}),(0,T.jsxs)("div",{className:"doc-phase-content",children:[(0,T.jsx)("p",{children:"Based on validation results:"}),(0,T.jsxs)("div",{className:"doc-outcomes",children:[(0,T.jsxs)("div",{className:"doc-outcome",children:[(0,T.jsx)("span",{className:"doc-outcome-if",children:"If red flags triggered:"}),(0,T.jsx)("span",{className:"doc-outcome-then",children:"Edit decisions to resolve the specific conflicts"})]}),(0,T.jsxs)("div",{className:"doc-outcome",children:[(0,T.jsx)("span",{className:"doc-outcome-if",children:"If bridges missing:"}),(0,T.jsx)("span",{className:"doc-outcome-then",children:"Review which layout questions enable them"})]}),(0,T.jsxs)("div",{className:"doc-outcome",children:[(0,T.jsx)("span",{className:"doc-outcome-if",children:"If scores below 80:"}),(0,T.jsx)("span",{className:"doc-outcome-then",children:"Check which adjacencies are causing deviations in that module"})]}),(0,T.jsxs)("div",{className:"doc-outcome doc-outcome--success",children:[(0,T.jsx)("span",{className:"doc-outcome-if",children:"If all gates pass:"}),(0,T.jsx)("span",{className:"doc-outcome-then",children:"Proceed to Concept Plan with confidence"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Where MVP Fits in Your Project"}),(0,T.jsxs)("div",{className:"doc-timeline",children:[(0,T.jsxs)("div",{className:"doc-timeline-item",children:[(0,T.jsx)("div",{className:"doc-timeline-badge",children:"Phase A"}),(0,T.jsxs)("div",{className:"doc-timeline-content",children:[(0,T.jsx)("strong",{children:"Kickoff (Day 0-7)"}),(0,T.jsx)("p",{children:"Complete KYC and FYI modules to capture lifestyle and space requirements"})]})]}),(0,T.jsxs)("div",{className:"doc-timeline-item doc-timeline-item--active",children:[(0,T.jsx)("div",{className:"doc-timeline-badge",children:"Phase B"}),(0,T.jsxs)("div",{className:"doc-timeline-content",children:[(0,T.jsx)("strong",{children:"Concept Plan (Gate 1)"}),(0,T.jsx)("p",{children:"Run MVP validation to lock adjacency logic before design begins"})]})]}),(0,T.jsxs)("div",{className:"doc-timeline-item",children:[(0,T.jsx)("div",{className:"doc-timeline-badge",children:"Phase C"}),(0,T.jsxs)("div",{className:"doc-timeline-content",children:[(0,T.jsx)("strong",{children:"Schematic Design (Gate 2)"}),(0,T.jsx)("p",{children:"Re-run validation with updated plans to confirm compliance"})]})]}),(0,T.jsxs)("div",{className:"doc-timeline-item",children:[(0,T.jsx)("div",{className:"doc-timeline-badge",children:"Phase D"}),(0,T.jsxs)("div",{className:"doc-timeline-content",children:[(0,T.jsx)("strong",{children:"Design Development (Gate 3)"}),(0,T.jsx)("p",{children:"Final validation freeze\u2014changes require documented rationale"})]})]})]})]})]})}function jh(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Master Adjacency Gate"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"The MVP validation gate is a pre-design decision gate. Your program passes if it contains zero critical red flags, has all required bridges enabled, and meets module score thresholds (default: 80+). Passing this gate means your adjacency logic is sound and you can proceed to schematic design with confidence."}),(0,T.jsxs)("div",{className:"doc-gate-criteria",children:[(0,T.jsxs)("div",{className:"doc-criterion",children:[(0,T.jsx)(Tr,{size:20,color:yh}),(0,T.jsx)("span",{children:"Zero red flags triggered"})]}),(0,T.jsxs)("div",{className:"doc-criterion",children:[(0,T.jsx)(Ze,{size:20,color:vh}),(0,T.jsx)("span",{children:"All required bridges enabled"})]}),(0,T.jsxs)("div",{className:"doc-criterion",children:[(0,T.jsx)(K,{size:20,color:gh}),(0,T.jsx)("span",{children:"Module scores \u2265 80"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title doc-subsection-title--error",children:"Critical Red Flags (Must Resolve)"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"These five violations represent fundamental failures in mansion programming. Each would compromise your family's privacy, acoustic comfort, or operational efficiency in ways that are costly and disruptive to fix once construction begins."}),(0,T.jsxs)("div",{className:"doc-redflag",children:[(0,T.jsx)("div",{className:"doc-redflag-number",children:"1"}),(0,T.jsxs)("div",{className:"doc-redflag-content",children:[(0,T.jsx)("h4",{children:"Guest \u2192 Primary Suite Collision"}),(0,T.jsxs)("p",{className:"doc-redflag-what",children:[(0,T.jsx)("strong",{children:"What it checks:"})," Guest circulation shouldn't pass through or be directly adjacent to your primary suite."]}),(0,T.jsxs)("p",{className:"doc-redflag-why",children:[(0,T.jsx)("strong",{children:"Why it matters:"})," Your primary suite is your retreat. Guests\u2014even family\u2014shouldn't see into your bedroom, hear your conversations, or feel your presence when you're trying to rest. This is about fundamental privacy."]}),(0,T.jsxs)("p",{className:"doc-redflag-how",children:[(0,T.jsx)("strong",{children:"How to resolve:"})," Ensure guest zones have a Buffered (B) or Separated (S) relationship with your primary suite. Never Adjacent (A) or Near (N)."]})]})]}),(0,T.jsxs)("div",{className:"doc-redflag",children:[(0,T.jsx)("div",{className:"doc-redflag-number",children:"2"}),(0,T.jsxs)("div",{className:"doc-redflag-content",children:[(0,T.jsx)("h4",{children:"Delivery \u2192 Front of House"}),(0,T.jsxs)("p",{className:"doc-redflag-what",children:[(0,T.jsx)("strong",{children:"What it checks:"})," Service and delivery routes shouldn't pass through formal entertaining spaces."]}),(0,T.jsxs)("p",{className:"doc-redflag-why",children:[(0,T.jsx)("strong",{children:"Why it matters:"})," Package deliveries, grocery runs, and staff movement shouldn't interrupt your dinner party or family breakfast. Operations should be invisible to guests."]}),(0,T.jsxs)("p",{className:"doc-redflag-how",children:[(0,T.jsx)("strong",{children:"How to resolve:"})," Create a service spine with Separated (S) relationship from foyer, great room, and formal dining. Consider adding an Ops Core bridge."]})]})]}),(0,T.jsxs)("div",{className:"doc-redflag",children:[(0,T.jsx)("div",{className:"doc-redflag-number",children:"3"}),(0,T.jsxs)("div",{className:"doc-redflag-content",children:[(0,T.jsx)("h4",{children:"Media \u2192 Bedroom Acoustic Bleed"}),(0,T.jsxs)("p",{className:"doc-redflag-what",children:[(0,T.jsx)("strong",{children:"What it checks:"})," Media rooms shouldn't share walls with sleeping areas."]}),(0,T.jsxs)("p",{className:"doc-redflag-why",children:[(0,T.jsx)("strong",{children:"Why it matters:"})," Late-night movies, sports games, or music shouldn't disturb family members who've gone to bed. Acoustic isolation enables 24/7 use without household conflict."]}),(0,T.jsxs)("p",{className:"doc-redflag-how",children:[(0,T.jsx)("strong",{children:"How to resolve:"})," Add a Sound Lock bridge between media and bedroom zones, or ensure a Separated (S) relationship with Zone 0 (sleeping areas)."]})]})]}),(0,T.jsxs)("div",{className:"doc-redflag",children:[(0,T.jsx)("div",{className:"doc-redflag-number",children:"4"}),(0,T.jsxs)("div",{className:"doc-redflag-content",children:[(0,T.jsx)("h4",{children:"Kitchen Exposed at Entry"}),(0,T.jsxs)("p",{className:"doc-redflag-what",children:[(0,T.jsx)("strong",{children:"What it checks:"})," Kitchen shouldn't be the first thing visible from the foyer."]}),(0,T.jsxs)("p",{className:"doc-redflag-why",children:[(0,T.jsx)("strong",{children:"Why it matters:"})," A working kitchen\u2014with dishes in the sink, prep underway, or last night's takeout containers\u2014shouldn't greet your guests. First impressions matter, especially in a luxury residence."]}),(0,T.jsxs)("p",{className:"doc-redflag-how",children:[(0,T.jsx)("strong",{children:"How to resolve:"})," Create a Buffered (B) relationship between kitchen and foyer, typically via a butler pantry or strategic sightline blocking."]})]})]}),(0,T.jsxs)("div",{className:"doc-redflag",children:[(0,T.jsx)("div",{className:"doc-redflag-number",children:"5"}),(0,T.jsxs)("div",{className:"doc-redflag-content",children:[(0,T.jsx)("h4",{children:"Guest Route Through Kitchen"}),(0,T.jsxs)("p",{className:"doc-redflag-what",children:[(0,T.jsx)("strong",{children:"What it checks:"})," Guest circulation to dining or terrace shouldn't cross through the kitchen work zone."]}),(0,T.jsxs)("p",{className:"doc-redflag-why",children:[(0,T.jsx)("strong",{children:"Why it matters:"})," Catering staff prepping appetizers, your spouse cooking dinner, or your housekeeper unloading groceries shouldn't conflict with guests moving between entertaining spaces."]}),(0,T.jsxs)("p",{className:"doc-redflag-how",children:[(0,T.jsx)("strong",{children:"How to resolve:"})," Create alternate guest routes via the great room or butler pantry. Ensure kitchen has a Separated (S) relationship from guest circulation paths."]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Operational Bridges (Recommended)"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Bridges are specialized transition spaces that solve common conflicts between zones. They're enabled by your Layout Question answers\u2014certain lifestyle choices trigger the need for these spaces."}),(0,T.jsx)(bh,{title:"Butler Pantry",defaultOpen:!0,children:(0,T.jsxs)("div",{className:"doc-bridge",children:[(0,T.jsxs)("div",{className:"doc-bridge-meta",children:[(0,T.jsxs)("span",{className:"doc-bridge-trigger",children:[(0,T.jsx)("strong",{children:"Triggered by:"})," Formal entertaining OR staffed service OR catering support"]}),(0,T.jsx)("span",{className:"doc-bridge-impact",children:"+120 SF"})]}),(0,T.jsx)("p",{children:"A service corridor between kitchen and formal dining that allows staff to plate, garnish, and serve without crossing guest sightlines. Think of it as backstage for your dinner parties."}),(0,T.jsxs)("p",{className:"doc-bridge-benefit",children:[(0,T.jsx)("strong",{children:"Enables:"})," Hidden plating, dirty dish staging, wine service prep, catering coordination\u2014all invisible to guests."]})]})}),(0,T.jsx)(bh,{title:"Guest Autonomy Node",children:(0,T.jsxs)("div",{className:"doc-bridge",children:[(0,T.jsxs)("div",{className:"doc-bridge-meta",children:[(0,T.jsxs)("span",{className:"doc-bridge-trigger",children:[(0,T.jsx)("strong",{children:"Triggered by:"})," Extended family visits OR multi-generational living OR vacation home typology"]}),(0,T.jsx)("span",{className:"doc-bridge-impact",children:"+150 SF"})]}),(0,T.jsx)("p",{children:"A self-contained guest zone with independent entry, kitchenette access, and living area for extended stays. Guests can come and go, make coffee, and live independently without crossing through your private spaces."}),(0,T.jsxs)("p",{className:"doc-bridge-benefit",children:[(0,T.jsx)("strong",{children:"Enables:"})," Week-long visits without friction, in-law accommodations, rental potential, staff quarters flexibility."]})]})}),(0,T.jsx)(bh,{title:"Sound Lock Vestibule",children:(0,T.jsxs)("div",{className:"doc-bridge",children:[(0,T.jsxs)("div",{className:"doc-bridge-meta",children:[(0,T.jsxs)("span",{className:"doc-bridge-trigger",children:[(0,T.jsx)("strong",{children:"Triggered by:"})," Late-night media use OR home theater OR music room OR recording studio"]}),(0,T.jsx)("span",{className:"doc-bridge-impact",children:"+60 SF"})]}),(0,T.jsx)("p",{children:"A double-door acoustic buffer between high-noise spaces (media room, theater) and quiet zones (bedrooms). Creates an airlock that prevents sound transmission even with doors opening."}),(0,T.jsxs)("p",{className:"doc-bridge-benefit",children:[(0,T.jsx)("strong",{children:"Enables:"})," 2 AM movie marathons, Sunday football at full volume, band practice\u2014without disturbing those sleeping."]})]})}),(0,T.jsx)(bh,{title:"Wet-Feet Intercept",children:(0,T.jsxs)("div",{className:"doc-bridge",children:[(0,T.jsxs)("div",{className:"doc-bridge-meta",children:[(0,T.jsxs)("span",{className:"doc-bridge-trigger",children:[(0,T.jsx)("strong",{children:"Triggered by:"})," Pool/spa program OR pool entertainment enabled"]}),(0,T.jsx)("span",{className:"doc-bridge-impact",children:"+80 SF"})]}),(0,T.jsx)("p",{children:"A transition zone with drainage, towel storage, and outdoor shower between pool area and main house. Prevents wet feet, chlorine drips, and sand from tracking through your home."}),(0,T.jsxs)("p",{className:"doc-bridge-benefit",children:[(0,T.jsx)("strong",{children:"Enables:"})," Seamless indoor-outdoor flow, pool party hosting, spa access without damaging interior finishes."]})]})}),(0,T.jsx)(bh,{title:"Ops Core",children:(0,T.jsxs)("div",{className:"doc-bridge",children:[(0,T.jsxs)("div",{className:"doc-bridge-meta",children:[(0,T.jsxs)("span",{className:"doc-bridge-trigger",children:[(0,T.jsx)("strong",{children:"Triggered by:"})," Full-time staff OR heavy package volume OR enhanced security"]}),(0,T.jsx)("span",{className:"doc-bridge-impact",children:"+150 SF"})]}),(0,T.jsx)("p",{children:'A dedicated hub for staff operations including secure package receipt, delivery staging, housekeeping coordination, and staff break area. Centralizes the "invisible" operations that keep a mansion running.'}),(0,T.jsxs)("p",{className:"doc-bridge-benefit",children:[(0,T.jsx)("strong",{children:"Enables:"})," Package deliveries without interruption, staff coordination, vendor access control, housekeeping efficiency."]})]})})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Module Score Thresholds"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Each module evaluates a specific functional area of your home. Scores reflect how well your adjacency choices align with the benchmark for homes of your tier. Target: 80+ for each module."}),(0,T.jsxs)("div",{className:"doc-module-scores",children:[(0,T.jsxs)("div",{className:"doc-module-row",children:[(0,T.jsx)(sh,{size:18,className:"doc-module-icon"}),(0,T.jsxs)("div",{className:"doc-module-info",children:[(0,T.jsx)("strong",{children:"Kitchen Rules Engine"}),(0,T.jsx)("p",{children:"Cooking flow, prep zones, service circulation, sightline management"})]}),(0,T.jsx)("span",{className:"doc-module-target",children:"80+"})]}),(0,T.jsxs)("div",{className:"doc-module-row",children:[(0,T.jsx)(h,{size:18,className:"doc-module-icon"}),(0,T.jsxs)("div",{className:"doc-module-info",children:[(0,T.jsx)("strong",{children:"Entertaining Spine"}),(0,T.jsx)("p",{children:"Guest arrival sequence, formal circulation, dining-to-living flow"})]}),(0,T.jsx)("span",{className:"doc-module-target",children:"80+"})]}),(0,T.jsxs)("div",{className:"doc-module-row",children:[(0,T.jsx)(u,{size:18,className:"doc-module-icon"}),(0,T.jsxs)("div",{className:"doc-module-info",children:[(0,T.jsx)("strong",{children:"Primary Suite Ecosystem"}),(0,T.jsx)("p",{children:"Privacy protection, bath-closet relationships, retreat quality"})]}),(0,T.jsx)("span",{className:"doc-module-target",children:"80+"})]}),(0,T.jsxs)("div",{className:"doc-module-row",children:[(0,T.jsx)(h,{size:18,className:"doc-module-icon"}),(0,T.jsxs)("div",{className:"doc-module-info",children:[(0,T.jsx)("strong",{children:"Guest Wing Logic"}),(0,T.jsx)("p",{children:"Independence, acoustic separation, autonomous access"})]}),(0,T.jsx)("span",{className:"doc-module-target",children:"80+"})]}),(0,T.jsxs)("div",{className:"doc-module-row",children:[(0,T.jsx)(lh,{size:18,className:"doc-module-icon"}),(0,T.jsxs)("div",{className:"doc-module-info",children:[(0,T.jsx)("strong",{children:"Media & Acoustic Control"}),(0,T.jsx)("p",{children:"Sound isolation, zone separation, 24/7 usability"})]}),(0,T.jsx)("span",{className:"doc-module-target",children:"80+"})]}),(0,T.jsxs)("div",{className:"doc-module-row",children:[(0,T.jsx)(Wu,{size:18,className:"doc-module-icon"}),(0,T.jsxs)("div",{className:"doc-module-info",children:[(0,T.jsx)("strong",{children:"Service Spine"}),(0,T.jsx)("p",{children:"Delivery routes, back-of-house circulation, MEP access"})]}),(0,T.jsx)("span",{className:"doc-module-target",children:"80+"})]}),(0,T.jsxs)("div",{className:"doc-module-row",children:[(0,T.jsx)(Dr,{size:18,className:"doc-module-icon"}),(0,T.jsxs)("div",{className:"doc-module-info",children:[(0,T.jsx)("strong",{children:"Wellness Program"}),(0,T.jsx)("p",{children:"Pool-spa relationships, gym access, indoor-outdoor transitions"})]}),(0,T.jsx)("span",{className:"doc-module-target",children:"80+"})]}),(0,T.jsxs)("div",{className:"doc-module-row",children:[(0,T.jsx)(be,{size:18,className:"doc-module-icon"}),(0,T.jsxs)("div",{className:"doc-module-info",children:[(0,T.jsx)("strong",{children:"Staff Layer"}),(0,T.jsx)("p",{children:"Operations hub, staff quarters, service support functions"})]}),(0,T.jsx)("span",{className:"doc-module-target",children:"80+"})]})]})]})]})}function wh(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Reference Guide"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Technical definitions, zone classifications, and prerequisites for the MVP validation system."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Adjacency Relationship Types"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Four relationship types define how spaces connect. Understanding these is key to interpreting your adjacency matrix and validation results."}),(0,T.jsxs)("div",{className:"doc-relationship",children:[(0,T.jsx)("div",{className:"doc-relationship-badge doc-rel-a",children:"A"}),(0,T.jsxs)("div",{className:"doc-relationship-content",children:[(0,T.jsx)("h4",{children:"Adjacent"}),(0,T.jsx)("p",{children:"Direct connection with shared doorway or open flow. Rooms are immediately accessible."}),(0,T.jsxs)("div",{className:"doc-relationship-examples",children:[(0,T.jsxs)("div",{className:"doc-use-for",children:[(0,T.jsx)("strong",{children:"Use for:"})," Primary suite to bath, kitchen to breakfast nook, closet to dressing area"]}),(0,T.jsxs)("div",{className:"doc-avoid-for",children:[(0,T.jsx)("strong",{children:"Avoid for:"})," Service to formal spaces, bedrooms to media, guest to primary"]})]})]})]}),(0,T.jsxs)("div",{className:"doc-relationship",children:[(0,T.jsx)("div",{className:"doc-relationship-badge doc-rel-n",children:"N"}),(0,T.jsxs)("div",{className:"doc-relationship-content",children:[(0,T.jsx)("h4",{children:"Near"}),(0,T.jsx)("p",{children:"Close proximity with short walk. May share sightlines but not direct access."}),(0,T.jsxs)("div",{className:"doc-relationship-examples",children:[(0,T.jsxs)("div",{className:"doc-use-for",children:[(0,T.jsx)("strong",{children:"Use for:"})," Dining to kitchen (with buffer), gym to pool, home office to library"]}),(0,T.jsxs)("div",{className:"doc-avoid-for",children:[(0,T.jsx)("strong",{children:"Avoid for:"})," Guest to primary suite, garage to foyer, media to bedrooms"]})]})]})]}),(0,T.jsxs)("div",{className:"doc-relationship",children:[(0,T.jsx)("div",{className:"doc-relationship-badge doc-rel-b",children:"B"}),(0,T.jsxs)("div",{className:"doc-relationship-content",children:[(0,T.jsx)("h4",{children:"Buffered"}),(0,T.jsx)("p",{children:"Intentional separation with transition space. Enables bridges and acoustic control."}),(0,T.jsxs)("div",{className:"doc-relationship-examples",children:[(0,T.jsxs)("div",{className:"doc-use-for",children:[(0,T.jsx)("strong",{children:"Use for:"})," Kitchen to formal dining (butler pantry), media to bedrooms (sound lock), pool to house (wet-feet intercept)"]}),(0,T.jsxs)("div",{className:"doc-avoid-for",children:[(0,T.jsx)("strong",{children:"Avoid for:"})," Spaces requiring immediate access like primary suite to bath"]})]})]})]}),(0,T.jsxs)("div",{className:"doc-relationship",children:[(0,T.jsx)("div",{className:"doc-relationship-badge doc-rel-s",children:"S"}),(0,T.jsxs)("div",{className:"doc-relationship-content",children:[(0,T.jsx)("h4",{children:"Separated"}),(0,T.jsx)("p",{children:"Different zone with no direct connection. Maximum privacy and acoustic isolation."}),(0,T.jsxs)("div",{className:"doc-relationship-examples",children:[(0,T.jsxs)("div",{className:"doc-use-for",children:[(0,T.jsx)("strong",{children:"Use for:"})," Service to formal areas, guest to primary suite, garage to living spaces"]}),(0,T.jsxs)("div",{className:"doc-avoid-for",children:[(0,T.jsx)("strong",{children:"Avoid for:"})," Spaces requiring convenient access like kitchen to dining"]})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Acoustic Zones"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Spaces are classified by noise level. Red flags trigger when incompatible zones share walls or have adjacent relationships."}),(0,T.jsxs)("div",{className:"doc-acoustic-grid",children:[(0,T.jsxs)("div",{className:"doc-acoustic-zone",children:[(0,T.jsx)("div",{className:"doc-acoustic-badge zone-0",children:"Zone 0"}),(0,T.jsxs)("div",{className:"doc-acoustic-content",children:[(0,T.jsx)("strong",{children:"Quiet Sleeping"}),(0,T.jsx)("p",{children:"Primary suite, guest bedrooms, nursery"}),(0,T.jsx)("p",{className:"doc-acoustic-rule",children:"No shared walls with Zone 3. Sound lock required if adjacent to media."})]})]}),(0,T.jsxs)("div",{className:"doc-acoustic-zone",children:[(0,T.jsx)("div",{className:"doc-acoustic-badge zone-1",children:"Zone 1"}),(0,T.jsxs)("div",{className:"doc-acoustic-content",children:[(0,T.jsx)("strong",{children:"Conversation Level"}),(0,T.jsx)("p",{children:"Living room, dining room, library, home office"}),(0,T.jsx)("p",{className:"doc-acoustic-rule",children:"Normal residential construction. Buffered from Zone 0 and 3."})]})]}),(0,T.jsxs)("div",{className:"doc-acoustic-zone",children:[(0,T.jsx)("div",{className:"doc-acoustic-badge zone-2",children:"Zone 2"}),(0,T.jsxs)("div",{className:"doc-acoustic-content",children:[(0,T.jsx)("strong",{children:"Active Moderate"}),(0,T.jsx)("p",{children:"Kitchen, family room, gym, kids playroom"}),(0,T.jsx)("p",{className:"doc-acoustic-rule",children:"Working noise acceptable. Separated from Zone 0."})]})]}),(0,T.jsxs)("div",{className:"doc-acoustic-zone",children:[(0,T.jsx)("div",{className:"doc-acoustic-badge zone-3",children:"Zone 3"}),(0,T.jsxs)("div",{className:"doc-acoustic-content",children:[(0,T.jsx)("strong",{children:"High Noise"}),(0,T.jsx)("p",{children:"Media room, home theater, pool equipment, music room"}),(0,T.jsx)("p",{className:"doc-acoustic-rule",children:"Enhanced acoustic construction. Must be Separated (S) from Zone 0."})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Space Codes Reference"}),(0,T.jsx)(bh,{title:"View All Space Codes",children:(0,T.jsxs)("div",{className:"doc-codes-grid",children:[(0,T.jsxs)("div",{className:"doc-code-section",children:[(0,T.jsx)("h5",{children:"Arrival & Circulation"}),(0,T.jsxs)("div",{className:"doc-code-list",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"FOY"})," Foyer"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"GAL"})," Gallery"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"MUD"})," Mudroom"]})]})]}),(0,T.jsxs)("div",{className:"doc-code-section",children:[(0,T.jsx)("h5",{children:"Living & Entertaining"}),(0,T.jsxs)("div",{className:"doc-code-list",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"GR"})," Great Room"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"LR"})," Living Room"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"FR"})," Family Room"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"DR"})," Dining Room"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"WINE"})," Wine Room"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"BAR"})," Bar"]})]})]}),(0,T.jsxs)("div",{className:"doc-code-section",children:[(0,T.jsx)("h5",{children:"Kitchen & Service"}),(0,T.jsxs)("div",{className:"doc-code-list",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"KIT"})," Kitchen"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"CHEF"})," Chef's Kitchen"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"BKF"})," Breakfast Nook"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"SCUL"})," Scullery"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"BUTLER"})," Butler Pantry"]})]})]}),(0,T.jsxs)("div",{className:"doc-code-section",children:[(0,T.jsx)("h5",{children:"Primary Suite"}),(0,T.jsxs)("div",{className:"doc-code-list",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"PRI"})," Primary Bedroom"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"PRIBATH"})," Primary Bath"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"PRICL"})," Primary Closet"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"PRILOUNGE"})," Primary Lounge"]})]})]}),(0,T.jsxs)("div",{className:"doc-code-section",children:[(0,T.jsx)("h5",{children:"Guest & Secondary"}),(0,T.jsxs)("div",{className:"doc-code-list",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"GUEST1-3"})," Guest Suites"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"JRPRI"})," Junior Primary"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"KIDS"})," Kids Room"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"BUNK"})," Bunk Room"]})]})]}),(0,T.jsxs)("div",{className:"doc-code-section",children:[(0,T.jsx)("h5",{children:"Media & Recreation"}),(0,T.jsxs)("div",{className:"doc-code-list",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"MEDIA"})," Media Room"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"THR"})," Theater"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"GAME"})," Game Room"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"SNDLCK"})," Sound Lock"]})]})]}),(0,T.jsxs)("div",{className:"doc-code-section",children:[(0,T.jsx)("h5",{children:"Wellness"}),(0,T.jsxs)("div",{className:"doc-code-list",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"GYM"})," Gym"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"SPA"})," Spa"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"POOL"})," Pool"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"WETFT"})," Wet-Feet Intercept"]})]})]}),(0,T.jsxs)("div",{className:"doc-code-section",children:[(0,T.jsx)("h5",{children:"Service & Operations"}),(0,T.jsxs)("div",{className:"doc-code-list",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"GAR"})," Garage"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"LND"})," Laundry"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"MEP"})," Mechanical"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"STF"})," Staff"]}),(0,T.jsxs)("span",{children:[(0,T.jsx)("code",{children:"OPSCORE"})," Ops Core"]})]})]})]})})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Prerequisites Checklist"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Before starting MVP validation, confirm these items are complete:"}),(0,T.jsxs)("div",{className:"doc-checklist-detailed",children:[(0,T.jsxs)("div",{className:"doc-prereq-item",children:[(0,T.jsx)("input",{type:"checkbox",disabled:!0}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"KYC Module Complete"}),(0,T.jsx)("p",{children:"Operating model defined, privacy posture selected, staffing level set, entertaining frequency captured"})]})]}),(0,T.jsxs)("div",{className:"doc-prereq-item",children:[(0,T.jsx)("input",{type:"checkbox",disabled:!0}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"FYI Module Complete"}),(0,T.jsx)("p",{children:"Space program finalized, zones assigned, S/M/L sizing selected for each space"})]})]}),(0,T.jsxs)("div",{className:"doc-prereq-item",children:[(0,T.jsx)("input",{type:"checkbox",disabled:!0}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Tier Detection Verified"}),(0,T.jsx)("p",{children:"System shows correct benchmark tier (5K/10K/15K/20K) matching your target SF"})]})]}),(0,T.jsxs)("div",{className:"doc-prereq-item",children:[(0,T.jsx)("input",{type:"checkbox",disabled:!0}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Target SF Confirmed"}),(0,T.jsx)("p",{children:"Program total aligns with your project scope and budget"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Glossary"}),(0,T.jsx)(bh,{title:"View Definitions",children:(0,T.jsxs)("dl",{className:"doc-glossary",children:[(0,T.jsx)("dt",{children:"Adjacency Matrix"}),(0,T.jsx)("dd",{children:"A table showing the required relationship (A/N/B/S) between every pair of spaces in your program."}),(0,T.jsx)("dt",{children:"Benchmark"}),(0,T.jsx)("dd",{children:"The recommended adjacency configuration for a home of your tier, based on typical luxury residence best practices."}),(0,T.jsx)("dt",{children:"Bridge"}),(0,T.jsx)("dd",{children:"A specialized transition space that enables buffered relationships between zones while maintaining functionality."}),(0,T.jsx)("dt",{children:"Deviation"}),(0,T.jsx)("dd",{children:"Any place where your selected relationship differs from the benchmark. Deviations aren't necessarily wrong\u2014they reflect your personalization."}),(0,T.jsx)("dt",{children:"Gate"}),(0,T.jsx)("dd",{children:"A validation checkpoint that must be passed before proceeding to the next project phase."}),(0,T.jsx)("dt",{children:"Module"}),(0,T.jsx)("dd",{children:"A functional grouping of related spaces evaluated together (e.g., Kitchen Rules Engine covers KIT, CHEF, SCUL, BKF, DR)."}),(0,T.jsx)("dt",{children:"Red Flag"}),(0,T.jsx)("dd",{children:"A critical violation that represents a fundamental failure in mansion programming and must be resolved."}),(0,T.jsx)("dt",{children:"Tier"}),(0,T.jsx)("dd",{children:"Your project's size category (5K, 10K, 15K, 20K) which determines which benchmark relationships apply."})]})})]})]})}function Nh(e){let{onClose:t}=e;const[n,i]=(0,a.useState)("overview");return(0,T.jsxs)("div",{className:"doc-container",children:[(0,T.jsxs)("div",{className:"doc-header",children:[(0,T.jsx)("div",{className:"doc-header-top",children:t&&(0,T.jsxs)("button",{className:"doc-close-btn",onClick:t,children:[(0,T.jsx)(Z,{size:16}),"Back to MVP"]})}),(0,T.jsx)("h1",{className:"doc-title",children:"Documentation"}),(0,T.jsx)("p",{className:"doc-subtitle",children:"N4S MVP \u2014 Master Validation Program Guide"}),(0,T.jsx)("div",{className:"doc-tabs",children:[{id:"overview",label:"Overview"},{id:"workflow",label:"Workflow"},{id:"gates",label:"Gates"},{id:"reference",label:"Reference"}].map(e=>(0,T.jsx)("button",{className:"doc-tab ".concat(n===e.id?"active":""),onClick:()=>i(e.id),children:e.label},e.id))})]}),(0,T.jsxs)("div",{className:"doc-content",children:["overview"===n&&(0,T.jsx)(xh,{}),"workflow"===n&&(0,T.jsx)(Sh,{}),"gates"===n&&(0,T.jsx)(jh,{}),"reference"===n&&(0,T.jsx)(wh,{})]}),(0,T.jsx)("style",{children:kh})]})}const kh="\n.doc-container {\n  min-height: 100vh;\n  background-color: ".concat(uh,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.doc-header {\n  background-color: ").concat(hh,";\n  border-bottom: 1px solid ").concat(ph,";\n  padding: 1rem 1.5rem 0;\n}\n\n.doc-header-top {\n  margin-bottom: 1rem;\n}\n\n.doc-close-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(ph,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(fh,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.doc-close-btn:hover {\n  border-color: ").concat(ch,";\n  color: ").concat(ch,";\n}\n\n.doc-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.75rem;\n  font-weight: 500;\n  color: ").concat(mh,";\n  margin: 0 0 0.25rem 0;\n}\n\n.doc-subtitle {\n  font-size: 0.9375rem;\n  color: ").concat(fh,";\n  margin: 0 0 1.5rem 0;\n}\n\n.doc-tabs {\n  display: flex;\n  gap: 0;\n  border: 1px solid ").concat(ph,";\n  border-bottom: none;\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n  background-color: ").concat(uh,";\n}\n\n.doc-tab {\n  flex: 1;\n  padding: 0.875rem 1rem;\n  background-color: transparent;\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(fh,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border-right: 1px solid ").concat(ph,";\n}\n\n.doc-tab:last-child {\n  border-right: none;\n}\n\n.doc-tab:hover {\n  background-color: ").concat(hh,";\n  color: ").concat(mh,";\n}\n\n.doc-tab.active {\n  background-color: ").concat(hh,";\n  color: ").concat(ch,";\n  box-shadow: inset 0 -2px 0 ").concat(ch,";\n}\n\n.doc-content {\n  padding: 1.5rem;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.doc-tab-content {\n  animation: fadeIn 0.2s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(4px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.doc-card {\n  background-color: ").concat(hh,";\n  border: 1px solid ").concat(ph,";\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.doc-card--highlight {\n  background-color: #f8f6f1;\n  border-color: ").concat(dh,";\n}\n\n.doc-card--warning {\n  background-color: #fffbf0;\n  border-color: ").concat(vh,";\n}\n\n.doc-section-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.375rem;\n  font-weight: 500;\n  color: ").concat(mh,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-subsection-title {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: ").concat(mh,";\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-subsection-title--error {\n  color: ").concat(yh,";\n}\n\n.doc-paragraph {\n  font-size: 0.9375rem;\n  line-height: 1.6;\n  color: ").concat(mh,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-paragraph:last-child {\n  margin-bottom: 0;\n}\n\n.doc-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.doc-list li {\n  display: flex;\n  gap: 0.75rem;\n  padding: 0.75rem 0;\n  border-bottom: 1px solid ").concat(ph,";\n}\n\n.doc-list li:last-child {\n  border-bottom: none;\n}\n\n.doc-list-icon {\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.doc-list-icon.success { color: ").concat(gh,"; }\n.doc-list-icon.warning { color: ").concat(vh,"; }\n.doc-list-icon.error { color: ").concat(yh,"; }\n\n.doc-list li strong {\n  display: block;\n  color: ").concat(mh,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-list li p {\n  font-size: 0.875rem;\n  color: ").concat(fh,";\n  margin: 0;\n}\n\n.doc-grid-2 {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.doc-feature {\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n  padding: 1rem;\n  background-color: ").concat(uh,";\n  border-radius: 6px;\n}\n\n.doc-feature-number {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: ").concat(ch,";\n  line-height: 1;\n}\n\n.doc-feature-text strong {\n  display: block;\n  font-size: 0.9375rem;\n  color: ").concat(mh,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-feature-text p {\n  font-size: 0.8125rem;\n  color: ").concat(fh,";\n  margin: 0;\n}\n\n.doc-tiers {\n  display: flex;\n  gap: 1rem;\n  margin-top: 1rem;\n}\n\n.doc-tier {\n  flex: 1;\n  text-align: center;\n  padding: 0.75rem;\n  background-color: ").concat(hh,";\n  border-radius: 6px;\n}\n\n.doc-tier-label {\n  display: block;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: ").concat(ch,";\n}\n\n.doc-tier-range {\n  display: block;\n  font-size: 0.75rem;\n  color: ").concat(fh,";\n}\n\n/* Workflow Phase Cards */\n.doc-phase {\n  background-color: ").concat(hh,";\n  border: 1px solid ").concat(ph,";\n  border-radius: 8px;\n  padding: 1.25rem 1.5rem;\n  margin-bottom: 1rem;\n  position: relative;\n  padding-left: 5rem;\n}\n\n.doc-phase-badge {\n  position: absolute;\n  left: 1rem;\n  top: 1.25rem;\n  padding: 0.25rem 0.5rem;\n  background-color: ").concat(ch,";\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n.doc-phase-title {\n  font-size: 1.0625rem;\n  font-weight: 600;\n  color: ").concat(mh,";\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-phase-content {\n  font-size: 0.9375rem;\n  color: ").concat(mh,";\n}\n\n.doc-phase-content p {\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-checklist {\n  list-style: none;\n  padding: 0;\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-checklist li {\n  position: relative;\n  padding-left: 1.5rem;\n  margin-bottom: 0.5rem;\n  font-size: 0.875rem;\n  color: ").concat(mh,";\n}\n\n.doc-checklist li::before {\n  content: '\u25cb';\n  position: absolute;\n  left: 0;\n  color: ").concat(ch,";\n}\n\n.doc-tip {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  background-color: #e3f2fd;\n  border-radius: 4px;\n  font-size: 0.8125rem;\n  color: #1565c0;\n}\n\n.doc-example {\n  padding: 0.75rem;\n  background-color: ").concat(uh,";\n  border-radius: 4px;\n  font-size: 0.875rem;\n}\n\n.doc-example strong {\n  color: ").concat(ch,";\n}\n\n.doc-example p {\n  margin: 0.5rem 0 0 0;\n  color: ").concat(fh,";\n}\n\n.doc-prereq-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.doc-prereq {\n  display: flex;\n  gap: 0.75rem;\n  padding: 0.5rem 0;\n}\n\n.doc-prereq-module {\n  padding: 0.25rem 0.5rem;\n  background-color: ").concat(ch,";\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  min-width: 40px;\n  text-align: center;\n}\n\n.doc-prereq-items {\n  font-size: 0.875rem;\n  color: ").concat(mh,";\n}\n\n.doc-validation-checks {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-top: 0.75rem;\n}\n\n.doc-check {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background-color: ").concat(uh,";\n  border-radius: 6px;\n}\n\n.doc-check-icon {\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.doc-check-icon.success { color: ").concat(gh,"; }\n.doc-check-icon.warning { color: ").concat(vh,"; }\n.doc-check-icon.error { color: ").concat(yh,"; }\n\n.doc-check strong {\n  display: block;\n  color: ").concat(mh,";\n  margin-bottom: 0.125rem;\n}\n\n.doc-check p {\n  font-size: 0.8125rem;\n  color: ").concat(fh,";\n  margin: 0;\n}\n\n.doc-outcomes {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.doc-outcome {\n  display: flex;\n  gap: 0.75rem;\n  padding: 0.5rem 0.75rem;\n  background-color: ").concat(uh,";\n  border-radius: 4px;\n  font-size: 0.875rem;\n}\n\n.doc-outcome--success {\n  background-color: #e8f5e9;\n}\n\n.doc-outcome-if {\n  color: ").concat(fh,";\n  min-width: 160px;\n}\n\n.doc-outcome-then {\n  color: ").concat(mh,";\n}\n\n.doc-timeline {\n  position: relative;\n  padding-left: 2rem;\n}\n\n.doc-timeline::before {\n  content: '';\n  position: absolute;\n  left: 0.5rem;\n  top: 0.5rem;\n  bottom: 0.5rem;\n  width: 2px;\n  background-color: ").concat(ph,";\n}\n\n.doc-timeline-item {\n  position: relative;\n  padding: 0.75rem 0;\n}\n\n.doc-timeline-item::before {\n  content: '';\n  position: absolute;\n  left: -1.625rem;\n  top: 1rem;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: ").concat(ph,";\n  border: 2px solid ").concat(hh,";\n}\n\n.doc-timeline-item--active::before {\n  background-color: ").concat(ch,";\n}\n\n.doc-timeline-badge {\n  display: inline-block;\n  padding: 0.125rem 0.5rem;\n  background-color: ").concat(uh,";\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  color: ").concat(fh,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-timeline-item--active .doc-timeline-badge {\n  background-color: ").concat(ch,";\n  color: #fff;\n}\n\n.doc-timeline-content strong {\n  display: block;\n  color: ").concat(mh,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-timeline-content p {\n  font-size: 0.8125rem;\n  color: ").concat(fh,";\n  margin: 0;\n}\n\n/* Gates Tab */\n.doc-gate-criteria {\n  display: flex;\n  gap: 2rem;\n  margin-top: 1rem;\n  padding: 1rem;\n  background-color: ").concat(uh,";\n  border-radius: 6px;\n}\n\n.doc-criterion {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(mh,";\n}\n\n.doc-redflag {\n  display: flex;\n  gap: 1rem;\n  padding: 1rem 0;\n  border-bottom: 1px solid ").concat(ph,";\n}\n\n.doc-redflag:last-child {\n  border-bottom: none;\n}\n\n.doc-redflag-number {\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ").concat(yh,";\n  color: #fff;\n  border-radius: 50%;\n  font-size: 0.875rem;\n  font-weight: 600;\n  flex-shrink: 0;\n}\n\n.doc-redflag-content h4 {\n  font-size: 1rem;\n  font-weight: 600;\n  color: ").concat(mh,";\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-redflag-what,\n.doc-redflag-why,\n.doc-redflag-how {\n  font-size: 0.875rem;\n  color: ").concat(mh,";\n  margin: 0 0 0.5rem 0;\n  line-height: 1.5;\n}\n\n.doc-redflag-what strong,\n.doc-redflag-why strong,\n.doc-redflag-how strong {\n  color: ").concat(fh,";\n}\n\n/* Expandable Sections */\n.doc-expandable {\n  border: 1px solid ").concat(ph,";\n  border-radius: 6px;\n  margin-bottom: 0.5rem;\n  overflow: hidden;\n}\n\n.doc-expandable-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background-color: ").concat(uh,";\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(mh,";\n  cursor: pointer;\n  text-align: left;\n}\n\n.doc-expandable-header:hover {\n  background-color: #f0f0eb;\n}\n\n.doc-expandable-content {\n  padding: 1rem;\n  border-top: 1px solid ").concat(ph,";\n}\n\n.doc-bridge {\n  font-size: 0.9375rem;\n}\n\n.doc-bridge-meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 0.75rem;\n}\n\n.doc-bridge-trigger {\n  font-size: 0.8125rem;\n  color: ").concat(fh,";\n}\n\n.doc-bridge-impact {\n  padding: 0.125rem 0.5rem;\n  background-color: #e3f2fd;\n  color: #1565c0;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n\n.doc-bridge p {\n  margin: 0 0 0.75rem 0;\n  color: ").concat(mh,";\n  line-height: 1.5;\n}\n\n.doc-bridge-benefit {\n  padding: 0.75rem;\n  background-color: #e8f5e9;\n  border-radius: 4px;\n  font-size: 0.8125rem;\n  margin-bottom: 0;\n}\n\n.doc-module-scores {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.doc-module-row {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background-color: ").concat(uh,";\n  border-radius: 6px;\n}\n\n.doc-module-icon {\n  color: ").concat(ch,";\n  flex-shrink: 0;\n}\n\n.doc-module-info {\n  flex: 1;\n}\n\n.doc-module-info strong {\n  display: block;\n  font-size: 0.9375rem;\n  color: ").concat(mh,";\n  margin-bottom: 0.125rem;\n}\n\n.doc-module-info p {\n  font-size: 0.8125rem;\n  color: ").concat(fh,";\n  margin: 0;\n}\n\n.doc-module-target {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: ").concat(gh,";\n}\n\n/* Reference Tab */\n.doc-relationship {\n  display: flex;\n  gap: 1rem;\n  padding: 1rem 0;\n  border-bottom: 1px solid ").concat(ph,";\n}\n\n.doc-relationship:last-child {\n  border-bottom: none;\n}\n\n.doc-relationship-badge {\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: #fff;\n  flex-shrink: 0;\n}\n\n.doc-rel-a { background-color: #4caf50; }\n.doc-rel-n { background-color: #2196f3; }\n.doc-rel-b { background-color: #ff9800; }\n.doc-rel-s { background-color: #f44336; }\n\n.doc-relationship-content h4 {\n  font-size: 1rem;\n  font-weight: 600;\n  color: ").concat(mh,";\n  margin: 0 0 0.25rem 0;\n}\n\n.doc-relationship-content > p {\n  font-size: 0.875rem;\n  color: ").concat(fh,";\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-relationship-examples {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.doc-use-for,\n.doc-avoid-for {\n  font-size: 0.8125rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 4px;\n}\n\n.doc-use-for {\n  background-color: #e8f5e9;\n  color: ").concat(gh,";\n}\n\n.doc-avoid-for {\n  background-color: #ffebee;\n  color: ").concat(yh,";\n}\n\n.doc-acoustic-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.doc-acoustic-zone {\n  display: flex;\n  gap: 0.75rem;\n  padding: 1rem;\n  background-color: ").concat(uh,";\n  border-radius: 6px;\n}\n\n.doc-acoustic-badge {\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  color: #fff;\n  height: fit-content;\n}\n\n.zone-0 { background-color: #1e3a5f; }\n.zone-1 { background-color: #2e7d32; }\n.zone-2 { background-color: #f57c00; }\n.zone-3 { background-color: #d32f2f; }\n\n.doc-acoustic-content strong {\n  display: block;\n  font-size: 0.9375rem;\n  color: ").concat(mh,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-acoustic-content p {\n  font-size: 0.8125rem;\n  color: ").concat(fh,";\n  margin: 0 0 0.5rem 0;\n}\n\n.doc-acoustic-rule {\n  font-size: 0.75rem;\n  color: ").concat(ch,";\n  font-weight: 500;\n}\n\n.doc-codes-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n\n.doc-code-section h5 {\n  font-size: 0.8125rem;\n  font-weight: 600;\n  color: ").concat(fh,";\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin: 0 0 0.5rem 0;\n}\n\n.doc-code-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.doc-code-list span {\n  font-size: 0.8125rem;\n  color: ").concat(mh,";\n}\n\n.doc-code-list code {\n  display: inline-block;\n  padding: 0.125rem 0.375rem;\n  background-color: ").concat(uh,";\n  border-radius: 3px;\n  font-family: 'SF Mono', Monaco, monospace;\n  font-size: 0.75rem;\n  color: ").concat(ch,";\n  margin-right: 0.5rem;\n}\n\n.doc-checklist-detailed {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.doc-prereq-item {\n  display: flex;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background-color: ").concat(uh,';\n  border-radius: 6px;\n}\n\n.doc-prereq-item input[type="checkbox"] {\n  margin-top: 2px;\n  flex-shrink: 0;\n}\n\n.doc-prereq-item strong {\n  display: block;\n  color: ').concat(mh,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-prereq-item p {\n  font-size: 0.8125rem;\n  color: ").concat(fh,";\n  margin: 0;\n}\n\n.doc-glossary {\n  margin: 0;\n}\n\n.doc-glossary dt {\n  font-weight: 600;\n  color: ").concat(mh,";\n  margin-top: 1rem;\n}\n\n.doc-glossary dt:first-child {\n  margin-top: 0;\n}\n\n.doc-glossary dd {\n  margin: 0.25rem 0 0 0;\n  font-size: 0.875rem;\n  color: ").concat(fh,";\n  line-height: 1.5;\n}\n\n@media (max-width: 768px) {\n  .doc-grid-2 {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-tiers {\n    flex-wrap: wrap;\n  }\n  \n  .doc-tier {\n    flex: 1 1 45%;\n  }\n  \n  .doc-gate-criteria {\n    flex-direction: column;\n    gap: 0.75rem;\n  }\n  \n  .doc-acoustic-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-codes-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-phase {\n    padding-left: 1.5rem;\n  }\n  \n  .doc-phase-badge {\n    position: static;\n    display: inline-block;\n    margin-bottom: 0.5rem;\n  }\n}\n"),_h=[{code:"Z1_APB",name:"Arrival + Public",order:10,description:"Entry, formal entertaining, office, and public-facing spaces"},{code:"Z2_FAM",name:"Family + Kitchen",order:20,description:"Daily living hub, kitchen, breakfast, and casual family spaces"},{code:"Z3_ENT",name:"Entertainment",order:30,description:"Game room, theater, bar, billiards, and recreational spaces"},{code:"Z4_WEL",name:"Wellness",order:40,description:"Gym, spa, pool support, and health-focused spaces"},{code:"Z5_PRI",name:"Primary Suite",order:50,description:"Primary bedroom, bath, closets, and private retreat"},{code:"Z6_GST",name:"Guest + Secondary",order:60,description:"Jr. Primary, guest suites, kids rooms, staff quarters"},{code:"Z7_SVC",name:"Service + BOH",order:70,description:"Laundry, mudroom, mechanical, storage, and back-of-house"},{code:"Z8_OUT",name:"Outdoor Spaces",order:80,description:"Terrace, pool, outdoor kitchen, and exterior living (not conditioned)"},{code:"Z9_GH",name:"Guest House",order:90,description:"Separate guest house structure with suites, living, kitchen",structure:"guestHouse"},{code:"Z10_PH",name:"Pool House",order:100,description:"Separate pool house / wellness pavilion structure",structure:"poolHouse"}],Ch=[{code:"FOY",name:"Foyer / Gallery",abbrev:"Foyer",zone:"Z1_APB",defaultLevel:1,baseSF:{"5k":200,"10k":350,"15k":420,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Includes coat closet allowance"},{code:"PWD",name:"Powder Room",abbrev:"Powder",zone:"Z1_APB",defaultLevel:1,baseSF:{"5k":45,"10k":60,"15k":80,"20k":100},basementEligible:!1,outdoorSpace:!1,tier:"core"},{code:"OFF",name:"Private Office",abbrev:"Office",zone:"Z1_APB",defaultLevel:1,baseSF:{"5k":120,"10k":200,"15k":280,"20k":350},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Home office / study"},{code:"GR",name:"Great Room",abbrev:"Great Room",zone:"Z1_APB",defaultLevel:1,baseSF:{"5k":350,"10k":500,"15k":600,"20k":750},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Formal living / showcase room"},{code:"DR",name:"Formal Dining",abbrev:"Dining",zone:"Z1_APB",defaultLevel:1,baseSF:{"5k":180,"10k":300,"15k":400,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Seats 8-14 depending on tier"},{code:"WINE",name:"Wine Room",abbrev:"Wine",zone:"Z1_APB",defaultLevel:1,baseSF:{"5k":null,"10k":100,"15k":150,"20k":200},basementEligible:!0,outdoorSpace:!1,tier:"10k+",notes:"Climate controlled; can move to basement. Not standard at 5K."},{code:"LIB",name:"Library",abbrev:"Library",zone:"Z1_APB",defaultLevel:1,baseSF:{"5k":null,"10k":200,"15k":280,"20k":350},basementEligible:!1,outdoorSpace:!1,tier:"10k+",notes:"Can double as quiet office. Not standard at 5K."},{code:"FR",name:"Family Room",abbrev:"Family",zone:"Z2_FAM",defaultLevel:1,baseSF:{"5k":300,"10k":500,"15k":650,"20k":800},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Daily living hub"},{code:"KIT",name:"Kitchen (Show)",abbrev:"Kitchen",zone:"Z2_FAM",defaultLevel:1,baseSF:{"5k":250,"10k":350,"15k":450,"20k":550},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Island-centric, open to family"},{code:"BKF",name:"Breakfast Nook",abbrev:"Breakfast",zone:"Z2_FAM",defaultLevel:1,baseSF:{"5k":80,"10k":120,"15k":180,"20k":220},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Casual daily meals"},{code:"SCUL",name:"Scullery / Pantry",abbrev:"Scullery",zone:"Z2_FAM",defaultLevel:1,baseSF:{"5k":100,"10k":180,"15k":250,"20k":320},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Prep, cleanup, storage"},{code:"CHEF",name:"Chef's Kitchen",abbrev:"Chef's",zone:"Z2_FAM",defaultLevel:1,baseSF:{"5k":null,"10k":150,"15k":200,"20k":280},basementEligible:!1,outdoorSpace:!1,tier:"10k+",notes:"Service kitchen for formal dining. Not standard at 5K."},{code:"MEDIA",name:"Media Room",abbrev:"Media",zone:"Z2_FAM",defaultLevel:1,baseSF:{"5k":180,"10k":250,"15k":350,"20k":450},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"Casual TV / movies; can move to basement. Optional at 5K."},{code:"PWD2",name:"Powder Room 2",abbrev:"Powder 2",zone:"Z2_FAM",defaultLevel:1,baseSF:{"5k":45,"10k":60,"15k":60,"20k":60},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Family zone powder room"},{code:"BAR",name:"Bar",abbrev:"Bar",zone:"Z3_ENT",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":150,"20k":200},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Built-in bar"},{code:"GAME",name:"Game Room",abbrev:"Game",zone:"Z3_ENT",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":400,"20k":550},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Cards, games, lounge"},{code:"THR",name:"Theater",abbrev:"Theater",zone:"Z3_ENT",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":400,"20k":550},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Dedicated cinema; basement ideal for sound"},{code:"MUS",name:"Music Room",abbrev:"Music",zone:"Z3_ENT",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":250,"20k":300},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Piano, instruments"},{code:"ART",name:"Art Studio",abbrev:"Art",zone:"Z3_ENT",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":null,"20k":300},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Creative workspace; needs natural light"},{code:"PWD3",name:"Powder Room 3",abbrev:"Powder 3",zone:"Z3_ENT",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":60,"20k":60},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Entertainment zone powder room"},{code:"GYM",name:"Fitness / Gym",abbrev:"Gym",zone:"Z4_WEL",defaultLevel:1,baseSF:{"5k":150,"10k":250,"15k":350,"20k":450},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"Requires daylight preferred. Small gym at 5K."},{code:"SPA",name:"Spa Suite",abbrev:"Spa",zone:"Z4_WEL",defaultLevel:1,baseSF:{"5k":null,"10k":180,"15k":250,"20k":350},basementEligible:!0,outdoorSpace:!1,tier:"10k+",notes:"Sauna, steam, shower. Not standard at 5K."},{code:"MAS",name:"Massage Room",abbrev:"Massage",zone:"Z4_WEL",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":150,"20k":180},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Treatment room"},{code:"PLH",name:"Pool House",abbrev:"Pool House",zone:"Z4_WEL",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":null,"20k":400},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Separate structure"},{code:"POOLSUP",name:"Pool Support",abbrev:"Pool Sup",zone:"Z4_WEL",defaultLevel:1,baseSF:{"5k":60,"10k":100,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Equipment, changing, bath"},{code:"PWD4",name:"Powder Room 4",abbrev:"Powder 4",zone:"Z4_WEL",defaultLevel:1,baseSF:{"5k":45,"10k":60,"15k":60,"20k":60},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Wellness zone powder room"},{code:"PRI",name:"Primary Bedroom",abbrev:"Primary Bed",zone:"Z5_PRI",defaultLevel:2,baseSF:{"5k":280,"10k":350,"15k":500,"20k":650},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Master bedroom"},{code:"PRIBATH",name:"Primary Bath",abbrev:"Primary Bath",zone:"Z5_PRI",defaultLevel:2,baseSF:{"5k":180,"10k":250,"15k":350,"20k":450},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Double vanity, wet room"},{code:"PRICL_HIS",name:"His Walk-in Closet",abbrev:"His Closet",zone:"Z5_PRI",defaultLevel:2,baseSF:{"5k":80,"10k":100,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Primary suite his dressing room",linkedTo:"PRICL_HER"},{code:"PRICL_HER",name:"Her Walk-in Closet",abbrev:"Her Closet",zone:"Z5_PRI",defaultLevel:2,baseSF:{"5k":80,"10k":100,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Primary suite her dressing room",linkedTo:"PRICL_HIS"},{code:"PRILNG",name:"Primary Lounge",abbrev:"Primary Lounge",zone:"Z5_PRI",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":200,"20k":280},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Sitting room"},{code:"POF",name:"Primary Office",abbrev:"Primary Office",zone:"Z5_PRI",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":null,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Private study within suite"},{code:"GST1",name:"Guest Suite 1",abbrev:"Guest 1",zone:"Z6_GST",defaultLevel:1,baseSF:{"5k":300,"10k":400,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Ground floor for accessibility"},{code:"GST2",name:"Guest Suite 2",abbrev:"Guest 2",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":280,"10k":400,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core"},{code:"GST3",name:"Guest Suite 3",abbrev:"Guest 3",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":280,"10k":null,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Available at 5K for high bedroom count, or 15K+"},{code:"GST4",name:"Guest Suite 4",abbrev:"Guest 4",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":null,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"20k+"},{code:"JRPRI",name:"Jr. Primary Bedroom",abbrev:"Jr. Primary",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":400,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"First/best guest suite - VIP or adult children"},{code:"JRPRIBATH",name:"Jr. Primary Bath",abbrev:"Jr. Primary Bath",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"En-suite for Jr. Primary"},{code:"JRPRICL",name:"Jr. Primary Walk-in",abbrev:"Jr. Primary Closet",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":80,"20k":100},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Single large walk-in for Jr. Primary"},{code:"BNK",name:"Bunk Room",abbrev:"Bunk",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":350,"20k":400},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Sleeps 4-6"},{code:"PLY",name:"Playroom",abbrev:"Playroom",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":300,"20k":400},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Kids activity room"},{code:"HWK",name:"Homework Loft",abbrev:"Homework",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":null,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Study area"},{code:"NNY",name:"Nanny Suite",abbrev:"Nanny",zone:"Z6_GST",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":350,"20k":400},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Childcare staff"},{code:"STF",name:"Staff Suite",abbrev:"Staff",zone:"Z6_GST",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":350,"20k":400},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Live-in staff. Not standard at 5K."},{code:"MUD",name:"Mudroom",abbrev:"Mudroom",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":100,"10k":150,"15k":200,"20k":280},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Daily entry, dog wash"},{code:"LND",name:"Laundry",abbrev:"Laundry",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":100,"10k":140,"15k":180,"20k":250},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Primary laundry"},{code:"LN2",name:"Laundry 2",abbrev:"Laundry 2",zone:"Z7_SVC",defaultLevel:2,baseSF:{"5k":null,"10k":null,"15k":80,"20k":120},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Upper floor laundry"},{code:"MEP",name:"Mechanical / IT",abbrev:"Mechanical",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":180,"10k":300,"15k":400,"20k":550},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"HVAC, electrical, IT closet"},{code:"STR",name:"Storage",abbrev:"Storage",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":120,"10k":200,"15k":300,"20k":400},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"General storage"},{code:"GAR",name:"Garage",abbrev:"Garage",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":450,"10k":600,"15k":900,"20k":1200},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"2/3/4/6 car depending on tier"},{code:"WRK",name:"Workshop",abbrev:"Workshop",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":150,"20k":250},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Hobby/tools"},{code:"SKT",name:"Staff Kitchen",abbrev:"Staff Kitchen",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":null,"20k":180},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Staff break area"},{code:"SLG",name:"Staff Lounge",abbrev:"Staff Lounge",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":null,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Staff rest area"},{code:"COR",name:"Stair / Elevator Core",abbrev:"Core",zone:"Z7_SVC",defaultLevel:1,baseSF:{"5k":200,"10k":300,"15k":400,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Vertical circulation; spans all levels"},{code:"TERR",name:"Main Terrace",abbrev:"Terrace",zone:"Z8_OUT",defaultLevel:1,baseSF:{"5k":500,"10k":800,"15k":1200,"20k":1800},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Outdoor living; not in conditioned total"},{code:"POOL",name:"Pool + Deck",abbrev:"Pool",zone:"Z8_OUT",defaultLevel:1,baseSF:{"5k":1e3,"10k":1500,"15k":2e3,"20k":2800},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Lap pool + surround; not in conditioned total"},{code:"OKT",name:"Outdoor Kitchen",abbrev:"Out Kitchen",zone:"Z8_OUT",defaultLevel:1,baseSF:{"5k":100,"10k":150,"15k":250,"20k":350},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Summer kitchen; not in conditioned total"},{code:"FPT",name:"Fire Pit Area",abbrev:"Fire Pit",zone:"Z8_OUT",defaultLevel:1,baseSF:{"5k":150,"10k":200,"15k":300,"20k":400},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Gathering area; not in conditioned total"},{code:"ODN",name:"Outdoor Dining",abbrev:"Out Dining",zone:"Z8_OUT",defaultLevel:1,baseSF:{"5k":150,"10k":250,"15k":350,"20k":500},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Al fresco dining; not in conditioned total"},{code:"CTY",name:"Courtyard",abbrev:"Courtyard",zone:"Z8_OUT",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":400,"20k":600},basementEligible:!1,outdoorSpace:!0,tier:"15k+",notes:"Interior court; not in conditioned total"},{code:"POOL_BATH",name:"Pool Bathroom",abbrev:"Pool Bath",zone:"Z8_OUT",defaultLevel:1,baseSF:{"5k":60,"10k":80,"15k":80,"20k":100},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Outdoor pool bathroom - separate from main house"},{code:"DRV",name:"Motor Court",abbrev:"Motor Court",zone:"Z8_OUT",defaultLevel:1,baseSF:{"5k":600,"10k":1e3,"15k":1500,"20k":2e3},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Arrival drive; not in conditioned total"},{code:"GH_GST1",name:"Guest House Suite 1",abbrev:"GH Suite 1",zone:"Z9_GH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Guest house bedroom with en-suite"},{code:"GH_GST2",name:"Guest House Suite 2",abbrev:"GH Suite 2",zone:"Z9_GH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Guest house bedroom with en-suite"},{code:"GH_GST3",name:"Guest House Suite 3",abbrev:"GH Suite 3",zone:"Z9_GH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":null,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"20k+",structure:"guestHouse",notes:"Guest house bedroom with en-suite"},{code:"GH_PWD",name:"Guest House Powder",abbrev:"GH Powder",zone:"Z9_GH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":50,"20k":60},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Guest house powder room"},{code:"GH_LIV",name:"Guest House Living",abbrev:"GH Living",zone:"Z9_GH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":350,"20k":450},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Guest house living room"},{code:"GH_KIT",name:"Guest House Kitchen",abbrev:"GH Kitchen",zone:"Z9_GH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":200,"20k":280},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Guest house kitchenette"},{code:"GH_DIN",name:"Guest House Dining",abbrev:"GH Dining",zone:"Z9_GH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Guest house dining area"},{code:"PH_SHW",name:"Pool House Shower",abbrev:"PH Shower",zone:"Z10_PH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":60,"20k":80},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Outdoor shower facility"},{code:"PH_CHG",name:"Pool House Changing",abbrev:"PH Changing",zone:"Z10_PH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":100,"20k":150},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Changing rooms"},{code:"PH_BATH",name:"Pool House Bath",abbrev:"PH Bath",zone:"Z10_PH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":60,"20k":80},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Pool house bathroom"},{code:"PH_ENT",name:"Pool House Entertainment",abbrev:"PH Entertainment",zone:"Z10_PH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":300,"20k":450},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Covered entertaining space"},{code:"PH_KIT",name:"Pool House Kitchen",abbrev:"PH Kitchen",zone:"Z10_PH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Pool house kitchenette"},{code:"PH_DIN",name:"Pool House Dining",abbrev:"PH Dining",zone:"Z10_PH",defaultLevel:1,baseSF:{"5k":null,"10k":null,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Pool house dining area"}];function Ph(e){return Ch.find(t=>t.code===e)}function Fh(e){return Ch.filter(t=>"core"===t.tier||("10k+"===t.tier&&("10k"===e||"15k"===e||"20k"===e)||("15k+"===t.tier&&("15k"===e||"20k"===e)||"20k+"===t.tier&&"20k"===e)))}function Ah(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const i=e.baseSF[t];if(null===i)return 0;const r=a/100;switch(n){case"S":return Math.round(i*(1-r));case"L":return Math.round(i*(1+r));default:return i}}function Lh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return"guestHouse"===e?_h.filter(e=>"Z9_GH"===e.code):"poolHouse"===e?_h.filter(e=>"Z10_PH"===e.code):_h.filter(e=>!e.structure)}const Mh="https://res.cloudinary.com/drhp5e0kl/image/upload",Rh={FOY_M:"FOY_M_xatei3",PWD_M:"PWD_M_z1syjl",OFF_M:"OFF_M_uvx9ci",GR_M:"GR_M_u47amm",DR_M:"DR_M_aojuh0",WINE_M:"WINE_M_btnxlc",LIB_M:"LIB_M_jmwsay",FR_M:"FR_M_jk6ujp",KIT_M:"KIT_M_bskgph",BKF_M:"BKF_M_w9udgb",SCUL_M:"SCUL_M_qpdfeb",CHEF_M:"CHEF_M_moztip",MEDIA_M:"MEDIA_M_zhc5vf",PWD2_M:"PWD_M_z1syjl",BAR_M:"BAR_M_iuexss",GAME_M:"GAME_M_vzu5lf",THR_M:"THR_M_bmf1vs",MUS_M:"MUS_M_a3ih8o",ART_M:"ART_M_bkopxz",PWD3_M:"PWD_M_z1syjl",GYM_M:"GYM_M_gvxtck",SPA_M:"SPA_M_xvpdst",MAS_M:"MAS_M_wehgk5",PLH_M:"PLH_M_wyyayn",POOLSUP_M:"POOLSUP_M_ihrxiz",PWD4_M:"PWD_M_z1syjl",PRI_M:"PRI_M_ka98yn",PRIBATH_M:"PRIBATH_M_hmsaqt",PRICL_HIS_M:"PRICL_M_s0wfmq",PRICL_HER_M:"PRICL_M_s0wfmq",PRILNG_M:"PRILNG_M_gfskim",POF_M:"POF_M_bgmist",JRPRI_M:"VIP_M_nr242n",JRPRIBATH_M:"PRIBATH_M_hmsaqt",JRPRICL_M:"PRICL_M_s0wfmq",GST1_M:"GST1_M_g7lhny",GST2_M:"GST2_M_wmagho",GST3_M:"GST3_M_yvbnl3",GST4_M:"GST4_M_s2zpd2",BNK_M:"BNK_M_tjjg7k",PLY_M:"PLY_M_bmf9kz",HWK_M:"HWK_M_guyo5i",NNY_M:"NNY_M_o7vr9y",STF_M:"STF_M_cjcliy",MUD_M:"MUD_M_ftf7l3",LND_M:"LND_M_xjlniy",LN2_M:"LN2_M_xn7rb9",MEP_M:"MEP_M_mutb57",STR_M:"STR_M_i22tsu",GAR_M:"GAR_M_piyvgz",WRK_M:"WRK_M_xmcshf",SKT_M:"SKT_M_gien1l",SLG_M:"SLG_M_znjt0g",COR_M:"COR_M_tugeyb",TERR_M:"TERR_M_gtjpaj",POOL_M:"POOL_M_jda5qd",OKT_M:"OKT_M_mitdyw",FPT_M:"FPT_M_ilx6g1",ODN_M:"ODN_M_juflbh",CTY_M:"CTY_M_pg9ila",POOL_BATH_M:"PWD_M_z1syjl",DRV_M:"DRV_M_yzmztf"};const Ih={"5k":{min:.11,max:.14,default:.12},"10k":{min:.12,max:.15,default:.13},"15k":{min:.13,max:.16,default:.14},"20k":{min:.14,max:.18,default:.15}};function Th(e,t,n,a,i){const r=Ih[i]||Ih["10k"];if(n){const n=t-e,a=Math.round(e*r.min),i=Math.round(e*r.max);return Math.max(a,Math.min(i,n))}return Math.round(e*a)}function zh(e){if(null===e||void 0===e||!e.selections||0===Object.keys(e.selections).length)return null;const t=e.settings||{},n=e.selections,a=t.programTier||"15k",i=t.deltaPct||10,r=t.targetSF||15e3,o=!1!==t.lockToTarget,s=t.circulationPct||.14,l=[],c={};let d=0;const u={main:{spaces:[],netSF:0,circulationSF:0,totalSF:0,byLevel:{},spaceCount:0},guestHouse:{spaces:[],netSF:0,totalSF:0,spaceCount:0},poolHouse:{spaces:[],netSF:0,totalSF:0,spaceCount:0}};Object.entries(n).forEach(e=>{var t;let[n,r]=e;if(!r.included)return;const o=Ph(n);if(!o)return void console.warn("[MVP Bridge] Unknown space code: ".concat(n," - skipping (not in registry)"));let s;s=r.customSF?r.customSF:Ah(o,a,r.size,i);const h=_h.find(e=>e.code===o.zone),p=(null===h||void 0===h?void 0:h.name)||o.zone,m=o.structure||"main",f=null!==(t=r.level)&&void 0!==t?t:o.defaultLevel,g={id:"fyi-".concat(n),code:n,name:o.name,targetSF:s,zone:o.zone,zoneName:p,level:f,size:r.size||"M",rationale:r.notes||"",kycSource:r.kycSource||null,isOutdoor:o.outdoorSpace||!1,acousticZone:o.acousticZone||null,structure:m};l.push(g),c[o.zone]||(c[o.zone]={code:o.zone,name:p,spaces:[],totalSF:0}),c[o.zone].spaces.push(g),c[o.zone].totalSF+=s,o.outdoorSpace?d+=s:u[m]&&(u[m].spaces.push(g),u[m].netSF+=s,u[m].spaceCount++,"main"===m&&(u.main.byLevel[f]=(u.main.byLevel[f]||0)+s))});const h=Th(u.main.netSF,r,o,s,a);u.main.circulationSF=h,u.main.totalSF=u.main.netSF+h,u.guestHouse.totalSF=u.guestHouse.netSF,u.poolHouse.totalSF=u.poolHouse.netSF;const p=u.main.netSF+u.guestHouse.netSF+u.poolHouse.netSF,m=h,f=u.main.totalSF+u.guestHouse.totalSF+u.poolHouse.totalSF,g=u.main.byLevel,v=u.main.netSF>0?(h/u.main.netSF*100).toFixed(1):"0.0";return{source:"FYI",timestamp:(new Date).toISOString(),settings:{programTier:a,targetSF:r,hasBasement:t.hasBasement||!1,circulationPct:s,lockToTarget:o,deltaPct:i},spaces:l,spacesByZone:c,byLevel:g,byStructure:u,totals:{spaceCount:l.length,mainNetSF:u.main.netSF,mainCirculationSF:h,mainTotalSF:u.main.totalSF,guestHouseSF:u.guestHouse.totalSF,poolHouseSF:u.poolHouse.totalSF,netSF:p,circulationSF:m,circulationPct:v,totalConditionedSF:f,outdoorSF:d,deltaFromTarget:f-r},presetHint:a}}function Dh(e){if(!e)return null;const{spaces:t,totals:n,settings:a,spacesByZone:i,byLevel:r,byStructure:o}=e,s=["PRI","JRPRI","GST1","GST2","GST3","GST4","BNK"],l=t.filter(e=>s.includes(e.code)).length,c=["GYM","SPA","MAS","PLH","POOL","POOLSUP"],d=t.filter(e=>c.includes(e.code)).length,u=["BAR","GAME","THR","MUS","MEDIA"],h=t.filter(e=>u.includes(e.code)).length,p=[];return p.push({name:"Main Residence",key:"main",netSF:n.mainNetSF,circulationSF:n.mainCirculationSF,totalSF:n.mainTotalSF,spaceCount:o.main.spaceCount,hasCirculation:!0,byLevel:r}),n.guestHouseSF>0&&p.push({name:"Guest House",key:"guestHouse",netSF:n.guestHouseSF,circulationSF:0,totalSF:n.guestHouseSF,spaceCount:o.guestHouse.spaceCount,hasCirculation:!1}),n.poolHouseSF>0&&p.push({name:"Pool House",key:"poolHouse",netSF:n.poolHouseSF,circulationSF:0,totalSF:n.poolHouseSF,spaceCount:o.poolHouse.spaceCount,hasCirculation:!1}),{programTier:a.programTier,targetSF:a.targetSF,structures:p,totals:{spaces:n.spaceCount,netSF:n.netSF,circulationSF:n.circulationSF,circulationPct:n.circulationPct,totalSF:n.totalConditionedSF,outdoorSF:n.outdoorSF,delta:n.deltaFromTarget,deltaPercent:(n.deltaFromTarget/a.targetSF*100).toFixed(1)},counts:{bedrooms:l,wellness:d,entertainment:h},zones:Object.values(i).map(e=>({name:e.name,spaceCount:e.spaces.length,totalSF:e.totalSF})),levels:Object.entries(r).map(e=>{let[t,n]=e;return{level:parseInt(t),label:"1"===t?"L1 (Arrival)":"L".concat(t),sf:n}}).sort((e,t)=>t.level-e.level)}}function Eh(e){return!(!e||0===e.length)&&e.some(e=>{const t=parseInt(e.age);if(!isNaN(t)&&t>=5&&t<=18)return!0;const n=e.role||"";return["child","teenager"].includes(n)})}function Oh(e){return e&&Array.isArray(e)?e.filter(e=>{const t=parseInt(e.age);if(!isNaN(t)&&t<18)return!0;const n=e.role||"";return["child","young-child","teenager"].includes(n)}).length:0}function Bh(e){return e.staffingLevel?e.staffingLevel:e.liveInStaff&&e.liveInStaff>0||e.staffAccommodationRequired?"live_in":"none"}function qh(e){if(!e||0===e.length)return"none";const t=["pool","spa","cold-plunge"].filter(t=>e.includes(t)),n=e.length;return t.length>=2&&n>=4?"resort_level":t.length>=1&&n>=3?"comprehensive":n>=1?"basic":"none"}function Hh(e){const t=e.mustHaveOutdoorLiving||[],n=e.wouldLikeOutdoorLiving||[];return["outdoor-kitchen","outdoor-dining","bar-lounge","event-lawn","covered-outdoor","pergola-pavilion"].some(e=>t.includes(e)||n.includes(e))}function Gh(e){const t=e.wfhPeopleCount||0,n=e.workFromHome||"";return"never"===n||""===n?0:t>=2?2:1===t||"never"!==n?1:0}function Wh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"principal";const n=e[t];if(!n)return console.warn("No KYC data found for respondent: ".concat(t)),null;const{projectParameters:a={},familyHousehold:i={},lifestyleLiving:r={},spaceRequirements:o={}}=n;return{sfCapConstraint:a.sfCapConstraint||null,hasBasement:a.hasBasement||!1,levelsAboveGrade:a.floors||2,totalBedroomCount:a.bedroomCount||0,guestBedroomCount:(c=a.bedroomCount,!c||c<1?3:Math.max(0,c-1)),hasChildren:(l=i.familyMembers,!(!l||0===l.length)&&l.some(e=>{const t=parseInt(e.age);if(!isNaN(t)&&t<18)return!0;const n=e.role||"";return["child","young-child","teenager"].includes(n)})),childrenCount:Oh(i.familyMembers),hasSchoolAgeChildren:Eh(i.familyMembers),hasPets:!(!i.pets||!i.pets.trim()),petsDescription:i.pets||"",staffingLevel:Bh(i),entertainingLoad:(s=r.entertainingFrequency,{rarely:"rare",monthly:"monthly",weekly:"weekly",daily:"weekly"}[s]||"rare"),formalEntertainingRequired:"formal"===r.entertainingStyle||"both"===r.entertainingStyle,professionalChefAccess:(o.mustHaveSpaces||[]).includes("catering-kitchen")||(o.mustHaveSpaces||[]).includes("chef-kitchen"),workFromHomeRequired:"never"!==r.workFromHome&&""!==r.workFromHome,homeOfficeCount:Gh(r),wantsSecondOffice:Gh(r)>=2,wantsPetGroomingRoom:i.petGroomingRoom||!1,wantsDogRun:i.petDogRun||!1,wellnessProgram:qh(r.wellnessPriorities),wantsGym:(r.wellnessPriorities||[]).includes("gym")||(r.wellnessPriorities||[]).includes("fitness")||(o.mustHaveSpaces||[]).includes("gym"),wantsSpa:(r.wellnessPriorities||[]).includes("spa")||(r.wellnessPriorities||[]).includes("sauna")||(o.mustHaveSpaces||[]).includes("spa-wellness")||(o.mustHaveSpaces||[]).includes("sauna")||(o.mustHaveSpaces||[]).includes("steam-room"),wantsPool:(r.wellnessPriorities||[]).includes("pool")||(o.mustHaveSpaces||[]).includes("pool-indoor")||(o.mustHavePoolWater||[]).includes("swimming-pool"),wantsWineRoom:(o.mustHaveSpaces||[]).includes("wine-cellar")||(r.hobbies||[]).includes("wine"),wantsMediaRoom:(o.mustHaveSpaces||[]).includes("media-room"),lateNightMediaUse:r.lateNightMediaUse||!1,wantsLibrary:(o.mustHaveSpaces||[]).includes("library")||(r.hobbies||[]).includes("reading"),wantsSeparateFamilyRoom:o.wantsSeparateFamilyRoom||!1,wantsSecondFormalLiving:o.wantsSecondFormalLiving||!1,wantsGameRoom:(o.mustHaveSpaces||[]).includes("game-room"),wantsBar:o.wantsBar||!1,wantsBunkRoom:o.wantsBunkRoom||!1,wantsBreakfastNook:o.wantsBreakfastNook||!1,wantsOutdoorEntertaining:Hh(o)};var s,l,c}function Uh(e){return e?{propertyConfig:{sfCap:e.sfCapConstraint?"".concat(e.sfCapConstraint.toLocaleString()," SF"):"Discovery Mode",basement:e.hasBasement?"Yes":"No",levels:e.levelsAboveGrade},household:{totalBedrooms:e.totalBedroomCount,guestBedrooms:e.guestBedroomCount,hasChildren:e.hasChildren,childrenCount:e.childrenCount,hasSchoolAge:e.hasSchoolAgeChildren,hasPets:e.hasPets,petsDescription:e.petsDescription,staffing:e.staffingLevel},lifestyle:{entertaining:e.entertainingLoad,formalEntertaining:e.formalEntertainingRequired,workFromHome:e.workFromHomeRequired,homeOfficeCount:e.homeOfficeCount,wantsSecondOffice:e.wantsSecondOffice,lateNightMedia:e.lateNightMediaUse},wellness:{program:e.wellnessProgram,gym:e.wantsGym,spa:e.wantsSpa,pool:e.wantsPool},amenities:{wine:e.wantsWineRoom,media:e.wantsMediaRoom,library:e.wantsLibrary,familyRoom:e.wantsSeparateFamilyRoom,salon:e.wantsSecondFormalLiving,gameRoom:e.wantsGameRoom,bar:e.wantsBar,bunkRoom:e.wantsBunkRoom,breakfastNook:e.wantsBreakfastNook,outdoorEntertaining:e.wantsOutdoorEntertaining,petGroomingRoom:e.wantsPetGroomingRoom,dogRun:e.wantsDogRun}}:null}function Kh(e){if(!e)return 0;return[e.wantsWineRoom,e.wantsMediaRoom,e.wantsLibrary,e.wantsSeparateFamilyRoom,e.wantsSecondFormalLiving,e.wantsGameRoom,e.wantsBar,e.wantsBunkRoom,e.wantsBreakfastNook,e.wantsGym,e.wantsSpa,e.wantsPool,e.wantsOutdoorEntertaining,e.professionalChefAccess,e.formalEntertainingRequired].filter(Boolean).length}const Vh=e=>{let{fyiProgram:t,fyiSummary:n}=e;const[i,r]=(0,a.useState)(!1);if(!t||!n)return null;const o=n.totals.delta>0?"text-amber-600":n.totals.delta<-500?"text-red-600":"text-green-600";return(0,T.jsxs)("div",{className:"mvp-card mvp-card--full mvp-card--fyi",children:[(0,T.jsxs)("div",{className:"mvp-card__header",children:[(0,T.jsx)(Y,{size:20,className:"mvp-card__icon"}),(0,T.jsx)("h3",{className:"mvp-card__title",children:"FYI Space Program"}),(0,T.jsxs)("span",{className:"mvp-card__status mvp-card__status--live",children:[(0,T.jsx)(Ir,{size:12,className:"animate-spin-slow"}),"LIVE"]})]}),(0,T.jsxs)("div",{className:"mvp-card__content",children:[(0,T.jsx)("div",{className:"fyi-structures",children:n.structures.map((e,t)=>(0,T.jsxs)("div",{className:"fyi-structure ".concat(0===t?"fyi-structure--main":""),children:[(0,T.jsxs)("div",{className:"fyi-structure__header",children:[(0,T.jsx)("span",{className:"fyi-structure__name",children:e.name}),(0,T.jsxs)("span",{className:"fyi-structure__total",children:[e.totalSF.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"fyi-structure__details",children:[(0,T.jsxs)("div",{className:"fyi-structure__row",children:[(0,T.jsx)("span",{children:"Net Program"}),(0,T.jsxs)("span",{children:[e.netSF.toLocaleString()," SF"]})]}),e.hasCirculation&&(0,T.jsxs)("div",{className:"fyi-structure__row fyi-structure__row--indent",children:[(0,T.jsxs)("span",{children:["Circulation (",n.totals.circulationPct,"%)"]}),(0,T.jsxs)("span",{children:[e.circulationSF.toLocaleString()," SF"]})]}),e.byLevel&&Object.keys(e.byLevel).length>0&&(0,T.jsxs)("div",{className:"fyi-structure__levels",children:[(0,T.jsx)("div",{className:"fyi-structure__levels-label",children:"BY LEVEL"}),Object.entries(e.byLevel).sort((e,t)=>{let[n]=e,[a]=t;return parseInt(a)-parseInt(n)}).map(e=>{let[t,n]=e;return(0,T.jsxs)("div",{className:"fyi-structure__row fyi-structure__row--level",children:[(0,T.jsx)("span",{children:"1"===t?"L1 (Arrival)":"L".concat(t)}),(0,T.jsxs)("span",{children:[n.toLocaleString()," SF"]})]},t)})]})]})]},e.key))}),(0,T.jsxs)("div",{className:"fyi-grand-total",children:[(0,T.jsxs)("div",{className:"fyi-grand-total__row fyi-grand-total__row--main",children:[(0,T.jsx)("span",{children:"Grand Total"}),(0,T.jsxs)("span",{children:[n.totals.totalSF.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"fyi-grand-total__row fyi-grand-total__row--delta ".concat(o),children:[(0,T.jsx)("span",{children:"Delta from Target"}),(0,T.jsxs)("span",{children:[n.totals.delta>0?"+":"",n.totals.delta.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"fyi-grand-total__row fyi-grand-total__row--outdoor",children:[(0,T.jsx)("span",{children:"Outdoor (not conditioned)"}),(0,T.jsxs)("span",{children:[n.totals.outdoorSF.toLocaleString()," SF"]})]})]}),(0,T.jsxs)("div",{className:"fyi-program-counts",children:[(0,T.jsxs)("span",{className:"fyi-count-chip",children:[(0,T.jsx)("strong",{children:n.counts.bedrooms})," Bedrooms"]}),(0,T.jsxs)("span",{className:"fyi-count-chip",children:[(0,T.jsx)("strong",{children:n.counts.wellness})," Wellness"]}),(0,T.jsxs)("span",{className:"fyi-count-chip",children:[(0,T.jsx)("strong",{children:n.counts.entertainment})," Entertainment"]})]}),(0,T.jsxs)("button",{className:"n4s-btn n4s-btn--secondary",onClick:()=>r(!i),style:{marginTop:"12px"},children:[i?"Hide":"Show"," Zone Details (",n.zones.length," zones)"]}),i&&(0,T.jsx)("div",{className:"fyi-program-zones",children:n.zones.map(e=>(0,T.jsxs)("div",{className:"fyi-zone-row",children:[(0,T.jsx)("span",{className:"fyi-zone-name",children:e.name}),(0,T.jsxs)("span",{className:"fyi-zone-count",children:[e.spaceCount," spaces"]}),(0,T.jsxs)("span",{className:"fyi-zone-sf",children:[e.totalSF.toLocaleString()," SF"]})]},e.name))})]})]})},Yh=e=>{var t,n,i,r,o,s;let{onNavigate:l,showDocs:c,onCloseDocs:d}=e;const{kycData:p,fyiData:f,activeRespondent:g,updateMVPChecklistItem:v,hasUnsavedChanges:y,saveNow:b,isSaving:x,lastSaved:S}=W(),[j,w]=(0,a.useState)(!1),[k,_]=(0,a.useState)("overview"),C=(0,a.useMemo)(()=>(null===f||void 0===f?void 0:f.mvpChecklistState)||{},[null===f||void 0===f?void 0:f.mvpChecklistState]),P=(e,t)=>{v(e,t)},F=(0,a.useMemo)(()=>{var e,t;const n=(null===p||void 0===p||null===(e=p.principal)||void 0===e||null===(t=e.projectParameters)||void 0===t?void 0:t.targetGSF)>0,a=(null===f||void 0===f?void 0:f.selections)&&Object.keys(f.selections).length>0;return{A:n?"complete":"current",B:a?"complete":n?"current":"locked",C:Object.values(C).filter(Boolean).length>0||a?"current":"locked",D:"locked",E:"locked"}},[p,f,C]),L=(null===(t=p[g])||void 0===t?void 0:t.designIdentity)||{},R=L.clientBaseName||"",I=L.clientType||"individual",z=R?"".concat(R,"-P"):null,D="couple"===I&&R?"".concat(R,"-S"):null,E=(null===p||void 0===p||null===(n=p.principal)||void 0===n?void 0:n.designIdentity)||{},O=(0,a.useMemo)(()=>{const e=E.principalTasteResults;return e&&e.selections?{clientId:e.clientId||z,session:e,selections:e.selections,profile:e.profile,completedAt:e.completedAt}:null},[E.principalTasteResults,z]),B=(0,a.useMemo)(()=>{const e=E.secondaryTasteResults;return e&&e.selections?{clientId:e.clientId||D,session:e,selections:e.selections,profile:e.profile,completedAt:e.completedAt}:null},[E.secondaryTasteResults,D]),q=(0,a.useMemo)(()=>zh(f),[f]),H=(0,a.useMemo)(()=>Dh(q),[q]),G=!!q,U=(0,a.useMemo)(()=>Wh(p,g),[p,g]),K=(0,a.useMemo)(()=>Uh(U),[U]),V=(0,a.useMemo)(()=>Kh(U),[U]),Z=(0,a.useMemo)(()=>{var e;if(G&&null!==q&&void 0!==q&&null!==(e=q.settings)&&void 0!==e&&e.programTier){const e=q.settings.programTier;if("20k"===e)return{tier:"20K",label:"Estate (20,000 SF)",color:"gold"};if("15k"===e)return{tier:"15K",label:"Grand (15,000 SF)",color:"teal"};if("10k"===e)return{tier:"10K",label:"Signature (10,000 SF)",color:"blue"}}return V>=12?{tier:"20K+",label:"Estate (20,000+ SF)",color:"gold"}:V>=8?{tier:"15K",label:"Grand (15,000 SF)",color:"teal"}:V>=4?{tier:"10K",label:"Signature (10,000 SF)",color:"blue"}:{tier:"Custom",label:"Custom Compact",color:"gray"}},[G,q,V]),$=R||"project-001",Q=(null===(i=p[g])||void 0===i||null===(r=i.projectParameters)||void 0===r?void 0:r.projectName)||"New Project";if("modules"===k)return(0,T.jsx)(nu,{onBack:()=>_("overview"),onProceedToValidation:()=>_("personalization"),gateStatus:F,checklistState:C,onChecklistChange:P,hasUnsavedChanges:y,isSaving:x,onSave:b});if("personalization"===k)return(0,T.jsx)(Qd,{kycData:p,mvpData:U,fyiProgram:q,tasteProfile:O,projectId:$,projectName:Q,onBack:()=>_("overview"),onGoToKYC:()=>l&&l("kyc"),onComplete:e=>{console.log("Personalization result:",e),_("overview")},onViewDiagram:()=>{_("builder")}});if("program"===k)return(0,T.jsx)(rh,{onBack:()=>_("overview")});if("comparison"===k)return(0,T.jsx)(uu,{onBack:()=>_("overview"),onRunValidation:()=>_("validation")});if("validation"===k)return(0,T.jsx)(Au,{onBack:()=>_("overview"),onViewMatrix:()=>_("comparison"),onEditDecisions:()=>_("personalization")});if("admin"===k)return(0,T.jsx)(Hu,{onBack:()=>_("overview")});if(c)return(0,T.jsx)(Nh,{onClose:d});if(!U)return(0,T.jsx)("div",{className:"mvp-module",children:(0,T.jsxs)("div",{className:"mvp-module__empty",children:[(0,T.jsx)(m,{size:48,className:"mvp-module__empty-icon"}),(0,T.jsx)("h2",{children:"No KYC Data Available"}),(0,T.jsx)("p",{children:"Complete the KYC module first to generate your MVP brief."})]})});const J=e=>{let{active:t,label:n}=e;return(0,T.jsxs)("span",{className:"status-badge ".concat(t?"status-badge--active":"status-badge--inactive"),children:[t?(0,T.jsx)(N,{size:14}):(0,T.jsx)(Tr,{size:14}),n]})},X=e=>{let{title:t,icon:n,children:a,status:i,fullWidth:r}=e;return(0,T.jsxs)("div",{className:"mvp-card ".concat(r?"mvp-card--full":""),children:[(0,T.jsxs)("div",{className:"mvp-card__header",children:[(0,T.jsx)(n,{size:20,className:"mvp-card__icon"}),(0,T.jsx)("h3",{className:"mvp-card__title",children:t}),i&&(0,T.jsx)("span",{className:"mvp-card__status mvp-card__status--".concat(i),children:i})]}),(0,T.jsx)("div",{className:"mvp-card__content",children:a})]})};return(0,T.jsxs)("div",{className:"mvp-module",children:[(0,T.jsxs)("div",{className:"mvp-module__header",children:[(0,T.jsxs)("div",{className:"mvp-module__title-group",children:[(0,T.jsxs)("h1",{className:"mvp-module__title",children:[(0,T.jsx)(m,{size:28}),"Mansion Validation Program"]}),(0,T.jsx)("p",{className:"mvp-module__subtitle",children:G?(0,T.jsxs)(T.Fragment,{children:["Space program from FYI \u2022 ",(0,T.jsx)("span",{className:"text-green-600 font-medium",children:"LIVE"})]}):(0,T.jsxs)(T.Fragment,{children:["Area program derived from KYC inputs \u2022 ",g.charAt(0).toUpperCase()+g.slice(1)," respondent"]})})]}),(0,T.jsxs)("div",{className:"mvp-module__save-area",children:[(0,T.jsx)("button",{className:"n4s-btn ".concat(y?"n4s-btn--primary":"n4s-btn--secondary"),onClick:b,disabled:x||!y,children:x?"Saving...":y?"Save Changes":"Saved"}),S&&!y&&(0,T.jsxs)("span",{className:"mvp-module__save-time",children:["Last saved: ",new Date(S).toLocaleTimeString()]})]}),(0,T.jsxs)("div",{className:"mvp-tier-badge mvp-tier-badge--".concat(Z.color),children:[(0,T.jsx)("span",{className:"mvp-tier-badge__tier",children:Z.tier}),(0,T.jsx)("span",{className:"mvp-tier-badge__label",children:Z.label})]})]}),G?(0,T.jsx)(Vh,{fyiProgram:q,fyiSummary:H}):(0,T.jsxs)("div",{className:"mvp-card mvp-card--full mvp-card--fyi-empty",children:[(0,T.jsxs)("div",{className:"mvp-card__header",children:[(0,T.jsx)(Y,{size:20,className:"mvp-card__icon"}),(0,T.jsx)("h3",{className:"mvp-card__title",children:"Space Program"}),(0,T.jsx)("span",{className:"mvp-card__status mvp-card__status--pending",children:"Not Started"})]}),(0,T.jsx)("div",{className:"mvp-card__content",children:(0,T.jsxs)("div",{className:"fyi-empty-prompt",children:[(0,T.jsx)("p",{children:"Complete the FYI module to confirm your space program."}),(0,T.jsx)("p",{className:"fyi-empty-hint",children:"The space program will appear here with LIVE updates as you make selections in FYI."})]})})]}),(0,T.jsxs)("div",{className:"mvp-stats-row",children:[(0,T.jsxs)("div",{className:"mvp-stat",children:[(0,T.jsx)("span",{className:"mvp-stat__value",children:G?H.counts.bedrooms:(null===K||void 0===K?void 0:K.household.totalBedrooms)||0}),(0,T.jsx)("span",{className:"mvp-stat__label",children:"Bedrooms"})]}),(0,T.jsxs)("div",{className:"mvp-stat",children:[(0,T.jsx)("span",{className:"mvp-stat__value",children:G?H.totals.spaces:(null===K||void 0===K?void 0:K.household.guestBedrooms)||0}),(0,T.jsx)("span",{className:"mvp-stat__label",children:G?"Total Spaces":"Guest Suites"})]}),(0,T.jsxs)("div",{className:"mvp-stat",children:[(0,T.jsx)("span",{className:"mvp-stat__value",children:G?H.counts.wellness:V}),(0,T.jsx)("span",{className:"mvp-stat__label",children:G?"Wellness":"Amenities"})]}),(0,T.jsxs)("div",{className:"mvp-stat",children:[(0,T.jsx)("span",{className:"mvp-stat__value",children:(null===K||void 0===K?void 0:K.propertyConfig.levels)||2}),(0,T.jsx)("span",{className:"mvp-stat__label",children:"Levels"})]}),(0,T.jsxs)("div",{className:"mvp-stat",children:[(0,T.jsx)("span",{className:"mvp-stat__value",children:"Yes"===(null===K||void 0===K?void 0:K.propertyConfig.basement)?"+B":"\u2014"}),(0,T.jsx)("span",{className:"mvp-stat__label",children:"Basement"})]})]}),(0,T.jsxs)("div",{className:"mvp-grid",children:[(0,T.jsx)(X,{title:"Property Configuration",icon:zr,children:(0,T.jsxs)("div",{className:"mvp-field-list",children:[(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"SF Constraint"}),(0,T.jsx)("span",{className:"mvp-field__value",children:null===K||void 0===K?void 0:K.propertyConfig.sfCap})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Basement"}),(0,T.jsx)("span",{className:"mvp-field__value",children:null===K||void 0===K?void 0:K.propertyConfig.basement})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Levels"}),(0,T.jsx)("span",{className:"mvp-field__value",children:null===K||void 0===K?void 0:K.propertyConfig.levels})]})]})}),(0,T.jsx)(X,{title:"Household Composition",icon:h,children:(0,T.jsxs)("div",{className:"mvp-field-list",children:[(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Bedrooms"}),(0,T.jsxs)("span",{className:"mvp-field__value",children:[null===K||void 0===K?void 0:K.household.totalBedrooms," total (",null===K||void 0===K?void 0:K.household.guestBedrooms," guest)"]})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Children"}),(0,T.jsx)("span",{className:"mvp-field__value",children:(null===K||void 0===K?void 0:K.household.childrenCount)>0?K.household.childrenCount:"None"})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"School-Age"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.household.hasSchoolAge,label:null!==K&&void 0!==K&&K.household.hasSchoolAge?"Yes":"No"})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Pets"}),null!==K&&void 0!==K&&K.household.hasPets?(0,T.jsx)("span",{className:"mvp-field__value mvp-field__value--small",children:null===K||void 0===K?void 0:K.household.petsDescription}):(0,T.jsx)(J,{active:!1,label:"None"})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Staffing"}),(0,T.jsx)("span",{className:"mvp-field__value mvp-field__value--small",children:((null===K||void 0===K?void 0:K.household.staffing)||"none").replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())})]})]})}),(0,T.jsx)(X,{title:"Lifestyle",icon:u,children:(0,T.jsxs)("div",{className:"mvp-field-list",children:[(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Entertaining"}),(0,T.jsx)("span",{className:"mvp-field__value",children:(null===K||void 0===K?void 0:K.lifestyle.entertaining)||"Rare"})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Formal Dining"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.lifestyle.formalEntertaining,label:null!==K&&void 0!==K&&K.lifestyle.formalEntertaining?"Required":"Optional"})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Work From Home"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.lifestyle.workFromHome,label:null!==K&&void 0!==K&&K.lifestyle.workFromHome?"Yes":"No"})]}),(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Late Night Media"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.lifestyle.lateNightMedia,label:null!==K&&void 0!==K&&K.lifestyle.lateNightMedia?"Yes":"No"})]})]})}),(0,T.jsxs)(X,{title:"Wellness Program",icon:Dr,children:[(0,T.jsx)("div",{className:"mvp-field-list",children:(0,T.jsxs)("div",{className:"mvp-field",children:[(0,T.jsx)("span",{className:"mvp-field__label",children:"Program Tier"}),(0,T.jsx)("span",{className:"mvp-field__value mvp-field__value--highlight",children:(null===K||void 0===K?void 0:K.wellness.program)||"None"})]})}),(0,T.jsxs)("div",{className:"mvp-badge-row",children:[(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.wellness.gym,label:"Gym"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.wellness.spa,label:"Spa"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.wellness.pool,label:"Pool"})]})]}),(0,T.jsxs)("div",{className:"mvp-card mvp-card--full",children:[(0,T.jsxs)("div",{className:"mvp-card__header",children:[(0,T.jsx)(Er,{size:20,className:"mvp-card__icon"}),(0,T.jsx)("h3",{className:"mvp-card__title",children:"Selected Amenities"}),(0,T.jsxs)("span",{className:"mvp-card__count",children:[V," selected"]})]}),(0,T.jsx)("div",{className:"mvp-card__content",children:(0,T.jsxs)("div",{className:"mvp-amenity-grid",children:[(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.wine,label:"Wine Room"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.media,label:"Media Room"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.library,label:"Library"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.familyRoom,label:"Family Room"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.salon,label:"Salon"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.gameRoom,label:"Game Room"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.bar,label:"Bar"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.bunkRoom,label:"Bunk Room"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.breakfastNook,label:"Breakfast Nook"}),(0,T.jsx)(J,{active:null===K||void 0===K?void 0:K.amenities.outdoorEntertaining,label:"Outdoor Entertaining"})]})})]})]}),(0,T.jsxs)("div",{className:"mvp-debug",children:[(0,T.jsxs)("button",{className:"n4s-btn n4s-btn--ghost",onClick:()=>w(!j),children:[j?"Hide":"Show"," Raw Data"]}),j&&(0,T.jsx)("pre",{className:"mvp-debug__code",children:JSON.stringify({dataSource:G?"FYI (LIVE)":"KYC (derived)",fyiProgram:q?{source:q.source,timestamp:q.timestamp,spaceCount:null===(o=q.totals)||void 0===o?void 0:o.spaceCount,totalSF:null===(s=q.totals)||void 0===s?void 0:s.totalConditionedSF}:null,briefInputs:U,tasteProfileP:O?{clientId:O.clientId,completedAt:O.completedAt,profile:O.profile}:null,tasteProfileS:B?{clientId:B.clientId,completedAt:B.completedAt,profile:B.profile}:null},null,2)})]}),(0,T.jsxs)("div",{className:"mvp-next-steps",children:[(0,T.jsxs)("h3",{children:[(0,T.jsx)(A,{size:20}),"MVP P1-M Workflow"]}),(0,T.jsx)("p",{children:"Answer layout questions, review the adjacency matrix comparison, run validation, then generate your brief."}),(0,T.jsxs)("div",{className:"mvp-next-steps__buttons",children:[(0,T.jsxs)("button",{onClick:()=>_("modules"),className:"n4s-btn n4s-btn--secondary",children:[(0,T.jsx)(Or,{}),"Module Library"]}),(0,T.jsxs)("button",{onClick:()=>_("personalization"),className:"n4s-btn n4s-btn--primary",children:[(0,T.jsx)(Br,{}),"Answer Layout Questions"]}),(0,T.jsxs)("button",{onClick:()=>_("comparison"),className:"n4s-btn n4s-btn--secondary",children:[(0,T.jsx)(M,{}),"View Adjacency Matrix"]}),(0,T.jsxs)("button",{onClick:()=>_("validation"),className:"n4s-btn n4s-btn--secondary",children:[(0,T.jsx)(qr,{}),"Run Validation"]}),(0,T.jsxs)("button",{onClick:()=>_("program"),className:"n4s-btn n4s-btn--secondary",children:[(0,T.jsx)(Hr,{}),"Program Summary"]}),(0,T.jsxs)("button",{onClick:()=>_("admin"),className:"n4s-btn n4s-btn--ghost",children:[(0,T.jsx)(Gr,{}),"Tier Data Admin"]})]})]})]})},Zh={targetSF:1e4,deltaPct:10,circulationPct:.13,lockToTarget:!0,programTier:"10k",hasBasement:!1},$h=function(e){const t=Fh(e),n={};return t.forEach(t=>{null!==t.baseSF[e]&&(n[t.code]={included:!0,size:"M",level:t.defaultLevel,customSF:null,imageUrl:null,notes:""})}),n};function Qh(e){return{"5k":.12,"10k":.13,"15k":.14,"20k":.15}[e]||.13}const Jh=function(e,t,n,i){const r=(null===e||void 0===e?void 0:e.settings)||Zh,o=(0,a.useMemo)(()=>(null===e||void 0===e?void 0:e.selections)||{},[null===e||void 0===e?void 0:e.selections]),[l,c]=(0,a.useState)("Z1_APB"),d=Object.keys(o).length>0,u=(0,a.useCallback)((e,n)=>{t&&t(e,n)},[t]),h=(0,a.useCallback)(e=>{const n=o[e];t&&t(e,{included:!(null!==n&&void 0!==n&&n.included)})},[o,t]),p=(0,a.useCallback)((e,n)=>{t&&t(e,{size:n})},[t]),m=(0,a.useCallback)((e,n)=>{t&&t(e,{level:n})},[t]),f=(0,a.useCallback)(e=>{n&&n(e)},[n]),g=(0,a.useCallback)(()=>{if(n&&n(Zh),i){const e=$h(Zh.programTier,Zh.hasBasement);i(e)}c("Z1_APB")},[n,i]),v=(0,a.useCallback)(e=>{var t,a;const r=(null===e||void 0===e||null===(t=e.projectParameters)||void 0===t?void 0:t.targetGSF)||1e4,o=(null===e||void 0===e||null===(a=e.projectParameters)||void 0===a?void 0:a.hasBasement)||!1,s=function(e){return e<7500?"5k":e<12500?"10k":e<17500?"15k":"20k"}(r);if(n&&n({targetSF:r,hasBasement:o,programTier:s,circulationPct:Qh(s)}),i){const e=$h(s,o);i(e)}},[n,i]),y=(0,a.useCallback)(e=>o[e]||{included:!1,size:"M",level:1},[o]),b=(0,a.useCallback)(e=>{const t=Ph(e),n=o[e];return t&&n&&n.included?n.customSF?n.customSF:Ah(t,r.programTier,n.size,r.deltaPct):0},[o,r.programTier,r.deltaPct]),x=(0,a.useCallback)(e=>Ch.filter(t=>t.zone===e&&null!==t.baseSF[r.programTier]),[r.programTier]),S=(0,a.useMemo)(()=>{const e=Ch.filter(e=>!e.outdoorSpace);let t=0;const n={},a={};e.forEach(e=>{const i=o[e.code];if(null!==i&&void 0!==i&&i.included){const r=b(e.code);t+=r,n[e.zone]||(n[e.zone]=0),n[e.zone]+=r;const o=i.level||e.defaultLevel;a[o]=(a[o]||0)+r}});const i=Th(t,r.targetSF,r.lockToTarget,r.circulationPct,r.programTier),s=t>0?i/t*100:0,l=t+i,c=l-r.targetSF;let d=0;return Ch.filter(e=>e.outdoorSpace).forEach(e=>{const t=o[e.code];null!==t&&void 0!==t&&t.included&&(d+=b(e.code))}),{net:t,circulation:i,circulationPct:s.toFixed(1),total:l,deltaFromTarget:c,byZone:n,byLevel:a,outdoorTotal:d,targetSF:r.targetSF}},[o,r,b]),j=(0,a.useMemo)(()=>{const e={main:{enabled:!0,net:0,circulation:0,total:0,byLevel:{},spaceCount:0,circulationPct:0},guestHouse:{enabled:!1,net:0,total:0,spaceCount:0},poolHouse:{enabled:!1,net:0,total:0,spaceCount:0}};Ch.forEach(t=>{const n=o[t.code];if(null===n||void 0===n||!n.included)return;if(t.outdoorSpace)return;const a=b(t.code),i=t.structure||"main";if("main"===i){e.main.net+=a,e.main.spaceCount++;const i=n.level||t.defaultLevel;e.main.byLevel[i]=(e.main.byLevel[i]||0)+a}else"guestHouse"===i?(e.guestHouse.enabled=!0,e.guestHouse.net+=a,e.guestHouse.total+=a,e.guestHouse.spaceCount++):"poolHouse"===i&&(e.poolHouse.enabled=!0,e.poolHouse.net+=a,e.poolHouse.total+=a,e.poolHouse.spaceCount++)});const t=Th(e.main.net,r.targetSF,r.lockToTarget,r.circulationPct,r.programTier);return e.main.circulation=t,e.main.total=e.main.net+t,e.main.circulationPct=e.main.net>0?(t/e.main.net*100).toFixed(0):0,e},[o,r,b]),w=(0,a.useMemo)(()=>[..._h].sort((e,t)=>e.order-t.order).map(e=>{const t=x(e.code),n=t.filter(e=>{var t;return null===(t=o[e.code])||void 0===t?void 0:t.included}).length,a=t.reduce((e,t)=>{var n;return null!==(n=o[t.code])&&void 0!==n&&n.included?e+b(t.code):e},0);return s(s({},e),{},{spaceCount:t.length,includedCount:n,totalSF:a})}),[x,o,b]),N=(0,a.useCallback)(()=>{const e=[];return Object.entries(o).forEach(t=>{let[n,a]=t;if(a.included){const t=Ph(n);t&&e.push({code:n,name:t.name,zone:t.zone,targetSF:b(n),level:a.level||t.defaultLevel,size:a.size,notes:a.notes})}}),{settings:{targetSF:r.targetSF,programTier:r.programTier,hasBasement:r.hasBasement,circulationPct:parseFloat(S.circulationPct)/100},spaces:e,totals:{net:S.net,circulation:S.circulation,total:S.total}}},[o,r,S,b]);return{settings:r,selections:o,activeZone:l,setActiveZone:c,isLoaded:!0,hasSelections:d,totals:S,zonesWithCounts:w,structureTotals:j,updateSettings:f,updateSpaceSelection:u,toggleSpaceIncluded:h,setSpaceSize:p,setSpaceLevel:m,resetToDefaults:g,applyKYCDefaults:v,getSpaceSelection:y,getSpacesForZone:x,calculateArea:b,generateMVPBrief:N}};function Xh(e){const{settings:t,spaces:n,totals:a}=e,i=n.map((e,t)=>{const n=Ph(e.code),a=_h.find(t=>t.code===e.zone);return{id:"s".concat(t+1),code:e.code,name:e.name,targetSF:e.targetSF,zone:(null===a||void 0===a?void 0:a.name)||e.zone,level:e.level,rationale:e.notes||(null===n||void 0===n?void 0:n.notes)||""}}),r={};return i.forEach(e=>{r[e.zone]||(r[e.zone]=[]),r[e.zone].push(e)}),{programTier:t.programTier,targetSF:t.targetSF,hasBasement:t.hasBasement,spaces:i,spacesByZone:r,totals:{net:a.net,circulation:a.circulation,total:a.total},presetHint:ep(t.targetSF)}}function ep(e){return e<7500?"5k":e<12500?"10k":e<17500?"15k":"20k"}function tp(e,t){var n,a;const i=[],r=[];let o=0;Object.entries(e).forEach(e=>{let[n,a]=e;if(a.included){const e=Ph(n);if(e&&!e.outdoorSpace&&e.baseSF[t.programTier]){const n=e.baseSF[t.programTier],i=t.deltaPct/100;let r=n;"S"===a.size&&(r=Math.round(n*(1-i))),"L"===a.size&&(r=Math.round(n*(1+i))),a.customSF&&(r=a.customSF),o+=r}}});const s=t.targetSF,l=o*(1+t.circulationPct),c=(l-s)/s*100;c>50&&r.push({type:"over_target",message:"Program is significantly over target (".concat(c.toFixed(0),"%). Consider reviewing selections."),value:l}),c<-50&&r.push({type:"under_target",message:"Program is significantly under target (".concat(Math.abs(c).toFixed(0),"%). Consider adding spaces."),value:l});return["FOY","KIT","FR","PRI","PRIBATH"].forEach(t=>{var n,a;null!==(n=e[t])&&void 0!==n&&n.included||i.push({type:"missing_required",code:t,message:"".concat((null===(a=Ph(t))||void 0===a?void 0:a.name)||t," is required for any residential program")})}),null!==(n=e.PRICL_HIS)&&void 0!==n&&n.included||null!==(a=e.PRICL_HER)&&void 0!==a&&a.included||i.push({type:"missing_required",code:"PRICL",message:"Primary Closet is required for any residential program"}),t.hasBasement||Object.entries(e).forEach(e=>{let[t,n]=e;var a;n.included&&n.level<0&&i.push({type:"invalid_level",code:t,message:"".concat((null===(a=Ph(t))||void 0===a?void 0:a.name)||t," is placed in basement but project has no basement")})}),{valid:0===i.length,errors:i,warnings:r,estimatedTotal:Math.round(l)}}const np=e=>{let{zones:t,activeZone:n,onZoneChange:a,totals:i}=e;return(0,T.jsxs)("div",{className:"fyi-zone-stepper",children:[(0,T.jsx)("h3",{className:"fyi-zone-stepper__title",children:"Program Zones"}),(0,T.jsx)("div",{className:"fyi-zone-stepper__list",children:t.map(e=>{const t=e.code===n,i="Z8_OUT"===e.code;return(0,T.jsxs)("button",{className:"fyi-zone-stepper__item ".concat(t?"fyi-zone-stepper__item--active":""),onClick:()=>a(e.code),children:[(0,T.jsxs)("div",{className:"fyi-zone-stepper__item-header",children:[(0,T.jsx)("span",{className:"fyi-zone-stepper__item-name",children:e.name}),(0,T.jsxs)("span",{className:"fyi-zone-stepper__item-count",children:[e.includedCount,"/",e.spaceCount]})]}),(0,T.jsx)("div",{className:"fyi-zone-stepper__item-sf",children:e.totalSF>0?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("span",{className:"fyi-zone-stepper__sf-value",children:e.totalSF.toLocaleString()}),(0,T.jsx)("span",{className:"fyi-zone-stepper__sf-label",children:i?"SF (exterior)":"SF"})]}):(0,T.jsx)("span",{className:"fyi-zone-stepper__sf-empty",children:"\u2014"})}),t&&(0,T.jsx)("div",{className:"fyi-zone-stepper__item-indicator"})]},e.code)})}),(0,T.jsxs)("div",{className:"fyi-zone-stepper__summary",children:[(0,T.jsxs)("div",{className:"fyi-zone-stepper__summary-row",children:[(0,T.jsx)("span",{children:"Net Conditioned"}),(0,T.jsxs)("strong",{children:[i.net.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"fyi-zone-stepper__summary-row",children:[(0,T.jsxs)("span",{children:["Circulation (",i.circulationPct,"%)"]}),(0,T.jsxs)("span",{children:[i.circulation.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"fyi-zone-stepper__summary-row fyi-zone-stepper__summary-row--total",children:[(0,T.jsx)("span",{children:"Total"}),(0,T.jsxs)("strong",{children:[i.total.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"fyi-zone-stepper__summary-row fyi-zone-stepper__summary-row--delta ".concat(i.deltaFromTarget>0?"fyi-zone-stepper__summary-row--over":i.deltaFromTarget<0?"fyi-zone-stepper__summary-row--under":""),children:[(0,T.jsx)("span",{children:"vs Target"}),(0,T.jsxs)("span",{children:[i.deltaFromTarget>0?"+":"",i.deltaFromTarget.toLocaleString()," SF"]})]})]})]})},ap=e=>{let{space:t,selection:n,calculatedArea:i,settings:r,availableLevels:o,onSizeChange:s,onToggleIncluded:l,onLevelChange:c,onNotesChange:d}=e;const[u,h]=(0,a.useState)(!1),{included:p,size:m,level:f,notes:g,kycSource:v}=n,y=t.outdoorSpace,b="guestHouse"===t.structure||"poolHouse"===t.structure,x=r.deltaPct/100,S=t.baseSF[r.programTier]||0,j={S:Math.round(S*(1-x)),M:S,L:Math.round(S*(1+x))},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"M";const n="".concat(e,"_").concat(t),a=Rh[n];if(a)return"".concat(Mh,"/").concat(a,".png");if("M"!==t){const t=Rh["".concat(e,"_M")];if(t)return"".concat(Mh,"/").concat(t,".png")}return null}(t.code,m),N=b?[{value:1,label:"L1"}]:o||[{value:2,label:"L2"},{value:1,label:"L1 (Arrival)"}];return(0,T.jsxs)("div",{className:"fyi-space-card ".concat(p?"":"fyi-space-card--excluded"," ").concat(y?"fyi-space-card--outdoor":""),children:[(0,T.jsxs)("div",{className:"fyi-space-card__image-container",children:[w?(0,T.jsx)("img",{src:w,alt:t.name,className:"fyi-space-card__image",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,T.jsxs)("div",{className:"fyi-space-card__image-placeholder",style:{display:w?"none":"flex"},children:[(0,T.jsxs)("svg",{className:"fyi-space-card__placeholder-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,T.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,T.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,T.jsx)("polyline",{points:"21 15 16 10 5 21"})]}),(0,T.jsx)("span",{children:"Add Image"})]}),(()=>{if(!v)return null;const e={mustHave:{label:"Must Have",className:"fyi-space-card__badge--must"},niceToHave:{label:"Nice to Have",className:"fyi-space-card__badge--nice"},petGroomingRoom:{label:"Pet",className:"fyi-space-card__badge--kyc"},lateNightMediaUse:{label:"Sound",className:"fyi-space-card__badge--kyc"},wantsBar:{label:"KYC",className:"fyi-space-card__badge--kyc"},wantsBunkRoom:{label:"KYC",className:"fyi-space-card__badge--kyc"},wantsBreakfastNook:{label:"KYC",className:"fyi-space-card__badge--kyc"},staffingLevel:{label:"Staff",className:"fyi-space-card__badge--kyc"},staffingWithKids:{label:"Nanny",className:"fyi-space-card__badge--kyc"},secondary:{label:"Partner",className:"fyi-space-card__badge--secondary"}}[v];return e?(0,T.jsx)("span",{className:"fyi-space-card__badge ".concat(e.className),children:e.label}):null})()]}),(0,T.jsxs)("div",{className:"fyi-space-card__header",children:[(0,T.jsx)("h4",{className:"fyi-space-card__name",children:t.abbrev}),(0,T.jsxs)("label",{className:"fyi-space-card__toggle",children:[(0,T.jsx)("input",{type:"checkbox",checked:p,onChange:()=>l()}),(0,T.jsx)("span",{className:"fyi-space-card__toggle-slider"})]})]}),t.abbrev!==t.name&&(0,T.jsx)("p",{className:"fyi-space-card__fullname",children:t.name}),p&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"fyi-space-card__size-selector",children:["S","M","L"].map(e=>(0,T.jsxs)("button",{className:"fyi-space-card__size-btn ".concat(m===e?"fyi-space-card__size-btn--active":""),onClick:()=>s(e),children:[(0,T.jsx)("span",{className:"fyi-space-card__size-letter",children:e}),(0,T.jsx)("span",{className:"fyi-space-card__size-sf",children:j[e].toLocaleString()})]},e))}),(0,T.jsxs)("div",{className:"fyi-space-card__area",children:[(0,T.jsx)("span",{className:"fyi-space-card__area-value",children:i.toLocaleString()}),(0,T.jsx)("span",{className:"fyi-space-card__area-unit",children:y?"SF (exterior)":"SF"})]}),!y&&!b&&N.length>1&&(0,T.jsxs)("div",{className:"fyi-space-card__level-selector",children:[(0,T.jsx)("label",{children:"Level"}),(0,T.jsx)("select",{value:f,onChange:e=>c(parseInt(e.target.value)),className:"fyi-space-card__level-select",children:N.map(e=>(0,T.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,T.jsxs)("button",{className:"fyi-space-card__details-toggle",onClick:()=>h(!u),children:[u?"Hide Details":"More Options",(0,T.jsx)("svg",{className:"fyi-space-card__chevron ".concat(u?"fyi-space-card__chevron--open":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,T.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),u&&(0,T.jsxs)("div",{className:"fyi-space-card__details",children:[(0,T.jsxs)("div",{className:"fyi-space-card__detail-row",children:[(0,T.jsx)("label",{children:"Notes"}),(0,T.jsx)("textarea",{value:g||"",onChange:e=>d(e.target.value),className:"fyi-space-card__notes",placeholder:"Add notes...",rows:2})]}),t.notes&&(0,T.jsx)("p",{className:"fyi-space-card__space-notes",children:(0,T.jsx)("em",{children:t.notes})})]})]}),!p&&(0,T.jsxs)("div",{className:"fyi-space-card__excluded-overlay",children:[(0,T.jsx)("span",{children:"Not Included"}),(0,T.jsx)("button",{className:"fyi-space-card__include-btn",onClick:()=>l(),children:"Add to Program"})]})]})},ip=e=>{var t,n,i,r,o,l,c,d,u;let{settings:h,totals:p,selections:m,structureTotals:f,availableLevels:g,onSettingsChange:v,onExportPDF:y,onProceedToMVP:b,isExporting:x}=e;const[S,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)({main:!0}),k=tp(m,h),_=Object.values(f||{}).filter(e=>null===e||void 0===e?void 0:e.enabled).reduce((e,t)=>e+(t.total||0),0),C=_-h.targetSF,P=C>0,F=C<0,A=h.targetSF>0?(C/h.targetSF*100).toFixed(0):0,L=e=>{N(t=>s(s({},t),{},{[e]:!t[e]}))};return(0,T.jsxs)("div",{className:"fyi-totals-panel",children:[(0,T.jsx)("h3",{className:"fyi-totals-panel__title",children:"Program Summary"}),(0,T.jsxs)("div",{className:"fyi-totals-panel__section",children:[(0,T.jsx)("label",{className:"fyi-totals-panel__label",children:"Target SF"}),(0,T.jsxs)("div",{className:"fyi-totals-panel__target-display",children:[(0,T.jsxs)("span",{className:"fyi-totals-panel__target-value",children:[(null===(t=h.targetSF)||void 0===t?void 0:t.toLocaleString())||0," SF"]}),(0,T.jsx)("span",{className:"fyi-totals-panel__target-source",children:"from KYC"})]})]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__section",children:[(0,T.jsx)("label",{className:"fyi-totals-panel__label",children:"Current Program"}),(0,T.jsx)("div",{className:"fyi-totals-panel__current-display",children:(0,T.jsxs)("span",{className:"fyi-totals-panel__current-value",children:[_.toLocaleString()," SF"]})})]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__delta-box ".concat(P?"fyi-totals-panel__delta-box--over":F?"fyi-totals-panel__delta-box--under":"fyi-totals-panel__delta-box--balanced"),children:[(0,T.jsx)("label",{className:"fyi-totals-panel__label",children:"Delta from Target"}),(0,T.jsxs)("div",{className:"fyi-totals-panel__delta-value",children:[C>0?"+":"",C.toLocaleString()," SF"]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__delta-percent",children:["(",C>0?"+":"",A,"%)"]})]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__structures",children:[(null===f||void 0===f||null===(n=f.main)||void 0===n?void 0:n.enabled)&&(0,T.jsxs)("div",{className:"fyi-totals-panel__structure",children:[(0,T.jsxs)("button",{className:"fyi-totals-panel__structure-header",onClick:()=>L("main"),children:[(0,T.jsx)("span",{children:"Main Residence"}),(0,T.jsxs)("span",{children:[(null===(i=f.main.total)||void 0===i?void 0:i.toLocaleString())||0," SF"]}),(0,T.jsx)("svg",{className:"fyi-totals-panel__chevron ".concat(w.main?"fyi-totals-panel__chevron--open":""),viewBox:"0 0 24 24",children:(0,T.jsx)("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor"})})]}),w.main&&(0,T.jsxs)("div",{className:"fyi-totals-panel__structure-details",children:[(0,T.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,T.jsx)("span",{children:"Net Program"}),(0,T.jsxs)("span",{children:[(null===(r=f.main.net)||void 0===r?void 0:r.toLocaleString())||0," SF"]})]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__row fyi-totals-panel__row--sub",children:[(0,T.jsxs)("span",{children:["Circulation (",f.main.circulationPct||0,"%)"]}),(0,T.jsxs)("span",{children:[(null===(o=f.main.circulation)||void 0===o?void 0:o.toLocaleString())||0," SF"]})]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__levels",children:[(0,T.jsx)("label",{className:"fyi-totals-panel__label fyi-totals-panel__label--small",children:"By Level"}),(M=f.main.byLevel,M&&g?g.map(e=>{const t=1===e.value?1:e.value,n=M[t]||0;return 0===n?null:(0,T.jsxs)("div",{className:"fyi-totals-panel__level-row",children:[(0,T.jsx)("span",{children:(a=e.value,1===a?"L1 (Arrival)":"L".concat(a))}),(0,T.jsxs)("span",{children:[n.toLocaleString()," SF"]})]},e.value);var a}):null)]})]})]}),(null===f||void 0===f||null===(l=f.guestHouse)||void 0===l?void 0:l.enabled)&&(0,T.jsxs)("div",{className:"fyi-totals-panel__structure",children:[(0,T.jsxs)("button",{className:"fyi-totals-panel__structure-header",onClick:()=>L("guestHouse"),children:[(0,T.jsx)("span",{children:"Guest House"}),(0,T.jsxs)("span",{children:[(null===(c=f.guestHouse.total)||void 0===c?void 0:c.toLocaleString())||0," SF"]}),(0,T.jsx)("svg",{className:"fyi-totals-panel__chevron ".concat(w.guestHouse?"fyi-totals-panel__chevron--open":""),viewBox:"0 0 24 24",children:(0,T.jsx)("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor"})})]}),w.guestHouse&&(0,T.jsx)("div",{className:"fyi-totals-panel__structure-details",children:(0,T.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,T.jsx)("span",{children:"Spaces"}),(0,T.jsx)("span",{children:f.guestHouse.spaceCount||0})]})})]}),(null===f||void 0===f||null===(d=f.poolHouse)||void 0===d?void 0:d.enabled)&&(0,T.jsxs)("div",{className:"fyi-totals-panel__structure",children:[(0,T.jsxs)("button",{className:"fyi-totals-panel__structure-header",onClick:()=>L("poolHouse"),children:[(0,T.jsx)("span",{children:"Pool House"}),(0,T.jsxs)("span",{children:[(null===(u=f.poolHouse.total)||void 0===u?void 0:u.toLocaleString())||0," SF"]}),(0,T.jsx)("svg",{className:"fyi-totals-panel__chevron ".concat(w.poolHouse?"fyi-totals-panel__chevron--open":""),viewBox:"0 0 24 24",children:(0,T.jsx)("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor"})})]}),w.poolHouse&&(0,T.jsx)("div",{className:"fyi-totals-panel__structure-details",children:(0,T.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,T.jsx)("span",{children:"Spaces"}),(0,T.jsx)("span",{children:f.poolHouse.spaceCount||0})]})})]})]}),p.outdoorTotal>0&&(0,T.jsx)("div",{className:"fyi-totals-panel__section fyi-totals-panel__outdoor",children:(0,T.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,T.jsx)("span",{children:"Outdoor (not conditioned)"}),(0,T.jsxs)("span",{children:[p.outdoorTotal.toLocaleString()," SF"]})]})}),(0,T.jsxs)("button",{className:"fyi-totals-panel__advanced-toggle",onClick:()=>j(!S),children:["Settings",(0,T.jsx)("svg",{className:"fyi-totals-panel__chevron ".concat(S?"fyi-totals-panel__chevron--open":""),viewBox:"0 0 24 24",children:(0,T.jsx)("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor"})})]}),S&&(0,T.jsxs)("div",{className:"fyi-totals-panel__advanced",children:[(0,T.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,T.jsx)("label",{children:"Target SF"}),(0,T.jsxs)("div",{className:"fyi-totals-panel__input-group fyi-totals-panel__input-group--small",children:[(0,T.jsx)("input",{type:"number",value:h.targetSF,onChange:e=>v({targetSF:parseInt(e.target.value)||0}),className:"fyi-totals-panel__input",min:3e3,max:5e4,step:500}),(0,T.jsx)("span",{className:"fyi-totals-panel__input-suffix",children:"SF"})]})]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,T.jsx)("label",{children:"Size Delta (S/L)"}),(0,T.jsxs)("div",{className:"fyi-totals-panel__input-group fyi-totals-panel__input-group--small",children:[(0,T.jsx)("input",{type:"number",value:h.deltaPct,onChange:e=>v({deltaPct:parseInt(e.target.value)||10}),className:"fyi-totals-panel__input",min:5,max:25}),(0,T.jsx)("span",{className:"fyi-totals-panel__input-suffix",children:"%"})]})]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,T.jsx)("label",{children:"Circulation"}),(0,T.jsxs)("select",{value:h.lockToTarget?"balance":"fixed",onChange:e=>v({lockToTarget:"balance"===e.target.value}),className:"fyi-totals-panel__select",children:[(0,T.jsx)("option",{value:"balance",children:"Balance to Target"}),(0,T.jsx)("option",{value:"fixed",children:"Fixed %"})]})]}),!h.lockToTarget&&(0,T.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,T.jsx)("label",{children:"Circulation %"}),(0,T.jsxs)("div",{className:"fyi-totals-panel__input-group fyi-totals-panel__input-group--small",children:[(0,T.jsx)("input",{type:"number",value:Math.round(100*h.circulationPct),onChange:e=>v({circulationPct:(parseInt(e.target.value)||13)/100}),className:"fyi-totals-panel__input",min:10,max:20}),(0,T.jsx)("span",{className:"fyi-totals-panel__input-suffix",children:"%"})]})]})]}),(k.warnings.length>0||k.errors.length>0)&&(0,T.jsxs)("div",{className:"fyi-totals-panel__validation",children:[k.errors.map((e,t)=>(0,T.jsxs)("div",{className:"fyi-totals-panel__validation-error",children:[(0,T.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:(0,T.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),e.message]},"error-".concat(t))),k.warnings.map((e,t)=>(0,T.jsxs)("div",{className:"fyi-totals-panel__validation-warning",children:[(0,T.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:(0,T.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),e.message]},"warning-".concat(t)))]}),(0,T.jsxs)("div",{className:"fyi-totals-panel__actions",children:[(0,T.jsxs)("div",{className:"fyi-totals-panel__export-group",children:[(0,T.jsx)("span",{className:"fyi-totals-panel__export-label",children:"Export PDF:"}),(0,T.jsxs)("div",{className:"fyi-totals-panel__export-buttons",children:[(0,T.jsx)("button",{className:"fyi-totals-panel__btn fyi-totals-panel__btn--secondary fyi-totals-panel__btn--small",onClick:()=>y("zone"),disabled:x,title:"Group spaces by zone (APB, FAM, ENT, etc.)",children:x?"...":"By Zone"}),(0,T.jsx)("button",{className:"fyi-totals-panel__btn fyi-totals-panel__btn--secondary fyi-totals-panel__btn--small",onClick:()=>y("level"),disabled:x,title:"Group spaces by level (L2, L1, Basement)",children:x?"...":"By Level"})]})]}),(0,T.jsx)("button",{className:"fyi-totals-panel__btn fyi-totals-panel__btn--primary",onClick:b,disabled:!k.valid,children:"Proceed to MVP \u2192"})]}),!k.valid&&(0,T.jsx)("p",{className:"fyi-totals-panel__hint",children:"Resolve errors above to proceed"})]});var M},rp=e=>{var t;let{levels:n,sfByLevel:a,totalSF:i,targetSF:r,selectedLevel:o,onLevelSelect:s,structure:l}=e;const c=Math.max(...Object.values(a),1),d=e=>{const t=1===e?"L1":"L".concat(e);return a[t]||0};return(0,T.jsxs)("div",{className:"level-diagram",children:[(0,T.jsxs)("div",{className:"level-diagram__header",children:[(0,T.jsx)(v,{size:18}),(0,T.jsx)("span",{children:"main"===l?"Main Residence":"guestHouse"===l?"Guest House":"Pool House"})]}),(0,T.jsx)("div",{className:"level-diagram__stack",children:n.map((e,t)=>{const n=1===e.value,r=o===e.value,l=d(e.value),u=(e=>{const t=1===e?"L1":"L".concat(e);return(a[t]||0)/c*100})(e.value),h=(p=e.value,0===i?0:Math.round(d(p)/i*100));var p;return(0,T.jsxs)("div",{className:"level-diagram__level ".concat(n?"level-diagram__level--arrival":""," ").concat(r?"level-diagram__level--selected":""),onClick:()=>s(r?null:e.value),children:[n&&(0,T.jsx)("div",{className:"level-diagram__arrival-indicator",children:(0,T.jsx)(A,{size:14})}),(0,T.jsx)("div",{className:"level-diagram__label",children:(e.value,"L".concat(e.value))}),(0,T.jsx)("div",{className:"level-diagram__bar-container",children:(0,T.jsx)("div",{className:"level-diagram__bar",style:{width:"".concat(u,"%")}})}),(0,T.jsx)("div",{className:"level-diagram__sf",children:l>0?l.toLocaleString():"\u2014"}),l>0&&(0,T.jsxs)("div",{className:"level-diagram__percent",children:[h,"%"]})]},e.value)})}),(0,T.jsxs)("div",{className:"level-diagram__totals",children:[(0,T.jsxs)("div",{className:"level-diagram__total-row",children:[(0,T.jsx)("span",{children:"Net Program"}),(0,T.jsxs)("span",{children:[i.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"level-diagram__total-row level-diagram__total-row--target",children:[(0,T.jsx)("span",{children:"Target"}),(0,T.jsxs)("span",{children:[r.toLocaleString()," SF"]})]}),(0,T.jsxs)("div",{className:"level-diagram__total-row level-diagram__total-row--delta ".concat(i>r?"level-diagram__total-row--over":i<r?"level-diagram__total-row--under":""),children:[(0,T.jsx)("span",{children:"Delta"}),(0,T.jsxs)("span",{children:[i>r?"+":"",(i-r).toLocaleString()," SF"]})]})]}),o&&(0,T.jsxs)("div",{className:"level-diagram__filter-hint",children:["Showing ",null===(t=n.find(e=>e.value===o))||void 0===t?void 0:t.label," only",(0,T.jsx)("button",{onClick:()=>s(null),children:"Show all"})]})]})},op=d("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]),sp=e=>{let{activeStructure:t,onStructureChange:n,structures:a}=e;const i=[{id:"main",label:"Main Residence",icon:u,description:"Primary living spaces"},{id:"guestHouse",label:"Guest House",icon:zr,description:"Separate guest structure"},{id:"poolHouse",label:"Pool House",icon:op,description:"Wellness pavilion"}];return(0,T.jsxs)("div",{className:"structure-selector",children:[(0,T.jsx)("div",{className:"structure-selector__header",children:(0,T.jsx)("span",{children:"Structures"})}),(0,T.jsx)("div",{className:"structure-selector__options",children:i.map(e=>{const i=a[e.id],r=null===i||void 0===i?void 0:i.enabled,o=t===e.id,s=e.icon;return r?(0,T.jsxs)("button",{className:"structure-selector__option ".concat(o?"structure-selector__option--active":""),onClick:()=>n(e.id),children:[(0,T.jsx)("div",{className:"structure-selector__option-icon",children:(0,T.jsx)(s,{size:20})}),(0,T.jsxs)("div",{className:"structure-selector__option-content",children:[(0,T.jsx)("div",{className:"structure-selector__option-label",children:e.label}),(null===i||void 0===i?void 0:i.totalSF)>0&&(0,T.jsxs)("div",{className:"structure-selector__option-stats",children:[i.totalSF.toLocaleString()," SF",i.spaceCount&&(0,T.jsxs)("span",{className:"structure-selector__option-count",children:[i.spaceCount," spaces"]})]})]}),o&&(0,T.jsx)("div",{className:"structure-selector__option-indicator"})]},e.id):null})}),(0,T.jsxs)("div",{className:"structure-selector__grand-total",children:[(0,T.jsx)("span",{children:"All Structures"}),(0,T.jsxs)("span",{children:[Object.values(a).filter(e=>e.enabled).reduce((e,t)=>e+(t.totalSF||0),0).toLocaleString()," SF"]})]})]})},lp=d("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]),cp=d("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),dp="#1e3a5f",up="#c9a227",hp="#fafaf8",pp="#ffffff",mp="#e5e5e0",fp="#1a1a1a",gp="#6b6b6b",vp="#2e7d32",yp="#f57c00",bp="#d32f2f";function xp(e){let{title:t,children:n,defaultOpen:i=!1}=e;const[r,o]=(0,a.useState)(i);return(0,T.jsxs)("div",{className:"doc-expandable",children:[(0,T.jsxs)("button",{className:"doc-expandable-header",onClick:()=>o(!r),children:[r?(0,T.jsx)(C,{size:18}):(0,T.jsx)(x,{size:18}),(0,T.jsx)("span",{children:t})]}),r&&(0,T.jsx)("div",{className:"doc-expandable-content",children:n})]})}function Sp(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"What is FYI?"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"For Your Information (FYI) is your space programming module. It translates your lifestyle requirements from KYC into a detailed room-by-room program with specific square footages. This is the quantified foundation that your architect will use to begin schematic design."}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Think of FYI as your home's bill of materials\u2014except instead of lumber and steel, you're specifying the spaces that will make up your daily life. Every room, closet, and terrace is documented with its size, zone, and level assignment."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"What FYI Produces"}),(0,T.jsxs)("ul",{className:"doc-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Complete Space Program"}),(0,T.jsx)("p",{children:"Every room in your home with specific square footage allocation"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Zone Organization"}),(0,T.jsx)("p",{children:"Spaces grouped by function (Arrival, Family, Primary, Guest, etc.)"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Level Distribution"}),(0,T.jsx)("p",{children:"Assignment of each space to floors (Basement, Main, Upper)"})]})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"doc-list-icon success"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Target Validation"}),(0,T.jsx)("p",{children:"Real-time tracking against your target square footage"})]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card doc-card--highlight",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"S/M/L Sizing System"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Instead of asking you to guess square footages, FYI uses a simple Small / Medium / Large system. Each size represents a tier-appropriate allocation based on your project scope."}),(0,T.jsxs)("div",{className:"doc-size-grid",children:[(0,T.jsxs)("div",{className:"doc-size-card",children:[(0,T.jsx)("div",{className:"doc-size-badge doc-size-s",children:"S"}),(0,T.jsxs)("div",{className:"doc-size-content",children:[(0,T.jsx)("strong",{children:"Small"}),(0,T.jsx)("p",{children:"Efficient allocation. Meets functional needs without excess. Good for supporting spaces."})]})]}),(0,T.jsxs)("div",{className:"doc-size-card",children:[(0,T.jsx)("div",{className:"doc-size-badge doc-size-m",children:"M"}),(0,T.jsxs)("div",{className:"doc-size-content",children:[(0,T.jsx)("strong",{children:"Medium"}),(0,T.jsx)("p",{children:"Comfortable standard. Typical for most rooms in homes of your tier. Recommended default."})]})]}),(0,T.jsxs)("div",{className:"doc-size-card",children:[(0,T.jsx)("div",{className:"doc-size-badge doc-size-l",children:"L"}),(0,T.jsxs)("div",{className:"doc-size-content",children:[(0,T.jsx)("strong",{children:"Large"}),(0,T.jsx)("p",{children:"Generous allocation. For priority spaces or special requirements. Use selectively."})]})]})]}),(0,T.jsxs)("div",{className:"doc-tip",children:[(0,T.jsx)(Ce,{size:14}),(0,T.jsx)("span",{children:'Actual square footages scale with your tier. A "Medium" kitchen in a 15K home is larger than a "Medium" kitchen in a 5K home.'})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Tier-Based Templates"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"FYI uses your target square footage (from KYC) to select the appropriate program template. Larger tiers include more spaces and larger default sizes."}),(0,T.jsxs)("div",{className:"doc-tier-table",children:[(0,T.jsxs)("div",{className:"doc-tier-row doc-tier-row--header",children:[(0,T.jsx)("span",{children:"Tier"}),(0,T.jsx)("span",{children:"Target Range"}),(0,T.jsx)("span",{children:"Typical Spaces"}),(0,T.jsx)("span",{children:"Character"})]}),(0,T.jsxs)("div",{className:"doc-tier-row",children:[(0,T.jsx)("span",{className:"doc-tier-label",children:"5K"}),(0,T.jsx)("span",{children:"< 7,500 SF"}),(0,T.jsx)("span",{children:"25-30 spaces"}),(0,T.jsx)("span",{children:"Efficient luxury"})]}),(0,T.jsxs)("div",{className:"doc-tier-row",children:[(0,T.jsx)("span",{className:"doc-tier-label",children:"10K"}),(0,T.jsx)("span",{children:"7,500 - 12,500 SF"}),(0,T.jsx)("span",{children:"35-40 spaces"}),(0,T.jsx)("span",{children:"Comfortable estate"})]}),(0,T.jsxs)("div",{className:"doc-tier-row",children:[(0,T.jsx)("span",{className:"doc-tier-label",children:"15K"}),(0,T.jsx)("span",{children:"12,500 - 17,500 SF"}),(0,T.jsx)("span",{children:"45-55 spaces"}),(0,T.jsx)("span",{children:"Full-service mansion"})]}),(0,T.jsxs)("div",{className:"doc-tier-row",children:[(0,T.jsx)("span",{className:"doc-tier-label",children:"20K"}),(0,T.jsx)("span",{children:"17,500+ SF"}),(0,T.jsx)("span",{children:"60+ spaces"}),(0,T.jsx)("span",{children:"Grand estate"})]})]})]})]})}function jp(){const e=[{code:"Z1",name:"Arrival + Public",icon:u,color:"#1e3a5f",description:"Entry, formal entertaining, office, and public-facing spaces.",typicalSpaces:["Foyer","Gallery","Living Room","Dining Room","Home Office","Powder Room"],considerations:["First impression zone\u2014consider ceiling heights and natural light","Formal entertaining capacity","Guest bathroom accessibility","Coat and package storage"]},{code:"Z2",name:"Family + Kitchen",icon:h,color:"#2e7d32",description:"Daily living hub, kitchen, breakfast, and casual family spaces.",typicalSpaces:["Kitchen","Breakfast Nook","Family Room","Scullery","Butler Pantry","Mudroom"],considerations:["Heart of daily living\u2014size generously","Kitchen work triangle and prep space","Visual connection to outdoor spaces","Casual dining capacity"]},{code:"Z3",name:"Entertainment",icon:h,color:"#7b1fa2",description:"Game room, theater, bar, billiards, and recreational spaces.",typicalSpaces:["Media Room","Game Room","Bar","Wine Room","Billiards","Lounge"],considerations:["Acoustic isolation requirements","Lighting control and AV infrastructure","Beverage service proximity","Sound lock for bedrooms"]},{code:"Z4",name:"Wellness",icon:Dr,color:"#00897b",description:"Gym, spa, pool support, and health-focused spaces.",typicalSpaces:["Gym","Spa","Steam Room","Sauna","Massage Room","Pool Bath"],considerations:["Equipment footprint and ceiling height","Ventilation and dehumidification","Wet-feet transitions from pool","Natural light for exercise areas"]},{code:"Z5",name:"Primary Suite",icon:u,color:"#1565c0",description:"Primary bedroom, bath, closets, and private retreat.",typicalSpaces:["Primary Bedroom","Primary Bath","His Closet","Her Closet","Sitting Area","Private Terrace"],considerations:["Retreat quality and privacy","Bath-to-bed relationship","Closet capacity and organization","Morning routine flow"]},{code:"Z6",name:"Guest + Secondary",icon:h,color:"#f57c00",description:"Jr. Primary, guest suites, kids rooms, staff quarters.",typicalSpaces:["Jr. Primary","Guest Suite 1-3","Kids Rooms","Bunk Room","Au Pair Suite"],considerations:["Guest autonomy and privacy","Sound separation from primary","Staff quarters accessibility","Future flexibility"]},{code:"Z7",name:"Service + BOH",icon:be,color:"#5d4037",description:"Laundry, mudroom, mechanical, storage, and back-of-house.",typicalSpaces:["Laundry","Utility Room","Mechanical","Storage","Garage Entry","Staff Break"],considerations:["Service circulation routes","Staff efficiency and comfort","Delivery and trash flow","MEP access requirements"]},{code:"Z8",name:"Outdoor Spaces",icon:lp,color:"#388e3c",description:"Terrace, pool, outdoor kitchen, and exterior living.",typicalSpaces:["Covered Terrace","Pool","Pool Deck","Outdoor Kitchen","Fire Pit","Lawn"],considerations:["Indoor-outdoor transitions","Sun and shade balance","Pool-to-house wet-feet path","Entertainment capacity"]}];return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"FYI Zone Workflow"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Work through each zone, reviewing pre-selected spaces and adjusting sizes. The system starts with a recommended template based on your KYC inputs\u2014your job is to refine it to match your priorities."})]}),(0,T.jsxs)("div",{className:"doc-workflow-steps",children:[(0,T.jsxs)("div",{className:"doc-workflow-step",children:[(0,T.jsx)("div",{className:"doc-workflow-number",children:"1"}),(0,T.jsxs)("div",{className:"doc-workflow-content",children:[(0,T.jsx)("h4",{children:"Review Zone Spaces"}),(0,T.jsx)("p",{children:"Each zone shows pre-selected spaces based on your KYC inputs. Spaces are already marked as included or excluded based on your lifestyle profile."})]})]}),(0,T.jsxs)("div",{className:"doc-workflow-step",children:[(0,T.jsx)("div",{className:"doc-workflow-number",children:"2"}),(0,T.jsxs)("div",{className:"doc-workflow-content",children:[(0,T.jsx)("h4",{children:"Toggle Inclusions"}),(0,T.jsx)("p",{children:"Add or remove spaces as needed. Want a wine room? Add it. Don't need a formal dining room? Remove it. Changes update the total SF in real time."})]})]}),(0,T.jsxs)("div",{className:"doc-workflow-step",children:[(0,T.jsx)("div",{className:"doc-workflow-number",children:"3"}),(0,T.jsxs)("div",{className:"doc-workflow-content",children:[(0,T.jsx)("h4",{children:"Adjust Sizing"}),(0,T.jsx)("p",{children:"For each included space, select S/M/L. Start with Medium for most spaces, then upgrade priorities to Large and downgrade supporting spaces to Small."})]})]}),(0,T.jsxs)("div",{className:"doc-workflow-step",children:[(0,T.jsx)("div",{className:"doc-workflow-number",children:"4"}),(0,T.jsxs)("div",{className:"doc-workflow-content",children:[(0,T.jsx)("h4",{children:"Monitor Totals"}),(0,T.jsx)("p",{children:"Watch the totals panel as you work. Stay within \xb110% of your target SF. The system will warn you if you're significantly over or under."})]})]}),(0,T.jsxs)("div",{className:"doc-workflow-step",children:[(0,T.jsx)("div",{className:"doc-workflow-number",children:"5"}),(0,T.jsxs)("div",{className:"doc-workflow-content",children:[(0,T.jsx)("h4",{children:"Export Brief"}),(0,T.jsx)("p",{children:"When complete, export a PDF space brief for your design team. This becomes the official program document for schematic design."})]})]})]}),(0,T.jsx)("div",{className:"doc-card",children:(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Zone-by-Zone Guide"})}),e.map(e=>(0,T.jsxs)("div",{className:"doc-zone-card",style:{"--zone-color":e.color},children:[(0,T.jsxs)("div",{className:"doc-zone-header",children:[(0,T.jsx)("div",{className:"doc-zone-badge",children:e.code}),(0,T.jsxs)("h4",{className:"doc-zone-title",children:[(0,T.jsx)(e.icon,{size:18}),e.name]})]}),(0,T.jsx)("p",{className:"doc-zone-description",children:e.description}),(0,T.jsxs)("div",{className:"doc-zone-details",children:[(0,T.jsxs)("div",{className:"doc-zone-column",children:[(0,T.jsx)("h5",{children:"Typical Spaces"}),(0,T.jsx)("div",{className:"doc-zone-spaces",children:e.typicalSpaces.map((e,t)=>(0,T.jsx)("span",{className:"doc-zone-space",children:e},t))})]}),(0,T.jsxs)("div",{className:"doc-zone-column",children:[(0,T.jsx)("h5",{children:"Key Considerations"}),(0,T.jsx)("ul",{children:e.considerations.map((e,t)=>(0,T.jsx)("li",{children:e},t))})]})]})]},e.code))]})}function wp(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Program Balance Gates"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"FYI validates your space program against several criteria before passing to MVP. These gates ensure your program is realistic and properly balanced."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsxs)("h3",{className:"doc-subsection-title",children:[(0,T.jsx)(cp,{size:18,style:{marginRight:"0.5rem"}}),"Target Square Footage"]}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Your total program should be within \xb110% of your target SF from KYC. Significant deviations require either adjusting your program or revising your target."}),(0,T.jsxs)("div",{className:"doc-variance-scale",children:[(0,T.jsxs)("div",{className:"doc-variance-bar",children:[(0,T.jsx)("div",{className:"doc-variance-zone doc-variance-danger",children:"-20%"}),(0,T.jsx)("div",{className:"doc-variance-zone doc-variance-warning",children:"-10%"}),(0,T.jsx)("div",{className:"doc-variance-zone doc-variance-good",children:"Target"}),(0,T.jsx)("div",{className:"doc-variance-zone doc-variance-warning",children:"+10%"}),(0,T.jsx)("div",{className:"doc-variance-zone doc-variance-danger",children:"+20%"})]}),(0,T.jsxs)("div",{className:"doc-variance-labels",children:[(0,T.jsx)("span",{children:"Under-programmed"}),(0,T.jsx)("span",{children:"Optimal Range"}),(0,T.jsx)("span",{children:"Over-programmed"})]})]}),(0,T.jsxs)("div",{className:"doc-variance-notes",children:[(0,T.jsxs)("div",{className:"doc-variance-note",children:[(0,T.jsx)(Ze,{size:14,color:yp}),(0,T.jsxs)("span",{children:[(0,T.jsx)("strong",{children:"Under by 10%+:"})," You may have unused budget. Consider adding spaces or upgrading sizes."]})]}),(0,T.jsxs)("div",{className:"doc-variance-note",children:[(0,T.jsx)(Ze,{size:14,color:bp}),(0,T.jsxs)("span",{children:[(0,T.jsx)("strong",{children:"Over by 10%+:"})," Either reduce program or increase target SF. Over-programming leads to budget overruns."]})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Zone Balance Requirements"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Each zone should fall within a reasonable percentage of total SF. Extreme imbalances suggest missing spaces or oversizing."}),(0,T.jsxs)("div",{className:"doc-balance-table",children:[(0,T.jsxs)("div",{className:"doc-balance-row doc-balance-row--header",children:[(0,T.jsx)("span",{children:"Zone"}),(0,T.jsx)("span",{children:"Typical Range"}),(0,T.jsx)("span",{children:"Warning If"})]}),(0,T.jsxs)("div",{className:"doc-balance-row",children:[(0,T.jsx)("span",{children:"Z1: Arrival + Public"}),(0,T.jsx)("span",{children:"8-15%"}),(0,T.jsx)("span",{children:">20% (oversized formal spaces)"})]}),(0,T.jsxs)("div",{className:"doc-balance-row",children:[(0,T.jsx)("span",{children:"Z2: Family + Kitchen"}),(0,T.jsx)("span",{children:"12-20%"}),(0,T.jsx)("span",{children:"<10% (undersized heart of home)"})]}),(0,T.jsxs)("div",{className:"doc-balance-row",children:[(0,T.jsx)("span",{children:"Z5: Primary Suite"}),(0,T.jsx)("span",{children:"8-15%"}),(0,T.jsx)("span",{children:">20% (may crowd other zones)"})]}),(0,T.jsxs)("div",{className:"doc-balance-row",children:[(0,T.jsx)("span",{children:"Z6: Guest + Secondary"}),(0,T.jsx)("span",{children:"15-25%"}),(0,T.jsx)("span",{children:"<12% (insufficient bedroom count)"})]}),(0,T.jsxs)("div",{className:"doc-balance-row",children:[(0,T.jsx)("span",{children:"Z7: Service + BOH"}),(0,T.jsx)("span",{children:"8-15%"}),(0,T.jsx)("span",{children:"<6% (undersized service infrastructure)"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Circulation Allowance"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Your programmed spaces don't account for hallways, stairs, walls, and circulation. FYI adds a circulation factor (typically 15-20%) when calculating buildable area."}),(0,T.jsxs)("div",{className:"doc-circulation-example",children:[(0,T.jsxs)("div",{className:"doc-circ-row",children:[(0,T.jsx)("span",{children:"Programmed Space Total"}),(0,T.jsx)("span",{children:"12,000 SF"})]}),(0,T.jsxs)("div",{className:"doc-circ-row",children:[(0,T.jsx)("span",{children:"Circulation Factor (18%)"}),(0,T.jsx)("span",{children:"+ 2,160 SF"})]}),(0,T.jsxs)("div",{className:"doc-circ-row doc-circ-row--total",children:[(0,T.jsx)("span",{children:"Buildable Area Estimate"}),(0,T.jsx)("span",{children:"14,160 SF"})]})]}),(0,T.jsxs)("div",{className:"doc-tip",children:[(0,T.jsx)(Ce,{size:14}),(0,T.jsx)("span",{children:"Multi-story homes need more circulation (stairs, landings). Compact plans can sometimes achieve 15%, while sprawling estates may need 22%."})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Required Spaces by Tier"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Certain spaces are expected in each tier. Missing them will trigger warnings."}),(0,T.jsx)(xp,{title:"5K Tier Requirements",defaultOpen:!0,children:(0,T.jsxs)("ul",{className:"doc-required-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Primary Suite with walk-in closet"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Kitchen (may be combined with family area)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," At least 2 additional bedrooms"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," 2-car garage minimum"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Laundry room"]})]})}),(0,T.jsx)(xp,{title:"10K Tier Requirements",children:(0,T.jsxs)("ul",{className:"doc-required-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Primary Suite with separate bath and closet(s)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Separate kitchen and family room"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Formal living or dining room"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," At least 3 additional bedrooms"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Home office or study"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," 3-car garage"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Dedicated laundry room"]})]})}),(0,T.jsx)(xp,{title:"15K Tier Requirements",children:(0,T.jsxs)("ul",{className:"doc-required-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Primary Suite with his/hers closets"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Separate living and family rooms"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Formal dining room"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Butler pantry or scullery"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," At least 4 bedrooms including guest suite"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Media room or theater"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Home gym or wellness space"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," 4+ car garage"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Mudroom"]})]})}),(0,T.jsx)(xp,{title:"20K Tier Requirements",children:(0,T.jsxs)("ul",{className:"doc-required-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Primary Suite with sitting area"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Separate his/hers baths and closets"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Multiple entertaining zones"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Catering kitchen or full scullery"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Wine room and bar"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Full guest wing (2+ suites)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Theater (not just media room)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Full wellness suite (gym, spa)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Staff quarters"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," Service entry and ops core"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:14})," 6+ car garage with service"]})]})})]})]})}function Np(){return(0,T.jsxs)("div",{className:"doc-tab-content",children:[(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h2",{className:"doc-section-title",children:"Reference Guide"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Zone definitions, space categories, and sizing benchmarks for FYI programming."})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Zone Code Reference"}),(0,T.jsxs)("div",{className:"doc-zone-table",children:[(0,T.jsxs)("div",{className:"doc-zone-tbl-row doc-zone-tbl-row--header",children:[(0,T.jsx)("span",{children:"Code"}),(0,T.jsx)("span",{children:"Zone Name"}),(0,T.jsx)("span",{children:"Function"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z1_APB"}),(0,T.jsx)("span",{children:"Arrival + Public"}),(0,T.jsx)("span",{children:"Entry and formal entertaining"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z2_FAM"}),(0,T.jsx)("span",{children:"Family + Kitchen"}),(0,T.jsx)("span",{children:"Daily living hub"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z3_ENT"}),(0,T.jsx)("span",{children:"Entertainment"}),(0,T.jsx)("span",{children:"Recreation and media"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z4_WEL"}),(0,T.jsx)("span",{children:"Wellness"}),(0,T.jsx)("span",{children:"Gym, spa, and health"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z5_PRI"}),(0,T.jsx)("span",{children:"Primary Suite"}),(0,T.jsx)("span",{children:"Primary private retreat"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z6_GST"}),(0,T.jsx)("span",{children:"Guest + Secondary"}),(0,T.jsx)("span",{children:"Guest and children's rooms"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z7_SVC"}),(0,T.jsx)("span",{children:"Service + BOH"}),(0,T.jsx)("span",{children:"Back-of-house operations"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z8_OUT"}),(0,T.jsx)("span",{children:"Outdoor Spaces"}),(0,T.jsx)("span",{children:"Exterior living (unconditioned)"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z9_GH"}),(0,T.jsx)("span",{children:"Guest House"}),(0,T.jsx)("span",{children:"Separate guest structure"})]}),(0,T.jsxs)("div",{className:"doc-zone-tbl-row",children:[(0,T.jsx)("code",{children:"Z10_PH"}),(0,T.jsx)("span",{children:"Pool House"}),(0,T.jsx)("span",{children:"Pool/wellness pavilion"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Size Benchmarks (Sample Spaces)"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"Example S/M/L allocations for common spaces. Actual values scale with your project tier."}),(0,T.jsx)(xp,{title:"View Size Examples (10K Tier)",defaultOpen:!0,children:(0,T.jsxs)("div",{className:"doc-benchmark-table",children:[(0,T.jsxs)("div",{className:"doc-benchmark-row doc-benchmark-row--header",children:[(0,T.jsx)("span",{children:"Space"}),(0,T.jsx)("span",{children:"Small"}),(0,T.jsx)("span",{children:"Medium"}),(0,T.jsx)("span",{children:"Large"})]}),(0,T.jsxs)("div",{className:"doc-benchmark-row",children:[(0,T.jsx)("span",{children:"Primary Bedroom"}),(0,T.jsx)("span",{children:"350 SF"}),(0,T.jsx)("span",{children:"450 SF"}),(0,T.jsx)("span",{children:"600 SF"})]}),(0,T.jsxs)("div",{className:"doc-benchmark-row",children:[(0,T.jsx)("span",{children:"Kitchen"}),(0,T.jsx)("span",{children:"250 SF"}),(0,T.jsx)("span",{children:"350 SF"}),(0,T.jsx)("span",{children:"500 SF"})]}),(0,T.jsxs)("div",{className:"doc-benchmark-row",children:[(0,T.jsx)("span",{children:"Family Room"}),(0,T.jsx)("span",{children:"300 SF"}),(0,T.jsx)("span",{children:"450 SF"}),(0,T.jsx)("span",{children:"600 SF"})]}),(0,T.jsxs)("div",{className:"doc-benchmark-row",children:[(0,T.jsx)("span",{children:"Guest Suite"}),(0,T.jsx)("span",{children:"200 SF"}),(0,T.jsx)("span",{children:"280 SF"}),(0,T.jsx)("span",{children:"350 SF"})]}),(0,T.jsxs)("div",{className:"doc-benchmark-row",children:[(0,T.jsx)("span",{children:"Home Office"}),(0,T.jsx)("span",{children:"120 SF"}),(0,T.jsx)("span",{children:"180 SF"}),(0,T.jsx)("span",{children:"250 SF"})]}),(0,T.jsxs)("div",{className:"doc-benchmark-row",children:[(0,T.jsx)("span",{children:"Media Room"}),(0,T.jsx)("span",{children:"300 SF"}),(0,T.jsx)("span",{children:"450 SF"}),(0,T.jsx)("span",{children:"650 SF"})]}),(0,T.jsxs)("div",{className:"doc-benchmark-row",children:[(0,T.jsx)("span",{children:"Gym"}),(0,T.jsx)("span",{children:"200 SF"}),(0,T.jsx)("span",{children:"350 SF"}),(0,T.jsx)("span",{children:"500 SF"})]}),(0,T.jsxs)("div",{className:"doc-benchmark-row",children:[(0,T.jsx)("span",{children:"Garage (per car)"}),(0,T.jsx)("span",{children:"200 SF"}),(0,T.jsx)("span",{children:"250 SF"}),(0,T.jsx)("span",{children:"300 SF"})]})]})})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Level Naming Convention"}),(0,T.jsxs)("div",{className:"doc-level-list",children:[(0,T.jsxs)("div",{className:"doc-level-item",children:[(0,T.jsx)("span",{className:"doc-level-code",children:"B1"}),(0,T.jsx)("span",{children:"Basement Level 1 (if applicable)"})]}),(0,T.jsxs)("div",{className:"doc-level-item",children:[(0,T.jsx)("span",{className:"doc-level-code",children:"L1"}),(0,T.jsx)("span",{children:"Main Level (entry grade)"})]}),(0,T.jsxs)("div",{className:"doc-level-item",children:[(0,T.jsx)("span",{className:"doc-level-code",children:"L2"}),(0,T.jsx)("span",{children:"Upper Level 1"})]}),(0,T.jsxs)("div",{className:"doc-level-item",children:[(0,T.jsx)("span",{className:"doc-level-code",children:"L3"}),(0,T.jsx)("span",{children:"Upper Level 2 (if applicable)"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Bedroom Naming Convention"}),(0,T.jsx)("p",{className:"doc-paragraph",children:"N4S uses a standardized naming convention for bedrooms to avoid confusion."}),(0,T.jsxs)("div",{className:"doc-naming-table",children:[(0,T.jsxs)("div",{className:"doc-naming-row",children:[(0,T.jsx)("strong",{children:"Primary Suite"}),(0,T.jsx)("span",{children:"Master bedroom (owners)"})]}),(0,T.jsxs)("div",{className:"doc-naming-row",children:[(0,T.jsx)("strong",{children:"Jr. Primary"}),(0,T.jsx)("span",{children:"Secondary owner's suite or older child's suite"})]}),(0,T.jsxs)("div",{className:"doc-naming-row",children:[(0,T.jsx)("strong",{children:"Guest Suite 1, 2, 3"}),(0,T.jsx)("span",{children:"Guest bedrooms with en-suite baths"})]}),(0,T.jsxs)("div",{className:"doc-naming-row",children:[(0,T.jsx)("strong",{children:"Kids Room 1, 2"}),(0,T.jsx)("span",{children:"Children's bedrooms (may share bath)"})]}),(0,T.jsxs)("div",{className:"doc-naming-row",children:[(0,T.jsx)("strong",{children:"Bunk Room"}),(0,T.jsx)("span",{children:"Multi-bed room for kids or casual guests"})]}),(0,T.jsxs)("div",{className:"doc-naming-row",children:[(0,T.jsx)("strong",{children:"Au Pair / Nanny Suite"}),(0,T.jsx)("span",{children:"Caregiver quarters near kids' rooms"})]}),(0,T.jsxs)("div",{className:"doc-naming-row",children:[(0,T.jsx)("strong",{children:"Staff Suite"}),(0,T.jsx)("span",{children:"Live-in staff quarters, typically near service"})]})]})]}),(0,T.jsxs)("div",{className:"doc-card",children:[(0,T.jsx)("h3",{className:"doc-subsection-title",children:"Glossary"}),(0,T.jsx)(xp,{title:"View Definitions",children:(0,T.jsxs)("dl",{className:"doc-glossary",children:[(0,T.jsx)("dt",{children:"Conditioned Space"}),(0,T.jsx)("dd",{children:"Interior space with heating/cooling. Counts toward total SF for permitting and appraisal."}),(0,T.jsx)("dt",{children:"Unconditioned Space"}),(0,T.jsx)("dd",{children:"Covered outdoor areas like terraces and porches. Not included in conditioned SF but important for program."}),(0,T.jsx)("dt",{children:"Circulation"}),(0,T.jsx)("dd",{children:"Hallways, stairs, landings, and passage areas. Added as a percentage on top of programmed spaces."}),(0,T.jsx)("dt",{children:"Net SF"}),(0,T.jsx)("dd",{children:"Programmed space total (rooms only, no circulation or walls)."}),(0,T.jsx)("dt",{children:"Gross SF"}),(0,T.jsx)("dd",{children:"Total buildable area including circulation, walls, and structure. Typically 15-22% larger than net."}),(0,T.jsx)("dt",{children:"Program Tier"}),(0,T.jsx)("dd",{children:"Internal classification (5K/10K/15K/20K) based on target SF. Determines space template and default sizes."}),(0,T.jsx)("dt",{children:"S/M/L"}),(0,T.jsx)("dd",{children:"Size selector (Small/Medium/Large). Each represents a tier-appropriate square footage allocation."}),(0,T.jsx)("dt",{children:"Included Space"}),(0,T.jsx)("dd",{children:"A space marked for inclusion in your program. Contributes to total SF."}),(0,T.jsx)("dt",{children:"Would-Like"}),(0,T.jsx)("dd",{children:"Space that's commonly included for your tier and profile. Pre-selected but can be removed."}),(0,T.jsx)("dt",{children:"Structure"}),(0,T.jsx)("dd",{children:"Separate building on the property (Guest House, Pool House). Has its own zone."})]})})]})]})}function kp(e){let{onClose:t}=e;const[n,i]=(0,a.useState)("overview");return(0,T.jsxs)("div",{className:"doc-container",children:[(0,T.jsxs)("div",{className:"doc-header",children:[(0,T.jsx)("div",{className:"doc-header-top",children:t&&(0,T.jsxs)("button",{className:"doc-close-btn",onClick:t,children:[(0,T.jsx)(Z,{size:16}),"Back to FYI"]})}),(0,T.jsx)("h1",{className:"doc-title",children:"Documentation"}),(0,T.jsx)("p",{className:"doc-subtitle",children:"N4S FYI \u2014 Space Programming Guide"}),(0,T.jsx)("div",{className:"doc-tabs",children:[{id:"overview",label:"Overview"},{id:"workflow",label:"Workflow"},{id:"gates",label:"Gates"},{id:"reference",label:"Reference"}].map(e=>(0,T.jsx)("button",{className:"doc-tab ".concat(n===e.id?"active":""),onClick:()=>i(e.id),children:e.label},e.id))})]}),(0,T.jsxs)("div",{className:"doc-content",children:["overview"===n&&(0,T.jsx)(Sp,{}),"workflow"===n&&(0,T.jsx)(jp,{}),"gates"===n&&(0,T.jsx)(wp,{}),"reference"===n&&(0,T.jsx)(Np,{})]}),(0,T.jsx)("style",{children:_p})]})}const _p="\n/* Base styles */\n.doc-container {\n  min-height: 100vh;\n  background-color: ".concat(hp,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.doc-header {\n  background-color: ").concat(pp,";\n  border-bottom: 1px solid ").concat(mp,";\n  padding: 1rem 1.5rem 0;\n}\n\n.doc-header-top {\n  margin-bottom: 1rem;\n}\n\n.doc-close-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(mp,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(gp,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.doc-close-btn:hover {\n  border-color: ").concat(dp,";\n  color: ").concat(dp,";\n}\n\n.doc-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.75rem;\n  font-weight: 500;\n  color: ").concat(fp,";\n  margin: 0 0 0.25rem 0;\n}\n\n.doc-subtitle {\n  font-size: 0.9375rem;\n  color: ").concat(gp,";\n  margin: 0 0 1.5rem 0;\n}\n\n.doc-tabs {\n  display: flex;\n  gap: 0;\n  border: 1px solid ").concat(mp,";\n  border-bottom: none;\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n  background-color: ").concat(hp,";\n}\n\n.doc-tab {\n  flex: 1;\n  padding: 0.875rem 1rem;\n  background-color: transparent;\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(gp,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border-right: 1px solid ").concat(mp,";\n}\n\n.doc-tab:last-child {\n  border-right: none;\n}\n\n.doc-tab:hover {\n  background-color: ").concat(pp,";\n  color: ").concat(fp,";\n}\n\n.doc-tab.active {\n  background-color: ").concat(pp,";\n  color: ").concat(dp,";\n  box-shadow: inset 0 -2px 0 ").concat(dp,";\n}\n\n.doc-content {\n  padding: 1.5rem;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.doc-tab-content {\n  animation: fadeIn 0.2s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(4px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.doc-card {\n  background-color: ").concat(pp,";\n  border: 1px solid ").concat(mp,";\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.doc-card--highlight {\n  background-color: #f8f6f1;\n  border-color: ").concat(up,";\n}\n\n.doc-section-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.375rem;\n  font-weight: 500;\n  color: ").concat(fp,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-subsection-title {\n  display: flex;\n  align-items: center;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: ").concat(fp,";\n  margin: 0 0 0.75rem 0;\n}\n\n.doc-paragraph {\n  font-size: 0.9375rem;\n  line-height: 1.6;\n  color: ").concat(fp,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-paragraph:last-child {\n  margin-bottom: 0;\n}\n\n.doc-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.doc-list li {\n  display: flex;\n  gap: 0.75rem;\n  padding: 0.75rem 0;\n  border-bottom: 1px solid ").concat(mp,";\n}\n\n.doc-list li:last-child {\n  border-bottom: none;\n}\n\n.doc-list-icon {\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.doc-list-icon.success { color: ").concat(vp,"; }\n\n.doc-list li strong {\n  display: block;\n  color: ").concat(fp,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-list li p {\n  font-size: 0.875rem;\n  color: ").concat(gp,";\n  margin: 0;\n}\n\n/* Size System */\n.doc-size-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-bottom: 1rem;\n}\n\n.doc-size-card {\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n  padding: 0.75rem;\n  background-color: ").concat(pp,";\n  border-radius: 6px;\n}\n\n.doc-size-badge {\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 700;\n  color: #fff;\n  flex-shrink: 0;\n}\n\n.doc-size-s { background-color: #90a4ae; }\n.doc-size-m { background-color: ").concat(dp,"; }\n.doc-size-l { background-color: ").concat(up,"; color: ").concat(fp,"; }\n\n.doc-size-content strong {\n  display: block;\n  color: ").concat(fp,";\n  margin-bottom: 0.25rem;\n}\n\n.doc-size-content p {\n  font-size: 0.8125rem;\n  color: ").concat(gp,";\n  margin: 0;\n}\n\n.doc-tip {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  background-color: #e3f2fd;\n  border-radius: 4px;\n  font-size: 0.8125rem;\n  color: #1565c0;\n}\n\n/* Tier Table */\n.doc-tier-table {\n  display: flex;\n  flex-direction: column;\n  border: 1px solid ").concat(mp,";\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.doc-tier-row {\n  display: grid;\n  grid-template-columns: 60px 1fr 1fr 1fr;\n  gap: 1rem;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid ").concat(mp,";\n  font-size: 0.875rem;\n}\n\n.doc-tier-row:last-child {\n  border-bottom: none;\n}\n\n.doc-tier-row--header {\n  background-color: ").concat(hp,";\n  font-weight: 600;\n  color: ").concat(gp,";\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.doc-tier-label {\n  font-weight: 600;\n  color: ").concat(dp,";\n}\n\n/* Workflow Steps */\n.doc-workflow-steps {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-bottom: 1.5rem;\n}\n\n.doc-workflow-step {\n  display: flex;\n  gap: 1rem;\n  padding: 1rem;\n  background-color: ").concat(pp,";\n  border: 1px solid ").concat(mp,";\n  border-radius: 8px;\n}\n\n.doc-workflow-number {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ").concat(dp,";\n  color: #fff;\n  border-radius: 50%;\n  font-size: 0.875rem;\n  font-weight: 600;\n  flex-shrink: 0;\n}\n\n.doc-workflow-content h4 {\n  font-size: 0.9375rem;\n  font-weight: 600;\n  color: ").concat(fp,";\n  margin: 0 0 0.25rem 0;\n}\n\n.doc-workflow-content p {\n  font-size: 0.8125rem;\n  color: ").concat(gp,";\n  margin: 0;\n  line-height: 1.5;\n}\n\n/* Zone Cards */\n.doc-zone-card {\n  background-color: ").concat(pp,";\n  border: 1px solid ").concat(mp,";\n  border-radius: 8px;\n  padding: 1.25rem;\n  margin-bottom: 0.75rem;\n  border-left: 4px solid var(--zone-color, ").concat(dp,");\n}\n\n.doc-zone-header {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.5rem;\n}\n\n.doc-zone-badge {\n  padding: 0.25rem 0.5rem;\n  background-color: var(--zone-color, ").concat(dp,");\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n}\n\n.doc-zone-title {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 1rem;\n  font-weight: 600;\n  color: ").concat(fp,";\n  margin: 0;\n}\n\n.doc-zone-description {\n  font-size: 0.875rem;\n  color: ").concat(gp,";\n  margin: 0 0 1rem 0;\n}\n\n.doc-zone-details {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n}\n\n.doc-zone-column h5 {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: ").concat(gp,";\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin: 0 0 0.5rem 0;\n}\n\n.doc-zone-spaces {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.375rem;\n}\n\n.doc-zone-space {\n  padding: 0.25rem 0.5rem;\n  background-color: ").concat(hp,";\n  border-radius: 4px;\n  font-size: 0.75rem;\n  color: ").concat(fp,";\n}\n\n.doc-zone-column ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.doc-zone-column li {\n  font-size: 0.8125rem;\n  color: ").concat(fp,";\n  padding: 0.25rem 0;\n  padding-left: 0.75rem;\n  position: relative;\n}\n\n.doc-zone-column li::before {\n  content: '\u2022';\n  position: absolute;\n  left: 0;\n  color: var(--zone-color, ").concat(dp,");\n}\n\n/* Variance Scale */\n.doc-variance-scale {\n  margin: 1rem 0;\n}\n\n.doc-variance-bar {\n  display: flex;\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.doc-variance-zone {\n  flex: 1;\n  padding: 0.5rem;\n  text-align: center;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n\n.doc-variance-danger { background-color: #ffcdd2; color: ").concat(bp,"; }\n.doc-variance-warning { background-color: #fff3e0; color: ").concat(yp,"; }\n.doc-variance-good { background-color: #c8e6c9; color: ").concat(vp,"; }\n\n.doc-variance-labels {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.6875rem;\n  color: ").concat(gp,";\n  margin-top: 0.25rem;\n}\n\n.doc-variance-notes {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-top: 1rem;\n}\n\n.doc-variance-note {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  font-size: 0.8125rem;\n  color: ").concat(fp,";\n}\n\n/* Balance Table */\n.doc-balance-table {\n  display: flex;\n  flex-direction: column;\n  border: 1px solid ").concat(mp,";\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.doc-balance-row {\n  display: grid;\n  grid-template-columns: 1fr 100px 1fr;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  border-bottom: 1px solid ").concat(mp,";\n  font-size: 0.875rem;\n}\n\n.doc-balance-row:last-child {\n  border-bottom: none;\n}\n\n.doc-balance-row--header {\n  background-color: ").concat(hp,";\n  font-weight: 600;\n  color: ").concat(gp,";\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n/* Circulation Example */\n.doc-circulation-example {\n  border: 1px solid ").concat(mp,";\n  border-radius: 6px;\n  overflow: hidden;\n  margin-bottom: 1rem;\n}\n\n.doc-circ-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  border-bottom: 1px solid ").concat(mp,";\n}\n\n.doc-circ-row:last-child {\n  border-bottom: none;\n}\n\n.doc-circ-row--total {\n  background-color: ").concat(hp,";\n  font-weight: 600;\n  color: ").concat(dp,";\n}\n\n/* Required List */\n.doc-required-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.5rem;\n}\n\n.doc-required-list li {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8125rem;\n  color: ").concat(fp,";\n}\n\n.doc-required-list li svg {\n  color: ").concat(vp,";\n  flex-shrink: 0;\n}\n\n/* Zone Code Table */\n.doc-zone-table {\n  display: flex;\n  flex-direction: column;\n  border: 1px solid ").concat(mp,";\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.doc-zone-tbl-row {\n  display: grid;\n  grid-template-columns: 100px 1fr 1fr;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  border-bottom: 1px solid ").concat(mp,";\n  font-size: 0.875rem;\n  align-items: center;\n}\n\n.doc-zone-tbl-row:last-child {\n  border-bottom: none;\n}\n\n.doc-zone-tbl-row--header {\n  background-color: ").concat(hp,";\n  font-weight: 600;\n  color: ").concat(gp,";\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.doc-zone-tbl-row code {\n  font-family: 'SF Mono', Monaco, monospace;\n  font-size: 0.75rem;\n  color: ").concat(dp,";\n}\n\n/* Benchmark Table */\n.doc-benchmark-table {\n  display: flex;\n  flex-direction: column;\n  border: 1px solid ").concat(mp,";\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.doc-benchmark-row {\n  display: grid;\n  grid-template-columns: 1fr 80px 80px 80px;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  border-bottom: 1px solid ").concat(mp,";\n  font-size: 0.875rem;\n}\n\n.doc-benchmark-row:last-child {\n  border-bottom: none;\n}\n\n.doc-benchmark-row--header {\n  background-color: ").concat(hp,";\n  font-weight: 600;\n  color: ").concat(gp,";\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n/* Level List */\n.doc-level-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.doc-level-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.5rem 0.75rem;\n  background-color: ").concat(hp,";\n  border-radius: 4px;\n  font-size: 0.875rem;\n}\n\n.doc-level-code {\n  padding: 0.25rem 0.5rem;\n  background-color: ").concat(dp,";\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  font-family: 'SF Mono', Monaco, monospace;\n}\n\n/* Naming Table */\n.doc-naming-table {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.doc-naming-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem 0;\n  font-size: 0.875rem;\n  border-bottom: 1px solid ").concat(mp,";\n}\n\n.doc-naming-row:last-child {\n  border-bottom: none;\n}\n\n.doc-naming-row strong {\n  color: ").concat(fp,";\n}\n\n.doc-naming-row span {\n  color: ").concat(gp,";\n}\n\n/* Expandable Sections */\n.doc-expandable {\n  border: 1px solid ").concat(mp,";\n  border-radius: 6px;\n  margin-bottom: 0.5rem;\n  overflow: hidden;\n}\n\n.doc-expandable-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background-color: ").concat(hp,";\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(fp,";\n  cursor: pointer;\n  text-align: left;\n}\n\n.doc-expandable-header:hover {\n  background-color: #f0f0eb;\n}\n\n.doc-expandable-content {\n  padding: 1rem;\n  border-top: 1px solid ").concat(mp,";\n}\n\n/* Glossary */\n.doc-glossary {\n  margin: 0;\n}\n\n.doc-glossary dt {\n  font-weight: 600;\n  color: ").concat(fp,";\n  margin-top: 1rem;\n}\n\n.doc-glossary dt:first-child {\n  margin-top: 0;\n}\n\n.doc-glossary dd {\n  margin: 0.25rem 0 0 0;\n  font-size: 0.875rem;\n  color: ").concat(gp,";\n  line-height: 1.5;\n}\n\n@media (max-width: 768px) {\n  .doc-tier-row {\n    grid-template-columns: 1fr 1fr;\n    gap: 0.5rem;\n  }\n  \n  .doc-zone-details {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-balance-row {\n    grid-template-columns: 1fr;\n    gap: 0.25rem;\n  }\n  \n  .doc-required-list {\n    grid-template-columns: 1fr;\n  }\n  \n  .doc-benchmark-row {\n    grid-template-columns: 1fr 1fr 1fr;\n  }\n}\n"),Cp=30,Pp=58,Fp=95,Ap=201,Lp=162,Mp=39,Rp=250,Ip=250,Tp=248,zp=100,Dp=116,Ep=139,Op=45,Bp=55,qp=72,Hp=255,Gp=255,Wp=255,Up=46,Kp=125,Vp=50,Yp=211,Zp=47,$p=47,Qp=229,Jp=229,Xp=224;function em(e){return e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function tm(e){return e.toLocaleString()}class nm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zone";this.data=e,this.mode=t,this.doc=null,this.pageWidth=612,this.pageHeight=792,this.margin=40,this.contentWidth=this.pageWidth-2*this.margin,this.currentPage=1,this.totalPages=1,this.y=0}async generate(){return this.doc=new yi("p","pt","letter"),this.addHeader(),this.addClientInfo(),this.addSummaryBox(),"level"===this.mode?this.addSpacesByLevel():this.addSpacesByZone(),this.totalPages=this.currentPage,this.addAllFooters(),this.doc}calculateTotalPages(){return 1}addHeader(){this.y=0,this.doc.setFillColor(Cp,Pp,Fp),this.doc.rect(0,0,this.pageWidth,50,"F"),this.doc.setFontSize(14),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Hp,Gp,Wp),this.doc.text("N4S Space Program",this.margin,32),this.doc.setTextColor(Ap,Lp,Mp),this.doc.setFont("helvetica","bold"),this.doc.text("FYI Report",this.pageWidth-this.margin,32,{align:"right"}),this.y=65}addClientInfo(){this.doc.setFontSize(10),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Op,Bp,qp);let e="";this.data.projectName&&(e+="Project: ".concat(this.data.projectName)),this.data.clientName&&(e&&(e+="     "),e+="Client: ".concat(this.data.clientName)),e&&(this.doc.text(e,this.margin,this.y),this.y+=12),this.doc.setFontSize(9),this.doc.setTextColor(zp,Dp,Ep),this.doc.text("Generated: ".concat(this.data.generatedAt),this.margin,this.y),this.y+=25}addSummaryBox(){const e=110,t=this.y;this.doc.setFillColor(Rp,Ip,Tp),this.doc.roundedRect(this.margin,t,this.contentWidth,e,4,4,"F"),this.doc.setFillColor(Ap,Lp,Mp),this.doc.rect(this.margin,t,4,e,"F"),this.doc.setDrawColor(Qp,Jp,Xp),this.doc.setLineWidth(.5),this.doc.roundedRect(this.margin,t,this.contentWidth,e,4,4,"S");const n=this.margin+20,a=this.margin+this.contentWidth/2+10;let i=t+20;this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Cp,Pp,Fp),this.doc.text("PROGRAM SETTINGS",n,i),i+=15,this.doc.setFont("helvetica","normal"),this.doc.setFontSize(10),this.doc.setTextColor(Op,Bp,qp);const r=this.data.settings;this.addSummaryRow(n,i,"Target SF",tm(r.targetSF)),i+=14,this.addSummaryRow(n,i,"Program Tier",r.programTier.toUpperCase()),i+=14,this.addSummaryRow(n,i,"Size Delta","\xb1".concat(r.deltaPct,"%")),i+=14,this.addSummaryRow(n,i,"Basement",r.hasBasement?"Yes":"No"),i=t+20,this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Cp,Pp,Fp),this.doc.text("TOTALS",a,i),i+=15,this.doc.setFont("helvetica","normal"),this.doc.setFontSize(10),this.doc.setTextColor(Op,Bp,qp);const o=this.data.totals;this.addSummaryRow(a,i,"Net Conditioned","".concat(tm(o.net)," SF")),i+=14,this.addSummaryRow(a,i,"Circulation (".concat(o.circulationPct,"%)"),"".concat(tm(o.circulation)," SF")),i+=14,this.doc.setFont("helvetica","bold"),this.addSummaryRow(a,i,"Total","".concat(tm(o.total)," SF")),i+=14;const s=o.deltaFromTarget,l="".concat(s>=0?"+":"").concat(tm(s)," SF");s>0?this.doc.setTextColor(Yp,Zp,$p):s<0&&this.doc.setTextColor(Up,Kp,Vp),this.doc.setFont("helvetica","normal"),this.addSummaryRow(a,i,"Delta from Target",l),o.outdoorTotal>0&&(i+=14,this.doc.setTextColor(zp,Dp,Ep),this.addSummaryRow(a,i,"Outdoor (exterior)","".concat(tm(o.outdoorTotal)," SF"))),this.y=t+e+20}addSummaryRow(e,t,n,a){this.doc.text(n,e,t),this.doc.text(a,e+180,t,{align:"right"})}addSpacesByZone(){this.addSectionHeader("Spaces by Zone"),this.data.zonesData.forEach(e=>{0!==e.spaces.length&&(this.checkPageBreak(80),this.addZoneSection(e))})}addZoneSection(e){this.doc.setFillColor(Cp,Pp,Fp),this.doc.roundedRect(this.margin,this.y,this.contentWidth,24,3,3,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Hp,Gp,Wp),this.doc.text(e.name,this.margin+10,this.y+16),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ap,Lp,Mp),this.doc.text("".concat(tm(e.totalSF)," SF"),this.pageWidth-this.margin-10,this.y+16,{align:"right"}),this.y+=32,this.addTableHeader(),e.spaces.forEach(e=>{this.checkPageBreak(20),this.addSpaceRow(e)}),this.y+=15}addSpacesByLevel(){this.addSectionHeader("Spaces by Level");const e=this.groupSpacesByLevel(),t=[2,1,-1,0],n=Object.keys(e).map(Number).sort((e,n)=>t.indexOf(e)-t.indexOf(n));n.forEach(t=>{const n=e[t];n&&0!==n.length&&(this.checkPageBreak(80),this.addLevelSection(t,n))})}groupSpacesByLevel(){const e={};return this.data.zonesData.forEach(t=>{t.spaces.forEach(n=>{const a=n.level||1;e[a]||(e[a]=[]),e[a].push(s(s({},n),{},{zoneName:t.name,zoneCode:t.code}))})}),e}addLevelSection(e,t){const n=-1===e?"Basement":0===e?"Lower Level":"Level ".concat(e),a=1===e?"(Arrival Level)":"",i=t.reduce((e,t)=>e+t.area,0);this.doc.setFillColor(Cp,Pp,Fp),this.doc.roundedRect(this.margin,this.y,this.contentWidth,24,3,3,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Hp,Gp,Wp),this.doc.text("".concat(n," ").concat(a),this.margin+10,this.y+16),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ap,Lp,Mp),this.doc.text("".concat(tm(i)," SF"),this.pageWidth-this.margin-10,this.y+16,{align:"right"}),this.y+=32,this.addTableHeaderForLevel(),t.forEach(e=>{this.checkPageBreak(20),this.addSpaceRowForLevel(e)}),this.y+=15}addSectionHeader(e){this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Cp,Pp,Fp),this.doc.text(e,this.margin,this.y),this.y+=20}addTableHeader(){const e=this.y;this.doc.setFillColor(Rp,Ip,Tp),this.doc.rect(this.margin,e-4,this.contentWidth,16,"F"),this.doc.setFontSize(8),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(zp,Dp,Ep),this.doc.text("SPACE",this.margin+5,e+6),this.doc.text("SIZE",this.margin+200,e+6),this.doc.text("AREA",this.margin+250,e+6),this.doc.text("LEVEL",this.margin+310,e+6),this.doc.text("NOTES",this.margin+360,e+6),this.doc.setDrawColor(Qp,Jp,Xp),this.doc.setLineWidth(.5),this.doc.line(this.margin,e+12,this.margin+this.contentWidth,e+12),this.y+=18}addTableHeaderForLevel(){const e=this.y;this.doc.setFillColor(Rp,Ip,Tp),this.doc.rect(this.margin,e-4,this.contentWidth,16,"F"),this.doc.setFontSize(8),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(zp,Dp,Ep),this.doc.text("SPACE",this.margin+5,e+6),this.doc.text("ZONE",this.margin+180,e+6),this.doc.text("SIZE",this.margin+280,e+6),this.doc.text("AREA",this.margin+330,e+6),this.doc.text("NOTES",this.margin+400,e+6),this.doc.setDrawColor(Qp,Jp,Xp),this.doc.setLineWidth(.5),this.doc.line(this.margin,e+12,this.margin+this.contentWidth,e+12),this.y+=18}addSpaceRow(e){const t=this.y;this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Op,Bp,qp);const n=e.name.length>28?e.name.substring(0,26)+"...":e.name;this.doc.text(n,this.margin+5,t),this.doc.text(e.size,this.margin+200,t),this.doc.text("".concat(tm(e.area)," SF"),this.margin+250,t);const a=-1===e.level?"B":"L".concat(e.level);if(this.doc.text(a,this.margin+310,t),e.notes){this.doc.setFontSize(8),this.doc.setTextColor(zp,Dp,Ep);const n=e.notes.length>25?e.notes.substring(0,23)+"...":e.notes;this.doc.text(n,this.margin+360,t)}this.doc.setDrawColor(240,240,240),this.doc.setLineWidth(.3),this.doc.line(this.margin,t+6,this.margin+this.contentWidth,t+6),this.y+=14}addSpaceRowForLevel(e){const t=this.y;this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Op,Bp,qp);const n=e.name.length>24?e.name.substring(0,22)+"...":e.name;this.doc.text(n,this.margin+5,t),this.doc.setFontSize(8),this.doc.setTextColor(zp,Dp,Ep);const a=e.zoneName.length>15?e.zoneName.substring(0,13)+"...":e.zoneName;if(this.doc.text(a,this.margin+180,t),this.doc.setFontSize(9),this.doc.setTextColor(Op,Bp,qp),this.doc.text(e.size,this.margin+280,t),this.doc.text("".concat(tm(e.area)," SF"),this.margin+330,t),e.notes){this.doc.setFontSize(8),this.doc.setTextColor(zp,Dp,Ep);const n=e.notes.length>20?e.notes.substring(0,18)+"...":e.notes;this.doc.text(n,this.margin+400,t)}this.doc.setDrawColor(240,240,240),this.doc.setLineWidth(.3),this.doc.line(this.margin,t+6,this.margin+this.contentWidth,t+6),this.y+=14}checkPageBreak(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;this.y>this.pageHeight-this.margin-e&&(this.doc.addPage(),this.currentPage++,this.y=this.margin,this.addPageHeader())}addPageHeader(){this.doc.setFillColor(Cp,Pp,Fp),this.doc.rect(0,0,this.pageWidth,30,"F"),this.doc.setFontSize(10),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Hp,Gp,Wp),this.doc.text("N4S Space Program",this.margin,20),this.doc.setTextColor(Ap,Lp,Mp),this.doc.text("FYI Report (continued)",this.pageWidth-this.margin,20,{align:"right"}),this.y=45}addAllFooters(){for(let e=1;e<=this.totalPages;e++)this.doc.setPage(e),this.addFooterToPage(e)}addFooterToPage(e){const t=this.pageHeight-25;this.doc.setDrawColor(Qp,Jp,Xp),this.doc.setLineWidth(.5),this.doc.line(this.margin,t-10,this.pageWidth-this.margin,t-10),this.doc.setFontSize(8),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(zp,Dp,Ep),this.doc.text(em(new Date),this.margin,t),this.doc.text("N4S - Not For Sale | Luxury Residential Advisory",this.pageWidth/2,t,{align:"center"}),this.doc.text("Page ".concat(e," of ").concat(this.totalPages),this.pageWidth-this.margin,t,{align:"right"})}save(){const e="level"===this.mode?"ByLevel":"ByZone",t=this.data.projectName?"FYI-Space-Program-".concat(e,"-").concat(this.data.projectName.replace(/\s+/g,"-"),".pdf"):"FYI-Space-Program-".concat(e,".pdf");this.doc.save(t)}}async function am(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zone";try{const n=new nm(e,t);await n.generate(),n.save()}catch(n){console.error("PDF generation failed:",n),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zone";const n='\n<!DOCTYPE html>\n<html>\n<head>\n  <title>N4S FYI Space Program</title>\n  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@500&display=swap" rel="stylesheet">\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body {\n      font-family: \'Inter\', -apple-system, BlinkMacSystemFont, sans-serif;\n      font-size: 11px;\n      line-height: 1.4;\n      color: #1a1a1a;\n      background: white;\n    }\n    .header-bar {\n      background: #1e3a5f;\n      padding: 15px 40px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n    .header-bar .left { color: white; font-size: 14px; }\n    .header-bar .right { color: #c9a227; font-weight: 600; font-size: 14px; }\n    .content { padding: 20px 40px; }\n    .client-info { margin-bottom: 10px; color: #2d3748; font-size: 10px; }\n    .generated { color: #64748b; font-size: 9px; margin-bottom: 20px; }\n    .summary-box {\n      background: #fafaf8;\n      border: 1px solid #e5e5e0;\n      border-left: 4px solid #c9a227;\n      border-radius: 4px;\n      padding: 15px 20px;\n      margin-bottom: 25px;\n      display: flex;\n      gap: 60px;\n    }\n    .summary-section h3 {\n      font-size: 9px;\n      font-weight: 600;\n      color: #1e3a5f;\n      text-transform: uppercase;\n      letter-spacing: 0.05em;\n      margin-bottom: 10px;\n    }\n    .summary-row {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 5px;\n      font-size: 10px;\n    }\n    .summary-row.total { font-weight: 600; }\n    .summary-row.over { color: #d32f2f; }\n    .summary-row.under { color: #2e7d32; }\n    .section-title {\n      font-family: \'Playfair Display\', Georgia, serif;\n      font-size: 16px;\n      color: #1e3a5f;\n      margin-bottom: 15px;\n    }\n    .zone-header {\n      background: #1e3a5f;\n      color: white;\n      padding: 8px 12px;\n      border-radius: 4px;\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 8px;\n    }\n    .zone-header h2 { font-size: 12px; font-weight: 600; }\n    .zone-header .sf { color: #c9a227; font-size: 11px; }\n    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n    th {\n      text-align: left;\n      padding: 6px 8px;\n      background: #fafaf8;\n      font-size: 8px;\n      font-weight: 600;\n      text-transform: uppercase;\n      color: #64748b;\n      border-bottom: 1px solid #e5e5e0;\n    }\n    td {\n      padding: 6px 8px;\n      font-size: 9px;\n      border-bottom: 1px solid #f0f0f0;\n    }\n    td.notes { color: #64748b; font-style: italic; }\n    .footer {\n      margin-top: 30px;\n      padding-top: 15px;\n      border-top: 1px solid #e5e5e0;\n      font-size: 8px;\n      color: #64748b;\n      display: flex;\n      justify-content: space-between;\n    }\n    @media print {\n      .zone { page-break-inside: avoid; }\n    }\n  </style>\n</head>\n<body>\n  <div class="header-bar">\n    <span class="left">N4S Space Program</span>\n    <span class="right">FYI Report</span>\n  </div>\n  <div class="content">\n    <div class="client-info">\n      '.concat(e.projectName?"Project: ".concat(e.projectName):"","\n      ").concat(e.projectName&&e.clientName?"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;":"","\n      ").concat(e.clientName?"Client: ".concat(e.clientName):"",'\n    </div>\n    <div class="generated">Generated: ').concat(e.generatedAt,'</div>\n\n    <div class="summary-box">\n      <div class="summary-section">\n        <h3>Program Settings</h3>\n        <div class="summary-row"><span>Target SF</span><strong>').concat(e.settings.targetSF.toLocaleString(),'</strong></div>\n        <div class="summary-row"><span>Program Tier</span><span>').concat(e.settings.programTier.toUpperCase(),'</span></div>\n        <div class="summary-row"><span>Size Delta</span><span>\xb1').concat(e.settings.deltaPct,'%</span></div>\n        <div class="summary-row"><span>Basement</span><span>').concat(e.settings.hasBasement?"Yes":"No",'</span></div>\n      </div>\n      <div class="summary-section">\n        <h3>Totals</h3>\n        <div class="summary-row"><span>Net Conditioned</span><span>').concat(e.totals.net.toLocaleString(),' SF</span></div>\n        <div class="summary-row"><span>Circulation (').concat(e.totals.circulationPct,"%)</span><span>").concat(e.totals.circulation.toLocaleString(),' SF</span></div>\n        <div class="summary-row total"><span>Total</span><strong>').concat(e.totals.total.toLocaleString(),' SF</strong></div>\n        <div class="summary-row ').concat(e.totals.deltaFromTarget>0?"over":e.totals.deltaFromTarget<0?"under":"",'">\n          <span>Delta from Target</span>\n          <span>').concat(e.totals.deltaFromTarget>0?"+":"").concat(e.totals.deltaFromTarget.toLocaleString()," SF</span>\n        </div>\n        ").concat(e.totals.outdoorTotal>0?'<div class="summary-row"><span>Outdoor (exterior)</span><span>'.concat(e.totals.outdoorTotal.toLocaleString()," SF</span></div>"):"",'\n      </div>\n    </div>\n\n    <h1 class="section-title">Spaces by ').concat("level"===t?"Level":"Zone","</h1>\n\n    ").concat(e.zonesData.filter(e=>e.spaces.length>0).map(e=>'\n    <div class="zone">\n      <div class="zone-header">\n        <h2>'.concat(e.name,'</h2>\n        <span class="sf">').concat(e.totalSF.toLocaleString(),' SF</span>\n      </div>\n      <table>\n        <thead>\n          <tr>\n            <th style="width:35%">Space</th>\n            <th style="width:10%">Size</th>\n            <th style="width:15%">Area</th>\n            <th style="width:10%">Level</th>\n            <th style="width:30%">Notes</th>\n          </tr>\n        </thead>\n        <tbody>\n          ').concat(e.spaces.map(e=>"\n          <tr>\n            <td>".concat(e.name,"</td>\n            <td>").concat(e.size,"</td>\n            <td>").concat(e.area.toLocaleString()," SF</td>\n            <td>").concat(-1===e.level?"B":"L"+e.level,'</td>\n            <td class="notes">').concat(e.notes||"\u2014","</td>\n          </tr>\n          ")).join(""),"\n        </tbody>\n      </table>\n    </div>\n    ")).join(""),'\n\n    <div class="footer">\n      <span>').concat(em(new Date),"</span>\n      <span>N4S - Not For Sale | Luxury Residential Advisory</span>\n      <span>Page 1 of 1</span>\n    </div>\n  </div>\n  <script>window.onload = function() { window.print(); };<\/script>\n</body>\n</html>\n  ").trim(),a=window.open("","_blank");a&&(a.document.write(n),a.document.close())}(e,t)}}function im(e,t,n,a,i,r,o,s,l){const c=_h.filter(e=>"Z9_GH"!==e.code&&"Z10_PH"!==e.code),d=c.map(e=>{const n=r(e.code).filter(e=>{var n;return null===(n=t[e.code])||void 0===n?void 0:n.included}).map(e=>({code:e.code,name:e.name,size:t[e.code].size,area:o(e.code),level:t[e.code].level||e.defaultLevel,notes:t[e.code].notes}));return{code:e.code,name:e.name,spaces:n,totalSF:n.reduce((e,t)=>e+t.area,0)}}),u=(null===a||void 0===a?void 0:a.main)||n,h={net:u.net,circulation:u.circulation,circulationPct:u.net>0?(u.circulation/u.net*100).toFixed(1):"0.0",total:u.total,deltaFromTarget:u.total-e.targetSF,byLevel:u.byLevel||{},outdoorTotal:n.outdoorTotal||0,targetSF:e.targetSF};return{settings:e,selections:t,totals:h,structureTotals:a,availableLevels:i,zonesData:d,projectName:s,clientName:l,generatedAt:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}}const rm=e=>{var t,n;let{showDocs:i,onCloseDocs:r}=e;const{kycData:o,clientData:l,fyiData:c,updateFYISelection:d,updateFYISettings:u,updateFYIData:h,initializeFYISelections:p,saveNow:m,isSaving:f,hasUnsavedChanges:g,lastSaved:v,isLoading:y}=W(),[b,x]=(0,a.useState)(!1),[S,j]=(0,a.useState)("main"),[w,N]=(0,a.useState)(null),[k,_]=(0,a.useState)(null),[C,P]=(0,a.useState)(!1),F=(0,a.useMemo)(()=>{var e,t,n,a;const i=(null===o||void 0===o?void 0:o.principal)||{},r=(null===o||void 0===o?void 0:o.secondary)||{};return s(s({},i),{},{spaceRequirements:s(s({},i.spaceRequirements),{},{mustHaveSpaces:[...(null===(e=i.spaceRequirements)||void 0===e?void 0:e.mustHaveSpaces)||[],...(null===(t=r.spaceRequirements)||void 0===t?void 0:t.mustHaveSpaces)||[]],niceToHaveSpaces:[...(null===(n=i.spaceRequirements)||void 0===n?void 0:n.niceToHaveSpaces)||[],...(null===(a=r.spaceRequirements)||void 0===a?void 0:a.niceToHaveSpaces)||[]]})})},[o]),A=(0,a.useMemo)(()=>{var e,t;const n=(null===F||void 0===F?void 0:F.projectParameters)||{};return function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const t=[];for(let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n>0;n--){const e=n+1;t.push({value:e,label:"L".concat(e),isAboveArrival:!0})}t.push({value:1,label:"L1 (Arrival)",isArrival:!0});for(let n=1;n<=e;n++)t.push({value:-n,label:"L-".concat(n),isBelowArrival:!0});return t}(null!==(e=n.levelsAboveArrival)&&void 0!==e?e:1,null!==(t=n.levelsBelowArrival)&&void 0!==t?t:0)},[F]),L=(0,a.useMemo)(()=>{const e=(null===F||void 0===F?void 0:F.projectParameters)||{};return{main:{enabled:!0},guestHouse:{enabled:e.hasGuestHouse||!1},poolHouse:{enabled:e.hasPoolHouse||!1}}},[F]),{settings:M,selections:R,activeZone:I,setActiveZone:z,hasSelections:D,totals:E,zonesWithCounts:O,structureTotals:B,updateSettings:q,updateSpaceSelection:H,toggleSpaceIncluded:G,setSpaceSize:U,setSpaceLevel:K,resetToDefaults:V,getSpaceSelection:Y,getSpacesForZone:Z,calculateArea:$,generateMVPBrief:Q}=Jh(c,d,u,p);(0,a.useEffect)(()=>{if(!y&&!C){if(!D){var e,t;console.log("[FYI] No selections found, initializing defaults");const n=(null===F||void 0===F||null===(e=F.projectParameters)||void 0===e?void 0:e.targetGSF)||1e4;let a="10k";a=n<7500?"5k":n<12500?"10k":n<17500?"15k":"20k";u({targetSF:n,programTier:a,circulationPct:{"5k":.12,"10k":.13,"15k":.14,"20k":.15}[a],hasBasement:(null===F||void 0===F||null===(t=F.projectParameters)||void 0===t?void 0:t.hasBasement)||!1});const i=$h(a,!1);p(i)}P(!0)}},[y,C,D,F,u,p]);const J=(0,a.useCallback)(async()=>{await m()?(_("Saved successfully!"),setTimeout(()=>_(null),3e3)):(_("Save failed - please try again"),setTimeout(()=>_(null),5e3))},[m]),X=(0,a.useMemo)(()=>Lh(S),[S]),ee=(0,a.useMemo)(()=>{const e=X.map(e=>e.code);return O.filter(t=>e.includes(t.code))},[O,X]),te=(0,a.useMemo)(()=>{let e=Z(I);return null!==w&&(e=e.filter(e=>Y(e.code).level===w)),e},[I,w,Z,Y]),ne=ee.find(e=>e.code===I),ae=(0,a.useCallback)(e=>{j(e),N(null);const t=Lh(e);t.length>0&&z(t[0].code)},[z]),ie=(0,a.useCallback)(e=>{N(e)},[]),re=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zone";x(!0);try{var t;const n=(null===l||void 0===l?void 0:l.projectName)||(null===F||void 0===F||null===(t=F.projectParameters)||void 0===t?void 0:t.projectName)||"",a=null!==F&&void 0!==F&&F.portfolioContext?"".concat(F.portfolioContext.principalFirstName||""," ").concat(F.portfolioContext.principalLastName||"").trim():"",i=im(M,R,E,B,A,Z,$,n,a);await am(i,e)}catch(n){console.error("Export failed:",n)}finally{x(!1)}},[M,R,E,B,A,Z,$,l,F]),oe=(0,a.useCallback)(async()=>{const e=Xh(Q());h({brief:e,completedAt:(new Date).toISOString()}),await J(),console.log("MVP Brief generated:",e),alert("Brief saved! Navigate to MVP module to validate adjacencies.")},[Q,h,A,J]),se=(0,a.useMemo)(()=>{var e,t,n,a,i,r,o,s,l;return{main:{enabled:!0,total:(null===B||void 0===B||null===(e=B.main)||void 0===e?void 0:e.total)||E.total,net:(null===B||void 0===B||null===(t=B.main)||void 0===t?void 0:t.net)||E.net,circulation:(null===B||void 0===B||null===(n=B.main)||void 0===n?void 0:n.circulation)||E.circulation,circulationPct:E.circulationPct,byLevel:(null===B||void 0===B||null===(a=B.main)||void 0===a?void 0:a.byLevel)||E.byLevel,spaceCount:(null===B||void 0===B||null===(i=B.main)||void 0===i?void 0:i.spaceCount)||0},guestHouse:{enabled:L.guestHouse.enabled,total:(null===B||void 0===B||null===(r=B.guestHouse)||void 0===r?void 0:r.total)||0,spaceCount:(null===B||void 0===B||null===(o=B.guestHouse)||void 0===o?void 0:o.spaceCount)||0},poolHouse:{enabled:L.poolHouse.enabled,total:(null===B||void 0===B||null===(s=B.poolHouse)||void 0===s?void 0:s.total)||0,spaceCount:(null===B||void 0===B||null===(l=B.poolHouse)||void 0===l?void 0:l.spaceCount)||0}}},[B,E,L]),le=(0,a.useMemo)(()=>{const e={};return A.forEach(t=>{var n;const a=1===t.value?"L1":"L".concat(t.value);e[a]=(null===(n=E.byLevel)||void 0===n?void 0:n[t.value])||0}),e},[A,E.byLevel]);return i?(0,T.jsx)(kp,{onClose:r}):y?(0,T.jsx)("div",{className:"fyi-module fyi-module--loading",children:(0,T.jsx)("div",{className:"fyi-module__loader",children:"Loading from server..."})}):(0,T.jsxs)("div",{className:"fyi-module",children:[(0,T.jsxs)("header",{className:"fyi-module__header",children:[(0,T.jsxs)("div",{className:"fyi-module__header-content",children:[(0,T.jsxs)("div",{className:"fyi-module__title-group",children:[(0,T.jsx)("h1",{className:"fyi-module__title",children:"FYI \u2013 Find Your Inspiration"}),(0,T.jsx)("p",{className:"fyi-module__subtitle",children:"Lifestyle Requirements Refinement"})]}),(0,T.jsxs)("div",{className:"fyi-module__save-area",children:[(0,T.jsx)("button",{className:"fyi-module__save-btn ".concat(g?"fyi-module__save-btn--unsaved":""," ").concat(f?"fyi-module__save-btn--saving":""),onClick:J,disabled:f,children:f?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("svg",{className:"fyi-module__save-spinner",viewBox:"0 0 24 24",children:(0,T.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeDasharray:"31.4",strokeDashoffset:"10",children:(0,T.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 12 12",to:"360 12 12",dur:"1s",repeatCount:"indefinite"})})}),"Saving..."]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,T.jsx)("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),(0,T.jsx)("polyline",{points:"17 21 17 13 7 13 7 21"}),(0,T.jsx)("polyline",{points:"7 3 7 8 15 8"})]}),"SAVE"]})}),g&&!f&&(0,T.jsx)("span",{className:"fyi-module__unsaved-indicator",children:"Unsaved changes"}),k&&(0,T.jsx)("span",{className:"fyi-module__save-message ".concat(k.includes("failed")?"fyi-module__save-message--error":"fyi-module__save-message--success"),children:k}),v&&!k&&!g&&(0,T.jsxs)("span",{className:"fyi-module__last-saved",children:["Saved: ",v.toLocaleTimeString()]})]}),(0,T.jsxs)("button",{className:"fyi-module__reset-btn",onClick:()=>{window.confirm("Reset all selections to defaults? This cannot be undone.")&&(V(),P(!1))},children:[(0,T.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,T.jsx)("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),(0,T.jsx)("path",{d:"M3 3v5h5"})]}),"Reset"]})]}),(null===F||void 0===F||null===(t=F.projectParameters)||void 0===t?void 0:t.targetGSF)&&(0,T.jsxs)("div",{className:"fyi-module__kyc-banner",children:[(0,T.jsx)("span",{className:"fyi-module__kyc-label",children:"From KYC:"}),(0,T.jsxs)("span",{className:"fyi-module__kyc-value",children:[F.projectParameters.targetGSF.toLocaleString()," SF target"]}),F.projectParameters.bedroomCount&&(0,T.jsxs)("span",{className:"fyi-module__kyc-value",children:[F.projectParameters.bedroomCount," bedrooms"]})]})]}),(0,T.jsxs)("div",{className:"fyi-module__content",children:[(0,T.jsxs)("aside",{className:"fyi-module__sidebar fyi-module__sidebar--left",children:[(0,T.jsx)(rp,{levels:A,sfByLevel:le,totalSF:E.net,targetSF:M.targetSF,selectedLevel:w,onLevelSelect:ie,structure:S}),(L.guestHouse.enabled||L.poolHouse.enabled)&&(0,T.jsx)(sp,{activeStructure:S,onStructureChange:ae,structures:se}),(0,T.jsx)(np,{zones:ee,activeZone:I,onZoneChange:z,totals:E})]}),(0,T.jsxs)("main",{className:"fyi-module__main",children:[(0,T.jsxs)("div",{className:"fyi-module__zone-header",children:[(0,T.jsx)("h2",{className:"fyi-module__zone-title",children:null===ne||void 0===ne?void 0:ne.name}),(0,T.jsxs)("p",{className:"fyi-module__zone-stats",children:[null===ne||void 0===ne?void 0:ne.includedCount," of ",null===ne||void 0===ne?void 0:ne.spaceCount," spaces \u2022",null===ne||void 0===ne||null===(n=ne.totalSF)||void 0===n?void 0:n.toLocaleString()," SF",null!==w&&(0,T.jsxs)("span",{className:"fyi-module__level-filter",children:[" ","\u2022 Filtered to L",w,(0,T.jsx)("button",{onClick:()=>N(null),children:"Clear"})]})]})]}),(0,T.jsx)("div",{className:"fyi-module__cards-grid",children:te.map(e=>{const t=Y(e.code),n=$(e.code);return(0,T.jsx)(ap,{space:e,selection:t,calculatedArea:n,settings:M,availableLevels:A,onSizeChange:t=>U(e.code,t),onToggleIncluded:()=>G(e.code),onLevelChange:t=>K(e.code,t),onNotesChange:t=>H(e.code,{notes:t})},e.code)})}),0===te.length&&(0,T.jsx)("div",{className:"fyi-module__empty",children:null!==w?(0,T.jsxs)("p",{children:["No spaces on this level. ",(0,T.jsx)("button",{onClick:()=>N(null),children:"Show all"})]}):(0,T.jsx)("p",{children:"No spaces available for this zone."})})]}),(0,T.jsx)("aside",{className:"fyi-module__sidebar fyi-module__sidebar--right",children:(0,T.jsx)(ip,{settings:M,totals:E,selections:R,structureTotals:se,availableLevels:A,onSettingsChange:q,onExportPDF:re,onProceedToMVP:oe,isExporting:b})})]})]})},om=d("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),sm=d("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16v0H5v0h0a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"yh07w9"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]),lm=d("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),cm=d("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),dm=d("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),um=d("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),hm=d("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),pm=d("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),mm=d("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),fm=d("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),gm=d("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),vm="#1e3a5f",ym="#E4C0BE",bm="#fafaf8",xm="#ffffff",Sm="#e5e5e0",jm="#1a1a1a",wm="#6b6b6b",Nm="#2e7d32",km="#f57c00",_m=e=>{let{title:t,children:n,defaultOpen:i=!1,icon:r}=e;const[o,s]=(0,a.useState)(i);return(0,T.jsxs)("div",{style:{background:xm,border:"1px solid ".concat(Sm),borderRadius:"8px",marginBottom:"1rem",overflow:"hidden"},children:[(0,T.jsxs)("button",{onClick:()=>s(!o),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem",background:"none",border:"none",cursor:"pointer",textAlign:"left"},children:[r&&(0,T.jsx)(r,{size:18,color:vm}),(0,T.jsx)("span",{style:{flex:1,fontWeight:600,color:jm},children:t}),o?(0,T.jsx)(C,{size:18}):(0,T.jsx)(x,{size:18})]}),o&&(0,T.jsx)("div",{style:{padding:"0 1rem 1rem 1rem"},children:n})]})},Cm="\n/* Base container */\n.kym-doc-container {\n  min-height: 100vh;\n  background-color: ".concat(bm,";\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n/* Header - matches FYI style */\n.kym-doc-header {\n  background-color: ").concat(xm,";\n  border-bottom: 1px solid ").concat(Sm,";\n  padding: 1rem 1.5rem 0;\n}\n\n.kym-doc-header-top {\n  margin-bottom: 1rem;\n}\n\n.kym-doc-close-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: transparent;\n  border: 1px solid ").concat(Sm,";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ").concat(wm,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.kym-doc-close-btn:hover {\n  border-color: ").concat(vm,";\n  color: ").concat(vm,";\n}\n\n.kym-doc-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.75rem;\n  font-weight: 500;\n  color: ").concat(jm,";\n  margin: 0 0 0.25rem 0;\n}\n\n.kym-doc-subtitle {\n  font-size: 0.9375rem;\n  color: ").concat(wm,";\n  margin: 0 0 1.5rem 0;\n}\n\n/* Tabs - matches FYI style */\n.kym-doc-tabs {\n  display: flex;\n  gap: 0;\n  border: 1px solid ").concat(Sm,";\n  border-bottom: none;\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n  background-color: ").concat(bm,";\n}\n\n.kym-doc-tab {\n  flex: 1;\n  padding: 0.875rem 1rem;\n  background-color: transparent;\n  border: none;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  color: ").concat(wm,";\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border-right: 1px solid ").concat(Sm,";\n}\n\n.kym-doc-tab:last-child {\n  border-right: none;\n}\n\n.kym-doc-tab:hover {\n  background-color: ").concat(xm,";\n}\n\n.kym-doc-tab.active {\n  background-color: ").concat(xm,";\n  color: ").concat(jm,";\n}\n\n/* Content area */\n.kym-doc-content {\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n}\n\n.kym-doc-tab-content {\n  max-width: 900px;\n}\n\n.kym-doc-card {\n  background-color: ").concat(xm,";\n  border: 1px solid ").concat(Sm,";\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n}\n\n.kym-doc-section-title {\n  font-family: 'Playfair Display', Georgia, serif;\n  font-size: 1.25rem;\n  font-weight: 500;\n  color: ").concat(jm,";\n  margin: 0 0 1rem 0;\n}\n\n.kym-doc-paragraph {\n  font-size: 0.9375rem;\n  line-height: 1.6;\n  color: ").concat(jm,";\n  margin: 0 0 1rem 0;\n}\n\n/* Feature grid */\n.kym-doc-feature-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n}\n\n.kym-doc-feature-card {\n  background-color: ").concat(xm,";\n  border: 1px solid ").concat(Sm,";\n  border-radius: 8px;\n  padding: 1rem;\n}\n\n.kym-doc-feature-header {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.5rem;\n}\n\n.kym-doc-feature-header h3 {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: ").concat(jm,";\n}\n\n.kym-doc-feature-card p {\n  font-size: 0.875rem;\n  color: ").concat(wm,";\n  margin: 0;\n  line-height: 1.5;\n}\n\n/* Lists */\n.kym-doc-list {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.kym-doc-list li {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 0.5rem 0;\n  font-size: 0.9375rem;\n  line-height: 1.5;\n}\n\n.kym-doc-icon {\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.kym-doc-icon.success {\n  color: ").concat(Nm,";\n}\n\n.kym-doc-icon.warning {\n  color: ").concat(km,";\n}\n"),Pm=e=>{let{onClose:t}=e;const[n,i]=(0,a.useState)("overview");return(0,T.jsxs)("div",{className:"kym-doc-container",children:[(0,T.jsxs)("div",{className:"kym-doc-header",children:[(0,T.jsx)("div",{className:"kym-doc-header-top",children:t&&(0,T.jsxs)("button",{className:"kym-doc-close-btn",onClick:t,children:[(0,T.jsx)(Z,{size:16}),"Back to KYM"]})}),(0,T.jsx)("h1",{className:"kym-doc-title",children:"Documentation"}),(0,T.jsx)("p",{className:"kym-doc-subtitle",children:"N4S KYM \u2014 Market Intelligence for Luxury Residential Development"}),(0,T.jsx)("div",{className:"kym-doc-tabs",children:[{id:"overview",label:"Overview"},{id:"workflow",label:"Workflow"},{id:"gates",label:"Gates"},{id:"reference",label:"Reference"}].map(e=>(0,T.jsx)("button",{className:"kym-doc-tab ".concat(n===e.id?"active":""),onClick:()=>i(e.id),children:e.label},e.id))})]}),(0,T.jsxs)("div",{className:"kym-doc-content",children:["overview"===n&&(0,T.jsxs)("div",{className:"kym-doc-tab-content",children:[(0,T.jsxs)("div",{className:"kym-doc-card",children:[(0,T.jsx)("h2",{className:"kym-doc-section-title",children:"What is KYM?"}),(0,T.jsxs)("p",{className:"kym-doc-paragraph",children:[(0,T.jsx)("strong",{children:"Know Your Market (KYM)"})," provides market intelligence to validate your luxury residential development decisions. It analyzes local market trends, comparable properties, and demographic data to ensure your project is appropriately positioned."]})]}),(0,T.jsxs)("div",{className:"kym-doc-feature-grid",children:[(0,T.jsxs)("div",{className:"kym-doc-feature-card",children:[(0,T.jsxs)("div",{className:"kym-doc-feature-header",children:[(0,T.jsx)(V,{size:20,color:vm}),(0,T.jsx)("h3",{children:"Market Analysis"})]}),(0,T.jsx)("p",{children:"Growth rates, price trends, listing duration, and demand indices for your target market."})]}),(0,T.jsxs)("div",{className:"kym-doc-feature-card",children:[(0,T.jsxs)("div",{className:"kym-doc-feature-header",children:[(0,T.jsx)(u,{size:20,color:vm}),(0,T.jsx)("h3",{children:"Comparable Properties"})]}),(0,T.jsx)("p",{children:"Live property data from luxury markets with filtering by price, size, and features."})]}),(0,T.jsxs)("div",{className:"kym-doc-feature-card",children:[(0,T.jsxs)("div",{className:"kym-doc-feature-header",children:[(0,T.jsx)(h,{size:20,color:vm}),(0,T.jsx)("h3",{children:"Demographics"})]}),(0,T.jsx)("p",{children:"Population, income, education analysis plus target buyer persona identification."})]})]}),(0,T.jsx)(_m,{title:"Key Outcomes",icon:cp,defaultOpen:!0,children:(0,T.jsxs)("ul",{className:"kym-doc-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"kym-doc-icon success"})," Validate price positioning against comparable properties"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"kym-doc-icon success"})," Understand buyer demographics and priorities"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"kym-doc-icon success"})," Identify must-have features for target market"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)(K,{size:16,className:"kym-doc-icon success"})," Assess market timing and demand conditions"]})]})}),(0,T.jsxs)(_m,{title:"Alignment with N4S Workflow",icon:fm,children:[(0,T.jsx)("p",{className:"kym-doc-paragraph",children:"KYM connects your client requirements (KYC), space program (FYI), and validation decisions (MVP) with real market data. This creates a feedback loop:"}),(0,T.jsxs)("ul",{className:"kym-doc-list",children:[(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"KYC \u2192 KYM:"})," Client's target location drives market selection"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"FYI \u2192 KYM:"})," Space program compared against comparable features"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"MVP \u2192 KYM:"})," Adjacency choices validated against market priorities"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"KYM \u2192 P2:"}),' Market insights inform "Have a Story to Tell"']})]})]})]}),"workflow"===n&&(0,T.jsxs)("div",{className:"kym-doc-tab-content",children:[(0,T.jsx)("div",{className:"kym-doc-card",children:(0,T.jsx)("h2",{className:"kym-doc-section-title",children:"KYM Workflow"})}),(0,T.jsx)(_m,{title:"Step 1: Select Location",icon:cm,defaultOpen:!0,children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,T.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:ym,borderRadius:"50%",fontWeight:600,flexShrink:0},children:"1"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{style:{margin:"0 0 0.75rem 0",fontSize:"0.9375rem"},children:"Choose your target market using the location selector. The system defaults to your client's project location from KYC if available."}),(0,T.jsxs)("div",{style:{background:bm,padding:"0.75rem",borderRadius:"6px",fontSize:"0.8125rem"},children:[(0,T.jsx)("strong",{children:"Tip:"})," Enter any US ZIP code or select from pre-configured luxury markets (Beverly Hills, Malibu, Miami Beach, etc.)"]})]})]})}),(0,T.jsx)(_m,{title:"Step 2: Review Market Analysis",icon:V,children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,T.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:ym,borderRadius:"50%",fontWeight:600,flexShrink:0},children:"2"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{style:{margin:"0 0 0.75rem 0",fontSize:"0.9375rem"},children:"Analyze market KPIs including growth rate, median price/SF, listing duration, and demand index. Review 12-month trend data."}),(0,T.jsxs)("p",{style:{margin:0,fontSize:"0.8125rem",color:wm},children:[(0,T.jsx)("strong",{children:"Time estimate:"})," 5-10 minutes"]})]})]})}),(0,T.jsx)(_m,{title:"Step 3: Explore Comparable Properties",icon:u,children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,T.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:ym,borderRadius:"50%",fontWeight:600,flexShrink:0},children:"3"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{style:{margin:"0 0 0.75rem 0",fontSize:"0.9375rem"},children:"Filter comparable properties by price range, square footage, and features. Compare against your FYI space program."}),(0,T.jsxs)("p",{style:{margin:0,fontSize:"0.8125rem",color:wm},children:[(0,T.jsx)("strong",{children:"Time estimate:"})," 10-15 minutes"]})]})]})}),(0,T.jsx)(_m,{title:"Step 4: Analyze Demographics",icon:h,children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,T.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:ym,borderRadius:"50%",fontWeight:600,flexShrink:0},children:"4"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{style:{margin:"0 0 0.75rem 0",fontSize:"0.9375rem"},children:"Review buyer personas and feature priorities. Validate that your space program aligns with target buyer expectations."}),(0,T.jsxs)("p",{style:{margin:0,fontSize:"0.8125rem",color:wm},children:[(0,T.jsx)("strong",{children:"Time estimate:"})," 10-15 minutes"]})]})]})}),(0,T.jsx)(_m,{title:"Step 5: Generate Insights Report",icon:S,children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,T.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:ym,borderRadius:"50%",fontWeight:600,flexShrink:0},children:"5"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{style:{margin:"0 0 0.75rem 0",fontSize:"0.9375rem"},children:'Export a market positioning report to share with stakeholders. This feeds into the P2 "Have a Story to Tell" phase.'}),(0,T.jsxs)("p",{style:{margin:0,fontSize:"0.8125rem",color:wm},children:[(0,T.jsx)("strong",{children:"Coming Soon:"})," PDF export with branding options"]})]})]})})]}),"gates"===n&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h2",{style:{fontFamily:"'Playfair Display', Georgia, serif",fontSize:"1.25rem",color:vm,marginBottom:"1rem"},children:"Gates & Validation"}),(0,T.jsxs)(_m,{title:"Market Positioning Gate",icon:K,defaultOpen:!0,children:[(0,T.jsx)("p",{style:{fontSize:"0.9375rem",marginBottom:"1rem"},children:"Before proceeding to VMX (Vision Matrix), validate market positioning:"}),(0,T.jsxs)("div",{style:{background:bm,padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,T.jsx)(K,{size:16,color:Nm}),(0,T.jsx)("strong",{style:{fontSize:"0.875rem"},children:"Target $/SF Within Market Range"})]}),(0,T.jsx)("p",{style:{fontSize:"0.8125rem",margin:0,color:wm},children:"Your project's expected price per square foot should fall within the 25th-75th percentile of comparable properties."})]}),(0,T.jsxs)("div",{style:{background:bm,padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,T.jsx)(K,{size:16,color:Nm}),(0,T.jsx)("strong",{style:{fontSize:"0.875rem"},children:"Feature Alignment 75%+"})]}),(0,T.jsx)("p",{style:{fontSize:"0.8125rem",margin:0,color:wm},children:"At least 75% of your FYI space program features match buyer priority features."})]}),(0,T.jsxs)("div",{style:{background:bm,padding:"1rem",borderRadius:"8px"},children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,T.jsx)(K,{size:16,color:Nm}),(0,T.jsx)("strong",{style:{fontSize:"0.875rem"},children:"Demand Index Above 5.0"})]}),(0,T.jsx)("p",{style:{fontSize:"0.8125rem",margin:0,color:wm},children:"Market demand should be healthy (above 5.0) for luxury development timing."})]})]}),(0,T.jsxs)(_m,{title:"Warning Indicators",icon:Ze,children:[(0,T.jsxs)("div",{style:{background:"#fef3c7",padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem"},children:[(0,T.jsx)("strong",{style:{fontSize:"0.875rem",color:"#92400e"},children:"High Listing Duration (90+ days)"}),(0,T.jsx)("p",{style:{fontSize:"0.8125rem",margin:"0.25rem 0 0 0",color:"#92400e"},children:"Properties taking longer to sell may indicate softening demand."})]}),(0,T.jsxs)("div",{style:{background:"#fef3c7",padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem"},children:[(0,T.jsx)("strong",{style:{fontSize:"0.875rem",color:"#92400e"},children:"Negative Growth Rate"}),(0,T.jsx)("p",{style:{fontSize:"0.8125rem",margin:"0.25rem 0 0 0",color:"#92400e"},children:"Market contraction suggests timing consideration."})]}),(0,T.jsxs)("div",{style:{background:"#fef3c7",padding:"1rem",borderRadius:"8px"},children:[(0,T.jsx)("strong",{style:{fontSize:"0.875rem",color:"#92400e"},children:"Price Premium 50%+ Above Median"}),(0,T.jsx)("p",{style:{fontSize:"0.8125rem",margin:"0.25rem 0 0 0",color:"#92400e"},children:"Significant premium positioning requires strong differentiation story."})]})]})]}),"reference"===n&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h2",{style:{fontFamily:"'Playfair Display', Georgia, serif",fontSize:"1.25rem",color:vm,marginBottom:"1rem"},children:"Reference"}),(0,T.jsx)(_m,{title:"Data Sources",icon:gm,defaultOpen:!0,children:(0,T.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{style:{background:bm},children:[(0,T.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"1px solid ".concat(Sm)},children:"Source"}),(0,T.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"1px solid ".concat(Sm)},children:"Data"}),(0,T.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"1px solid ".concat(Sm)},children:"Status"})]})}),(0,T.jsxs)("tbody",{children:[(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:"Realtor.com (RapidAPI)"}),(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:"Property listings"}),(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:(0,T.jsx)("span",{style:{padding:"0.125rem 0.5rem",background:"#dcfce7",color:"#166534",borderRadius:"4px",fontSize:"0.75rem"},children:"Active"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:"MLS Direct"}),(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:"Property listings"}),(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:(0,T.jsx)("span",{style:{padding:"0.125rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"4px",fontSize:"0.75rem"},children:"Planned"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:"ZipSmart.ai"}),(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:"Demographics"}),(0,T.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid ".concat(Sm)},children:(0,T.jsx)("span",{style:{padding:"0.125rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"4px",fontSize:"0.75rem"},children:"Planned"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{padding:"0.75rem"},children:"Generated Data"}),(0,T.jsx)("td",{style:{padding:"0.75rem"},children:"Fallback samples"}),(0,T.jsx)("td",{style:{padding:"0.75rem"},children:(0,T.jsx)("span",{style:{padding:"0.125rem 0.5rem",background:"#dbeafe",color:"#1e40af",borderRadius:"4px",fontSize:"0.75rem"},children:"Default"})})]})]})]})}),(0,T.jsx)(_m,{title:"Market KPIs Glossary",icon:gm,children:(0,T.jsxs)("dl",{style:{margin:0},children:[(0,T.jsx)("dt",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Growth Rate"}),(0,T.jsx)("dd",{style:{margin:"0 0 1rem 0",fontSize:"0.875rem",color:wm},children:"Year-over-year change in median sale prices. Positive indicates appreciation."}),(0,T.jsx)("dt",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Median Price/SF"}),(0,T.jsx)("dd",{style:{margin:"0 0 1rem 0",fontSize:"0.875rem",color:wm},children:"Middle value of price per square foot across all comparables."}),(0,T.jsx)("dt",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Listing Duration"}),(0,T.jsx)("dd",{style:{margin:"0 0 1rem 0",fontSize:"0.875rem",color:wm},children:"Average days on market before sale. Lower indicates stronger demand."}),(0,T.jsx)("dt",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Demand Index"}),(0,T.jsx)("dd",{style:{margin:"0 0 0 0",fontSize:"0.875rem",color:wm},children:"1-10 scale combining buyer activity, inventory levels, and pricing trends. Above 7 = seller's market, below 5 = buyer's market."})]})}),(0,T.jsx)(_m,{title:"Buyer Persona Categories",icon:h,children:(0,T.jsxs)("ul",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:1.8,fontSize:"0.875rem"},children:[(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Tech Entrepreneur:"})," Startup founders, tech executives (35-50, $5M+)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Entertainment Executive:"})," Studio/media industry leaders (40-60, $3M+)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"International Investor:"})," Global wealth holders seeking US assets (45-65, $10M+)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Second-Generation Wealth:"})," Family office beneficiaries (30-45, inherited)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Professional Athlete:"})," Active/retired sports professionals (25-45, variable)"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Finance Executive:"})," Hedge fund, PE, banking leadership (40-60, $5M+)"]})]})}),(0,T.jsx)(_m,{title:"Configuration",icon:w,children:(0,T.jsxs)("div",{style:{background:bm,padding:"1rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.8125rem",lineHeight:1.6},children:[(0,T.jsx)("div",{children:(0,T.jsx)("strong",{children:"Environment Variables:"})}),(0,T.jsxs)("div",{style:{marginTop:"0.5rem"},children:["RAPIDAPI_KEY - Enables live Realtor.com data",(0,T.jsx)("br",{}),"MLS_API_KEY - Enables direct MLS access (planned)",(0,T.jsx)("br",{}),"ZIPSMART_API_KEY - Enables demographic API (planned)"]})]})})]})]}),(0,T.jsx)("style",{children:Cm})]})},Fm="6184ec400fmsh07022eccfa446eep1d0cdbjsn47d01db170dc",Am=new Map,Lm=()=>Boolean(!0),Mm=async e=>{const t=e.replace(/\D/g,"").slice(0,5);if(5!==t.length)return null;const n="location-".concat(t),a=Am.get(n);if(a&&Date.now()-a.timestamp<864e5)return a.data;try{const e=await fetch("".concat("https://api.zippopotam.us/us","/").concat(t));if(!e.ok){if(404===e.status)return null;throw new Error("Zippopotam API error: ".concat(e.status))}const a=await e.json();if(!a.places||0===a.places.length)return null;const i=a.places[0],r={zipCode:a["post code"],city:i["place name"],state:i["state abbreviation"],stateFull:i.state,formattedName:"".concat(i["place name"],", ").concat(i["state abbreviation"]," ").concat(a["post code"]),latitude:parseFloat(i.latitude),longitude:parseFloat(i.longitude)};return Am.set(n,{data:r,timestamp:Date.now()}),r}catch(i){return console.error("[KYM API] Location lookup error:",i),null}},Rm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{limit:n=50,minPrice:a=1e6,status:i=["for_sale","ready_to_build","pending","sold"]}=t;if(!Lm())return console.log("[KYM API] No API key configured - cannot fetch properties"),[];const r="properties-".concat(e,"-").concat(n,"-").concat(a),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18e5;const n=Am.get(e);return n&&Date.now()-n.timestamp<t?(console.log("[KYM API] Cache hit for ".concat(e)),n.data):null}(r);if(o)return o;console.log("[KYM API] Fetching properties for ".concat(e,"..."));try{var s,l;const t=await fetch("https://realty-in-us.p.rapidapi.com/properties/v3/list",{method:"POST",headers:{"Content-Type":"application/json","X-RapidAPI-Key":Fm,"X-RapidAPI-Host":"realty-in-us.p.rapidapi.com"},body:JSON.stringify({limit:n,offset:0,postal_code:e,status:i,sort:{direction:"desc",field:"list_price"},list_price:{min:a}})});if(!t.ok){const e=await t.text();return console.error("[KYM API] Error:",t.status,e),[]}const o=await t.json(),c=zm((null===(s=o.data)||void 0===s||null===(l=s.home_search)||void 0===l?void 0:l.results)||[]);return((e,t)=>{Am.set(e,{data:t,timestamp:Date.now()})})(r,c),console.log("[KYM API] Fetched ".concat(c.length," real properties")),c}catch(c){return console.error("[KYM API] Fetch error:",c),[]}},Im=e=>{if(!e)return null;let t=e.replace(/-s\.jpg/gi,"-l.jpg").replace(/-t\.jpg/gi,"-l.jpg").replace(/-m\.jpg/gi,"-l.jpg").replace(/s\.jpg$/i,"l.jpg").replace(/t\.jpg$/i,"l.jpg").replace(/m\.jpg$/i,"l.jpg").replace(/_s\.jpg/gi,"_l.jpg").replace(/_t\.jpg/gi,"_l.jpg").replace(/_m\.jpg/gi,"_l.jpg").replace(/\/s\//g,"/l/").replace(/\/t\//g,"/l/").replace(/\/m\//g,"/l/");return t.includes("?")&&(t=t.replace(/[?&](w|h|width|height|size)=\d+/gi,""),t=t.replace(/\?&/,"?").replace(/\?$/,"")),t},Tm=e=>{if(!e)return"Single Family";return{single_family:"Single Family",condo:"Condo",townhouse:"Townhouse",multi_family:"Multi Family",land:"Land",farm:"Farm/Ranch",mobile:"Mobile",apartment:"Apartment"}[e]||e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},zm=e=>e.filter(e=>{var t,n;const a=null===(t=e.location)||void 0===t||null===(n=t.address)||void 0===n?void 0:n.line;return a&&"Address unavailable"!==a}).map(e=>{var t,n,a;const i=e,r=(i.location||{}).address||{},o=i.description||{},s=o.sqft||0,l=i.list_price||0,c=s>0?Math.round(l/s):0,d=Em(i.tags||[],i.flags||{}),u=i.list_date?new Date(i.list_date):null,h=u?Math.max(0,Math.floor((Date.now()-u.getTime())/864e5)):null,p=o.type||"single_family",m=["land","farm"].includes(p);return{id:i.property_id,address:r.line,city:r.city||"",state:r.state_code||r.state||"",zipCode:r.postal_code||"",askingPrice:l,soldPrice:i.sold_price||null,pricePerSqFt:c,sqft:s,beds:o.beds||0,baths:o.baths||o.baths_full||0,acreage:o.lot_sqft?o.lot_sqft/43560:0,yearBuilt:o.year_built||null,features:d,status:Dm(i.status),daysOnMarket:h,propertyType:p,propertyTypeDisplay:Tm(p),isLand:m,imageUrl:Im((null===(t=i.primary_photo)||void 0===t?void 0:t.href)||(null===(n=i.photos)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.href)),listingUrl:i.href||null,dataSource:"realtor"}}).filter(e=>e.id&&e.askingPrice>0),Dm=e=>({for_sale:"active",ready_to_build:"active",pending:"pending",sold:"sold",off_market:"sold"}[e]||"active"),Em=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t={pool:"Swimming Pool",swimming:"Swimming Pool",waterfront:"Waterfront",view:"Views",golf:"Golf Course Access",gated:"Gated Community",smart_home:"Smart Home",wine_cellar:"Wine Cellar",wine:"Wine Cellar",theater:"Theater",theatre:"Theater",screening:"Theater",gym:"Gym",spa:"Spa",tennis:"Tennis Court",guest_house:"Guest House","guest house":"Guest House",casita:"Guest House",elevator:"Elevator",lift:"Elevator",office:"Den or Office",den:"Den or Office",study:"Den or Office",library:"Den or Office"},n=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(e=>{const a=e.toLowerCase();for(const[i,r]of Object.entries(t))a.includes(i)&&(n.includes(r)||n.push(r))}),e.is_new_construction&&n.push("New Construction"),e.is_senior_community&&n.push("Senior Community"),n},Om=async function(e){var t,n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===a.length)return null;const i=a.map(e=>e.askingPrice).sort((e,t)=>e-t),r=a.map(e=>e.pricePerSqFt).filter(e=>e>0).sort((e,t)=>e-t),o=a.map(e=>e.daysOnMarket).sort((e,t)=>e-t),s=i[Math.floor(i.length/2)]||0,l=r[Math.floor(r.length/2)]||0,c=o.length>0?Math.round(o.reduce((e,t)=>e+t,0)/o.length):60,d=c<30?12+5*Math.random():c<60?8+4*Math.random():3+5*Math.random(),u=c<30?8+2*Math.random():c<60?6+2*Math.random():4+2*Math.random(),h=Bm(s,d),p=qm.find(t=>t.zipCode===e)||{city:(null===(t=a[0])||void 0===t?void 0:t.city)||"Unknown",state:(null===(n=a[0])||void 0===n?void 0:n.state)||""};return{id:"market-".concat(e),location:"".concat(p.city,", ").concat(p.state),zipCode:e,medianPrice:s,medianPricePerSqFt:l,avgListingDuration:c,growthRate:parseFloat(d.toFixed(1)),demandIndex:parseFloat(u.toFixed(1)),historicalData:h,propertyCount:a.length,dataSource:"realtor"}},Bm=(e,t)=>{const n=t/12/100,a=[];for(let i=11;i>=0;i--){const t=new Date;t.setMonth(t.getMonth()-i);const r=11-i,o=e/Math.pow(1+n,r),s=15,l=10*Math.random()-5,c=Math.max(5,Math.round(s+l));a.push({month:t.toLocaleString("default",{month:"short"}),medianPrice:Math.round(o),salesVolume:c,daysOnMarket:Math.round(30+40*Math.random())})}return a},qm=[{zipCode:"90210",city:"Beverly Hills",state:"CA"},{zipCode:"90265",city:"Malibu",state:"CA"},{zipCode:"33139",city:"Miami Beach",state:"FL"},{zipCode:"10019",city:"Manhattan",state:"NY"},{zipCode:"81611",city:"Aspen",state:"CO"},{zipCode:"33480",city:"Palm Beach",state:"FL"},{zipCode:"94027",city:"Atherton",state:"CA"},{zipCode:"94301",city:"Palo Alto",state:"CA"},{zipCode:"06830",city:"Greenwich",state:"CT"}],Hm=async e=>{let t=await Mm(e);if(!t){const n=qm.find(t=>t.zipCode===e);if(!n)return{error:"Invalid ZIP code",location:null,marketData:null,properties:[],dataSource:null,apiKeyConfigured:Lm()};t={zipCode:n.zipCode,city:n.city,state:n.state,stateFull:n.state,formattedName:"".concat(n.city,", ").concat(n.state," ").concat(n.zipCode),latitude:0,longitude:0},console.log("[KYM API] Using known market fallback for",e)}const n=await Rm(e);let a;return a=n.length>0?await Om(e,n):Gm(e,t),{location:t,marketData:a,properties:n,propertyCount:n.length,dataSource:n.length>0?"realtor":"estimates",apiKeyConfigured:Lm()}},Gm=(e,t)=>{let n=0;for(let c=0;c<e.length;c++)n=(n<<5)-n+e.charCodeAt(c),n&=n;const a=()=>(n=Math.imul(n^n>>>16,2246822507),n=Math.imul(n^n>>>13,3266489909),n^=n>>>16,(n>>>0)/4294967295),i=800*({CA:1.8,NY:2,FL:1.3,TX:.9,CO:1.4,CT:1.6,MA:1.5,NJ:1.4,WA:1.3,AZ:.85}[null===t||void 0===t?void 0:t.state]||1),r=Math.round(i*(.8+.4*a())),o=12e3*r,s=[],l=(.05+.08*a())/12;for(let c=11;c>=0;c--){const e=new Date;e.setMonth(e.getMonth()-c);const t=11-c,n=o/Math.pow(1+l,t);s.push({month:e.toLocaleString("default",{month:"short"}),medianPrice:Math.round(n),salesVolume:Math.round(8+12*a()),daysOnMarket:Math.round(35+45*a())})}return{id:"market-".concat(e),location:(null===t||void 0===t?void 0:t.formattedName)||"".concat(null===t||void 0===t?void 0:t.city,", ").concat(null===t||void 0===t?void 0:t.state),zipCode:e,medianPrice:o,medianPricePerSqFt:r,avgListingDuration:Math.round(40+40*a()),growthRate:parseFloat((5+10*a()).toFixed(1)),demandIndex:parseFloat((5+4*a()).toFixed(1)),historicalData:s,dataSource:"estimates",dataNote:"Market estimates based on regional characteristics. Configure API key for live data."}},Wm={techExecutive:{id:"techExecutive",name:"Tech Executive",shortDesc:"Technology leaders seeking modern, connected estates",fullDesc:"Successful technology industry leaders, startup founders, and C-suite executives who value innovation, privacy, and modern design. They prioritize smart home integration and functional spaces over traditional opulence.",demographics:{ageRange:"35-55",netWorth:"$20M - $200M",occupation:"Tech CEO / Founder / CTO / VP Engineering"},icon:"cpu",spaceScoring:{"Home Office":20,"Smart Home Integration":25,"EV Garage":15,"Car Gallery":12,"Home Theater":12,Gym:10,"Wine Cellar":5,Pool:8,"Pool House":8,"Covered Terrace":5,"Staff Quarters":-10,"Kids Bunk Room":-5,"Guest Suite":-3},tasteScoring:{Modern:20,Contemporary:15,Minimalist:18,Industrial:10,Scandinavian:12,Traditional:-15,Mediterranean:-10,Colonial:-12,Coastal:5},sizeScoring:{"6000-8000":10,"8000-12000":20,"12000-15000":15,"15000-18000":5,"18000-25000":-10,"25000+":-20},locationScoring:{CA:15,WA:20,TX:12,CO:15,MA:10,NY:5,FL:0,CT:-5,NJ:0},familyScoring:{single:15,couple:15,youngFamily:5,establishedFamily:0,emptyNesters:10,multiGen:-15},bedroomScoring:{2:15,3:12,4:8,5:0,6:-5,"7+":-15}},entertainment:{id:"entertainment",name:"Entertainment Industry",shortDesc:"Film producers and studio executives seeking prestige addresses",fullDesc:"Film producers, studio executives, talent agents, and content creators who require prestigious addresses, exceptional privacy, and spaces designed for high-profile entertaining and screening events.",demographics:{ageRange:"40-65",netWorth:"$30M - $500M",occupation:"Producer / Studio Executive / Talent / Agent"},icon:"film",spaceScoring:{"Home Theater":25,"Screening Room":30,"Guest Suite":15,Pool:12,"Pool House":15,"Wine Cellar":18,"Chef's Kitchen":15,"Great Room":12,"Covered Terrace":10,"Staff Quarters":10,"Home Office":8,Gym:5},tasteScoring:{Contemporary:15,Modern:10,"Hollywood Regency":20,Traditional:8,Mediterranean:12,Minimalist:-5,Industrial:-10},sizeScoring:{"6000-8000":-10,"8000-12000":5,"12000-15000":15,"15000-18000":20,"18000-25000":15,"25000+":10},locationScoring:{CA:25,NY:15,FL:5,CO:-5,TX:-5,CT:0,NJ:-5},familyScoring:{single:10,couple:15,youngFamily:5,establishedFamily:10,emptyNesters:15,multiGen:5},bedroomScoring:{2:-10,3:0,4:10,5:15,6:15,"7+":10}},finance:{id:"finance",name:"Finance Executive",shortDesc:"Investment professionals valuing traditional elegance",fullDesc:"Investment bankers, hedge fund managers, and private equity principals who appreciate traditional elegance, quality construction, and proximity to financial centers. They value discretion and conservative design choices.",demographics:{ageRange:"45-65",netWorth:"$50M - $500M",occupation:"Managing Director / Partner / Fund Manager"},icon:"landmark",spaceScoring:{"Wine Cellar":25,"Home Office":20,Library:20,"Chef's Kitchen":12,"Formal Dining":15,"Guest Suite":10,Pool:8,Gym:8,"Home Theater":10,"Staff Quarters":5,"Kids Bunk Room":5},tasteScoring:{Traditional:20,Georgian:18,Colonial:15,Transitional:12,Contemporary:5,Modern:-5,Minimalist:-10,Industrial:-15},sizeScoring:{"6000-8000":-5,"8000-12000":10,"12000-15000":20,"15000-18000":15,"18000-25000":10,"25000+":5},locationScoring:{NY:20,CT:25,NJ:15,FL:10,MA:12,CA:5,TX:0,CO:-5},familyScoring:{single:5,couple:12,youngFamily:10,establishedFamily:15,emptyNesters:15,multiGen:10},bedroomScoring:{2:-10,3:0,4:10,5:15,6:12,"7+":5}},international:{id:"international",name:"International Investor",shortDesc:"Global wealth holders seeking US trophy properties",fullDesc:"International ultra-high-net-worth individuals seeking trophy properties in premier US markets for investment diversification, family use, and wealth preservation. They prioritize security, privacy, and turnkey condition.",demographics:{ageRange:"45-70",netWorth:"$100M+",occupation:"International Business / Investment / Family Office"},icon:"globe",spaceScoring:{"Staff Quarters":25,"Security Room":20,"Guest Suite":20,"Wine Cellar":15,Pool:12,"Home Theater":10,Gym:10,Spa:15,"Car Gallery":15,"Home Office":8},tasteScoring:{Contemporary:15,Modern:12,Traditional:10,Mediterranean:15,Transitional:10,Minimalist:5},sizeScoring:{"6000-8000":-15,"8000-12000":-5,"12000-15000":10,"15000-18000":15,"18000-25000":20,"25000+":25},locationScoring:{FL:20,NY:20,CA:15,TX:5,CT:5,NJ:5,CO:0},familyScoring:{single:5,couple:10,youngFamily:10,establishedFamily:15,emptyNesters:15,multiGen:20},bedroomScoring:{2:-15,3:-10,4:0,5:10,6:15,"7+":20}},generational:{id:"generational",name:"Generational Wealth",shortDesc:"Multi-generational families building legacy estates",fullDesc:"Multi-generational families and legacy wealth holders seeking compound-style estates for extended family use. They prioritize multiple structures, staff accommodations, and timeless design that will serve generations.",demographics:{ageRange:"55-75",netWorth:"$200M+",occupation:"Family Office / Inherited Wealth / Trust Beneficiary"},icon:"castle",spaceScoring:{"Guest House":25,"Staff Quarters":25,"Guest Suite":20,"Kids Bunk Room":15,"Pool House":15,"Wine Cellar":15,Library:12,"Formal Dining":12,"Chef's Kitchen":10,"Home Office":8,Gym:5},tasteScoring:{Traditional:25,Georgian:20,Colonial:18,Mediterranean:15,Transitional:10,Contemporary:0,Modern:-10,Minimalist:-15},sizeScoring:{"6000-8000":-20,"8000-12000":-10,"12000-15000":0,"15000-18000":10,"18000-25000":20,"25000+":25},locationScoring:{CT:20,MA:18,FL:15,NY:10,CA:10,CO:5,TX:0},familyScoring:{single:-15,couple:-5,youngFamily:5,establishedFamily:15,emptyNesters:15,multiGen:25},bedroomScoring:{2:-20,3:-15,4:-5,5:5,6:15,"7+":25}},sports:{id:"sports",name:"Sports Professional",shortDesc:"Athletes and team owners seeking performance estates",fullDesc:"Professional athletes, team owners, and sports executives who prioritize fitness facilities, recovery amenities, and spaces for team gatherings. They value privacy and often seek properties that can accommodate training needs.",demographics:{ageRange:"30-55",netWorth:"$20M - $300M",occupation:"Professional Athlete / Team Owner / Sports Executive"},icon:"trophy",spaceScoring:{Gym:30,Spa:25,Pool:20,"Indoor Sports Court":30,"Pool House":15,"Home Theater":15,"Guest Suite":12,"Great Room":15,"Car Gallery":15,"Staff Quarters":10},tasteScoring:{Modern:15,Contemporary:18,Transitional:10,Traditional:5,Mediterranean:10,Minimalist:5},sizeScoring:{"6000-8000":-10,"8000-12000":5,"12000-15000":15,"15000-18000":20,"18000-25000":20,"25000+":15},locationScoring:{FL:25,TX:20,CA:15,AZ:15,NY:5,NJ:5,CO:10},familyScoring:{single:15,couple:15,youngFamily:15,establishedFamily:10,emptyNesters:5,multiGen:0},bedroomScoring:{2:-5,3:5,4:10,5:15,6:15,"7+":10}},medical:{id:"medical",name:"Medical/Biotech Executive",shortDesc:"Healthcare leaders seeking wellness-focused estates",fullDesc:"Healthcare executives, biotech founders, and prominent medical professionals who value wellness-focused design, clean aesthetics, and sophisticated home office setups. They appreciate quality and evidence-based design choices.",demographics:{ageRange:"45-65",netWorth:"$30M - $150M",occupation:"CEO / CMO / Biotech Founder / Specialist Physician"},icon:"heart-pulse",spaceScoring:{Gym:20,Spa:20,Pool:15,"Home Office":20,"Meditation Room":15,"Chef's Kitchen":12,"Wine Cellar":10,"Guest Suite":8,"Home Theater":8,"Smart Home Integration":15},tasteScoring:{Modern:18,Contemporary:15,Minimalist:20,Scandinavian:15,Transitional:10,Traditional:0,Mediterranean:5},sizeScoring:{"6000-8000":10,"8000-12000":20,"12000-15000":15,"15000-18000":5,"18000-25000":-5,"25000+":-15},locationScoring:{MA:25,CA:20,NJ:15,NC:15,MD:12,NY:10,TX:10,CT:10},familyScoring:{single:10,couple:15,youngFamily:10,establishedFamily:10,emptyNesters:15,multiGen:0},bedroomScoring:{2:10,3:15,4:15,5:10,6:0,"7+":-10}},developer:{id:"developer",name:"Real Estate Developer",shortDesc:"Industry professionals seeking personal masterpieces",fullDesc:"Successful commercial and residential developers seeking personal residences that showcase design innovation and construction excellence. They understand value engineering and prioritize both livability and future resale.",demographics:{ageRange:"45-65",netWorth:"$50M - $300M",occupation:"Developer / Builder / Real Estate Principal"},icon:"building-2",spaceScoring:{"Staff Quarters":15,"Guest Suite":12,Pool:15,"Pool House":15,"Home Office":15,"Wine Cellar":15,"Chef's Kitchen":12,"Home Theater":12,Gym:10,"Smart Home Integration":15,"Car Gallery":12},tasteScoring:{Modern:15,Contemporary:18,Transitional:15,Traditional:10,Mediterranean:10,Minimalist:10},sizeScoring:{"6000-8000":-5,"8000-12000":10,"12000-15000":20,"15000-18000":20,"18000-25000":15,"25000+":10},locationScoring:{FL:15,CA:15,NY:15,TX:15,CO:12,AZ:12,NV:10,CT:10},familyScoring:{single:5,couple:15,youngFamily:10,establishedFamily:15,emptyNesters:15,multiGen:10},bedroomScoring:{2:-5,3:5,4:15,5:15,6:10,"7+":5}},creative:{id:"creative",name:"Creative Entrepreneur",shortDesc:"Fashion and design leaders seeking unique spaces",fullDesc:"Fashion designers, artists, creative directors, and luxury brand founders who seek architecturally distinctive properties that inspire creativity. They value unique design, studio spaces, and impressive entertaining areas.",demographics:{ageRange:"35-55",netWorth:"$15M - $100M",occupation:"Designer / Artist / Creative Director / Brand Founder"},icon:"palette",spaceScoring:{Studio:25,Gallery:20,Pool:15,"Great Room":15,"Chef's Kitchen":15,"Wine Cellar":12,"Covered Terrace":15,"Home Office":10,"Guest Suite":10,"Home Theater":8},tasteScoring:{Modern:20,Contemporary:18,Minimalist:15,Industrial:15,"Art Deco":18,Eclectic:20,Traditional:-10,Colonial:-15},sizeScoring:{"6000-8000":15,"8000-12000":20,"12000-15000":15,"15000-18000":5,"18000-25000":-5,"25000+":-15},locationScoring:{NY:25,CA:20,FL:15,CO:5,TX:5,CT:0,NJ:0},familyScoring:{single:20,couple:18,youngFamily:5,establishedFamily:0,emptyNesters:10,multiGen:-10},bedroomScoring:{2:15,3:15,4:10,5:0,6:-10,"7+":-15}},familyOffice:{id:"familyOffice",name:"Family Office Principal",shortDesc:"Wealth managers prioritizing security and discretion",fullDesc:"Professional wealth managers and family office principals who prioritize security, privacy, and conservative design choices. They seek properties suitable for multi-generational family gatherings while maintaining discretion.",demographics:{ageRange:"50-70",netWorth:"$100M+",occupation:"Family Office Director / Wealth Manager / Trust Officer"},icon:"shield-check",spaceScoring:{"Security Room":25,"Home Office":20,Library:18,"Staff Quarters":20,"Guest Suite":15,"Wine Cellar":15,"Formal Dining":12,Pool:10,Gym:8,"Home Theater":8},tasteScoring:{Traditional:20,Transitional:18,Georgian:15,Colonial:12,Contemporary:5,Modern:0,Minimalist:-5,Industrial:-15},sizeScoring:{"6000-8000":-10,"8000-12000":0,"12000-15000":10,"15000-18000":20,"18000-25000":20,"25000+":15},locationScoring:{CT:20,NY:15,FL:15,CA:10,MA:15,TX:10,CO:5},familyScoring:{single:-5,couple:10,youngFamily:10,establishedFamily:15,emptyNesters:15,multiGen:20},bedroomScoring:{2:-15,3:-5,4:5,5:15,6:20,"7+":15}}},Um=(e,t)=>{let n=50;const a=[],{spaces:i=[],tasteStyle:r=null,totalSqFt:o=null,state:s=null,familyType:l=null,bedroomCount:c=null}=t;if(i.forEach(t=>{const i="string"===typeof t?t:t.name,r=e.spaceScoring[i];r&&(n+=r,a.push({category:"Space",factor:i,impact:r,description:"".concat(i,r>0?" aligns with this buyer profile":" is less common for this buyer profile")}))}),r&&e.tasteScoring[r]){const t=e.tasteScoring[r];n+=t,a.push({category:"Design Style",factor:r,impact:t,description:"".concat(r,t>0?" design resonates with this buyer":" design is not typical for this buyer")})}const d=(u=o)?u<8e3?"6000-8000":u<12e3?"8000-12000":u<15e3?"12000-15000":u<18e3?"15000-18000":u<25e3?"18000-25000":"25000+":null;var u;if(d&&e.sizeScoring[d]){const t=e.sizeScoring[d];n+=t,a.push({category:"Size",factor:"".concat(null===o||void 0===o?void 0:o.toLocaleString()," SF"),impact:t,description:t>0?"Size matches typical ".concat(e.name," preferences"):"Size is ".concat(t<-10?"significantly ":"","outside typical range")})}if(s&&e.locationScoring[s]){const t=e.locationScoring[s];n+=t,a.push({category:"Location",factor:s,impact:t,description:"".concat(s,t>0?" is a preferred market for this buyer":" is not a primary market for this buyer")})}if(l&&e.familyScoring[l]){const t=e.familyScoring[l];n+=t,a.push({category:"Family",factor:l,impact:t,description:t>0?"Family profile matches typical ".concat(e.name):"Family profile differs from typical ".concat(e.name)})}const h=(p=c)?p<=2?"2":p<=3?"3":p<=4?"4":p<=5?"5":p<=6?"6":"7+":null;var p;if(h&&e.bedroomScoring[h]){const t=e.bedroomScoring[h];n+=t,a.push({category:"Bedrooms",factor:"".concat(c," bedrooms"),impact:t,description:t>0?"Bedroom count aligns with typical needs":"Bedroom count differs from typical requirements"})}const m=Math.min(95,Math.max(5,n));let f;f=m>=75?"Strong":m>=55?"Moderate":"Weak";const g=a.length>=5?"High":a.length>=3?"Medium":"Low";return{personaId:e.id,score:m,matchLevel:f,confidence:g,positiveFactors:a.filter(e=>e.impact>0).sort((e,t)=>t.impact-e.impact),negativeFactors:a.filter(e=>e.impact<0).sort((e,t)=>e.impact-t.impact),allFactors:a}},Km=e=>Object.values(Wm).map(t=>s(s({},t),{},{scoring:Um(t,e)})).sort((e,t)=>t.scoring.score-e.scoring.score),Vm=(e,t,n,a)=>{var i,r,o,s,l,c;const d={spaces:[],tasteStyle:null,totalSqFt:null,state:null,familyType:null,bedroomCount:0};if(null!==t&&void 0!==t&&t.selectedSpaces&&(d.spaces=t.selectedSpaces.map(e=>e.name||e)),null!==e&&void 0!==e&&null!==(i=e.principal)&&void 0!==i&&null!==(r=i.designIdentity)&&void 0!==r&&r.primaryStyle&&(d.tasteStyle=e.principal.designIdentity.primaryStyle),null!==n&&void 0!==n&&n.totalSquareFootage?d.totalSqFt=n.totalSquareFootage:null!==n&&void 0!==n&&null!==(o=n.selectedTier)&&void 0!==o&&o.maxSF&&(d.totalSqFt=n.selectedTier.maxSF),null!==a&&void 0!==a&&a.state?d.state=a.state:null!==e&&void 0!==e&&null!==(s=e.principal)&&void 0!==s&&null!==(l=s.projectParameters)&&void 0!==l&&l.projectState&&(d.state=e.principal.projectParameters.projectState),null!==e&&void 0!==e&&null!==(c=e.principal)&&void 0!==c&&c.household){var u,h;const t=e.principal.household;0!==t.children||t.hasPartner?0===t.children?d.familyType="couple":null!==(u=t.childrenAges)&&void 0!==u&&u.some(e=>e<12)?d.familyType="youngFamily":null!==(h=t.childrenAges)&&void 0!==h&&h.some(e=>e>=12&&e<18)?d.familyType="establishedFamily":t.children>0&&(d.familyType="emptyNesters"):d.familyType="single",t.multiGenerational&&(d.familyType="multiGen")}if(null!==t&&void 0!==t&&t.selectedSpaces){const e=t.selectedSpaces.filter(e=>{var t,n,a,i;return(null===(t=e.name)||void 0===t?void 0:t.includes("Primary"))||(null===(n=e.name)||void 0===n?void 0:n.includes("Guest Suite"))||(null===(a=e.name)||void 0===a?void 0:a.includes("Jr Primary"))||(null===(i=e.name)||void 0===i?void 0:i.includes("Kids"))});d.bedroomCount=e.length||4}return d},Ym=d("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),Zm=d("Film",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"2.18",ry:"2.18",key:"vury4c"}],["line",{x1:"7",x2:"7",y1:"2",y2:"22",key:"t1e4qh"}],["line",{x1:"17",x2:"17",y1:"2",y2:"22",key:"1tliql"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"2",x2:"7",y1:"7",y2:"7",key:"1wdzzh"}],["line",{x1:"2",x2:"7",y1:"17",y2:"17",key:"2fufxq"}],["line",{x1:"17",x2:"22",y1:"17",y2:"17",key:"1xg577"}],["line",{x1:"17",x2:"22",y1:"7",y2:"7",key:"acrv2l"}]]),$m=d("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),Qm=d("Castle",[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3v0a3 3 0 0 0-3 3v4",key:"jdggr9"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]]),Jm=d("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Xm=d("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]),ef=d("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),tf=d("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),nf=d("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),af={techExecutive:Ym,entertainment:Zm,finance:$m,international:we,generational:Qm,sports:Jm,medical:Xm,developer:v,creative:L,familyOffice:ef},rf=e=>{let{persona:t,scoring:n,rank:a,isTop:i,onClick:r}=e;const o=af[t.id]||h,s=(e=>{switch(e){case"Strong":return"#16a34a";case"Moderate":return"#ca8a04";default:return"#6b7280"}})(n.matchLevel),l=n.positiveFactors.slice(0,3);return(0,T.jsxs)("div",{className:"bam-persona-card ".concat(i?"bam-persona-card--top":""),onClick:r,children:[a&&(0,T.jsxs)("div",{className:"bam-persona-rank",children:["#",a]}),(0,T.jsxs)("div",{className:"bam-persona-header",children:[(0,T.jsx)("div",{className:"bam-persona-icon",style:{backgroundColor:"".concat(s,"15")},children:(0,T.jsx)(o,{size:24,style:{color:s}})}),(0,T.jsxs)("div",{className:"bam-persona-title",children:[(0,T.jsx)("h4",{children:t.name}),(0,T.jsx)("p",{children:t.shortDesc})]})]}),(0,T.jsxs)("div",{className:"bam-score-section",children:[(0,T.jsx)("div",{className:"bam-score-bar-container",children:(0,T.jsx)("div",{className:"bam-score-bar",style:{width:"".concat(n.score,"%"),backgroundColor:s}})}),(0,T.jsxs)("div",{className:"bam-score-details",children:[(0,T.jsxs)("span",{className:"bam-score-value",children:[n.score,"%"]}),(0,T.jsxs)("span",{className:"bam-match-level",style:{color:s},children:[n.matchLevel," Match"]})]})]}),l.length>0&&(0,T.jsx)("div",{className:"bam-top-factors",children:l.map((e,t)=>(0,T.jsxs)("div",{className:"bam-factor-chip bam-factor-chip--positive",children:[(0,T.jsx)(N,{size:12}),e.factor]},t))}),(0,T.jsxs)("button",{className:"bam-view-details",children:["View Details ",(0,T.jsx)(x,{size:16})]})]})},of=e=>{var t,n;let{persona:i,scoring:r,onClose:o,marketData:s}=e;const[l,c]=(0,a.useState)(!1),d=af[i.id]||h,u=(e=>{switch(e){case"Strong":return"#16a34a";case"Moderate":return"#ca8a04";default:return"#6b7280"}})(r.matchLevel);return(0,T.jsx)("div",{className:"bam-sidebar-overlay",onClick:o,children:(0,T.jsxs)("div",{className:"bam-sidebar",onClick:e=>e.stopPropagation(),children:[(0,T.jsxs)("div",{className:"bam-sidebar-header",children:[(0,T.jsx)("div",{className:"bam-sidebar-icon",style:{backgroundColor:"".concat(u,"15")},children:(0,T.jsx)(d,{size:32,style:{color:u}})}),(0,T.jsxs)("div",{children:[(0,T.jsx)("h3",{children:i.name}),(0,T.jsxs)("span",{className:"bam-sidebar-match",style:{backgroundColor:"".concat(u,"15"),color:u},children:[r.score,"% \u2022 ",r.matchLevel," Match"]})]}),(0,T.jsx)("button",{className:"bam-sidebar-close",onClick:o,children:(0,T.jsx)(y,{size:20})})]}),(0,T.jsxs)("div",{className:"bam-sidebar-content",children:[(0,T.jsx)("div",{className:"bam-sidebar-section",children:(0,T.jsx)("p",{className:"bam-persona-description",children:i.fullDesc})}),(0,T.jsxs)("div",{className:"bam-sidebar-section",children:[(0,T.jsx)("h4",{children:"Typical Demographics"}),(0,T.jsxs)("div",{className:"bam-demo-grid",children:[(0,T.jsxs)("div",{className:"bam-demo-item",children:[(0,T.jsx)("span",{className:"bam-demo-label",children:"Age Range"}),(0,T.jsx)("span",{className:"bam-demo-value",children:i.demographics.ageRange})]}),(0,T.jsxs)("div",{className:"bam-demo-item",children:[(0,T.jsx)("span",{className:"bam-demo-label",children:"Net Worth"}),(0,T.jsx)("span",{className:"bam-demo-value",children:i.demographics.netWorth})]}),(0,T.jsxs)("div",{className:"bam-demo-item bam-demo-item--full",children:[(0,T.jsx)("span",{className:"bam-demo-label",children:"Occupation"}),(0,T.jsx)("span",{className:"bam-demo-value",children:i.demographics.occupation})]})]})]}),r.positiveFactors.length>0&&(0,T.jsxs)("div",{className:"bam-sidebar-section",children:[(0,T.jsxs)("h4",{children:[(0,T.jsx)(V,{size:16,style:{color:"#16a34a"}}),"Alignment Factors"]}),(0,T.jsx)("div",{className:"bam-factors-list",children:r.positiveFactors.map((e,t)=>(0,T.jsxs)("div",{className:"bam-factor-item bam-factor-item--positive",children:[(0,T.jsxs)("div",{className:"bam-factor-header",children:[(0,T.jsx)(N,{size:16}),(0,T.jsx)("span",{className:"bam-factor-name",children:e.factor}),(0,T.jsxs)("span",{className:"bam-factor-impact",children:["+",e.impact]})]}),(0,T.jsx)("p",{className:"bam-factor-desc",children:e.description})]},t))})]}),r.negativeFactors.length>0&&(0,T.jsxs)("div",{className:"bam-sidebar-section",children:[(0,T.jsxs)("h4",{children:[(0,T.jsx)(tf,{size:16,style:{color:"#ca8a04"}}),"Potential Misalignments"]}),(0,T.jsx)("div",{className:"bam-factors-list",children:r.negativeFactors.map((e,t)=>(0,T.jsxs)("div",{className:"bam-factor-item bam-factor-item--negative",children:[(0,T.jsxs)("div",{className:"bam-factor-header",children:[(0,T.jsx)(Ze,{size:16}),(0,T.jsx)("span",{className:"bam-factor-name",children:e.factor}),(0,T.jsx)("span",{className:"bam-factor-impact",children:e.impact})]}),(0,T.jsx)("p",{className:"bam-factor-desc",children:e.description})]},t))})]}),s&&(null===(t=s.properties)||void 0===t?void 0:t.length)>0&&(0,T.jsxs)("div",{className:"bam-sidebar-section",children:[(0,T.jsxs)("h4",{children:[(0,T.jsx)($m,{size:16}),"Market Validation"]}),(0,T.jsxs)("div",{className:"bam-market-insight",children:[(0,T.jsx)(Ce,{size:14}),(0,T.jsxs)("p",{children:["Based on ",s.properties.length," active listings in ",null===(n=s.location)||void 0===n?void 0:n.city,", this market shows ",r.matchLevel.toLowerCase()," alignment with ",i.name," preferences."]})]})]}),(0,T.jsxs)("div",{className:"bam-sidebar-section bam-algorithm-section",children:[(0,T.jsxs)("button",{className:"bam-algorithm-toggle",onClick:()=>c(!l),children:[(0,T.jsx)(Ce,{size:16}),"How This Score Was Calculated",l?(0,T.jsx)(nf,{size:16}):(0,T.jsx)(C,{size:16})]}),l&&(0,T.jsxs)("div",{className:"bam-algorithm-content",children:[(0,T.jsxs)("p",{children:["The alignment score starts at a base of ",(0,T.jsx)("strong",{children:"50 points"})," and adjusts based on your design decisions across six categories:"]}),(0,T.jsxs)("ul",{children:[(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Space Selections"})," - From FYI module selections"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Design Style"})," - From KYC taste preferences"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Property Size"})," - From MVP square footage"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Location"})," - From KYM market selection"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Family Profile"})," - From KYC household data"]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("strong",{children:"Bedroom Count"})," - From FYI room selections"]})]}),(0,T.jsxs)("p",{children:["Each category can add or subtract points based on how well your choices align with typical ",i.name," preferences."]}),(0,T.jsxs)("div",{className:"bam-score-breakdown",children:[(0,T.jsxs)("div",{className:"bam-breakdown-row",children:[(0,T.jsx)("span",{children:"Base Score"}),(0,T.jsx)("span",{children:"50"})]}),r.allFactors.map((e,t)=>(0,T.jsxs)("div",{className:"bam-breakdown-row",children:[(0,T.jsxs)("span",{children:[e.category,": ",e.factor]}),(0,T.jsxs)("span",{className:e.impact>0?"positive":"negative",children:[e.impact>0?"+":"",e.impact]})]},t)),(0,T.jsxs)("div",{className:"bam-breakdown-row bam-breakdown-total",children:[(0,T.jsx)("span",{children:"Final Score"}),(0,T.jsxs)("span",{children:[r.score,"%"]})]})]}),(0,T.jsxs)("p",{className:"bam-confidence-note",children:["Confidence: ",(0,T.jsx)("strong",{children:r.confidence}),"(",r.allFactors.length," of 6 categories scored)"]})]})]})]})]})})},sf=e=>{var t;let{personaResults:n,marketData:i,onSelectPersona:r}=e;const[o,s]=(0,a.useState)(null),l=n.slice(0,3),c=n.slice(3),d=e=>{s(e),r&&r(e)};return n&&0!==n.length?(0,T.jsxs)("div",{className:"bam-container",children:[(0,T.jsxs)("div",{className:"bam-header",children:[(0,T.jsxs)("div",{className:"bam-header-text",children:[(0,T.jsx)("h2",{children:"Buyer Alignment Analysis"}),(0,T.jsx)("p",{children:"Based on your design decisions, here are the buyer personas most likely to be interested in this property."})]}),(0,T.jsxs)("div",{className:"bam-header-stats",children:[(0,T.jsxs)("div",{className:"bam-stat",children:[(0,T.jsx)("span",{className:"bam-stat-value",children:n.length}),(0,T.jsx)("span",{className:"bam-stat-label",children:"Personas Analyzed"})]}),(0,T.jsxs)("div",{className:"bam-stat",children:[(0,T.jsxs)("span",{className:"bam-stat-value",children:[null===(t=l[0])||void 0===t?void 0:t.scoring.score,"%"]}),(0,T.jsx)("span",{className:"bam-stat-label",children:"Top Match"})]})]})]}),(0,T.jsxs)("div",{className:"bam-section",children:[(0,T.jsx)("h3",{className:"bam-section-title",children:"Top Matches"}),(0,T.jsx)("div",{className:"bam-top-grid",children:l.map((e,t)=>(0,T.jsx)(rf,{persona:e,scoring:e.scoring,rank:t+1,isTop:!0,onClick:()=>d(e)},e.id))})]}),c.length>0&&(0,T.jsxs)("div",{className:"bam-section",children:[(0,T.jsx)("h3",{className:"bam-section-title",children:"Other Personas"}),(0,T.jsx)("div",{className:"bam-other-grid",children:c.map((e,t)=>(0,T.jsx)(rf,{persona:e,scoring:e.scoring,rank:t+4,isTop:!1,onClick:()=>d(e)},e.id))})]}),o&&(0,T.jsx)(of,{persona:o,scoring:o.scoring,marketData:i,onClose:()=>s(null)})]}):(0,T.jsxs)("div",{className:"bam-empty",children:[(0,T.jsx)(h,{size:48}),(0,T.jsx)("h3",{children:"Complete Your Design Selections"}),(0,T.jsx)("p",{children:"Buyer alignment analysis requires data from KYC, FYI, and MVP modules. Complete your design selections to see which buyer personas best match your project."})]})};function lf(e,t,n,a,i){a=a||{};var r=i.internal.scaleFactor,o=i.internal.getFontSize()/r,s=o*(i.getLineHeightFactor?i.getLineHeightFactor():1.15),l="",c=1;if("middle"!==a.valign&&"bottom"!==a.valign&&"center"!==a.halign&&"right"!==a.halign||(c=(l="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),n+=o*(2-1.15),"middle"===a.valign?n-=c/2*s:"bottom"===a.valign&&(n-=c*s),"center"===a.halign||"right"===a.halign){var d=o;if("center"===a.halign&&(d*=.5),l&&c>=1){for(var u=0;u<l.length;u++)i.text(l[u],t-i.getStringUnitWidth(l[u])*d,n),n+=s;return i}t-=i.getStringUnitWidth(e)*d}return"justify"===a.halign?i.text(e,t,n,{maxWidth:a.maxWidth||100,align:"justify"}):i.text(e,t,n),i}var cf={},df=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:cf=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,n){var a,i,r;void 0===n&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,l=o.fontName;if(t.font&&(l=t.font),t.fontStyle){s=t.fontStyle;var c=this.getFontList()[l];c&&-1===c.indexOf(s)&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),s=c[0])}if(this.jsPDFDocument.setFont(l,s),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var d=e.unifyColor(t.fillColor);d&&(a=this.jsPDFDocument).setFillColor.apply(a,d),(d=e.unifyColor(t.textColor))&&(i=this.jsPDFDocument).setTextColor.apply(i,d),(d=e.unifyColor(t.lineColor))&&(r=this.jsPDFDocument).setDrawColor.apply(r,d),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},e.prototype.rect=function(e,t,n,a,i){return this.jsPDFDocument.rect(e,t,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return cf||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),uf=function(e,t){return uf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},uf(e,t)};function hf(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}uf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}"function"===typeof SuppressedError&&SuppressedError;var pf=function(e){function t(t){var n=e.call(this)||this;return n._element=t,n}return hf(t,e),t}(Array);function mf(e,t,n){n.applyStyles(t,!0);var a=(Array.isArray(e)?e:[e]).map(function(e){return n.getTextWidth(e)}).reduce(function(e,t){return Math.max(e,t)},0);return a}function ff(e,t,n,a){var i=t.settings.tableLineWidth,r=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:r});var o=gf(i,!1);o&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),a.y-n.y,o)}function gf(e,t){var n=e>0,a=t||0===t;return n&&a?"DF":n?"S":a?"F":null}function vf(e,t){var n,a,i,r;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(n=e.left)&&void 0!==n?n:t,top:null!==(a=e.top)&&void 0!==a?a:t,right:null!==(i=e.right)&&void 0!==i?i:t,bottom:null!==(r=e.bottom)&&void 0!==r?r:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}function yf(e,t){var n=vf(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function bf(e,t,n,a,i){var r={},o=96/72,s=xf(t,function(e){return i.getComputedStyle(e).backgroundColor});null!=s&&(r.fillColor=s);var l=xf(t,function(e){return i.getComputedStyle(e).color});null!=l&&(r.textColor=l);var c=function(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,r=n.map(function(e){return parseInt(e||"0")/a}),o=vf(r,0);i>o.top&&(o.top=i);i>o.bottom&&(o.bottom=i);return o}(a,n);c&&(r.cellPadding=c);var d="borderTopColor",u=o*n,h=a.borderTopWidth;if(a.borderBottomWidth===h&&a.borderRightWidth===h&&a.borderLeftWidth===h){var p=(parseFloat(h)||0)/u;p&&(r.lineWidth=p)}else r.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/u,right:(parseFloat(a.borderRightWidth)||0)/u,bottom:(parseFloat(a.borderBottomWidth)||0)/u,left:(parseFloat(a.borderLeftWidth)||0)/u},r.lineWidth.top||(r.lineWidth.right?d="borderRightColor":r.lineWidth.bottom?d="borderBottomColor":r.lineWidth.left&&(d="borderLeftColor"));var m=xf(t,function(e){return i.getComputedStyle(e)[d]});null!=m&&(r.lineColor=m);var f=["left","right","center","justify"];-1!==f.indexOf(a.textAlign)&&(r.halign=a.textAlign),-1!==(f=["middle","bottom","top"]).indexOf(a.verticalAlign)&&(r.valign=a.verticalAlign);var g=parseInt(a.fontSize||"");isNaN(g)||(r.fontSize=g/o);var v=function(e){var t="";("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold");"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic");return t}(a);v&&(r.fontStyle=v);var y=(a.fontFamily||"").toLowerCase();return-1!==e.indexOf(y)&&(r.font=y),r}function xf(e,t){var n=Sf(e,t);if(!n)return null;var a=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var i=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])];return 0===parseInt(a[4])||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Sf(e,t){var n=t(e);return"rgba(0, 0, 0, 0)"===n||"transparent"===n||"initial"===n||"inherit"===n?null==e.parentElement?null:Sf(e.parentElement,t):n}function jf(e,t,n,a,i){var r,o,s;void 0===a&&(a=!1),void 0===i&&(i=!1),s="string"===typeof t?n.document.querySelector(t):t;var l=Object.keys(e.getFontList()),c=e.scaleFactor(),d=[],u=[],h=[];if(!s)return console.error("Html table could not be found with input: ",t),{head:d,body:u,foot:h};for(var p=0;p<s.rows.length;p++){var m=s.rows[p],f=null===(o=null===(r=null===m||void 0===m?void 0:m.parentElement)||void 0===r?void 0:r.tagName)||void 0===o?void 0:o.toLowerCase(),g=wf(l,c,n,m,a,i);g&&("thead"===f?d.push(g):"tfoot"===f?h.push(g):u.push(g))}return{head:d,body:u,foot:h}}function wf(e,t,n,a,i,r){for(var o=new pf(a),s=0;s<a.cells.length;s++){var l=a.cells[s],c=n.getComputedStyle(l);if(i||"none"!==c.display){var d=void 0;r&&(d=bf(e,l,t,c,n)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Nf(l)})}}var u=n.getComputedStyle(a);if(o.length>0&&(i||"none"!==u.display))return o}function Nf(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join("\n"),t.innerText||t.textContent||""}function kf(e,t,n,a,i){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),o=1;o<arguments.length;o++){var s=arguments[o];if(null!=s)for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])}return r}function _f(e,t){var n=new df(e),a=n.getDocumentOptions(),i=n.getGlobalOptions();!function(e,t,n){for(var a=0,i=[e,t,n];a<i.length;a++){var r=i[a];r&&"object"!==typeof r&&console.error("The options parameter should be of type object, is: "+typeof r),r.startY&&"number"!==typeof r.startY&&(console.error("Invalid value for startY option",r.startY),delete r.startY)}}(i,a,t);var r,o=kf({},i,a,t);"undefined"!==typeof window&&(r=window);var s=function(e,t,n){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(i){if("columnStyles"===i){var r=e[i],o=t[i],s=n[i];a.columnStyles=kf({},r,o,s)}else{var l=[e,t,n].map(function(e){return e[i]||{}});a[i]=kf({},l[0],l[1],l[2])}},r=0,o=Object.keys(a);r<o.length;r++){i(o[r])}return a}(i,a,t),l=function(e,t,n){for(var a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,r=[e,t,n];i<r.length;i++){var o=r[i];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}(i,a,t),c=function(e,t){var n,a,i,r,o,s,l,c,d,u,h,p,m,f,g=vf(t.margin,40/e.scaleFactor()),v=null!==(n=function(e,t){var n=e.getLastAutoTable(),a=e.scaleFactor(),i=e.pageNumber(),r=!1;if(n&&n.startPageNumber){r=n.startPageNumber+n.pageNumber-1===i}if("number"===typeof t)return t;if((null==t||!1===t)&&r&&null!=(null===n||void 0===n?void 0:n.finalY))return n.finalY+20/a;return null}(e,t.startY))&&void 0!==n?n:g.top;m=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(a=t.showFoot)&&void 0!==a?a:"everyPage";f=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(i=t.showHead)&&void 0!==i?i:"everyPage";var y=null!==(r=t.useCss)&&void 0!==r&&r,b=t.theme||(y?"plain":"striped"),x=!!t.horizontalPageBreak,S=null!==(o=t.horizontalPageBreakRepeat)&&void 0!==o?o:null;return{includeHiddenHtml:null!==(s=t.includeHiddenHtml)&&void 0!==s&&s,useCss:y,theme:b,startY:v,margin:g,pageBreak:null!==(l=t.pageBreak)&&void 0!==l?l:"auto",rowPageBreak:null!==(c=t.rowPageBreak)&&void 0!==c?c:"auto",tableWidth:null!==(d=t.tableWidth)&&void 0!==d?d:"auto",showHead:f,showFoot:m,tableLineWidth:null!==(u=t.tableLineWidth)&&void 0!==u?u:0,tableLineColor:null!==(h=t.tableLineColor)&&void 0!==h?h:200,horizontalPageBreak:x,horizontalPageBreakRepeat:S,horizontalPageBreakBehaviour:null!==(p=t.horizontalPageBreakBehaviour)&&void 0!==p?p:"afterAllRows"}}(n,o),d=function(e,t,n){var a=t.head||[],i=t.body||[],r=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(n){var s=jf(e,t.html,n,o,t.useCss)||{};a=s.head||a,i=s.body||a,r=s.foot||a}else console.error("Cannot parse html in non browser environment")}var l=t.columns||function(e,t,n){var a=e[0]||t[0]||n[0]||[],i=[];return Object.keys(a).filter(function(e){return"_element"!==e}).forEach(function(e){var t,n=1;"object"!==typeof(t=Array.isArray(a)?a[parseInt(e)]:a[e])||Array.isArray(t)||(n=(null===t||void 0===t?void 0:t.colSpan)||1);for(var r=0;r<n;r++){var o={dataKey:Array.isArray(a)?i.length:e+(r>0?"_".concat(r):"")};i.push(o)}}),i}(a,i,r);return{columns:l,head:a,body:i,foot:r}}(n,o,r);return{id:t.tableId,content:d,hooks:l,styles:s,settings:c}}var Cf,Pf=function(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()},Ff=function(e){function t(t,n,a,i,r,o){var s=e.call(this,t,n,o)||this;return s.cell=a,s.row=i,s.column=r,s.section=i.section,s}return hf(t,e),t}(Pf),Af=function(){function e(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,n,a,i,r){for(var o=0,s=t;o<s.length;o++){var l=!1===(0,s[o])(new Ff(e,this,n,a,i,r));if(n.text=Array.isArray(n.text)?n.text:[n.text],l)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){(0,a[n])(new Pf(e,this,t))}},e.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){(0,a[n])(new Pf(e,this,t))}},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(e,t){return e+t.wrappedWidth},0);var t=this.settings.margin;return e-t.left-t.right},e}(),Lf=function(){function e(e,t,n,a,i){void 0===i&&(i=!1),this.height=0,this.raw=e,e instanceof pf&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(e,n){var a;return Math.max(e,(null===(a=t.cells[n.index])||void 0===a?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(e){var n=t.cells[e.index];return!!n&&n.rowSpan>1}).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(e,a){var i=n.cells[a.index];if(!i)return 0;var r=t.getLineHeight(i.styles.fontSize),o=i.padding("vertical")+r;return o>e?o:e},0)},e}(),Mf=function(){function e(e,t,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var i=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,i=null!==(a=e.content)&&void 0!==a?a:e,e._element&&(this.raw=e._element));var r=null!=i?""+i:"";this.text=r.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var a=this.width-this.padding("horizontal");t=this.x+a/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var n=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(n,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=vf(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}(),Rf=function(){function e(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,a=e.allRows();n<a.length;n++){var i=a[n].cells[this.index];i&&"number"===typeof i.styles.cellWidth&&(t=Math.max(t,i.styles.cellWidth))}return t},e}();function If(e,t){!function(e,t){var n=e.scaleFactor(),a=t.settings.horizontalPageBreak,i=yf(e,t);t.allRows().forEach(function(r){for(var o=0,s=t.columns;o<s.length;o++){var l=s[o],c=r.cells[l.index];if(c){var d=t.hooks.didParseCell;t.callCellHooks(e,d,c,r,l,null);var u=c.padding("horizontal");c.contentWidth=mf(c.text,c.styles,e)+u;var h=mf(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=h+c.padding("horizontal"),"number"===typeof c.styles.cellWidth)c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if("wrap"===c.styles.cellWidth||!0===a)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/n;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(e){for(var n=0,a=t.columns;n<a.length;n++){var i=a[n],r=e.cells[i.index];if(r&&1===r.colSpan)i.wrappedWidth=Math.max(i.wrappedWidth,r.wrappedWidth),i.minWidth=Math.max(i.minWidth,r.minWidth),i.minReadableWidth=Math.max(i.minReadableWidth,r.minReadableWidth);else{var o=t.styles.columnStyles[i.dataKey]||t.styles.columnStyles[i.index]||{},s=o.cellWidth||o.minCellWidth;s&&"number"===typeof s&&(i.minWidth=s,i.wrappedWidth=s)}r&&(r.colSpan>1&&!i.minWidth&&(i.minWidth=r.minWidth),r.colSpan>1&&!i.wrappedWidth&&(i.wrappedWidth=r.minWidth))}})}(e,t);var n=[],a=0;t.columns.forEach(function(e){var i=e.getMaxCustomCellWidth(t);i?e.width=i:(e.width=e.wrappedWidth,n.push(e)),a+=e.width});var i=t.getWidth(e.pageSize().width)-a;i&&(i=Tf(n,i,function(e){return Math.max(e.minReadableWidth,e.minWidth)})),i&&(i=Tf(n,i,function(e){return e.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),function(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var a=t[n],i=null,r=0,o=0,s=0;s<e.columns.length;s++){var l=e.columns[s];if((o-=1)>1&&e.columns[s+1])r+=l.width,delete a.cells[l.index];else if(i){var c=i;delete a.cells[l.index],i=null,c.width=l.width+r}else{if(!(c=a.cells[l.index]))continue;if(o=c.colSpan,r=0,c.colSpan>1){i=c,r+=l.width;continue}c.width=l.width+r}}}(t),function(e,t){for(var n={count:0,height:0},a=0,i=e.allRows();a<i.length;a++){for(var r=i[a],o=0,s=e.columns;o<s.length;o++){var l=s[o],c=r.cells[l.index];if(c){t.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if("linebreak"===c.styles.overflow)c.text=t.splitTextToSize(c.text,d+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if("ellipsize"===c.styles.overflow)c.text=zf(c.text,d,c.styles,t,"...");else if("hidden"===c.styles.overflow)c.text=zf(c.text,d,c.styles,t,"");else if("function"===typeof c.styles.overflow){var u=c.styles.overflow(c.text,d);c.text="string"===typeof u?[u]:u}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<h*c.rowSpan?n={height:h,count:c.rowSpan}:n&&n.count>0&&n.height>h&&(h=n.height),h>r.height&&(r.height=h)}}n.count--}}(t,e),function(e){for(var t={},n=1,a=e.allRows(),i=0;i<a.length;i++)for(var r=a[i],o=0,s=e.columns;o<s.length;o++){var l=s[o],c=t[l.index];if(n>1)n--,delete r.cells[l.index];else if(c)c.cell.height+=r.height,n=c.cell.colSpan,delete r.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var d=r.cells[l.index];if(!d)continue;if(d.height=r.height,d.rowSpan>1){var u=a.length-i,h=d.rowSpan>u?u:d.rowSpan;t[l.index]={cell:d,left:h,row:r}}}}}(t)}function Tf(e,t,n){for(var a=t,i=e.reduce(function(e,t){return e+t.wrappedWidth},0),r=0;r<e.length;r++){var o=e[r],s=a*(o.wrappedWidth/i),l=o.width+s,c=n(o),d=l<c?c:l;t-=d-o.width,o.width=d}if(t=Math.round(1e10*t)/1e10){var u=e.filter(function(e){return!(t<0)||e.width>n(e)});u.length&&(t=Tf(u,t,n))}return t}function zf(e,t,n,a,i){return e.map(function(e){return function(e,t,n,a,i){var r=1e4*a.scaleFactor();if(t=Math.ceil(t*r)/r,t>=mf(e,n,a))return e;for(;t<mf(e+i,n,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}(e,t,n,a,i)})}function Df(e,t){var n=new df(e),a=function(e,t){var n=e.content,a=function(e){return e.map(function(e,t){var n,a;return a="object"===typeof e&&null!==(n=e.dataKey)&&void 0!==n?n:t,new Rf(a,e,t)})}(n.columns);if(0===n.head.length){(i=Of(a,"head"))&&n.head.push(i)}if(0===n.foot.length){var i;(i=Of(a,"foot"))&&n.foot.push(i)}var r=e.settings.theme,o=e.styles;return{columns:a,head:Ef("head",n.head,a,o,r,t),body:Ef("body",n.body,a,o,r,t),foot:Ef("foot",n.foot,a,o,r,t)}}(t,n.scaleFactor()),i=new Af(t,a);return If(n,i),n.applyStyles(n.userStyles),i}function Ef(e,t,n,a,i,r){var o={},s=t.map(function(t,s){for(var l=0,c={},d=0,u=0,h=0,p=n;h<p.length;h++){var m=p[h];if(null==o[m.index]||0===o[m.index].left)if(0===u){var f=void 0,g={};"object"!==typeof(f=Array.isArray(t)?t[m.index-d-l]:t[m.dataKey])||Array.isArray(f)||(g=(null===f||void 0===f?void 0:f.styles)||{});var v=Bf(e,m,s,i,a,r,g),y=new Mf(f,v,e);c[m.dataKey]=y,c[m.index]=y,u=y.colSpan-1,o[m.index]={left:y.rowSpan-1,times:u}}else u--,d++;else o[m.index].left--,u=o[m.index].times,l++}return new Lf(t,s,e,c)});return s}function Of(e,t){var n={};return e.forEach(function(e){if(null!=e.raw){var a=function(e,t){if("head"===e){if("object"===typeof t)return t.header||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=a&&(n[e.dataKey]=a)}}),Object.keys(n).length>0?n:null}function Bf(e,t,n,a,i,r,o){var s,l={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[a];"head"===e?s=i.headStyles:"body"===e?s=i.bodyStyles:"foot"===e&&(s=i.footStyles);var c=kf({},l.table,l[e],i.styles,s),d=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},u="body"===e?d:{},h="body"===e&&n%2===0?kf({},l.alternateRow,i.alternateRowStyles):{},p=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}(r),m=kf({},p,c,h,u);return kf(m,o)}function qf(e,t,n){var a;void 0===n&&(n={});var i=yf(e,t),r=new Map,o=[],s=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(e){var n=t.columns.find(function(t){return t.dataKey===e||t.index===e});n&&!r.has(n.index)&&(r.set(n.index,!0),o.push(n.index),s.push(t.columns[n.index]),i-=n.wrappedWidth)});for(var c=!0,d=null!==(a=null===n||void 0===n?void 0:n.start)&&void 0!==a?a:0;d<t.columns.length;)if(r.has(d))d++;else{var u=t.columns[d].wrappedWidth;if(!(c||i>=u))break;c=!1,o.push(d),s.push(t.columns[d]),i-=u,d++}return{colIndexes:o,columns:s,lastIndex:d-1}}function Hf(e,t){var n=t.settings,a=n.startY,i=n.margin,r={x:i.left,y:a},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),s=a+i.bottom+o;"avoid"===n.pageBreak&&(s+=t.body.reduce(function(e,t){return e+t.height},0));var l=new df(e);("always"===n.pageBreak||null!=n.startY&&s>l.pageSize().height)&&(Jf(l),r.y=i.top),t.callWillDrawPageHooks(l,r);var c=kf({},r);t.startPageNumber=l.pageNumber(),n.horizontalPageBreak?function(e,t,n,a){var i=function(e,t){for(var n=[],a=0;a<t.columns.length;a++){var i=qf(e,t,{start:a});i.columns.length&&(n.push(i),a=i.lastIndex)}return n}(e,t),r=t.settings;if("afterAllRows"===r.horizontalPageBreakBehaviour)i.forEach(function(i,r){e.applyStyles(e.userStyles),r>0?Qf(e,t,n,a,i.columns,!0):Gf(e,t,a,i.columns),function(e,t,n,a,i){e.applyStyles(e.userStyles),t.body.forEach(function(r,o){var s=o===t.body.length-1;Vf(e,t,r,s,n,a,i)})}(e,t,n,a,i.columns),Uf(e,t,a,i.columns)});else for(var o=-1,s=i[0],l=function(){var r=o;if(s){e.applyStyles(e.userStyles);var l=s.columns;o>=0?Qf(e,t,n,a,l,!0):Gf(e,t,a,l),r=Wf(e,t,o+1,a,l),Uf(e,t,a,l)}var c=r-o;i.slice(1).forEach(function(i){e.applyStyles(e.userStyles),Qf(e,t,n,a,i.columns,!0),Wf(e,t,o+1,a,i.columns,c),Uf(e,t,a,i.columns)}),o=r};o<t.body.length-1;)l()}(l,t,c,r):(l.applyStyles(l.userStyles),"firstPage"!==n.showHead&&"everyPage"!==n.showHead||t.head.forEach(function(e){return Yf(l,t,e,r,t.columns)}),l.applyStyles(l.userStyles),t.body.forEach(function(e,n){var a=n===t.body.length-1;Vf(l,t,e,a,c,r,t.columns)}),l.applyStyles(l.userStyles),"lastPage"!==n.showFoot&&"everyPage"!==n.showFoot||t.foot.forEach(function(e){return Yf(l,t,e,r,t.columns)})),ff(l,t,c,r),t.callEndPageHooks(l,r),t.finalY=r.y,e.lastAutoTable=t,l.applyStyles(l.userStyles)}function Gf(e,t,n,a){var i=t.settings;e.applyStyles(e.userStyles),"firstPage"!==i.showHead&&"everyPage"!==i.showHead||t.head.forEach(function(i){return Yf(e,t,i,n,a)})}function Wf(e,t,n,a,i,r){e.applyStyles(e.userStyles),r=null!==r&&void 0!==r?r:t.body.length;var o=Math.min(n+r,t.body.length),s=-1;return t.body.slice(n,o).forEach(function(r,o){var l=n+o===t.body.length-1,c=$f(e,t,l,a);r.canEntireRowFit(c,i)&&(Yf(e,t,r,a,i),s=n+o)}),s}function Uf(e,t,n,a){var i=t.settings;e.applyStyles(e.userStyles),"lastPage"!==i.showFoot&&"everyPage"!==i.showFoot||t.foot.forEach(function(i){return Yf(e,t,i,n,a)})}function Kf(e,t,n){var a=n.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),r=Math.floor((t-i)/a);return Math.max(0,r)}function Vf(e,t,n,a,i,r,o){var s=$f(e,t,a,r);if(n.canEntireRowFit(s,o))Yf(e,t,n,r,o);else if(function(e,t,n,a){var i=e.pageSize().height,r=a.settings.margin,o=i-(r.top+r.bottom);"body"===t.section&&(o-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var s=t.getMinimumRowHeight(a.columns,e),l=s<n;if(s>o)return console.log("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(a.columns);return t.getMaxCellHeight(a.columns)>o?(c&&console.log("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==a.settings.rowPageBreak}(e,n,s,t)){var l=function(e,t,n,a){var i={};e.spansMultiplePages=!0,e.height=0;for(var r=0,o=0,s=n.columns;o<s.length;o++){var l=s[o];if(g=e.cells[l.index]){Array.isArray(g.text)||(g.text=[g.text]),(f=kf(f=new Mf(g.raw,g.styles,g.section),g)).text=[];var c=Kf(g,t,a);g.text.length>c&&(f.text=g.text.splice(c,g.text.length));var d=a.scaleFactor(),u=a.getLineHeightFactor();g.contentHeight=g.getContentHeight(d,u),g.contentHeight>=t&&(g.contentHeight=t,f.styles.minCellHeight-=t),g.contentHeight>e.height&&(e.height=g.contentHeight),f.contentHeight=f.getContentHeight(d,u),f.contentHeight>r&&(r=f.contentHeight),i[l.index]=f}}var h=new Lf(e.raw,-1,e.section,i,!0);h.height=r;for(var p=0,m=n.columns;p<m.length;p++){var f,g;l=m[p],(f=h.cells[l.index])&&(f.height=h.height),(g=e.cells[l.index])&&(g.height=e.height)}return h}(n,s,t,e);Yf(e,t,n,r,o),Qf(e,t,i,r,o),Vf(e,t,l,a,i,r,o)}else Qf(e,t,i,r,o),Vf(e,t,n,a,i,r,o)}function Yf(e,t,n,a,i){a.x=t.settings.margin.left;for(var r=0,o=i;r<o.length;r++){var s=o[r],l=n.cells[s.index];if(l)if(e.applyStyles(l.styles),l.x=a.x,l.y=a.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,l,n,s,a)){Zf(e,l,a);var c=l.getTextPos();lf(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,n,s,a),a.x+=s.width}else a.x+=s.width;else a.x+=s.width}a.y+=n.height}function Zf(e,t,n){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof a.lineWidth){var i=gf(a.lineWidth,a.fillColor);i&&e.rect(t.x,n.y,t.width,t.height,i)}else"object"===typeof a.lineWidth&&(a.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),function(e,t,n,a){var i,r,o,s;a.top&&(i=n.x,r=n.y,o=n.x+t.width,s=n.y,a.right&&(o+=.5*a.right),a.left&&(i-=.5*a.left),l(a.top,i,r,o,s));a.bottom&&(i=n.x,r=n.y+t.height,o=n.x+t.width,s=n.y+t.height,a.right&&(o+=.5*a.right),a.left&&(i-=.5*a.left),l(a.bottom,i,r,o,s));a.left&&(i=n.x,r=n.y,o=n.x,s=n.y+t.height,a.top&&(r-=.5*a.top),a.bottom&&(s+=.5*a.bottom),l(a.left,i,r,o,s));a.right&&(i=n.x+t.width,r=n.y,o=n.x+t.width,s=n.y+t.height,a.top&&(r-=.5*a.top),a.bottom&&(s+=.5*a.bottom),l(a.right,i,r,o,s));function l(t,n,a,i,r){e.getDocument().setLineWidth(t),e.getDocument().line(n,a,i,r,"S")}}(e,t,n,a.lineWidth))}function $f(e,t,n,a){var i=t.settings.margin.bottom,r=t.settings.showFoot;return("everyPage"===r||"lastPage"===r&&n)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-i}function Qf(e,t,n,a,i,r){void 0===i&&(i=[]),void 0===r&&(r=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||r||t.foot.forEach(function(n){return Yf(e,t,n,a,i)}),t.callEndPageHooks(e,a);var o=t.settings.margin;ff(e,t,n,a),Jf(e),t.pageNumber++,a.x=o.left,a.y=o.top,n.y=o.top,t.callWillDrawPageHooks(e,a),"everyPage"===t.settings.showHead&&(t.head.forEach(function(n){return Yf(e,t,n,a,i)}),e.applyStyles(e.userStyles))}function Jf(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}function Xf(e,t){Hf(e,Df(e,_f(e,t)))}try{if("undefined"!==typeof window&&window){var eg=window,tg=eg.jsPDF||(null===(Cf=eg.jspdf)||void 0===Cf?void 0:Cf.jsPDF);tg&&function(e){e.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Hf(this,Df(this,_f(this,e[0]))),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(e,t,n,a){lf(e,t,n,a,this)},e.API.autoTableSetDefaults=function(e){return df.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){df.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var n;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=jf(new df(this),e,window,t,!1),i=a.head,r=a.body,o=(null===(n=i[0])||void 0===n?void 0:n.map(function(e){return e.content}))||[];return{columns:o,rows:r,data:r}}}(tg)}}catch(jg){console.error("Could not apply autoTable plugin",jg)}const ng={navy:[30,58,95],gold:[201,162,39],text:[26,26,26],textMuted:[107,107,107],background:[250,250,248],border:[229,229,224],accentLight:[245,240,232],success:[46,125,50],warning:[245,124,0],error:[211,47,47],white:[255,255,255]},ag="helvetica",ig="helvetica",rg=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):"N/A",og=e=>e?new Intl.NumberFormat("en-US").format(e):"N/A",sg=async e=>{var t,n,a,i,r,o,s,l,c,d,u,h,p;const{kycData:m,locationData:f,marketData:g,properties:v,demographics:y,personaResults:b,fyiData:x,mvpData:S}=e,j=new yi({orientation:"portrait",unit:"mm",format:"a4"}),w=j.internal.pageSize.getWidth(),N=j.internal.pageSize.getHeight(),k=20,_=w-40;let C=0;const P=(null===m||void 0===m||null===(t=m.principal)||void 0===t?void 0:t.name)||"Client",F=(null===m||void 0===m||null===(n=m.principal)||void 0===n||null===(a=n.projectParameters)||void 0===a?void 0:a.projectName)||"Luxury Residence",A=(null===m||void 0===m||null===(i=m.principal)||void 0===i||null===(r=i.projectParameters)||void 0===r?void 0:r.projectCity)||(null===f||void 0===f||null===(o=f.location)||void 0===o?void 0:o.city)||"",L=(null===m||void 0===m||null===(s=m.principal)||void 0===s||null===(l=s.projectParameters)||void 0===l?void 0:l.projectState)||(null===f||void 0===f||null===(c=f.location)||void 0===c?void 0:c.state)||"";let M=1;const R=()=>{j.setFillColor(...ng.navy),j.rect(0,0,w,8,"F")},I=e=>{const t=N-10;j.setDrawColor(...ng.border),j.setLineWidth(.5),j.line(k,t,w-k,t),j.setFont(ig,"normal"),j.setFontSize(8),j.setTextColor(...ng.textMuted),j.text("\xa9 2026 N4S Luxury Residential Advisory",k,t+5),j.text("Page ".concat(e),w-k,t+5,{align:"right"})},T=()=>(j.addPage(),M++,R(),I(M),25),z=e=>(C+e>N-25&&(C=T()),C);var D;R(),C=50,j.setFont(ag,"bold"),j.setFontSize(24),j.setTextColor(...ng.navy),j.text("N4S",k,C),j.setFont(ig,"normal"),j.setFontSize(10),j.setTextColor(...ng.textMuted),j.text("Luxury Residential Advisory",k,C+7),j.setFont(ag,"bold"),j.setFontSize(12),j.setTextColor(...ng.navy),j.text("Market Intelligence Report",w-k,C,{align:"right"}),j.setFont(ig,"normal"),j.setFontSize(10),j.setTextColor(...ng.textMuted),j.text((D=new Date,new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),w-k,C+7,{align:"right"}),C=100,j.setFont(ag,"bold"),j.setFontSize(28),j.setTextColor(...ng.navy),j.text("Market Intelligence",k,C),j.text("Report",k,C+12),C+=30,j.setFont(ig,"normal"),j.setFontSize(16),j.setTextColor(...ng.text);const E="".concat(A,", ").concat(L);j.text(E,k,C),null!==f&&void 0!==f&&null!==(d=f.location)&&void 0!==d&&d.zipCode&&(j.setFontSize(12),j.setTextColor(...ng.textMuted),j.text("ZIP Code: ".concat(f.location.zipCode),k,C+8)),C=160,j.setFillColor(...ng.accentLight),j.roundedRect(k,C,_,35,3,3,"F"),C+=10,j.setFont(ig,"bold"),j.setFontSize(9),j.setTextColor(...ng.textMuted),j.text("PREPARED FOR",28,C),C+=7,j.setFont(ag,"bold"),j.setFontSize(14),j.setTextColor(...ng.navy),j.text(P,28,C),C+=7,j.setFont(ig,"normal"),j.setFontSize(11),j.setTextColor(...ng.text),j.text(F,28,C),C=220,j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.textMuted);const O=v&&v.length>0?"Data sourced from live Realtor.com API":"Market estimates based on regional data";j.text(O,k,C),I(M),C=T(),j.setFont(ag,"bold"),j.setFontSize(18),j.setTextColor(...ng.navy),j.text("Executive Summary",k,C),C+=15,j.setFont(ig,"bold"),j.setFontSize(11),j.setTextColor(...ng.text),j.text("Market Overview",k,C),C+=7,j.setFont(ig,"normal"),j.setFontSize(10),j.setTextColor(...ng.text);const B="The ".concat(A," luxury real estate market presents ").concat((null===v||void 0===v?void 0:v.length)>10?"significant":(null===v||void 0===v?void 0:v.length)>5?"moderate":"limited"," inventory at the ultra-luxury level. ").concat(null!==g&&void 0!==g&&g.medianPrice?"The median listing price of ".concat(rg(g.medianPrice)," reflects the area's positioning as a premier luxury market."):"Market analysis is based on regional data and comparable market trends."),q=j.splitTextToSize(B,_);j.text(q,k,C),C+=5*q.length+10,j.setFont(ig,"bold"),j.setFontSize(11),j.setTextColor(...ng.text),j.text("Key Market Metrics",k,C),C+=5;const H=[["Total Active Listings",og((null===v||void 0===v?void 0:v.filter(e=>"active"===e.status).length)||0)],["Median Listing Price",rg((null===g||void 0===g?void 0:g.medianPrice)||0)],["Avg Price per SF",rg((null===g||void 0===g?void 0:g.avgPricePerSqFt)||0)],["Avg Days on Market","".concat((null===g||void 0===g?void 0:g.avgDaysOnMarket)||"N/A"," days")],["Inventory Range","".concat(rg((null===g||void 0===g?void 0:g.minPrice)||0)," - ").concat(rg((null===g||void 0===g?void 0:g.maxPrice)||0))]];if(Xf(j,{startY:C,head:[],body:H,theme:"plain",styles:{fontSize:10,cellPadding:4,textColor:ng.text},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{halign:"right"}},margin:{left:k,right:k},tableWidth:_/2}),C=j.lastAutoTable.finalY+15,b&&b.length>0){j.setFont(ig,"bold"),j.setFontSize(11),j.setTextColor(...ng.text),j.text("Top Buyer Personas",k,C),C+=5;const e=b.slice(0,3).map((e,t)=>["".concat(t+1,". ").concat(e.name),"".concat(e.scoring.score,"%"),e.scoring.matchLevel]);Xf(j,{startY:C,head:[["Persona","Match","Level"]],body:e,theme:"striped",headStyles:{fillColor:ng.navy,textColor:ng.white,fontStyle:"bold",fontSize:9},styles:{fontSize:10,cellPadding:4},columnStyles:{0:{cellWidth:80},1:{halign:"center",cellWidth:30},2:{halign:"center"}},margin:{left:k,right:k}}),C=j.lastAutoTable.finalY+15}if(C=z(80),j.setFont(ag,"bold"),j.setFontSize(18),j.setTextColor(...ng.navy),j.text("Market Analysis",k,C),C+=15,j.setFont(ig,"bold"),j.setFontSize(11),j.setTextColor(...ng.text),j.text("Pricing Overview",k,C),C+=7,g){const e=[["Median Listing Price",rg(g.medianPrice)],["Average Listing Price",rg(g.avgPrice)],["Price Range","".concat(rg(g.minPrice)," - ").concat(rg(g.maxPrice))],["Average Price/SF",rg(g.avgPricePerSqFt)]];Xf(j,{startY:C,body:e,theme:"plain",styles:{fontSize:10,cellPadding:3},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{halign:"right"}},margin:{left:k},tableWidth:_/2}),C=j.lastAutoTable.finalY+15}C=z(60),j.setFont(ig,"bold"),j.setFontSize(11),j.setTextColor(...ng.text),j.text("Inventory Analysis",k,C),C+=7;const G=(null===v||void 0===v?void 0:v.filter(e=>"active"===e.status).length)||0,W=(null===v||void 0===v?void 0:v.filter(e=>"pending"===e.status).length)||0,U=(null===v||void 0===v?void 0:v.filter(e=>"sold"===e.status).length)||0,K=[["Active Listings",og(G)],["Pending Sales",og(W)],["Recently Sold",og(U)],["Total Properties Analyzed",og((null===v||void 0===v?void 0:v.length)||0)],["Avg Days on Market","".concat((null===g||void 0===g?void 0:g.avgDaysOnMarket)||"N/A"," days")]];if(Xf(j,{startY:C,body:K,theme:"plain",styles:{fontSize:10,cellPadding:3},columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{halign:"right"}},margin:{left:k},tableWidth:_/2}),C=j.lastAutoTable.finalY+15,v&&v.length>0){C=T(),j.setFont(ag,"bold"),j.setFontSize(18),j.setTextColor(...ng.navy),j.text("Comparable Properties",k,C),C+=10,j.setFont(ig,"normal"),j.setFontSize(10),j.setTextColor(...ng.textMuted),j.text("".concat(v.length," properties analyzed in the target market area"),k,C),C+=10;const e=v.slice(0,15).map(e=>{var t;return[(null===(t=e.address)||void 0===t?void 0:t.substring(0,30))||"N/A",rg(e.askingPrice),og(e.sqft)+" SF",rg(e.pricePerSqFt)+"/SF","".concat(e.beds,"/").concat(e.baths),e.status.charAt(0).toUpperCase()+e.status.slice(1)]});Xf(j,{startY:C,head:[["Address","Price","Size","Price/SF","Bed/Bath","Status"]],body:e,theme:"striped",headStyles:{fillColor:ng.navy,textColor:ng.white,fontStyle:"bold",fontSize:8},styles:{fontSize:8,cellPadding:3},columnStyles:{0:{cellWidth:50},1:{halign:"right",cellWidth:28},2:{halign:"right",cellWidth:22},3:{halign:"right",cellWidth:22},4:{halign:"center",cellWidth:18},5:{halign:"center",cellWidth:20}},margin:{left:k,right:k}}),C=j.lastAutoTable.finalY+15,C=z(60),j.setFont(ig,"bold"),j.setFontSize(11),j.setTextColor(...ng.text),j.text("Feature Analysis",k,C),C+=7;const t={};v.forEach(e=>{(e.features||[]).forEach(e=>{t[e]=(t[e]||0)+1})});const n=Object.entries(t).sort((e,t)=>t[1]-e[1]).slice(0,8).map(e=>{let[t,n]=e;return[t,og(n),"".concat(Math.round(n/v.length*100),"%")]});n.length>0&&(Xf(j,{startY:C,head:[["Feature","Count","% of Listings"]],body:n,theme:"striped",headStyles:{fillColor:ng.navy,textColor:ng.white,fontStyle:"bold",fontSize:9},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:60},1:{halign:"center",cellWidth:25},2:{halign:"center",cellWidth:30}},margin:{left:k},tableWidth:.6*_}),C=j.lastAutoTable.finalY+15)}if(b&&b.length>0){C=T(),j.setFont(ag,"bold"),j.setFontSize(18),j.setTextColor(...ng.navy),j.text("Buyer Alignment Analysis",k,C),C+=10,j.setFont(ig,"italic"),j.setFontSize(9),j.setTextColor(...ng.textMuted);const e="Analysis based on design decisions captured in KYC, FYI, and MVP modules. Scores reflect alignment between the planned property program and typical buyer persona preferences.",t=j.splitTextToSize(e,_);j.text(t,k,C),C+=4*t.length+10;const n=b.slice(0,3);for(let i=0;i<n.length;i++){var V,Y,Z,$;const e=n[i];C=z(70),j.setFillColor(...ng.accentLight),j.roundedRect(k,C,_,12,2,2,"F"),j.setFont(ig,"bold"),j.setFontSize(12),j.setTextColor(...ng.navy),j.text("".concat(i+1,". ").concat(e.name),25,C+8);const t="Strong"===e.scoring.matchLevel?ng.success:"Moderate"===e.scoring.matchLevel?ng.warning:ng.textMuted;j.setTextColor(...t),j.text("".concat(e.scoring.score,"% - ").concat(e.scoring.matchLevel," Match"),w-k-5,C+8,{align:"right"}),C+=18,j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.text);const a=j.splitTextToSize(e.fullDesc||e.shortDesc,_);j.text(a,k,C),C+=4*a.length+5,j.setFont(ig,"bold"),j.setFontSize(8),j.setTextColor(...ng.textMuted),j.text("TYPICAL DEMOGRAPHICS",k,C),C+=4,j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.text),j.text("Age: ".concat((null===(V=e.demographics)||void 0===V?void 0:V.ageRange)||"N/A","  |  Net Worth: ").concat((null===(Y=e.demographics)||void 0===Y?void 0:Y.netWorth)||"N/A"),k,C),C+=8,(null===(Z=e.scoring.positiveFactors)||void 0===Z?void 0:Z.length)>0&&(j.setFont(ig,"bold"),j.setFontSize(8),j.setTextColor(...ng.success),j.text("ALIGNMENT FACTORS",k,C),C+=4,j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.text),e.scoring.positiveFactors.slice(0,4).forEach(e=>{j.text("\u2713 ".concat(e.factor," (+").concat(e.impact,")"),23,C),C+=4}),C+=3),(null===($=e.scoring.negativeFactors)||void 0===$?void 0:$.length)>0&&(j.setFont(ig,"bold"),j.setFontSize(8),j.setTextColor(...ng.warning),j.text("POTENTIAL CONCERNS",k,C),C+=4,j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.text),e.scoring.negativeFactors.slice(0,3).forEach(e=>{j.text("\u26a0 ".concat(e.factor," (").concat(e.impact,")"),23,C),C+=4}),C+=3),C+=10}C=z(60),j.setFont(ig,"bold"),j.setFontSize(11),j.setTextColor(...ng.text),j.text("All Personas Summary",k,C),C+=7;const a=b.map((e,t)=>["".concat(t+1),e.name,"".concat(e.scoring.score,"%"),e.scoring.matchLevel,e.scoring.confidence]);Xf(j,{startY:C,head:[["Rank","Persona","Score","Match Level","Confidence"]],body:a,theme:"striped",headStyles:{fillColor:ng.navy,textColor:ng.white,fontStyle:"bold",fontSize:9},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{halign:"center",cellWidth:15},1:{cellWidth:50},2:{halign:"center",cellWidth:20},3:{halign:"center",cellWidth:28},4:{halign:"center",cellWidth:25}},margin:{left:k,right:k}}),C=j.lastAutoTable.finalY+15}if(x||S){var Q;if(C=z(100),j.setFont(ag,"bold"),j.setFontSize(14),j.setTextColor(...ng.navy),j.text("Design Alignment Insights",k,C),C+=10,j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.textMuted),j.text("How your design decisions align with buyer expectations in this market.",k,C),C+=10,null!==S&&void 0!==S&&S.totalSquareFootage||null!==x&&void 0!==x&&x.selectedSpaces){var J;j.setFont(ig,"bold"),j.setFontSize(10),j.setTextColor(...ng.text),j.text("Space Program Summary",k,C),C+=7;const e=[];if(null!==S&&void 0!==S&&S.totalSquareFootage&&e.push(["Total Square Footage",og(S.totalSquareFootage)+" SF"]),null!==S&&void 0!==S&&S.selectedTier&&e.push(["Size Tier",S.selectedTier.name||"Custom"]),null!==x&&void 0!==x&&null!==(J=x.selectedSpaces)&&void 0!==J&&J.length&&e.push(["Selected Spaces","".concat(x.selectedSpaces.length," spaces defined")]),null!==g&&void 0!==g&&g.avgSqFt&&null!==S&&void 0!==S&&S.totalSquareFootage){const t=S.totalSquareFootage-g.avgSqFt,n=t>2e3?"Larger than market average":t<-2e3?"Smaller than market average":"In line with market average";e.push(["Market Comparison",n])}Xf(j,{startY:C,body:e,theme:"plain",styles:{fontSize:9,cellPadding:3},columnStyles:{0:{fontStyle:"bold",cellWidth:55}},margin:{left:k},tableWidth:.6*_}),C=j.lastAutoTable.finalY+10}if((null===x||void 0===x||null===(Q=x.selectedSpaces)||void 0===Q?void 0:Q.length)>0){C=z(60),j.setFont(ig,"bold"),j.setFontSize(10),j.setTextColor(...ng.text),j.text("Key Spaces & Buyer Appeal",k,C),C+=7;const e={"Home Office":["Tech Executive","Finance Executive","Medical/Biotech"],"Home Theater":["Entertainment Industry","Sports Professional"],Theater:["Entertainment Industry","Sports Professional"],"Wine Cellar":["Finance Executive","Entertainment Industry","Generational Wealth"],Gym:["Sports Professional","Medical/Biotech","Tech Executive"],Spa:["Sports Professional","Medical/Biotech"],Pool:["All Personas"],"Swimming Pool":["All Personas"],"Guest House":["Generational Wealth","International Investor"],"Guest Suite":["Entertainment Industry","Generational Wealth"],"Staff Quarters":["International Investor","Generational Wealth","Family Office"],"Car Gallery":["Tech Executive","Sports Professional"],Studio:["Creative Entrepreneur"],"Den or Office":["Finance Executive","Tech Executive","Family Office"]},t=x.selectedSpaces.slice(0,10).map(t=>{const n="string"===typeof t?t:t.name;return[n,(e[n]||["Various"]).slice(0,2).join(", ")]});Xf(j,{startY:C,head:[["Space","Primary Buyer Appeal"]],body:t,theme:"striped",headStyles:{fillColor:ng.navy,textColor:ng.white,fontStyle:"bold",fontSize:9},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:50}},margin:{left:k},tableWidth:.7*_}),C=j.lastAutoTable.finalY+15}}C=z(80),j.setFont(ag,"bold"),j.setFontSize(14),j.setTextColor(...ng.navy),j.text("Strategic Recommendations",k,C),C+=12,j.setFont(ig,"bold"),j.setFontSize(10),j.setTextColor(...ng.text),j.text("Market Positioning",k,C),C+=6,j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.text);const X=null!==S&&void 0!==S&&S.totalSquareFootage?"Based on the planned ".concat(og(S.totalSquareFootage)," SF program, this property will compete in the ").concat(S.totalSquareFootage>2e4?"ultra-luxury estate":S.totalSquareFootage>15e3?"large luxury residence":S.totalSquareFootage>1e4?"substantial luxury residence":"boutique luxury residence"," segment of the ").concat(A," market."):"This property will compete in the luxury segment of the ".concat(A," market."),ee=j.splitTextToSize(X,_);if(j.text(ee,k,C),C+=4*ee.length+8,(null===b||void 0===b?void 0:b.length)>0){var te;j.setFont(ig,"bold"),j.setFontSize(10),j.setTextColor(...ng.text),j.text("Target Buyer Strategy",k,C),C+=6,j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.text);const e=b[0],t="Primary target: ".concat(e.name," (").concat(e.scoring.score,"% alignment). ").concat((null===(te=e.scoring.positiveFactors)||void 0===te?void 0:te.length)>0?"Key selling points include ".concat(e.scoring.positiveFactors.slice(0,2).map(e=>e.factor).join(" and "),"."):""," ").concat(b[1]?"Secondary opportunity: ".concat(b[1].name," (").concat(b[1].scoring.score,"% alignment)."):""),n=j.splitTextToSize(t,_);j.text(n,k,C),C+=4*n.length+8}j.setFont(ig,"bold"),j.setFontSize(10),j.setTextColor(...ng.text),j.text("Key Recommendations",k,C),C+=6;const ne=[];if((null===b||void 0===b||null===(u=b[0])||void 0===u||null===(h=u.scoring)||void 0===h||null===(p=h.negativeFactors)||void 0===p?void 0:p.length)>0){const e=b[0].scoring.negativeFactors[0];ne.push("Consider adjusting ".concat(e.factor.toLowerCase()," to better align with ").concat(b[0].name," preferences."))}if((null===v||void 0===v?void 0:v.length)>0){const e={};v.forEach(t=>(t.features||[]).forEach(t=>e[t]=(e[t]||0)+1));const t=Object.entries(e).sort((e,t)=>t[1]-e[1])[0];t&&ne.push("".concat(t[0]," appears in ").concat(Math.round(t[1]/v.length*100),"% of comparable listings - ensure competitive offering."))}ne.push("Review buyer persona alignment before finalizing architectural program."),ne.push("Consider market velocity when determining project timeline and pricing strategy."),j.setFont(ig,"normal"),j.setFontSize(9),j.setTextColor(...ng.text),ne.forEach((e,t)=>{j.text("".concat(t+1,". ").concat(e),23,C),C+=5});const ae="N4S-Market-Intelligence-".concat(A.replace(/\s+/g,"-"),"-").concat((new Date).toISOString().split("T")[0],".pdf");return j.save(ae),ae},lg="#1e3a5f",cg=[{zipCode:"90210",city:"Beverly Hills",state:"CA"},{zipCode:"90265",city:"Malibu",state:"CA"},{zipCode:"33139",city:"Miami Beach",state:"FL"},{zipCode:"10019",city:"Manhattan",state:"NY"},{zipCode:"81611",city:"Aspen",state:"CO"},{zipCode:"33480",city:"Palm Beach",state:"FL"},{zipCode:"94027",city:"Atherton",state:"CA"},{zipCode:"06830",city:"Greenwich",state:"CT"}],dg=e=>{let{title:t,value:n,change:a,changeLabel:i,icon:r,trend:o}=e;return(0,T.jsxs)("div",{className:"kym-kpi-card",children:[(0,T.jsxs)("div",{className:"kym-kpi-header",children:[(0,T.jsx)("span",{className:"kym-kpi-title",children:t}),(0,T.jsx)("div",{className:"kym-kpi-icon",children:r})]}),(0,T.jsx)("div",{className:"kym-kpi-value",children:n}),void 0!==a&&(0,T.jsxs)("div",{className:"kym-kpi-change ".concat(a>=0?"kym-kpi-change--positive":"kym-kpi-change--negative"),children:[a>=0?"\u2191":"\u2193"," ",Math.abs(a),"% ",i]})]})},ug=e=>{var t;let{property:n,onClick:a}=e;const i=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),r=(e=>{switch(e){case"active":return{bg:"#dcfce7",text:"#166534"};case"pending":return{bg:"#fef9c3",text:"#854d0e"};case"sold":return{bg:"#dbeafe",text:"#1e40af"};default:return{bg:"#f3f4f6",text:"#374151"}}})(n.status);return(0,T.jsxs)("div",{className:"kym-property-card",onClick:a,children:[(0,T.jsxs)("div",{className:"kym-property-image",children:[n.imageUrl?(0,T.jsx)("img",{src:n.imageUrl,alt:n.address,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,T.jsxs)("div",{className:"kym-property-placeholder",style:{display:n.imageUrl?"none":"flex"},children:[(0,T.jsx)(u,{size:32}),(0,T.jsx)("span",{children:n.sqft>15e3?"Estate":"Luxury"})]}),(0,T.jsx)("span",{className:"kym-property-status",style:{background:r.bg,color:r.text},children:n.status}),n.daysOnMarket<=7&&(0,T.jsx)("span",{className:"kym-property-new",children:"New"}),n.propertyTypeDisplay&&"single_family"!==n.propertyType&&(0,T.jsx)("span",{className:"kym-property-type",children:n.propertyTypeDisplay})]}),(0,T.jsxs)("div",{className:"kym-property-content",children:[(0,T.jsx)("h4",{className:"kym-property-address",children:n.address}),(0,T.jsxs)("p",{className:"kym-property-location",children:[n.city,", ",n.state," ",n.zipCode]}),(0,T.jsxs)("div",{className:"kym-property-specs",children:[(0,T.jsxs)("span",{children:[(0,T.jsx)(ir,{size:14})," ",n.beds]}),(0,T.jsxs)("span",{children:[(0,T.jsx)(rr,{size:14})," ",n.baths]}),(0,T.jsxs)("span",{children:[(0,T.jsx)(om,{size:14})," ",(o=n.sqft,new Intl.NumberFormat("en-US").format(o))]}),(0,T.jsxs)("span",{children:[(0,T.jsx)(sm,{size:14})," ",null===(t=n.acreage)||void 0===t?void 0:t.toFixed(1),"ac"]})]}),(0,T.jsxs)("div",{className:"kym-property-price-row",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"kym-property-price",children:i(n.askingPrice)}),(0,T.jsxs)("div",{className:"kym-property-ppsf",children:[i(n.pricePerSqFt),"/SF"]})]}),(0,T.jsxs)("div",{className:"kym-property-dom",children:[(0,T.jsx)(lm,{size:12})," ",n.daysOnMarket," days"]})]}),n.features&&n.features.length>0&&(0,T.jsxs)("div",{className:"kym-property-features",children:[n.features.slice(0,3).map((e,t)=>(0,T.jsx)("span",{className:"kym-feature-tag",children:e},t)),n.features.length>3&&(0,T.jsxs)("span",{className:"kym-feature-tag",children:["+",n.features.length-3]})]}),n.listingUrl&&(0,T.jsxs)("a",{href:n.listingUrl,target:"_blank",rel:"noopener noreferrer",className:"kym-property-link",onClick:e=>e.stopPropagation(),children:[(0,T.jsx)(Uu,{size:12})," View Listing"]})]})]});var o},hg=e=>{var t;let{property:n,isOpen:i,onClose:r}=e;const[o,s]=(0,a.useState)(!1);if(!i||!n)return null;const l=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),c=(e=>{switch(e){case"active":return{bg:"#dcfce7",text:"#166534"};case"pending":return{bg:"#fef9c3",text:"#854d0e"};case"sold":return{bg:"#dbeafe",text:"#1e40af"};default:return{bg:"#f3f4f6",text:"#374151"}}})(n.status);return(0,T.jsx)("div",{className:"kym-modal-backdrop",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,T.jsxs)("div",{className:"kym-modal-content",children:[(0,T.jsxs)("div",{className:"kym-modal-header",children:[(0,T.jsx)("h2",{className:"kym-modal-title",children:n.address}),(0,T.jsxs)("div",{className:"kym-modal-header-actions",children:[(0,T.jsx)("span",{className:"kym-modal-status",style:{background:c.bg,color:c.text},children:n.status}),(0,T.jsx)("button",{className:"kym-modal-close",onClick:r,children:(0,T.jsx)(y,{size:20})})]})]}),(0,T.jsx)("div",{className:"kym-modal-image-container",children:n.imageUrl&&!o?(0,T.jsx)("img",{src:n.imageUrl,alt:n.address,className:"kym-modal-image",onError:()=>s(!0)}):(0,T.jsxs)("div",{className:"kym-modal-image-placeholder",children:[(0,T.jsx)(u,{size:64}),(0,T.jsx)("span",{children:n.sqft>15e3?"Estate":"Luxury"})]})}),(0,T.jsxs)("div",{className:"kym-modal-location",children:[(0,T.jsx)(cm,{size:16}),(0,T.jsxs)("span",{children:[n.city,", ",n.state," ",n.zipCode]})]}),(0,T.jsxs)("div",{className:"kym-modal-price-section",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("span",{className:"kym-modal-price-label",children:"Asking Price"}),(0,T.jsx)("span",{className:"kym-modal-price-value",children:l(n.askingPrice)})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("span",{className:"kym-modal-price-label",children:"Price per Sq Ft"}),(0,T.jsx)("span",{className:"kym-modal-price-ppsf",children:l(n.pricePerSqFt)})]})]}),(0,T.jsxs)("div",{className:"kym-modal-specs",children:[(0,T.jsxs)("div",{className:"kym-modal-spec",children:[(0,T.jsx)(ir,{size:20}),(0,T.jsx)("span",{className:"kym-modal-spec-value",children:n.beds}),(0,T.jsx)("span",{className:"kym-modal-spec-label",children:"Bedrooms"})]}),(0,T.jsxs)("div",{className:"kym-modal-spec",children:[(0,T.jsx)(rr,{size:20}),(0,T.jsx)("span",{className:"kym-modal-spec-value",children:n.baths}),(0,T.jsx)("span",{className:"kym-modal-spec-label",children:"Bathrooms"})]}),(0,T.jsxs)("div",{className:"kym-modal-spec",children:[(0,T.jsx)(om,{size:20}),(0,T.jsx)("span",{className:"kym-modal-spec-value",children:(d=n.sqft,new Intl.NumberFormat("en-US").format(d))}),(0,T.jsx)("span",{className:"kym-modal-spec-label",children:"Sq Ft"})]}),(0,T.jsxs)("div",{className:"kym-modal-spec",children:[(0,T.jsx)(sm,{size:20}),(0,T.jsx)("span",{className:"kym-modal-spec-value",children:null===(t=n.acreage)||void 0===t?void 0:t.toFixed(2)}),(0,T.jsx)("span",{className:"kym-modal-spec-label",children:"Acres"})]})]}),(0,T.jsxs)("div",{className:"kym-modal-details",children:[n.yearBuilt&&(0,T.jsxs)("div",{className:"kym-modal-detail",children:[(0,T.jsx)(u,{size:14}),(0,T.jsxs)("span",{children:["Year Built: ",(0,T.jsx)("strong",{children:n.yearBuilt})]})]}),(0,T.jsxs)("div",{className:"kym-modal-detail",children:[(0,T.jsx)(lm,{size:14}),(0,T.jsxs)("span",{children:["Days on Market: ",(0,T.jsx)("strong",{children:n.daysOnMarket})]})]})]}),n.features&&n.features.length>0&&(0,T.jsx)("div",{className:"kym-modal-features",children:n.features.map((e,t)=>(0,T.jsx)("span",{className:"kym-modal-feature-tag",children:e},t))}),(0,T.jsxs)("div",{className:"kym-modal-footer",children:[(0,T.jsx)("div",{className:"kym-modal-source",children:n.dataSource&&"generated"!==n.dataSource&&(0,T.jsxs)("span",{className:"kym-modal-source-badge",children:[(0,T.jsx)(Gr,{size:12}),"realtor"===n.dataSource?"Realtor.com":n.dataSource]})}),(0,T.jsxs)("div",{className:"kym-modal-actions",children:[n.listingUrl&&(0,T.jsxs)("button",{className:"kym-modal-btn kym-modal-btn--primary",onClick:()=>window.open(n.listingUrl,"_blank"),children:[(0,T.jsx)(Uu,{size:16}),"View Listing"]}),(0,T.jsx)("button",{className:"kym-modal-btn kym-modal-btn--secondary",onClick:r,children:"Close"})]})]})]})});var d},pg=e=>{let{persona:t}=e;return(0,T.jsxs)("div",{className:"kym-persona-card",children:[(0,T.jsxs)("div",{className:"kym-persona-header",children:[(0,T.jsx)("h4",{children:t.name}),(0,T.jsxs)("span",{className:"kym-persona-likelihood",children:[t.likelihood,"% match"]})]}),(0,T.jsx)("p",{className:"kym-persona-description",children:t.description}),(0,T.jsxs)("div",{className:"kym-persona-details",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Income:"})," ",t.incomeRange]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Age:"})," ",t.ageRange]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("strong",{children:"Occupation:"})," ",t.occupation]})]}),(0,T.jsxs)("div",{className:"kym-persona-priorities",children:[(0,T.jsx)("strong",{children:"Priorities:"}),(0,T.jsx)("div",{className:"kym-persona-tags",children:t.priorities.map((e,t)=>(0,T.jsx)("span",{className:"kym-priority-tag",children:e},t))})]})]})},mg=e=>{let{data:t,height:n=280}=e;const[i,r]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{const e=setTimeout(()=>r(!0),100);return()=>clearTimeout(e)},[t]),(0,a.useEffect)(()=>{r(!1);const e=setTimeout(()=>r(!0),100);return()=>clearTimeout(e)},[t]),!t||0===t.length)return null;const o=20,s=60,l=40,c=70,d=600,u=d-c-s,h=n-o-l,p=t.map(e=>e.medianPrice),m=t.map(e=>e.salesVolume),f=.9*Math.min(...p),g=1.1*Math.max(...p),v=1.2*Math.max(...m),y=e=>e>=1e6?"$".concat((e/1e6).toFixed(1),"M"):"$".concat((e/1e3).toFixed(0),"K"),b=e=>c+e/(t.length-1)*u,x=e=>o+h-(e-f)/(g-f)*h,S=e=>o+h-(e-0)/(v-0)*h,j=e=>{if(e.length<2)return"";let t="M ".concat(e[0].x," ").concat(e[0].y);for(let n=0;n<e.length-1;n++){const a=e[Math.max(0,n-1)],i=e[n],r=e[n+1],o=e[Math.min(e.length-1,n+2)],s=i.x+(r.x-a.x)/6,l=i.y+(r.y-a.y)/6,c=r.x-(o.x-i.x)/6,d=r.y-(o.y-i.y)/6;t+=" C ".concat(s," ").concat(l,", ").concat(c," ").concat(d,", ").concat(r.x," ").concat(r.y)}return t},w=t.map((e,t)=>({x:b(t),y:x(e.medianPrice)})),N=t.map((e,t)=>({x:b(t),y:S(e.salesVolume)})),k=j(w),_=j(N),C=2*u,P=[f,(f+g)/2,g],F=[0,Math.round(v/2),Math.round(v)];return(0,T.jsxs)("div",{className:"kym-animated-chart",children:[(0,T.jsxs)("svg",{viewBox:"0 0 ".concat(d," ").concat(n),className:"kym-chart-svg",children:[(0,T.jsx)("g",{className:"kym-chart-grid",children:[.25,.5,.75,1].map((e,t)=>(0,T.jsx)("line",{x1:c,y1:o+h*(1-e),x2:d-s,y2:o+h*(1-e),stroke:"#e5e5e0",strokeDasharray:"3 3"},t))}),(0,T.jsx)("g",{className:"kym-chart-axis kym-chart-axis--left",children:P.map((e,t)=>(0,T.jsx)("text",{x:c-10,y:x(e),textAnchor:"end",dominantBaseline:"middle",fontSize:"11",fill:"#6b6b6b",children:y(e)},t))}),(0,T.jsx)("g",{className:"kym-chart-axis kym-chart-axis--right",children:F.map((e,t)=>(0,T.jsx)("text",{x:d-s+10,y:S(e),textAnchor:"start",dominantBaseline:"middle",fontSize:"11",fill:"#6b6b6b",children:e},t))}),(0,T.jsx)("g",{className:"kym-chart-axis kym-chart-axis--bottom",children:t.map((e,t)=>(0,T.jsx)("text",{x:b(t),y:n-l+20,textAnchor:"middle",fontSize:"11",fill:"#6b6b6b",children:e.month},t))}),(0,T.jsx)("path",{d:k,fill:"none",stroke:lg,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"kym-chart-line ".concat(i?"kym-chart-line--animated":""),style:{strokeDasharray:C,strokeDashoffset:i?0:C}}),(0,T.jsx)("path",{d:_,fill:"none",stroke:"#0d9488",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"kym-chart-line ".concat(i?"kym-chart-line--animated":""),style:{strokeDasharray:C,strokeDashoffset:i?0:C,transitionDelay:"0.3s"}}),i&&w.map((e,n)=>(0,T.jsxs)("g",{className:"kym-chart-dot-group",children:[(0,T.jsx)("circle",{cx:e.x,cy:e.y,r:"4",fill:lg,className:"kym-chart-dot"}),(0,T.jsx)("circle",{cx:N[n].x,cy:N[n].y,r:"4",fill:"#0d9488",className:"kym-chart-dot"}),(0,T.jsx)("rect",{x:e.x-20,y:o,width:"40",height:h,fill:"transparent",className:"kym-chart-hover-area"}),(0,T.jsxs)("g",{className:"kym-chart-tooltip",transform:"translate(".concat(e.x,", ").concat(Math.min(e.y,N[n].y)-10,")"),children:[(0,T.jsx)("rect",{x:"-50",y:"-45",width:"100",height:"40",rx:"4",fill:"white",stroke:"#e5e5e0"}),(0,T.jsx)("text",{x:"0",y:"-28",textAnchor:"middle",fontSize:"10",fill:"#6b6b6b",children:t[n].month}),(0,T.jsx)("text",{x:"0",y:"-14",textAnchor:"middle",fontSize:"11",fill:lg,fontWeight:"600",children:y(t[n].medianPrice)})]})]},"dot-".concat(n)))]}),(0,T.jsxs)("div",{className:"kym-chart-legend",children:[(0,T.jsxs)("div",{className:"kym-chart-legend-item",children:[(0,T.jsx)("span",{className:"kym-chart-legend-dot",style:{background:lg}}),"Median Price"]}),(0,T.jsxs)("div",{className:"kym-chart-legend-item",children:[(0,T.jsx)("span",{className:"kym-chart-legend-dot",style:{background:"#0d9488"}}),"Sales Volume"]})]})]})},fg=e=>{var t;let{selectedZipCode:n,onSelect:i,onZipSearch:r,clientLocation:o,locationData:s}=e;const[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const y=e=>{i(e),c(!1),u(""),g(null)},b=null!==s&&void 0!==s&&s.location?"".concat(s.location.city,", ").concat(s.location.state):(null===(t=cg.find(e=>e.zipCode===n))||void 0===t?void 0:t.city)||"Loading...";return(0,T.jsxs)("div",{className:"kym-location-selector",ref:v,children:[(0,T.jsxs)("button",{className:"kym-location-button",onClick:()=>c(!l),children:[(0,T.jsx)(cm,{size:16}),(0,T.jsxs)("span",{children:[b," (",n,")"]}),(0,T.jsx)(C,{size:16,className:l?"rotated":""})]}),l&&(0,T.jsxs)("div",{className:"kym-location-dropdown",children:[(0,T.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f&&y(f.zipCode)},className:"kym-zip-search-form",children:[(0,T.jsxs)("div",{className:"kym-zip-search-input-wrapper",children:[(0,T.jsx)(p,{size:14}),(0,T.jsx)("input",{type:"text",placeholder:"Enter any US ZIP code...",value:d,onChange:async e=>{const t=e.target.value.replace(/\D/g,"").slice(0,5);if(u(t),g(null),5===t.length){m(!0);try{const e=await Mm(t);g(e)}catch(jg){g(null)}finally{m(!1)}}},maxLength:5,className:"kym-zip-search-input"}),h&&(0,T.jsx)(dm,{size:14,className:"spinning"})]}),f&&(0,T.jsxs)("button",{type:"button",className:"kym-zip-result",onClick:()=>y(f.zipCode),children:[(0,T.jsx)(cm,{size:14}),(0,T.jsx)("span",{children:f.formattedName}),(0,T.jsx)(N,{size:14,className:"kym-zip-result-check"})]}),5===d.length&&!h&&!f&&(0,T.jsxs)("div",{className:"kym-zip-invalid",children:[(0,T.jsx)(k,{size:14}),(0,T.jsx)("span",{children:"Invalid ZIP code"})]})]}),o&&(0,T.jsxs)("div",{className:"kym-location-section",children:[(0,T.jsx)("div",{className:"kym-location-section-title",children:"From Your Project"}),(0,T.jsxs)("button",{className:"kym-location-option kym-location-option--highlight",onClick:()=>y(o.zipCode||"90210"),children:[(0,T.jsx)(cm,{size:14}),o.city,", ",o.country]})]}),(0,T.jsxs)("div",{className:"kym-location-section",children:[(0,T.jsx)("div",{className:"kym-location-section-title",children:"Popular Luxury Markets"}),cg.map(e=>(0,T.jsxs)("button",{className:"kym-location-option ".concat(e.zipCode===n?"kym-location-option--active":""),onClick:()=>y(e.zipCode),children:[e.city,", ",e.state,(0,T.jsx)("span",{className:"kym-location-zip",children:e.zipCode})]},e.zipCode))]})]})]})};const gg=e=>{var t,n,i,r,o;let{showDocs:l,onCloseDocs:c}=e;const{kycData:d,fyiData:m,mvpData:f}=W(),[v,y]=(0,a.useState)("market"),[b,x]=(0,a.useState)("90210"),[S,j]=(0,a.useState)(null),[_,C]=(0,a.useState)(!1),[P,F]=(0,a.useState)(null),[A,L]=(0,a.useState)(null),[M,R]=(0,a.useState)(!1),[I,z]=(0,a.useState)(""),[D,E]=(0,a.useState)([]),[O,B]=(0,a.useState)(!1),[q,H]=(0,a.useState)(!1),G=(0,a.useRef)(null),[U,K]=((0,a.useRef)(null),(0,a.useState)([5e6,25e6])),[Y,Z]=(0,a.useState)([5500,26e3]),[$,Q]=(0,a.useState)(""),[J,X]=(0,a.useState)(!0),[ee,te]=(0,a.useState)(["active","pending","sold"]),[ne,ae]=(0,a.useState)([]),[ie,re]=(0,a.useState)(null),[oe,se]=(0,a.useState)(!1),le=(0,a.useMemo)(()=>{const e=Vm(d,m,f,null===S||void 0===S?void 0:S.location);return Km(e)},[d,m,f,null===S||void 0===S?void 0:S.location]),ce=null!==d&&void 0!==d&&null!==(t=d.principal)&&void 0!==t&&null!==(n=t.projectParameters)&&void 0!==n&&n.projectCity?{city:d.principal.projectParameters.projectCity,country:d.principal.projectParameters.projectCountry,zipCode:null}:null,de=(0,a.useCallback)(async e=>{C(!0),F(null);try{console.log("[KYM] Fetching data for ZIP:",e);const t=await Hm(e);if(t.error)return F(t.error),j(null),L(null),void R(Lm());const n=function(e,t){let n=0;for(let s=0;s<e.length;s++)n=(n<<5)-n+e.charCodeAt(s),n&=n;const a=()=>(n=Math.imul(n^n>>>16,2246822507),n=Math.imul(n^n>>>13,3266489909),n^=n>>>16,(n>>>0)/4294967295),i=12e4*({CA:1.3,NY:1.4,FL:1.1,TX:1,CO:1.2,CT:1.3,MA:1.35,NJ:1.25,WA:1.25,AZ:.95}[null===t||void 0===t?void 0:t.state]||1),r=Math.round(i*(.8+.8*a())),o=r>18e4;return{id:"demo-".concat(e),location:(null===t||void 0===t?void 0:t.formattedName)||"".concat(null===t||void 0===t?void 0:t.city,", ").concat(null===t||void 0===t?void 0:t.state),zipCode:e,totalPopulation:Math.round(15e3+4e4*a()),populationGrowth:Math.round(10*(.5+3*a()))/10,medianHouseholdIncome:r,averageAge:Math.round(35+15*a()),educationLevels:{highSchool:Math.round(90+9*a()),bachelors:Math.round((o?55:35)+25*a()),graduate:Math.round((o?30:15)+20*a())},incomeDistribution:o?[{bracket:"$500K+",percentage:Math.round(15+15*a())},{bracket:"$200K-$500K",percentage:Math.round(25+15*a())},{bracket:"$100K-$200K",percentage:Math.round(25+10*a())},{bracket:"$50K-$100K",percentage:Math.round(15+10*a())},{bracket:"Under $50K",percentage:Math.round(5+10*a())}]:[{bracket:"$500K+",percentage:Math.round(3+5*a())},{bracket:"$200K-$500K",percentage:Math.round(10+10*a())},{bracket:"$100K-$200K",percentage:Math.round(25+15*a())},{bracket:"$50K-$100K",percentage:Math.round(30+10*a())},{bracket:"Under $50K",percentage:Math.round(20+15*a())}],ageDistribution:[{range:"0-17",male:Math.round(8+4*a()),female:Math.round(7+4*a())},{range:"18-34",male:Math.round(10+6*a()),female:Math.round(10+6*a())},{range:"35-54",male:Math.round(14+8*a()),female:Math.round(14+8*a())},{range:"55-74",male:Math.round(10+8*a()),female:Math.round(11+8*a())},{range:"75+",male:Math.round(3+5*a()),female:Math.round(4+6*a())}],dataNote:"Estimates based on regional characteristics. For precise data, consult US Census Bureau."}}(e,t.location),a=function(e){const t=(null===e||void 0===e?void 0:e.state)||"CA",n=["NY","CT","NJ"],a=["CA","FL"],i=[];["CA","WA","TX","CO","MA"].includes(t)&&i.push({id:"persona-tech",name:"Tech Executive",description:"Technology industry leaders and successful founders seeking modern estates with advanced amenities.",incomeRange:"$5M - $20M annually",ageRange:"35-55",occupation:"Tech CEO / Founder / Executive",priorities:["Privacy","Smart Home Technology","Home Office","Entertainment"],preferences:["Modern architecture","Sustainable features","EV charging"],likelihood:85});a.includes(t)&&i.push({id:"persona-entertainment",name:"Entertainment Industry",description:"Film producers, studio executives, and creative industry leaders seeking prestigious properties.",incomeRange:"$3M - $15M annually",ageRange:"40-60",occupation:"Producer / Director / Studio Executive",priorities:["Location Prestige","Privacy","Guest Entertainment","Views"],preferences:["Screening room","High security","Guest quarters"],likelihood:78});n.includes(t)&&i.push({id:"persona-finance",name:"Finance Executive",description:"Investment bankers, hedge fund managers, and private equity principals.",incomeRange:"$5M - $50M annually",ageRange:"40-65",occupation:"Finance / Investment Management",priorities:["Investment Value","Privacy","Proximity to NYC","School Districts"],preferences:["Traditional architecture","Wine cellar","Home office"],likelihood:82});return i.push({id:"persona-international",name:"International Investor",description:"Global wealth holders seeking trophy properties in premier US markets.",incomeRange:"$10M+ annually",ageRange:"45-70",occupation:"International Business / Investment",priorities:["Security","Asset Diversification","Staff Quarters","Privacy"],preferences:["Gated community","Multiple structures","Turn-key"],likelihood:70}),i.push({id:"persona-legacy",name:"Generational Wealth",description:"Multi-generational families seeking estates for long-term family use.",incomeRange:"$20M+ net worth",ageRange:"55-75",occupation:"Family Office / Inherited Wealth",priorities:["Legacy Value","Family Compound","Privacy","Staff Accommodations"],preferences:["Classic architecture","Large acreage","Guest houses"],likelihood:65}),i.slice(0,3)}(t.location);j(s(s({},t),{},{demographics:n,buyerPersonas:a})),L(t.dataSource),R(t.apiKeyConfigured),t.properties.length>0?console.log("[KYM] Loaded ".concat(t.properties.length," real properties")):t.apiKeyConfigured?console.log("[KYM] No luxury properties found in this ZIP code"):console.log("[KYM] No API key configured - properties unavailable")}catch(Mt){console.error("[KYM] Error:",Mt),F(Mt.message||"Failed to fetch location data"),j(null),L(null)}finally{C(!1)}},[]);(0,a.useEffect)(()=>{const e=e=>{G.current&&!G.current.contains(e.target)&&H(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{de(b)},[b,de]);const ue=((null===S||void 0===S?void 0:S.properties)||[]).filter(e=>{const t=e.askingPrice>=U[0]&&e.askingPrice<=U[1],n=e.sqft>=Y[0]&&e.sqft<=Y[1],a=ee.includes(e.status),i=!$||e.address.toLowerCase().includes($.toLowerCase())||e.city.toLowerCase().includes($.toLowerCase()),r=0===ne.length||ne.every(t=>{var n;return null===(n=e.features)||void 0===n?void 0:n.includes(t)});return t&&n&&a&&i&&r}),he=e=>{ae(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},pe=()=>{K([5e6,25e6]),Z([5500,26e3]),Q(""),te(["active","pending","sold"]),ae([])},me=(null===S||void 0===S||null===(i=S.properties)||void 0===i?void 0:i.length)>0,fe=ue.length>0,ge=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),ve=e=>new Intl.NumberFormat("en-US").format(e);return l?(0,T.jsx)(Pm,{onClose:c}):(0,T.jsxs)("div",{className:"kym-module",children:[(0,T.jsxs)("div",{className:"kym-header",children:[(0,T.jsxs)("div",{className:"kym-header__title-area",children:[(0,T.jsx)("h1",{className:"kym-header__title",children:"Know Your Market"}),(0,T.jsx)("p",{className:"kym-header__subtitle",children:"Market intelligence for luxury residential development"})]}),(0,T.jsxs)("div",{className:"kym-header__actions",children:[(0,T.jsx)(fg,{selectedZipCode:b,onSelect:e=>{x(e)},clientLocation:ce,locationData:S}),(0,T.jsxs)("button",{className:"kym-export-btn",onClick:async()=>{if(S){se(!0);try{const e=S.properties||[],t=e.map(e=>e.askingPrice).filter(e=>e>0),n=e.map(e=>e.sqft).filter(e=>e>0),a=e.map(e=>e.daysOnMarket).filter(e=>null!==e&&void 0!==e),i={medianPrice:t.length>0?t.sort((e,t)=>e-t)[Math.floor(t.length/2)]:0,avgPrice:t.length>0?Math.round(t.reduce((e,t)=>e+t,0)/t.length):0,minPrice:t.length>0?Math.min(...t):0,maxPrice:t.length>0?Math.max(...t):0,avgPricePerSqFt:t.length>0&&n.length>0?Math.round(t.reduce((e,t)=>e+t,0)/n.reduce((e,t)=>e+t,0)):0,avgSqFt:n.length>0?Math.round(n.reduce((e,t)=>e+t,0)/n.length):0,avgDaysOnMarket:a.length>0?Math.round(a.reduce((e,t)=>e+t,0)/a.length):null},r=le.map(e=>s(s({},e),Wm[e.id]));await sg({kycData:d,locationData:S,marketData:i,properties:e,demographics:S.demographics,personaResults:r,fyiData:m,mvpData:f}),console.log("[KYM] Report exported successfully")}catch(P){console.error("[KYM] Export error:",P),F("Failed to export report. Please try again.")}finally{se(!1)}}},disabled:_||oe||!S,title:"Export Market Intelligence Report",children:[(0,T.jsx)(um,{size:16,className:oe?"spinning":""}),oe?"Exporting...":"Export Report"]}),(0,T.jsxs)("button",{className:"kym-refresh-btn",onClick:()=>{de(b)},disabled:_,children:[(0,T.jsx)(Ir,{size:16,className:_?"spinning":""}),"Refresh"]})]})]}),(0,T.jsx)("div",{className:"kym-data-source",children:"realtor"===A?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("span",{className:"kym-data-badge kym-data-badge--live",children:[(0,T.jsx)(N,{size:14})," Live Data"]}),(0,T.jsxs)("span",{className:"kym-data-note",children:[(null===S||void 0===S?void 0:S.propertyCount)||0," properties from Realtor.com"]})]}):"estimates"===A?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("span",{className:"kym-data-badge kym-data-badge--estimates",children:[(0,T.jsx)(hm,{size:14})," Market Estimates"]}),(0,T.jsx)("span",{className:"kym-data-note",children:M?"No luxury listings ($3M+) in this area. Showing market estimates.":"Add REACT_APP_RAPIDAPI_KEY for live property listings."})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("span",{className:"kym-data-badge kym-data-badge--error",children:[(0,T.jsx)(k,{size:14})," Loading Error"]}),(0,T.jsx)("span",{className:"kym-data-note",children:P||"Unable to load market data"})]})}),(0,T.jsxs)("div",{className:"kym-tabs",children:[(0,T.jsxs)("button",{className:"kym-tab ".concat("market"===v?"kym-tab--active":""),onClick:()=>y("market"),children:[(0,T.jsx)(V,{size:16}),"Market Analysis"]}),(0,T.jsxs)("button",{className:"kym-tab ".concat("comparables"===v?"kym-tab--active":""),onClick:()=>y("comparables"),children:[(0,T.jsx)(u,{size:16}),"Comparable Properties"]}),(0,T.jsxs)("button",{className:"kym-tab ".concat("demographics"===v?"kym-tab--active":""),onClick:()=>y("demographics"),children:[(0,T.jsx)(h,{size:16}),"Demographics"]}),(0,T.jsxs)("button",{className:"kym-tab ".concat("buyers"===v?"kym-tab--active":""),onClick:()=>y("buyers"),children:[(0,T.jsx)(cp,{size:16}),"Buyer Alignment"]})]}),(0,T.jsxs)("div",{className:"kym-content",children:[P&&(0,T.jsxs)("div",{className:"kym-error",children:[(0,T.jsx)(k,{size:20}),(0,T.jsx)("span",{children:P})]}),"market"===v&&(0,T.jsx)("div",{className:"kym-market-analysis",children:_?(0,T.jsxs)("div",{className:"kym-loading",children:[(0,T.jsx)(Ir,{size:24,className:"spinning"}),(0,T.jsx)("span",{children:"Loading market data..."})]}):null!==S&&void 0!==S&&S.marketData?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"kym-kpi-grid",children:[(0,T.jsx)(dg,{title:"Market Growth Rate",value:"".concat(S.marketData.growthRate,"%"),change:S.marketData.growthRate>5?2.3:-1.5,changeLabel:"vs last year",icon:(0,T.jsx)(V,{size:20})}),(0,T.jsx)(dg,{title:"Median Price/SF",value:ge(S.marketData.medianPricePerSqFt),change:8.5,changeLabel:"vs last quarter",icon:(0,T.jsx)(xe,{size:20})}),(0,T.jsx)(dg,{title:"Avg. Listing Duration",value:"".concat(S.marketData.avgListingDuration," days"),change:-12,changeLabel:"faster sales",icon:(0,T.jsx)(w,{size:20})}),(0,T.jsx)(dg,{title:"Demand Index",value:S.marketData.demandIndex.toFixed(1),change:5.2,changeLabel:"buyer activity",icon:(0,T.jsx)(hm,{size:20})})]}),(0,T.jsxs)("div",{className:"kym-market-charts",children:[(0,T.jsxs)("div",{className:"kym-chart-card kym-chart-card--wide",children:[(0,T.jsx)("h3",{children:"Price Trends (12 Months)"}),(0,T.jsx)(mg,{data:S.marketData.historicalData,height:280})]}),(0,T.jsxs)("div",{className:"kym-chart-card",children:[(0,T.jsx)("h3",{children:"Market Summary"}),(0,T.jsxs)("div",{className:"kym-summary-list",children:[(0,T.jsxs)("div",{className:"kym-summary-item",children:[(0,T.jsx)("span",{children:"Location"}),(0,T.jsx)("strong",{children:S.marketData.location})]}),(0,T.jsxs)("div",{className:"kym-summary-item",children:[(0,T.jsx)("span",{children:"ZIP Code"}),(0,T.jsx)("strong",{children:S.marketData.zipCode})]}),(0,T.jsxs)("div",{className:"kym-summary-item",children:[(0,T.jsx)("span",{children:"Market Type"}),(0,T.jsx)("strong",{children:"Luxury Residential"})]}),(0,T.jsxs)("div",{className:"kym-summary-item",children:[(0,T.jsx)("span",{children:"Property Focus"}),(0,T.jsx)("strong",{children:"10,000+ SF"})]})]}),(0,T.jsxs)("div",{className:"kym-market-outlook",children:[(0,T.jsx)("h4",{children:"Market Outlook"}),(0,T.jsx)("p",{children:S.marketData.demandIndex>7?"Strong buyer demand with limited inventory creates favorable conditions for sellers.":S.marketData.demandIndex>5?"Balanced market conditions with steady appreciation potential.":"Buyer's market with negotiation opportunities available."})]})]})]})]}):(0,T.jsxs)("div",{className:"kym-empty",children:[(0,T.jsx)(cm,{size:48}),(0,T.jsx)("p",{children:"Select a location to view market analysis"})]})}),"comparables"===v&&(0,T.jsx)("div",{className:"kym-comparables",children:(0,T.jsxs)("div",{className:"kym-comparables-layout",children:[J&&(0,T.jsxs)("div",{className:"kym-filters-panel",children:[(0,T.jsxs)("div",{className:"kym-filters-header",children:[(0,T.jsx)("h3",{children:"Filters"}),(0,T.jsx)("button",{onClick:pe,children:"Clear All"})]}),(0,T.jsxs)("div",{className:"kym-filter-group",children:[(0,T.jsx)("label",{children:"Price Range"}),(0,T.jsxs)("div",{className:"kym-range-display",children:[ge(U[0])," - ",ge(U[1])]}),(0,T.jsx)("input",{type:"range",min:1e6,max:5e7,step:5e5,value:U[0],onChange:e=>K([parseInt(e.target.value),U[1]])}),(0,T.jsx)("input",{type:"range",min:1e6,max:5e7,step:5e5,value:U[1],onChange:e=>K([U[0],parseInt(e.target.value)])})]}),(0,T.jsxs)("div",{className:"kym-filter-group",children:[(0,T.jsx)("label",{children:"Square Footage"}),(0,T.jsxs)("div",{className:"kym-range-display",children:[ve(Y[0])," - ",ve(Y[1])," SF"]}),(0,T.jsx)("input",{type:"range",min:5e3,max:3e4,step:500,value:Y[0],onChange:e=>Z([parseInt(e.target.value),Y[1]])}),(0,T.jsx)("input",{type:"range",min:5e3,max:3e4,step:500,value:Y[1],onChange:e=>Z([Y[0],parseInt(e.target.value)])})]}),(0,T.jsxs)("div",{className:"kym-filter-group",children:[(0,T.jsx)("label",{children:"Property Status"}),(0,T.jsxs)("div",{className:"kym-status-filter-buttons",children:[(0,T.jsx)("button",{className:"kym-status-filter-btn ".concat(3===ee.length?"kym-status-filter-btn--active":""),onClick:()=>te(["active","pending","sold"]),children:"All"}),(0,T.jsx)("button",{className:"kym-status-filter-btn kym-status-filter-btn--active-status ".concat(1===ee.length&&"active"===ee[0]?"kym-status-filter-btn--active":""),onClick:()=>te(["active"]),children:"Active"}),(0,T.jsx)("button",{className:"kym-status-filter-btn kym-status-filter-btn--pending-status ".concat(1===ee.length&&"pending"===ee[0]?"kym-status-filter-btn--active":""),onClick:()=>te(["pending"]),children:"Pending"}),(0,T.jsx)("button",{className:"kym-status-filter-btn kym-status-filter-btn--sold-status ".concat(1===ee.length&&"sold"===ee[0]?"kym-status-filter-btn--active":""),onClick:()=>te(["sold"]),children:"Sold"})]})]}),(0,T.jsxs)("div",{className:"kym-filter-group",children:[(0,T.jsx)("label",{children:"Features"}),(0,T.jsx)("div",{className:"kym-feature-filter-buttons",children:["Swimming Pool","Guest House","Den or Office","Elevator","Wine Cellar","Theater"].map(e=>(0,T.jsx)("button",{className:"kym-feature-filter-btn ".concat(ne.includes(e)?"kym-feature-filter-btn--active":""),onClick:()=>he(e),children:e},e))}),ne.length>0&&(0,T.jsxs)("div",{className:"kym-active-filters",children:[(0,T.jsx)("span",{className:"kym-active-filters-label",children:"Active: "}),ne.map(e=>(0,T.jsxs)("span",{className:"kym-active-filter-tag",children:[e,(0,T.jsx)("button",{onClick:()=>he(e),children:"\xd7"})]},e))]})]})]}),(0,T.jsxs)("div",{className:"kym-comparables-main",children:[(0,T.jsxs)("div",{className:"kym-comparables-toolbar",children:[(0,T.jsx)("button",{className:"kym-filter-toggle",onClick:()=>X(!J),children:(0,T.jsx)(pm,{size:16})}),(0,T.jsxs)("div",{className:"kym-search-box",children:[(0,T.jsx)(p,{size:16}),(0,T.jsx)("input",{type:"text",placeholder:"Search by address...",value:$,onChange:e=>Q(e.target.value)})]}),(0,T.jsxs)("span",{className:"kym-property-count",children:[ue.length," properties"]})]}),_?(0,T.jsxs)("div",{className:"kym-loading",children:[(0,T.jsx)(Ir,{size:24,className:"spinning"}),(0,T.jsx)("span",{children:"Loading properties..."})]}):M?me?fe?(0,T.jsx)("div",{className:"kym-property-grid",children:ue.map(e=>(0,T.jsx)(ug,{property:e,onClick:()=>re(e)},e.id))}):(0,T.jsxs)("div",{className:"kym-empty",children:[(0,T.jsx)(pm,{size:48}),(0,T.jsx)("h3",{children:"No Matching Properties"}),(0,T.jsxs)("p",{children:["Your filters are hiding all ",(null===S||void 0===S||null===(o=S.properties)||void 0===o?void 0:o.length)||0," properties."]}),(0,T.jsx)("button",{className:"kym-reset-filters-btn",onClick:pe,children:"Reset Filters"})]}):(0,T.jsxs)("div",{className:"kym-empty",children:[(0,T.jsx)(u,{size:48}),(0,T.jsx)("h3",{children:"No Luxury Listings Available"}),(0,T.jsxs)("p",{children:["No properties priced $3M+ were found in ",(null===S||void 0===S||null===(r=S.location)||void 0===r?void 0:r.city)||"this area","."]}),(0,T.jsx)("p",{className:"kym-empty-hint",children:"Try a different ZIP code or check back later."})]}):(0,T.jsxs)("div",{className:"kym-empty kym-empty--config",children:[(0,T.jsx)(g,{size:48}),(0,T.jsx)("h3",{children:"API Key Required"}),(0,T.jsx)("p",{children:"To view real property listings from Realtor.com, configure your RapidAPI key."}),(0,T.jsx)("div",{className:"kym-config-steps",children:(0,T.jsxs)("ol",{children:[(0,T.jsxs)("li",{children:["Sign up at ",(0,T.jsx)("a",{href:"https://rapidapi.com",target:"_blank",rel:"noopener noreferrer",children:"rapidapi.com"})]}),(0,T.jsxs)("li",{children:["Subscribe to ",(0,T.jsx)("a",{href:"https://rapidapi.com/apidojo/api/realty-in-us",target:"_blank",rel:"noopener noreferrer",children:"Realty in US API"})," (free tier: 500 requests/month)"]}),(0,T.jsxs)("li",{children:["Add ",(0,T.jsx)("code",{children:"REACT_APP_RAPIDAPI_KEY=your_key"})," to ",(0,T.jsx)("code",{children:".env.local"})]}),(0,T.jsx)("li",{children:"Restart the development server"})]})})]})]})]})}),"demographics"===v&&(0,T.jsx)("div",{className:"kym-demographics",children:_?(0,T.jsxs)("div",{className:"kym-loading",children:[(0,T.jsx)(Ir,{size:24,className:"spinning"}),(0,T.jsx)("span",{children:"Loading demographics..."})]}):null!==S&&void 0!==S&&S.demographics?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"kym-demo-kpis",children:[(0,T.jsxs)("div",{className:"kym-demo-kpi",children:[(0,T.jsx)("div",{className:"kym-demo-kpi-icon",children:(0,T.jsx)(h,{size:20})}),(0,T.jsxs)("div",{className:"kym-demo-kpi-content",children:[(0,T.jsx)("span",{className:"kym-demo-kpi-label",children:"Total Population"}),(0,T.jsx)("span",{className:"kym-demo-kpi-value",children:ve(S.demographics.totalPopulation)}),(0,T.jsxs)("span",{className:"kym-demo-kpi-change",children:["+",S.demographics.populationGrowth,"% growth"]})]})]}),(0,T.jsxs)("div",{className:"kym-demo-kpi",children:[(0,T.jsx)("div",{className:"kym-demo-kpi-icon",children:(0,T.jsx)(xe,{size:20})}),(0,T.jsxs)("div",{className:"kym-demo-kpi-content",children:[(0,T.jsx)("span",{className:"kym-demo-kpi-label",children:"Median Income"}),(0,T.jsx)("span",{className:"kym-demo-kpi-value",children:ge(S.demographics.medianHouseholdIncome)}),(0,T.jsx)("span",{className:"kym-demo-kpi-sub",children:"per household"})]})]}),(0,T.jsxs)("div",{className:"kym-demo-kpi",children:[(0,T.jsx)("div",{className:"kym-demo-kpi-icon",children:(0,T.jsx)(h,{size:20})}),(0,T.jsxs)("div",{className:"kym-demo-kpi-content",children:[(0,T.jsx)("span",{className:"kym-demo-kpi-label",children:"Average Age"}),(0,T.jsxs)("span",{className:"kym-demo-kpi-value",children:[S.demographics.averageAge," years"]}),(0,T.jsx)("span",{className:"kym-demo-kpi-sub",children:"resident age"})]})]}),(0,T.jsxs)("div",{className:"kym-demo-kpi",children:[(0,T.jsx)("div",{className:"kym-demo-kpi-icon",children:(0,T.jsx)(mm,{size:20})}),(0,T.jsxs)("div",{className:"kym-demo-kpi-content",children:[(0,T.jsx)("span",{className:"kym-demo-kpi-label",children:"Higher Education"}),(0,T.jsxs)("span",{className:"kym-demo-kpi-value",children:[S.demographics.educationLevels.graduate,"%"]}),(0,T.jsx)("span",{className:"kym-demo-kpi-sub",children:"graduate degree"})]})]})]}),(0,T.jsxs)("div",{className:"kym-demo-charts",children:[(0,T.jsxs)("div",{className:"kym-demo-chart-card",children:[(0,T.jsx)("h3",{children:"Income Distribution"}),(0,T.jsx)("div",{className:"kym-income-bars",children:S.demographics.incomeDistribution.map((e,t)=>(0,T.jsxs)("div",{className:"kym-income-bar-row",children:[(0,T.jsx)("span",{className:"kym-income-label",children:e.bracket}),(0,T.jsx)("div",{className:"kym-income-bar-track",children:(0,T.jsx)("div",{className:"kym-income-bar-fill",style:{width:"".concat(e.percentage,"%")}})}),(0,T.jsxs)("span",{className:"kym-income-value",children:[e.percentage,"%"]})]},t))})]}),(0,T.jsxs)("div",{className:"kym-demo-chart-card",children:[(0,T.jsx)("h3",{children:"Education Levels"}),(0,T.jsxs)("div",{className:"kym-education-bars",children:[(0,T.jsxs)("div",{className:"kym-edu-bar-row",children:[(0,T.jsx)("span",{children:"High School"}),(0,T.jsx)("div",{className:"kym-edu-bar-track",children:(0,T.jsx)("div",{className:"kym-edu-bar-fill",style:{width:"".concat(S.demographics.educationLevels.highSchool,"%")}})}),(0,T.jsxs)("span",{children:[S.demographics.educationLevels.highSchool,"%"]})]}),(0,T.jsxs)("div",{className:"kym-edu-bar-row",children:[(0,T.jsx)("span",{children:"Bachelor's"}),(0,T.jsx)("div",{className:"kym-edu-bar-track",children:(0,T.jsx)("div",{className:"kym-edu-bar-fill",style:{width:"".concat(S.demographics.educationLevels.bachelors,"%")}})}),(0,T.jsxs)("span",{children:[S.demographics.educationLevels.bachelors,"%"]})]}),(0,T.jsxs)("div",{className:"kym-edu-bar-row",children:[(0,T.jsx)("span",{children:"Graduate"}),(0,T.jsx)("div",{className:"kym-edu-bar-track",children:(0,T.jsx)("div",{className:"kym-edu-bar-fill",style:{width:"".concat(S.demographics.educationLevels.graduate,"%")}})}),(0,T.jsxs)("span",{children:[S.demographics.educationLevels.graduate,"%"]})]})]})]})]}),(0,T.jsxs)("div",{className:"kym-personas-section",children:[(0,T.jsx)("h2",{children:"Target Buyer Personas"}),(0,T.jsx)("p",{className:"kym-personas-subtitle",children:"Identified demographic groups most likely to invest in luxury residences"}),S.buyerPersonas&&S.buyerPersonas.length>0?(0,T.jsx)("div",{className:"kym-personas-grid",children:S.buyerPersonas.map(e=>(0,T.jsx)(pg,{persona:e},e.id))}):(0,T.jsxs)("div",{className:"kym-empty",children:[(0,T.jsx)(h,{size:48}),(0,T.jsx)("p",{children:"No buyer personas available for this location"})]}),(0,T.jsxs)("div",{className:"kym-feature-priorities",children:[(0,T.jsx)("h3",{children:"Must-Have Features by Priority"}),(0,T.jsx)("div",{className:"kym-priority-grid",children:[{feature:"Gourmet Kitchen",priority:95},{feature:"Private Pool & Spa",priority:92},{feature:"Security System",priority:90},{feature:"Smart Home Technology",priority:88},{feature:"Home Theater",priority:85},{feature:"Eco-Friendly Features",priority:80},{feature:"Wine Cellar",priority:78},{feature:"Guest House",priority:72},{feature:"Tennis Court",priority:65}].map((e,t)=>(0,T.jsxs)("div",{className:"kym-priority-item",children:[(0,T.jsxs)("div",{className:"kym-priority-header",children:[(0,T.jsx)("span",{children:e.feature}),(0,T.jsxs)("span",{className:"kym-priority-badge",children:[e.priority,"%"]})]}),(0,T.jsx)("div",{className:"kym-priority-bar",children:(0,T.jsx)("div",{className:"kym-priority-fill",style:{width:"".concat(e.priority,"%")}})})]},t))})]})]})]}):(0,T.jsxs)("div",{className:"kym-empty",children:[(0,T.jsx)(h,{size:48}),(0,T.jsx)("p",{children:"Select a location to view demographics"})]})}),"buyers"===v&&(0,T.jsx)(sf,{personaResults:le,marketData:S})]}),(0,T.jsx)(hg,{property:ie,isOpen:!!ie,onClose:()=>re(null)})]})},vg={dashboard:{bg:"#1e3a5f",text:"#ffffff",accent:"#c9a227"},kyc:{bg:"#315098",text:"#ffffff",accent:"#315098"},fyi:{bg:"#8CA8BE",text:"#1a1a1a",accent:"#8CA8BE"},mvp:{bg:"#AFBDB0",text:"#1a1a1a",accent:"#AFBDB0"},kym:{bg:"#E4C0BE",text:"#1a1a1a",accent:"#E4C0BE"},vmx:{bg:"#FBD0E0",text:"#1a1a1a",accent:"#FBD0E0"},settings:{bg:"#374151",text:"#ffffff",accent:"#9ca3af"}},yg=()=>(0,T.jsxs)("div",{className:"settings-panel",children:[(0,T.jsxs)("div",{className:"settings-panel__header",children:[(0,T.jsx)("h2",{children:"Settings"}),(0,T.jsx)("p",{children:"Application settings and configuration"})]}),(0,T.jsxs)("div",{className:"settings-panel__content",children:[(0,T.jsxs)("div",{className:"settings-section",children:[(0,T.jsx)("h3",{children:"Project Settings"}),(0,T.jsx)("p",{className:"settings-section__description",children:"Configure project defaults and preferences."}),(0,T.jsx)("div",{className:"settings-placeholder",children:"Settings options coming soon..."})]}),(0,T.jsxs)("div",{className:"settings-section",children:[(0,T.jsx)("h3",{children:"Export & Data"}),(0,T.jsx)("p",{className:"settings-section__description",children:"Export project data or manage backups."}),(0,T.jsx)("div",{className:"settings-placeholder",children:"Export options coming soon..."})]})]})]}),bg=()=>{var e,t,n,i,r,o,s,l,c,d,j;const[w,N]=(0,a.useState)(()=>{try{return localStorage.getItem("n4s_active_module")||"dashboard"}catch(e){return"dashboard"}}),[k,_]=(0,a.useState)(!0),[C,P]=(0,a.useState)(!1),{clientData:F,kycData:A}=W();a.useEffect(()=>{try{localStorage.setItem("n4s_active_module",w)}catch(Sg){console.warn("Failed to save active module:",Sg)}},[w]),a.useEffect(()=>{P(!1)},[w]);const L=[{id:"dashboard",label:"Dashboard",icon:u,description:"Overview & Progress"},{id:"kyc",label:"KYC",icon:h,description:"Know Your Client"},{id:"fyi",label:"FYI",icon:p,description:"Find Your Inspiration"},{id:"mvp",label:"MVP",icon:m,description:"Mansion Validation"},{id:"kym",label:"KYM",icon:f,description:"Know Your Market"},{id:"settings",label:"Settings",icon:g,description:"App Configuration"}];return(0,T.jsxs)("div",{className:"app-container",children:[(0,T.jsxs)("aside",{className:"sidebar ".concat(k?"sidebar--open":"sidebar--closed"),children:[(0,T.jsxs)("div",{className:"sidebar__header",children:[(0,T.jsxs)("div",{className:"sidebar__logo",children:[(0,T.jsx)(v,{className:"sidebar__logo-icon"}),k&&(0,T.jsx)("span",{className:"sidebar__logo-text",children:"N4S"})]}),(0,T.jsx)("button",{className:"sidebar__toggle",onClick:()=>_(!k),"aria-label":k?"Collapse sidebar":"Expand sidebar",children:k?(0,T.jsx)(y,{size:20}):(0,T.jsx)(b,{size:20})})]}),(0,T.jsx)("nav",{className:"sidebar__nav",children:L.map(e=>{const t=e.icon,n=w===e.id;return(0,T.jsxs)("button",{className:"sidebar__nav-item ".concat(n?"sidebar__nav-item--active":""),onClick:()=>N(e.id),title:k?void 0:e.label,children:[(0,T.jsx)(t,{className:"sidebar__nav-icon"}),k&&(0,T.jsxs)("div",{className:"sidebar__nav-content",children:[(0,T.jsx)("span",{className:"sidebar__nav-label",children:e.label}),(0,T.jsx)("span",{className:"sidebar__nav-description",children:e.description})]}),n&&k&&(0,T.jsx)(x,{className:"sidebar__nav-arrow"})]},e.id)})}),k&&(0,T.jsx)("div",{className:"sidebar__footer",children:(0,T.jsx)("div",{className:"sidebar__client-info",children:((e,t,n,a,i,r)=>{const o=(null===A||void 0===A||null===(e=A.principal)||void 0===e||null===(t=e.portfolioContext)||void 0===t?void 0:t.principalFirstName)||"",s=(null===A||void 0===A||null===(n=A.principal)||void 0===n||null===(a=n.portfolioContext)||void 0===a?void 0:a.principalLastName)||"",l="".concat(o," ").concat(s).trim(),c=(null===A||void 0===A||null===(i=A.principal)||void 0===i||null===(r=i.projectParameters)||void 0===r?void 0:r.projectName)||(null===F||void 0===F?void 0:F.projectName)||"";return l||c?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("span",{className:"sidebar__client-name",children:l||"Client"}),(0,T.jsx)("span",{className:"sidebar__client-project",children:c||"New Project"})]}):(0,T.jsx)("span",{className:"sidebar__client-placeholder",children:"No client loaded"})})()})})]}),(0,T.jsxs)("main",{className:"main-content",children:[(0,T.jsxs)("header",{className:"main-header",style:{background:(null===(e=vg[w])||void 0===e?void 0:e.bg)||"#1e3a5f",borderBottom:null!==(t=vg[w])&&void 0!==t&&t.accent?"2px solid ".concat(vg[w].accent):"1px solid var(--gray-200)","--header-text-color":(null===(n=vg[w])||void 0===n?void 0:n.text)||"#ffffff"},children:[(0,T.jsx)("div",{className:"main-header__breadcrumb",children:(0,T.jsx)("span",{className:"main-header__module",style:{color:(null===(i=vg[w])||void 0===i?void 0:i.text)||"#ffffff"},children:(null===(r=L.find(e=>e.id===w))||void 0===r?void 0:r.label)||"Dashboard"})}),(0,T.jsxs)("div",{className:"main-header__actions",children:[["dashboard","kyc","fyi","mvp","kym"].includes(w)&&(0,T.jsxs)("button",{className:"main-header__docs-btn",onClick:()=>P(!0),title:"View Documentation",style:{color:(null===(o=vg[w])||void 0===o?void 0:o.text)||"#ffffff",borderColor:"#1a1a1a"===(null===(s=vg[w])||void 0===s?void 0:s.text)?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)",background:"#1a1a1a"===(null===(l=vg[w])||void 0===l?void 0:l.text)?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"},children:[(0,T.jsx)(S,{size:16}),(0,T.jsx)("span",{children:"Documentation"})]}),(0,T.jsx)("button",{className:"main-header__settings-btn",title:"Settings",onClick:()=>N("settings"),style:{color:(null===(c=vg[w])||void 0===c?void 0:c.text)||"#ffffff",borderColor:"#1a1a1a"===(null===(d=vg[w])||void 0===d?void 0:d.text)?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)",background:"#1a1a1a"===(null===(j=vg[w])||void 0===j?void 0:j.text)?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"},children:(0,T.jsx)(g,{size:20})})]})]}),(0,T.jsx)("div",{className:"main-body",children:(()=>{switch(w){case"kyc":return(0,T.jsx)(Rr,{showDocs:C,onCloseDocs:()=>P(!1)});case"mvp":return(0,T.jsx)(Yh,{onNavigate:N,showDocs:C,onCloseDocs:()=>P(!1)});case"fyi":return(0,T.jsx)(rm,{showDocs:C,onCloseDocs:()=>P(!1)});case"kym":return(0,T.jsx)(gg,{showDocs:C,onCloseDocs:()=>P(!1)});case"settings":return(0,T.jsx)(yg,{});default:return(0,T.jsx)(ye,{onNavigate:N,showDocs:C,onCloseDocs:()=>P(!1)})}})()})]})]})},xg=()=>(0,T.jsx)(G,{children:(0,T.jsx)(bg,{})});i.createRoot(document.getElementById("root")).render((0,T.jsx)(a.StrictMode,{children:(0,T.jsx)(xg,{})}))},8237(e,t,n){var a=n(8907),i=n(9367);e=n.hmd(e);const r={propertyContext:{residenceType:"primary",estimatedSF:15e3,numberOfLevels:2,hasBasement:!1},householdProfile:{composition:"couple_young_children",primaryResidents:4,childrenAges:[8,12],pets:[{type:"dog",count:1,size:"large"}],elderlyResidents:!1,mobilityConsiderations:!1},entertainingProfile:{frequency:"frequently",typicalScale:"large",maxEventScale:"grand",formalDiningImportance:4,outdoorEntertainingImportance:3,barEntertainingImportance:3,wineCollection:!0,wineBottleCount:300},staffingProfile:{preference:"regular",securityRequirements:"moderate"},privacyProfile:{preference:"selective",workFromHome:"executive",clientMeetingsAtHome:!0,lateNightMediaUse:!0,guestStayFrequency:"occasionally",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!1},kitchenProfile:{cookingStyle:"enthusiast",primaryCook:"both",breakfastStyle:"casual",dailyMealsAtHome:2,showKitchenImportance:4},wellnessProfile:{interest:"dedicated",poolDesired:!0,poolType:"lap",spaFeatures:["sauna","steam"],fitnessRoutine:"regular"}},o={propertyContext:{residenceType:"primary",estimatedSF:12e3,numberOfLevels:2,hasBasement:!0},householdProfile:{composition:"couple_adult_children",primaryResidents:2,childrenAges:[],pets:[],elderlyResidents:!1,mobilityConsiderations:!1},entertainingProfile:{frequency:"frequently",typicalScale:"moderate",maxEventScale:"large",formalDiningImportance:5,outdoorEntertainingImportance:3,barEntertainingImportance:4,wineCollection:!0,wineBottleCount:500},staffingProfile:{preference:"full_service",securityRequirements:"moderate"},privacyProfile:{preference:"formal",workFromHome:"occasional",clientMeetingsAtHome:!1,lateNightMediaUse:!1,guestStayFrequency:"frequently",typicalGuestStayDuration:"extended",multiGenerationalHosting:!0},kitchenProfile:{cookingStyle:"casual",primaryCook:"staff",breakfastStyle:"casual",dailyMealsAtHome:2,showKitchenImportance:3},wellnessProfile:{interest:"basic",poolDesired:!1,fitnessRoutine:"light"}},s={propertyContext:{residenceType:"primary",estimatedSF:18e3,numberOfLevels:1,hasBasement:!1},householdProfile:{composition:"multi_generational",primaryResidents:4,childrenAges:[10],pets:[{type:"cat",count:2}],elderlyResidents:!0,mobilityConsiderations:!0},entertainingProfile:{frequency:"occasionally",typicalScale:"intimate",maxEventScale:"moderate",formalDiningImportance:3,outdoorEntertainingImportance:2,barEntertainingImportance:2},staffingProfile:{preference:"regular",securityRequirements:"enhanced"},privacyProfile:{preference:"selective",workFromHome:"primary",clientMeetingsAtHome:!1,lateNightMediaUse:!1,guestStayFrequency:"rarely",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!1},kitchenProfile:{cookingStyle:"enthusiast",primaryCook:"both",breakfastStyle:"casual",dailyMealsAtHome:3,showKitchenImportance:4},wellnessProfile:{interest:"basic",poolDesired:!1,fitnessRoutine:"light"}};n.c[n.s]===e&&function(){console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("ADJACENCY RECOMMENDER TESTS"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");let e=0,t=0;console.log("TEST 1: Decision library loaded");const n=i.FK;n.length>=10?(console.log("  \u2713 ".concat(n.length," decisions defined")),e++):(console.log("  \u2717 Expected 10+ decisions, got ".concat(n.length)),t++),console.log("\nTEST 2: Decision structure validation");let l=!0;for(const a of n){var c;a.id&&a.title&&null!==(c=a.options)&&void 0!==c&&c.length||(console.log("  \u2717 Invalid decision: ".concat(a.id)),l=!1);for(const e of a.options)e.id&&e.targetSpace&&e.relationship||(console.log("  \u2717 Invalid option in ".concat(a.id,": ").concat(e.id)),l=!1)}l?(console.log("  \u2713 All decisions have valid structure"),e++):t++,console.log("\nTEST 3: Preset filtering");const d=(0,i.w8)("10k"),u=(0,i.w8)("15k"),h=(0,i.w8)("20k");console.log("  10K preset: ".concat(d.length," decisions")),console.log("  15K preset: ".concat(u.length," decisions")),console.log("  20K preset: ".concat(h.length," decisions")),u.length>=d.length?(console.log("  \u2713 Larger presets have equal or more decisions"),e++):(console.log("  \u2717 Preset filtering incorrect"),t++),console.log("\nTEST 4: Executive Family recommendations");const p=(0,a.n5)(r,"15k");console.log("  Generated ".concat(p.length," recommendations"));const m=p.find(e=>"office-location"===e.decision.id);"off-entry"===(null===m||void 0===m?void 0:m.recommendedOption.id)?(console.log("  \u2713 Office recommended near entry (client meetings)"),e++):(console.log("  \u2717 Office recommendation: ".concat(null===m||void 0===m?void 0:m.recommendedOption.id,", expected off-entry")),t++);const f=p.find(e=>"media-acoustics"===e.decision.id);"media-isolated"===(null===f||void 0===f?void 0:f.recommendedOption.id)?(console.log("  \u2713 Media room recommended isolated (late-night use)"),e++):(console.log("  \u2717 Media recommendation: ".concat(null===f||void 0===f?void 0:f.recommendedOption.id,", expected media-isolated")),t++),console.log("\nTEST 5: Empty Nesters recommendations");const g=(0,a.n5)(o,"10k"),v=g.find(e=>"guest-independence"===e.decision.id);"guest-independent"===(null===v||void 0===v?void 0:v.recommendedOption.id)?(console.log("  \u2713 Guest suite recommended independent (extended stays)"),e++):(console.log("  \u2717 Guest recommendation: ".concat(null===v||void 0===v?void 0:v.recommendedOption.id,", expected guest-independent")),t++);const y=g.find(e=>"dining-formality"===e.decision.id);"dr-formal"===(null===y||void 0===y?void 0:y.recommendedOption.id)?(console.log("  \u2713 Dining recommended formal (high importance)"),e++):(console.log("  \u2717 Dining recommendation: ".concat(null===y||void 0===y?void 0:y.recommendedOption.id,", expected dr-formal")),t++),console.log("\nTEST 6: Multi-Gen recommendations");const b=(0,a.n5)(s,"20k").find(e=>"primary-privacy"===e.decision.id);"pri-wing"===(null===b||void 0===b?void 0:b.recommendedOption.id)?(console.log("  \u2713 Primary suite recommended as wing (single-level/mobility)"),e++):(console.log("  \u2717 Primary recommendation: ".concat(null===b||void 0===b?void 0:b.recommendedOption.id,", expected pri-wing")),t++),console.log("\nTEST 7: Evaluation with warnings");const x=i.FK.find(e=>"office-location"===e.id),S=(0,a.aW)(x,"off-family");S.warnings.length>0?(console.log("  \u2713 Office near family generates ".concat(S.warnings.length," warning(s)")),console.log("    - ".concat(S.warnings[0])),e++):(console.log("  \u2717 Expected warnings for office near family"),t++),console.log("\nTEST 8: Bridge requirement detection");const j=i.FK.find(e=>"media-acoustics"===e.id);(0,a.aW)(j,"media-isolated").bridgesRequired.includes("soundLock")?(console.log("  \u2713 Isolated media requires soundLock bridge"),e++):(console.log("  \u2717 Expected soundLock bridge requirement"),t++),console.log("\nTEST 9: SF impact calculation");const w=[{decisionId:"media-acoustics",selectedOptionId:"media-isolated",isDefault:!1,warnings:[]},{decisionId:"guest-independence",selectedOptionId:"guest-independent",isDefault:!1,warnings:[]}],N=(0,a.q5)(w);210===N.totalSfImpact?(console.log("  \u2713 Total SF impact: ".concat(N.totalSfImpact," SF")),e++):(console.log("  \u2717 SF impact: ".concat(N.totalSfImpact,", expected ").concat(210)),t++),console.log("\nTEST 10: Bridge config derivation");const k=(0,a.Rh)(w);k.soundLock&&k.guestAutonomy?(console.log("  \u2713 Bridge config includes soundLock and guestAutonomy"),e++):(console.log("  \u2717 Bridge config missing expected bridges"),t++),console.log("\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("RESULTS: ".concat(e," passed, ").concat(t," failed")),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n")}()},8853(e,t,n){e.exports=n(7234)},8907(e,t,n){n.d(t,{Qy:()=>d,Rh:()=>u,aW:()=>l,n5:()=>i,q5:()=>c});var a=n(9367);function i(e,t){const n=(0,a.w8)(t),i=[];for(const a of n){const t=r(a,e);i.push(t)}return i}function r(e,t){const n=[];for(const s of e.options){const{score:e,reasons:a}=o(s,t);n.push({option:s,score:e,reasons:a})}n.sort((e,t)=>t.score-e.score);const a=n[0],i=n.slice(1).filter(e=>e.score>0).map(e=>e.option.id);let r="medium";return a.score>=3?r="high":(a.score<=1||n[1]&&n[1].score>=a.score-1)&&(r="low"),{decision:e,recommendedOption:a.option,confidence:r,reasoning:a.reasons.join(". ")||"Default recommendation based on baseline preset.",alternativeOptionIds:i}}function o(e,t){let n=e.isDefault?1:0;const a=[];for(const i of e.triggerConditions){const{matches:e,reason:r}=s(i,t);e&&(n+=2,r&&a.push(r))}return e.warnings.length>0&&n<3&&(n-=1),{score:n,reasons:a}}function s(e,t){try{var n,a,i,r,o,s,l,c,d,u,h,p,m,f,g,v,y,b,x,S,j,w,N,k,_,C,P,F,A,L,M,R,I,T,z,D,E,O,B,q,H,G,W,U,K,V,Y,Z,$,Q,J;if('workFromHome === "executive"'===e)if("executive"===(null===(n=t.privacyProfile)||void 0===n?void 0:n.workFromHome))return{matches:!0,reason:"You have an executive home office"};if('workFromHome === "primary"'===e)if("primary"===(null===(a=t.privacyProfile)||void 0===a?void 0:a.workFromHome))return{matches:!0,reason:"You work from home primarily"};if('workFromHome === "occasional"'===e)if("occasional"===(null===(i=t.privacyProfile)||void 0===i?void 0:i.workFromHome))return{matches:!0,reason:"You work from home occasionally"};if("clientMeetingsAtHome === true"===e)if(null!==(r=t.privacyProfile)&&void 0!==r&&r.clientMeetingsAtHome)return{matches:!0,reason:"You host client meetings at home"};if("clientMeetingsAtHome === false"===e)if(null===(o=t.privacyProfile)||void 0===o||!o.clientMeetingsAtHome)return{matches:!0,reason:"No client meetings at home"};if("childrenCount > 0"===e)if(((null===(s=t.householdProfile)||void 0===s||null===(l=s.childrenAges)||void 0===l?void 0:l.length)||0)>0)return{matches:!0,reason:"You have children"};if("childrenCount >= 2"===e)if(((null===(c=t.householdProfile)||void 0===c||null===(d=c.childrenAges)||void 0===d?void 0:d.length)||0)>=2)return{matches:!0,reason:"You have multiple children"};if('privacyPreference === "sanctuary"'===e)if("sanctuary"===(null===(u=t.privacyProfile)||void 0===u?void 0:u.preference))return{matches:!0,reason:"You prefer maximum privacy"};if('privacyPreference === "selective"'===e)if("selective"===(null===(h=t.privacyProfile)||void 0===h?void 0:h.preference))return{matches:!0,reason:"You prefer selective privacy"};if('privacyPreference === "formal"'===e)if("formal"===(null===(p=t.privacyProfile)||void 0===p?void 0:p.preference))return{matches:!0,reason:"You prefer formal separation"};if('cookingStyle === "enthusiast"'===e)if("enthusiast"===(null===(m=t.kitchenProfile)||void 0===m?void 0:m.cookingStyle))return{matches:!0,reason:"You're an enthusiast cook"};if('cookingStyle === "casual"'===e)if("casual"===(null===(f=t.kitchenProfile)||void 0===f?void 0:f.cookingStyle))return{matches:!0,reason:"You have a casual cooking style"};if('cookingStyle === "professional"'===e)if("professional"===(null===(g=t.kitchenProfile)||void 0===g?void 0:g.cookingStyle))return{matches:!0,reason:"You cook at a professional level"};if('cookingStyle === "serious"'===e)if("serious"===(null===(v=t.kitchenProfile)||void 0===v?void 0:v.cookingStyle))return{matches:!0,reason:"You're a serious home cook"};if('primaryCook === "family"'===e){var X;const e=null===(X=t.kitchenProfile)||void 0===X?void 0:X.primaryCook;if("self"===e||"spouse"===e||"both"===e)return{matches:!0,reason:"Family members do the cooking"}}if('primaryCook === "staff"'===e)if("staff"===(null===(y=t.kitchenProfile)||void 0===y?void 0:y.primaryCook))return{matches:!0,reason:"Staff handles cooking"};if('staffingPreference === "full_service"'===e)if("full_service"===(null===(b=t.staffingProfile)||void 0===b?void 0:b.preference))return{matches:!0,reason:"You have full-service staffing"};if('staffingPreference === "estate"'===e)if("estate"===(null===(x=t.staffingProfile)||void 0===x?void 0:x.preference))return{matches:!0,reason:"You have estate-level staffing"};if('staffingPreference === "self_sufficient"'===e)if("self_sufficient"===(null===(S=t.staffingProfile)||void 0===S?void 0:S.preference))return{matches:!0,reason:"You prefer self-sufficient living"};if("lateNightMediaUse === true"===e)if(null!==(j=t.privacyProfile)&&void 0!==j&&j.lateNightMediaUse)return{matches:!0,reason:"You use media late at night"};if("lateNightMediaUse === false"===e)if(null===(w=t.privacyProfile)||void 0===w||!w.lateNightMediaUse)return{matches:!0,reason:"No late-night media use"};if('guestStayFrequency === "frequently"'===e)if("frequently"===(null===(N=t.privacyProfile)||void 0===N?void 0:N.guestStayFrequency))return{matches:!0,reason:"You host guests frequently"};if('guestStayFrequency === "occasionally"'===e)if("occasionally"===(null===(k=t.privacyProfile)||void 0===k?void 0:k.guestStayFrequency))return{matches:!0,reason:"You host guests occasionally"};if('guestStayFrequency === "rarely"'===e)if("rarely"===(null===(_=t.privacyProfile)||void 0===_?void 0:_.guestStayFrequency))return{matches:!0,reason:"You rarely host overnight guests"};if('typicalGuestStayDuration === "extended"'===e)if("extended"===(null===(C=t.privacyProfile)||void 0===C?void 0:C.typicalGuestStayDuration))return{matches:!0,reason:"Guests stay for extended periods"};if('typicalGuestStayDuration === "week"'===e)if("week"===(null===(P=t.privacyProfile)||void 0===P?void 0:P.typicalGuestStayDuration))return{matches:!0,reason:"Guests typically stay a week"};if("multiGenerationalHosting === true"===e)if(null!==(F=t.privacyProfile)&&void 0!==F&&F.multiGenerationalHosting)return{matches:!0,reason:"You host multi-generational gatherings"};if("multiGenerationalHosting === false"===e)if(null===(A=t.privacyProfile)||void 0===A||!A.multiGenerationalHosting)return{matches:!0,reason:"Single-generation household"};if("elderlyResidents === true"===e)if(null!==(L=t.householdProfile)&&void 0!==L&&L.elderlyResidents)return{matches:!0,reason:"You have elderly residents"};if("mobilityConsiderations === true"===e)if(null!==(M=t.householdProfile)&&void 0!==M&&M.mobilityConsiderations)return{matches:!0,reason:"Mobility considerations apply"};if("formalDiningImportance >= 4"===e)if(((null===(R=t.entertainingProfile)||void 0===R?void 0:R.formalDiningImportance)||0)>=4)return{matches:!0,reason:"Formal dining is important to you"};if("formalDiningImportance <= 3"===e)if(((null===(I=t.entertainingProfile)||void 0===I?void 0:I.formalDiningImportance)||3)<=3)return{matches:!0,reason:"Casual dining preference"};if('entertainingFrequency === "frequently"'===e)if("frequently"===(null===(T=t.entertainingProfile)||void 0===T?void 0:T.frequency))return{matches:!0,reason:"You entertain frequently"};if('entertainingFrequency === "occasionally"'===e)if("occasionally"===(null===(z=t.entertainingProfile)||void 0===z?void 0:z.frequency))return{matches:!0,reason:"You entertain occasionally"};if('typicalScale === "grand"'===e)if("grand"===(null===(D=t.entertainingProfile)||void 0===D?void 0:D.typicalScale))return{matches:!0,reason:"You host grand-scale events"};if('fitnessRoutine === "intensive"'===e)if("intensive"===(null===(E=t.wellnessProfile)||void 0===E?void 0:E.fitnessRoutine))return{matches:!0,reason:"You have an intensive fitness routine"};if('fitnessRoutine === "regular"'===e)if("regular"===(null===(O=t.wellnessProfile)||void 0===O?void 0:O.fitnessRoutine))return{matches:!0,reason:"You exercise regularly"};if('wellnessInterest === "resort"'===e)if("resort"===(null===(B=t.wellnessProfile)||void 0===B?void 0:B.interest))return{matches:!0,reason:"You want resort-level wellness"};if('wellnessInterest === "dedicated"'===e)if("dedicated"===(null===(q=t.wellnessProfile)||void 0===q?void 0:q.interest))return{matches:!0,reason:"You want dedicated wellness facilities"};if('wellnessInterest === "casual"'===e)if("basic"===(null===(H=t.wellnessProfile)||void 0===H?void 0:H.interest))return{matches:!0,reason:"You have basic wellness interest"};if("poolDesired === true"===e)if(null!==(G=t.wellnessProfile)&&void 0!==G&&G.poolDesired)return{matches:!0,reason:"You want a pool"};if("wineBottleCount >= 200"===e)if(((null===(W=t.entertainingProfile)||void 0===W?void 0:W.wineBottleCount)||0)>=200)return{matches:!0,reason:"You have a significant wine collection"};if("pets.length > 0"===e)if(((null===(U=t.householdProfile)||void 0===U||null===(K=U.pets)||void 0===K?void 0:K.length)||0)>0)return{matches:!0,reason:"You have pets"};if("numberOfLevels >= 2"===e)if(((null===(V=t.propertyContext)||void 0===V?void 0:V.numberOfLevels)||2)>=2)return{matches:!0,reason:"Multi-level home"};if("numberOfLevels === 1"===e)if(1===(null===(Y=t.propertyContext)||void 0===Y?void 0:Y.numberOfLevels))return{matches:!0,reason:"Single-level home"};if("hasBasement === true"===e)if(null!==(Z=t.propertyContext)&&void 0!==Z&&Z.hasBasement)return{matches:!0,reason:"Home has basement"};if('composition === "family_with_children"'===e){var ee;const e=null===(ee=t.householdProfile)||void 0===ee?void 0:ee.composition;if("couple_young_children"===e||"couple_teenagers"===e||"blended_family"===e)return{matches:!0,reason:"Family with children"}}if('composition === "multi_generational"'===e)if("multi_generational"===(null===($=t.householdProfile)||void 0===$?void 0:$.composition))return{matches:!0,reason:"Multi-generational household"};if('composition === "blended_family"'===e)if("blended_family"===(null===(Q=t.householdProfile)||void 0===Q?void 0:Q.composition))return{matches:!0,reason:"Blended family"};if('packageDeliveryVolume === "heavy"'===e)if("enhanced"===(null===(J=t.staffingProfile)||void 0===J?void 0:J.securityRequirements))return{matches:!0,reason:"Heavy package delivery volume"}}catch(te){console.error("Error evaluating condition:",e,te)}return{matches:!1,reason:""}}function l(e,t){const n=(0,a.O$)(e,t);if(!n)return{isValid:!1,warnings:["Invalid option selected"],redFlags:[],sfImpact:0,bridgesRequired:[]};const i=[...n.warnings],r=[],o=[];return n.warnings.some(e=>e.toLowerCase().includes("acoustic conflict"))&&r.push("Potential acoustic issues"),n.warnings.some(e=>e.toLowerCase().includes("circulation conflict"))&&r.push("Circulation path concerns"),n.bridgeRequired&&o.push(n.bridgeRequired),{isValid:!0,warnings:i,redFlags:r,sfImpact:n.sfImpact||0,bridgesRequired:o}}function c(e){let t=0;const n=[];let i=0,r=0;for(const o of e){const e=a.FK.find(e=>e.id===o.decisionId);if(!e)continue;const s=l(e,o.selectedOptionId);t+=s.sfImpact,n.push(...s.bridgesRequired),i+=s.warnings.length,r+=s.redFlags.length,o.warnings=s.warnings}return{choices:e,totalSfImpact:t,requiredBridges:[...new Set(n)],warningCount:i,redFlagCount:r}}function d(e,t){const n=[...e];for(const i of t){const e=a.FK.find(e=>e.id===i.decisionId);if(!e)continue;const t=(0,a.O$)(e,i.selectedOptionId);if(!t)continue;const r=n.findIndex(n=>n.fromSpaceCode===e.primarySpace&&n.toSpaceCode===t.targetSpace),o={fromSpaceCode:e.primarySpace,toSpaceCode:t.targetSpace,relationship:t.relationship};r>=0?n[r]=o:n.push(o);const s=n.findIndex(n=>n.fromSpaceCode===t.targetSpace&&n.toSpaceCode===e.primarySpace),l={fromSpaceCode:t.targetSpace,toSpaceCode:e.primarySpace,relationship:t.relationship};s>=0?n[s]=l:n.push(l)}return n}function u(e){const t={};for(const n of e){const e=a.FK.find(e=>e.id===n.decisionId);if(!e)continue;const i=(0,a.O$)(e,n.selectedOptionId);if(null!==i&&void 0!==i&&i.bridgeRequired)switch(i.bridgeRequired){case"butlerPantry":t.butlerPantry=!0;break;case"soundLock":t.soundLock=!0;break;case"guestAutonomy":t.guestAutonomy=!0;break;case"wetFeetIntercept":t.wetFeetIntercept=!0;break;case"opsCore":t.opsCore=!0}}return t}},9367(e,t,n){n.d(t,{FK:()=>a,O$:()=>r,w8:()=>i});const a=[{id:"office-location",title:"Home Office Location",question:"Where should your home office connect?",context:"Office placement affects both your productivity and your household's daily flow. Consider who visits and when you work.",primarySpace:"OFF",icon:"Briefcase",applicablePresets:["5k","10k","15k","20k"],kycFields:["workFromHome","clientMeetingsAtHome","childrenCount"],priority:1,options:[{id:"off-entry",label:"Near Entry (Front of House)",description:"Professional separation. Clients enter without seeing private areas. Best for executive home offices.",targetSpace:"FOY",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["clientMeetingsAtHome === true",'workFromHome === "executive"','workFromHome === "primary"']},{id:"off-family",label:"Near Family Room",description:"Stay connected to household activities. Supervise children while working. Casual work style.",targetSpace:"FR",relationship:"N",isDefault:!1,warnings:["Acoustic conflict: Family room noise may disrupt video calls","Privacy concern: Work visible to household members"],triggerConditions:["childrenCount > 0",'workFromHome === "occasional"']},{id:"off-primary",label:"Near Primary Suite",description:"Maximum privacy and quiet. Early morning or late night work without disturbing household.",targetSpace:"PRIHALL",relationship:"N",isDefault:!1,warnings:["Circulation conflict: Clients would need to enter private zone","Separation concern: May feel isolated from family"],triggerConditions:["clientMeetingsAtHome === false",'privacyPreference === "sanctuary"']}]},{id:"kitchen-family",title:"Kitchen & Family Room Connection",question:"How should your kitchen relate to family living spaces?",context:"This defines the heart of your home. Open plans maximize togetherness; separation allows focused cooking and reduces noise.",primarySpace:"KIT",icon:"ChefHat",applicablePresets:["5k","10k","15k","20k"],kycFields:["cookingStyle","primaryCook","staffingPreference","entertainingFrequency"],priority:2,options:[{id:"kit-open",label:"Open to Family Room",description:"Modern open plan. Cook while engaging with family. Clear sightlines throughout.",targetSpace:"FR",relationship:"A",isDefault:!0,warnings:[],triggerConditions:['cookingStyle === "enthusiast"','cookingStyle === "casual"','primaryCook === "family"']},{id:"kit-semi",label:"Connected but Defined",description:"Visual connection with partial separation. Island or half-wall defines spaces while maintaining openness.",targetSpace:"FR",relationship:"N",isDefault:!1,warnings:[],triggerConditions:['privacyPreference === "selective"','entertainingFrequency === "frequently"']},{id:"kit-separate",label:"Separate Kitchen",description:"Traditional separation. Staff can work unseen. Formal entertaining without kitchen visibility.",targetSpace:"FR",relationship:"B",isDefault:!1,warnings:["Lifestyle impact: May feel disconnected from family activities","Supervision concern: Cannot see children from kitchen"],bridgeRequired:"butlerPantry",triggerConditions:['staffingPreference === "full_service"','staffingPreference === "estate"','primaryCook === "staff"']}]},{id:"media-acoustics",title:"Media Room Placement",question:"How should your media room relate to sleeping areas?",context:"Late-night movie watching requires acoustic separation from bedrooms. Consider who uses the media room and when.",primarySpace:"MEDIA",icon:"Tv",applicablePresets:["5k","10k","15k","20k"],kycFields:["lateNightMediaUse","childrenCount","entertainingFrequency"],priority:3,options:[{id:"media-family-zone",label:"Part of Family Zone",description:"Easy access from family room. Shared use by all household members. No late-night use expected.",targetSpace:"FR",relationship:"N",isDefault:!0,warnings:[],triggerConditions:["lateNightMediaUse === false","childrenCount > 0"]},{id:"media-isolated",label:"Acoustically Isolated",description:"Sound lock vestibule between media and sleeping areas. Full theater experience without disturbing others.",targetSpace:"PRI",relationship:"S",isDefault:!1,warnings:[],sfImpact:60,bridgeRequired:"soundLock",triggerConditions:["lateNightMediaUse === true"]},{id:"media-basement",label:"Basement Location",description:"Natural sound isolation. Dedicated entertainment level. Premium theater experience.",targetSpace:"STAIR",relationship:"N",isDefault:!1,warnings:["Accessibility: Requires stairs for every use","Integration: Separated from main living flow"],triggerConditions:["hasBasement === true"]}]},{id:"guest-independence",title:"Guest Suite Relationship",question:"How independent should your guest suite be?",context:"Extended family visits benefit from independence. Occasional guests may prefer connection to family life.",primarySpace:"GSL1",icon:"Users",applicablePresets:["5k","10k","15k","20k"],kycFields:["guestStayFrequency","typicalGuestStayDuration","multiGenerationalHosting","elderlyResidents"],priority:4,options:[{id:"guest-independent",label:"Fully Independent",description:"Separate entry option. Own kitchenette. Complete autonomy for extended stays.",targetSpace:"FOY",relationship:"S",isDefault:!1,warnings:[],sfImpact:150,bridgeRequired:"guestAutonomy",triggerConditions:['guestStayFrequency === "frequently"','typicalGuestStayDuration === "extended"','typicalGuestStayDuration === "week"',"multiGenerationalHosting === true"]},{id:"guest-connected",label:"Connected to Family Areas",description:"Part of main house flow. Shared amenities. Guests feel included in family life.",targetSpace:"FR",relationship:"N",isDefault:!0,warnings:[],triggerConditions:['guestStayFrequency === "occasionally"','guestStayFrequency === "rarely"']},{id:"guest-near-primary",label:"Near Primary Suite",description:"Close proximity for elderly parents or young guests needing attention.",targetSpace:"PRIHALL",relationship:"N",isDefault:!1,warnings:["Privacy impact: Guest activity within private zone","Noise concern: Less separation from your sleeping area"],triggerConditions:["elderlyResidents === true"]}]},{id:"primary-privacy",title:"Primary Suite Privacy",question:"How separated should your primary suite be from household activity?",context:"Your private retreat. Balance accessibility with sanctuary.",primarySpace:"PRI",icon:"BedDouble",applicablePresets:["5k","10k","15k","20k"],kycFields:["privacyPreference","childrenCount","numberOfLevels"],priority:5,options:[{id:"pri-separate-level",label:"Separate Level",description:"Primary suite on its own floor. Maximum privacy and acoustic separation.",targetSpace:"STAIR",relationship:"N",isDefault:!0,warnings:[],triggerConditions:["numberOfLevels >= 2",'privacyPreference === "sanctuary"','privacyPreference === "formal"']},{id:"pri-wing",label:"Dedicated Wing",description:"Same level but separate wing. Good privacy with single-floor living option.",targetSpace:"FR",relationship:"B",isDefault:!1,warnings:[],triggerConditions:["numberOfLevels === 1","mobilityConsiderations === true"]},{id:"pri-connected",label:"Connected to Family",description:"Close to children's rooms. Easy nighttime access for young families.",targetSpace:"FR",relationship:"N",isDefault:!1,warnings:["Privacy reduced: More household traffic near suite","Acoustic impact: Less buffer from family activities"],triggerConditions:["childrenCount > 0","childrenAges includes young children"]}]},{id:"dining-formality",title:"Dining Room Relationship",question:"How formal should your dining experience be?",context:"Formal entertaining benefits from separation. Casual families prefer open connection.",primarySpace:"DR",icon:"Wine",applicablePresets:["5k","10k","15k","20k"],kycFields:["formalDiningImportance","entertainingFrequency","typicalScale","staffingPreference"],priority:6,options:[{id:"dr-formal",label:"Formal Separation",description:"Dedicated dining room near entry. Impressive arrival sequence for guests. Butler pantry service.",targetSpace:"FOY",relationship:"N",isDefault:!1,warnings:[],bridgeRequired:"butlerPantry",triggerConditions:["formalDiningImportance >= 4",'entertainingFrequency === "frequently"','typicalScale === "grand"']},{id:"dr-great-room",label:"Part of Great Room",description:"Open to living areas. Flexible space for various occasions. Modern casual elegance.",targetSpace:"GR",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["formalDiningImportance <= 3",'entertainingFrequency === "occasionally"']},{id:"dr-kitchen",label:"Kitchen Adjacent",description:"Direct kitchen connection. Easy serving. Chef's table experience.",targetSpace:"KIT",relationship:"A",isDefault:!1,warnings:["Formality reduced: Kitchen activities visible during meals","Noise: Cooking sounds during dinner"],triggerConditions:['cookingStyle === "professional"','cookingStyle === "serious"']}]},{id:"wellness-placement",title:"Wellness Zone Placement",question:"Where should your gym and spa facilities connect?",context:"Morning workout routines benefit from primary suite proximity. Pool entertainment benefits from family room connection.",primarySpace:"GYM",icon:"Dumbbell",applicablePresets:["15k","20k"],kycFields:["fitnessRoutine","wellnessInterest","poolDesired","spaFeatures"],priority:7,options:[{id:"wellness-primary",label:"Near Primary Suite",description:"Morning workout without traversing house. Direct access from suite.",targetSpace:"PRIHALL",relationship:"N",isDefault:!1,warnings:["Separation: Wellness traffic in private zone"],triggerConditions:['fitnessRoutine === "intensive"','fitnessRoutine === "regular"']},{id:"wellness-pool",label:"Pool-Integrated Zone",description:"Gym, spa, and pool as unified wellness destination. Resort-style experience.",targetSpace:"POOL",relationship:"A",isDefault:!0,warnings:[],bridgeRequired:"wetFeetIntercept",triggerConditions:["poolDesired === true",'wellnessInterest === "resort"','wellnessInterest === "dedicated"']},{id:"wellness-family",label:"Family Zone Adjacent",description:"Easy access for all family members. Supervision of children during workouts.",targetSpace:"FR",relationship:"N",isDefault:!1,warnings:[],triggerConditions:["childrenCount > 0",'wellnessInterest === "casual"']}]},{id:"mudroom-flow",title:"Mudroom & Service Entry",question:"How should your service entry connect to the house?",context:"The mudroom handles daily chaos: groceries, packages, pets, kids. Good flow prevents bottlenecks.",primarySpace:"MUD",icon:"Home",applicablePresets:["5k","10k","15k","20k"],kycFields:["pets","childrenCount","staffingPreference","packageDeliveryVolume"],priority:8,options:[{id:"mud-kitchen",label:"Direct to Kitchen",description:"Groceries straight to kitchen. Efficient daily flow. May track through food prep area.",targetSpace:"KIT",relationship:"A",isDefault:!1,warnings:["Cleanliness: Outdoor elements enter near food prep"],triggerConditions:['staffingPreference === "self_sufficient"']},{id:"mud-scullery",label:"Through Scullery",description:"Buffer zone between garage and kitchen. Drop packages, clean up, then enter kitchen clean.",targetSpace:"SCUL",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["pets.length > 0","childrenCount > 0"]},{id:"mud-ops",label:"Operations Core Hub",description:"Dedicated service zone for staff. Package staging. Deliveries processed before entering house.",targetSpace:"OPSCORE",relationship:"A",isDefault:!1,warnings:[],sfImpact:150,bridgeRequired:"opsCore",triggerConditions:['staffingPreference === "full_service"','staffingPreference === "estate"','packageDeliveryVolume === "heavy"']}]},{id:"wine-access",title:"Wine Storage Access",question:"How should your wine storage be accessed?",context:"Wine service style: formal butler presentation, casual kitchen grab, or dedicated tasting experience.",primarySpace:"WINE",icon:"Wine",applicablePresets:["10k","15k","20k"],kycFields:["wineCollection","wineBottleCount","formalDiningImportance","entertainingFrequency"],priority:9,options:[{id:"wine-dining",label:"Near Dining Room",description:"Formal wine service. Display cellar visible from dining. Impressive presentation.",targetSpace:"DR",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["formalDiningImportance >= 4","wineBottleCount >= 200"]},{id:"wine-kitchen",label:"Kitchen Adjacent",description:"Casual access while cooking. Wine as cooking ingredient. Everyday convenience.",targetSpace:"KIT",relationship:"N",isDefault:!1,warnings:["Temperature: Kitchen heat may affect wine storage"],triggerConditions:['cookingStyle === "serious"','cookingStyle === "professional"']},{id:"wine-scullery",label:"Service Access",description:"Staff retrieves wine unseen. Back-of-house staging. Professional service model.",targetSpace:"SCUL",relationship:"A",isDefault:!1,warnings:[],triggerConditions:['staffingPreference === "full_service"','staffingPreference === "estate"']}]},{id:"secondary-clustering",title:"Secondary Bedroom Arrangement",question:"How should secondary bedrooms be organized?",context:"Children benefit from clustering. Adult children or guests may prefer separation for privacy.",primarySpace:"SEC1",icon:"BedDouble",applicablePresets:["5k","10k","15k","20k"],kycFields:["childrenCount","childrenAges","composition","guestStayFrequency"],priority:10,options:[{id:"sec-clustered",label:"Clustered Together",description:"All secondary bedrooms in one wing. Shared bathroom options. Easy supervision.",targetSpace:"SEC2",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["childrenCount >= 2",'composition === "family_with_children"']},{id:"sec-distributed",label:"Distributed for Privacy",description:"Bedrooms separated. Each feels like private suite. Adult children or frequent guests.",targetSpace:"SEC2",relationship:"B",isDefault:!1,warnings:["Supervision: Harder to monitor young children","Circulation: More hallway required"],triggerConditions:['composition === "multi_generational"','composition === "blended_family"']},{id:"sec-split-level",label:"Split by Level",description:"Some secondary rooms on different floor. Separation by generation or use.",targetSpace:"STAIR",relationship:"N",isDefault:!1,warnings:[],triggerConditions:["numberOfLevels >= 2",'guestStayFrequency === "frequently"']}]}];function i(e){return a.filter(t=>t.applicablePresets.includes(e)).sort((e,t)=>e.priority-t.priority)}function r(e,t){return e.options.find(e=>e.id===t)}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.c=t,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,i){if(1&i&&(a=this(a)),8&i)return a;if("object"===typeof a&&a){if(4&i&&a.__esModule)return a;if(16&i&&"function"===typeof a.then)return a}var r=Object.create(null);n.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&a;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>a[e]);return o.default=()=>a,n.d(r,o),r}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,a)=>(n.f[a](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{213:"1a19098d",239:"83ce54bd",455:"3621a55d",596:"e2b52e5d"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="n4s-workflow-v2:";n.l=(a,i,r,o)=>{if(e[a])e[a].push(i);else{var s,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+r){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+r),s.src=a),e[a]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,a)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise((n,a)=>i=e[t]=[n,a]);a.push(i[2]=r);var o=n.p+n.u(t),s=new Error;n.l(o,a=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}},"chunk-"+t,t)}};var t=(t,a)=>{var i,r,[o,s,l]=a,c=0;if(o.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(a);c<o.length;c++)r=o[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},a=self.webpackChunkn4s_workflow_v2=self.webpackChunkn4s_workflow_v2||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();n(n.s=8143)})();
//# sourceMappingURL=main.05da5d42.js.map
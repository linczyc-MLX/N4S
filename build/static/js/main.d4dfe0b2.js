/*! For license information please see main.d4dfe0b2.js.LICENSE.txt */
(()=>{"use strict";var e={579(e,t,n){e.exports=n(1153)},818(e,t,n){var a=n(5043),i=n(4391),r=n(4980);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=["color","size","strokeWidth","absoluteStrokeWidth","children"];var d=(e,t)=>{const n=(0,a.forwardRef)((n,i)=>{let{color:r="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:u,children:h}=n,p=function(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,c);return(0,a.createElement)("svg",s(s({ref:i},l),{},{width:o,height:o,stroke:r,strokeWidth:u?24*Number(d)/Number(o):d,className:"lucide lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...(Array.isArray(h)?h:[h])||[]]);var f});return n.displayName="".concat(e),n};const u=d("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),h=d("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),p=d("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),f=d("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),m=d("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g=d("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),v=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),y=d("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),b=d("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),x=d("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),S=d("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),_=d("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),w=d("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),N=d("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),k=d("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),C=d("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),j=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),P=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),A=d("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),L=d("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),F=d("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);const I=new class{constructor(){this.baseUrl="https://website.not-4.sale/api"}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(this.baseUrl).concat(e),a=s(s({},{headers:{"Content-Type":"application/json"}}),t);try{const e=await fetch(n,a);if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.error||"HTTP error ".concat(e.status))}return await e.json()}catch(i){throw console.error("API Error [".concat(e,"]:"),i),i}}async getProjects(){return this.request("/projects.php")}async getProject(e){return this.request("/projects.php?id=".concat(encodeURIComponent(e)))}async createProject(e){return this.request("/projects.php",{method:"POST",body:JSON.stringify(e)})}async updateProject(e,t){return this.request("/projects.php?id=".concat(encodeURIComponent(e),"&action=update"),{method:"POST",body:JSON.stringify(t)})}async deleteProject(e){return this.request("/projects.php?id=".concat(encodeURIComponent(e),"&action=delete"),{method:"POST",body:JSON.stringify({})})}async getState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?"/state.php?key=".concat(encodeURIComponent(e)):"/state.php";return this.request(t)}async setState(e,t){return this.request("/state.php",{method:"POST",body:JSON.stringify({key:e,value:t})})}async deleteState(e){return this.request("/state.php?key=".concat(encodeURIComponent(e),"&action=delete"),{method:"POST",body:JSON.stringify({})})}async setupDatabase(){return this.request("/setup.php")}async healthCheck(){try{return await this.getState("_health"),{status:"ok",database:"connected"}}catch(e){return{status:"error",message:e.message}}}},R=I;var E=n(579);const M={portfolioContext:{principalFirstName:"",principalLastName:"",principalEmail:"",principalPhone:"",secondaryFirstName:"",secondaryLastName:"",secondaryEmail:"",familyOfficeContact:"",familyOfficeAuthorityLevel:null,authorityLevelConfirmed:!1,domainDelegationNotes:"",currentPropertyCount:null,primaryResidences:[],thisPropertyRole:"",investmentHorizon:"",exitStrategy:"",lifeStage:"",decisionTimeline:""},familyHousehold:{familyMembers:[],pets:"",petGroomingRoom:!1,petDogRun:!1,staffingLevel:"",liveInStaff:null,staffAccommodationRequired:!1,multigenerationalNeeds:!1,anticipatedFamilyChanges:""},projectParameters:{projectCity:"",projectCountry:"",specificAddress:"",propertyType:"",targetGSF:null,bedroomCount:null,bathroomCount:null,floors:null,hasBasement:!1,sfCapConstraint:null,timeline:"",complexityFactors:[],architecturalIntegration:"",localKnowledgeCritical:"",levelsAboveArrival:1,levelsBelowArrival:0,hasGuestHouse:!1,hasPoolHouse:!1},budgetFramework:{totalProjectBudget:null,interiorBudget:null,perSFExpectation:null,budgetFlexibility:"",architectFeeStructure:"",interiorDesignerFeeStructure:"",interiorQualityTier:"",artBudgetSeparate:!1,artBudgetAmount:null},designIdentity:{axisContemporaryTraditional:5,axisMinimalLayered:5,axisWarmCool:5,axisOrganicGeometric:5,axisRefinedEclectic:5,axisArchMinimalOrnate:5,axisArchRegionalInternational:5,inspirationImages:[],aspirationKeywords:[],antiInspiration:"",benchmarkProperties:[],architectureStyleTags:[],interiorStyleTags:[],materialAffinities:[],materialAversions:[],colorPreferences:"",exteriorMaterialPreferences:[],massingPreference:"",roofFormPreference:"",structuralAmbition:"",clientType:"",clientBaseName:"",principalName:"",secondaryName:"",principalTasteResults:null,secondaryTasteResults:null},lifestyleLiving:{dailyRoutinesSummary:"",workFromHome:"",wfhPeopleCount:null,hobbies:[],hobbyDetails:"",entertainingFrequency:"",typicalGuestCount:"",entertainingStyle:"",wellnessPriorities:[],lateNightMediaUse:!1,privacyLevelRequired:3,noiseSensitivity:3,indoorOutdoorLiving:3},spaceRequirements:{mustHaveSpaces:[],niceToHaveSpaces:[],currentSpacePainPoints:"",viewPriorityRooms:[],adjacencyRequirements:"",storageNeeds:"",accessibilityRequirements:"",technologyRequirements:[],sustainabilityPriorities:[],wantsSeparateFamilyRoom:!1,wantsSecondFormalLiving:!1,wantsBar:!1,wantsBunkRoom:!1,wantsBreakfastNook:!1},culturalContext:{culturalBackground:"",regionalSensibilities:[],religiousObservances:"",entertainingCulturalNorms:"",crossCulturalRequirements:"",languagesPreferred:[]},workingPreferences:{communicationStyle:"",decisionCadence:"",collaborationStyle:"",principalInvolvementRequired:"",presentationFormat:"",previousDesignerExperience:"",redFlagsToAvoid:"",existingIndustryConnections:"",architectCelebrityPreference:3,interiorDesignerCelebrityPreference:3,caRequirement:"",contractorRelationshipPreference:"",earlyContractorInvolvement:!1},advisorAssessed:{visionFlexibilityIndex:null,profileCompleteness:0,dataConfidenceScore:null,divergenceLog:[],sessionNotes:""}},T={brief:null,completedAt:null,settings:{targetSF:15e3,deltaPct:10,circulationPct:.14,lockToTarget:!0,programTier:"15k",hasBasement:!1},selections:{}},D=()=>({id:null,clientData:{projectName:"",projectCode:"",createdAt:null,lastUpdated:null},kycData:{principal:JSON.parse(JSON.stringify(M)),secondary:JSON.parse(JSON.stringify(M)),advisor:JSON.parse(JSON.stringify(M))},fyiData:JSON.parse(JSON.stringify(T)),activeRespondent:"principal"}),O=(0,a.createContext)(null),B=["designIdentity","lifestyleLiving","spaceRequirements"],z={portfolioContext:["principalFirstName","principalLastName","thisPropertyRole"],familyHousehold:[],projectParameters:["projectCity","projectCountry","propertyType","targetGSF","bedroomCount"],budgetFramework:["totalProjectBudget"],designIdentity:[],lifestyleLiving:[],spaceRequirements:[],culturalContext:[],workingPreferences:[]},q=e=>{let{children:t}=e;const[n,i]=(0,a.useState)(!0),[r,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[f,m]=(0,a.useState)([]),[g,v]=(0,a.useState)(null),[y,b]=(0,a.useState)(D),[x,S]=(0,a.useState)("principal"),[_,w]=(0,a.useState)(0),[N,k]=(0,a.useState)("mvp"),C=y.clientData,j=y.kycData,P=y.fyiData;(0,a.useEffect)(()=>{let e=!0;return(async()=>{i(!0),console.log("[APP] Loading data from server...");try{const a=await R.getProjects();if(!e)return;const i=(Array.isArray(a)?a:[]).map(e=>({id:e.id,name:e.project_name||e.name||"Untitled",code:e.project_code||e.code,createdAt:e.created_at||e.createdAt,lastUpdated:e.updated_at||e.lastUpdated}));m(i),console.log("[APP] Loaded projects:",(null===i||void 0===i?void 0:i.length)||0);let r={};try{r=await R.getState()||{}}catch(n){console.warn("[APP] Could not load state:",n)}if(!e)return;r.disclosureTier&&k(r.disclosureTier);const o=r.activeProjectId;if(o&&"null"!==o&&"undefined"!==o)try{const n=await R.getProject(o);if(!e)return;var t;if(n)console.log("[APP] Loaded project:",o),console.log("[APP] FYI selections:",null===(t=n.fyiData)||void 0===t?void 0:t.selections),v(o),b(n),S(n.activeRespondent||"principal")}catch(n){console.error("[APP] Failed to load project:",n)}}catch(a){console.error("[APP] Failed to load from server:",a)}finally{e&&(i(!1),console.log("[APP] Initial load complete"))}})(),()=>{e=!1}},[]);const A=(0,a.useCallback)(async()=>{var e;if(!g)return console.warn("[APP] No project to save"),!1;o(!0),u(null);const t=s(s({},y),{},{id:g,activeRespondent:x});console.log("[APP] Saving to server..."),console.log("[APP] FYI selections being saved:",null===(e=t.fyiData)||void 0===e?void 0:e.selections);try{return await R.updateProject(g,t),c(new Date),p(!1),console.log("[APP] Save successful!"),!0}catch(n){return console.error("[APP] Save failed:",n),u(n.message||"Save failed"),!1}finally{o(!1)}},[g,y,x]),L=(0,a.useCallback)(async e=>{if(e!==g){if(i(!0),p(!1),!e)return v(null),b(D()),void i(!1);try{const t=await R.getProject(e);t&&(console.log("[APP] Switched to project:",e),v(e),b(t),S(t.activeRespondent||"principal"),await R.setState("activeProjectId",e))}catch(t){console.error("[APP] Failed to load project:",t)}finally{i(!1)}}},[g]),F=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t="proj_"+Date.now().toString(36)+Math.random().toString(36).substr(2,5),n=(new Date).toISOString(),a=s(s({},D()),{},{id:t,clientData:{projectName:e||"Untitled Project",projectCode:t.substring(5,10).toUpperCase(),createdAt:n,lastUpdated:n}});try{return await R.createProject(a),await R.setState("activeProjectId",t),m(a=>[...a,{id:t,name:e||"Untitled Project",createdAt:n}]),v(t),b(a),S("principal"),p(!1),console.log("[APP] Created project:",t),t}catch(i){throw console.error("[APP] Failed to create project:",i),i}},[]),I=(0,a.useCallback)(async e=>{try{if(await R.deleteProject(e),m(t=>t.filter(t=>t.id!==e)),e===g){const t=f.filter(t=>t.id!==e);t.length>0?await L(t[0].id):(v(null),b(D()),await R.deleteState("activeProjectId"))}}catch(t){console.error("[APP] Failed to delete project:",t)}},[g,f,L]),M=(0,a.useCallback)(()=>{p(!0)},[]),T=(0,a.useCallback)(e=>{b(t=>s(s({},t),{},{clientData:s(s(s({},t.clientData),e),{},{lastUpdated:(new Date).toISOString()})})),M()},[M]),q=(0,a.useCallback)((e,t,n)=>{console.log("[APP] updateKYCData:",e,t,n),b(a=>{var i;return s(s({},a),{},{kycData:s(s({},a.kycData),{},{[e]:s(s({},a.kycData[e]),{},{[t]:s(s({},null===(i=a.kycData[e])||void 0===i?void 0:i[t]),n)})})})}),M()},[M]),H=(0,a.useCallback)(e=>{console.log("[APP] updateFYIData:",e),b(t=>{const n=s({},t.fyiData);return void 0!==e.selections&&(n.selections=s(s({},t.fyiData.selections),e.selections)),void 0!==e.settings&&(n.settings=s(s({},t.fyiData.settings),e.settings)),Object.keys(e).forEach(t=>{"selections"!==t&&"settings"!==t&&(n[t]=e[t])}),s(s({},t),{},{fyiData:n})}),M()},[M]),G=(0,a.useCallback)((e,t)=>{console.log("[APP] updateFYISelection:",e,t),b(n=>s(s({},n),{},{fyiData:s(s({},n.fyiData),{},{selections:s(s({},n.fyiData.selections),{},{[e]:s(s({},n.fyiData.selections[e]),t)})})})),M()},[M]),U=(0,a.useCallback)(e=>{console.log("[APP] updateFYISettings:",e),b(t=>s(s({},t),{},{fyiData:s(s({},t.fyiData),{},{settings:s(s({},t.fyiData.settings),e)})})),M()},[M]),W=(0,a.useCallback)(e=>{console.log("[APP] initializeFYISelections with",Object.keys(e).length,"spaces"),b(t=>s(s({},t),{},{fyiData:s(s({},t.fyiData),{},{selections:e})})),M()},[M]),V=(0,a.useCallback)((e,t)=>{var n;const a=null===(n=j[e])||void 0===n?void 0:n[t];if(!a)return"empty";if("designIdentity"===t){var i;return null!==(i=a["principal"===e?"principalTasteResults":"secondaryTasteResults"])&&void 0!==i&&i.completedAt?"complete":"empty"}const r=z[t]||[];if(0===r.length){const e=Object.values(a).some(e=>""!==e&&null!==e&&void 0!==e&&!(Array.isArray(e)&&0===e.length)&&3!==e&&5!==e);return e?"complete":"empty"}const o=r.filter(e=>{const t=a[e];return""!==t&&null!==t&&void 0!==t&&!(Array.isArray(t)&&0===t.length)});return 0===o.length?"empty":o.length===r.length?"complete":"partial"},[j]),K=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"principal";const t=j[e];if(!t)return 0;let n=0,a=0;return("secondary"===e?B:Object.keys(z)).forEach(i=>{const r=z[i]||[],o=t[i];if(o){if("designIdentity"===i){var s;n+=1;return void(null!==(s=o["principal"===e?"principalTasteResults":"secondaryTasteResults"])&&void 0!==s&&s.completedAt&&(a+=1))}if(r.length>0)n+=r.length,r.forEach(e=>{const t=o[e];""===t||null===t||void 0===t||Array.isArray(t)&&0===t.length||a++});else{const e=Object.values(o).some(e=>""!==e&&null!==e&&void 0!==e&&!(Array.isArray(e)&&0===e.length)&&3!==e&&5!==e&&"moderate"!==e);n+=1,e&&(a+=1)}}}),n>0?Math.round(a/n*100):0},[j]),Y=(0,a.useCallback)(()=>{g&&(b(e=>s(s({},D()),{},{id:e.id,clientData:e.clientData})),M())},[g,M]),Z=(0,a.useCallback)(async()=>{for(const t of f)try{await R.deleteProject(t.id)}catch(e){console.error("[APP] Failed to delete:",e)}m([]),v(null),b(D()),p(!1)},[f]),$={isLoading:n,isSaving:r,lastSaved:l,saveError:d,hasUnsavedChanges:h,saveNow:A,projects:f,activeProjectId:g,setActiveProjectId:L,createProject:F,deleteProject:I,clientData:C,kycData:j,fyiData:P,updateClientData:T,updateKYCData:q,updateFYIData:H,updateFYISelection:G,updateFYISettings:U,initializeFYISelections:W,activeRespondent:x,setActiveRespondent:S,currentKYCSection:_,setCurrentKYCSection:w,disclosureTier:N,setDisclosureTier:k,calculateCompleteness:K,getSectionCompletionStatus:V,resetCurrentProject:Y,resetAllData:Z};return(0,E.jsx)(O.Provider,{value:$,children:t})},H=()=>{const e=(0,a.useContext)(O);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},G=O,U={A:{id:"kyc",name:"KYC",fullName:"Know Your Client",icon:h,color:"blue"},C:{id:"fyi",name:"FYI",fullName:"Find Your Inspiration",icon:p,color:"purple"},M:{id:"mvp",name:"MVP",fullName:"Mansion Validation",icon:f,color:"green"},B:{id:"kym",name:"KYM",fullName:"Know Your Market",icon:x,color:"teal"},D:{id:"vmx",name:"VMX",fullName:"Vision Matrix",icon:S,color:"gold"}},W={P1:{name:"Ask the Right Questions",description:"Discovery & Requirements"},P2:{name:"Have a Story to Tell",description:"Analysis & Synthesis"},P3:{name:"Get It Done",description:"Execution & Delivery"}},V=e=>{var t,n,i,r;let{onNavigate:o}=e;const{clientData:s,updateClientData:l,kycData:c,fyiData:d,calculateCompleteness:u,projects:m,activeProjectId:v,createProject:y,switchProject:b,deleteProject:I}=H(),[R,M]=(0,a.useState)(!1),[T,D]=(0,a.useState)(""),[O,B]=(0,a.useState)(!1),z=u("principal"),q=c.principal.portfolioContext,G=q.principalFirstName?"".concat(q.principalFirstName," ").concat(q.principalLastName||"").trim():"",V="couple"===((null===(t=c.principal.designIdentity)||void 0===t?void 0:t.clientType)||"individual"),K=V?u("secondary"):100,Y=V?Math.round((z+K)/2):z,Z=d.selections||{},$=Object.values(Z).filter(e=>null===e||void 0===e?void 0:e.included).length,Q=d.completedAt||$>=20?100:$>=10?75:$>0?50:0,J=e=>{switch(e){case"A":return 0===Y?"not-started":Y<100?"in-progress":"complete";case"C":return Y<30?"locked":Q>=100?"complete":Q>0?"in-progress":"not-started";case"M":return Q<50?"locked":"not-started";default:return"not-started"}},X=()=>{T.trim()&&(y(T.trim()),D(""),B(!1),M(!1))},ee=e=>{switch(e){case"complete":return"task-cell--complete";case"in-progress":return"task-cell--active";case"pending":return"task-cell--pending";default:return"task-cell--locked"}},te=[{code:"A",id:"kyc",title:"Module A: KYC",subtitle:"Know Your Client",description:"9-section client profile with multi-stakeholder intake and governance framework",icon:h,progress:Y,status:J("A"),color:"blue",enabled:!0},{code:"C",id:"fyi",title:"Module C: FYI",subtitle:"Find Your Inspiration",description:"Space program with floor assignments and lifestyle requirements",icon:p,progress:Q,status:J("C"),color:"purple",enabled:Y>=30},{code:"M",id:"mvp",title:"Module M: MVP",subtitle:"Mansion Validation",description:"Adjacency validation with red flags and bridges",icon:f,progress:0,status:J("M"),color:"green",enabled:Q>=50},{code:"B",id:"kym",title:"Module B: KYM",subtitle:"Know Your Market",description:"Site-Vision assessment and market alignment",icon:x,progress:0,status:"not-started",color:"teal",enabled:!1,comingSoon:!0},{code:"D",id:"vmx",title:"Module D: VMX",subtitle:"Vision Matrix",description:"Budget allocation and project delivery",icon:S,progress:0,status:"not-started",color:"gold",enabled:!1,comingSoon:!0}],ne=(e,t)=>{if(t)return(0,E.jsxs)("span",{className:"badge badge--neutral",children:[(0,E.jsx)(_,{size:14})," Coming Soon"]});switch(e){case"complete":return(0,E.jsxs)("span",{className:"badge badge--success",children:[(0,E.jsx)(w,{size:14})," Complete"]});case"in-progress":return(0,E.jsxs)("span",{className:"badge badge--warning",children:[(0,E.jsx)(_,{size:14})," In Progress"]});case"locked":return(0,E.jsxs)("span",{className:"badge badge--neutral",children:[(0,E.jsx)(N,{size:14})," Locked"]});default:return(0,E.jsxs)("span",{className:"badge badge--neutral",children:[(0,E.jsx)(N,{size:14})," Not Started"]})}};return(0,E.jsxs)("div",{className:"dashboard",children:[(0,E.jsxs)("section",{className:"dashboard__project-selector",children:[(0,E.jsxs)("div",{className:"project-selector",children:[(0,E.jsxs)("div",{className:"project-selector__current",onClick:()=>M(!R),children:[(0,E.jsx)(k,{size:20,className:"project-selector__icon"}),(0,E.jsxs)("div",{className:"project-selector__info",children:[(0,E.jsx)("span",{className:"project-selector__label",children:"Current Project"}),(0,E.jsx)("span",{className:"project-selector__name",children:s.projectName||"No Project Selected"})]}),(0,E.jsx)(C,{size:20,className:"project-selector__chevron ".concat(R?"project-selector__chevron--open":"")})]}),R&&(0,E.jsxs)("div",{className:"project-dropdown",children:[(0,E.jsx)("div",{className:"project-dropdown__header",children:(0,E.jsxs)("span",{children:["Your Projects (",m.length,")"]})}),(0,E.jsx)("div",{className:"project-dropdown__list",children:0===m.length?(0,E.jsx)("div",{className:"project-dropdown__empty",children:"No projects yet. Create your first project below."}):m.map(e=>(0,E.jsxs)("div",{className:"project-dropdown__item ".concat(e.id===v?"project-dropdown__item--active":""),onClick:()=>{return t=e.id,b(t),void M(!1);var t},children:[(0,E.jsxs)("div",{className:"project-dropdown__item-info",children:[(0,E.jsx)("span",{className:"project-dropdown__item-name",children:e.name}),(0,E.jsx)("span",{className:"project-dropdown__item-date",children:new Date(e.lastUpdated||e.createdAt).toLocaleDateString()})]}),e.id===v&&(0,E.jsx)(w,{size:16,className:"project-dropdown__item-check"}),m.length>1&&e.id!==v&&(0,E.jsx)("button",{className:"project-dropdown__item-delete",onClick:t=>{t.stopPropagation(),window.confirm('Delete "'.concat(e.name,'"? This cannot be undone.'))&&I(e.id)},children:(0,E.jsx)(j,{size:14})})]},e.id))}),(0,E.jsx)("div",{className:"project-dropdown__footer",children:O?(0,E.jsxs)("div",{className:"project-dropdown__new-input",children:[(0,E.jsx)("input",{type:"text",placeholder:"Project name...",value:T,onChange:e=>D(e.target.value),onKeyDown:e=>"Enter"===e.key&&X(),autoFocus:!0}),(0,E.jsx)("button",{className:"btn btn--primary btn--sm",onClick:X,children:"Create"}),(0,E.jsx)("button",{className:"btn btn--ghost btn--sm",onClick:()=>{B(!1),D("")},children:"Cancel"})]}):(0,E.jsxs)("button",{className:"project-dropdown__new-btn",onClick:()=>B(!0),children:[(0,E.jsx)(P,{size:16})," New Project"]})})]})]}),v&&(0,E.jsxs)("div",{className:"project-name-edit",children:[(0,E.jsx)("input",{type:"text",className:"project-name-edit__input",value:s.projectName||"",onChange:e=>l({projectName:e.target.value}),placeholder:"Enter project name..."}),s.lastUpdated&&(0,E.jsxs)("span",{className:"project-name-edit__saved",children:["Saved ",new Date(s.lastUpdated).toLocaleTimeString()]})]})]}),(0,E.jsxs)("section",{className:"dashboard__welcome",children:[(0,E.jsxs)("div",{className:"dashboard__welcome-content",children:[(0,E.jsx)("h1",{className:"dashboard__title",children:G?"Welcome back":"Welcome to N4S"}),(0,E.jsx)("p",{className:"dashboard__subtitle",children:s.projectName?"Managing: ".concat(s.projectName):"Ultra-Luxury Residential Advisory Platform"})]}),v?!G&&(0,E.jsxs)("button",{className:"btn btn--primary",onClick:()=>o("kyc"),children:["Continue KYC ",(0,E.jsx)(A,{size:18})]}):(0,E.jsxs)("button",{className:"btn btn--primary",onClick:()=>{y("New Project"),o("kyc")},children:["Start New Project ",(0,E.jsx)(A,{size:18})]})]}),(0,E.jsxs)("section",{className:"dashboard__matrix",children:[(0,E.jsx)("h2",{className:"dashboard__section-title",children:"N4S Task Matrix"}),(0,E.jsxs)("div",{className:"task-matrix",children:[(0,E.jsxs)("div",{className:"task-matrix__header",children:[(0,E.jsx)("div",{className:"task-matrix__corner"}),Object.entries(U).map(e=>{let[t,n]=e;return(0,E.jsxs)("div",{className:"task-matrix__module-header task-matrix__module-header--".concat(n.color),children:[(0,E.jsx)("span",{className:"task-matrix__code",children:t}),(0,E.jsx)("span",{className:"task-matrix__name",children:n.name})]},t)})]}),Object.entries(W).map(e=>{let[t,n]=e;return(0,E.jsxs)("div",{className:"task-matrix__row",children:[(0,E.jsxs)("div",{className:"task-matrix__phase-header",children:[(0,E.jsx)("span",{className:"task-matrix__phase-code",children:t}),(0,E.jsx)("span",{className:"task-matrix__phase-name",children:n.name})]}),Object.entries(U).map(e=>{let[a,i]=e;const r=((e,t)=>{const n=J(t);if("not-started"===n)return"pending";if("locked"===n)return"locked";if("complete"===n)return"complete";if("A"===t){if("P1"===e)return Y>30?"complete":"in-progress";if("P2"===e)return Y>60?"in-progress":"pending";if("P3"===e)return Y>90?"in-progress":"pending"}if("C"===t){if("P1"===e)return Q>30?"complete":"in-progress";if("P2"===e)return Q>60?"in-progress":"pending";if("P3"===e)return Q>90?"in-progress":"pending"}if("M"===t){if("P1"===e)return"in-progress";if("P2"===e)return"pending";if("P3"===e)return"pending"}return"pending"})(t,a),o="".concat(t,".").concat(a);return(0,E.jsxs)("div",{className:"task-cell ".concat(ee(r)),title:"".concat(o,": ").concat(n.name," - ").concat(i.fullName),children:[(0,E.jsx)("span",{className:"task-cell__code",children:o}),"complete"===r&&(0,E.jsx)(w,{size:14}),"in-progress"===r&&(0,E.jsx)(_,{size:14})]},o)})]},t)})]}),(0,E.jsxs)("div",{className:"task-matrix__legend",children:[(0,E.jsxs)("span",{className:"legend-item",children:[(0,E.jsx)("span",{className:"legend-dot legend-dot--complete"})," Complete"]}),(0,E.jsxs)("span",{className:"legend-item",children:[(0,E.jsx)("span",{className:"legend-dot legend-dot--active"})," In Progress"]}),(0,E.jsxs)("span",{className:"legend-item",children:[(0,E.jsx)("span",{className:"legend-dot legend-dot--pending"})," Pending"]}),(0,E.jsxs)("span",{className:"legend-item",children:[(0,E.jsx)("span",{className:"legend-dot legend-dot--locked"})," Locked"]})]})]}),s.principalName&&(0,E.jsxs)("section",{className:"dashboard__stats",children:[(0,E.jsxs)("div",{className:"stat-card",children:[(0,E.jsx)("div",{className:"stat-card__icon stat-card__icon--blue",children:(0,E.jsx)(h,{size:24})}),(0,E.jsxs)("div",{className:"stat-card__content",children:[(0,E.jsxs)("span",{className:"stat-card__value",children:[Y,"%"]}),(0,E.jsx)("span",{className:"stat-card__label",children:"KYC Complete"})]})]}),(0,E.jsxs)("div",{className:"stat-card",children:[(0,E.jsx)("div",{className:"stat-card__icon stat-card__icon--purple",children:(0,E.jsx)(g,{size:24})}),(0,E.jsxs)("div",{className:"stat-card__content",children:[(0,E.jsx)("span",{className:"stat-card__value",children:Object.values(d.selections||{}).filter(e=>null===e||void 0===e?void 0:e.included).length}),(0,E.jsx)("span",{className:"stat-card__label",children:"Spaces Selected"})]})]}),(0,E.jsxs)("div",{className:"stat-card",children:[(0,E.jsx)("div",{className:"stat-card__icon stat-card__icon--teal",children:(0,E.jsx)(L,{size:24})}),(0,E.jsxs)("div",{className:"stat-card__content",children:[(0,E.jsx)("span",{className:"stat-card__value",children:null!==(n=d.settings)&&void 0!==n&&n.targetSF?d.settings.targetSF.toLocaleString():"\u2014"}),(0,E.jsx)("span",{className:"stat-card__label",children:"Target SF"})]})]}),(0,E.jsxs)("div",{className:"stat-card",children:[(0,E.jsx)("div",{className:"stat-card__icon stat-card__icon--gold",children:(0,E.jsx)(F,{size:24})}),(0,E.jsxs)("div",{className:"stat-card__content",children:[(0,E.jsx)("span",{className:"stat-card__value",children:(null===(i=d.settings)||void 0===i||null===(r=i.programTier)||void 0===r?void 0:r.toUpperCase())||"\u2014"}),(0,E.jsx)("span",{className:"stat-card__label",children:"Program Tier"})]})]})]}),(0,E.jsxs)("section",{className:"dashboard__modules",children:[(0,E.jsx)("h2",{className:"dashboard__section-title",children:"Modules"}),(0,E.jsx)("div",{className:"dashboard__module-grid",children:te.map(e=>{const t=e.icon;return(0,E.jsxs)("div",{className:"module-card module-card--".concat(e.color," ").concat(e.comingSoon?"module-card--disabled":""," ").concat("locked"===e.status?"module-card--locked":""),onClick:()=>e.enabled&&o(e.id),children:[(0,E.jsxs)("div",{className:"module-card__header",children:[(0,E.jsx)("div",{className:"module-card__icon",children:(0,E.jsx)(t,{size:28})}),ne(e.status,e.comingSoon)]}),(0,E.jsx)("h3",{className:"module-card__title",children:e.title}),(0,E.jsx)("p",{className:"module-card__subtitle",children:e.subtitle}),(0,E.jsx)("p",{className:"module-card__description",children:e.description}),!e.comingSoon&&"locked"!==e.status&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"module-card__progress",children:[(0,E.jsx)("div",{className:"progress-bar",children:(0,E.jsx)("div",{className:"progress-bar__fill",style:{width:"".concat(e.progress,"%")}})}),(0,E.jsxs)("span",{className:"progress-bar__label",children:[e.progress,"% Complete"]})]}),(0,E.jsxs)("button",{className:"module-card__cta",children:["not-started"===e.status?"Begin":"Continue"," ",(0,E.jsx)(A,{size:16})]})]})]},e.id)})})]}),(0,E.jsxs)("section",{className:"dashboard__workflow",children:[(0,E.jsx)("h2",{className:"dashboard__section-title",children:"N4S Methodology"}),(0,E.jsx)("div",{className:"workflow-phases",children:Object.entries(W).map((e,t)=>{let[n,i]=e;return(0,E.jsxs)(a.Fragment,{children:[(0,E.jsxs)("div",{className:"workflow-phase",children:[(0,E.jsx)("div",{className:"workflow-phase__code",children:n}),(0,E.jsxs)("div",{className:"workflow-phase__content",children:[(0,E.jsx)("h4",{children:i.name}),(0,E.jsx)("p",{children:i.description})]})]}),t<Object.entries(W).length-1&&(0,E.jsx)("div",{className:"workflow-phase__connector"})]},n)})})]})]})},K=d("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Y=d("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Z=d("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),$=d("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),Q=d("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),J=d("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),X=d("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ee=d("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),te=d("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ne=e=>{let{label:t,type:n="text",value:a,onChange:i,placeholder:r,required:o=!1,disabled:l=!1,helpText:c,error:d,rows:u=3,min:h,max:p,step:f,className:m=""}=e;const g=e=>{i(e.target.value)},v="field-".concat(t.toLowerCase().replace(/\s+/g,"-"));return(0,E.jsxs)("div",{className:"form-field ".concat(m),children:[(0,E.jsxs)("label",{htmlFor:v,className:"form-field__label",children:[t,o&&(0,E.jsx)("span",{className:"form-field__required",children:"*"})]}),(()=>{const e={id:v,value:a||"",onChange:g,placeholder:r,disabled:l,className:"form-field__input ".concat(d?"form-field__input--error":"")};return"textarea"===n?(0,E.jsx)("textarea",s(s({},e),{},{rows:u})):(0,E.jsx)("input",s(s({},e),{},{type:n,min:h,max:p,step:f}))})(),c&&!d&&(0,E.jsx)("span",{className:"form-field__help",children:c}),d&&(0,E.jsx)("span",{className:"form-field__error",children:d})]})},ae=e=>{let{label:t,value:n,onChange:a,options:i,placeholder:r="Select...",required:o=!1,disabled:s=!1,helpText:l,error:c,className:d=""}=e;const u="select-".concat(t.toLowerCase().replace(/\s+/g,"-"));return(0,E.jsxs)("div",{className:"form-field ".concat(d),children:[(0,E.jsxs)("label",{htmlFor:u,className:"form-field__label",children:[t,o&&(0,E.jsx)("span",{className:"form-field__required",children:"*"})]}),(0,E.jsxs)("div",{className:"select-wrapper",children:[(0,E.jsxs)("select",{id:u,value:n||"",onChange:e=>{const t=e.target.value,n=isNaN(t)||""===t?t:Number(t);a(n)},disabled:s,className:"form-field__select ".concat(c?"form-field__select--error":""),children:[(0,E.jsx)("option",{value:"",children:r}),i.map(e=>(0,E.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,E.jsx)(C,{className:"select-wrapper__icon",size:18})]}),l&&!c&&(0,E.jsx)("span",{className:"form-field__help",children:l}),c&&(0,E.jsx)("span",{className:"form-field__error",children:c})]})},ie=e=>{let{respondent:t,tier:n}=e;const{kycData:i,updateKYCData:r}=H(),o=i[t].portfolioContext,[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),h=(e,n)=>{r(t,"portfolioContext",{[e]:n})},p=(e,t,n)=>{const a=[...o.primaryResidences||[]];a[e]=s(s({},a[e]),{},{[t]:n}),h("primaryResidences",a)},f="principal"===t,m=parseInt(o.currentPropertyCount)||0;return(0,E.jsxs)("div",{className:"kyc-section",children:[l&&(0,E.jsx)("div",{className:"modal-overlay",children:(0,E.jsxs)("div",{className:"modal",children:[(0,E.jsxs)("div",{className:"modal__header",children:[(0,E.jsx)(te,{size:24,className:"modal__icon modal__icon--warning"}),(0,E.jsx)("h3",{children:"Confirm Authority Level"})]}),(0,E.jsxs)("div",{className:"modal__body",children:[(0,E.jsxs)("p",{children:["You are granting ",(0,E.jsx)("strong",{children:3===d?"Level 3: Co-Signatory on Stage Gates":"Level 4: Full Authority Delegated"})," to your Family Office/Advisor."]}),(0,E.jsxs)("p",{className:"modal__warning",children:["This means they will ",3===d?"need to co-sign all stage gate approvals":"have full authority to make decisions on your behalf","."]}),(0,E.jsx)("p",{children:"Are you sure you want to proceed?"})]}),(0,E.jsxs)("div",{className:"modal__actions",children:[(0,E.jsx)("button",{className:"btn btn--secondary",onClick:()=>{c(!1),u(null)},children:"Cancel"}),(0,E.jsx)("button",{className:"btn btn--primary",onClick:()=>{h("familyOfficeAuthorityLevel",d),h("authorityLevelConfirmed",!0),c(!1),u(null)},children:"Confirm Authority Level"})]})]})}),f&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Principal Designation"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"The Principal is the contractual decision-maker who signs all agreements and has final authority on Hard Stop decisions."}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"First Name",value:o.principalFirstName,onChange:e=>h("principalFirstName",e),placeholder:"First name",required:!0}),(0,E.jsx)(ne,{label:"Last Name",value:o.principalLastName,onChange:e=>h("principalLastName",e),placeholder:"Last name",required:!0})]}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"Email",type:"email",value:o.principalEmail,onChange:e=>h("principalEmail",e),placeholder:"email@example.com",required:!0}),(0,E.jsx)(ne,{label:"Phone",type:"tel",value:o.principalPhone,onChange:e=>h("principalPhone",e),placeholder:"+1 (555) 000-0000"})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Secondary Stakeholder"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Spouse or co-decision-maker (if applicable)"}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"First Name",value:o.secondaryFirstName,onChange:e=>h("secondaryFirstName",e),placeholder:"First name"}),(0,E.jsx)(ne,{label:"Last Name",value:o.secondaryLastName,onChange:e=>h("secondaryLastName",e),placeholder:"Last name"})]}),(0,E.jsx)(ne,{label:"Email",type:"email",value:o.secondaryEmail,onChange:e=>h("secondaryEmail",e),placeholder:"email@example.com"})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Family Office / Advisor"}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"Family Office Contact",value:o.familyOfficeContact,onChange:e=>h("familyOfficeContact",e),placeholder:"Name and firm (if applicable)"}),(0,E.jsx)(ae,{label:"Authority Level",value:o.familyOfficeAuthorityLevel,onChange:e=>{const t=parseInt(e);t>=3?(u(t),c(!0)):(h("familyOfficeAuthorityLevel",t),h("authorityLevelConfirmed",!1))},options:[{value:1,label:"Level 1: Advisory Only"},{value:2,label:"Level 2: Veto Power on Budget/Timeline"},{value:3,label:"Level 3: Co-Signatory on Stage Gates"},{value:4,label:"Level 4: Full Authority Delegated"}],placeholder:"Select authority level...",helpText:"Principal must formally designate this"})]}),o.familyOfficeAuthorityLevel>=3&&o.authorityLevelConfirmed&&(0,E.jsxs)("div",{className:"kyc-section__notice kyc-section__notice--info",children:[(0,E.jsx)(te,{size:16}),(0,E.jsxs)("span",{children:["Authority Level ",o.familyOfficeAuthorityLevel," confirmed. Stage gates will require ",3===o.familyOfficeAuthorityLevel?"co-signature":"advisor approval","."]})]}),"mvp"!==n&&(0,E.jsx)(ne,{label:"Domain Delegation Notes",type:"textarea",value:o.domainDelegationNotes,onChange:e=>h("domainDelegationNotes",e),placeholder:"Document any specific authority delegations (e.g., 'Secondary has authority over children's spaces and her closet')",rows:3})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Portfolio Context"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Understanding the role this property plays in your overall portfolio helps us weight your preferences appropriately."}),(0,E.jsx)(ne,{label:"Current Property Count",type:"number",value:o.currentPropertyCount,onChange:e=>h("currentPropertyCount",parseInt(e)||null),placeholder:"Total properties owned",min:0}),m>0&&(0,E.jsxs)("div",{className:"kyc-section__subgroup",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Primary Residence Location(s)"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"12px"},children:"Enter the locations of your existing properties"}),(o.primaryResidences||[]).map((e,t)=>(0,E.jsxs)("div",{className:"residence-row",children:[(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"Property ".concat(t+1," - City"),value:e.city,onChange:e=>p(t,"city",e),placeholder:"City"}),(0,E.jsx)(ne,{label:"Country",value:e.country,onChange:e=>p(t,"country",e),placeholder:"Country"})]}),(o.primaryResidences||[]).length>1&&(0,E.jsx)("button",{className:"btn btn--ghost btn--sm residence-row__remove",onClick:()=>(e=>{const t=(o.primaryResidences||[]).filter((t,n)=>n!==e);h("primaryResidences",t)})(t),children:(0,E.jsx)(v,{size:16})})]},t)),(o.primaryResidences||[]).length<m&&(0,E.jsxs)("button",{className:"btn btn--secondary btn--sm",onClick:()=>{const e=o.primaryResidences||[];h("primaryResidences",[...e,{country:"",city:""}])},children:[(0,E.jsx)(P,{size:16})," Add Property Location"]})]}),(0,E.jsx)(ae,{label:"This Property's Role",value:o.thisPropertyRole,onChange:e=>h("thisPropertyRole",e),options:[{value:"primary",label:"Primary Residence"},{value:"secondary",label:"Secondary/Vacation Home"},{value:"vacation",label:"Vacation Property"},{value:"investment",label:"Investment Property"},{value:"legacy",label:"Legacy/Generational Asset"}],placeholder:"Select the role this property will serve...",required:!0,helpText:"This fundamentally affects how we weight your preferences vs. market considerations"}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ae,{label:"Investment Horizon",value:o.investmentHorizon,onChange:e=>h("investmentHorizon",e),options:[{value:"forever",label:"Forever Home"},{value:"10yr",label:"10+ Years"},{value:"5yr",label:"5-10 Years"},{value:"generational",label:"Generational (Multi-decade)"}],placeholder:"How long do you plan to hold?",required:!0}),"mvp"!==n&&(0,E.jsx)(ae,{label:"Exit Strategy",value:o.exitStrategy,onChange:e=>h("exitStrategy",e),options:[{value:"personal",label:"Personal Use Only"},{value:"rental",label:"Potential Rental Income"},{value:"sale",label:"Future Sale/Flip"},{value:"inheritance",label:"Family Inheritance"}],placeholder:"Long-term plan for the property..."})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Life Stage & Timeline"}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ae,{label:"Life Stage",value:o.lifeStage,onChange:e=>h("lifeStage",e),options:[{value:"building",label:"Building Family (Young Children)"},{value:"established",label:"Established Family (Teen/Adult Children)"},{value:"empty-nest",label:"Empty Nest"},{value:"retirement",label:"Retirement"},{value:"multi-gen",label:"Multi-Generational Household"}],placeholder:"Current household life stage...",required:!0}),(0,E.jsx)(ae,{label:"Decision Timeline",value:o.decisionTimeline,onChange:e=>h("decisionTimeline",e),options:[{value:"urgent",label:"Urgent (< 6 months)"},{value:"standard",label:"Standard (6-12 months)"},{value:"flexible",label:"Flexible (12+ months)"}],placeholder:"How quickly do you need to move?",required:!0})]})]}),o.thisPropertyRole&&o.investmentHorizon&&(0,E.jsxs)("div",{className:"kyc-section__insight",children:[(0,E.jsx)("h4",{className:"kyc-section__insight-title",children:"KYC-KYM Weighting Preview"}),(0,E.jsx)("p",{className:"kyc-section__insight-text",children:"Based on your selections, we will weight your assessment:"}),(0,E.jsxs)("div",{className:"weighting-indicator",children:[(0,E.jsxs)("div",{className:"weighting-indicator__bar",children:[(0,E.jsx)("div",{className:"weighting-indicator__kyc",style:{width:"primary"===o.thisPropertyRole&&"forever"===o.investmentHorizon?"70%":"investment"===o.thisPropertyRole?"30%":"50%"},children:"KYC (Your Preferences)"}),(0,E.jsx)("div",{className:"weighting-indicator__kym",children:"KYM (Market Realities)"})]}),(0,E.jsx)("p",{className:"weighting-indicator__explanation",children:"primary"===o.thisPropertyRole&&"forever"===o.investmentHorizon?"Forever home: Your personal preferences take priority over resale considerations.":"investment"===o.thisPropertyRole?"Investment property: Market realities and resale value take priority.":"Balanced approach: Both your preferences and market considerations are weighted equally."})]})]})]})},re=e=>{let{respondent:t,tier:n}=e;const{kycData:i,updateKYCData:r}=H(),o=i[t].familyHousehold,l=(e,n)=>{r(t,"familyHousehold",{[e]:n})},[c,d]=(0,a.useState)({name:"",age:"",role:"",specialNeeds:""}),u=[{value:"adult",label:"Adult"},{value:"teenager",label:"Teenager (13-17)"},{value:"child",label:"Child (6-12)"},{value:"young-child",label:"Young Child (0-5)"},{value:"elderly",label:"Elderly Parent/Relative"}];return(0,E.jsxs)("div",{className:"kyc-section",children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Family Members"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Add all family members who will use this residence. This helps us understand spatial requirements and room programming."}),o.familyMembers&&o.familyMembers.length>0&&(0,E.jsx)("div",{className:"family-members-list",children:o.familyMembers.map(e=>{var t;return(0,E.jsxs)("div",{className:"family-member-card",children:[(0,E.jsx)("div",{className:"family-member-card__icon",children:(0,E.jsx)(X,{size:20})}),(0,E.jsxs)("div",{className:"family-member-card__content",children:[(0,E.jsx)("span",{className:"family-member-card__name",children:e.name}),(0,E.jsxs)("span",{className:"family-member-card__details",children:[e.age&&"Age ".concat(e.age),e.role&&" \u2022 ".concat((null===(t=u.find(t=>t.value===e.role))||void 0===t?void 0:t.label)||e.role)]}),e.specialNeeds&&(0,E.jsx)("span",{className:"family-member-card__needs",children:e.specialNeeds})]}),(0,E.jsx)("button",{className:"family-member-card__remove",onClick:()=>(e=>{const t=o.familyMembers.filter(t=>t.id!==e);l("familyMembers",t)})(e.id),"aria-label":"Remove member",children:(0,E.jsx)(v,{size:16})})]},e.id)})}),(0,E.jsxs)("div",{className:"add-member-form",children:[(0,E.jsxs)("div",{className:"form-grid form-grid--4col",children:[(0,E.jsx)(ne,{label:"Name",value:c.name,onChange:e=>d(s(s({},c),{},{name:e})),placeholder:"First name"}),(0,E.jsx)(ne,{label:"Age",type:"number",value:c.age,onChange:e=>d(s(s({},c),{},{age:e})),placeholder:"Age",min:0,max:120}),(0,E.jsx)(ae,{label:"Role",value:c.role,onChange:e=>d(s(s({},c),{},{role:e})),options:u,placeholder:"Select..."}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"\xa0"}),(0,E.jsxs)("button",{className:"btn btn--secondary btn--full",onClick:()=>{if(c.name){const e=[...o.familyMembers||[],s(s({},c),{},{id:Date.now()})];l("familyMembers",e),d({name:"",age:"",role:"",specialNeeds:""})}},disabled:!c.name,children:[(0,E.jsx)(P,{size:18})," Add"]})]})]}),"mvp"!==n&&(0,E.jsx)(ne,{label:"Special Needs / Accommodations",value:c.specialNeeds,onChange:e=>d(s(s({},c),{},{specialNeeds:e})),placeholder:"Mobility, sensory, medical requirements..."})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Pets"}),(0,E.jsx)(ne,{label:"Pets",value:o.pets,onChange:e=>l("pets",e),placeholder:"e.g., 2 dogs (Golden Retrievers), 1 cat - all indoor",helpText:"Include type, quantity, and indoor/outdoor status"}),o.pets&&""!==o.pets.trim()&&(0,E.jsxs)("div",{className:"form-grid form-grid--2col",style:{marginTop:"1rem"},children:[(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Pet Grooming/Washing Room?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Dedicated space for pet bathing and grooming"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.petGroomingRoom?"toggle-btn--active":""),onClick:()=>l("petGroomingRoom",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.petGroomingRoom?"":"toggle-btn--active"),onClick:()=>l("petGroomingRoom",!1),children:"No"})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Outdoor Dog Run?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Fenced outdoor area for dogs to exercise"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.petDogRun?"toggle-btn--active":""),onClick:()=>l("petDogRun",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.petDogRun?"":"toggle-btn--active"),onClick:()=>l("petDogRun",!1),children:"No"})]})]})]})]}),"mvp"!==n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Staff & Multi-Generational"}),(0,E.jsx)(ae,{label:"Staffing Level",value:o.staffingLevel,onChange:e=>l("staffingLevel",e),options:[{value:"none",label:"No Staff"},{value:"part_time",label:"Part-Time Staff (cleaning, etc.)"},{value:"full_time",label:"Full-Time Staff (daily presence)"},{value:"live_in",label:"Live-In Staff (requires quarters)"}],placeholder:"Select staffing level...",helpText:"Affects service areas and staff accommodation requirements"}),"live_in"===o.staffingLevel&&(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"Live-in Staff Count",type:"number",value:o.liveInStaff,onChange:e=>l("liveInStaff",parseInt(e)||null),placeholder:"Number of live-in staff",min:0}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Staff Quarters Required?"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.staffAccommodationRequired?"toggle-btn--active":""),onClick:()=>l("staffAccommodationRequired",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.staffAccommodationRequired?"":"toggle-btn--active"),onClick:()=>l("staffAccommodationRequired",!1),children:"No"})]})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Multi-Generational Needs?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Will parents or in-laws be living with you?"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.multigenerationalNeeds?"toggle-btn--active":""),onClick:()=>l("multigenerationalNeeds",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(o.multigenerationalNeeds?"":"toggle-btn--active"),onClick:()=>l("multigenerationalNeeds",!1),children:"No"})]})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Anticipated Changes"}),(0,E.jsx)(ne,{label:"Family Changes Expected",type:"textarea",value:o.anticipatedFamilyChanges,onChange:e=>l("anticipatedFamilyChanges",e),placeholder:"Any expected changes? Growing family, children leaving for college, aging parents moving in...",rows:3})]})]})]})},oe=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=H(),r=a[t].projectParameters,o=(e,n)=>{i(t,"projectParameters",{[e]:n})},s=1+(r.levelsAboveArrival||0)+(r.levelsBelowArrival||0);return(0,E.jsxs)("div",{className:"kyc-section",children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Project Identification"}),(0,E.jsx)(ne,{label:"Project Name",value:r.projectName,onChange:e=>o("projectName",e),placeholder:"e.g., Smith Residence, Villa Azure, The Thornwood Estate",required:!0})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Location"}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"City",value:r.projectCity,onChange:e=>o("projectCity",e),placeholder:"e.g., Dubai, Los Angeles, London",required:!0}),(0,E.jsx)(ne,{label:"Country",value:r.projectCountry,onChange:e=>o("projectCountry",e),placeholder:"e.g., UAE, USA, UK",required:!0})]}),(0,E.jsx)(ne,{label:"Specific Address / Site",value:r.specificAddress,onChange:e=>o("specificAddress",e),placeholder:"If known - street address or development name"}),(0,E.jsx)(ae,{label:"Site Typology",value:r.siteTypology,onChange:e=>o("siteTypology",e),options:[{value:"hillside",label:"Hillside"},{value:"waterfront",label:"Waterfront"},{value:"urban",label:"Urban"},{value:"suburban",label:"Suburban"},{value:"rural",label:"Rural"},{value:"desert",label:"Desert"}],placeholder:"Select site type...",helpText:"Affects architect matching and design approach"})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Project Scope"}),(0,E.jsx)(ae,{label:"Property Type",value:r.propertyType,onChange:e=>o("propertyType",e),options:[{value:"new-build",label:"New Build (Ground Up)"},{value:"renovation",label:"Major Renovation"},{value:"addition",label:"Addition to Existing"},{value:"interior-only",label:"Interior Renovation Only"}],placeholder:"Select project type...",required:!0}),(0,E.jsxs)("div",{className:"form-grid form-grid--3col",children:[(0,E.jsx)(ne,{label:"Target Gross SF",type:"number",value:r.targetGSF,onChange:e=>o("targetGSF",parseInt(e)||null),placeholder:"Total square feet",min:0,required:!0}),(0,E.jsx)(ne,{label:"Bedrooms",type:"number",value:r.bedroomCount,onChange:e=>o("bedroomCount",parseInt(e)||null),placeholder:"Count",min:0,required:!0}),(0,E.jsx)(ne,{label:"Bathrooms",type:"number",value:r.bathroomCount,onChange:e=>o("bathroomCount",parseInt(e)||null),placeholder:"Count",min:0})]}),(0,E.jsx)(ne,{label:"SF Budget Cap (Optional)",type:"number",value:r.sfCapConstraint,onChange:e=>o("sfCapConstraint",parseInt(e)||null),placeholder:"Leave blank for Discovery Mode",min:0,helpText:"Set a maximum SF constraint, or leave blank to explore"})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Level Configuration"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Configure the vertical stacking of your residence. L1 is always the Arrival Level."}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"Levels Above Arrival (L2, L3...)",type:"number",value:r.levelsAboveArrival,onChange:e=>o("levelsAboveArrival",Math.min(3,Math.max(0,parseInt(e)||0))),placeholder:"0-3",min:0,max:3,helpText:"How many floors above the entry level?"}),(0,E.jsx)(ne,{label:"Levels Below Arrival (L-1, L-2...)",type:"number",value:r.levelsBelowArrival,onChange:e=>o("levelsBelowArrival",Math.min(3,Math.max(0,parseInt(e)||0))),placeholder:"0-3",min:0,max:3,helpText:"Below-grade or down-slope levels"})]}),s>0&&(0,E.jsxs)("div",{className:"level-config-preview",children:[(0,E.jsx)("div",{className:"level-config-preview__label",children:"Building Section Preview"}),(0,E.jsx)("div",{className:"level-config-preview__stack",children:(()=>{const e=[];for(let t=r.levelsAboveArrival||0;t>=1;t--)e.push("L".concat(t+1));e.push("L1 (Arrival)");for(let t=1;t<=(r.levelsBelowArrival||0);t++)e.push("L-".concat(t));return e})().map((e,t)=>(0,E.jsxs)("div",{className:"level-config-preview__level ".concat(e.includes("Arrival")?"level-config-preview__level--arrival":""),children:[(0,E.jsx)("span",{className:"level-config-preview__level-label",children:e}),e.includes("Arrival")&&(0,E.jsx)("span",{className:"level-config-preview__arrival-badge",children:"\u2190 Entry"})]},e))}),(0,E.jsxs)("div",{className:"level-config-preview__total",children:["Total: ",s," level",1!==s?"s":""]})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Additional Structures"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Beyond the main residence, will there be separate structures on the property?"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Include Guest House?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"A separate structure for guest accommodation"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.hasGuestHouse?"toggle-btn--active":""),onClick:()=>o("hasGuestHouse",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.hasGuestHouse?"":"toggle-btn--active"),onClick:()=>o("hasGuestHouse",!1),children:"No"})]})]}),r.hasGuestHouse&&(0,E.jsxs)("div",{className:"form-subsection",children:[(0,E.jsx)(ae,{label:"Guest House Bedrooms",value:r.guestHouseBedrooms,onChange:e=>o("guestHouseBedrooms",parseInt(e)),options:[{value:1,label:"1 Bedroom"},{value:2,label:"2 Bedrooms"},{value:3,label:"3 Bedrooms"}],placeholder:"Select bedroom count..."}),(0,E.jsxs)("div",{className:"form-grid form-grid--3col",children:[(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Include Living Area?"}),(0,E.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesLiving?"toggle-btn--active":""),onClick:()=>o("guestHouseIncludesLiving",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesLiving?"":"toggle-btn--active"),onClick:()=>o("guestHouseIncludesLiving",!1),children:"No"})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Include Kitchen?"}),(0,E.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesKitchen?"toggle-btn--active":""),onClick:()=>o("guestHouseIncludesKitchen",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesKitchen?"":"toggle-btn--active"),onClick:()=>o("guestHouseIncludesKitchen",!1),children:"No"})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Include Dining?"}),(0,E.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesDining?"toggle-btn--active":""),onClick:()=>o("guestHouseIncludesDining",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.guestHouseIncludesDining?"":"toggle-btn--active"),onClick:()=>o("guestHouseIncludesDining",!1),children:"No"})]})]})]})]}),(0,E.jsxs)("div",{className:"form-field",style:{marginTop:"1.5rem"},children:[(0,E.jsx)("label",{className:"form-field__label",children:"Include Pool House / Wellness Pavilion?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Changing rooms, showers, and optional entertainment/kitchen"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.hasPoolHouse?"toggle-btn--active":""),onClick:()=>o("hasPoolHouse",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.hasPoolHouse?"":"toggle-btn--active"),onClick:()=>o("hasPoolHouse",!1),children:"No"})]})]}),r.hasPoolHouse&&(0,E.jsxs)("div",{className:"form-subsection",children:[(0,E.jsx)(ae,{label:"Pool House Location",value:r.poolHouseLocation,onChange:e=>o("poolHouseLocation",e),options:[{value:"attached",label:"Attached to Main Residence"},{value:"detached",label:"Separate Structure"}],placeholder:"Select location..."}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Include Entertainment Area?"}),(0,E.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.poolHouseIncludesEntertainment?"toggle-btn--active":""),onClick:()=>o("poolHouseIncludesEntertainment",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.poolHouseIncludesEntertainment?"":"toggle-btn--active"),onClick:()=>o("poolHouseIncludesEntertainment",!1),children:"No"})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Include Outdoor Kitchen?"}),(0,E.jsxs)("div",{className:"toggle-group toggle-group--small",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.poolHouseIncludesKitchen?"toggle-btn--active":""),onClick:()=>o("poolHouseIncludesKitchen",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn toggle-btn--small ".concat(r.poolHouseIncludesKitchen?"":"toggle-btn--active"),onClick:()=>o("poolHouseIncludesKitchen",!1),children:"No"})]})]})]})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Timeline & Complexity"}),(0,E.jsx)(ae,{label:"Target Timeline",value:r.timeline,onChange:e=>o("timeline",e),options:[{value:"urgent",label:"Urgent (< 12 months)"},{value:"12-18mo",label:"12-18 Months"},{value:"18-24mo",label:"18-24 Months"},{value:"24plus",label:"24+ Months"}],placeholder:"Select timeline...",required:!0}),"mvp"!==n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Complexity Factors"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"12px"},children:"Select all that apply - these affect team selection and timeline"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"historic",label:"Historic Preservation"},{value:"regulatory",label:"Complex Regulatory Environment"},{value:"phased",label:"Phased Construction"},{value:"remote",label:"Remote/Difficult Access Site"},{value:"coastal",label:"Coastal/Flood Zone"},{value:"hillside",label:"Steep Hillside"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.complexityFactors||[]).includes(e.value)?"chip--selected":""),onClick:()=>(e=>{const t=r.complexityFactors||[],n=t.includes(e)?t.filter(t=>t!==e):[...t,e];o("complexityFactors",n)})(e.value),children:e.label},e.value))})]}),(0,E.jsx)(ae,{label:"Architectural Integration Level",value:r.architecturalIntegration,onChange:e=>o("architecturalIntegration",e),options:[{value:"id-only",label:"Interior Design Only (Architect Separate)"},{value:"shell-coord",label:"Shell & Core Coordination"},{value:"full-arch",label:"Full Architectural Services Needed"}],placeholder:"Select integration level...",helpText:"Do you need a full architect, or just interior design?"}),(0,E.jsx)(ae,{label:"Local Knowledge Criticality",value:r.localKnowledgeCritical,onChange:e=>o("localKnowledgeCritical",e),options:[{value:"critical",label:"Critical - Complex Permitting/Design Review"},{value:"standard",label:"Standard - Some Local Expertise Needed"},{value:"not-needed",label:"Not Critical - Straightforward Jurisdiction"}],placeholder:"How important is local expertise?",helpText:"Affects geographic requirements for architect/designer"})]})]})]})},se=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=H(),r=a[t].budgetFramework,o=(e,n)=>{i(t,"budgetFramework",{[e]:n})},s=a[t].projectParameters,l=r.interiorBudget&&s.targetGSF?Math.round(r.interiorBudget/s.targetGSF):null;return(0,E.jsxs)("div",{className:"kyc-section",children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Project Budget"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Understanding your budget parameters helps us match you with appropriately calibrated professionals."}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"Total Project Budget",type:"number",value:r.totalProjectBudget,onChange:e=>o("totalProjectBudget",parseInt(e)||null),placeholder:"All-in including contingency",helpText:"USD - Total construction + soft costs",min:0,required:!0}),(0,E.jsx)(ne,{label:"Interior Budget (ID + FF&E)",type:"number",value:r.interiorBudget,onChange:e=>o("interiorBudget",parseInt(e)||null),placeholder:"Interior design + furnishings",helpText:"Subset of total budget",min:0,required:!0})]}),l&&(0,E.jsxs)("div",{className:"budget-insight",children:[(0,E.jsx)("span",{className:"budget-insight__label",children:"Calculated Interior Budget per SF:"}),(0,E.jsxs)("span",{className:"budget-insight__value",children:["$",l,"/SF"]}),(0,E.jsxs)("span",{className:"budget-insight__context",children:[l<300&&"(Entry Luxury)",l>=300&&l<500&&"(Mid Luxury)",l>=500&&l<800&&"(High Luxury)",l>=800&&l<1200&&"(Ultra Luxury)",l>=1200&&"(Bespoke / Museum Quality)"]})]}),"mvp"!==n&&(0,E.jsx)(ne,{label:"Per-SF Expectation (Override)",type:"number",value:r.perSFExpectation,onChange:e=>o("perSFExpectation",parseInt(e)||null),placeholder:"If different from calculated",helpText:"Leave blank to use calculated value",min:0})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Budget Philosophy"}),(0,E.jsx)(ae,{label:"Budget Flexibility",value:r.budgetFlexibility,onChange:e=>o("budgetFlexibility",e),options:[{value:"fixed",label:"Fixed Ceiling - Cannot Exceed"},{value:"flexible",label:"Flexible - Some Room for Quality"},{value:"investment",label:"Investment-Appropriate - Value Matters More Than Cost"}],placeholder:"Select your approach...",required:!0,helpText:"This affects how aggressively we optimize for value vs. cost"})]}),"mvp"!==n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Fee Structure Preferences"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Different fee structures suit different project types and client preferences."}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ae,{label:"Architect Fee Structure",value:r.architectFeeStructure,onChange:e=>o("architectFeeStructure",e),options:[{value:"fixed",label:"Fixed Fee"},{value:"percentage",label:"Percentage of Construction Cost"},{value:"hourly",label:"Hourly Billing"},{value:"hybrid",label:"Hybrid (Fixed + Percentage)"},{value:"no-preference",label:"No Strong Preference"}],placeholder:"How do you prefer to pay the architect?"}),(0,E.jsx)(ae,{label:"Interior Designer Fee Structure",value:r.interiorDesignerFeeStructure,onChange:e=>o("interiorDesignerFeeStructure",e),options:[{value:"fixed",label:"Fixed Fee"},{value:"percentage",label:"Percentage of Project Cost"},{value:"hourly",label:"Hourly Billing"},{value:"cost-plus",label:"Cost-Plus (Markup on Purchases)"},{value:"hybrid",label:"Hybrid (Fixed + Cost-Plus)"},{value:"no-preference",label:"No Strong Preference"}],placeholder:"How do you prefer to pay the ID?"})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Interior Quality Tier"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Select the quality tier that best represents your expectations for materials and craftsmanship."}),(0,E.jsx)("div",{className:"quality-tier-cards",children:[{value:"select",label:"Select",subtitle:"The Curated Standard",description:"Every material and finish selected for aesthetic harmony and durability. A sophisticated, complete experience for those who value refined design without extensive customization."},{value:"reserve",label:"Reserve",subtitle:"Exceptional Materials",description:"Features finishes sourced from specialized production\u2014hand-selected stone and artisanal millwork chosen for unique qualities. For clients who desire a distinctly personal home."},{value:"signature",label:"Signature",subtitle:"Bespoke Design",description:"Custom-engineered solutions and unique design elements tailored to a specific lifestyle. Each space features hallmarks of world-class craftsmanship."},{value:"legacy",label:"Legacy",subtitle:"Enduring Heritage",description:"The pinnacle of the program. High-quality sustainable materials and advanced technologies. Designed to endure as a generational asset maintaining prestige for the future."}].map(e=>(0,E.jsxs)("div",{className:"quality-tier-card ".concat(r.interiorQualityTier===e.value?"quality-tier-card--selected":""),onClick:()=>o("interiorQualityTier",e.value),children:[(0,E.jsxs)("div",{className:"quality-tier-card__header",children:[(0,E.jsx)("span",{className:"quality-tier-card__number",children:"select"===e.value?"I":"reserve"===e.value?"II":"signature"===e.value?"III":"IV"}),(0,E.jsx)("span",{className:"quality-tier-card__label",children:e.label})]}),(0,E.jsx)("span",{className:"quality-tier-card__subtitle",children:e.subtitle}),(0,E.jsx)("p",{className:"quality-tier-card__description",children:e.description})]},e.value))})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Art Budget"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Separate Art Budget?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Some clients allocate art acquisition separately from interior design"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.artBudgetSeparate?"toggle-btn--active":""),onClick:()=>o("artBudgetSeparate",!0),children:"Yes, Separate"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.artBudgetSeparate?"":"toggle-btn--active"),onClick:()=>o("artBudgetSeparate",!1),children:"No, Included"})]})]}),r.artBudgetSeparate&&(0,E.jsx)(ne,{label:"Art Budget Amount",type:"number",value:r.artBudgetAmount,onChange:e=>o("artBudgetAmount",parseInt(e)||null),placeholder:"Separate art acquisition budget",min:0})]})]})]})};var le=n(2284),ce=Uint8Array,de=Uint16Array,ue=Int32Array,he=new ce([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pe=new ce([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fe=new ce([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),me=function(e,t){for(var n=new de(31),a=0;a<31;++a)n[a]=t+=1<<e[a-1];var i=new ue(n[30]);for(a=1;a<30;++a)for(var r=n[a];r<n[a+1];++r)i[r]=r-n[a]<<5|a;return{b:n,r:i}},ge=me(he,2),ve=ge.b,ye=ge.r;ve[28]=258,ye[258]=28;for(var be=me(pe,0),xe=be.b,Se=be.r,_e=new de(32768),we=0;we<32768;++we){var Ne=(43690&we)>>1|(21845&we)<<1;Ne=(61680&(Ne=(52428&Ne)>>2|(13107&Ne)<<2))>>4|(3855&Ne)<<4,_e[we]=((65280&Ne)>>8|(255&Ne)<<8)>>1}var ke=function(e,t,n){for(var a=e.length,i=0,r=new de(t);i<a;++i)e[i]&&++r[e[i]-1];var o,s=new de(t);for(i=1;i<t;++i)s[i]=s[i-1]+r[i-1]<<1;if(n){o=new de(1<<t);var l=15-t;for(i=0;i<a;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],u=s[e[i]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)o[_e[u]>>l]=c}else for(o=new de(a),i=0;i<a;++i)e[i]&&(o[i]=_e[s[e[i]-1]++]>>15-e[i]);return o},Ce=new ce(288);for(we=0;we<144;++we)Ce[we]=8;for(we=144;we<256;++we)Ce[we]=9;for(we=256;we<280;++we)Ce[we]=7;for(we=280;we<288;++we)Ce[we]=8;var je=new ce(32);for(we=0;we<32;++we)je[we]=5;var Pe=ke(Ce,9,0),Ae=ke(Ce,9,1),Le=ke(je,5,0),Fe=ke(je,5,1),Ie=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Re=function(e,t,n){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(7&t)&n},Ee=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Me=function(e){return(e+7)/8|0},Te=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new ce(e.subarray(t,n))},De=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oe=function(e,t,n){var a=new Error(t||De[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Oe),!n)throw a;return a},Be=function(e,t,n,a){var i=e.length,r=a?a.length:0;if(!i||t.f&&!t.l)return n||new ce(0);var o=!n,s=o||2!=t.i,l=t.i;o&&(n=new ce(3*i));var c=function(e){var t=n.length;if(e>t){var a=new ce(Math.max(2*t,e));a.set(n),n=a}},d=t.f||0,u=t.p||0,h=t.b||0,p=t.l,f=t.d,m=t.m,g=t.n,v=8*i;do{if(!p){d=Re(e,u,1);var y=Re(e,u+1,3);if(u+=3,!y){var b=e[(L=Me(u)+4)-4]|e[L-3]<<8,x=L+b;if(x>i){l&&Oe(0);break}s&&c(h+b),n.set(e.subarray(L,x),h),t.b=h+=b,t.p=u=8*x,t.f=d;continue}if(1==y)p=Ae,f=Fe,m=9,g=5;else if(2==y){var S=Re(e,u,31)+257,_=Re(e,u+10,15)+4,w=S+Re(e,u+5,31)+1;u+=14;for(var N=new ce(w),k=new ce(19),C=0;C<_;++C)k[fe[C]]=Re(e,u+3*C,7);u+=3*_;var j=Ie(k),P=(1<<j)-1,A=ke(k,j,1);for(C=0;C<w;){var L,F=A[Re(e,u,P)];if(u+=15&F,(L=F>>4)<16)N[C++]=L;else{var I=0,R=0;for(16==L?(R=3+Re(e,u,3),u+=2,I=N[C-1]):17==L?(R=3+Re(e,u,7),u+=3):18==L&&(R=11+Re(e,u,127),u+=7);R--;)N[C++]=I}}var E=N.subarray(0,S),M=N.subarray(S);m=Ie(E),g=Ie(M),p=ke(E,m,1),f=ke(M,g,1)}else Oe(1);if(u>v){l&&Oe(0);break}}s&&c(h+131072);for(var T=(1<<m)-1,D=(1<<g)-1,O=u;;O=u){var B=(I=p[Ee(e,u)&T])>>4;if((u+=15&I)>v){l&&Oe(0);break}if(I||Oe(2),B<256)n[h++]=B;else{if(256==B){O=u,p=null;break}var z=B-254;if(B>264){var q=he[C=B-257];z=Re(e,u,(1<<q)-1)+ve[C],u+=q}var H=f[Ee(e,u)&D],G=H>>4;H||Oe(3),u+=15&H;M=xe[G];if(G>3){q=pe[G];M+=Ee(e,u)&(1<<q)-1,u+=q}if(u>v){l&&Oe(0);break}s&&c(h+131072);var U=h+z;if(h<M){var W=r-M,V=Math.min(M,U);for(W+h<0&&Oe(3);h<V;++h)n[h]=a[W+h]}for(;h<U;++h)n[h]=n[h-M]}}t.l=p,t.p=O,t.b=h,t.f=d,p&&(d=1,t.m=m,t.d=f,t.n=g)}while(!d);return h!=n.length&&o?Te(n,0,h):n.subarray(0,h)},ze=function(e,t,n){n<<=7&t;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8},qe=function(e,t,n){n<<=7&t;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8,e[a+2]|=n>>16},He=function(e,t){for(var n=[],a=0;a<e.length;++a)e[a]&&n.push({s:a,f:e[a]});var i=n.length,r=n.slice();if(!i)return{t:Ze,l:0};if(1==i){var o=new ce(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,d=1,u=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};d!=i-1;)s=n[n[c].f<n[u].f?c++:u++],l=n[c!=d&&n[c].f<n[u].f?c++:u++],n[d++]={s:-1,f:s.f+l.f,l:s,r:l};var h=r[0].s;for(a=1;a<i;++a)r[a].s>h&&(h=r[a].s);var p=new de(h+1),f=Ge(n[d-1],p,0);if(f>t){a=0;var m=0,g=f-t,v=1<<g;for(r.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});a<i;++a){var y=r[a].s;if(!(p[y]>t))break;m+=v-(1<<f-p[y]),p[y]=t}for(m>>=g;m>0;){var b=r[a].s;p[b]<t?m-=1<<t-p[b]++-1:++a}for(;a>=0&&m;--a){var x=r[a].s;p[x]==t&&(--p[x],++m)}f=t}return{t:new ce(p),l:f}},Ge=function(e,t,n){return-1==e.s?Math.max(Ge(e.l,t,n+1),Ge(e.r,t,n+1)):t[e.s]=n},Ue=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new de(++t),a=0,i=e[0],r=1,o=function(e){n[a++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++r;else{if(!i&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(i),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(i);r=1,i=e[s]}return{c:n.subarray(0,a),n:t}},We=function(e,t){for(var n=0,a=0;a<t.length;++a)n+=e[a]*t[a];return n},Ve=function(e,t,n){var a=n.length,i=Me(t+2);e[i]=255&a,e[i+1]=a>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var r=0;r<a;++r)e[i+r+4]=n[r];return 8*(i+4+a)},Ke=function(e,t,n,a,i,r,o,s,l,c,d){ze(t,d++,n),++i[256];for(var u=He(i,15),h=u.t,p=u.l,f=He(r,15),m=f.t,g=f.l,v=Ue(h),y=v.c,b=v.n,x=Ue(m),S=x.c,_=x.n,w=new de(19),N=0;N<y.length;++N)++w[31&y[N]];for(N=0;N<S.length;++N)++w[31&S[N]];for(var k=He(w,7),C=k.t,j=k.l,P=19;P>4&&!C[fe[P-1]];--P);var A,L,F,I,R=c+5<<3,E=We(i,Ce)+We(r,je)+o,M=We(i,h)+We(r,m)+o+14+3*P+We(w,C)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&R<=E&&R<=M)return Ve(t,d,e.subarray(l,l+c));if(ze(t,d,1+(M<E)),d+=2,M<E){A=ke(h,p,0),L=h,F=ke(m,g,0),I=m;var T=ke(C,j,0);ze(t,d,b-257),ze(t,d+5,_-1),ze(t,d+10,P-4),d+=14;for(N=0;N<P;++N)ze(t,d+3*N,C[fe[N]]);d+=3*P;for(var D=[y,S],O=0;O<2;++O){var B=D[O];for(N=0;N<B.length;++N){var z=31&B[N];ze(t,d,T[z]),d+=C[z],z>15&&(ze(t,d,B[N]>>5&127),d+=B[N]>>12)}}}else A=Pe,L=Ce,F=Le,I=je;for(N=0;N<s;++N){var q=a[N];if(q>255){qe(t,d,A[(z=q>>18&31)+257]),d+=L[z+257],z>7&&(ze(t,d,q>>23&31),d+=he[z]);var H=31&q;qe(t,d,F[H]),d+=I[H],H>3&&(qe(t,d,q>>5&8191),d+=pe[H])}else qe(t,d,A[q]),d+=L[q]}return qe(t,d,A[256]),d+L[256]},Ye=new ue([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ze=new ce(0),$e=function(e,t,n,a,i,r){var o=r.z||e.length,s=new ce(a+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(a,s.length-i),c=r.l,d=7&(r.r||0);if(t){d&&(l[0]=r.r>>3);for(var u=Ye[t-1],h=u>>13,p=8191&u,f=(1<<n)-1,m=r.p||new de(32768),g=r.h||new de(f+1),v=Math.ceil(n/3),y=2*v,b=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<y)&f},x=new ue(25e3),S=new de(288),_=new de(32),w=0,N=0,k=r.i||0,C=0,j=r.w||0,P=0;k+2<o;++k){var A=b(k),L=32767&k,F=g[A];if(m[L]=F,g[A]=L,j<=k){var I=o-k;if((w>7e3||C>24576)&&(I>423||!c)){d=Ke(e,l,0,x,S,_,N,C,P,k-P,d),C=w=N=0,P=k;for(var R=0;R<286;++R)S[R]=0;for(R=0;R<30;++R)_[R]=0}var E=2,M=0,T=p,D=L-F&32767;if(I>2&&A==b(k-D))for(var O=Math.min(h,I)-1,B=Math.min(32767,k),z=Math.min(258,I);D<=B&&--T&&L!=F;){if(e[k+E]==e[k+E-D]){for(var q=0;q<z&&e[k+q]==e[k+q-D];++q);if(q>E){if(E=q,M=D,q>O)break;var H=Math.min(D,q-2),G=0;for(R=0;R<H;++R){var U=k-D+R&32767,W=U-m[U]&32767;W>G&&(G=W,F=U)}}}D+=(L=F)-(F=m[L])&32767}if(M){x[C++]=268435456|ye[E]<<18|Se[M];var V=31&ye[E],K=31&Se[M];N+=he[V]+pe[K],++S[257+V],++_[K],j=k+E,++w}else x[C++]=e[k],++S[e[k]]}}for(k=Math.max(k,j);k<o;++k)x[C++]=e[k],++S[e[k]];d=Ke(e,l,c,x,S,_,N,C,P,k-P,d),c||(r.r=7&d|l[d/8|0]<<3,d-=7,r.h=g,r.p=m,r.i=k,r.w=j)}else{for(k=r.w||0;k<o+c;k+=65535){var Y=k+65535;Y>=o&&(l[d/8|0]=c,Y=o),d=Ve(l,d+1,e.subarray(k,Y))}r.i=o}return Te(s,0,a+Me(d)+i)},Qe=function(){var e=1,t=0;return{p:function(n){for(var a=e,i=t,r=0|n.length,o=0;o!=r;){for(var s=Math.min(o+2655,r);o<s;++o)i+=a+=n[o];a=(65535&a)+15*(a>>16),i=(65535&i)+15*(i>>16)}e=a,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},Je=function(e,t,n,a,i){if(!i&&(i={l:1},t.dictionary)){var r=t.dictionary.subarray(-32768),o=new ce(r.length+e.length);o.set(r),o.set(e,r.length),e=o,i.w=r.length}return $e(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,a,i)},Xe=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},et=function(e,t){var n=t.level,a=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=Qe();i.p(t.dictionary),Xe(e,2,i.d())}},tt=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Oe(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Oe(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function nt(e,t){t||(t={});var n=Qe();n.p(e);var a=Je(e,t,t.dictionary?6:2,4);return et(a,t),Xe(a,a.length-4,n.d()),a}function at(e,t){return Be(e.subarray(tt(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var it="undefined"!=typeof TextDecoder&&new TextDecoder;try{it.decode(Ze,{stream:!0})}catch(ph){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var rt=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function ot(){rt.console&&"function"==typeof rt.console.log&&rt.console.log.apply(rt.console,arguments)}var st={log:ot,warn:function(e){rt.console&&("function"==typeof rt.console.warn?rt.console.warn.apply(rt.console,arguments):ot.call(null,arguments))},error:function(e){rt.console&&("function"==typeof rt.console.error?rt.console.error.apply(rt.console,arguments):ot(e))}};function lt(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){pt(a.response,t,n)},a.onerror=function(){st.error("could not download file")},a.send()}function ct(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function dt(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ut,ht,pt=rt.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,le.A)(window))||window!==rt?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var a=rt.URL||rt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?ct(i.href)?lt(e,t,n):dt(i,i.target="_blank"):dt(i)):(i.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){dt(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(ct(e))lt(e,t,n);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){dt(a)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,le.A)(t)&&(st.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return lt(e,t,n);var i="application/octet-stream"===e.type,r=/constructor/i.test(rt.HTMLElement)||rt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&r)&&"object"===("undefined"==typeof FileReader?"undefined":(0,le.A)(FileReader))){var s=new FileReader;s.onloadend=function(){var e=s.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},s.readAsDataURL(e)}else{var l=rt.URL||rt.webkitURL,c=l.createObjectURL(e);a?a.location=c:location.href=c,a=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function ft(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],a=0;a<n.length;a++){var i=n[a].re,r=n[a].process,o=i.exec(e);o&&(t=r(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function mt(e,t){var n=e[0],a=e[1],i=e[2],r=e[3];n=vt(n,a,i,r,t[0],7,-680876936),r=vt(r,n,a,i,t[1],12,-389564586),i=vt(i,r,n,a,t[2],17,606105819),a=vt(a,i,r,n,t[3],22,-1044525330),n=vt(n,a,i,r,t[4],7,-176418897),r=vt(r,n,a,i,t[5],12,1200080426),i=vt(i,r,n,a,t[6],17,-1473231341),a=vt(a,i,r,n,t[7],22,-45705983),n=vt(n,a,i,r,t[8],7,1770035416),r=vt(r,n,a,i,t[9],12,-1958414417),i=vt(i,r,n,a,t[10],17,-42063),a=vt(a,i,r,n,t[11],22,-1990404162),n=vt(n,a,i,r,t[12],7,1804603682),r=vt(r,n,a,i,t[13],12,-40341101),i=vt(i,r,n,a,t[14],17,-1502002290),n=yt(n,a=vt(a,i,r,n,t[15],22,1236535329),i,r,t[1],5,-165796510),r=yt(r,n,a,i,t[6],9,-1069501632),i=yt(i,r,n,a,t[11],14,643717713),a=yt(a,i,r,n,t[0],20,-373897302),n=yt(n,a,i,r,t[5],5,-701558691),r=yt(r,n,a,i,t[10],9,38016083),i=yt(i,r,n,a,t[15],14,-660478335),a=yt(a,i,r,n,t[4],20,-405537848),n=yt(n,a,i,r,t[9],5,568446438),r=yt(r,n,a,i,t[14],9,-1019803690),i=yt(i,r,n,a,t[3],14,-187363961),a=yt(a,i,r,n,t[8],20,1163531501),n=yt(n,a,i,r,t[13],5,-1444681467),r=yt(r,n,a,i,t[2],9,-51403784),i=yt(i,r,n,a,t[7],14,1735328473),n=bt(n,a=yt(a,i,r,n,t[12],20,-1926607734),i,r,t[5],4,-378558),r=bt(r,n,a,i,t[8],11,-2022574463),i=bt(i,r,n,a,t[11],16,1839030562),a=bt(a,i,r,n,t[14],23,-35309556),n=bt(n,a,i,r,t[1],4,-1530992060),r=bt(r,n,a,i,t[4],11,1272893353),i=bt(i,r,n,a,t[7],16,-155497632),a=bt(a,i,r,n,t[10],23,-1094730640),n=bt(n,a,i,r,t[13],4,681279174),r=bt(r,n,a,i,t[0],11,-358537222),i=bt(i,r,n,a,t[3],16,-722521979),a=bt(a,i,r,n,t[6],23,76029189),n=bt(n,a,i,r,t[9],4,-640364487),r=bt(r,n,a,i,t[12],11,-421815835),i=bt(i,r,n,a,t[15],16,530742520),n=xt(n,a=bt(a,i,r,n,t[2],23,-995338651),i,r,t[0],6,-198630844),r=xt(r,n,a,i,t[7],10,1126891415),i=xt(i,r,n,a,t[14],15,-1416354905),a=xt(a,i,r,n,t[5],21,-57434055),n=xt(n,a,i,r,t[12],6,1700485571),r=xt(r,n,a,i,t[3],10,-1894986606),i=xt(i,r,n,a,t[10],15,-1051523),a=xt(a,i,r,n,t[1],21,-2054922799),n=xt(n,a,i,r,t[8],6,1873313359),r=xt(r,n,a,i,t[15],10,-30611744),i=xt(i,r,n,a,t[6],15,-1560198380),a=xt(a,i,r,n,t[13],21,1309151649),n=xt(n,a,i,r,t[4],6,-145523070),r=xt(r,n,a,i,t[11],10,-1120210379),i=xt(i,r,n,a,t[2],15,718787259),a=xt(a,i,r,n,t[9],21,-343485551),e[0]=Pt(n,e[0]),e[1]=Pt(a,e[1]),e[2]=Pt(i,e[2]),e[3]=Pt(r,e[3])}function gt(e,t,n,a,i,r){return t=Pt(Pt(t,e),Pt(a,r)),Pt(t<<i|t>>>32-i,n)}function vt(e,t,n,a,i,r,o){return gt(t&n|~t&a,e,t,i,r,o)}function yt(e,t,n,a,i,r,o){return gt(t&a|n&~a,e,t,i,r,o)}function bt(e,t,n,a,i,r,o){return gt(t^n^a,e,t,i,r,o)}function xt(e,t,n,a,i,r,o){return gt(n^(t|~a),e,t,i,r,o)}function St(e){var t,n=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)mt(a,_t(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(mt(a,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,mt(a,i),a}function _t(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}ut=rt.atob.bind(rt),ht=rt.btoa.bind(rt);var wt="0123456789abcdef".split("");function Nt(e){for(var t="",n=0;n<4;n++)t+=wt[e>>8*n+4&15]+wt[e>>8*n&15];return t}function kt(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Ct(e){return St(e).map(kt).join("")}var jt="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=Nt(e[t]);return e.join("")}(St("hello"));function Pt(e,t){if(jt){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function At(e,t){var n,a,i,r;if(e!==n){for(var o=(i=e,r=1+(256/e.length|0),new Array(r+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var d=s[l];c=(c+d+o.charCodeAt(l))%256,s[l]=s[c],s[c]=d}n=e,a=s}else s=a;var u=t.length,h=0,p=0,f="";for(l=0;l<u;l++)p=(p+(d=s[h=(h+1)%256]))%256,s[h]=s[p],s[p]=d,o=s[(s[h]+s[p])%256],f+=String.fromCharCode(t.charCodeAt(l)^o);return f}var Lt={print:4,modify:8,copy:16,"annot-forms":32};function Ft(e,t,n,a){this.v=1,this.r=2;var i=192;e.forEach(function(e){if(void 0!==Lt.perm)throw new Error("Invalid permission: "+e);i+=Lt[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var r=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,o),this.P=-(1+(255^i)),this.encryptionKey=Ct(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=At(this.encryptionKey,this.padding)}function It(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,a=0;a<n;a++){var i=e.charCodeAt(a);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[a]}return t}function Rt(e){if("object"!==(0,le.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,a){if(a=a||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof a)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!a],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var a=Array.prototype.slice.call(arguments,1),i=[];for(var r in t[n]){var o=t[n][r];try{o[0].apply(e,a)}catch(n){rt.console&&st.error("jsPDF PubSub Error",n.message,n)}o[1]&&i.push(r)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Et(e){if(!(this instanceof Et))return new Et(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Mt(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Tt(e,t,n,a,i){if(!(this instanceof Tt))return new Tt(e,t,n,a,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Mt.call(this,a,i)}function Dt(e,t,n,a,i){if(!(this instanceof Dt))return new Dt(e,t,n,a,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Mt.call(this,a,i)}function Ot(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",a=arguments[1],i=arguments[2],r=arguments[3],o=[],s=1,l=16,c="S",d=null;"object"===(0,le.A)(e=e||{})&&(n=e.orientation,a=e.unit||a,i=e.format||i,r=e.compress||e.compressPdf||r,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),s="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),o=e.filters||(!0===r?["FlateEncode"]:o),a=a||"mm",n=(""+(n||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=Rt;var f="1.3",m=p.__private__.getPdfVersion=function(){return f};p.__private__.setPdfVersion=function(e){f=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return g};var v=p.__private__.getPageFormat=function(e){return g[e]};i=i||"a4";var y="compat",b="advanced",x=y;function S(){this.saveGraphicsState(),Q(new Ie(pe,0,0,-pe,0,wn()*pe).toString()+" cm"),this.setFontSize(this.getFontSize()/pe),c="n",x=b}function _(){this.restoreGraphicsState(),c="S",x=y}var w=p.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};p.advancedAPI=function(e){var t=x===y;return t&&S.call(this),"function"!=typeof e||(e(this),t&&_.call(this)),this},p.compatAPI=function(e){var t=x===b;return t&&_.call(this),"function"!=typeof e||(e(this),t&&S.call(this)),this},p.isAdvancedAPI=function(){return x===b};var N,k=function(e){if(x!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=p.roundToPrecision=p.__private__.roundToPrecision=function(e,n){var a=t||n;if(isNaN(e)||isNaN(a))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(a).replace(/0+$/,"")};N=p.hpf=p.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return C(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return C(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return C(e,16)};var j=p.f2=p.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return C(e,2)},P=p.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return C(e,3)},A=p.scale=p.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return x===y?e*pe:x===b?e:void 0},L=function(e){return A(function(e){return x===y?wn()-e:x===b?e:void 0}(e))};p.__private__.setPrecision=p.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var F,I="00000000000000000000000000000000",R=p.__private__.getFileId=function(){return I},E=p.__private__.setFileId=function(e){return I=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():I.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(kt=new Ft(d.userPermissions,d.userPassword,d.ownerPassword,I)),I};p.setFileId=function(e){return E(e),this},p.getFileId=function(){return R()};var M=p.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",a=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),r=[n,z(a),"'",z(i),"'"].join("");return["D:",e.getFullYear(),z(e.getMonth()+1),z(e.getDate()),z(e.getHours()),z(e.getMinutes()),z(e.getSeconds()),r].join("")},T=p.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,a=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),r=parseInt(e.substr(12,2),10),o=parseInt(e.substr(14,2),10);return new Date(t,n,a,i,r,o,0)},D=p.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=M(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return F=t},O=p.__private__.getCreationDate=function(e){var t=F;return"jsDate"===e&&(t=T(F)),t};p.setCreationDate=function(e){return D(e),this},p.getCreationDate=function(e){return O(e)};var B,z=p.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},q=p.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,G=[],U=[],W=0,V=[],K=[],Y=!1,Z=U;p.__private__.setCustomOutputDestination=function(e){Y=!0,Z=e};var $=function(e){Y||(Z=e)};p.__private__.resetCustomOutputDestination=function(){Y=!1,Z=U};var Q=p.__private__.out=function(e){return e=e.toString(),W+=e.length+1,Z.push(e),Z},J=p.__private__.write=function(e){return Q(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},X=p.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),a=new Uint8Array(n);t--;)a[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(e){return te=x===b?e/pe:e,this};var ne,ae=p.__private__.getFontSize=p.getFontSize=function(){return x===y?te:te*pe},ie=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(e){return ie=e,this},p.__private__.getR2L=p.getR2L=function(){return ie};var re,oe=p.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};p.__private__.getZoomMode=function(){return ne};var se,ce=p.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');re=e};p.__private__.getPageMode=function(){return re};var de=p.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');se=e};p.__private__.getLayoutMode=function(){return se},p.__private__.setDisplayMode=p.setDisplayMode=function(e,t,n){return oe(e),de(t),ce(n),this};var ue={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ue[e]},p.__private__.getDocumentProperties=function(){return ue},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(e){for(var t in ue)ue.hasOwnProperty(t)&&e[t]&&(ue[t]=e[t]);return this},p.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ue[e]=t};var he,pe,fe,me,ge,ve={},ye={},be=[],xe={},Se={},_e={},we={},Ne=null,ke=0,Ce=[],je=new Rt(p),Pe=e.hotfixes||[],Ae={},Le={},Fe=[],Ie=function e(t,n,a,i,r,o){if(!(this instanceof e))return new e(t,n,a,i,r,o);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(a)&&(a=0),isNaN(i)&&(i=1),isNaN(r)&&(r=0),isNaN(o)&&(o=0),this._matrix=[t,n,a,i,r,o]};Object.defineProperty(Ie.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ie.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ie.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ie.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ie.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ie.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ie.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ie.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ie.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ie.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ie.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ie.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ie.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ie.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ie.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ie.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ie.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(e)},Ie.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,a=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,r=e.tx*this.sx+e.ty*this.shx+this.tx,o=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ie(t,n,a,i,r,o)},Ie.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,i=this.tx,r=this.ty,o=Math.sqrt(e*e+t*t),s=(e/=o)*n+(t/=o)*a;n-=e*s,a-=t*s;var l=Math.sqrt(n*n+a*a);return s/=l,e*(a/=l)<t*(n/=l)&&(e=-e,t=-t,s=-s,o=-o),{scale:new Ie(o,0,0,l,0,0),translate:new Ie(1,0,0,1,i,r),rotate:new Ie(e,t,-t,e,0,0),skew:new Ie(1,0,s,1,0,0)}},Ie.prototype.toString=function(e){return this.join(" ")},Ie.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,i=this.tx,r=this.ty,o=1/(e*a-t*n),s=a*o,l=-t*o,c=-n*o,d=e*o;return new Ie(s,l,c,d,-s*i-c*r,-l*i-d*r)},Ie.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new gn(t,n)},Ie.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new gn(e.x+e.w,e.y+e.h));return new vn(t.x,t.y,n.x-t.x,n.y-t.y)},Ie.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,i=this.tx,r=this.ty;return new Ie(e,t,n,a,i,r)},p.Matrix=Ie;var Re=p.matrixMult=function(e,t){return t.multiply(e)},Ee=new Ie(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ee;var Me=function(e,t){if(!Se[e]){var n=(t instanceof Tt?"Sh":"P")+(Object.keys(xe).length+1).toString(10);t.id=n,Se[e]=n,xe[n]=t,je.publish("addPattern",t)}};p.ShadingPattern=Tt,p.TilingPattern=Dt,p.addShadingPattern=function(e,t){return k("addShadingPattern()"),Me(e,t),this},p.beginTilingPattern=function(e){k("beginTilingPattern()"),bn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},p.endTilingPattern=function(e,t){k("endTilingPattern()"),t.stream=K[B].join("\n"),Me(e,t),je.publish("endTilingPattern",t),Fe.pop().restore()};var Te,De=p.__private__.newObject=function(){var e=Oe();return Be(e,!0),e},Oe=p.__private__.newObjectDeferred=function(){return H++,G[H]=function(){return W},H},Be=function(e,t){return t="boolean"==typeof t&&t,G[e]=W,t&&Q(e+" 0 obj"),e},ze=p.__private__.newAdditionalObject=function(){var e={objId:Oe(),content:""};return V.push(e),e},qe=Oe(),He=Oe(),Ge=p.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var a="#",i=0;i<3;i++)a+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return a},Ue=p.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,a=e.ch2,i=e.ch3,r=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new ft(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,a=l>>8&255,i=255&l}if(void 0===a||void 0===r&&n===a&&a===i)if("string"==typeof n)t=n+" "+o[0];else if(2===e.precision)t=j(n/255)+" "+o[0];else t=P(n/255)+" "+o[0];else if(void 0===r||"object"===(0,le.A)(r)){if(r&&!isNaN(r.a)&&0===r.a)return["1.","1.","1.",o[1]].join(" ");if("string"==typeof n)t=[n,a,i,o[1]].join(" ");else if(2===e.precision)t=[j(n/255),j(a/255),j(i/255),o[1]].join(" ");else t=[P(n/255),P(a/255),P(i/255),o[1]].join(" ")}else if("string"==typeof n)t=[n,a,i,r,o[2]].join(" ");else if(2===e.precision)t=[j(n),j(a),j(i),j(r),o[2]].join(" ");else t=[P(n),P(a),P(i),P(r),o[2]].join(" ");return t},We=p.__private__.getFilters=function(){return o},Ve=p.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||We(),a=e.alreadyAppliedFilters||[],i=e.addLength1||!1,r=t.length,o=e.objectId,s=function(e){return e};if(null!==d&&void 0===o)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(s=kt.encryptor(o,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==Ot.API.processDataByFilters?Ot.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(a)?a.join(" "):a.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===i&&c.push({key:"Length1",value:r})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var p=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)p.push("null");p.push(c[h].value),c[h].value="["+p.join(" ")+"]"}}Q("<<");for(var m=0;m<c.length;m++)Q("/"+c[m].key+" "+c[m].value);Q(">>"),0!==l.data.length&&(Q("stream"),Q(s(l.data)),Q("endstream"))},Ke=p.__private__.putPage=function(e){var t=e.number,n=e.data,a=e.objId,i=e.contentsObjId;Be(a,!0),Q("<</Type /Page"),Q("/Parent "+e.rootDictionaryObjId+" 0 R"),Q("/Resources "+e.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(N(e.mediaBox.bottomLeftX))+" "+parseFloat(N(e.mediaBox.bottomLeftY))+" "+N(e.mediaBox.topRightX)+" "+N(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Q("/CropBox ["+N(e.cropBox.bottomLeftX)+" "+N(e.cropBox.bottomLeftY)+" "+N(e.cropBox.topRightX)+" "+N(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Q("/BleedBox ["+N(e.bleedBox.bottomLeftX)+" "+N(e.bleedBox.bottomLeftY)+" "+N(e.bleedBox.topRightX)+" "+N(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Q("/TrimBox ["+N(e.trimBox.bottomLeftX)+" "+N(e.trimBox.bottomLeftY)+" "+N(e.trimBox.topRightX)+" "+N(e.trimBox.topRightY)+"]"),null!==e.artBox&&Q("/ArtBox ["+N(e.artBox.bottomLeftX)+" "+N(e.artBox.bottomLeftY)+" "+N(e.artBox.topRightX)+" "+N(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Q("/UserUnit "+e.userUnit),je.publish("putPage",{objId:a,pageContext:Ce[t],pageNumber:t,page:n}),Q("/Contents "+i+" 0 R"),Q(">>"),Q("endobj");var r=n.join("\n");return x===b&&(r+="\nQ"),Be(i,!0),Ve({data:r,filters:We(),objectId:i}),Q("endobj"),a},Ye=p.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=ke;e++)Ce[e].objId=Oe(),Ce[e].contentsObjId=Oe();for(e=1;e<=ke;e++)n.push(Ke({number:e,data:K[e],objId:Ce[e].objId,contentsObjId:Ce[e].contentsObjId,mediaBox:Ce[e].mediaBox,cropBox:Ce[e].cropBox,bleedBox:Ce[e].bleedBox,trimBox:Ce[e].trimBox,artBox:Ce[e].artBox,userUnit:Ce[e].userUnit,rootDictionaryObjId:qe,resourceDictionaryObjId:He}));Be(qe,!0),Q("<</Type /Pages");var a="/Kids [";for(t=0;t<ke;t++)a+=n[t]+" 0 R ";Q(a+"]"),Q("/Count "+ke),Q(">>"),Q("endobj"),je.publish("postPutPages")},Ze=function(e){je.publish("putFont",{font:e,out:Q,newObject:De,putStream:Ve}),!0!==e.isAlreadyPutted&&(e.objectNumber=De(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+It(e.postScriptName)),Q("/Subtype /Type1"),"string"==typeof e.encoding&&Q("/Encoding /"+e.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},$e=function(e){e.objectNumber=De();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[N(e.x),N(e.y),N(e.x+e.width),N(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ve({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Q("endobj")},Qe=function(e,t){t||(t=21);var n=De(),a=function(e,t){var n,a=[],i=1/(t-1);for(n=0;n<1;n+=i)a.push(n);if(a.push(1),0!=e[0].offset){var r={offset:0,color:e[0].color};e.unshift(r)}if(1!=e[e.length-1].offset){var o={offset:1,color:e[e.length-1].color};e.push(o)}for(var s="",l=0,c=0;c<a.length;c++){for(n=a[c];n>e[l+1].offset;)l++;var d=e[l].offset,u=(n-d)/(e[l+1].offset-d),h=e[l].color,p=e[l+1].color;s+=q(Math.round((1-u)*h[0]+u*p[0]).toString(16))+q(Math.round((1-u)*h[1]+u*p[1]).toString(16))+q(Math.round((1-u)*h[2]+u*p[2]).toString(16))}return s.trim()}(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve({data:a,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Q("endobj"),e.objectNumber=De(),Q("<< /ShadingType "+e.type),Q("/ColorSpace /DeviceRGB");var r="/Coords ["+N(parseFloat(e.coords[0]))+" "+N(parseFloat(e.coords[1]))+" ";2===e.type?r+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3])):r+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3]))+" "+N(parseFloat(e.coords[4]))+" "+N(parseFloat(e.coords[5])),Q(r+="]"),e.matrix&&Q("/Matrix ["+e.matrix.toString()+"]"),Q("/Function "+n+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Je=function(e,t){var n=Oe(),a=De();t.push({resourcesOid:n,objectOid:a}),e.objectNumber=a;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(N).join(" ")+"]"}),i.push({key:"XStep",value:N(e.xStep)}),i.push({key:"YStep",value:N(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ve({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),Q("endobj")},Xe=function(e){for(var t in e.objectNumber=De(),Q("<<"),e)switch(t){case"opacity":Q("/ca "+j(e[t]));break;case"stroke-opacity":Q("/CA "+j(e[t]))}Q(">>"),Q("endobj")},et=function(e){Be(e.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Q("/Font <<"),ve)ve.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&Q("/"+e+" "+ve[e].objectNumber+" 0 R");Q(">>")}(),function(){if(Object.keys(xe).length>0){for(var e in Q("/Shading <<"),xe)xe.hasOwnProperty(e)&&xe[e]instanceof Tt&&xe[e].objectNumber>=0&&Q("/"+e+" "+xe[e].objectNumber+" 0 R");je.publish("putShadingPatternDict"),Q(">>")}}(),function(e){if(Object.keys(xe).length>0){for(var t in Q("/Pattern <<"),xe)xe.hasOwnProperty(t)&&xe[t]instanceof p.TilingPattern&&xe[t].objectNumber>=0&&xe[t].objectNumber<e&&Q("/"+t+" "+xe[t].objectNumber+" 0 R");je.publish("putTilingPatternDict"),Q(">>")}}(e.objectOid),function(){if(Object.keys(_e).length>0){var e;for(e in Q("/ExtGState <<"),_e)_e.hasOwnProperty(e)&&_e[e].objectNumber>=0&&Q("/"+e+" "+_e[e].objectNumber+" 0 R");je.publish("putGStateDict"),Q(">>")}}(),function(){for(var e in Q("/XObject <<"),Ae)Ae.hasOwnProperty(e)&&Ae[e].objectNumber>=0&&Q("/"+e+" "+Ae[e].objectNumber+" 0 R");je.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj")},tt=function(){var e=[];(function(){for(var e in ve)ve.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&Ze(ve[e])})(),function(){var e;for(e in _e)_e.hasOwnProperty(e)&&Xe(_e[e])}(),function(){for(var e in Ae)Ae.hasOwnProperty(e)&&$e(Ae[e])}(),function(e){var t;for(t in xe)xe.hasOwnProperty(t)&&(xe[t]instanceof Tt?Qe(xe[t]):xe[t]instanceof Dt&&Je(xe[t],e))}(e),je.publish("putResources"),e.forEach(et),et({resourcesOid:He,objectOid:Number.MAX_SAFE_INTEGER}),je.publish("postPutResources")},nt=function(e){ye[e.fontName]=ye[e.fontName]||{},ye[e.fontName][e.fontStyle]=e.id},at=function(e,t,n,a,i){var r={id:"F"+(Object.keys(ve).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:a,isStandardFont:i||!1,metadata:{}};return je.publish("addFont",{font:r,instance:this}),ve[r.id]=r,nt(r),r.id},it=p.__private__.pdfEscape=p.pdfEscape=function(e,t){return function(e,t){var n,a,i,r,o,s,l,c,d;if(i=(t=t||{}).sourceEncoding||"Unicode",o=t.outputEncoding,(t.autoencode||o)&&ve[he].metadata&&ve[he].metadata[i]&&ve[he].metadata[i].encoding&&(r=ve[he].metadata[i].encoding,!o&&ve[he].encoding&&(o=ve[he].encoding),!o&&r.codePages&&(o=r.codePages[0]),"string"==typeof o&&(o=r[o]),o)){for(l=!1,s=[],n=0,a=e.length;n<a;n++)(c=o[e.charCodeAt(n)])?s.push(String.fromCharCode(c)):s.push(e[n]),s[n].charCodeAt(0)>>8&&(l=!0);e=s.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(s=t.noBOM?[]:[254,255],n=0,a=e.length;n<a;n++){if((d=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(d),s.push(c-(d<<8))}return String.fromCharCode.apply(void 0,s)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ot=p.__private__.beginPage=function(e){K[++ke]=[],Ce[ke]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},dt(ke),$(K[B])},lt=function(e,t){var a,r,o;switch(n=t||n,"string"==typeof e&&(a=v(e.toLowerCase()),Array.isArray(a)&&(r=a[0],o=a[1])),Array.isArray(e)&&(r=e[0]*pe,o=e[1]*pe),isNaN(r)&&(r=i[0],o=i[1]),(r>14400||o>14400)&&(st.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),r=Math.min(14400,r),o=Math.min(14400,o)),i=[r,o],n.substr(0,1)){case"l":o>r&&(i=[o,r]);break;case"p":r>o&&(i=[o,r])}ot(i),Jt($t),Q(sn),0!==pn&&Q(pn+" J"),0!==fn&&Q(fn+" j"),je.publish("addPage",{pageNumber:ke})},ct=function(e){e>0&&e<=ke&&(K.splice(e,1),Ce.splice(e,1),ke--,B>ke&&(B=ke),this.setPage(B))},dt=function(e){e>0&&e<=ke&&(B=e)},ut=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return K.length-1},mt=function(e,t,n){var a,i=void 0;return n=n||{},e=void 0!==e?e:ve[he].fontName,t=void 0!==t?t:ve[he].fontStyle,a=e.toLowerCase(),void 0!==ye[a]&&void 0!==ye[a][t]?i=ye[a][t]:void 0!==ye[e]&&void 0!==ye[e][t]?i=ye[e][t]:!1===n.disableWarning&&st.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=ye.times[t])&&(i=ye.times.normal),i},gt=p.__private__.putInfo=function(){var e=De(),t=function(e){return e};for(var n in null!==d&&(t=kt.encryptor(e,0)),Q("<<"),Q("/Producer ("+it(t("jsPDF "+Ot.version))+")"),ue)ue.hasOwnProperty(n)&&ue[n]&&Q("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+it(t(ue[n]))+")");Q("/CreationDate ("+it(t(F))+")"),Q(">>"),Q("endobj")},vt=p.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||qe;switch(De(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&Q("/OpenAction [3 0 R /XYZ null null "+j(ne)+"]")}switch(se||(se="continuous"),se){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}re&&Q("/PageMode /"+re),je.publish("putCatalog"),Q(">>"),Q("endobj")},yt=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(H+1)),Q("/Root "+H+" 0 R"),Q("/Info "+(H-1)+" 0 R"),null!==d&&Q("/Encrypt "+kt.oid+" 0 R"),Q("/ID [ <"+I+"> <"+I+"> ]"),Q(">>")},bt=p.__private__.putHeader=function(){Q("%PDF-"+f),Q("%\xba\xdf\xac\xe0")},xt=p.__private__.putXRef=function(){var e="0000000000";Q("xref"),Q("0 "+(H+1)),Q("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof G[t]?Q((e+G[t]()).slice(-10)+" 00000 n "):void 0!==G[t]?Q((e+G[t]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},St=p.__private__.buildDocument=function(){H=0,W=0,U=[],G=[],V=[],qe=Oe(),He=Oe(),$(U),je.publish("buildDocument"),bt(),Ye(),function(){je.publish("putAdditionalObjects");for(var e=0;e<V.length;e++){var t=V[e];Be(t.objId,!0),Q(t.content),Q("endobj")}je.publish("postPutAdditionalObjects")}(),tt(),null!==d&&(kt.oid=De(),Q("<<"),Q("/Filter /Standard"),Q("/V "+kt.v),Q("/R "+kt.r),Q("/U <"+kt.toHexString(kt.U)+">"),Q("/O <"+kt.toHexString(kt.O)+">"),Q("/P "+kt.P),Q(">>"),Q("endobj")),gt(),vt();var e=W;return xt(),yt(),Q("startxref"),Q(""+e),Q("%%EOF"),$(K[B]),U.join("\n")},_t=p.__private__.getBlob=function(e){return new Blob([X(e)],{type:"application/pdf"})},wt=p.output=p.__private__.output=(Te=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return St();case"save":p.save(t.filename);break;case"arraybuffer":return X(St());case"blob":return _t(St());case"bloburi":case"bloburl":if(void 0!==rt.URL&&"function"==typeof rt.URL.createObjectURL)return rt.URL&&rt.URL.createObjectURL(_t(St()))||void 0;st.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",a=St();try{n=ht(a)}catch(e){n=ht(unescape(encodeURIComponent(a)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(rt)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",r=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,r="");var o='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+r+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",s=rt.open();return null!==s&&s.document.write(o),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(rt)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=rt.open();if(null!==c){c.document.write(l);var d=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(rt))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=rt.open();if(null!==h&&(h.document.write(u),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return rt.document.location.href=this.output("datauristring",t);default:return null}},Te.foo=function(){try{return Te.apply(this,arguments)}catch(Te){var e=Te.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Te.message;if(!rt.console)throw new Error(t);rt.console.error(t,Te),rt.alert&&alert(t)}},Te.foo.bar=Te,Te.foo),Nt=function(e){return!0===Array.isArray(Pe)&&Pe.indexOf(e)>-1};switch(a){case"pt":pe=1;break;case"mm":pe=72/25.4;break;case"cm":pe=72/2.54;break;case"in":pe=72;break;case"px":pe=1==Nt("px_scaling")?.75:96/72;break;case"pc":case"em":pe=12;break;case"ex":pe=6;break;default:if("number"!=typeof a)throw new Error("Invalid unit: "+a);pe=a}var kt=null;D(),E();var Ct=p.__private__.getPageInfo=p.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ce[e].objId,pageNumber:e,pageContext:Ce[e]}},jt=p.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Ce)if(Ce[t].objId===e)break;return Ct(t)},Pt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ce[B].objId,pageNumber:B,pageContext:Ce[B]}};p.addPage=function(){return lt.apply(this,arguments),this},p.setPage=function(){return dt.apply(this,arguments),$.call(this,K[B]),this},p.insertPage=function(e){return this.addPage(),this.movePage(B,e),this},p.movePage=function(e,t){var n,a;if(e>t){n=K[e],a=Ce[e];for(var i=e;i>t;i--)K[i]=K[i-1],Ce[i]=Ce[i-1];K[t]=n,Ce[t]=a,this.setPage(t)}else if(e<t){n=K[e],a=Ce[e];for(var r=e;r<t;r++)K[r]=K[r+1],Ce[r]=Ce[r+1];K[t]=n,Ce[t]=a,this.setPage(t)}return this},p.deletePage=function(){return ct.apply(this,arguments),this},p.__private__.text=p.text=function(e,t,n,a,i){var r,o,s,l,c,d,u,p,f,m=(a=a||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Ie==0?(s=arguments[4],l=arguments[5],"object"===(0,le.A)(u=arguments[3])&&null!==u||("string"==typeof s&&(l=s,s=null),"string"==typeof u&&(l=u,u=null),"number"==typeof u&&(s=u,u=null),a={flags:u,angle:s,align:l})):(k("The transform parameter of text() with a Matrix value"),f=i),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return m;var v,y="",S="number"==typeof a.lineHeightFactor?a.lineHeightFactor:Zt,_=m.internal.scaleFactor;function w(e){return e=e.split("\t").join(Array(a.TabLen||9).join(" ")),it(e,u)}function C(e){for(var t,n=e.concat(),a=[],i=n.length;i--;)"string"==typeof(t=n.shift())?a.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?a.push(t[0]):a.push([t[0],t[1],t[2]]);return a}function j(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var a,i,r=e.concat(),o=[],s=r.length;s--;)"string"==typeof(a=r.shift())?o.push(t(a)[0]):Array.isArray(a)&&"string"==typeof a[0]&&(i=t(a[0],a[1],a[2]),o.push([i[0],i[1],i[2]]));n=o}return n}var P=!1,L=!0;if("string"==typeof e)P=!0;else if(Array.isArray(e)){var F=e.concat();o=[];for(var I,R=F.length;R--;)("string"!=typeof(I=F.shift())||Array.isArray(I)&&"string"!=typeof I[0])&&(L=!1);P=L}if(!1===P)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var E=te/m.internal.scaleFactor,M=E*(S-1);switch(a.baseline){case"bottom":n-=M;break;case"top":n+=E-M;break;case"hanging":n+=E-2*M;break;case"middle":n+=E/2-M}if((d=a.maxWidth||0)>0&&("string"==typeof e?e=m.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(m.splitTextToSize(t,d))},[]))),r={text:e,x:t,y:n,options:a,mutex:{pdfEscape:it,activeFontKey:he,fonts:ve,activeFontSize:te}},je.publish("preProcessText",r),e=r.text,s=(a=r.options).angle,f instanceof Ie==0&&s&&"number"==typeof s){s*=Math.PI/180,0===a.rotationDirection&&(s=-s),x===b&&(s=-s);var T=Math.cos(s),D=Math.sin(s);f=new Ie(T,D,-D,T,0,0)}else s&&s instanceof Ie&&(f=s);x!==b||f||(f=Ee),void 0!==(c=a.charSpace||un)&&(y+=N(A(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=a.horizontalScale)&&(y+=N(100*p)+" Tz\n"),a.lang;var O=-1,B=void 0!==a.renderingMode?a.renderingMode:a.stroke,z=m.internal.getCurrentPageInfo().pageContext;switch(B){case 0:case!1:case"fill":O=0;break;case 1:case!0:case"stroke":O=1;break;case 2:case"fillThenStroke":O=2;break;case 3:case"invisible":O=3;break;case 4:case"fillAndAddForClipping":O=4;break;case 5:case"strokeAndAddPathForClipping":O=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":O=6;break;case 7:case"addToPathForClipping":O=7}var q=void 0!==z.usedRenderingMode?z.usedRenderingMode:-1;-1!==O?y+=O+" Tr\n":-1!==q&&(y+="0 Tr\n"),-1!==O&&(z.usedRenderingMode=O),l=a.align||"left";var H,G=te*S,U=m.internal.pageSize.getWidth(),W=ve[he];c=a.charSpace||un,d=a.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},a.flags);var V=[],K=function(e){return m.getStringUnitWidth(e,{font:W,charSpace:c,fontSize:te,doKerning:!1})*te/_};if("[object Array]"===Object.prototype.toString.call(e)){var Y;o=C(e),"left"!==l&&(H=o.map(K));var Z,$=0;if("right"===l){t-=H[0],e=[],R=o.length;for(var J=0;J<R;J++)0===J?(Z=nn(t),Y=an(n)):(Z=A($-H[J]),Y=-G),e.push([o[J],Z,Y]),$=H[J]}else if("center"===l){t-=H[0]/2,e=[],R=o.length;for(var X=0;X<R;X++)0===X?(Z=nn(t),Y=an(n)):(Z=A(($-H[X])/2),Y=-G),e.push([o[X],Z,Y]),$=H[X]}else if("left"===l){e=[],R=o.length;for(var ee=0;ee<R;ee++)e.push(o[ee])}else if("justify"===l&&"Identity-H"===W.encoding){e=[],R=o.length,d=0!==d?d:U;for(var ne=0,ae=0;ae<R;ae++)if(Y=0===ae?an(n):-G,Z=0===ae?nn(t):ne,ae<R-1){var re=A((d-H[ae])/(o[ae].split(" ").length-1)),oe=o[ae].split(" ");e.push([oe[0]+" ",Z,Y]),ne=0;for(var se=1;se<oe.length;se++){var ce=(K(oe[se-1]+" "+oe[se])-K(oe[se]))*_+re;se==oe.length-1?e.push([oe[se],ce,0]):e.push([oe[se]+" ",ce,0]),ne-=ce}}else e.push([o[ae],Z,Y]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],R=o.length,d=0!==d?d:U,ae=0;ae<R;ae++)Y=0===ae?an(n):-G,Z=0===ae?nn(t):0,ae<R-1?V.push(N(A((d-H[ae])/(o[ae].split(" ").length-1)))):V.push(0),e.push([o[ae],Z,Y])}}!0===("boolean"==typeof a.R2L?a.R2L:ie)&&(e=j(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),r={text:e,x:t,y:n,options:a,mutex:{pdfEscape:it,activeFontKey:he,fonts:ve,activeFontSize:te}},je.publish("postProcessText",r),e=r.text,v=r.mutex.isHex||!1;var de=ve[he].encoding;"WinAnsiEncoding"!==de&&"StandardEncoding"!==de||(e=j(e,function(e,t,n){return[w(e),t,n]})),o=C(e),e=[];for(var ue,pe,fe,me=Array.isArray(o[0])?1:0,ge="",ye=function(e,t,n){var i="";return n instanceof Ie?(n="number"==typeof a.angle?Re(n,new Ie(1,0,0,1,e,t)):Re(new Ie(1,0,0,1,e,t),n),x===b&&(n=Re(new Ie(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=N(e)+" "+N(t)+" Td\n",i},be=0;be<o.length;be++){switch(ge="",me){case 1:fe=(v?"<":"(")+o[be][0]+(v?">":")"),ue=parseFloat(o[be][1]),pe=parseFloat(o[be][2]);break;case 0:fe=(v?"<":"(")+o[be]+(v?">":")"),ue=nn(t),pe=an(n)}void 0!==V&&void 0!==V[be]&&(ge=V[be]+" Tw\n"),0===be?e.push(ge+ye(ue,pe,f)+fe):0===me?e.push(ge+fe):1===me&&e.push(ge+ye(ue,pe,f)+fe)}e=0===me?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var xe="BT\n/";return xe+=he+" "+te+" Tf\n",xe+=N(te*S)+" TL\n",xe+=cn+"\n",xe+=y,xe+=e,Q(xe+="ET"),h[he]=!0,m};var At=p.__private__.clip=p.clip=function(e){return Q("evenodd"===e?"W*":"W"),this};p.clipEvenOdd=function(){return At("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var Lt=p.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(e){return Lt(e)&&(c=e),this};var Mt=p.__private__.getStyle=p.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Bt=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(e){return zt("f",e),this},p.fillEvenOdd=function(e){return zt("f*",e),this},p.fillStroke=function(e){return zt("B",e),this},p.fillStrokeEvenOdd=function(e){return zt("B*",e),this};var zt=function(e,t){"object"===(0,le.A)(t)?Gt(t,e):Q(e)},qt=function(e){null===e||x===b&&void 0===e||(e=Mt(e),Q(e))};function Ht(e,t,n,a,i){var r=new Dt(t||this.boundingBox,n||this.xStep,a||this.yStep,this.gState,i||this.matrix);r.stream=this.stream;var o=e+"$$"+this.cloneIndex+++"$$";return Me(o,r),r}var Gt=function(e,t){var n=Se[e.key],a=xe[n];if(a instanceof Tt)Q("q"),Q(Ut(t)),a.gState&&p.setGState(a.gState),Q(e.matrix.toString()+" cm"),Q("/"+n+" sh"),Q("Q");else if(a instanceof Dt){var i=new Ie(1,0,0,-1,0,wn());e.matrix&&(i=i.multiply(e.matrix||Ee),n=Ht.call(a,e.key,e.boundingBox,e.xStep,e.yStep,i).id),Q("q"),Q("/Pattern cs"),Q("/"+n+" scn"),a.gState&&p.setGState(a.gState),Q(t),Q("Q")}},Ut=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Wt=p.moveTo=function(e,t){return Q(N(A(e))+" "+N(L(t))+" m"),this},Vt=p.lineTo=function(e,t){return Q(N(A(e))+" "+N(L(t))+" l"),this},Kt=p.curveTo=function(e,t,n,a,i,r){return Q([N(A(e)),N(L(t)),N(A(n)),N(L(a)),N(A(i)),N(L(r)),"c"].join(" ")),this};p.__private__.line=p.line=function(e,t,n,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!Lt(i))throw new Error("Invalid arguments passed to jsPDF.line");return x===y?this.lines([[n-e,a-t]],e,t,[1,1],i||"S"):this.lines([[n-e,a-t]],e,t,[1,1]).stroke()},p.__private__.lines=p.lines=function(e,t,n,a,i,r){var o,s,l,c,d,u,h,p,f,m,g,v;if("number"==typeof e&&(v=n,n=t,t=e,e=v),a=a||[1,1],r=r||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(a)||!Lt(i)||"boolean"!=typeof r)throw new Error("Invalid arguments passed to jsPDF.lines");for(Wt(t,n),o=a[0],s=a[1],c=e.length,m=t,g=n,l=0;l<c;l++)2===(d=e[l]).length?(m=d[0]*o+m,g=d[1]*s+g,Vt(m,g)):(u=d[0]*o+m,h=d[1]*s+g,p=d[2]*o+m,f=d[3]*s+g,m=d[4]*o+m,g=d[5]*s+g,Kt(u,h,p,f,m,g));return r&&Bt(),qt(i),this},p.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=n.c;switch(n.op){case"m":Wt(a[0],a[1]);break;case"l":Vt(a[0],a[1]);break;case"c":Kt.apply(this,a);break;case"h":Bt()}}return this},p.__private__.rect=p.rect=function(e,t,n,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!Lt(i))throw new Error("Invalid arguments passed to jsPDF.rect");return x===y&&(a=-a),Q([N(A(e)),N(L(t)),N(A(n)),N(A(a)),"re"].join(" ")),qt(i),this},p.__private__.triangle=p.triangle=function(e,t,n,a,i,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(i)||isNaN(r)||!Lt(o))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,a-t],[i-n,r-a],[e-i,t-r]],e,t,[1,1],o,!0),this},p.__private__.roundedRect=p.roundedRect=function(e,t,n,a,i,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(i)||isNaN(r)||!Lt(o))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),r=Math.min(r,.5*a),this.lines([[n-2*i,0],[i*s,0,i,r-r*s,i,r],[0,a-2*r],[0,r*s,-i*s,r,-i,r],[2*i-n,0],[-i*s,0,-i,-r*s,-i,-r],[0,2*r-a],[0,-r*s,i*s,-r,i,-r]],e+i,t,[1,1],o,!0),this},p.__private__.ellipse=p.ellipse=function(e,t,n,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!Lt(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var r=4/3*(Math.SQRT2-1)*n,o=4/3*(Math.SQRT2-1)*a;return Wt(e+n,t),Kt(e+n,t-o,e+r,t-a,e,t-a),Kt(e-r,t-a,e-n,t-o,e-n,t),Kt(e-n,t+o,e-r,t+a,e,t+a),Kt(e+r,t+a,e+n,t+o,e+n,t),qt(i),this},p.__private__.circle=p.circle=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||!Lt(a))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,a)},p.setFont=function(e,t,n){return n&&(t=w(t,n)),he=mt(e,t,{disableWarning:!1}),this};var Yt=p.__private__.getFont=p.getFont=function(){return ve[mt.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var e,t,n={};for(e in ye)if(ye.hasOwnProperty(e))for(t in n[e]=[],ye[e])ye[e].hasOwnProperty(t)&&n[e].push(t);return n},p.addFont=function(e,t,n,a,i){var r=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==r.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==r.indexOf(arguments[3])&&(n=w(n,a)),at.call(this,e,t,n,i=i||"Identity-H")};var Zt,$t=e.lineWidth||.200025,Qt=p.__private__.getLineWidth=p.getLineWidth=function(){return $t},Jt=p.__private__.setLineWidth=p.setLineWidth=function(e){return $t=e,Q(N(A(e))+" w"),this};p.__private__.setLineDash=Ot.API.setLineDash=Ot.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return N(A(e))}).join(" "),t=N(A(t)),Q("["+e+"] "+t+" d"),this};var Xt=p.__private__.getLineHeight=p.getLineHeight=function(){return te*Zt};p.__private__.getLineHeight=p.getLineHeight=function(){return te*Zt};var en=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Zt=e),this},tn=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Zt};en(e.lineHeight);var nn=p.__private__.getHorizontalCoordinate=function(e){return A(e)},an=p.__private__.getVerticalCoordinate=function(e){return x===b?e:Ce[B].mediaBox.topRightY-Ce[B].mediaBox.bottomLeftY-A(e)},rn=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(e){return N(nn(e))},on=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(e){return N(an(e))},sn=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ge(sn)},p.__private__.setStrokeColor=p.setDrawColor=function(e,t,n,a){return sn=Ue({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"draw",precision:2}),Q(sn),this};var ln=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ge(ln)},p.__private__.setFillColor=p.setFillColor=function(e,t,n,a){return ln=Ue({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"fill",precision:2}),Q(ln),this};var cn=e.textColor||"0 g",dn=p.__private__.getTextColor=p.getTextColor=function(){return Ge(cn)};p.__private__.setTextColor=p.setTextColor=function(e,t,n,a){return cn=Ue({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"text",precision:3}),this};var un=e.charSpace,hn=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(un||0)};p.__private__.setCharSpace=p.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return un=e,this};var pn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pn=t,Q(t+" J"),this};var fn=0;p.__private__.setLineJoin=p.setLineJoin=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fn=t,Q(t+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(N(A(e))+" M"),this},p.GState=Et,p.setGState=function(e){(e="string"==typeof e?_e[we[e]]:mn(null,e)).equals(Ne)||(Q("/"+e.id+" gs"),Ne=e)};var mn=function(e,t){if(!e||!we[e]){var n=!1;for(var a in _e)if(_e.hasOwnProperty(a)&&_e[a].equals(t)){n=!0;break}if(n)t=_e[a];else{var i="GS"+(Object.keys(_e).length+1).toString(10);_e[i]=t,t.id=i}return e&&(we[e]=t.id),je.publish("addGState",t),t}};p.addGState=function(e,t){return mn(e,t),this},p.saveGraphicsState=function(){return Q("q"),be.push({key:he,size:te,color:cn}),this},p.restoreGraphicsState=function(){Q("Q");var e=be.pop();return he=e.key,te=e.size,cn=e.color,Ne=null,this},p.setCurrentTransformationMatrix=function(e){return Q(e.toString()+" cm"),this},p.comment=function(e){return Q("#"+e),this};var gn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var a=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},vn=function(e,t,n,a){gn.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var r=a||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}}),this},yn=function(){this.page=ke,this.currentPage=B,this.pages=K.slice(0),this.pagesContext=Ce.slice(0),this.x=fe,this.y=me,this.matrix=ge,this.width=Sn(B),this.height=wn(B),this.outputDestination=Z,this.id="",this.objectNumber=-1};yn.prototype.restore=function(){ke=this.page,B=this.currentPage,Ce=this.pagesContext,K=this.pages,fe=this.x,me=this.y,ge=this.matrix,_n(B,this.width),Nn(B,this.height),Z=this.outputDestination};var bn=function(e,t,n,a,i){Fe.push(new yn),ke=B=0,K=[],fe=e,me=t,ge=i,ot([n,a])};for(var xn in p.beginFormObject=function(e,t,n,a,i){return bn(e,t,n,a,i),this},p.endFormObject=function(e){return function(e){if(Le[e])Fe.pop().restore();else{var t=new yn,n="Xo"+(Object.keys(Ae).length+1).toString(10);t.id=n,Le[e]=n,Ae[n]=t,je.publish("addFormObject",t),Fe.pop().restore()}}(e),this},p.doFormObject=function(e,t){var n=Ae[Le[e]];return Q("q"),Q(t.toString()+" cm"),Q("/"+n.id+" Do"),Q("Q"),this},p.getFormObject=function(e){var t=Ae[Le[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},p.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(pt(_t(St()),e),"function"==typeof pt.unload&&rt.setTimeout&&setTimeout(pt.unload,911),this):new Promise(function(t,n){try{var a=pt(_t(St()),e);"function"==typeof pt.unload&&rt.setTimeout&&setTimeout(pt.unload,911),t(a)}catch(e){n(e.message)}})},Ot.API)Ot.API.hasOwnProperty(xn)&&("events"===xn&&Ot.API.events.length?function(e,t){var n,a,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],a=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof a?[a]:a))}(je,Ot.API.events):p[xn]=Ot.API[xn]);var Sn=p.getPageWidth=function(e){return(Ce[e=e||B].mediaBox.topRightX-Ce[e].mediaBox.bottomLeftX)/pe},_n=p.setPageWidth=function(e,t){Ce[e].mediaBox.topRightX=t*pe+Ce[e].mediaBox.bottomLeftX},wn=p.getPageHeight=function(e){return(Ce[e=e||B].mediaBox.topRightY-Ce[e].mediaBox.bottomLeftY)/pe},Nn=p.setPageHeight=function(e,t){Ce[e].mediaBox.topRightY=t*pe+Ce[e].mediaBox.bottomLeftY};return p.internal={pdfEscape:it,getStyle:Mt,getFont:Yt,getFontSize:ae,getCharSpace:hn,getTextColor:dn,getLineHeight:Xt,getLineHeightFactor:tn,getLineWidth:Qt,write:J,getHorizontalCoordinate:nn,getVerticalCoordinate:an,getCoordinateString:rn,getVerticalCoordinateString:on,collections:{},newObject:De,newAdditionalObject:ze,newObjectDeferred:Oe,newObjectDeferredBegin:Be,getFilters:We,putStream:Ve,events:je,scaleFactor:pe,pageSize:{getWidth:function(){return Sn(B)},setWidth:function(e){_n(B,e)},getHeight:function(){return wn(B)},setHeight:function(e){Nn(B,e)}},encryptionOptions:d,encryption:kt,getEncryptor:function(e){return null!==d?kt.encryptor(e,0):function(e){return e}},output:wt,getNumberOfPages:ut,pages:K,out:Q,f2:j,f3:P,getPageInfo:Ct,getPageInfoByObjId:jt,getCurrentPageInfo:Pt,getPDFVersion:m,Point:gn,Rectangle:vn,Matrix:Ie,hasHotfix:Nt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Sn(B)},set:function(e){_n(B,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return wn(B)},set:function(e){Nn(B,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var a=at.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===u&&(h[a]=!0);var i=e[t][0].split("-");nt({id:a,fontName:i[0],fontStyle:i[1]||""})}je.publish("addFonts",{fonts:ve,dictionary:ye})}.call(p,ee),he="F1",lt(i,n),je.publish("initialized"),p}Ft.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Ft.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ft.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Ft.prototype.processOwnerPassword=function(e,t){return At(Ct(t).substr(0,5),e)},Ft.prototype.encryptor=function(e,t){var n=Ct(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return At(n,e)}},Et.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,le.A)(e)!==(0,le.A)(this))return!1;var a=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&a--;return 0===a},Ot.API={events:[]},Ot.version="2.5.2";var Bt=Ot.API,zt=1,qt=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ht=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Gt=function(e){return e.toFixed(2)},Ut=function(e){return e.toFixed(5)};Bt.__acroform__={};var Wt=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Vt=function(e){return e*zt},Kt=function(e){var t=new un,n=kn.internal.getHeight(e)||0,a=kn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Gt(a)),Number(Gt(n))],t},Yt=Bt.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Zt=Bt.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},$t=Bt.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},Qt=Bt.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $t(e,t-1)},Jt=Bt.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Yt(e,t-1)},Xt=Bt.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Zt(e,t-1)},en=Bt.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,i=e[0],r=e[1],o=e[2],s=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=a(r+s)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=a(r)||0,[Number(Gt(l.lowerLeft_X)),Number(Gt(l.lowerLeft_Y)),Number(Gt(l.upperRight_X)),Number(Gt(l.upperRight_Y))]},tn=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,a=nn(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Gt(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var r=Kt(e);return r.scope=e.scope,r.stream=t.join("\n"),r}},nn=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(e){return e.split("\n")}):i.map(function(e){return[e]});var r=n,o=kn.internal.getHeight(e)||0;o=o<0?-o:o;var s=kn.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(t,n,a){if(t+1<i.length){var r=n+" "+i[t+1][0];return an(r,e,a).width<=s-4}return!1};r++;e:for(;r>0;){t="",r--;var c,d,u=an("3",e,r).height,h=e.multiline?o-r:(o-u)/2,p=h+=2,f=0,m=0,g=0;if(r<=0){t="(...) Tj\n",t+="% Width of Text: "+an(t,e,r=12).width+", FieldWidth:"+s+"\n";break}for(var v="",y=0,b=0;b<i.length;b++)if(i.hasOwnProperty(b)){var x=!1;if(1!==i[b].length&&g!==i[b].length-1){if((u+2)*(y+2)+2>o)continue e;v+=i[b][g],x=!0,m=b,b--}else{v=" "==(v+=i[b][g]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var S=parseInt(b),_=l(S,v,r),w=b>=i.length-1;if(_&&!w){v+=" ",g=0;continue}if(_||w){if(w)m=S;else if(e.multiline&&(u+2)*(y+2)+2>o)continue e}else{if(!e.multiline)continue e;if((u+2)*(y+2)+2>o)continue e;m=S}}for(var N="",k=f;k<=m;k++){var C=i[k];if(e.multiline){if(k===m){N+=C[g]+" ",g=(g+1)%C.length;continue}if(k===f){N+=C[C.length-1]+" ";continue}}N+=C[0]+" "}switch(N=" "==N.substr(N.length-1)?N.substr(0,N.length-1):N,d=an(N,e,r).width,e.textAlign){case"right":c=s-d-2;break;case"center":c=(s-d)/2;break;default:c=2}t+=Gt(c)+" "+Gt(p)+" Td\n",t+="("+qt(N)+") Tj\n",t+=-Gt(c)+" 0 Td\n",p=-(r+2),d=0,f=x?m:m+1,y++,v=""}break}return a.text=t,a.fontSize=r,a},an=function(e,t,n){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},rn={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},on=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},sn=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(pn.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(rn)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");zt=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new hn,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];a.objId=void 0,a.hasAnnotation&&on(a,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var a in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(a)){var i=e[a],r=[],o=i.Rect;if(i.Rect&&(i.Rect=en(i.Rect,t)),t.internal.newObjectDeferredBegin(i.objId,!0),i.DA=kn.createDefaultAppearanceStream(i),"object"===(0,le.A)(i)&&"function"==typeof i.getKeyValueListForStream&&(r=i.getKeyValueListForStream()),i.Rect=o,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=tn(i);r.push({key:"AP",value:"<</N "+s+">>"}),t.internal.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){var l="";for(var c in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(c)){var d=i.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var u=d[a];"function"==typeof u&&(u=u.call(t,i)),l+="/"+a+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=d)&&(u=u.call(t,i)),l+="/"+a+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);l+=">>"}r.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:r,objectId:i.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var a=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),"object"===(0,le.A)(i)&&"function"==typeof i.putStream&&i.putStream(),delete e[a]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},ln=Bt.__acroform__.arrayToPdfArray=function(e,t,n){var a=function(e){return e};if(Array.isArray(e)){for(var i="[",r=0;r<e.length;r++)switch(0!==r&&(i+=" "),(0,le.A)(e[r])){case"boolean":case"number":case"object":i+=e[r].toString();break;case"string":"/"!==e[r].substr(0,1)?(void 0!==t&&n&&(a=n.internal.getEncryptor(t)),i+="("+qt(a(e[r].toString()))+")"):i+=e[r].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},cn=function(e,t,n){var a=function(e){return e};return void 0!==t&&n&&(a=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+qt(a(e))+")"},dn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};dn.prototype.toString=function(){return this.objId+" 0 R"},dn.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},dn.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var a=t[n],i=this[a];i&&(Array.isArray(i)?e.push({key:a,value:ln(i,this.objId,this.scope)}):i instanceof dn?(i.scope=this.scope,e.push({key:a,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:a,value:i}))}return e};var un=function(){dn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Wt(un,dn);var hn=function(){dn.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+qt(t(e))+")"}},set:function(t){e=t}})};Wt(hn,dn);var pn=function e(){dn.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(t,3))},set:function(e){!0===Boolean(e)?this.F=Jt(t,3):this.F=Xt(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==a.length)return a},set:function(e){a=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(e){a[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(e){a[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(e){a[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(e){a[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof Sn)return;r="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+qt(t(r))+")"},set:function(e){r=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){r=e}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/zt:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Sn||this instanceof wn))return cn(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof yn==0?cn(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof yn==0?"("===e.substr(0,1)?Ht(e.substr(1,e.length-2)):Ht(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof yn==1?Ht(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof yn==1?"/"+e:e}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof yn==0?cn(p,this.objId,this.scope):p},set:function(e){e=e.toString(),p=this instanceof yn==0?"("===e.substr(0,1)?Ht(e.substr(1,e.length-2)):Ht(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof yn==1?Ht(p.substr(1,p.length-1)):p},set:function(e){e=e.toString(),p=this instanceof yn==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(e){e=Boolean(e),m=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(e){f=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,1):this.Ff=Xt(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,2):this.Ff=Xt(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,3):this.Ff=Xt(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Wt(pn,dn);var fn=function(){pn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ln(t,this.objId,this.scope)},set:function(e){var n,a;a=[],"string"==typeof(n=e)&&(a=function(e,t,n){n||(n=1);for(var a,i=[];a=t.exec(e);)i.push(a[n]);return i}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,18):this.Ff=Xt(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=Jt(this.Ff,19):this.Ff=Xt(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=Jt(this.Ff,20),t.sort()):this.Ff=Xt(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,22):this.Ff=Xt(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,23):this.Ff=Xt(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,27):this.Ff=Xt(this.Ff,27)}}),this.hasAppearanceStream=!1};Wt(fn,pn);var mn=function(){fn.call(this),this.fontName="helvetica",this.combo=!1};Wt(mn,fn);var gn=function(){mn.call(this),this.combo=!0};Wt(gn,mn);var vn=function(){gn.call(this),this.edit=!0};Wt(vn,gn);var yn=function(){pn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,15):this.Ff=Xt(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,16):this.Ff=Xt(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,17):this.Ff=Xt(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,26):this.Ff=Xt(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+qt(e(t[n]))+")");return a.push(">>"),a.join("\n")}},set:function(e){"object"===(0,le.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Wt(yn,pn);var bn=function(){yn.call(this),this.pushButton=!0};Wt(bn,yn);var xn=function(){yn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};Wt(xn,yn);var Sn=function(){var e,t;pn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),a)n.push("/"+t+" ("+qt(e(a[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,le.A)(e)&&(a=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(e){"string"==typeof e&&(a.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=kn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wt(Sn,pn),xn.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},xn.prototype.createOption=function(e){var t=new Sn;return t.Parent=this,t.optionName=e,this.Kids.push(t),Cn.call(this.scope,t),t};var _n=function(){yn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=kn.CheckBox.createAppearanceStream()};Wt(_n,yn);var wn=function(){pn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,13):this.Ff=Xt(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,21):this.Ff=Xt(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,23):this.Ff=Xt(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,24):this.Ff=Xt(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,25):this.Ff=Xt(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,26):this.Ff=Xt(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wt(wn,pn);var Nn=function(){wn.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qt(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=Jt(this.Ff,14):this.Ff=Xt(this.Ff,14)}}),this.password=!0};Wt(Nn,wn);var kn={CheckBox:{createAppearanceStream:function(){return{N:{On:kn.CheckBox.YesNormal},D:{On:kn.CheckBox.YesPushDown,Off:kn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Kt(e);t.scope=e.scope;var n=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),r=nn(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Gt(kn.internal.getWidth(e))+" "+Gt(kn.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+a+" "+Gt(r.fontSize)+" Tf "+i),n.push("BT"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=Kt(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=[],r=kn.internal.getHeight(e),o=kn.internal.getWidth(e),s=nn(e,e.caption);return i.push("1 g"),i.push("0 0 "+Gt(o)+" "+Gt(r)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Gt(o-1)+" "+Gt(r-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Gt(s.fontSize)+" Tf "+a),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=Kt(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(kn.internal.getWidth(e))+" "+Gt(kn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:kn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=kn.RadioButton.Circle.YesNormal,t.D[e]=kn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Kt(e);t.scope=e.scope;var n=[],a=kn.internal.getWidth(e)<=kn.internal.getHeight(e)?kn.internal.getWidth(e)/4:kn.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var i=kn.internal.Bezier_C,r=Number((a*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ut(kn.internal.getWidth(e)/2)+" "+Ut(kn.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+r+" "+r+" "+a+" 0 "+a+" c"),n.push("-"+r+" "+a+" -"+a+" "+r+" -"+a+" 0 c"),n.push("-"+a+" -"+r+" -"+r+" -"+a+" 0 -"+a+" c"),n.push(r+" -"+a+" "+a+" -"+r+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Kt(e);t.scope=e.scope;var n=[],a=kn.internal.getWidth(e)<=kn.internal.getHeight(e)?kn.internal.getWidth(e)/4:kn.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),r=Number((i*kn.internal.Bezier_C).toFixed(5)),o=Number((a*kn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ut(kn.internal.getWidth(e)/2)+" "+Ut(kn.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ut(kn.internal.getWidth(e)/2)+" "+Ut(kn.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=Kt(e);t.scope=e.scope;var n=[],a=kn.internal.getWidth(e)<=kn.internal.getHeight(e)?kn.internal.getWidth(e)/4:kn.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),r=Number((i*kn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ut(kn.internal.getWidth(e)/2)+" "+Ut(kn.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:kn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=kn.RadioButton.Cross.YesNormal,t.D[e]=kn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Kt(e);t.scope=e.scope;var n=[],a=kn.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Gt(kn.internal.getWidth(e)-2)+" "+Gt(kn.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Gt(a.x1.x)+" "+Gt(a.x1.y)+" m"),n.push(Gt(a.x2.x)+" "+Gt(a.x2.y)+" l"),n.push(Gt(a.x4.x)+" "+Gt(a.x4.y)+" m"),n.push(Gt(a.x3.x)+" "+Gt(a.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Kt(e);t.scope=e.scope;var n=kn.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Gt(kn.internal.getWidth(e))+" "+Gt(kn.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Gt(kn.internal.getWidth(e)-2)+" "+Gt(kn.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Gt(n.x1.x)+" "+Gt(n.x1.y)+" m"),a.push(Gt(n.x2.x)+" "+Gt(n.x2.y)+" l"),a.push(Gt(n.x4.x)+" "+Gt(n.x4.y)+" m"),a.push(Gt(n.x3.x)+" "+Gt(n.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=Kt(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(kn.internal.getWidth(e))+" "+Gt(kn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};kn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=kn.internal.getWidth(e),n=kn.internal.getHeight(e),a=Math.min(t,n);return{x1:{x:(t-a)/2,y:(n-a)/2+a},x2:{x:(t-a)/2+a,y:(n-a)/2},x3:{x:(t-a)/2,y:(n-a)/2},x4:{x:(t-a)/2+a,y:(n-a)/2+a}}}},kn.internal.getWidth=function(e){var t=0;return"object"===(0,le.A)(e)&&(t=Vt(e.Rect[2])),t},kn.internal.getHeight=function(e){var t=0;return"object"===(0,le.A)(e)&&(t=Vt(e.Rect[3])),t};var Cn=Bt.addField=function(e){if(sn(this,e),!(e instanceof pn))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Bt.AcroFormChoiceField=fn,Bt.AcroFormListBox=mn,Bt.AcroFormComboBox=gn,Bt.AcroFormEditBox=vn,Bt.AcroFormButton=yn,Bt.AcroFormPushButton=bn,Bt.AcroFormRadioButton=xn,Bt.AcroFormCheckBox=_n,Bt.AcroFormTextField=wn,Bt.AcroFormPasswordField=Nn,Bt.AcroFormAppearance=kn,Bt.AcroForm={ChoiceField:fn,ListBox:mn,ComboBox:gn,EditBox:vn,Button:yn,PushButton:bn,RadioButton:xn,CheckBox:_n,TextField:wn,PasswordField:Nn,Appearance:kn},Ot.AcroForm={ChoiceField:fn,ListBox:mn,ComboBox:gn,EditBox:vn,Button:yn,PushButton:bn,RadioButton:xn,CheckBox:_n,TextField:wn,PasswordField:Nn,Appearance:kn};Ot.AcroForm;function jn(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(e,a){var i,r,o,s,l,c=t;if("RGBA"===(a=a||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(_(e))for(l in n)for(o=n[l],i=0;i<o.length;i+=1){for(s=!0,r=0;r<o[i].length;r+=1)if(void 0!==o[i][r]&&o[i][r]!==e[r]){s=!1;break}if(!0===s){c=l;break}}else for(l in n)for(o=n[l],i=0;i<o.length;i+=1){for(s=!0,r=0;r<o[i].length;r+=1)if(void 0!==o[i][r]&&o[i][r]!==e.charCodeAt(r)){s=!1;break}if(!0===s){c=l;break}}return c===t&&a!==t&&(c=a),c},i=function e(t){for(var n=this.internal.write,a=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var r=[];if(r.push({key:"Type",value:"/XObject"}),r.push({key:"Subtype",value:"/Image"}),r.push({key:"Width",value:t.width}),r.push({key:"Height",value:t.height}),t.colorSpace===g.INDEXED?r.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(r.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===g.DEVICE_CMYK&&r.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),r.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&r.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var o="",s=0,l=t.transparency.length;s<l;s++)o+=t.transparency[s]+" "+t.transparency[s]+" ";r.push({key:"Mask",value:"["+o+"]"})}void 0!==t.sMask&&r.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(a({data:t.data,additionalKeyValues:r,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var d="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===g.INDEXED){var h=this.internal.newObject();a({data:N(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},r=function(){var e=this.internal.collections.addImage_images;for(var t in e)i.call(this,e[t])},o=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var a in t)n("/I"+(e=t[a]).index,e.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var e=this.internal.collections.addImage_images;return s.call(this),e},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(t){return"function"==typeof e["process"+t.toUpperCase()]},u=function(e){return"object"===(0,le.A)(e)&&1===e.nodeType},h=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var a=""+t.getAttribute("src");if(0===a.indexOf("data:image/"))return ut(unescape(a).split("base64,").pop());var i=e.loadFile(a,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var r;switch(n){case"PNG":r="image/png";break;case"WEBP":r="image/webp";break;default:r="image/jpeg"}return ut(t.toDataURL(r,1).split("base64,").pop())}},p=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},f=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},m=function(e,t,n,a,i,r){var o=f.call(this,n,a,i),s=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=l.call(this);if(n=o[0],a=o[1],d[i.index]=i,r){r*=Math.PI/180;var u=Math.cos(r),h=Math.sin(r),p=function(e){return e.toFixed(4)},m=[p(u),p(h),p(-1*h),p(u),0,0,"cm"]}this.internal.write("q"),r?(this.internal.write([1,"0","0",1,s(e),c(t+a),"cm"].join(" ")),this.internal.write(m.join(" ")),this.internal.write([s(n),"0","0",s(a),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(a),s(e),c(t+a),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,n,a=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)a=(a<<5)-a+e.charCodeAt(t),a|=0;else if(_(e))for(n=e.byteLength/2,t=0;t<n;t++)a=(a<<5)-a+e[t],a|=0;return a},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},x=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var a=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(a)&&(n={mimeType:a[1],charset:a[2],data:t[1]})}return n},S=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return S()&&e instanceof ArrayBuffer};var _=e.__addimage__.isArrayBufferView=function(e){return S()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},w=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),a=0;a<t;a++)n[a]=e.charCodeAt(a);return n},N=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=_(e)?e:new Uint8Array(e),a=0;a<n.length;a+=8192)t+=String.fromCharCode.apply(null,n.subarray(a,a+8192));return t};e.addImage=function(){var e,n,a,i,r,o,l,c,d;if("number"==typeof arguments[1]?(n=t,a=arguments[1],i=arguments[2],r=arguments[3],o=arguments[4],l=arguments[5],c=arguments[6],d=arguments[7]):(n=arguments[1],a=arguments[2],i=arguments[3],r=arguments[4],o=arguments[5],l=arguments[6],c=arguments[7],d=arguments[8]),"object"===(0,le.A)(e=arguments[0])&&!u(e)&&"imageData"in e){var h=e;e=h.imageData,n=h.format||n||t,a=h.x||a||0,i=h.y||i||0,r=h.w||h.width||r,o=h.h||h.height||o,l=h.alias||l,c=h.compression||c,d=h.rotation||h.angle||d}var p=this.internal.getFilters();if(void 0===c&&-1!==p.indexOf("FlateEncode")&&(c="SLOW"),isNaN(a)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var f=k.call(this,e,n,l,c);return m.call(this,a,i,r,o,f,d),this};var k=function(n,i,r,o){var s,l,f;if("string"==typeof n&&a(n)===t){n=unescape(n);var m=C(n,!1);(""!==m||void 0!==(m=e.loadFile(n,!0)))&&(n=m)}if(u(n)&&(n=h(n,i)),i=a(n,i),!d(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(f=r)||0===f.length)&&(r=function(e){return"string"==typeof e||_(e)?y(e):_(e.data)?y(e.data):null}(n)),(s=p.call(this,r))||(S()&&(n instanceof Uint8Array||"RGBA"===i||(l=n,n=w(n))),s=this["process"+i.toUpperCase()](n,c.call(this),r,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:v.NONE}(o),l)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},C=e.__addimage__.convertBase64ToBinaryString=function(e,t){var n;t="boolean"!=typeof t||t;var a,i="";if("string"==typeof e){a=null!==(n=x(e))?n.data:e;try{i=ut(a)}catch(e){if(t)throw b(a)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};e.getImageProperties=function(n){var i,r,o="";if(u(n)&&(n=h(n)),"string"==typeof n&&a(n)===t&&(""===(o=C(n,!1))&&(o=e.loadFile(n)||""),n=o),r=a(n),!d(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if(!S()||n instanceof Uint8Array||(n=w(n)),!(i=this["process"+r.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=r,i}}(Ot.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Ot.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,a,i,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((n=l[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){n=l[u];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+r(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+r(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+s.objId+" 0 R",i+=" /T ("+h(g(v))+") >>",f.content=i;var y=f.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+r(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+r(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+y,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(f.objId,"0 R",m.objId,"0 R");break;case"freetext":a="/Rect ["+r(n.bounds.x)+" "+o(n.bounds.y)+" "+r(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(p(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var x=this.annotations._nameMap[n.options.name];n.options.pageNumber=x.page,n.options.top=x.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var S=o(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+S+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,a,i){var r=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;r.pageContext.annotations.push({finalBounds:{x:o(e),y:s(t),w:o(e+n),h:s(t+a)},options:i,type:"link"})},e.textWithLink=function(e,t,n,a){var i,r,o=this.getTextWidth(e),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==a.maxWidth){r=a.maxWidth;var l=this.splitTextToSize(e,r).length;i=Math.ceil(s*l)}else r=o,i=s;return this.text(e,t,n,a),n+=.2*s,"center"===a.align&&(t-=o/2),"right"===a.align&&(t-=o),this.link(t,n-s,r,i,a),o},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Ot.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var r=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},o=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},s=e.__arabicParser__.isArabicEndLetter=function(e){return o(e)&&r(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return o(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return o(e)&&r(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return o(e)&&r(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return o(e)&&r(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return o(e)&&r(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,a=n,i="",r=0;for(t=0;t<e.length;t+=1)void 0!==a[e.charCodeAt(t)]?(r++,"number"==typeof(a=a[e.charCodeAt(t)])&&(i+=String.fromCharCode(a),a=n,r=0),t===e.length-1&&(a=n,i+=e.charAt(t-(r-1)),t-=r-1,r=0)):(a=n,i+=e.charAt(t-r),t-=r,r=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==a[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return o(e)?!1===r(e)?-1:!c(e)||!o(t)&&!o(n)||!o(n)&&s(t)||s(e)&&!o(t)||s(e)&&l(t)||s(e)&&s(t)?0:d(e)&&o(t)&&!s(t)&&o(n)&&c(n)?3:s(e)||!o(n)?1:2:-1},p=function(e){var n=0,a=0,i=0,r="",s="",l="",c=(e=e||"").split("\\s+"),d=[];for(n=0;n<c.length;n+=1){for(d.push(""),a=0;a<c[n].length;a+=1)r=c[n][a],s=c[n][a-1],l=c[n][a+1],o(r)?(i=h(r,s,l),d[n]+=-1!==i?String.fromCharCode(t[r.charCodeAt(0)][i]):r):d[n]+=r;d[n]=u(d[n])}return d.join(" ")},f=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var a=0;for(n=[],a=0;a<t.length;a+=1)Array.isArray(t[a])?n.push([p(t[a][0]),t[a][1],t[a][2]]):n.push([p(t[a])]);e=n}else e=p(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",f])}(Ot.API),Ot.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")});return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(e){a=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ot.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,a=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var a=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var r=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var o=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return o},set:function(e){o=e}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return a.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){a.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),i=t.font||this.getFont(),r=t.scaleFactor||this.internal.scaleFactor,o=0,s=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)o<(l=this.getStringUnitWidth(e[u],{font:i})*n)&&(o=l);return 0!==o&&(s=e.length),{w:o/=r,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/r,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new r(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var i=this.internal.__cell__.lastCell,o=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===e.lineNumber?(e.x=(i.x||0)+(i.width||0),e.y=i.y||0):i.y+i.height+e.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=s.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=i.y+i.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-o,e.y+o,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+o,{align:"center",baseline:"top",maxWidth:e.width-o-o}):this.text(e.text,e.x+o,e.y+o,{align:"left",baseline:"top",maxWidth:e.width-o-o})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,c,d){if(a.call(this),!l)throw new Error("No data for PDF table.");var u,h,p,f,m=[],g=[],v=[],y={},b={},x=[],S=[],_=(d=d||{}).autoSize||!1,w=!1!==d.printHeaders,N=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,k=d.margins||Object.assign({width:this.getPageWidth()},t),C="number"==typeof d.padding?d.padding:3,j=d.headerBackgroundColor||"#c8c8c8",P=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=w,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=N,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=P,this.setFontSize(N),null==c)g=m=Object.keys(l[0]),v=m.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,le.A)(c[0]))for(m=c.map(function(e){return e.name}),g=c.map(function(e){return e.prompt||e.name||""}),v=c.map(function(e){return e.align||"left"}),u=0;u<c.length;u+=1)b[c[u].name]=c[u].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(g=m=c,v=m.map(function(){return"left"}));if(_||Array.isArray(c)&&"string"==typeof c[0])for(u=0;u<m.length;u+=1){for(y[f=m[u]]=l.map(function(e){return e[f]}),this.setFont(void 0,"bold"),x.push(this.getTextDimensions(g[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=y[f],this.setFont(void 0,"normal"),p=0;p<h.length;p+=1)x.push(this.getTextDimensions(h[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[f]=Math.max.apply(null,x)+C+C,x=[]}if(w){var A={};for(u=0;u<m.length;u+=1)A[m[u]]={},A[m[u]].text=g[u],A[m[u]].align=v[u];var L=s.call(this,A,b);S=m.map(function(t){return new r(e,n,b[t],L,A[t].text,void 0,A[t].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var F=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(u=0;u<l.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:l[u]},this);var I=s.call(this,l[u],b);for(p=0;p<m.length;p+=1){var R=l[u][m[p]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:p,data:R},this),o.call(this,new r(e,n,b[m[p]],I,R,u+2,F[m[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var s=function(e,t){var n=this.internal.__cell__.padding,a=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map(function(a){var i=e[a];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[a]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*a/i+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){a.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){i=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,i),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Ot.API);var Pn={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},An=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ln=jn(An),Fn=[100,200,300,400,500,600,700,800,900],In=jn(Fn);function Rn(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return Pn[e=e||"normal"]?e:"normal"}(e.style),a=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),i=function(e){return"number"==typeof Ln[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:a,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,a].join(" ")}}}function En(e,t,n,a){var i;for(i=n;i>=0&&i<t.length;i+=a)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=a)if(e[t[i]])return e[t[i]]}var Mn={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Tn={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dn(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function On(e){return e.trimLeft()}function Bn(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function zn(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var qn,Hn,Gn,Un,Wn=["times"];!function(e){var t,n,a,i,r,o,s,l,c,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,n=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var a=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return a},set:function(e){a=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var r=0;Object.defineProperty(this,"posY",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(e){o=e}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof d&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var p=null;function f(e,t){if(null===p){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var a=null;switch(e){case"bold":a={family:n,weight:"bold"};break;case"italic":a={family:n,style:"italic"};break;case"bolditalic":a={family:n,weight:"bold",style:"italic"};break;case"":case"normal":a={family:n}}null!==a&&(a.ref={name:n,style:e},t.push(a))})}),t}(e.getFontList());p=function(e){for(var t={},n=0;n<e.length;++n){var a=Rn(e[n]),i=a.family,r=a.stretch,o=a.style,s=a.weight;t[i]=t[i]||{},t[i][r]=t[i][r]||{},t[i][r][o]=t[i][r][o]||{},t[i][r][o][s]=a}return t}(n.concat(t))}return p}var m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(e){p=null,m=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],a=(t[2],t[3]),i=t[4],r=(t[5],t[6]),o=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===o?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(e){var t,n,a=[],i=e.trim();if(""===i)return Wn;if(i in Tn)return[Tn[i]];for(;""!==i;){switch(n=null,t=(i=On(i)).charAt(0)){case'"':case"'":n=Bn(i.substring(1),t);break;default:n=zn(i)}if(null===n)return Wn;if(a.push(n[0]),""!==(i=On(n[1]))&&","!==i.charAt(0))return Wn;i=i.replace(/^,/,"")}return a}(r);if(this.fontFaces){var l=function(e,t,n){for(var a=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Mn,n.genericFontFamilies||{}),r=null,o=null,s=0;s<t.length;++s)if(i[(r=Rn(t[s])).family]&&(r.family=i[r.family]),e.hasOwnProperty(r.family)){o=e[r.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+Dn(r)+"' and default family '"+a+"'.");if(o=function(e,t){if(t[e])return t[e];var n=Ln[e],a=n<=Ln.normal?-1:1,i=En(t,An,n,a);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(r.stretch,o),o=function(e,t){if(t[e])return t[e];for(var n=Pn[e],a=0;a<n.length;++a)if(t[n[a]])return t[n[a]];throw new Error("Could not find a matching font-style for "+e)}(r.style,o),!(o=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=In[e],a=En(t,Fn,n,e<400?-1:1);if(!a)throw new Error("Could not find a matching font-weight for value "+e);return a}(r.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Dn(r)+"'.");return o}(f(this.pdf,this.fontFaces),s.map(function(e){return{family:e,stretch:"normal",weight:a,style:n}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===a||parseInt(a,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var d="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<s.length;h++){if(void 0!==this.pdf.internal.getFont(s[h],c,{noFallback:!0,disableWarning:!0})){d=s[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(s[h],"bold",{noFallback:!0,disableWarning:!0}))d=s[h],c="bold";else if(void 0!==this.pdf.internal.getFont(s[h],"normal",{noFallback:!0,disableWarning:!0})){d=s[h],c="normal";break}}if(""===d)for(var p=0;p<s.length;p++)if(u[s[p]]){d=u[s[p]];break}d=""===d?"Times":d,this.pdf.setFont(d,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,D.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,D.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};u.prototype.setLineDash=function(e){this.lineDash=e},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){x.call(this,"fill",!1)},u.prototype.stroke=function(){x.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw st.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(e,t)},u.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,le.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw st.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,n,a){if(isNaN(n)||isNaN(a)||isNaN(e)||isNaN(t))throw st.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new o(n,a)),r=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:r.x,y1:r.y,x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},u.prototype.bezierCurveTo=function(e,t,n,a,i,r){if(isNaN(i)||isNaN(r)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw st.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new o(i,r)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(n,a));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:s.x,y:s.y}),this.ctx.lastPoint=new o(s.x,s.y)},u.prototype.arc=function(e,t,n,a,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(i))throw st.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(r=Boolean(r),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new o(e,t));e=s.x,t=s.y;var l=this.ctx.transform.applyToPoint(new o(0,n)),c=this.ctx.transform.applyToPoint(new o(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(i-a)>=2*Math.PI&&(a=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:a,endAngle:i,counterclockwise:r})},u.prototype.arcTo=function(e,t,n,a,i){throw new Error("arcTo not implemented.")},u.prototype.rect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw st.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+a),this.lineTo(e,t+a),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw st.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,a),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},u.prototype.strokeRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw st.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(e,t,n,a),this.stroke())},u.prototype.clearRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw st.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,a))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var a=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=a}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,n,a,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,a=0,i=0;else{var r=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==r)t=parseInt(r[1]),n=parseInt(r[2]),a=parseInt(r[3]),i=1;else if(null!==(r=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(r[1]),n=parseInt(r[2]),a=parseInt(r[3]),i=parseFloat(r[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var o=new ft(e);e=o.ok?o.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,a=e.substring(3,4),a+=a):(t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),a=parseInt(a,16)}}return{r:t,g:n,b:a,a:i,style:e}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},f=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,n,a){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw st.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(a=isNaN(a)?void 0:a,!p.call(this)){var i=E(this.ctx.transform.rotation),r=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:n,scale:r,angle:i,align:this.textAlign,maxWidth:a})}},u.prototype.strokeText=function(e,t,n,a){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw st.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){a=isNaN(a)?void 0:a;var i=E(this.ctx.transform.rotation),r=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:n,scale:r,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:a})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw st.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,a=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*a/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw st.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.rotate=function(e){if(isNaN(e))throw st.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw st.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.transform=function(e,t,n,a,i,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(i)||isNaN(r))throw st.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var o=new l(e,t,n,a,i,r);this.ctx.transform=this.ctx.transform.multiply(o)},u.prototype.setTransform=function(e,t,n,a,i,r){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,a=isNaN(a)?1:a,i=isNaN(i)?0:i,r=isNaN(r)?0:r,this.ctx.transform=new l(e,t,n,a,i,r)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(e,t,n,a,i,r,o,c,d){var u=this.pdf.getImageProperties(e),h=1,p=1,f=1,v=1;void 0!==a&&void 0!==c&&(f=c/a,v=d/i,h=u.width/a*c/a,p=u.height/i*d/i),void 0===r&&(r=t,o=n,t=0,n=0),void 0!==a&&void 0===c&&(c=a,d=i),void 0===a&&void 0===c&&(c=u.width,d=u.height);for(var x,_=this.ctx.transform.decompose(),w=E(_.rotate.shx),N=new l,k=(N=(N=(N=N.multiply(_.translate)).multiply(_.skew)).multiply(_.scale)).applyToRectangle(new s(r-t*f,o-n*v,a*h,i*p)),C=g.call(this,k),j=[],P=0;P<C.length;P+=1)-1===j.indexOf(C[P])&&j.push(C[P]);if(b(j),this.autoPaging)for(var A=j[0],L=j[j.length-1],F=A;F<L+1;F++){this.pdf.setPage(F);var I=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],R=1===F?this.posY+this.margin[0]:this.margin[0],M=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],T=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],D=1===F?0:M+(F-2)*T;if(0!==this.ctx.clip_path.length){var O=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(x,this.posX+this.margin[3],-D+R+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=O}var B=JSON.parse(JSON.stringify(k));B=y([B],this.posX+this.margin[3],-D+R+this.ctx.prevPageLastElemOffset)[0];var z=(F>A||F<L)&&m.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,T,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,w),z&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",k.x,k.y,k.w,k.h,null,null,w)};var g=function(e,t,n){var a=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":a.push(Math.floor((e.y+i)/n)+1);break;case"arc":a.push(Math.floor((e.y+i-e.radius)/n)+1),a.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var r=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);a.push(Math.floor((r.y+i)/n)+1),a.push(Math.floor((r.y+r.h+i)/n)+1);break;case"bct":var o=T(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);a.push(Math.floor((o.y+i)/n)+1),a.push(Math.floor((o.y+o.h+i)/n)+1);break;case"rect":a.push(Math.floor((e.y+i)/n)+1),a.push(Math.floor((e.y+e.h+i)/n)+1)}for(var s=0;s<a.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<a[s];)v.call(this);return a},v=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,a=this.lineCap,i=this.lineWidth,r=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=a,this.lineWidth=i,this.lineJoin=r},y=function(e,t,n){for(var a=0;a<e.length;a++)switch(e[a].type){case"bct":e[a].x2+=t,e[a].y2+=n;case"qct":e[a].x1+=t,e[a].y1+=n;default:e[a].x+=t,e[a].y+=n}return e},b=function(e){return e.sort(function(e,t){return e-t})},x=function(e,t){for(var n,a,i=this.fillStyle,r=this.strokeStyle,o=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],p=0;p<u.length;p++)if(void 0!==u[p].x)for(var f=g.call(this,u[p]),x=0;x<f.length;x+=1)-1===h.indexOf(f[x])&&h.push(f[x]);for(var _=0;_<h.length;_++)for(;this.pdf.internal.getNumberOfPages()<h[_];)v.call(this);if(b(h),this.autoPaging)for(var w=h[0],N=h[h.length-1],k=w;k<N+1;k++){this.pdf.setPage(k),this.fillStyle=i,this.strokeStyle=r,this.lineCap=o,this.lineWidth=l,this.lineJoin=c;var C=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],j=1===k?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],A=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],L=1===k?0:P+(k-2)*A;if(0!==this.ctx.clip_path.length){var F=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(n,this.posX+this.margin[3],-L+j+this.ctx.prevPageLastElemOffset),S.call(this,e,!0),this.path=F}if(a=JSON.parse(JSON.stringify(d)),this.path=y(a,this.posX+this.margin[3],-L+j+this.ctx.prevPageLastElemOffset),!1===t||0===k){var I=(k>w||k<N)&&m.call(this);I&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],C,A,null).clip().discardPath()),S.call(this,e,t),I&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,S.call(this,e,t),this.lineWidth=s;this.path=d},S=function(e,t){if(("stroke"!==e||t||!f.call(this))&&("stroke"===e||t||!p.call(this))){for(var n,a,i=[],r=this.path,o=0;o<r.length;o++){var s=r[o];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var l=i.length;if(r[o-1]&&!isNaN(r[o-1].x)&&(n=[s.x-r[o-1].x,s.y-r[o-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(s);break}break;case"bct":n=[s.x1-r[o-1].x,s.y1-r[o-1].y,s.x2-r[o-1].x,s.y2-r[o-1].y,s.x-r[o-1].x,s.y-r[o-1].y],i[i.length-1].deltas.push(n);break;case"qct":var c=r[o-1].x+2/3*(s.x1-r[o-1].x),d=r[o-1].y+2/3*(s.y1-r[o-1].y),u=s.x+2/3*(s.x1-s.x),h=s.y+2/3*(s.y1-s.y),m=s.x,g=s.y;n=[c-r[o-1].x,d-r[o-1].y,u-r[o-1].x,h-r[o-1].y,m-r[o-1].x,g-r[o-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}a=t?null:"stroke"===e?"stroke":"fill";for(var v=!1,y=0;y<i.length;y++)if(i[y].arc)for(var b=i[y].abs,x=0;x<b.length;x++){var S=b[x];"arc"===S.type?N.call(this,S.x,S.y,S.radius,S.startAngle,S.endAngle,S.counterclockwise,void 0,t,!v):A.call(this,S.x,S.y),v=!0}else if(!0===i[y].close)this.pdf.internal.out("h"),v=!1;else if(!0!==i[y].begin){var _=i[y].start.x,w=i[y].start.y;L.call(this,i[y].deltas,_,w),v=!0}a&&k.call(this,a),t&&C.call(this)}},_=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},w=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(e,t,n,a,i,r,o,s,l){for(var c=I.call(this,n,a,i,r),d=0;d<c.length;d++){var u=c[d];0===d&&(l?j.call(this,u.x1+e,u.y1+t):A.call(this,u.x1+e,u.y1+t)),F.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}s?C.call(this):k.call(this,o)},k=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},C=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(e,t){this.pdf.internal.out(n(e)+" "+a(t)+" m")},P=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),a=_.call(this,e.y),i=w.call(this,a)-n.h,r=this.ctx.transform.applyToPoint(new o(e.x,a)),c=this.ctx.transform.decompose(),d=new l;d=(d=(d=d.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var u,h,p,f=this.ctx.transform.applyToRectangle(new s(e.x,a,n.w,n.h)),v=d.applyToRectangle(new s(e.x,i,n.w,n.h)),x=g.call(this,v),N=[],k=0;k<x.length;k+=1)-1===N.indexOf(x[k])&&N.push(x[k]);if(b(N),this.autoPaging)for(var C=N[0],j=N[N.length-1],P=C;P<j+1;P++){this.pdf.setPage(P);var A=1===P?this.posY+this.margin[0]:this.margin[0],L=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],F=this.pdf.internal.pageSize.height-this.margin[2],I=F-this.margin[0],R=this.pdf.internal.pageSize.width-this.margin[1],E=R-this.margin[3],M=1===P?0:L+(P-2)*I;if(0!==this.ctx.clip_path.length){var T=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(u,this.posX+this.margin[3],-1*M+A),S.call(this,"fill",!0),this.path=T}var D=y([JSON.parse(JSON.stringify(v))],this.posX+this.margin[3],-M+A+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),p=this.lineWidth,this.lineWidth=p*e.scale);var O="text"!==this.autoPaging;if(O||D.y+D.h<=F){if(O||D.y>=A&&D.x<=R){var B=O?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||R-D.x)[0],z=y([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-M+A+this.ctx.prevPageLastElemOffset)[0],q=O&&(P>C||P<j)&&m.call(this);q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],E,I,null).clip().discardPath()),this.pdf.text(B,z.x,z.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),q&&this.pdf.restoreGraphicsState()}}else D.y<F&&(this.ctx.prevPageLastElemOffset+=F-D.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=p)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),p=this.lineWidth,this.lineWidth=p*e.scale),this.pdf.text(e.text,r.x+this.posX,r.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=p)},A=function(e,t,i,r){i=i||0,r=r||0,this.pdf.internal.out(n(e+i)+" "+a(t+r)+" l")},L=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},F=function(e,n,a,o,s,l,c,d){this.pdf.internal.out([t(i(a+e)),t(r(o+n)),t(i(s+e)),t(r(l+n)),t(i(c+e)),t(r(d+n)),"c"].join(" "))},I=function(e,t,n,a){for(var i=2*Math.PI,r=Math.PI/2;t>n;)t-=i;var o=Math.abs(n-t);o<i&&a&&(o=i-o);for(var s=[],l=a?-1:1,c=t;o>1e-5;){var d=c+l*Math.min(o,r);s.push(R.call(this,e,c,d)),o-=Math.abs(d-c),c=d}return s},R=function(e,t,n){var a=(n-t)/2,i=e*Math.cos(a),r=e*Math.sin(a),o=i,s=-r,l=o*o+s*s,c=l+o*i+s*r,d=4/3*(Math.sqrt(2*l*c)-c)/(o*r-s*i),u=o-d*s,h=s+d*o,p=u,f=-h,m=a+t,g=Math.cos(m),v=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*v,y2:u*v+h*g,x3:p*g-f*v,y3:p*v+f*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},E=function(e){return 180*e/Math.PI},M=function(e,t,n,a,i,r){var o=e+.5*(n-e),l=t+.5*(a-t),c=i+.5*(n-i),d=r+.5*(a-r),u=Math.min(e,i,o,c),h=Math.max(e,i,o,c),p=Math.min(t,r,l,d),f=Math.max(t,r,l,d);return new s(u,p,h-u,f-p)},T=function(e,t,n,a,i,r,o,l){var c,d,u,h,p,f,m,g,v,y,b,x,S,_,w=n-e,N=a-t,k=i-n,C=r-a,j=o-i,P=l-r;for(d=0;d<41;d++)v=(m=(u=e+(c=d/40)*w)+c*((p=n+c*k)-u))+c*(p+c*(i+c*j-p)-m),y=(g=(h=t+c*N)+c*((f=a+c*C)-h))+c*(f+c*(r+c*P-f)-g),0==d?(b=v,x=y,S=v,_=y):(b=Math.min(b,v),x=Math.min(x,y),S=Math.max(S,v),_=Math.max(_,y));return new s(Math.round(b),Math.round(x),Math.round(S-b),Math.round(_-x))},D=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Ot.API),function(e){var t=function(e){var t,n,a,i,r,o,s,l,c,d;for(/[^\x00-\xFF]/.test(e),n=[],a=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>a;a+=4)0!==(r=(e.charCodeAt(a)<<24)+(e.charCodeAt(a+1)<<16)+(e.charCodeAt(a+2)<<8)+e.charCodeAt(a+3))?(o=(r=((r=((r=((r=(r-(d=r%85))/85)-(c=r%85))/85)-(l=r%85))/85)-(s=r%85))/85)%85,n.push(o+33,s+33,l+33,c+33,d+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,a,i,r,o=String,s="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),a=[],i=0,r=(e+=t="uuuuu"[d](e[s]%5||5))[s];r>i;i+=5)n=52200625*(e[c](i)-33)+614125*(e[c](i+1)-33)+7225*(e[c](i+2)-33)+85*(e[c](i+3)-33)+(e[c](i+4)-33),a.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(a,t[s]),o.fromCharCode.apply(o,a)},a=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",a=0;a<e.length;a+=2)n+=String.fromCharCode("0x"+(e[a]+e[a+1]));return n},i=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=nt(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,r){var o=0,s=e||"",l=[];for("string"==typeof(r=r||[])&&(r=[r]),o=0;o<r.length;o+=1)switch(r[o]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=t(s),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=a(s),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+r[o]+'" is not implemented')}return{data:s,reverseChain:l.reverse().join(" ")}}}(Ot.API),(Un=Ot.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var a=void 0;try{a=function(e,t,n){var a=new XMLHttpRequest,i=0,r=function(e){var t=e.length,n=[],a=String.fromCharCode;for(i=0;i<t;i+=1)n.push(a(255&e.charCodeAt(i)));return n.join("")};if(a.open("GET",e,!t),a.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(a.onload=function(){200===a.status?n(r(this.responseText)):n(void 0)}),a.send(null),t&&200===a.status)return r(a.responseText)}(e,t,n)}catch(e){}return a}(e,t,n)},Un.loadImageFile=Un.loadFile,function(e){function t(){return(rt.html2canvas?Promise.resolve(rt.html2canvas):n.e(239).then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function a(){return(rt.DOMPurify?Promise.resolve(rt.DOMPurify):n.e(213).then(n.t.bind(n,6213,23))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var i=function(e){var t=(0,le.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},r=function(e,t){var n=document.createElement(e);for(var a in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[a]=t.style[a];return n},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),a=e.convert(Promise.resolve(),n);return(a=a.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(i(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(a).then(function(t){return this.set({src:r("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var a=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||a.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(a.value=t.value),a.addEventListener("load",function(){a.scrollTop=t.scrollTop,a.scrollLeft=t.scrollLeft},!0)),a}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,a="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:a,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var r=0;r<n.length;++r){var o=n[r],s=o.src.find(function(e){return"truetype"===e.format});s&&t.addFont(s.url,o.ref.name,o.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==i(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},o.prototype.setMargin=function(e){return this.then(function(){switch(i(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||Ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,n,a){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=a&&(this.progress.stack=a),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,a){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,a?this.progress.stack.concat(a):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var a=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),i=n.call(a,e,t);return o.convert(i,this.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Ot.getPageSize=function(e,t,n){if("object"===(0,le.A)(e)){var a=e;e=a.orientation,t=a.unit||t,n=a.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i,r=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+t}var s,l=0,c=0;if(o.hasOwnProperty(r))l=o[r][1]/i,c=o[r][0]/i;else try{l=n[1],c=n[0]}catch(Un){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",c>l&&(s=c,c=l,l=s);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(s=c,c=l,l=s)}return{width:c,height:l,unit:t,k:i,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Rn):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(Ot.API),Ot.API.addJS=function(e){return Gn=e,this.internal.events.subscribe("postPutResources",function(){qn=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qn+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Hn=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Gn+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==qn&&void 0!==Hn&&this.internal.out("/Names <</JavaScript "+qn+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=e.outline.render().split(/\r\n/),i=0;i<a.length;i++){var r=a[i],o=n.exec(r);if(null!=o){var s=o[1];e.internal.newObjectDeferredBegin(s,!1)}e.internal.write(r)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(i=0;i<l;i++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<c.length;i++)e.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var a={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<t.children.length;a++){var i=t.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),a>0&&this.line("/Prev "+this.makeRef(t.children[a-1])),a<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var r=this.count=this.count_r({count:0},i);if(r>0&&this.line("/Count "+r),i.options&&i.options.pageNumber){var o=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<t.children.length;s++)this.renderItems(t.children[s])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Ot.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,a,i,r,o){var s,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=r||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(s=function(e){for(var n,a=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,r={width:0,height:0,numcomponents:1},o=4;o<i;o+=2){if(o+=a,-1!==t.indexOf(e.charCodeAt(o+1))){n=256*e.charCodeAt(o+5)+e.charCodeAt(o+6),r={width:256*e.charCodeAt(o+7)+e.charCodeAt(o+8),height:n,numcomponents:e.charCodeAt(o+9)};break}a=256*e.charCodeAt(o+2)+e.charCodeAt(o+3)}return r}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}c={data:e,width:s.width,height:s.height,colorSpace:o,bitsPerComponent:8,filter:l,index:n,alias:a}}return c}}(Ot.API);var Vn,Kn,Yn,Zn,$n,Qn=function(){var e,t,n;function a(e){var t,n,a,i,r,o,s,l,c,d,u,h,p,f;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},r=this.readUInt16(),i=this.readUInt16()||100,o.delay=1e3*r/i,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=o?o.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(a=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>a)throw new Error("More transparent colors than palette size");if((d=a-this.transparency.indexed.length)>0)for(p=0;0<=d?p<d:p>d;0<=d?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(u=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,u.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,u.slice(s+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),a=0,i=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function r(r,o,s,l){var c,d,u,h,p,f,m,g,v,y,b,x,S,_,w,N,k,C,j,P,A,L=Math.ceil((i.width-r)/s),F=Math.ceil((i.height-o)/l),I=i.width==L&&i.height==F;for(_=t*L,x=I?n:new Uint8Array(_*F),f=e.length,S=0,d=0;S<F&&a<f;){switch(e[a++]){case 0:for(h=k=0;k<_;h=k+=1)x[d++]=e[a++];break;case 1:for(h=C=0;C<_;h=C+=1)c=e[a++],p=h<t?0:x[d-t],x[d++]=(c+p)%256;break;case 2:for(h=j=0;j<_;h=j+=1)c=e[a++],u=(h-h%t)/t,w=S&&x[(S-1)*_+u*t+h%t],x[d++]=(w+c)%256;break;case 3:for(h=P=0;P<_;h=P+=1)c=e[a++],u=(h-h%t)/t,p=h<t?0:x[d-t],w=S&&x[(S-1)*_+u*t+h%t],x[d++]=(c+Math.floor((p+w)/2))%256;break;case 4:for(h=A=0;A<_;h=A+=1)c=e[a++],u=(h-h%t)/t,p=h<t?0:x[d-t],0===S?w=N=0:(w=x[(S-1)*_+u*t+h%t],N=u&&x[(S-1)*_+(u-1)*t+h%t]),m=p+w-N,g=Math.abs(m-p),y=Math.abs(m-w),b=Math.abs(m-N),v=g<=y&&g<=b?p:y<=b?w:N,x[d++]=(c+v)%256;break;default:throw new Error("Invalid filter algorithm: "+e[a-1])}if(!I){var R=((o+S*l)*i.width+r)*t,E=S*_;for(h=0;h<L;h+=1){for(var M=0;M<t;M+=1)n[R++]=x[E++];R+=(s-1)*t}}S++}}return e=at(e),1==i.interlaceMethod?(r(0,0,8,8),r(4,0,8,8),r(0,4,4,8),r(2,0,4,4),r(0,2,2,4),r(1,0,2,2),r(0,1,1,2)):r(0,0,1,1),n},a.prototype.decodePalette=function(){var e,t,n,a,i,r,o,s,l;for(n=this.palette,r=this.transparency.indexed||[],i=new Uint8Array((r.length||0)+n.length),a=0,e=0,t=o=0,s=n.length;o<s;t=o+=3)i[a++]=n[t],i[a++]=n[t+1],i[a++]=n[t+2],i[a++]=null!=(l=r[e++])?l:255;return i},a.prototype.copyToImageData=function(e,t){var n,a,i,r,o,s,l,c,d,u,h;if(a=this.colors,d=null,n=this.hasAlphaChannel,this.palette.length&&(d=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),a=4,n=!0),c=(i=e.data||e).length,o=d||t,r=s=0,1===a)for(;r<c;)l=d?4*t[r/4]:s,u=o[l++],i[r++]=u,i[r++]=u,i[r++]=u,i[r++]=n?o[l++]:255,s=l;else for(;r<c;)l=d?4*t[r/4]:s,i[r++]=o[l++],i[r++]=o[l++],i[r++]=o[l++],i[r++]=n?o[l++]:255,s=l},a.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var i=function(){if("[object Window]"===Object.prototype.toString.call(rt)){try{t=rt.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return i(),e=function(e){var a;if(!0===i())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(t){var n,a,i,r,o,s,l,c;if(this.animation){for(c=[],a=o=0,s=(l=this.animation.frames).length;o<s;a=++o)n=l[a],i=t.createImageData(n.width,n.height),r=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,r),n.imageData=i,c.push(n.image=e(i));return c}},a.prototype.renderFrame=function(e,t){var n,a,i;return n=(a=this.animation.frames)[t],i=a[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},a.prototype.animate=function(e){var t,n,a,i,r,o,s=this;return n=0,o=this.animation,i=o.numFrames,a=o.frames,r=o.numPlays,(t=function(){var o,l;if(o=n++%i,l=a[o],s.renderFrame(e,o),i>1&&n/i<r)return s.animation._timeout=setTimeout(t,l.delay)})()},a.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},a.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},a}();function Jn(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,i=e[t++],r=i>>7,o=1<<1+(7&i);e[t++],e[t++];var s=null,l=null;r&&(s=t,l=o,t+=3*o);var c=!0,d=[],u=0,h=null,p=0,f=null;for(this.width=n,this.height=a;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((j=e[t++])>=0))throw Error("Invalid block size");if(0===j)break;t+=j}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],0==(1&m)&&(h=null),p=m>>2&7,t++;break;case 254:for(;;){if(!((j=e[t++])>=0))throw Error("Invalid block size");if(0===j)break;t+=j}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++],S=x>>6&1,_=1<<1+(7&x),w=s,N=l,k=!1;x>>7&&(k=!0,w=t,N=_,t+=3*_);var C=t;for(t++;;){var j;if(!((j=e[t++])>=0))throw Error("Invalid block size");if(0===j)break;t+=j}d.push({x:g,y:v,width:y,height:b,has_local_palette:k,palette_offset:w,palette_size:N,data_offset:C,data_length:t-C,transparent_index:h,interlaced:!!S,delay:u,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return f},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,a){var i=this.frameInfo(t),r=i.width*i.height,o=new Uint8Array(r);Xn(e,i.data_offset,o,r);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,d=n-c,u=c,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),f=h,m=4*d;!0===i.interlaced&&(m+=4*n*7);for(var g=8,v=0,y=o.length;v<y;++v){var b=o[v];if(0===u&&(u=c,(f+=m)>=p&&(m=4*d+4*n*(g-1),f=h+(c+d)*(g<<1),g>>=1)),b===l)f+=4;else{var x=e[s+3*b],S=e[s+3*b+1],_=e[s+3*b+2];a[f++]=_,a[f++]=S,a[f++]=x,a[f++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,a){var i=this.frameInfo(t),r=i.width*i.height,o=new Uint8Array(r);Xn(e,i.data_offset,o,r);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,d=n-c,u=c,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),f=h,m=4*d;!0===i.interlaced&&(m+=4*n*7);for(var g=8,v=0,y=o.length;v<y;++v){var b=o[v];if(0===u&&(u=c,(f+=m)>=p&&(m=4*d+4*n*(g-1),f=h+(c+d)*(g<<1),g>>=1)),b===l)f+=4;else{var x=e[s+3*b],S=e[s+3*b+1],_=e[s+3*b+2];a[f++]=x,a[f++]=S,a[f++]=_,a[f++]=255}--u}}}function Xn(e,t,n,a){for(var i=e[t++],r=1<<i,o=r+1,s=o+1,l=i+1,c=(1<<l)-1,d=0,u=0,h=0,p=e[t++],f=new Int32Array(4096),m=null;;){for(;d<16&&0!==p;)u|=e[t++]<<d,d+=8,1===p?p=e[t++]:--p;if(d<l)break;var g=u&c;if(u>>=l,d-=l,g!==r){if(g===o)break;for(var v=g<s?g:m,y=0,b=v;b>r;)b=f[b]>>8,++y;var x=b;if(h+y+(v!==g?1:0)>a)return void st.log("Warning, gif stream longer than expected.");n[h++]=x;var S=h+=y;for(v!==g&&(n[h++]=x),b=v;y--;)b=f[b],n[--S]=255&b,b>>=8;null!==m&&s<4096&&(f[s++]=m<<8|x,s>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else s=o+1,c=(1<<(l=i+1))-1,m=null}return h!==a&&st.log("Warning, gif stream shorter than expected."),n}function ea(e){var t,n,a,i,r,o=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),p=new Array(64),f=new Array(64),m=[],g=0,v=7,y=new Array(64),b=new Array(64),x=new Array(64),S=new Array(256),_=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(e,t){for(var n=0,a=0,i=new Array,r=1;r<=16;r++){for(var o=1;o<=e[r];o++)i[t[a]]=[],i[t[a]][0]=n,i[t[a]][1]=r,a++,n++;n*=2}return i}function R(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(E(255),E(0)):E(g),v=7,g=0)}function E(e){m.push(e)}function M(e){E(e>>8&255),E(255&e)}function T(e,t,n,a,i){for(var r,o=i[0],s=i[240],l=function(e,t){var n,a,i,r,o,s,l,c,d,u,h=0;for(d=0;d<8;++d){n=e[h],a=e[h+1],i=e[h+2],r=e[h+3],o=e[h+4],s=e[h+5],l=e[h+6];var f=n+(c=e[h+7]),m=n-c,g=a+l,v=a-l,y=i+s,b=i-s,x=r+o,S=r-o,_=f+x,w=f-x,N=g+y,k=g-y;e[h]=_+N,e[h+4]=_-N;var C=.707106781*(k+w);e[h+2]=w+C,e[h+6]=w-C;var j=.382683433*((_=S+b)-(k=v+m)),P=.5411961*_+j,A=1.306562965*k+j,L=.707106781*(N=b+v),F=m+L,I=m-L;e[h+5]=I+P,e[h+3]=I-P,e[h+1]=F+A,e[h+7]=F-A,h+=8}for(h=0,d=0;d<8;++d){n=e[h],a=e[h+8],i=e[h+16],r=e[h+24],o=e[h+32],s=e[h+40],l=e[h+48];var R=n+(c=e[h+56]),E=n-c,M=a+l,T=a-l,D=i+s,O=i-s,B=r+o,z=r-o,q=R+B,H=R-B,G=M+D,U=M-D;e[h]=q+G,e[h+32]=q-G;var W=.707106781*(U+H);e[h+16]=H+W,e[h+48]=H-W;var V=.382683433*((q=z+O)-(U=T+E)),K=.5411961*q+V,Y=1.306562965*U+V,Z=.707106781*(G=O+T),$=E+Z,Q=E-Z;e[h+40]=Q+K,e[h+24]=Q-K,e[h+8]=$+Y,e[h+56]=$-Y,h++}for(d=0;d<64;++d)u=e[d]*t[d],p[d]=u>0?u+.5|0:u-.5|0;return p}(e,t),c=0;c<64;++c)f[w[c]]=l[c];var d=f[0]-n;n=f[0],0==d?R(a[0]):(R(a[h[r=32767+d]]),R(u[r]));for(var m=63;m>0&&0==f[m];)m--;if(0==m)return R(o),n;for(var g,v=1;v<=m;){for(var y=v;0==f[v]&&v<=m;)++v;var b=v-y;if(b>=16){g=b>>4;for(var x=1;x<=g;++x)R(s);b&=15}r=32767+f[v],R(i[(b<<4)+h[r]]),R(u[r]),v++}return 63!=m&&R(o),n}function D(e){e=Math.min(Math.max(e,1),100),r!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var a=o((t[n]*e+50)/100);a=Math.min(Math.max(a,1),255),s[w[n]]=a}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],r=0;r<64;r++){var u=o((i[r]*e+50)/100);u=Math.min(Math.max(u,1),255),l[w[r]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,f=0;f<8;f++)for(var m=0;m<8;m++)c[p]=1/(s[w[p]]*h[f]*h[m]*8),d[p]=1/(l[w[p]]*h[f]*h[m]*8),p++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),r=e)}this.encode=function(e,r){r&&D(r),m=new Array,g=0,v=7,M(65496),M(65504),M(16),E(74),E(70),E(73),E(70),E(0),E(1),E(1),E(0),M(1),M(1),E(0),E(0),function(){M(65499),M(132),E(0);for(var e=0;e<64;e++)E(s[e]);E(1);for(var t=0;t<64;t++)E(l[t])}(),function(e,t){M(65472),M(17),E(8),M(t),M(e),E(3),E(1),E(17),E(0),E(2),E(17),E(1),E(3),E(17),E(1)}(e.width,e.height),function(){M(65476),M(418),E(0);for(var e=0;e<16;e++)E(N[e+1]);for(var t=0;t<=11;t++)E(k[t]);E(16);for(var n=0;n<16;n++)E(C[n+1]);for(var a=0;a<=161;a++)E(j[a]);E(1);for(var i=0;i<16;i++)E(P[i+1]);for(var r=0;r<=11;r++)E(A[r]);E(17);for(var o=0;o<16;o++)E(L[o+1]);for(var s=0;s<=161;s++)E(F[s])}(),M(65498),M(12),E(3),E(1),E(0),E(2),E(17),E(3),E(17),E(0),E(63),E(0);var o=0,u=0,h=0;g=0,v=7,this.encode.displayName="_encode_";for(var p,f,S,w,I,O,B,z,q,H=e.data,G=e.width,U=e.height,W=4*G,V=0;V<U;){for(p=0;p<W;){for(I=W*V+p,B=-1,z=0,q=0;q<64;q++)O=I+(z=q>>3)*W+(B=4*(7&q)),V+z>=U&&(O-=W*(V+1+z-U)),p+B>=W&&(O-=p+B-W+4),f=H[O++],S=H[O++],w=H[O++],y[q]=(_[f]+_[S+256|0]+_[w+512|0]>>16)-128,b[q]=(_[f+768|0]+_[S+1024|0]+_[w+1280|0]>>16)-128,x[q]=(_[f+1280|0]+_[S+1536|0]+_[w+1792|0]>>16)-128;o=T(y,c,o,t,a),u=T(b,d,u,n,i),h=T(x,d,h,n,i),p+=32}V+=8}if(v>=0){var K=[];K[1]=v+1,K[0]=(1<<v+1)-1,R(K)}return M(65497),new Uint8Array(m)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)S[t]=e(t)}(),t=I(N,k),n=I(P,A),a=I(C,j),i=I(L,F),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var a=e;a<t;a++)h[32767+a]=n,u[32767+a]=[],u[32767+a][1]=n,u[32767+a][0]=a;for(var i=-(t-1);i<=-e;i++)h[32767+i]=n,u[32767+i]=[],u[32767+i][1]=n,u[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)_[e]=19595*e,_[e+256|0]=38470*e,_[e+512|0]=7471*e+32768,_[e+768|0]=-11059*e,_[e+1024|0]=-21709*e,_[e+1280|0]=32768*e+8421375,_[e+1536|0]=-27439*e,_[e+1792|0]=-5329*e}(),D(e)}function ta(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function na(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var a=0;4>a;a++)if(e[t+a]!=n.charCodeAt(a))return!0;return!1}function a(e,t,n,a,i){for(var r=0;r<i;r++)e[t+r]=n[a+r]}function i(e,t,n,a){for(var i=0;i<a;i++)e[t+i]=n}function r(e){return new Int32Array(e)}function o(e,t){for(var n=[],a=0;a<e;a++)n.push(new t);return n}function s(e,t){var n=[];return function e(n,a,i){for(var r=i[a],o=0;o<r&&(n.push(i.length>a+1?[]:new t),!(i.length<a+1));o++)e(n[o],a+1,i)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,a,i,r){t(!(i%a));do{e[n+(i-=a)]=r}while(0<i)}function d(e,n,a,i,o){if(t(2328>=o),512>=o)var s=r(512);else if(null==(s=r(o)))return 0;return function(e,n,a,i,o,s){var d,h,p=n,f=1<<a,m=r(16),g=r(16);for(t(0!=o),t(null!=i),t(null!=e),t(0<a),h=0;h<o;++h){if(15<i[h])return 0;++m[i[h]]}if(m[0]==o)return 0;for(g[1]=0,d=1;15>d;++d){if(m[d]>1<<d)return 0;g[d+1]=g[d]+m[d]}for(h=0;h<o;++h)d=i[h],0<i[h]&&(s[g[d]++]=h);if(1==g[15])return(i=new u).g=0,i.value=s[0],c(e,p,1,f,i),f;var v,y=-1,b=f-1,x=0,S=1,_=1,w=1<<a;for(h=0,d=1,o=2;d<=a;++d,o<<=1){if(S+=_<<=1,0>(_-=m[d]))return 0;for(;0<m[d];--m[d])(i=new u).g=d,i.value=s[h++],c(e,p+x,o,w,i),x=l(x,d)}for(d=a+1,o=2;15>=d;++d,o<<=1){if(S+=_<<=1,0>(_-=m[d]))return 0;for(;0<m[d];--m[d]){if(i=new u,(x&b)!=y){for(p+=w,v=1<<(y=d)-a;15>y&&!(0>=(v-=m[y]));)++y,v<<=1;f+=w=1<<(v=y-a),e[n+(y=x&b)].g=v+a,e[n+y].value=p-n-y}i.g=d-a,i.value=s[h++],c(e,p+(x>>a),o,w,i),x=l(x,d)}}return S!=2*g[15]-1?0:f}(e,n,a,i,o,s)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function p(){this.G=o(5,u),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Bn,h)}function f(e,n,a,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=a,e.Jd=n,e.Yc=a+i,e.Zc=4<=i?a+i-4+1:a,C(e)}function m(e,t){for(var n=0;0<t--;)n|=P(e,128)<<t;return n}function g(e,t){var n=m(e,t);return j(e)?-n:n}function v(e,n,a,i){var r,o=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),r=0;r<i;++r)o+=n[a+r]<<8*r;e.Ra=o,e.bb=i,e.oa=n,e.pa=a}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Hn-8>>>0,++e.bb,e.u-=8;w(e)&&(e.h=1,e.u=0)}function b(e,n){if(t(0<=n),!e.h&&n<=qn){var a=_(e)&zn[n];return e.u+=n,y(e),a}return e.h=1,e.u=0}function x(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function S(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function _(e){return e.Ra>>>(e.u&Hn-1)>>>0}function w(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Hn}function N(e,t){e.u=t,e.h=w(e)}function k(e){e.u>=Gn&&(t(e.u>=Gn),y(e))}function C(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function j(e){return m(e,1)}function P(e,t){var n=e.Ca;0>e.b&&C(e);var a=e.b,i=n*t>>>8,r=(e.I>>>a>i)+0;for(r?(n-=i,e.I-=i+1<<a>>>0):n=i+1,a=n,i=0;256<=a;)i+=8,a>>=8;return a=7^i+Un[a],e.b-=a,e.Ca=(n<<a)-1,r}function A(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function L(e,t){return e[t+0]|e[t+1]<<8}function F(e,t){return L(e,t)|e[t+2]<<16}function I(e,t){return L(e,t)|L(e,t+2)<<16}function R(e,n){var a=1<<n;return t(null!=e),t(0<n),e.X=r(a),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function E(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),a(n.X,0,e.X,0,1<<n.Xa)}function M(){this.X=[],this.Xa=this.Mb=0}function T(e,n,a,i){t(null!=a),t(null!=i);var r=a[0],o=i[0];return 0==r&&(r=(e*o+n/2)/n),0==o&&(o=(n*r+e/2)/e),0>=r||0>=o?0:(a[0]=r,i[0]=o,1)}function D(e,t){return e+(1<<t)-1>>>t}function O(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function B(t,n){e[n]=function(n,a,i,r,o,s,l){var c;for(c=0;c<o;++c){var d=e[t](s[l+c-1],i,r+c);s[l+c]=O(n[a+c],d)}}}function z(){this.ud=this.hd=this.jd=0}function q(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function H(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function G(e,t){return H(e+(e-t+.5>>1))}function U(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function W(e,t,n,a,i,r,o){for(a=r[o-1],n=0;n<i;++n)r[o+n]=a=O(e[t+n],a)}function V(e,t,n,a,i){var r;for(r=0;r<n;++r){var o=e[t+r],s=o>>8&255,l=16711935&(l=(l=16711935&o)+((s<<16)+s));a[i+r]=(4278255360&o)+l>>>0}}function K(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function Y(e,t,n,a,i,r){var o;for(o=0;o<a;++o){var s=t[n+o],l=s>>>8,c=s,d=255&(d=(d=s>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),i[r+o]=(4278255360&s)+(d<<16)+c}}function Z(t,n,a,i,r){e[n]=function(e,t,n,a,o,s,l,c,d){for(a=l;a<c;++a)for(l=0;l<d;++l)o[s++]=r(n[i(e[t++])])},e[t]=function(t,n,o,s,l,c,d){var u=8>>t.b,h=t.Ea,p=t.K[0],f=t.w;if(8>u)for(t=(1<<t.b)-1,f=(1<<u)-1;n<o;++n){var m,g=0;for(m=0;m<h;++m)m&t||(g=i(s[l++])),c[d++]=r(p[g&f]),g>>=u}else e["VP8LMapColor"+a](s,l,p,f,c,d,n,o,h)}}function $(e,t,n,a,i){for(n=t+n;t<n;){var r=e[t++];a[i++]=r>>16&255,a[i++]=r>>8&255,a[i++]=255&r}}function Q(e,t,n,a,i){for(n=t+n;t<n;){var r=e[t++];a[i++]=r>>16&255,a[i++]=r>>8&255,a[i++]=255&r,a[i++]=r>>24&255}}function J(e,t,n,a,i){for(n=t+n;t<n;){var r=(o=e[t++])>>16&240|o>>12&15,o=240&o|o>>28&15;a[i++]=r,a[i++]=o}}function X(e,t,n,a,i){for(n=t+n;t<n;){var r=(o=e[t++])>>16&248|o>>13&7,o=o>>5&224|o>>3&31;a[i++]=r,a[i++]=o}}function ee(e,t,n,a,i){for(n=t+n;t<n;){var r=e[t++];a[i++]=255&r,a[i++]=r>>8&255,a[i++]=r>>16&255}}function te(e,t,n,i,r,o){if(0==o)for(n=t+n;t<n;)A(i,((o=e[t++])[0]>>24|o[1]>>8&65280|o[2]<<8&16711680|o[3]<<24)>>>0),r+=32;else a(i,r,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function ae(e){return e==Ga||e==Ua||e==Wa||e==Va}function ie(){this.eb=[],this.size=this.A=this.fb=0}function re(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new re,this.sd=null}function se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var n=e.T,i=t.ba.f.RGBA,r=i.eb,o=i.fb+e.ka*i.A,s=vi[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,p=e.W,f=t.cc,m=t.dc,g=t.Mc,v=t.Nc,y=e.ka,b=e.ka+e.T,x=e.U,S=x+1>>1;for(0==y?s(l,c,null,null,d,u,h,p,d,u,h,p,r,o,null,null,x):(s(t.ec,t.fc,l,c,f,m,g,v,d,u,h,p,r,o-i.A,r,o,x),++n);y+2<b;y+=2)f=d,m=u,g=h,v=p,u+=e.Rc,p+=e.Rc,o+=2*i.A,s(l,(c+=2*e.fa)-e.fa,l,c,f,m,g,v,d,u,h,p,r,o-i.A,r,o,x);return c+=e.fa,e.j+b<e.o?(a(t.ec,t.fc,l,c,x),a(t.cc,t.dc,d,u,S),a(t.Mc,t.Nc,h,p,S),n--):1&b||s(l,c,null,null,d,u,h,p,d,u,h,p,r,o+i.A,null,null,x),n}function ue(e,n,a){var i=e.F,r=[e.J];if(null!=i){var o=e.U,s=n.ba.S,l=s==za||s==Wa;n=n.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,r[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=n.eb;d=n.fb+d*n.A,e=ka(i,r[0],e.width,o,c,u,d+(l?0:3),n.A),t(a==c),e&&ae(s)&&wa(u,d,l,o,c,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,a=11>n,i=n==Da||n==Ba||n==za||n==qa||12==n||ae(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Tn(t.Oa,e,i?11:12))return 0;if(i&&ae(n)&&bn(),e.da)alert("todo:use_scaling");else{if(a){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=r(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=de,bn()}}else alert("todo:EmitYUV");i&&(t.Jb=ue,a&&vn())}if(a&&!Fi){for(e=0;256>e;++e)Ii[e]=89858*(e-128)+Ci>>ki,Mi[e]=-22014*(e-128)+Ci,Ei[e]=-45773*(e-128),Ri[e]=113618*(e-128)+Ci>>ki;for(e=ji;e<Pi;++e)t=76283*(e-16)+Ci>>ki,Ti[e-ji]=We(t,255),Di[e-ji]=We(t+8>>4,15);Fi=1}return 1}function pe(e){var n=e.ma,a=e.U,i=e.T;return t(!(1&e.ka)),0>=a||0>=i?0:(a=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,a),n.Dc+=a,1)}function fe(e){e.ma.memory=null}function me(e,t,n,a){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,n[0]=b(e,14)+1,a[0]=b(e,1),0!=b(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+b(t,n)+1}function ve(e,t){return 120<t?t-120:1<=(n=((n=Ja[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ye(e,t,n){var a=_(n),i=e[t+=255&a].g-8;return 0<i&&(N(n,n.u+8),a=_(n),t+=e[t].value,t+=a&(1<<i)-1),N(n,n.u+e[t].g),e[t].value}function be(e,n,a){return a.g+=e.g,a.value+=e.value<<n>>>0,t(8>=a.g),e.g}function xe(e,n,a){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(a>>i)+(n>>i)])<e.Wb),e.Ya[n]}function Se(e,n,i,r){var o=e.ab,s=e.c*n,l=e.C;n=l+n;var c=i,d=r;for(r=e.Ta,i=e.Ua;0<o--;){var u=e.gc[o],h=l,p=n,f=c,m=d,g=(d=r,c=i,u.Ea);switch(t(h<p),t(p<=u.nc),u.hc){case 2:Kn(f,m,(p-h)*g,d,c);break;case 0:var v=h,y=p,b=d,x=c,S=(C=u).Ea;0==v&&(Wn(f,m,null,null,1,b,x),W(f,m+1,0,0,S-1,b,x+1),m+=S,x+=S,++v);for(var _=1<<C.b,w=_-1,N=D(S,C.b),k=C.K,C=C.w+(v>>C.b)*N;v<y;){var j=k,P=C,A=1;for(Vn(f,m,b,x-S,1,b,x);A<S;){var L=(A&~w)+_;L>S&&(L=S),(0,Jn[j[P++]>>8&15])(f,m+ +A,b,x+A-S,L-A,b,x+A),A=L}m+=S,x+=S,++v&w||(C+=N)}p!=u.nc&&a(d,c-g,d,c+(p-h-1)*g,g);break;case 1:for(g=f,y=m,S=(f=u.Ea)-(x=f&~(b=(m=1<<u.b)-1)),v=D(f,u.b),_=u.K,u=u.w+(h>>u.b)*v;h<p;){for(w=_,N=u,k=new z,C=y+x,j=y+f;y<C;)K(w[N++],k),Xn(k,g,y,m,d,c),y+=m,c+=m;y<j&&(K(w[N++],k),Xn(k,g,y,S,d,c),y+=S,c+=S),++h&b||(u+=v)}break;case 3:if(f==d&&m==c&&0<u.b){for(y=d,f=g=c+(p-h)*g-(x=(p-h)*D(u.Ea,u.b)),m=d,b=c,v=[],x=(S=x)-1;0<=x;--x)v[x]=m[b+x];for(x=S-1;0<=x;--x)y[f+x]=v[x];Yn(u,h,p,d,g,d,c)}else Yn(u,h,p,f,m,d,c)}c=r,d=i}d!=i&&a(r,i,c,d,s)}function _e(e,n){var a=e.V,i=e.Ba+e.c*e.C,r=n-e.C;if(t(n<=e.l.o),t(16>=r),0<r){var o=e.l,s=e.Ta,l=e.Ua,c=o.width;if(Se(e,r,a,i),r=l=[l],t((a=e.C)<(i=n)),t(o.v<o.va),i>o.o&&(i=o.o),a<o.j){var d=o.j-a;a=o.j,r[0]+=d*c}if(a>=i?a=0:(r[0]+=4*o.v,o.ka=a-o.j,o.U=o.va-o.v,o.T=i-a,a=1),a){if(l=l[0],11>(a=e.ca).S){var u=a.f.RGBA,h=(i=a.S,r=o.U,o=o.T,d=u.eb,u.A),p=o;for(u=u.fb+e.Ma*u.A;0<p--;){var f=s,m=l,g=r,v=d,y=u;switch(i){case Ta:ea(f,m,g,v,y);break;case Da:ta(f,m,g,v,y);break;case Ga:ta(f,m,g,v,y),wa(v,y,0,g,1,0);break;case Oa:ia(f,m,g,v,y);break;case Ba:te(f,m,g,v,y,1);break;case Ua:te(f,m,g,v,y,1),wa(v,y,0,g,1,0);break;case za:te(f,m,g,v,y,0);break;case Wa:te(f,m,g,v,y,0),wa(v,y,1,g,1,0);break;case qa:na(f,m,g,v,y);break;case Va:na(f,m,g,v,y),Na(v,y,g,1,0);break;case Ha:aa(f,m,g,v,y);break;default:t(0)}l+=c,u+=h}e.Ma+=o}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=a.height)}}e.C=n,t(e.C<=e.i)}function we(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,a=e.Ya[t].H;if(0<n[1][a[1]+0].g||0<n[2][a[2]+0].g||0<n[3][a[3]+0].g)return 0}return 1}function Ne(e,n,a,i,r,o){if(0!=e.Z){var s=e.qd,l=e.rd;for(t(null!=gi[e.Z]);n<a;++n)gi[e.Z](s,l,i,r,i,r,o),s=i,l=r,r+=o;e.qd=s,e.rd=l}}function ke(e,n){var a=e.l.ma,i=0==a.Z||1==a.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var r=e.l.width,o=a.ca,s=a.tb+r*i,l=e.V,c=e.Ba+e.c*i,d=e.gc;t(1==e.ab),t(3==d[0].hc),$n(d[0],i,n,l,c,o,s),Ne(a,i,n,o,s,r)}e.C=e.Ma=n}function Ce(e,n,a,i,r,o,s){var l=e.$/i,c=e.$%i,d=e.m,u=e.s,h=a+e.$,p=h;r=a+i*r;var f=a+i*o,m=280+u.ua,g=e.Pb?l:16777216,v=0<u.ua?u.Wa:null,y=u.wc,b=h<f?xe(u,c,l):null;t(e.C<o),t(f<=r);var x=!1;e:for(;;){for(;x||h<f;){var S=0;if(l>=g){var C=h-a;t((g=e).Pb),g.wd=g.m,g.xd=C,0<g.s.ua&&E(g.s.Wa,g.s.vb),g=l+ei}if(c&y||(b=xe(u,c,l)),t(null!=b),b.Qb&&(n[h]=b.qb,x=!0),!x)if(k(d),b.jc){S=d,C=n;var j=h,P=b.pd[_(S)&Bn-1];t(b.jc),256>P.g?(N(S,S.u+P.g),C[j]=P.value,S=0):(N(S,S.u+P.g-256),t(256<=P.value),S=P.value),0==S&&(x=!0)}else S=ye(b.G[0],b.H[0],d);if(d.h)break;if(x||256>S){if(!x)if(b.nd)n[h]=(b.qb|S<<8)>>>0;else{if(k(d),x=ye(b.G[1],b.H[1],d),k(d),C=ye(b.G[2],b.H[2],d),j=ye(b.G[3],b.H[3],d),d.h)break;n[h]=(j<<24|x<<16|S<<8|C)>>>0}if(x=!1,++h,++c>=i&&(c=0,++l,null!=s&&l<=o&&!(l%16)&&s(e,l),null!=v))for(;p<h;)S=n[p++],v.X[(506832829*S&4294967295)>>>v.Mb]=S}else if(280>S){if(S=ge(S-256,d),C=ye(b.G[4],b.H[4],d),k(d),C=ve(i,C=ge(C,d)),d.h)break;if(h-a<C||r-h<S)break e;for(j=0;j<S;++j)n[h+j]=n[h+j-C];for(h+=S,c+=S;c>=i;)c-=i,++l,null!=s&&l<=o&&!(l%16)&&s(e,l);if(t(h<=r),c&y&&(b=xe(u,c,l)),null!=v)for(;p<h;)S=n[p++],v.X[(506832829*S&4294967295)>>>v.Mb]=S}else{if(!(S<m))break e;for(x=S-280,t(null!=v);p<h;)S=n[p++],v.X[(506832829*S&4294967295)>>>v.Mb]=S;S=h,t(!(x>>>(C=v).Xa)),n[S]=C.X[x],x=!0}x||t(d.h==w(d))}if(e.Pb&&d.h&&h<r)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&E(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=s&&s(e,l>o?o:l),e.a=0,e.$=h-a}return 1}return e.a=3,0}function je(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Pe(){var t=new sn;return null==t?null:(t.a=0,t.xb=mi,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Kn=V,Xn=Y,ea=$,ta=Q,na=J,aa=X,ia=ee,e.VP8LMapColor32b=Zn,e.VP8LMapColor8b=Qn,t)}function Ae(e,n,a,s,l){var c=1,h=[e],f=[n],m=s.m,g=s.s,v=null,y=0;e:for(;;){if(a)for(;c&&b(m,1);){var x=h,S=f,w=s,C=1,j=w.m,P=w.gc[w.ab],A=b(j,2);if(w.Oc&1<<A)c=0;else{switch(w.Oc|=1<<A,P.hc=A,P.Ea=x[0],P.nc=S[0],P.K=[null],++w.ab,t(4>=w.ab),A){case 0:case 1:P.b=b(j,3)+2,C=Ae(D(P.Ea,P.b),D(P.nc,P.b),0,w,P.K),P.K=P.K[0];break;case 3:var L,F=b(j,8)+1,I=16<F?0:4<F?1:2<F?2:3;if(x[0]=D(P.Ea,I),P.b=I,L=C=Ae(F,1,0,w,P.K)){var E,M=F,T=P,B=1<<(8>>T.b),z=r(B);if(null==z)L=0;else{var q=T.K[0],H=T.w;for(z[0]=T.K[0][0],E=1;E<1*M;++E)z[E]=O(q[H+E],z[E-1]);for(;E<4*B;++E)z[E]=0;T.K[0]=null,T.K[0]=z,L=1}}C=L;break;case 2:break;default:t(0)}c=C}}if(h=h[0],f=f[0],c&&b(m,1)&&!(c=1<=(y=b(m,4))&&11>=y)){s.a=3;break e}var G;if(G=c)t:{var U,W,V,K=s,Y=h,Z=f,$=y,Q=a,J=K.m,X=K.s,ee=[null],te=1,ne=0,ae=Xa[$];n:for(;;){if(Q&&b(J,1)){var ie=b(J,3)+2,re=D(Y,ie),oe=D(Z,ie),se=re*oe;if(!Ae(re,oe,0,K,ee))break n;for(ee=ee[0],X.xc=ie,U=0;U<se;++U){var le=ee[U]>>8&65535;ee[U]=le,le>=te&&(te=le+1)}}if(J.h)break n;for(W=0;5>W;++W){var ce=Za[W];!W&&0<$&&(ce+=1<<$),ne<ce&&(ne=ce)}var de=o(te*ae,u),ue=te,he=o(ue,p);if(null==he)var pe=null;else t(65536>=ue),pe=he;var fe=r(ne);if(null==pe||null==fe||null==de){K.a=1;break n}var me=de;for(U=V=0;U<te;++U){var ge=pe[U],ve=ge.G,ye=ge.H,xe=0,Se=1,_e=0;for(W=0;5>W;++W){ce=Za[W],ve[W]=me,ye[W]=V,!W&&0<$&&(ce+=1<<$);a:{var we,Ne=ce,ke=K,Pe=fe,Le=me,Fe=V,Ie=0,Re=ke.m,Ee=b(Re,1);if(i(Pe,0,0,Ne),Ee){var Me=b(Re,1)+1,Te=b(Re,1),De=b(Re,0==Te?1:8);Pe[De]=1,2==Me&&(Pe[De=b(Re,8)]=1);var Oe=1}else{var Be=r(19),ze=b(Re,4)+4;if(19<ze){ke.a=3;var qe=0;break a}for(we=0;we<ze;++we)Be[Qa[we]]=b(Re,3);var He=void 0,Ge=void 0,Ue=ke,We=Be,Ve=Ne,Ke=Pe,Ye=0,Ze=Ue.m,$e=8,Qe=o(128,u);i:for(;d(Qe,0,7,We,19);){if(b(Ze,1)){var Je=2+2*b(Ze,3);if((He=2+b(Ze,Je))>Ve)break i}else He=Ve;for(Ge=0;Ge<Ve&&He--;){k(Ze);var Xe=Qe[0+(127&_(Ze))];N(Ze,Ze.u+Xe.g);var et=Xe.value;if(16>et)Ke[Ge++]=et,0!=et&&($e=et);else{var tt=16==et,nt=et-16,at=Ya[nt],it=b(Ze,Ka[nt])+at;if(Ge+it>Ve)break i;for(var rt=tt?$e:0;0<it--;)Ke[Ge++]=rt}}Ye=1;break i}Ye||(Ue.a=3),Oe=Ye}(Oe=Oe&&!Re.h)&&(Ie=d(Le,Fe,8,Pe,Ne)),Oe&&0!=Ie?qe=Ie:(ke.a=3,qe=0)}if(0==qe)break n;if(Se&&1==$a[W]&&(Se=0==me[V].g),xe+=me[V].g,V+=qe,3>=W){var ot,st=fe[0];for(ot=1;ot<ce;++ot)fe[ot]>st&&(st=fe[ot]);_e+=st}}if(ge.nd=Se,ge.Qb=0,Se&&(ge.qb=(ve[3][ye[3]+0].value<<24|ve[1][ye[1]+0].value<<16|ve[2][ye[2]+0].value)>>>0,0==xe&&256>ve[0][ye[0]+0].value&&(ge.Qb=1,ge.qb+=ve[0][ye[0]+0].value<<8)),ge.jc=!ge.Qb&&6>_e,ge.jc){var lt,ct=ge;for(lt=0;lt<Bn;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=be(ht,8,ut),dt>>=be(ct.G[1][ct.H[1]+dt],16,ut),dt>>=be(ct.G[2][ct.H[2]+dt],0,ut),be(ct.G[3][ct.H[3]+dt],24,ut))}}}X.vc=ee,X.Wb=te,X.Ya=pe,X.yc=de,G=1;break t}G=0}if(!(c=G)){s.a=3;break e}if(0<y){if(g.ua=1<<y,!R(g.Wa,y)){s.a=1,c=0;break e}}else g.ua=0;var pt=s,ft=h,mt=f,gt=pt.s,vt=gt.xc;if(pt.c=ft,pt.i=mt,gt.md=D(ft,vt),gt.wc=0==vt?-1:(1<<vt)-1,a){s.xb=fi;break e}if(null==(v=r(h*f))){s.a=1,c=0;break e}c=(c=Ce(s,v,0,h,f,f,null))&&!m.h;break e}return c?(null!=l?l[0]=v:(t(null==v),t(a)),s.$=0,a||je(g)):je(g),c}function Le(e,n){var a=e.c*e.i,i=a+n+16*n;return t(e.c<=n),e.V=r(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+a+n,1)}function Fe(e,n){var a=e.C,i=n-a,r=e.V,o=e.Ba+e.c*a;for(t(n<=e.l.o);0<i;){var s=16<i?16:i,l=e.l.ma,c=e.l.width,d=c*s,u=l.ca,h=l.tb+c*a,p=e.Ta,f=e.Ua;Se(e,s,r,o),Ca(p,f,u,h,d),Ne(l,a,a+s,u,h,c),i-=s,r+=s*e.c,a+=s}t(a==n),e.C=e.Ma=n}function Ie(){this.ub=this.yd=this.td=this.Rb=0}function Re(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ee(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function Me(){this.Yb=function(){var e=[];return function e(t,n,a){for(var i=a[n],r=0;r<i&&(t.push(a.length>n+1?[]:0),!(a.length<n+1));r++)e(t[r],n+1,a)}(e,0,[3,11]),e}()}function Te(){this.jb=r(3),this.Wc=s([4,8],Me),this.Xc=s([4,17],Me)}function De(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Oe(){this.ld=this.La=this.dd=this.tc=0}function Be(){this.Na=this.la=0}function ze(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function qe(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function He(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oe),this.Y=0,this.ya=Array(new qe),this.aa=0,this.l=new Ve}function Ge(){this.y=r(16),this.f=r(8),this.ea=r(8)}function Ue(){this.cb=this.a=0,this.sc="",this.m=new x,this.Od=new Ie,this.Kc=new Re,this.ed=new De,this.Qa=new Ee,this.Ic=this.$c=this.Aa=0,this.D=new He,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,x),this.ia=0,this.pb=o(4,ze),this.Pa=new Te,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ge),this.Hd=0,this.rb=Array(new Be),this.sb=0,this.wa=Array(new Oe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new qe),this.L=this.aa=0,this.gd=s([4,2],Oe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function We(e,t){return 0>e?0:e>t?t:e}function Ve(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var e=new Ue;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ai||(ai=Qe)),e}function Ye(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Ze(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function $e(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Ye(e,2,"null VP8Io passed to VP8GetHeaders()");var a=n.data,r=n.w,o=n.ha;if(4>o)return Ye(e,7,"Truncated header.");var s=a[r+0]|a[r+1]<<8|a[r+2]<<16,l=e.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return Ye(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ye(e,4,"Frame not displayable.");r+=3,o-=3;var c=e.Kc;if(l.Rb){if(7>o)return Ye(e,7,"cannot parse picture header");if(!Ze(a,r,o))return Ye(e,3,"Bad code word");c.c=16383&(a[r+4]<<8|a[r+3]),c.Td=a[r+4]>>6,c.i=16383&(a[r+6]<<8|a[r+5]),c.Ud=a[r+6]>>6,r+=7,o-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((s=e.Pa).jb,0,255,s.jb.length),t(null!=(s=e.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(l.ub>o)return Ye(e,7,"bad partition length");f(s=e.m,a,r,l.ub),r+=l.ub,o-=l.ub,l.Rb&&(c.Ld=j(s),c.Kd=j(s)),c=e.Qa;var d,u=e.Pa;if(t(null!=s),t(null!=c),c.Cb=j(s),c.Cb){if(c.Bb=j(s),j(s)){for(c.Fb=j(s),d=0;4>d;++d)c.Zb[d]=j(s)?g(s,7):0;for(d=0;4>d;++d)c.Lb[d]=j(s)?g(s,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=j(s)?m(s,8):255}else c.Bb=0;if(s.Ka)return Ye(e,3,"cannot parse segment header");if((c=e.ed).zd=j(s),c.Tb=m(s,6),c.wb=m(s,3),c.Pc=j(s),c.Pc&&j(s)){for(u=0;4>u;++u)j(s)&&(c.vd[u]=g(s,6));for(u=0;4>u;++u)j(s)&&(c.od[u]=g(s,6))}if(e.L=0==c.Tb?0:c.zd?1:2,s.Ka)return Ye(e,3,"cannot parse filter header");var h=o;if(o=d=r,r=d+h,c=h,e.Xb=(1<<m(e.m,2))-1,h<3*(u=e.Xb))a=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var p=a[o+0]|a[o+1]<<8|a[o+2]<<16;p>c&&(p=c),f(e.Jc[+h],a,d,p),d+=p,c-=p,o+=3}f(e.Jc[+u],a,d,c),a=d<r?0:5}if(0!=a)return Ye(e,a,"cannot parse partitions");for(a=m(d=e.m,7),o=j(d)?g(d,4):0,r=j(d)?g(d,4):0,c=j(d)?g(d,4):0,u=j(d)?g(d,4):0,d=j(d)?g(d,4):0,h=e.Qa,p=0;4>p;++p){if(h.Cb){var v=h.Zb[p];h.Fb||(v+=a)}else{if(0<p){e.pb[p]=e.pb[0];continue}v=a}var y=e.pb[p];y.Sc[0]=ti[We(v+o,127)],y.Sc[1]=ni[We(v+0,127)],y.Eb[0]=2*ti[We(v+r,127)],y.Eb[1]=101581*ni[We(v+c,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=ti[We(v+u,117)],y.Qc[1]=ni[We(v+d,127)],y.lc=v+d}if(!l.Rb)return Ye(e,4,"Not a key frame.");for(j(s),l=e.Pa,a=0;4>a;++a){for(o=0;8>o;++o)for(r=0;3>r;++r)for(c=0;11>c;++c)u=P(s,ci[a][o][r][c])?m(s,8):si[a][o][r][c],l.Wc[a][o].Yb[r][c]=u;for(o=0;17>o;++o)l.Xc[a][o]=l.Wc[a][di[o]]}return e.kc=j(s),e.kc&&(e.Bd=m(s,8)),e.cb=1}function Qe(e,t,n,a,i,r,o){var s=t[i].Yb[n];for(n=0;16>i;++i){if(!P(e,s[n+0]))return i;for(;!P(e,s[n+1]);)if(s=t[++i].Yb[0],n=0,16==i)return 16;var l=t[i+1].Yb;if(P(e,s[n+2])){var c=e,d=0;if(P(c,(h=s)[(u=n)+3]))if(P(c,h[u+6])){for(s=0,u=2*(d=P(c,h[u+8]))+(h=P(c,h[u+9+d])),d=0,h=ii[u];h[s];++s)d+=d+P(c,h[s]);d+=3+(8<<u)}else P(c,h[u+7])?(d=7+2*P(c,165),d+=P(c,145)):d=5+P(c,159);else d=P(c,h[u+4])?3+P(c,h[u+5]):2;s=l[2]}else d=1,s=l[1];l=o+ri[i],0>(c=e).b&&C(c);var u,h=c.b,p=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=p,c.Ca|=1,c.I-=(u+1&p)<<h,r[l]=((d^p)-p)*a[(0<i)+0]}return 16}function Je(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function Xe(e,n){if(null==e)return 0;if(null==n)return Ye(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!$e(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var s=Bi[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-s>>4,e.zb=n.j-s>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+s>>4,e.Hb=n.va+15+s>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(s=0;4>s;++s){var c;if(e.Qa.Cb){var d=e.Qa.Lb[s];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[s][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var p=h;0<l.wb&&(p=4<l.wb?p>>2:p>>1)>9-l.wb&&(p=9-l.wb),1>p&&(p=1),u.dd=p,u.tc=2*h+p,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}s=0}else Ye(e,6,"Frame setup failed"),s=e.a;if(s=0==s){if(s){e.$c=0,0<e.Aa||(e.Ic=qi);e:{s=e.Ic,l=4*(p=e.za);var f=32*p,m=p+1,g=0<e.L?p*(0<e.Aa?2:1):0,v=(2==e.Aa?2:1)*p;if((u=l+832+(c=3*(16*s+Bi[e.L])/2*f)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)s=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=r(u),e.Fc=0,null==e.Ec){s=Ye(e,1,"no memory during frame initialization.");break e}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=o(f,Ge),e.Hd=0,e.rb=o(m+1,Be),e.sb=1,e.wa=g?o(g,Oe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=p),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=o(v,qe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=p),e.R=16*p,e.B=8*p,p=(f=Bi[e.L])*e.R,f=f/2*e.B,e.sa=u,e.ta=h+p,e.qa=e.sa,e.ra=e.ta+16*s*e.R+f,e.Ha=e.qa,e.Ia=e.ra+8*s*e.B+f,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Je(e),i(e.Ac,e.Bc,0,l),s=1}}if(s){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Fa){for(s=-255;255>=s;++s)ja[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Pa[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Aa[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)La[255+s]=0>s?0:255<s?255:s;Fa=1}ra=ct,oa=rt,la=ot,ca=st,da=lt,sa=it,ua=Yt,ha=Zt,pa=Jt,fa=Xt,ma=$t,ga=Qt,va=en,ya=tn,ba=Ht,xa=Gt,Sa=Ut,_a=Wt,hi[0]=Nt,hi[1]=ut,hi[2]=_t,hi[3]=wt,hi[4]=kt,hi[5]=jt,hi[6]=Ct,hi[7]=Pt,hi[8]=Lt,hi[9]=At,ui[0]=vt,ui[1]=pt,ui[2]=ft,ui[3]=mt,ui[4]=yt,ui[5]=bt,ui[6]=xt,pi[0]=Et,pi[1]=ht,pi[2]=Ft,pi[3]=It,pi[4]=Tt,pi[5]=Mt,pi[6]=Dt,s=1}else s=0}s&&(s=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var o,s=e.Jc[e.M&e.Xb],l=e.m,c=e;for(o=0;o<c.za;++o){var d=l,u=c,h=u.Ac,p=u.Bc+4*o,f=u.zc,m=u.ya[u.aa+o];if(u.Qa.Bb?m.$b=P(d,u.Pa.jb[0])?2+P(d,u.Pa.jb[2]):P(d,u.Pa.jb[1]):m.$b=0,u.kc&&(m.Ad=P(d,u.Bd)),m.Za=!P(d,145)+0,m.Za){var g=m.Ob,v=0;for(u=0;4>u;++u){var y,b=f[0+u];for(y=0;4>y;++y){b=li[h[p+y]][b];for(var x=oi[P(d,b[0])];0<x;)x=oi[2*x+P(d,b[x])];b=-x,h[p+y]=b}a(g,v,h,p,4),v+=4,f[0+u]=b}}else b=P(d,156)?P(d,128)?1:3:P(d,163)?2:0,m.Ob[0]=b,i(h,p,b,4),i(f,0,b,4);m.Dd=P(d,142)?P(d,114)?P(d,183)?1:3:2:0}if(c.m.Ka)return Ye(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=s,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],o=l.ya[l.aa+l.ja],p=l.kc?o.Ad:0)d.la=h.la=0,o.Za||(d.Na=h.Na=0),o.Hc=0,o.Gc=0,o.ia=0;else{var S,_;if(d=h,h=c,p=l.Pa.Xc,f=l.ya[l.aa+l.ja],m=l.pb[f.$b],u=f.ad,g=0,v=l.rb[l.sb-1],b=y=0,i(u,g,0,384),f.Za)var w=0,N=p[3];else{x=r(16);var k=d.Na+v.Na;if(k=ai(h,p[1],k,m.Eb,0,x,0),d.Na=v.Na=(0<k)+0,1<k)ra(x,0,u,g);else{var C=x[0]+3>>3;for(x=0;256>x;x+=16)u[g+x]=C}w=1,N=p[0]}var j=15&d.la,A=15&v.la;for(x=0;4>x;++x){var L=1&A;for(C=_=0;4>C;++C)j=j>>1|(L=(k=ai(h,N,k=L+(1&j),m.Sc,w,u,g))>w)<<7,_=_<<2|(3<k?3:1<k?2:0!=u[g+0]),g+=16;j>>=4,A=A>>1|L<<7,y=(y<<8|_)>>>0}for(N=j,w=A>>4,S=0;4>S;S+=2){for(_=0,j=d.la>>4+S,A=v.la>>4+S,x=0;2>x;++x){for(L=1&A,C=0;2>C;++C)k=L+(1&j),j=j>>1|(L=0<(k=ai(h,p[2],k,m.Qc,0,u,g)))<<3,_=_<<2|(3<k?3:1<k?2:0!=u[g+0]),g+=16;j>>=2,A=A>>1|L<<5}b|=_<<4*S,N|=j<<4<<S,w|=(240&A)<<S}d.la=N,v.la=w,f.Hc=y,f.Gc=b,f.ia=43690&b?0:m.ia,p=!(y|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[o.$b][o.Za],l.wa[l.Y+l.ja].La|=!p),c.Ka)return Ye(e,7,"Premature end-of-file encountered.")}if(Je(e),l=n,c=1,o=(s=e).D,d=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(o.M=s.M,o.uc=d,En(s,o),c=1,o=(_=s.D).Nb,d=(b=Bi[s.L])*s.R,h=b/2*s.B,x=16*o*s.R,C=8*o*s.B,p=s.sa,f=s.ta-d+x,m=s.qa,u=s.ra-h+C,g=s.Ha,v=s.Ia-h+C,A=0==(j=_.M),y=j>=s.Va-1,2==s.Aa&&En(s,_),_.uc)for(L=(k=s).D.M,t(k.D.uc),_=k.yb;_<k.Hb;++_){w=_,N=L;var F=(I=(q=k).D).Nb;S=q.R;var I=I.wa[I.Y+w],R=q.sa,E=q.ta+16*F*S+16*w,M=I.dd,T=I.tc;if(0!=T)if(t(3<=T),1==q.L)0<w&&xa(R,E,S,T+4),I.La&&_a(R,E,S,T),0<N&&ba(R,E,S,T+4),I.La&&Sa(R,E,S,T);else{var D=q.B,O=q.qa,B=q.ra+8*F*D+8*w,z=q.Ha,q=q.Ia+8*F*D+8*w;F=I.ld,0<w&&(ha(R,E,S,T+4,M,F),fa(O,B,z,q,D,T+4,M,F)),I.La&&(ga(R,E,S,T,M,F),ya(O,B,z,q,D,T,M,F)),0<N&&(ua(R,E,S,T+4,M,F),pa(O,B,z,q,D,T+4,M,F)),I.La&&(ma(R,E,S,T,M,F),va(O,B,z,q,D,T,M,F))}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(_=16*j,j=16*(j+1),A?(l.y=s.sa,l.O=s.ta+x,l.f=s.qa,l.N=s.ra+C,l.ea=s.Ha,l.W=s.Ia+C):(_-=b,l.y=p,l.O=f,l.f=m,l.N=u,l.ea=g,l.W=v),y||(j-=b),j>l.o&&(j=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&_<j&&(l.J=hn(s,l,_,j-_),l.F=s.mb,null==l.F&&0==l.F.length)){c=Ye(s,3,"Could not decode alpha data.");break e}_<l.j&&(b=l.j-_,_=l.j,t(!(1&b)),l.O+=s.R*b,l.N+=s.B*(b>>1),l.W+=s.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),_<j&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=_-l.j,l.U=l.va-l.v,l.T=j-_,c=l.put(l))}o+1!=s.Ic||y||(a(s.sa,s.ta-d,p,f+16*s.R,d),a(s.qa,s.ra-h,m,u+8*s.B,h),a(s.Ha,s.Ia-h,g,v+8*s.B,h))}if(!c)return Ye(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),s&=1}return s?(e.cb=0,s):0}function et(e,t,n,a,i){i=e[t+n+32*a]+(i>>3),e[t+n+32*a]=-256&i?0>i?0:255:i}function tt(e,t,n,a,i,r){et(e,t,0,n,a+i),et(e,t,1,n,a+r),et(e,t,2,n,a-r),et(e,t,3,n,a-i)}function nt(e){return(20091*e>>16)+e}function at(e,t,n,a){var i,o=0,s=r(16);for(i=0;4>i;++i){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-nt(e[t+12]),u=nt(e[t+4])+(35468*e[t+12]>>16);s[o+0]=l+u,s[o+1]=c+d,s[o+2]=c-d,s[o+3]=l-u,o+=4,t++}for(i=o=0;4>i;++i)l=(e=s[o+0]+4)+s[o+8],c=e-s[o+8],d=(35468*s[o+4]>>16)-nt(s[o+12]),et(n,a,0,0,l+(u=nt(s[o+4])+(35468*s[o+12]>>16))),et(n,a,1,0,c+d),et(n,a,2,0,c-d),et(n,a,3,0,l-u),o++,a+=32}function it(e,t,n,a){var i=e[t+0]+4,r=35468*e[t+4]>>16,o=nt(e[t+4]),s=35468*e[t+1]>>16;tt(n,a,0,i+o,e=nt(e[t+1]),s),tt(n,a,1,i+r,e,s),tt(n,a,2,i-r,e,s),tt(n,a,3,i-o,e,s)}function rt(e,t,n,a,i){at(e,t,n,a),i&&at(e,t+16,n,a+4)}function ot(e,t,n,a){oa(e,t+0,n,a,1),oa(e,t+32,n,a+128,1)}function st(e,t,n,a){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)et(n,a,t,i,e)}function lt(e,t,n,a){e[t+0]&&ca(e,t+0,n,a),e[t+16]&&ca(e,t+16,n,a+4),e[t+32]&&ca(e,t+32,n,a+128),e[t+48]&&ca(e,t+48,n,a+128+4)}function ct(e,t,n,a){var i,o=r(16);for(i=0;4>i;++i){var s=e[t+0+i]+e[t+12+i],l=e[t+4+i]+e[t+8+i],c=e[t+4+i]-e[t+8+i],d=e[t+0+i]-e[t+12+i];o[0+i]=s+l,o[8+i]=s-l,o[4+i]=d+c,o[12+i]=d-c}for(i=0;4>i;++i)s=(e=o[0+4*i]+3)+o[3+4*i],l=o[1+4*i]+o[2+4*i],c=o[1+4*i]-o[2+4*i],d=e-o[3+4*i],n[a+0]=s+l>>3,n[a+16]=d+c>>3,n[a+32]=s-l>>3,n[a+48]=d-c>>3,a+=64}function dt(e,t,n){var a,i=t-32,r=Ea,o=255-e[i-1];for(a=0;a<n;++a){var s,l=r,c=o+e[t-1];for(s=0;s<n;++s)e[t+s]=l[c+e[i+s]];t+=32}}function ut(e,t){dt(e,t,4)}function ht(e,t){dt(e,t,8)}function pt(e,t){dt(e,t,16)}function ft(e,t){var n;for(n=0;16>n;++n)a(e,t+32*n,e,t-32,16)}function mt(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function gt(e,t,n){var a;for(a=0;16>a;++a)i(t,n+32*a,e,16)}function vt(e,t){var n,a=16;for(n=0;16>n;++n)a+=e[t-1+32*n]+e[t+n-32];gt(a>>5,e,t)}function yt(e,t){var n,a=8;for(n=0;16>n;++n)a+=e[t-1+32*n];gt(a>>4,e,t)}function bt(e,t){var n,a=8;for(n=0;16>n;++n)a+=e[t+n-32];gt(a>>4,e,t)}function xt(e,t){gt(128,e,t)}function St(e,t,n){return e+2*t+n+2>>2}function _t(e,t){var n,i=t-32;for(i=new Uint8Array([St(e[i-1],e[i+0],e[i+1]),St(e[i+0],e[i+1],e[i+2]),St(e[i+1],e[i+2],e[i+3]),St(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)a(e,t+32*n,i,0,i.length)}function wt(e,t){var n=e[t-1],a=e[t-1+32],i=e[t-1+64],r=e[t-1+96];A(e,t+0,16843009*St(e[t-1-32],n,a)),A(e,t+32,16843009*St(n,a,i)),A(e,t+64,16843009*St(a,i,r)),A(e,t+96,16843009*St(i,r,r))}function Nt(e,t){var n,a=4;for(n=0;4>n;++n)a+=e[t+n-32]+e[t-1+32*n];for(a>>=3,n=0;4>n;++n)i(e,t+32*n,a,4)}function kt(e,t){var n=e[t-1+0],a=e[t-1+32],i=e[t-1+64],r=e[t-1-32],o=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=St(a,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=St(n,a,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=St(r,n,a),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=St(o,r,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=St(s,o,r),e[t+3+32]=e[t+2+0]=St(l,s,o),e[t+3+0]=St(c,l,s)}function Ct(e,t){var n=e[t+1-32],a=e[t+2-32],i=e[t+3-32],r=e[t+4-32],o=e[t+5-32],s=e[t+6-32],l=e[t+7-32];e[t+0+0]=St(e[t+0-32],n,a),e[t+1+0]=e[t+0+32]=St(n,a,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=St(a,i,r),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=St(i,r,o),e[t+3+32]=e[t+2+64]=e[t+1+96]=St(r,o,s),e[t+3+64]=e[t+2+96]=St(o,s,l),e[t+3+96]=St(s,l,l)}function jt(e,t){var n=e[t-1+0],a=e[t-1+32],i=e[t-1+64],r=e[t-1-32],o=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=r+o+1>>1,e[t+1+0]=e[t+2+64]=o+s+1>>1,e[t+2+0]=e[t+3+64]=s+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=St(i,a,n),e[t+0+64]=St(a,n,r),e[t+0+32]=e[t+1+96]=St(n,r,o),e[t+1+32]=e[t+2+96]=St(r,o,s),e[t+2+32]=e[t+3+96]=St(o,s,l),e[t+3+32]=St(s,l,c)}function Pt(e,t){var n=e[t+0-32],a=e[t+1-32],i=e[t+2-32],r=e[t+3-32],o=e[t+4-32],s=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+a+1>>1,e[t+1+0]=e[t+0+64]=a+i+1>>1,e[t+2+0]=e[t+1+64]=i+r+1>>1,e[t+3+0]=e[t+2+64]=r+o+1>>1,e[t+0+32]=St(n,a,i),e[t+1+32]=e[t+0+96]=St(a,i,r),e[t+2+32]=e[t+1+96]=St(i,r,o),e[t+3+32]=e[t+2+96]=St(r,o,s),e[t+3+64]=St(o,s,l),e[t+3+96]=St(s,l,c)}function At(e,t){var n=e[t-1+0],a=e[t-1+32],i=e[t-1+64],r=e[t-1+96];e[t+0+0]=n+a+1>>1,e[t+2+0]=e[t+0+32]=a+i+1>>1,e[t+2+32]=e[t+0+64]=i+r+1>>1,e[t+1+0]=St(n,a,i),e[t+3+0]=e[t+1+32]=St(a,i,r),e[t+3+32]=e[t+1+64]=St(i,r,r),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=r}function Lt(e,t){var n=e[t-1+0],a=e[t-1+32],i=e[t-1+64],r=e[t-1+96],o=e[t-1-32],s=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+o+1>>1,e[t+0+32]=e[t+2+64]=a+n+1>>1,e[t+0+64]=e[t+2+96]=i+a+1>>1,e[t+0+96]=r+i+1>>1,e[t+3+0]=St(s,l,c),e[t+2+0]=St(o,s,l),e[t+1+0]=e[t+3+32]=St(n,o,s),e[t+1+32]=e[t+3+64]=St(a,n,o),e[t+1+64]=e[t+3+96]=St(i,a,n),e[t+1+96]=St(r,i,a)}function Ft(e,t){var n;for(n=0;8>n;++n)a(e,t+32*n,e,t-32,8)}function It(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Rt(e,t,n){var a;for(a=0;8>a;++a)i(t,n+32*a,e,8)}function Et(e,t){var n,a=8;for(n=0;8>n;++n)a+=e[t+n-32]+e[t-1+32*n];Rt(a>>4,e,t)}function Mt(e,t){var n,a=4;for(n=0;8>n;++n)a+=e[t+n-32];Rt(a>>3,e,t)}function Tt(e,t){var n,a=4;for(n=0;8>n;++n)a+=e[t-1+32*n];Rt(a>>3,e,t)}function Dt(e,t){Rt(128,e,t)}function Ot(e,t,n){var a=e[t-n],i=e[t+0],r=3*(i-a)+Ia[1020+e[t-2*n]-e[t+n]],o=Ra[112+(r+4>>3)];e[t-n]=Ea[255+a+Ra[112+(r+3>>3)]],e[t+0]=Ea[255+i-o]}function Bt(e,t,n,a){var i=e[t+0],r=e[t+n];return Ma[255+e[t-2*n]-e[t-n]]>a||Ma[255+r-i]>a}function zt(e,t,n,a){return 4*Ma[255+e[t-n]-e[t+0]]+Ma[255+e[t-2*n]-e[t+n]]<=a}function qt(e,t,n,a,i){var r=e[t-3*n],o=e[t-2*n],s=e[t-n],l=e[t+0],c=e[t+n],d=e[t+2*n],u=e[t+3*n];return 4*Ma[255+s-l]+Ma[255+o-c]>a?0:Ma[255+e[t-4*n]-r]<=i&&Ma[255+r-o]<=i&&Ma[255+o-s]<=i&&Ma[255+u-d]<=i&&Ma[255+d-c]<=i&&Ma[255+c-l]<=i}function Ht(e,t,n,a){var i=2*a+1;for(a=0;16>a;++a)zt(e,t+a,n,i)&&Ot(e,t+a,n)}function Gt(e,t,n,a){var i=2*a+1;for(a=0;16>a;++a)zt(e,t+a*n,1,i)&&Ot(e,t+a*n,1)}function Ut(e,t,n,a){var i;for(i=3;0<i;--i)Ht(e,t+=4*n,n,a)}function Wt(e,t,n,a){var i;for(i=3;0<i;--i)Gt(e,t+=4,n,a)}function Vt(e,t,n,a,i,r,o,s){for(r=2*r+1;0<i--;){if(qt(e,t,n,r,o))if(Bt(e,t,n,s))Ot(e,t,n);else{var l=e,c=t,d=n,u=l[c-2*d],h=l[c-d],p=l[c+0],f=l[c+d],m=l[c+2*d],g=27*(y=Ia[1020+3*(p-h)+Ia[1020+u-f]])+63>>7,v=18*y+63>>7,y=9*y+63>>7;l[c-3*d]=Ea[255+l[c-3*d]+y],l[c-2*d]=Ea[255+u+v],l[c-d]=Ea[255+h+g],l[c+0]=Ea[255+p-g],l[c+d]=Ea[255+f-v],l[c+2*d]=Ea[255+m-y]}t+=a}}function Kt(e,t,n,a,i,r,o,s){for(r=2*r+1;0<i--;){if(qt(e,t,n,r,o))if(Bt(e,t,n,s))Ot(e,t,n);else{var l=e,c=t,d=n,u=l[c-d],h=l[c+0],p=l[c+d],f=Ra[112+(4+(m=3*(h-u))>>3)],m=Ra[112+(m+3>>3)],g=f+1>>1;l[c-2*d]=Ea[255+l[c-2*d]+g],l[c-d]=Ea[255+u+m],l[c+0]=Ea[255+h-f],l[c+d]=Ea[255+p-g]}t+=a}}function Yt(e,t,n,a,i,r){Vt(e,t,n,1,16,a,i,r)}function Zt(e,t,n,a,i,r){Vt(e,t,1,n,16,a,i,r)}function $t(e,t,n,a,i,r){var o;for(o=3;0<o;--o)Kt(e,t+=4*n,n,1,16,a,i,r)}function Qt(e,t,n,a,i,r){var o;for(o=3;0<o;--o)Kt(e,t+=4,1,n,16,a,i,r)}function Jt(e,t,n,a,i,r,o,s){Vt(e,t,i,1,8,r,o,s),Vt(n,a,i,1,8,r,o,s)}function Xt(e,t,n,a,i,r,o,s){Vt(e,t,1,i,8,r,o,s),Vt(n,a,1,i,8,r,o,s)}function en(e,t,n,a,i,r,o,s){Kt(e,t+4*i,i,1,8,r,o,s),Kt(n,a+4*i,i,1,8,r,o,s)}function tn(e,t,n,a,i,r,o,s){Kt(e,t+4,1,i,8,r,o,s),Kt(n,a+4,1,i,8,r,o,s)}function nn(){this.ba=new oe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function an(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new M,this.vb=new M,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new u}function sn(){this.xb=this.a=0,this.l=new Ve,this.ca=new oe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new S,this.Pb=0,this.wd=new S,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=o(4,rn),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ve,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(e,t,n,a,i,r,o){for(e=null==e?0:e[t+0],t=0;t<o;++t)i[r+t]=e+n[a+t]&255,e=i[r+t]}function dn(e,t,n,a,i,r,o){var s;if(null==e)cn(null,null,n,a,i,r,o);else for(s=0;s<o;++s)i[r+s]=e[t+s]+n[a+s]&255}function un(e,t,n,a,i,r,o){if(null==e)cn(null,null,n,a,i,r,o);else{var s,l=e[t+0],c=l,d=l;for(s=0;s<o;++s)c=d+(l=e[t+s])-c,d=n[a+s]+(-256&c?0>c?0:255:c)&255,c=l,i[r+s]=d}}function hn(e,n,i,o){var s=n.width,l=n.o;if(t(null!=e&&null!=n),0>i||0>=o||i+o>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ln,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=r(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,p=e.mb,f=e.nb,m=u+1,g=h-1,y=c.l;if(t(null!=d&&null!=p&&null!=n),gi[0]=null,gi[1]=cn,gi[2]=dn,gi[3]=un,c.ca=p,c.tb=f,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=h)n=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)n=0;else if(y.put=pe,y.ac=he,y.bc=fe,y.ma=c,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,c.$a)e:{t(1==c.$a),n=Pe();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,v(n.m,d,m,g),!Ae(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&we(n.s)?(c.ic=1,d=n.c*n.i,n.Ta=null,n.Ua=0,n.V=r(d),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Le(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:o=l-i}t(null!=e.ga),t(i+o<=l);e:{if(n=(d=e.ga).c,l=d.l.o,0==d.$a){if(m=e.rc,g=e.Vc,y=e.Fa,u=e.P+1+i*n,h=e.mb,p=e.nb+i*n,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=gi[d.Z]),c=0;c<o;++c)gi[d.Z](m,g,y,u,h,p,n),m=h,g=p,p+=n,u+=n;else for(c=0;c<o;++c)a(h,p,y,u,n),m=h,g=p,p+=n,u+=n;e.rc=m,e.Vc=g}else{if(t(null!=d.mc),n=i+o,t(null!=(c=d.mc)),t(n<=c.i),c.C>=n)n=1;else if(d.ic||vn(),d.ic){d=c.V,m=c.Ba,g=c.c;var b=c.i,x=(y=1,u=c.$/g,h=c.$%g,p=c.m,f=c.s,c.$),S=g*b,_=g*n,N=f.wc,C=x<_?xe(f,h,u):null;t(x<=S),t(n<=b),t(we(f));t:for(;;){for(;!p.h&&x<_;){if(h&N||(C=xe(f,h,u)),t(null!=C),k(p),256>(b=ye(C.G[0],C.H[0],p)))d[m+x]=b,++x,++h>=g&&(h=0,++u<=n&&!(u%16)&&ke(c,u));else{if(!(280>b)){y=0;break t}b=ge(b-256,p);var j,P=ye(C.G[4],C.H[4],p);if(k(p),!(x>=(P=ve(g,P=ge(P,p)))&&S-x>=b)){y=0;break t}for(j=0;j<b;++j)d[m+x+j]=d[m+x+j-P];for(x+=b,h+=b;h>=g;)h-=g,++u<=n&&!(u%16)&&ke(c,u);x<_&&h&N&&(C=xe(f,h,u))}t(p.h==w(p))}ke(c,u>n?n:u);break t}!y||p.h&&x<S?(y=0,c.a=p.h?5:3):c.$=x,n=y}else n=Ce(c,c.V,c.Ba,c.c,c.i,n,Fe);if(!n){o=0;break e}}i+o>=l&&(e.Cc=1),o=1}if(!o)return null;if(e.Cc&&(null!=(o=e.ga)&&(o.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*s}function pn(e,t,n,a,i,r){for(;0<i--;){var o,s=e,l=t+(n?1:0),c=e,d=t+(n?0:3);for(o=0;o<a;++o){var u=c[d+4*o];255!=u&&(u*=32897,s[l+4*o+0]=s[l+4*o+0]*u>>23,s[l+4*o+1]=s[l+4*o+1]*u>>23,s[l+4*o+2]=s[l+4*o+2]*u>>23)}t+=r}}function fn(e,t,n,a,i){for(;0<a--;){var r;for(r=0;r<n;++r){var o=e[t+2*r+0],s=15&(c=e[t+2*r+1]),l=4369*s,c=(240&c|c>>4)*l>>16;e[t+2*r+0]=(240&o|o>>4)*l>>16&240|(15&o|o<<4)*l>>16>>4&15,e[t+2*r+1]=240&c|s}t+=i}}function mn(e,t,n,a,i,r,o,s){var l,c,d=255;for(c=0;c<i;++c){for(l=0;l<a;++l){var u=e[t+l];r[o+4*l]=u,d&=u}t+=n,o+=s}return 255!=d}function gn(e,t,n,a,i){var r;for(r=0;r<i;++r)n[a+r]=e[t+r]>>8}function vn(){wa=pn,Na=fn,ka=mn,Ca=gn}function yn(n,a,i){e[n]=function(e,n,r,o,s,l,c,d,u,h,p,f,m,g,v,y,b){var x,S=b-1>>1,_=s[l+0]|c[d+0]<<16,w=u[h+0]|p[f+0]<<16;t(null!=e);var N=3*_+w+131074>>2;for(a(e[n+0],255&N,N>>16,m,g),null!=r&&(N=3*w+_+131074>>2,a(r[o+0],255&N,N>>16,v,y)),x=1;x<=S;++x){var k=s[l+x]|c[d+x]<<16,C=u[h+x]|p[f+x]<<16,j=_+k+w+C+524296,P=j+2*(k+w)>>3;N=P+_>>1,_=(j=j+2*(_+C)>>3)+k>>1,a(e[n+2*x-1],255&N,N>>16,m,g+(2*x-1)*i),a(e[n+2*x-0],255&_,_>>16,m,g+(2*x-0)*i),null!=r&&(N=j+w>>1,_=P+C>>1,a(r[o+2*x-1],255&N,N>>16,v,y+(2*x-1)*i),a(r[o+2*x+0],255&_,_>>16,v,y+(2*x+0)*i)),_=k,w=C}1&b||(N=3*_+w+131074>>2,a(e[n+b-1],255&N,N>>16,m,g+(b-1)*i),null!=r&&(N=3*w+_+131074>>2,a(r[o+b-1],255&N,N>>16,v,y+(b-1)*i)))}}function bn(){vi[Ta]=yi,vi[Da]=xi,vi[Oa]=bi,vi[Ba]=Si,vi[za]=_i,vi[qa]=wi,vi[Ha]=Ni,vi[Ga]=xi,vi[Ua]=Si,vi[Wa]=_i,vi[Va]=wi}function xn(e){return e&~Li?0>e?0:255:e>>Ai}function Sn(e,t){return xn((19077*e>>8)+(26149*t>>8)-14234)}function _n(e,t,n){return xn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function wn(e,t){return xn((19077*e>>8)+(33050*t>>8)-17685)}function Nn(e,t,n,a,i){a[i+0]=Sn(e,n),a[i+1]=_n(e,t,n),a[i+2]=wn(e,t)}function kn(e,t,n,a,i){a[i+0]=wn(e,t),a[i+1]=_n(e,t,n),a[i+2]=Sn(e,n)}function Cn(e,t,n,a,i){var r=_n(e,t,n);t=r<<3&224|wn(e,t)>>3,a[i+0]=248&Sn(e,n)|r>>5,a[i+1]=t}function jn(e,t,n,a,i){var r=240&wn(e,t)|15;a[i+0]=240&Sn(e,n)|_n(e,t,n)>>4,a[i+1]=r}function Pn(e,t,n,a,i){a[i+0]=255,Nn(e,t,n,a,i+1)}function An(e,t,n,a,i){kn(e,t,n,a,i),a[i+3]=255}function Ln(e,t,n,a,i){Nn(e,t,n,a,i),a[i+3]=255}function We(e,t){return 0>e?0:e>t?t:e}function Fn(t,n,a){e[t]=function(e,t,i,r,o,s,l,c,d){for(var u=c+(-2&d)*a;c!=u;)n(e[t+0],i[r+0],o[s+0],l,c),n(e[t+1],i[r+0],o[s+0],l,c+a),t+=2,++r,++s,c+=2*a;1&d&&n(e[t+0],i[r+0],o[s+0],l,c)}}function In(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Rn(e,t,n,a,i){switch(e>>>30){case 3:oa(t,n,a,i,0);break;case 2:sa(t,n,a,i);break;case 1:ca(t,n,a,i)}}function En(e,t){var n,r,o=t.M,s=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,p=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)d[u+32*n-1]=129,h[p+32*n-1]=129;for(0<o?l[c-1-32]=d[u-1-32]=h[p-1-32]=129:(i(l,c-32-1,127,21),i(d,u-32-1,127,9),i(h,p-32-1,127,9)),r=0;r<e.za;++r){var f=t.ya[t.aa+r];if(0<r){for(n=-1;16>n;++n)a(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)a(d,u+32*n-4,d,u+32*n+4,4),a(h,p+32*n-4,h,p+32*n+4,4)}var m=e.Gd,g=e.Hd+r,v=f.ad,y=f.Hc;if(0<o&&(a(l,c-32,m[g].y,0,16),a(d,u-32,m[g].f,0,8),a(h,p-32,m[g].ea,0,8)),f.Za){var b=l,x=c-32+16;for(0<o&&(r>=e.za-1?i(b,x,m[g].y[15],4):a(b,x,m[g+1].y,0,4)),n=0;4>n;n++)b[x+128+n]=b[x+256+n]=b[x+384+n]=b[x+0+n];for(n=0;16>n;++n,y<<=2)b=l,x=c+Oi[n],hi[f.Ob[n]](b,x),Rn(y,v,16*+n,b,x)}else if(b=In(r,o,f.Ob[0]),ui[b](l,c),0!=y)for(n=0;16>n;++n,y<<=2)Rn(y,v,16*+n,l,c+Oi[n]);for(n=f.Gc,b=In(r,o,f.Dd),pi[b](d,u),pi[b](h,p),y=v,b=d,x=u,255&(f=n|0)&&(170&f?la(y,256,b,x):da(y,256,b,x)),f=h,y=p,255&(n>>=8)&&(170&n?la(v,320,f,y):da(v,320,f,y)),o<e.Ub-1&&(a(m[g].y,0,l,c+480,16),a(m[g].f,0,d,u+224,8),a(m[g].ea,0,h,p+224,8)),n=8*s*e.B,m=e.sa,g=e.ta+16*r+16*s*e.R,v=e.qa,f=e.ra+8*r+n,y=e.Ha,b=e.Ia+8*r+n,n=0;16>n;++n)a(m,g+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)a(v,f+n*e.B,d,u+32*n,8),a(y,b+n*e.B,h,p+32*n,8)}}function Mn(e,a,i,r,o,s,l,c,d){var u=[0],h=[0],p=0,f=null!=d?d.kd:0,m=null!=d?d:new an;if(null==e||12>i)return 7;m.data=e,m.w=a,m.ha=i,a=[a],i=[i],m.gb=[m.gb];e:{var g=a,y=i,b=m.gb;if(t(null!=e),t(null!=y),t(null!=b),b[0]=0,12<=y[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){b=3;break e}var x=I(e,g[0]+4);if(12>x||4294967286<x){b=3;break e}if(f&&x>y[0]-8){b=7;break e}b[0]=x,g[0]+=12,y[0]-=12}b=0}if(0!=b)return b;for(x=0<m.gb[0],i=i[0];;){e:{var _=e;y=a,b=i;var w=u,N=h,k=g=[0];if((P=p=[p])[0]=0,8>b[0])b=7;else{if(!n(_,y[0],"VP8X")){if(10!=I(_,y[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var C=I(_,y[0]+8),j=1+F(_,y[0]+12);if(2147483648<=j*(_=1+F(_,y[0]+15))){b=3;break e}null!=k&&(k[0]=C),null!=w&&(w[0]=j),null!=N&&(N[0]=_),y[0]+=18,b[0]-=18,P[0]=1}b=0}}if(p=p[0],g=g[0],0!=b)return b;if(y=!!(2&g),!x&&p)return 3;if(null!=s&&(s[0]=!!(16&g)),null!=l&&(l[0]=y),null!=c&&(c[0]=0),l=u[0],g=h[0],p&&y&&null==d){b=0;break}if(4>i){b=7;break}if(x&&p||!x&&!p&&!n(e,a[0],"ALPH")){i=[i],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];e:{C=e,b=a,x=i;var P=m.gb;w=m.na,N=m.P,k=m.Sa,j=22,t(null!=C),t(null!=x),_=b[0];var A=x[0];for(t(null!=w),t(null!=k),w[0]=null,N[0]=null,k[0]=0;;){if(b[0]=_,x[0]=A,8>A){b=7;break e}var L=I(C,_+4);if(4294967286<L){b=3;break e}var R=8+L+1&-2;if(j+=R,0<P&&j>P){b=3;break e}if(!n(C,_,"VP8 ")||!n(C,_,"VP8L")){b=0;break e}if(A[0]<R){b=7;break e}n(C,_,"ALPH")||(w[0]=C,N[0]=_+8,k[0]=L),_+=R,A-=R}}if(i=i[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=b)break}i=[i],m.Ja=[m.Ja],m.xa=[m.xa];e:if(P=e,b=a,x=i,w=m.gb[0],N=m.Ja,k=m.xa,C=b[0],_=!n(P,C,"VP8 "),j=!n(P,C,"VP8L"),t(null!=P),t(null!=x),t(null!=N),t(null!=k),8>x[0])b=7;else{if(_||j){if(P=I(P,C+4),12<=w&&P>w-12){b=3;break e}if(f&&P>x[0]-8){b=7;break e}N[0]=P,b[0]+=8,x[0]-=8,k[0]=j}else k[0]=5<=x[0]&&47==P[C+0]&&!(P[C+4]>>5),N[0]=x[0];b=0}if(i=i[0],m.Ja=m.Ja[0],m.xa=m.xa[0],a=a[0],0!=b)break;if(4294967286<m.Ja)return 3;if(null==c||y||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>i){b=7;break}c=l,f=g,y=s,null==e||5>i?e=0:5<=i&&47==e[a+0]&&!(e[a+4]>>5)?(x=[0],P=[0],w=[0],v(N=new S,e,a,i),me(N,x,P,w)?(null!=c&&(c[0]=x[0]),null!=f&&(f[0]=P[0]),null!=y&&(y[0]=w[0]),e=1):e=0):e=0}else{if(10>i){b=7;break}c=g,null==e||10>i||!Ze(e,a+3,i-3)?e=0:(f=e[a+0]|e[a+1]<<8|e[a+2]<<16,y=16383&(e[a+7]<<8|e[a+6]),e=16383&(e[a+9]<<8|e[a+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=m.Ja||!y||!e?e=0:(l&&(l[0]=y),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],p&&(u[0]!=l||h[0]!=g))return 3;null!=d&&(d[0]=m,d.offset=a-d.w,t(4294967286>a-d.w),t(d.offset==d.ha-i));break}return 0==b||7==b&&p&&null==d?(null!=s&&(s[0]|=null!=m.na&&0<m.na.length),null!=r&&(r[0]=l),null!=o&&(o[0]=g),0):b}function Tn(e,t,n){var a=t.width,i=t.height,r=0,o=0,s=a,l=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(s=e.cd,l=e.bd,r=e.v,o=e.j,11>n||(r&=-2,o&=-2),0>r||0>o||0>=s||0>=l||r+s>a||o+l>i))return 0;if(t.v=r,t.j=o,t.va=r+s,t.o=o+l,t.U=s,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!T(s,l,n=[e.ib],r=[e.hb]))return 0;t.ib=n[0],t.hb=r[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*a/4&&t.hb<3*i/4,t.Kb=0),1}function Dn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function On(e,t,n,a){if(null==a||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,o=n.bd,s=-2&n.v,l=-2&n.j;if(0>s||0>l||0>=i||0>=o||s+i>e||l+o>t)return 2;e=i,t=o}if(n.da){if(!T(e,t,i=[n.ib],o=[n.hb]))return 2;e=i[0],t=o[0]}}a.width=e,a.height=t;e:{var c=a.width,d=a.height;if(e=a.S,0>=c||0>=d||!(e>=Ta&&13>e))e=2;else{if(0>=a.Rd&&null==a.sd){s=o=i=t=0;var u=(l=c*Hi[e])*d;if(11>e||(o=(d+1)/2*(t=(c+1)/2),12==e&&(s=(i=c)*d)),null==(d=r(u+2*o+s))){e=1;break e}a.sd=d,11>e?((c=a.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=a.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=o,c.ea=d,c.W=0+u+o,c.Db=t,c.Ed=o,12==e&&(c.F=d,c.J=0+u+2*o),c.Tc=s,c.lb=i)}if(t=1,i=a.S,o=a.width,s=a.height,i>=Ta&&13>i)if(11>i)e=a.f.RGBA,t&=(l=Math.abs(e.A))*(s-1)+o<=e.size,t&=l>=o*Hi[i],t&=null!=e.eb;else{e=a.f.kb,l=(o+1)/2,u=(s+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),p=Math.abs(e.lb),f=p*(s-1)+o;t&=c*(s-1)+o<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=o&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=p>=o,t&=f<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Dn(a)),e}var Bn=64,zn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qn=24,Hn=32,Gn=8,Un=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return q(q(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return q(e,t[n-1])},e.Predictor7=function(e,t,n){return q(e,t[n+0])},e.Predictor8=function(e,t,n){return q(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return q(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return q(q(e,t[n-1]),q(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var a=t[n+0];return 0>=U(a>>24&255,e>>24&255,(t=t[n-1])>>24&255)+U(a>>16&255,e>>16&255,t>>16&255)+U(a>>8&255,e>>8&255,t>>8&255)+U(255&a,255&e,255&t)?a:e},e.Predictor12=function(e,t,n){var a=t[n+0];return(H((e>>24&255)+(a>>24&255)-((t=t[n-1])>>24&255))<<24|H((e>>16&255)+(a>>16&255)-(t>>16&255))<<16|H((e>>8&255)+(a>>8&255)-(t>>8&255))<<8|H((255&e)+(255&a)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var a=t[n-1];return(G((e=q(e,t[n+0]))>>24&255,a>>24&255)<<24|G(e>>16&255,a>>16&255)<<16|G(e>>8&255,a>>8&255)<<8|G(255&e,255&a))>>>0};var Wn=e.PredictorAdd0;e.PredictorAdd1=W,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Vn=e.PredictorAdd2;Z("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),Z("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Kn,Yn=e.ColorIndexInverseTransform,Zn=e.MapARGB,$n=e.VP8LColorIndexInverseTransformAlpha,Qn=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Xn,ea,ta,na,aa,ia,ra,oa,sa,la,ca,da,ua,ha,pa,fa,ma,ga,va,ya,ba,xa,Sa,_a,wa,Na,ka,Ca,ja=r(511),Pa=r(2041),Aa=r(225),La=r(767),Fa=0,Ia=Pa,Ra=Aa,Ea=La,Ma=ja,Ta=0,Da=1,Oa=2,Ba=3,za=4,qa=5,Ha=6,Ga=7,Ua=8,Wa=9,Va=10,Ka=[2,3,7],Ya=[3,3,11],Za=[280,256,256,256,40],$a=[0,1,1,1,0],Qa=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ja=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Xa=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ei=8,ti=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ai=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ri=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ci=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],di=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ui=[],hi=[],pi=[],fi=1,mi=2,gi=[],vi=[];yn("UpsampleRgbLinePair",Nn,3),yn("UpsampleBgrLinePair",kn,3),yn("UpsampleRgbaLinePair",Ln,4),yn("UpsampleBgraLinePair",An,4),yn("UpsampleArgbLinePair",Pn,4),yn("UpsampleRgba4444LinePair",jn,2),yn("UpsampleRgb565LinePair",Cn,2);var yi=e.UpsampleRgbLinePair,bi=e.UpsampleBgrLinePair,xi=e.UpsampleRgbaLinePair,Si=e.UpsampleBgraLinePair,_i=e.UpsampleArgbLinePair,wi=e.UpsampleRgba4444LinePair,Ni=e.UpsampleRgb565LinePair,ki=16,Ci=1<<ki-1,ji=-227,Pi=482,Ai=6,Li=(256<<Ai)-1,Fi=0,Ii=r(256),Ri=r(256),Ei=r(256),Mi=r(256),Ti=r(Pi-ji),Di=r(Pi-ji);Fn("YuvToRgbRow",Nn,3),Fn("YuvToBgrRow",kn,3),Fn("YuvToRgbaRow",Ln,4),Fn("YuvToBgraRow",An,4),Fn("YuvToArgbRow",Pn,4),Fn("YuvToRgba4444Row",jn,2),Fn("YuvToRgb565Row",Cn,2);var Oi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bi=[0,2,8],zi=[8,7,6,4,4,2,2,2,1,1,1,1],qi=1;this.WebPDecodeRGBA=function(e,n,a,i,r){var o=Da,s=new nn,l=new oe;s.ba=l,l.S=o,l.width=[l.width],l.height=[l.height];var c=l.width,d=l.height,u=new se;if(null==u||null==e)var h=2;else t(null!=u),h=Mn(e,n,a,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=h?c=0:(null!=c&&(c[0]=u.width[0]),null!=d&&(d[0]=u.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=i&&(i[0]=l.width),null!=r&&(r[0]=l.height);e:{if(i=new Ve,(r=new an).data=e,r.w=n,r.ha=a,r.kd=1,n=[0],t(null!=r),(0==(e=Mn(r.data,r.w,r.ha,null,null,null,n,null,r))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=s),i.data=r.data,i.w=r.w+r.offset,i.ha=r.ha-r.offset,i.put=pe,i.ac=he,i.bc=fe,i.ma=s,r.xa){if(null==(e=Pe())){s=1;break e}if(function(e,n){var a=[0],i=[0],r=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,v(e.m,n.data,n.w,n.ha),!me(e.m,a,i,r)){e.a=3;break t}if(e.xb=mi,n.width=a[0],n.height=i[0],!Ae(a[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,i)){if(i=0==(n=On(i.width,i.height,s.Oa,s.ba))){t:{i=e;n:for(;;){if(null==i){i=0;break t}if(t(null!=i.s.yc),t(null!=i.s.Ya),t(0<i.s.Wb),t(null!=(a=i.l)),t(null!=(r=a.ma)),0!=i.xb){if(i.ca=r.ba,i.tb=r.tb,t(null!=i.ca),!Tn(r.Oa,a,Ba)){i.a=2;break n}if(!Le(i,a.width))break n;if(a.da)break n;if((a.da||ae(i.ca.S))&&vn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&vn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!R(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!Ce(i,i.V,i.Ba,i.c,i.i,a.o,_e))break n;r.Dc=i.Ma,i=1;break t}t(0!=i.a),i=0}i=!i}i&&(n=e.a)}else n=e.a}else{if(null==(e=new Ke)){s=1;break e}if(e.Fa=r.na,e.P=r.P,e.qc=r.Sa,$e(e,i)){if(0==(n=On(i.width,i.height,s.Oa,s.ba))){if(e.Aa=0,a=s.Oa,t(null!=(r=e)),null!=a){if(0<(c=0>(c=a.Md)?0:100<c?255:255*c/100)){for(d=u=0;4>d;++d)12>(h=r.pb[d]).lc&&(h.ia=c*zi[0>h.lc?0:h.lc]>>3),u|=h.ia;u&&(alert("todo:VP8InitRandom"),r.ia=1)}r.Ga=a.Id,100<r.Ga?r.Ga=100:0>r.Ga&&(r.Ga=0)}Xe(e,i)||(n=e.a)}}else n=e.a}0==n&&null!=s.Oa&&s.Oa.fd&&(n=Dn(s.ba))}s=n}o=0!=s?null:11>o?l.f.RGBA.eb:l.f.kb.y}else o=null;return o};var Hi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",a=0;a<4;a++)n+=String.fromCharCode(e[t++]);return n}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],p=[0],f=[],m=new l,g=e,v=function(e,t){var n={},a=0,i=!1,r=0,o=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){var s,l;for(u(e,t+=4),t+=8;t<e.length;){var h=c(e,t),p=u(e,t+=4);t+=4;var f=p+(1&p);switch(h){case"VP8 ":case"VP8L":void 0===n.frames[a]&&(n.frames[a]={}),(v=n.frames[a]).src_off=i?o:t-8,v.src_size=r+p+8,a++,i&&(i=!1,r=0,o=0);break;case"VP8X":(v=n.header={}).feature_flags=e[t];var m=t+4;v.canvas_width=1+d(e,m),m+=3,v.canvas_height=1+d(e,m),m+=3;break;case"ALPH":i=!0,r=f+8,o=t-8;break;case"ANIM":(v=n.header).bgcolor=u(e,t),m=t+4,v.loop_count=(s=e)[(l=m)+0]|s[l+1]<<8,m+=2;break;case"ANMF":var g,v;(v=n.frames[a]={}).offset_x=2*d(e,t),t+=3,v.offset_y=2*d(e,t),t+=3,v.width=1+d(e,t),t+=3,v.height=1+d(e,t),t+=3,v.duration=d(e,t),t+=3,g=e[t++],v.dispose=1&g,v.blend=g>>1&1}"ANMF"!=h&&(t+=f)}return n}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,b=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,h=[y.canvas_height],p=[y.canvas_width];for(var x=0;x<b.length&&0!=b[x].blend;x++);}var S=b[0],_=m.WebPDecodeRGBA(g,S.src_off,S.src_size,p,h);S.rgba=_,S.imgwidth=p[0],S.imgheight=h[0];for(var w=0;w<p[0]*h[0]*4;w++)f[w]=_[w];return this.width=p,this.height=h,this.data=f,this}!function(e){var t=function(t,a,l,c){var d=4,u=r;switch(c){case e.image_compression.FAST:d=1,u=i;break;case e.image_compression.MEDIUM:d=6,u=o;break;case e.image_compression.SLOW:d=9,u=s}var h=nt(t=n(t,a,l,u),{level:d});return e.__addimage__.arrayBufferToBinaryString(h)},n=function(e,t,n,a){for(var i,r,o,s=e.length/t,l=new Uint8Array(e.length+s),u=c(),h=0;h<s;h+=1){if(o=h*t,i=e.subarray(o,o+t),a)l.set(a(i,n,r),o+h);else{for(var p,f=u.length,m=[];p<f;p+=1)m[p]=u[p](i,n,r);var g=d(m.concat());l.set(m[g],o+h)}r=i}return l},a=function(e){var t=Array.apply([],e);return t.unshift(0),t},i=function(e,t){var n,a=[],i=e.length;a[0]=1;for(var r=0;r<i;r+=1)n=e[r-t]||0,a[r+1]=e[r]-n+256&255;return a},r=function(e,t,n){var a,i=[],r=e.length;i[0]=2;for(var o=0;o<r;o+=1)a=n&&n[o]||0,i[o+1]=e[o]-a+256&255;return i},o=function(e,t,n){var a,i,r=[],o=e.length;r[0]=3;for(var s=0;s<o;s+=1)a=e[s-t]||0,i=n&&n[s]||0,r[s+1]=e[s]+256-(a+i>>>1)&255;return r},s=function(e,t,n){var a,i,r,o,s=[],c=e.length;s[0]=4;for(var d=0;d<c;d+=1)a=e[d-t]||0,i=n&&n[d]||0,r=n&&n[d-t]||0,o=l(a,i,r),s[d+1]=e[d]-o+256&255;return s},l=function(e,t,n){if(e===t&&t===n)return e;var a=Math.abs(t-n),i=Math.abs(e-n),r=Math.abs(e+t-n-n);return a<=i&&a<=r?e:i<=r?t:n},c=function(){return[a,i,r,o,s]},d=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,a,i,r){var o,s,l,c,d,u,h,p,f,m,g,v,y,b,x,S=this.decode.FLATE_DECODE,_="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new Qn(n)).imgData,s=l.bits,o=l.colorSpace,d=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){f=(p=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(f*l.colors),m=new Uint8Array(f);var w,N=l.pixelBitlength-l.bits;for(b=0,x=0;b<f;b++){for(y=p[b],w=0;w<N;)g[x++]=y>>>w&255,w+=l.bits;m[b]=y>>>w&255}}if(16===l.bits){f=(p=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(f*(32/l.pixelBitlength)*l.colors),m=new Uint8Array(f*(32/l.pixelBitlength)),v=l.colors>1,b=0,x=0;for(var k=0;b<f;)y=p[b++],g[x++]=y>>>0&255,v&&(g[x++]=y>>>16&255,y=p[b++],g[x++]=y>>>0&255),m[k++]=y>>>16&255;s=8}r!==e.image_compression.NONE?(n=t(g,l.width*l.colors,l.colors,r),h=t(m,l.width,1,r)):(n=g,h=m,S=void 0)}if(3===l.colorType&&(o=this.color_spaces.INDEXED,u=l.palette,l.transparency.indexed)){var C=l.transparency.indexed,j=0;for(b=0,f=C.length;b<f;++b)j+=C[b];if((j/=255)===f-1&&-1!==C.indexOf(0))c=[C.indexOf(0)];else if(j!==f){for(p=l.decodePixels(),m=new Uint8Array(p.length),b=0,f=p.length;b<f;b++)m[b]=C[p[b]];h=t(m,l.width,1)}}var P=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(r);return S===this.decode.FLATE_DECODE&&(_="/Predictor "+P+" "),_+="/Colors "+d+" /BitsPerComponent "+s+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:i,data:n,index:a,filter:S,decodeParameters:_,transparency:c,palette:u,sMask:h,predictor:P,width:l.width,height:l.height,bitsPerComponent:s,colorSpace:o}}}}(Ot.API),function(e){e.processGIF89A=function(t,n,a,i){var r=new Jn(t),o=r.width,s=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:s},d=new ea(100).encode(c,100);return e.processJPEG.call(this,d,n,a,i)},e.processGIF87A=e.processGIF89A}(Ot.API),ta.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:a,blue:n,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ta.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){st.log("bit decode error:"+e)}},ta.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var r=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[r>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}0!==n&&(this.pos+=4-n)}},ta.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var r=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*i*4,s=r>>4,l=15&r,c=this.palette[s];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}0!==t&&(this.pos+=4-t)}},ta.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint8(this.pos++,!0),r=n*this.width*4+4*a;if(i<this.palette.length){var o=this.palette[i];this.data[r]=o.red,this.data[r+1]=o.green,this.data[r+2]=o.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}0!==e&&(this.pos+=4-e)}},ta.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(r&t)/t*255|0,s=(r>>5&t)/t*255|0,l=(r>>10&t)/t*255|0,c=r>>15?255:0,d=a*this.width*4+4*i;this.data[d]=l,this.data[d+1]=s,this.data[d+2]=o,this.data[d+3]=c}this.pos+=e}},ta.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var i=this.bottom_up?a:this.height-1-a,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/t*255|0,d=i*this.width*4+4*r;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=s,this.data[d+3]=255}this.pos+=e}},ta.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=r,this.data[o+1]=i,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},ta.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=r,this.data[s+1]=i,this.data[s+2]=a,this.data[s+3]=o}},ta.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,a,i){var r=new ta(t,!1),o=r.width,s=r.height,l={data:r.getData(),width:o,height:s},c=new ea(100).encode(l,100);return e.processJPEG.call(this,c,n,a,i)}}(Ot.API),na.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,a,i){var r=new na(t,!1),o=r.width,s=r.height,l={data:r.getData(),width:o,height:s},c=new ea(100).encode(l,100);return e.processJPEG.call(this,c,n,a,i)}}(Ot.API),Ot.API.processRGBA=function(e,t,n){for(var a=e.data,i=a.length,r=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var d=a[c],u=a[c+1],h=a[c+2],p=a[c+3];r[s++]=d,r[s++]=u,r[s++]=h,o[l++]=p}var f=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:f,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ot.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vn=Ot.API,Kn=Vn.getCharWidthsArray=function(e,t){var n,a,i=(t=t||{}).font||this.internal.getFont(),r=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=!1!==t.doKerning,h=0,p=e.length,f=0,m=s[0]||l,g=[];for(n=0;n<p;n++)a=e.charCodeAt(n),"function"==typeof i.metadata.widthOfString?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(a))+o*(1e3/r)||0)/1e3):(h=u&&"object"===(0,le.A)(c[a])&&!isNaN(parseInt(c[a][f],10))?c[a][f]/d:0,g.push((s[a]||m)/l+h)),f=a;return g},Yn=Vn.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Vn.processArabic&&(e=Vn.processArabic(e)),"function"==typeof a.metadata.widthOfString?a.metadata.widthOfString(e,n,i)/n:Kn.apply(this,arguments).reduce(function(e,t){return e+t},0)},Zn=function(e,t,n,a){for(var i=[],r=0,o=e.length,s=0;r!==o&&s+t[r]<n;)s+=t[r],r++;i.push(e.slice(0,r));var l=r;for(s=0;r!==o;)s+t[r]>a&&(i.push(e.slice(l,r)),s=0,l=r),s+=t[r],r++;return l!==r&&i.push(e.slice(l,r)),i},$n=function(e,t,n){n||(n={});var a,i,r,o,s,l,c,d=[],u=[d],h=n.textIndent||0,p=0,f=0,m=e.split(" "),g=Kn.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?m[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),y=[];m.map(function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):y.push(e[0])}),m=y,l=Yn.apply(this,[v,n])}for(r=0,o=m.length;r<o;r++){var b=0;if(a=m[r],l&&"\n"==a[0]&&(a=a.substr(1),b=1),h+p+(f=(i=Kn.apply(this,[a,n])).reduce(function(e,t){return e+t},0))>t||b){if(f>t){for(s=Zn.apply(this,[a,i,t-(h+p),t]),d.push(s.shift()),d=[s.pop()];s.length;)u.push([s.shift()]);f=i.slice(a.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[a];u.push(d),h=f+l,p=g}else d.push(a),h+=p+f,p=g}return c=l?function(e,t){return(t?v:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},Vn.splitTextToSize=function(e,t,n){var a,i=(n=n||{}).fontSize||this.internal.getFontSize(),r=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;r.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,r.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=a.length;s<l;s++)c=c.concat($n.apply(this,[a[s],o,r]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[t[i]]="0123456789abcdef"[i],a["0123456789abcdef"[i]]=t[i];var r=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,n,i,s,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=r(c).slice(2)).slice(0,-1)+a[n.slice(-1)]),"number"==typeof t)t<0?(i=r(t).slice(3),s="-"):(i=r(t).slice(2),s=""),i=s+i.slice(0,-1)+a[i.slice(-1)];else{if("object"!==(0,le.A)(t))throw new Error("Don't know what to do with value type "+(0,le.A)(t)+".");i=o(t)}l.push(n+i)}return l.push("}"),l.join("")},s=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,a,i,r,o={},s=1,l=o,c=[],d="",u="",h=e.length-1,p=1;p<h;p+=1)"'"==(r=e[p])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(r):"{"==r?(c.push([l,i]),l={},i=void 0):"}"==r?((a=c.pop())[0][a[1]]=l,i=void 0,l=a[0]):"-"==r?s=-1:void 0===i?n.hasOwnProperty(r)?(d+=n[r],i=parseInt(d,16)*s,s=1,d=""):d+=r:n.hasOwnProperty(r)?(u+=n[r],l[i]=parseInt(u,16)*s,s=1,i=void 0,u=""):u+=r;return o},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=d.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var a=c.Unicode[t.postScriptName];a&&(t.metadata.Unicode.encoding=a,t.encoding=a.codePages[0])}])}(Ot.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),a=0;a<t;a++)n[a]=e.charCodeAt(a);return n};e.API.events.push(["addFont",function(n){var a=void 0,i=n.font,r=n.instance;if(!i.isStandardFont){if(void 0===r)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(a=!1===r.existsFileInVFS(i.postScriptName)?r.loadFile(i.postScriptName):r.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(ut(a)),n.metadata=e.API.TTFFont.open(a),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,a)}}])}(Ot),function(){function e(){return(rt.canvg?Promise.resolve(rt.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Ot.API.addSvgAsImage=function(t,n,a,i,r,o,s,l){if(isNaN(n)||isNaN(a))throw st.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw st.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=r;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(e){return e.fromString(d,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),n,a,i,r,s,l)})}}(),Ot.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var i=0;i<this.internal.pages[a].length;i++)this.internal.pages[a][i]=this.internal.pages[a][i].replace(t,n);return this},Ot.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var a,i,r,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],c=0,d=0,u=0;function h(e,t){var n,a=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(a=!0);return a}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=s.length;for(u=0;u<p;u+=1)n[s[u]].value=n[s[u]].defaultValue,n[s[u]].explicitSet=!1}if("object"===(0,le.A)(e))for(i in e)if(r=e[i],h(s,i)&&void 0!==r){if("boolean"===n[i].type&&"boolean"==typeof r)n[i].value=r;else if("name"===n[i].type&&h(n[i].valueSet,r))n[i].value=r;else if("integer"===n[i].type&&Number.isInteger(r))n[i].value=r;else if("array"===n[i].type){for(c=0;c<r.length;c+=1)if(a=!0,1===r[c].length&&"number"==typeof r[c][0])l.push(String(r[c]-1));else if(r[c].length>1){for(d=0;d<r[c].length;d+=1)"number"!=typeof r[c][d]&&(a=!1);!0===a&&l.push([r[c][0]-1,r[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),r=unescape(encodeURIComponent("</x:xmpmeta>")),o=n.length+a.length+i.length+t.length+r.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+o+" >>"),this.internal.write("stream"),this.internal.write(t+n+a+i+r),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,a){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ot.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,a=t.metadata.Unicode.widths,i=["","0","00","000","0000"],r=[""],o=0,s=e.length;o<s;++o){if(n=t.metadata.characterToGlyph(e.charCodeAt(o)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(o),-1==a.indexOf(n)&&(a.push(n),a.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return r.join("");n=n.toString(16),r.push(i[4-n.length],n)}return r.join("")},a=function(e){var t,n,a,i,r,o,s;for(r="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",a=[],o=0,s=(n=Object.keys(e).sort(function(e,t){return e-t})).length;o<s;o++)t=n[o],a.length>=100&&(r+="\n"+a.length+" beginbfchar\n"+a.join("\n")+"\nendbfchar",a=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),a.push("<"+t+"><"+i+">"));return a.length&&(r+="\n"+a.length+" beginbfchar\n"+a.join("\n")+"\nendbfchar\n"),r+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,r=t.newObject,o=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=r();o({data:c,addLength1:!0,objectId:u}),i("endobj");var h=r();o({data:a(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var p=r();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+It(n.fontName)),i("/FontFile2 "+u+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var f=r();i("<<"),i("/Type /Font"),i("/BaseFont /"+It(n.fontName)),i("/FontDescriptor "+p+" 0 R"),i("/W "+e.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=r(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+h+" 0 R"),i("/BaseFont /"+It(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+f+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,r=t.newObject,o=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,l="",c=0;c<s.length;c++)l+=String.fromCharCode(s[c]);var d=r();o({data:l,addLength1:!0,objectId:d}),i("endobj");var u=r();o({data:a(n.metadata.toUnicode),addLength1:!0,objectId:u}),i("endobj");var h=r();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+d+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+It(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=r();for(var p=0;p<n.metadata.hmtx.widths.length;p++)n.metadata.hmtx.widths[p]=parseInt(n.metadata.hmtx.widths[p]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+It(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,a=e.text||"",i=e.x,r=e.y,o=e.options||{},s=e.mutex||{},l=s.pdfEscape,c=s.activeFontKey,d=s.fonts,u=c,h="",p=0,f="",m=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:a,x:i,y:r,options:o,mutex:s};for(f=a,u=c,Array.isArray(a)&&(f=a[0]),p=0;p<f.length;p+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[f[p].charCodeAt(0)]),t||f[p].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=f[p]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===m?g=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===m&&(g=n(h,d[u])),s.isHex=!0,{text:g,x:i,y:r,options:o,mutex:s}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],a={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var r=0;for(r=0;r<t.length;r+=1)Array.isArray(t[r])&&3===t[r].length?n.push([i(Object.assign({},a,{text:t[r][0]})).text,t[r][1],t[r][2]]):n.push(i(Object.assign({},a,{text:t[r]})).text);e.text=n}else e.text=i(Object.assign({},a,{text:t})).text}])}(Ot),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Ot.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,a,i,r,o,s,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),n=t>>8,a=p[n];return void 0!==a?c[256*a+(255&t)]:252===n||253===n?"AL":m.test(n)?"L":8===n?"R":"N"},b=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=y(e.charAt(n))))return!1;if("R"===t)return!0}return!1},x=function(e,t,o,s){var l,c,d,u,h=t[s];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":s<1||s+1>=t.length||"EN"!==(l=o[s-1])&&"AN"!==l||"EN"!==(c=t[s+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=s>0?o[s-1]:"B")&&s+1<t.length&&"EN"===t[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===o[s-1]){h="EN";break}if(g){h="N";break}for(d=s+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(i&&!r){for(u=t.length,d=s+1;d<u&&"NSM"===t[d];)d++;if(d<u){var p=e[s],f=p>=1425&&p<=2303||64286===p;if(l=t[d],f&&("R"===l||"AL"===l)){h="R";break}}}h=s<1||"B"===(l=t[s-1])?"N":o[s-1];break;case"B":g=!1,n=!0,h=v;break;case"S":a=!0,h="N"}return h},S=function(e,t,n){var a=e.split("");return n&&_(a,n,{hiLevel:v}),a.reverse(),t&&t.reverse(),a.join("")},_=function(e,t,i){var r,o,s,l,c,p=-1,f=e.length,m=0,b=[],S=v?u:d,_=[];for(g=!1,n=!1,a=!1,o=0;o<f;o++)_[o]=y(e[o]);for(s=0;s<f;s++){if(c=m,b[s]=x(e,_,b,s),r=240&(m=S[c][h[b[s]]]),m&=15,t[s]=l=S[m][5],r>0)if(16===r){for(o=p;o<s;o++)t[o]=1;p=-1}else p=-1;if(S[m][6])-1===p&&(p=s);else if(p>-1){for(o=p;o<s;o++)t[o]=l;p=-1}"B"===_[s]&&(t[s]=0),i.hiLevel|=l}a&&function(e,t,n){for(var a=0;a<n;a++)if("S"===e[a]){t[a]=v;for(var i=a-1;i>=0&&"WS"===e[i];i--)t[i]=v}}(_,t,f)},w=function(e,t,a,i,r){if(!(r.hiLevel<e)){if(1===e&&1===v&&!n)return t.reverse(),void(a&&a.reverse());for(var o,s,l,c,d=t.length,u=0;u<d;){if(i[u]>=e){for(l=u+1;l<d&&i[l]>=e;)l++;for(c=u,s=l-1;c<s;c++,s--)o=t[c],t[c]=t[s],t[s]=o,a&&(o=a[c],a[c]=a[s],a[s]=o);u=l}u++}}},N=function(e,t,n){var a=e.split(""),i={hiLevel:v};return n||(n=[]),_(a,n,i),function(e,t,n){if(0!==n.hiLevel&&l)for(var a,i=0;i<e.length;i++)1===t[i]&&(a=f.indexOf(e[i]))>=0&&(e[i]=f[a+1])}(a,n,i),w(2,a,t,n,i),w(1,a,t,n,i),a.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===r&&(r=b(e)),void 0===s&&(s=b(e))}(e,t),i||!o||s)if(i&&o&&r^s)v=r?1:0,e=S(e,t,n);else if(!i&&o&&s)v=r?1:0,e=N(e,t,n),e=S(e,t);else if(!i||r||o||s){if(i&&!o&&r^s)e=S(e,t),r?(v=0,e=N(e,t,n)):(v=1,e=N(e,t,n),e=S(e,t));else if(i&&r&&!o&&s)v=1,e=N(e,t,n),e=S(e,t);else if(!i&&!o&&r^s){var a=l;r?(v=1,e=N(e,t,n),v=0,l=!1,e=N(e,t,n),l=a):(v=0,e=N(e,t,n),e=S(e,t),v=1,l=!1,e=N(e,t,n),l=a,e=S(e,t))}}else v=0,e=N(e,t,n);else v=r?1:0,e=N(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,o=e.isOutputVisual,r=e.isInputRtl,s=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,a=(e.x,e.y,e.options||{}),i=(e.mutex,a.lang,[]);if(a.isInputVisual="boolean"!=typeof a.isInputVisual||a.isInputVisual,n.setOptions(a),"[object Array]"===Object.prototype.toString.call(t)){var r=0;for(i=[],r=0;r<t.length;r+=1)"[object Array]"===Object.prototype.toString.call(t[r])?i.push([n.doBidiReorder(t[r][0]),t[r][1],t[r][2]]):i.push([n.doBidiReorder(t[r])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Ot),Ot.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new ia(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new wa(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ra(this.contents),this.head=new la(this),this.name=new ma(this),this.cmap=new da(this),this.toUnicode={},this.hhea=new ua(this),this.maxp=new ga(this),this.hmtx=new va(this),this.post=new pa(this),this.os2=new ha(this),this.loca=new _a(this),this.glyf=new ba(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,a,i;for(i=[],t=0,n=(a=this.bbox).length;t<n;t++)e=a[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),0!=(32768&(t=a>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var a,i,r,o;for(r=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=e.charCodeAt(i),r+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/t)||0;return r*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var aa,ia=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,a;for(a=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,a,i,r,o,s;return e=this.readByte(),t=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^r)+256*(255^o)+(255^s)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*a+16777216*i+65536*r+256*o+s},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),ra=function(){var e;function t(e){var t,n,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,a=this.tableCount;0<=a?n<a:n>a;n=0<=a?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,a,i,r,o,s,l,c,d,u,h,p,f;for(f in h=Object.keys(t).length,s=Math.log(2),d=16*Math.floor(Math.log(h)/s),r=Math.floor(d/s),c=16*h-d,(a=new ia).writeInt(this.scalarType),a.writeShort(h),a.writeShort(d),a.writeShort(r),a.writeShort(c),i=16*h,l=a.pos+i,o=null,p=[],t)for(u=t[f],a.writeString(f),a.writeInt(e(u)),a.writeInt(l),a.writeInt(u.length),p=p.concat(u),"head"===f&&(o=l),l+=u.length;l%4;)p.push(0),l++;return a.write(p),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(e){var t,n,a,i;for(e=ya.call(e);e.length%4;)e.push(0);for(a=new ia(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=a.readUInt32();return 4294967295&n},t}(),oa={}.hasOwnProperty,sa=function(e,t){for(var n in t)oa.call(t,n)&&(e[n]=t[n]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};aa=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var la=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new ia).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),ca=function(){function e(e,t){var n,a,i,r,o,s,l,c,d,u,h,p,f,m,g,v,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,i=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,f=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),a=(this.length-e.pos+this.offset)/2,o=function(){var t,n;for(n=[],s=t=0;0<=a?t<a:t>a;s=0<=a?++t:--t)n.push(e.readUInt16());return n}(),s=g=0,y=i.length;g<y;s=++g)for(m=i[s],n=v=p=f[s];p<=m?v<=m:v>=m;n=p<=m?++v:--v)0===c[s]?r=n+l[s]:0!==(r=o[c[s]/2+(n-p)-(u-s)]||0)&&(r+=l[s]),this.codeMap[n]=65535&r}e.pos=d}return e.encode=function(e,t){var n,a,i,r,o,s,l,c,d,u,h,p,f,m,g,v,y,b,x,S,_,w,N,k,C,j,P,A,L,F,I,R,E,M,T,D,O,B,z,q,H,G,U,W,V,K;switch(A=new ia,r=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(f=0,m=function(){var e=[];for(p=0;p<256;++p)e.push(0);return e}(),v={0:0},i={},L=0,E=r.length;L<E;L++)null==v[U=e[a=r[L]]]&&(v[U]=++f),i[a]={old:e[a],new:v[e[a]]},m[a]=v[e[a]];return A.writeUInt16(1),A.writeUInt16(0),A.writeUInt32(12),A.writeUInt16(0),A.writeUInt16(262),A.writeUInt16(0),A.write(m),{charMap:i,subtable:A.data,maxGlyphID:f+1};case"unicode":for(j=[],d=[],y=0,v={},n={},g=l=null,F=0,M=r.length;F<M;F++)null==v[x=e[a=r[F]]]&&(v[x]=++y),n[a]={old:x,new:v[x]},o=v[x]-a,null!=g&&o===l||(g&&d.push(g),j.push(a),l=o),g=a;for(g&&d.push(g),d.push(65535),j.push(65535),k=2*(N=j.length),w=2*Math.pow(Math.log(N)/Math.LN2,2),u=Math.log(w/2)/Math.LN2,_=2*N-w,s=[],S=[],h=[],p=I=0,T=j.length;I<T;p=++I){if(C=j[p],c=d[p],65535===C){s.push(0),S.push(0);break}if(C-(P=n[C].new)>=32768)for(s.push(0),S.push(2*(h.length+N-p)),a=R=C;C<=c?R<=c:R>=c;a=C<=c?++R:--R)h.push(n[a].new);else s.push(P-C),S.push(0)}for(A.writeUInt16(3),A.writeUInt16(1),A.writeUInt32(12),A.writeUInt16(4),A.writeUInt16(16+8*N+2*h.length),A.writeUInt16(0),A.writeUInt16(k),A.writeUInt16(w),A.writeUInt16(u),A.writeUInt16(_),H=0,D=d.length;H<D;H++)a=d[H],A.writeUInt16(a);for(A.writeUInt16(0),G=0,O=j.length;G<O;G++)a=j[G],A.writeUInt16(a);for(W=0,B=s.length;W<B;W++)o=s[W],A.writeUInt16(o);for(V=0,z=S.length;V<z;V++)b=S[V],A.writeUInt16(b);for(K=0,q=h.length;K<q;K++)f=h[K],A.writeUInt16(f);return{charMap:n,subtable:A.data,maxGlyphID:y+1}}},e}(),da=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)t=new ca(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,a;return null==t&&(t="macroman"),n=ca.encode(e,t),(a=new ia).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),ua=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),ha=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),pa=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,a;for(a=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)a.push(e.readUInt32());return a}.call(this)}},e}(),fa=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},ma=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,a,i,r,o,s,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),o=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(s={},i=c=0,d=n.length;c<d;i=++c)a=n[i],e.pos=a.offset,l=e.readString(a.length),r=new fa(l,a),null==s[u=a.nameID]&&(s[u]=[]),s[a.nameID].push(r);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),ga=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),va=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,a,i,r,o,s;for(e.pos=this.offset,this.metrics=[],t=0,o=this.file.hhea.numberOfMetrics;0<=o?t<o:t>o;t=0<=o?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=a?n<a:n>a;t=0<=a?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,a;for(a=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],a.push(i.advance);return a}.call(this),n=this.widths[this.widths.length-1],s=[],t=r=0;0<=a?r<a:r>a;t=0<=a?++r:--r)s.push(this.widths.push(n));return s},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),ya=[].slice,ba=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,a,i,r,o,s,l,c,d;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(a=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,r=(o=new ia(t.read(a))).readShort(),l=o.readShort(),d=o.readShort(),s=o.readShort(),c=o.readShort(),this.cache[e]=-1===r?new Sa(o,l,d,s,c):new xa(o,r,l,d,s,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var a,i,r,o,s;for(r=[],i=[],o=0,s=t.length;o<s;o++)a=e[t[o]],i.push(r.length),a&&(r=r.concat(a.encode(n)));return i.push(r.length),{table:r,offsets:i}},e}(),xa=function(){function e(e,t,n,a,i,r){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=r,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Sa=function(){function e(e,t,n,a,i){var r,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],r=this.raw;o=r.readShort(),this.glyphOffsets.push(r.pos),this.glyphIDs.push(r.readUInt16()),32&o;)r.pos+=1&o?4:2,128&o?r.pos+=8:64&o?r.pos+=4:8&o&&(r.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new ia(ya.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),_a=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sa(e,aa),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,a;for(a=[],n=0,t=this.length;n<t;n+=2)a.push(2*e.readUInt16());return a}.call(this):function(){var t,a;for(a=[],n=0,t=this.length;n<t;n+=4)a.push(e.readUInt32());return a}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,r=0;r<n.length;++r)if(n[r]=a,i<t.length&&t[i]==r){++i,n[r]=a;var o=this.offsets[r],s=this.offsets[r+1]-o;s>0&&(a+=s)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),wa=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,a,i;for(t in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=a[n];return e},e.prototype.glyphsFor=function(e){var t,n,a,i,r,o,s;for(a={},r=0,o=e.length;r<o;r++)a[i=e[r]]=this.font.glyf.glyphFor(i);for(i in t=[],a)(null!=(n=a[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in s=this.glyphsFor(t))n=s[i],a[i]=n;return a},e.prototype.encode=function(e,t){var n,a,i,r,o,s,l,c,d,u,h,p,f,m,g;for(a in n=da.encode(this.generateCmap(),"unicode"),r=this.glyphsFor(e),h={0:0},g=n.charMap)h[(s=g[a]).old]=s.new;for(p in u=n.maxGlyphID,r)p in h||(h[p]=u++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),d=Object.keys(c).sort(function(e,t){return e-t}),f=function(){var e,t,n;for(n=[],e=0,t=d.length;e<t;e++)o=d[e],n.push(c[o]);return n}(),i=this.font.glyf.encode(r,f,h),l=this.font.loca.encode(i.offsets,f),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();Ot.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var a,i,r,o;if(Array.isArray(n))return"["+function(){var e,i,r;for(r=[],e=0,i=n.length;e<i;e++)a=n[e],r.push(t.convert(a));return r}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in r=["<<"],n)o=n[i],r.push("/"+i+" "+t.convert(o));return r.push(">>"),r.join("\n")}return""+n},t}();const Na=Ot,ka=(e,t)=>"".concat("https://res.cloudinary.com/drhp5e0kl/image/upload/v1766864130/Taste-Exploration","/").concat(e,"/").concat(t),Ca={living_spaces:{code:"LS",name:"Living Spaces",description:"Main living rooms, great rooms, salons, and formal sitting areas",icon:"\ud83d\udecb\ufe0f",color:"#1A365D"},dining_spaces:{code:"DS",name:"Dining Spaces",description:"Formal dining, breakfast areas, and casual eating spaces",icon:"\ud83c\udf7d\ufe0f",color:"#805AD5"},kitchens:{code:"KT",name:"Kitchens",description:"Chef's kitchens, family kitchens, and culinary spaces",icon:"\ud83d\udc68\u200d\ud83c\udf73",color:"#C9A962"},primary_bedrooms:{code:"PB",name:"Primary Bedrooms",description:"Master suites and primary sleeping quarters",icon:"\ud83d\udecf\ufe0f",color:"#9F7AEA"},primary_bathrooms:{code:"PBT",name:"Primary Bathrooms",description:"Master baths and spa-like retreats",icon:"\ud83d\udec1",color:"#38B2AC"},guest_bedrooms:{code:"GB",name:"Guest Bedrooms",description:"Guest suites and secondary sleeping quarters",icon:"\ud83d\udecf\ufe0f",color:"#667EEA"},family_areas:{code:"FA",name:"Family Areas",description:"Casual family rooms, media rooms, and recreational spaces",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",color:"#ED8936"},exterior_architecture:{code:"EA",name:"Exterior Architecture",description:"Facades, entries, and overall architectural presence",icon:"\ud83c\udfdb\ufe0f",color:"#319795"},outdoor_living:{code:"OL",name:"Outdoor Living",description:"Pools, terraces, gardens, and exterior entertainment",icon:"\ud83c\udf33",color:"#48BB78"}},ja=["living_spaces","dining_spaces","kitchens","primary_bedrooms","primary_bathrooms","guest_bedrooms","family_areas","exterior_architecture","outdoor_living"],Pa=(e,t,n,a)=>{const i={AS1:{warmth:4,formality:6,drama:10,tradition:1},AS3:{warmth:7,formality:7,drama:4,tradition:4},AS6:{warmth:6,formality:7,drama:5,tradition:7},AS9:{warmth:8,formality:9,drama:7,tradition:10}},r=[e,t,n,a].map(e=>i[e]||i.AS6);return{warmth:r.map(e=>e.warmth),formality:r.map(e=>e.formality),drama:r.map(e=>e.drama),tradition:r.map(e=>e.tradition)}},Aa=[{quadId:"LS-001",category:"living_spaces",images:[ka("LS","LS-001_0_AS1_VD1_MP1.png"),ka("LS","LS-001_1_AS3_VD3_MP1.png"),ka("LS","LS-001_2_AS6_VD6_MP1.png"),ka("LS","LS-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"LS-002",category:"living_spaces",images:[ka("LS","LS-002_0_AS3_VD3_MP6.png"),ka("LS","LS-002_1_AS6_VD6_MP6.png"),ka("LS","LS-002_2_AS9_VD9_MP6.png"),ka("LS","LS-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"LS-003",category:"living_spaces",images:[ka("LS","LS-003_0_AS9_VD9_MP1.png"),ka("LS","LS-003_1_AS1_VD1_MP3.png"),ka("LS","LS-003_2_AS3_VD3_MP3.png"),ka("LS","LS-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"LS-004",category:"living_spaces",images:[ka("LS","LS-004_0_AS1_VD1_MP9.png"),ka("LS","LS-004_1_AS3_VD3_MP9.png"),ka("LS","LS-004_2_AS6_VD6_MP9.png"),ka("LS","LS-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"DS-001",category:"dining_spaces",images:[ka("DS","DS-001_0_AS1_VD1_MP1.png"),ka("DS","DS-001_1_AS3_VD3_MP1.png"),ka("DS","DS-001_2_AS6_VD6_MP1.png"),ka("DS","DS-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"DS-002",category:"dining_spaces",images:[ka("DS","DS-002_0_AS3_VD3_MP6.png"),ka("DS","DS-002_1_AS6_VD6_MP6.png"),ka("DS","DS-002_2_AS9_VD9_MP6.png"),ka("DS","DS-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"DS-003",category:"dining_spaces",images:[ka("DS","DS-003_0_AS9_VD9_MP1.png"),ka("DS","DS-003_1_AS1_VD1_MP3.png"),ka("DS","DS-003_2_AS3_VD3_MP3.png"),ka("DS","DS-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"DS-004",category:"dining_spaces",images:[ka("DS","DS-004_0_AS1_VD1_MP9.png"),ka("DS","DS-004_1_AS3_VD3_MP9.png"),ka("DS","DS-004_2_AS6_VD6_MP9.png"),ka("DS","DS-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"KT-001",category:"kitchens",images:[ka("KT","KT-001_0_AS1_VD1_MP1.png"),ka("KT","KT-001_1_AS3_VD3_MP1.png"),ka("KT","KT-001_2_AS6_VD6_MP1.png"),ka("KT","KT-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"KT-002",category:"kitchens",images:[ka("KT","KT-002_0_AS3_VD3_MP6.png"),ka("KT","KT-002_1_AS6_VD6_MP6.png"),ka("KT","KT-002_2_AS9_VD9_MP6.png"),ka("KT","KT-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"KT-003",category:"kitchens",images:[ka("KT","KT-003_0_AS9_VD9_MP1.png"),ka("KT","KT-003_1_AS1_VD1_MP3.png"),ka("KT","KT-003_2_AS3_VD3_MP3.png"),ka("KT","KT-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"KT-004",category:"kitchens",images:[ka("KT","KT-004_0_AS1_VD1_MP9.png"),ka("KT","KT-004_1_AS3_VD3_MP9.png"),ka("KT","KT-004_2_AS6_VD6_MP9.png"),ka("KT","KT-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"PB-001",category:"primary_bedrooms",images:[ka("PB","PB-001_0_AS1_VD1_MP1.png"),ka("PB","PB-001_1_AS3_VD3_MP1.png"),ka("PB","PB-001_2_AS6_VD6_MP1.png"),ka("PB","PB-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"PB-002",category:"primary_bedrooms",images:[ka("PB","PB-002_0_AS3_VD3_MP6.png"),ka("PB","PB-002_1_AS6_VD6_MP6.png"),ka("PB","PB-002_2_AS9_VD9_MP6.png"),ka("PB","PB-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"PB-003",category:"primary_bedrooms",images:[ka("PB","PB-003_0_AS9_VD9_MP1.png"),ka("PB","PB-003_1_AS1_VD1_MP3.png"),ka("PB","PB-003_2_AS3_VD3_MP3.png"),ka("PB","PB-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"PB-004",category:"primary_bedrooms",images:[ka("PB","PB-004_0_AS1_VD1_MP9.png"),ka("PB","PB-004_1_AS3_VD3_MP9.png"),ka("PB","PB-004_2_AS6_VD6_MP9.png"),ka("PB","PB-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"PBT-001",category:"primary_bathrooms",images:[ka("PBT","PBT-001_0_AS1_VD1_MP1.png"),ka("PBT","PBT-001_1_AS3_VD3_MP1.png"),ka("PBT","PBT-001_2_AS6_VD6_MP1.png"),ka("PBT","PBT-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"PBT-002",category:"primary_bathrooms",images:[ka("PBT","PBT-002_0_AS3_VD3_MP6.png"),ka("PBT","PBT-002_1_AS6_VD6_MP6.png"),ka("PBT","PBT-002_2_AS9_VD9_MP6.png"),ka("PBT","PBT-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"PBT-003",category:"primary_bathrooms",images:[ka("PBT","PBT-003_0_AS9_VD9_MP1.png"),ka("PBT","PBT-003_1_AS1_VD1_MP3.png"),ka("PBT","PBT-003_2_AS3_VD3_MP3.png"),ka("PBT","PBT-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"PBT-004",category:"primary_bathrooms",images:[ka("PBT","PBT-004_0_AS1_VD1_MP9.png"),ka("PBT","PBT-004_1_AS3_VD3_MP9.png"),ka("PBT","PBT-004_2_AS6_VD6_MP9.png"),ka("PBT","PBT-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"GB-001",category:"guest_bedrooms",images:[ka("GB","GB-001_0_AS1_VD1_MP1.png"),ka("GB","GB-001_1_AS3_VD3_MP1.png"),ka("GB","GB-001_2_AS6_VD6_MP1.png"),ka("GB","GB-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"GB-002",category:"guest_bedrooms",images:[ka("GB","GB-002_0_AS3_VD3_MP6.png"),ka("GB","GB-002_1_AS6_VD6_MP6.png"),ka("GB","GB-002_2_AS9_VD9_MP6.png"),ka("GB","GB-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"GB-003",category:"guest_bedrooms",images:[ka("GB","GB-003_0_AS9_VD9_MP1.png"),ka("GB","GB-003_1_AS1_VD1_MP3.png"),ka("GB","GB-003_2_AS3_VD3_MP3.png"),ka("GB","GB-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"GB-004",category:"guest_bedrooms",images:[ka("GB","GB-004_0_AS1_VD1_MP9.png"),ka("GB","GB-004_1_AS3_VD3_MP9.png"),ka("GB","GB-004_2_AS6_VD6_MP9.png"),ka("GB","GB-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"FA-001",category:"family_areas",images:[ka("FA","FA-001_0_AS1_VD1_MP1.png"),ka("FA","FA-001_1_AS3_VD3_MP1.png"),ka("FA","FA-001_2_AS6_VD6_MP1.png"),ka("FA","FA-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"FA-002",category:"family_areas",images:[ka("FA","FA-002_0_AS3_VD3_MP6.png"),ka("FA","FA-002_1_AS6_VD6_MP6.png"),ka("FA","FA-002_2_AS9_VD9_MP6.png"),ka("FA","FA-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"FA-003",category:"family_areas",images:[ka("FA","FA-003_0_AS9_VD9_MP1.png"),ka("FA","FA-003_1_AS1_VD1_MP3.png"),ka("FA","FA-003_2_AS3_VD3_MP3.png"),ka("FA","FA-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"FA-004",category:"family_areas",images:[ka("FA","FA-004_0_AS1_VD1_MP9.png"),ka("FA","FA-004_1_AS3_VD3_MP9.png"),ka("FA","FA-004_2_AS6_VD6_MP9.png"),ka("FA","FA-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"EA-001",category:"exterior_architecture",images:[ka("EA","EA-001_0_AS1_VD1_MP1.png"),ka("EA","EA-001_1_AS3_VD3_MP1.png"),ka("EA","EA-001_2_AS6_VD6_MP1.png"),ka("EA","EA-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"EA-002",category:"exterior_architecture",images:[ka("EA","EA-002_0_AS3_VD3_MP6.png"),ka("EA","EA-002_1_AS6_VD6_MP6.png"),ka("EA","EA-002_2_AS9_VD9_MP6.png"),ka("EA","EA-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"EA-003",category:"exterior_architecture",images:[ka("EA","EA-003_0_AS9_VD9_MP1.png"),ka("EA","EA-003_1_AS1_VD1_MP3.png"),ka("EA","EA-003_2_AS3_VD3_MP3.png"),ka("EA","EA-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"EA-004",category:"exterior_architecture",images:[ka("EA","EA-004_0_AS1_VD1_MP9.png"),ka("EA","EA-004_1_AS3_VD3_MP9.png"),ka("EA","EA-004_2_AS6_VD6_MP9.png"),ka("EA","EA-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"OL-001",category:"outdoor_living",images:[ka("OL","OL-001_0_AS1_VD1_MP1.png"),ka("OL","OL-001_1_AS3_VD3_MP1.png"),ka("OL","OL-001_2_AS6_VD6_MP1.png"),ka("OL","OL-001_3_AS9_VD9_MP1.png")],attributes:Pa("AS1","AS3","AS6","AS9")},{quadId:"OL-002",category:"outdoor_living",images:[ka("OL","OL-002_0_AS3_VD3_MP6.png"),ka("OL","OL-002_1_AS6_VD6_MP6.png"),ka("OL","OL-002_2_AS9_VD9_MP6.png"),ka("OL","OL-002_3_AS1_VD1_MP9.png")],attributes:Pa("AS3","AS6","AS9","AS1")},{quadId:"OL-003",category:"outdoor_living",images:[ka("OL","OL-003_0_AS9_VD9_MP1.png"),ka("OL","OL-003_1_AS1_VD1_MP3.png"),ka("OL","OL-003_2_AS3_VD3_MP3.png"),ka("OL","OL-003_3_AS6_VD6_MP3.png")],attributes:Pa("AS9","AS1","AS3","AS6")},{quadId:"OL-004",category:"outdoor_living",images:[ka("OL","OL-004_0_AS1_VD1_MP9.png"),ka("OL","OL-004_1_AS3_VD3_MP9.png"),ka("OL","OL-004_2_AS6_VD6_MP9.png"),ka("OL","OL-004_3_AS9_VD9_MP9.png")],attributes:Pa("AS1","AS3","AS6","AS9")}],La=30,Fa=58,Ia=95,Ra=201,Ea=162,Ma=39,Ta=254,Da=249,Oa=231,Ba=248,za=250,qa=252,Ha=100,Ga=116,Ua=139,Wa=45,Va=55,Ka=72,Ya=255,Za=255,$a=255,Qa=34,Ja=197,Xa=94,ei=[{id:"exterior_architecture",code:"EA",name:"Exterior Architecture"},{id:"living_spaces",code:"LS",name:"Living Spaces"},{id:"dining_spaces",code:"DS",name:"Dining Spaces"},{id:"kitchens",code:"KT",name:"Kitchens"},{id:"family_areas",code:"FA",name:"Family Areas"},{id:"primary_bedrooms",code:"PB",name:"Primary Bedrooms"},{id:"primary_bathrooms",code:"PBT",name:"Primary Bathrooms"},{id:"guest_bedrooms",code:"GB",name:"Guest Bedrooms"},{id:"outdoor_living",code:"OL",name:"Outdoor Living"}],ti={1:"Avant-Contemporary",2:"Architectural Modern",3:"Curated Minimalism",4:"Nordic Contemporary",5:"Mid-Century Refined",6:"Modern Classic",7:"Classical Contemporary",8:"Formal Classical",9:"Heritage Estate"};function ni(e,t){const n=Aa.find(t=>t.quadId===e);return n&&n.images&&n.images[t]?n.images[t]:null}function ai(e){if(!e)return null;const t=e.split("/").pop(),n=t.match(/AS(\d)/),a=t.match(/VD(\d)/),i=t.match(/MP(\d)/);return n&&a&&i?{as:parseInt(n[1]),vd:parseInt(a[1]),mp:parseInt(i[1])}:null}function ii(e){return(e-1)/8*4+1}async function ri(e){return new Promise(t=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{const a=document.createElement("canvas");a.width=n.width,a.height=n.height;a.getContext("2d").drawImage(n,0,0);try{const e=a.toDataURL("image/jpeg",.85);t(e)}catch(ph){console.warn("Could not load image:",e),t(null)}},n.onerror=()=>{console.warn("Image load error:",e),t(null)},n.src=e})}class oi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.doc=new Na("p","pt","letter"),this.profileP=e,this.profileS=t,this.options=n,this.kycData=n.kycData||null,this.pageWidth=612,this.pageHeight=792,this.margin=36,this.contentWidth=this.pageWidth-2*this.margin;const{data:a,metrics:i}=this.calculateCategoryDataFor(this.profileP);if(this.categoryData=a,this.overallMetrics=i,this.categoryDataS=null,this.overallMetricsS=null,this.hasPartnerData=!1,this.profileS){const{data:e,metrics:t}=this.calculateCategoryDataFor(this.profileS);Object.values(e).some(e=>e.hasSelection)&&(this.categoryDataS=e,this.overallMetricsS=t,this.hasPartnerData=!0)}this.currentPage=1,this.totalPages=this.hasPartnerData?5:4}calculateCategoryDataFor(e){const t={};let n=0,a=0,i=0,r=0;if(!e)return{data:{},metrics:{styleEra:2.5,materialComplexity:2.5,moodPalette:2.5,styleLabel:"Transitional"}};ei.forEach(o=>{const l=function(e,t){var n,a,i,r;const o=e.selections||(null===(n=e.session)||void 0===n?void 0:n.selections)||{},s=Aa.filter(e=>e.category===t);for(const c of s){const e=o[c.quadId];if(e&&e.favorites&&e.favorites.length>0)return{quadId:c.quadId,positionIndex:e.favorites[0]}}const l=(null===(a=e.session)||void 0===a||null===(i=a.progress)||void 0===i||null===(r=i[t])||void 0===r?void 0:r.selections)||[];for(const c of l)if(c.selectedIndex>=0&&c.selectedIndex<=3)return{quadId:c.quadId,positionIndex:c.selectedIndex};return null}(e,o.id);if(l){const e=ai(ni(l.quadId,l.positionIndex)),c=function(e,t){const n=ai(ni(e,t));return n?{styleEra:ii(n.as),materialComplexity:ii(n.vd),moodPalette:ii(n.mp)}:{styleEra:2.5,materialComplexity:2.5,moodPalette:2.5}}(l.quadId,l.positionIndex);t[o.id]=s(s({},o),{},{selection:l,metrics:c,asCode:(null===e||void 0===e?void 0:e.as)||5,hasSelection:!0}),n+=c.styleEra,a+=c.materialComplexity,i+=c.moodPalette,r++}else t[o.id]=s(s({},o),{},{selection:null,metrics:{styleEra:2.5,materialComplexity:2.5,moodPalette:2.5},asCode:5,hasSelection:!1})});const o=r>0?{styleEra:n/r,materialComplexity:a/r,moodPalette:i/r,styleLabel:(l=n/r,l<2.5?"Contemporary":l>3.5?"Traditional":"Transitional")}:{styleEra:2.5,materialComplexity:2.5,moodPalette:2.5,styleLabel:"Transitional"};var l;return{data:t,metrics:o}}calculateAlignmentScore(){if(!this.hasPartnerData)return null;let e=0,t=0;if(ei.forEach(n=>{const a=this.categoryData[n.id],i=this.categoryDataS[n.id];if(null!==a&&void 0!==a&&a.hasSelection&&null!==i&&void 0!==i&&i.hasSelection){const n=Math.abs(a.asCode-i.asCode);e+=n,t++}}),0===t)return null;const n=e/t,a=Math.max(0,100-12.5*n);return Math.round(a)}findDivergences(){if(!this.hasPartnerData)return[];const e=[];return ei.forEach(t=>{const n=this.categoryData[t.id],a=this.categoryDataS[t.id];if(null!==n&&void 0!==n&&n.hasSelection&&null!==a&&void 0!==a&&a.hasSelection){const i=Math.abs(n.asCode-a.asCode);i>=3&&e.push({category:t.name,categoryCode:t.code,principalAS:n.asCode,secondaryAS:a.asCode,principalLabel:ti[n.asCode]||"AS".concat(n.asCode),secondaryLabel:ti[a.asCode]||"AS".concat(a.asCode),difference:i,severity:i>=5?"significant":"notable"})}}),e}async generate(){return this.addPage1Cover(),this.hasPartnerData?(this.doc.addPage(),this.currentPage=2,this.addPartnerAlignmentPage(),this.doc.addPage(),this.currentPage=3,await this.addSelectionsPage([0,1,2,3]),this.doc.addPage(),this.currentPage=4,await this.addSelectionsPage([4,5,6,7]),this.doc.addPage(),this.currentPage=5,await this.addSelectionsPage([8])):(this.doc.addPage(),this.currentPage=2,await this.addSelectionsPage([0,1,2,3]),this.doc.addPage(),this.currentPage=3,await this.addSelectionsPage([4,5,6,7]),this.doc.addPage(),this.currentPage=4,await this.addSelectionsPage([8])),this.doc}getClientName(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.portfolioContext;return null!==n&&void 0!==n&&n.principalFirstName||null!==n&&void 0!==n&&n.principalLastName?"".concat(n.principalFirstName||""," ").concat(n.principalLastName||"").trim():this.profileP.clientId||this.profileP.clientName||"Client"}getProjectName(){var e,t,n;return(null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t||null===(n=t.projectParameters)||void 0===n?void 0:n.projectName)||""}getLocation(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.projectParameters;return null!==n&&void 0!==n&&n.projectCity||null!==n&&void 0!==n&&n.projectCountry?"".concat(n.projectCity||"",", ").concat(n.projectCountry||"").replace(/^, |, $/g,""):this.options.location||""}getSecondaryName(){var e,t,n;const a=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.portfolioContext;return null!==a&&void 0!==a&&a.secondaryFirstName||null!==a&&void 0!==a&&a.secondaryLastName?"".concat(a.secondaryFirstName||""," ").concat(a.secondaryLastName||"").trim():(null===(n=this.profileS)||void 0===n?void 0:n.clientId)||"Partner"}addPartnerAlignmentPage(){let e=this.margin;this.doc.setFontSize(18),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("Partner Alignment Analysis",this.margin,e),e+=25;const t=this.getClientName(),n=this.getSecondaryName();this.doc.setFontSize(11),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ha,Ga,Ua),this.doc.text("Comparing design preferences: ".concat(t," & ").concat(n),this.margin,e),e+=30;const a=this.calculateAlignmentScore();this.doc.setFillColor(Ta,Da,Oa),this.doc.roundedRect(this.margin,e,this.contentWidth,60,8,8,"F"),this.doc.setFontSize(12),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("Overall Design Alignment",this.margin+20,e+25),this.doc.setFontSize(28),this.doc.setTextColor(Ra,Ea,Ma),this.doc.text("".concat(a||0,"%"),this.pageWidth-this.margin-20,e+35,{align:"right"}),this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ha,Ga,Ua);const i=a>=80?"Strong alignment - minimal compromise needed":a>=60?"Good alignment - some areas for discussion":a>=40?"Moderate alignment - focused discussions recommended":"Significant divergence - detailed mediation advised";this.doc.text(i,this.margin+20,e+45),e+=80,this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("DNA Axis Comparison",this.margin,e),e+=15,this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ha,Ga,Ua),this.doc.setFillColor(Ra,Ea,Ma),this.doc.circle(this.margin+5,e-3,4,"F"),this.doc.text("P = ".concat(t),this.margin+15,e),this.doc.setFillColor(La,Fa,Ia),this.doc.circle(this.margin+150,e-3,4,"F"),this.doc.text("S = ".concat(n),this.margin+160,e),e+=25;const r=this.contentWidth-100;e=this.drawDualSlider(this.margin,e,r,this.overallMetrics.styleEra,this.overallMetricsS.styleEra,"Style Era","Contemporary","Traditional"),e+=30,e=this.drawDualSlider(this.margin,e,r,this.overallMetrics.materialComplexity,this.overallMetricsS.materialComplexity,"Material Complexity","Minimal","Layered"),e+=30,e=this.drawDualSlider(this.margin,e,r,this.overallMetrics.moodPalette,this.overallMetricsS.moodPalette,"Mood Palette","Warm","Cool"),e+=40;const o=this.findDivergences();this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("Flagged Divergences",this.margin,e),e+=8,this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ha,Ga,Ua),this.doc.text("Categories where partners differ by 3+ style positions",this.margin,e),e+=20,0===o.length?(this.doc.setFillColor(Qa,Ja,Xa),this.doc.roundedRect(this.margin,e,this.contentWidth,40,6,6,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ya,Za,$a),this.doc.text("No significant divergences detected",this.margin+20,e+25)):o.forEach((a,i)=>{if(e>this.pageHeight-100)return;const r="significant"===a.severity?{r:220,g:38,b:38}:{r:234,g:179,b:8};this.doc.setFillColor(Ba,za,qa),this.doc.roundedRect(this.margin,e,this.contentWidth,55,6,6,"F"),this.doc.setFillColor(r.r,r.g,r.b),this.doc.rect(this.margin,e,4,55,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text(a.category,this.margin+15,e+18),this.doc.setFillColor(r.r,r.g,r.b),this.doc.roundedRect(this.pageWidth-this.margin-80,e+8,70,18,9,9,"F"),this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ya,Za,$a),this.doc.text("".concat(a.difference," positions"),this.pageWidth-this.margin-45,e+20,{align:"center"}),this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Wa,Va,Ka),this.doc.text("".concat(t,": ").concat(a.principalLabel),this.margin+15,e+32),this.doc.text("".concat(n,": ").concat(a.secondaryLabel),this.margin+15,e+44),e+=65}),this.addPageFooter()}drawDualSlider(e,t,n,a,i,r,o,s){const l=10,c=(Math.max(1,Math.min(5,a))-1)/4*n,d=(Math.max(1,Math.min(5,i))-1)/4*n;return this.doc.setFontSize(10),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Wa,Va,Ka),this.doc.text(r,e,t),t+=12,this.doc.setFillColor(226,232,240),this.doc.roundedRect(e,t,n,l,5,5,"F"),this.doc.setFillColor(Ra,Ea,Ma),this.doc.circle(e+c,t+5,8,"F"),this.doc.setFontSize(7),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ya,Za,$a),this.doc.text("P",e+c,t+5+2.5,{align:"center"}),this.doc.setFillColor(La,Fa,Ia),this.doc.circle(e+d,t+5,8,"F"),this.doc.setFontSize(7),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ya,Za,$a),this.doc.text("S",e+d,t+5+2.5,{align:"center"}),this.doc.setFontSize(8),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ha,Ga,Ua),this.doc.text(o,e,t+l+12),this.doc.text(s,e+n,t+l+12,{align:"right"}),t+l+20}addPageFooter(){const e=this.pageHeight-25;this.doc.setFontSize(8),this.doc.setTextColor(Ha,Ga,Ua),this.doc.text((new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),this.margin,e),this.doc.text("Page ".concat(this.currentPage," of ").concat(this.totalPages),this.pageWidth-this.margin,e,{align:"right"})}drawSlider5(e,t,n,a,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";const s=Math.max(1,Math.min(5,a)),l=(s-1)/4*n;return this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Wa,Va,Ka),this.doc.text(i,e,t),this.doc.setTextColor(Ra,Ea,Ma),this.doc.text(s.toFixed(1),e+n+10,t),t+=6,this.doc.setFillColor(226,232,240),this.doc.roundedRect(e,t,n,8,4,4,"F"),l>0&&(this.doc.setFillColor(Ra,Ea,Ma),this.doc.roundedRect(e,t,l,8,4,4,"F")),this.doc.setFillColor(La,Fa,Ia),this.doc.circle(e+l,t+4,6,"F"),r||o?(this.doc.setFontSize(7),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ha,Ga,Ua),r&&this.doc.text(r,e,t+8+10),o&&this.doc.text(o,e+n,t+8+10,{align:"right"}),t+8+18):t+8+8}addPage1Cover(){let e=0;this.doc.setFillColor(La,Fa,Ia),this.doc.rect(0,0,this.pageWidth,50,"F"),this.doc.setFontSize(14),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ya,Za,$a),this.doc.text("N4S Your Design Profile",this.margin,32),this.doc.setFont("helvetica","bold"),this.doc.text("Taste Exploration",this.pageWidth/2,32,{align:"center"}),e=65;const t=this.getClientName(),n=this.getProjectName(),a=this.getLocation();this.doc.setFontSize(10),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Wa,Va,Ka);const i="Client:  ";let r="".concat(i).concat(t);if(n&&(r+="     Project: ".concat(n)),a&&(r+="     Location: ".concat(a)),this.doc.text(r,this.margin,e),this.hasPartnerData){const t=this.getSecondaryName();e+=14;const n=this.doc.getTextWidth(i);this.doc.text(t,this.margin+n,e)}e+=20,this.doc.setFillColor(Ta,Da,Oa),this.doc.roundedRect(this.margin,e,this.contentWidth,50,6,6,"F"),this.doc.setFontSize(9),this.doc.setTextColor(Ha,Ga,Ua),this.doc.text("Your overall design aesthetic",this.margin+12,e+18),this.doc.setFontSize(24),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text(this.overallMetrics.styleLabel,this.pageWidth/2,e+35,{align:"center"}),e+=65,this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("Design DNA: Style Axes",this.margin,e),e+=25;e=this.drawSlider5(this.margin,e,200,this.overallMetrics.styleEra,"Style Era","Contemporary","Traditional"),e+=5,e=this.drawSlider5(this.margin,e,200,this.overallMetrics.materialComplexity,"Material Complexity","Minimal","Layered"),e+=5,e=this.drawSlider5(this.margin,e,200,this.overallMetrics.moodPalette,"Mood Palette","Warm","Cool"),e+=15,this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("Style Preferences",this.margin,e),e+=18;const o=this.contentWidth/2-20;this.doc.setFontSize(10),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Wa,Va,Ka),this.doc.text("Regional Influences",this.margin,e),this.doc.text("Material Preferences",this.margin+o+40,e),e+=14,this.doc.setFont("helvetica","normal"),this.doc.setFontSize(9);["European Contemporary","California Modern","Mediterranean"].forEach((t,n)=>{this.doc.text("\u2022 ".concat(t),this.margin,e+12*n)}),["Natural Stone","Warm Woods","Organic Textures"].forEach((t,n)=>{this.doc.text("\u2022 ".concat(t),this.margin+o+40,e+12*n)}),e+=50,this.doc.setFillColor(La,Fa,Ia),this.doc.roundedRect(this.margin,e,this.contentWidth,24,4,4,"F"),this.doc.rect(this.margin,e+16,this.contentWidth,8,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ya,Za,$a),this.doc.text("Design Preferences",this.margin+10,e+16),e+=28,this.doc.setFillColor(Ba,za,qa),this.doc.roundedRect(this.margin,e,this.contentWidth,180,4,4,"F");const s=e+10,l=(this.contentWidth-30)/3;this.doc.setFontSize(9),this.doc.setTextColor(Ha,Ga,Ua),this.doc.text("Style Direction",this.margin+15,s+12),this.doc.text("Formality",this.margin+l+20,s+12),this.doc.text("Mood",this.margin+2*l+25,s+12),this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text(this.overallMetrics.styleLabel,this.margin+15,s+28),this.doc.text("Relaxed",this.margin+l+20,s+28),this.doc.text("Warm",this.margin+2*l+25,s+28);const c=s+50,d=(this.contentWidth-40)/3;[{label:"Tradition",value:this.overallMetrics.styleEra},{label:"Formality",value:2.8},{label:"Warmth",value:3.5},{label:"Drama",value:2.2},{label:"Openness",value:3.8},{label:"Art Focus",value:3}].forEach((e,t)=>{const n=t%3,a=Math.floor(t/3),i=this.margin+10+n*(d+10),r=c+60*a;this.doc.setFillColor(Ya,Za,$a),this.doc.roundedRect(i,r,d,50,4,4,"F"),this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Wa,Va,Ka),this.doc.text(e.label,i+8,r+14),this.doc.setTextColor(Ra,Ea,Ma),this.doc.text(e.value.toFixed(1),i+d-25,r+14);const o=r+28,s=d-16,l=(e.value-1)/4*s;this.doc.setFillColor(226,232,240),this.doc.roundedRect(i+8,o,s,6,3,3,"F"),this.doc.setFillColor(Ra,Ea,Ma),this.doc.roundedRect(i+8,o,l,6,3,3,"F"),this.doc.setFillColor(La,Fa,Ia),this.doc.circle(i+8+l,o+3,4,"F")}),e=c+130,null===this.profileS&&this.options.partnerName&&(this.doc.setFontSize(9),this.doc.setTextColor(221,107,32),this.doc.text("Note: ".concat(this.options.partnerName," has not completed Taste Exploration..."),this.margin,e),e+=20),e+=10;const u=(this.contentWidth-30)/4;[{title:"Property Configuration",items:this.getPropertyConfigItems()},{title:"Household Composition",items:this.getHouseholdItems()},{title:"Lifestyle",items:this.getLifestyleItems()},{title:"Wellness Program",items:this.getWellnessItems()}].forEach((t,n)=>{const a=this.margin+n*(u+10);this.doc.setFillColor(Ba,za,qa),this.doc.roundedRect(a,e,u,70,4,4,"F"),this.doc.setFontSize(8),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text(t.title,a+6,e+14),this.doc.setFont("helvetica","normal"),this.doc.setFontSize(7),this.doc.setTextColor(Wa,Va,Ka),t.items.slice(0,3).forEach((t,n)=>{this.doc.text(t,a+6,e+28+12*n)})}),e+=85;const h=this.getSelectedAmenities();if(h.length>0){this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("Selected Amenities",this.margin,e),e+=14;let t=this.margin;h.forEach(n=>{const a=this.doc.getTextWidth(n)+16;t+a>this.pageWidth-this.margin&&(t=this.margin,e+=20),this.doc.setFillColor(Qa,Ja,Xa),this.doc.roundedRect(t,e-10,a,16,8,8,"F"),this.doc.setFontSize(8),this.doc.setTextColor(Ya,Za,$a),this.doc.text(n,t+8,e),t+=a+8})}this.addPageFooter()}async addSelectionsPage(e){this.doc.setFillColor(248,250,252),this.doc.rect(0,0,this.pageWidth,this.pageHeight,"F");let t=this.margin;this.doc.setFontSize(16),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("Your Selections",this.margin,t),t+=14,this.doc.setFontSize(10),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ha,Ga,Ua),this.doc.text("The images you selected during Taste Exploration",this.margin,t),t+=25;const n=(this.contentWidth-20)/2,a=.625*n,i=a+130,r=1===e.length;for(let o=0;o<e.length;o++){const s=e[o];if(s>=ei.length)continue;const l=ei[s],c=this.categoryData[l.id];let d,u,h,p;if(r?(h=(this.pageWidth-n)/2,p=t):(d=o%2,u=Math.floor(o/2),h=this.margin+d*(n+20),p=t+u*(i+20)),this.doc.setFillColor(Ba,za,qa),this.doc.roundedRect(h,p,n,i,6,6,"F"),this.doc.setFillColor(226,232,240),this.doc.roundedRect(h+8,p+8,n-16,a,4,4,"F"),c.selection){const e=ni(c.selection.quadId,c.selection.positionIndex);if(e)try{const t=await ri(e);t&&this.doc.addImage(t,"JPEG",h+8,p+8,n-16,a)}catch(ph){}}const f=p+8+a;this.doc.setFillColor(La,Fa,Ia),this.doc.rect(h+8,f,n-16,24,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Ya,Za,$a),this.doc.text(l.name,h+n/2,f+16,{align:"center"});let m=f+42;this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(La,Fa,Ia),this.doc.text("Design DNA",h+12,m),m+=12;const g=n-60,v=c.metrics;this.drawCategorySlider(h+12,m,g,v.styleEra,"Style Era","Contemporary","Traditional"),m+=24,this.drawCategorySlider(h+12,m,g,v.materialComplexity,"Material Complexity","Minimal","Layered"),m+=24,this.drawCategorySlider(h+12,m,g,v.moodPalette,"Mood Palette","Warm","Cool")}this.addPageFooter()}drawCategorySlider(e,t,n,a,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";const s=Math.max(1,Math.min(5,a)),l=(s-1)/4*n;this.doc.setFontSize(7),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Wa,Va,Ka),this.doc.text(i,e,t),this.doc.setTextColor(Ra,Ea,Ma),this.doc.text(s.toFixed(1),e+n+8,t);const c=t+4;this.doc.setFillColor(226,232,240),this.doc.roundedRect(e,c,n,4,2,2,"F"),l>0&&(this.doc.setFillColor(Ra,Ea,Ma),this.doc.roundedRect(e,c,l,4,2,2,"F")),this.doc.setFillColor(La,Fa,Ia),this.doc.circle(e+l,c+2,3,"F"),(r||o)&&(this.doc.setFontSize(6),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ha,Ga,Ua),r&&this.doc.text(r,e,c+12),o&&this.doc.text(o,e+n,c+12,{align:"right"}))}getPropertyConfigItems(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.projectParameters;return n?[n.targetGSF?"".concat(n.targetGSF.toLocaleString()," SF"):"",n.bedroomCount?"".concat(n.bedroomCount," Bedrooms"):"",n.bathroomCount?"".concat(n.bathroomCount," Bathrooms"):""].filter(Boolean):["No data"]}getHouseholdItems(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.familyHousehold;if(!n)return["No data"];const a=[];if(n.familyMembers&&n.familyMembers.length>0){a.push("".concat(n.familyMembers.length," Family Members"));const e=n.familyMembers.filter(e=>["child","young-child","teenager"].includes(e.role));e.length>0&&a.push("".concat(e.length," Children"))}if(n.staffingLevel&&"none"!==n.staffingLevel){const e="live_in"===n.staffingLevel?"".concat(n.liveInStaff||1," Live-in Staff"):"full_time"===n.staffingLevel?"Full-Time Staff":"Part-Time Staff";a.push(e)}return n.pets&&a.push("Has Pets"),a.length>0?a:["No data"]}getLifestyleItems(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.lifestyleLiving;if(!n)return["No data"];const a=[];if(n.entertainingStyle){const e={formal:"Formal Entertaining",casual:"Casual Entertaining",both:"Both Formal & Casual"};a.push(e[n.entertainingStyle]||n.entertainingStyle)}if(n.entertainingFrequency){const e={rarely:"Entertains Rarely",monthly:"Entertains Monthly",weekly:"Entertains Weekly",daily:"Entertains Daily"};a.push(e[n.entertainingFrequency]||"")}if(n.workFromHome&&"never"!==n.workFromHome){const e={sometimes:"WFH 1-2 days",often:"WFH 3-4 days",always:"Full Remote"};a.push(e[n.workFromHome]||"Works from Home")}return a.length>0?a:["No data"]}getWellnessItems(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.lifestyleLiving;if(null===n||void 0===n||!n.wellnessPriorities||0===n.wellnessPriorities.length)return["No data"];const a={gym:"Home Gym",pool:"Pool",spa:"Spa/Sauna",yoga:"Yoga Studio",massage:"Massage Room",meditation:"Meditation Space","cold-plunge":"Cold Plunge"};return n.wellnessPriorities.slice(0,3).map(e=>a[e]||e)}getSelectedAmenities(){var e,t;const n=null===(e=this.kycData)||void 0===e||null===(t=e.principal)||void 0===t?void 0:t.spaceRequirements;return null!==n&&void 0!==n&&n.amenities?n.amenities.slice(0,6):[]}download(e,t){const n=t||this.getClientName(),a=e||"N4S-Design-Profile-".concat(n.replace(/\s+/g,"-"),".pdf");this.doc.save(a)}openInNewTab(){const e=this.doc.output("blob"),t=URL.createObjectURL(e);window.open(t,"_blank")}getBlob(){return this.doc.output("blob")}getBase64(){return this.doc.output("datauristring")}}async function si(e){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n=new oi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});await n.generate(),n.download(null,t)}async function li(e){const t=new oi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});await t.generate(),t.openInNewTab()}const ci=d("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),di=d("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),ui=d("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]),hi=d("TreeDeciduous",[["path",{d:"M8 19h8a4 4 0 0 0 3.8-2.8 4 4 0 0 0-1.6-4.5c1-1.1 1-2.7.4-4-.7-1.2-2.2-2-3.6-1.7a3 3 0 0 0-3-3 3 3 0 0 0-3 3c-1.4-.2-2.9.5-3.6 1.7-.7 1.3-.5 2.9.4 4a4 4 0 0 0-1.6 4.5A4 4 0 0 0 8 19Z",key:"12ivfl"}],["path",{d:"M12 19v3",key:"npa21l"}]]),pi=d("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fi=d("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),mi=d("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),gi=d("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),vi=(e,t)=>{const n={warmth:0,formality:0,drama:0,tradition:0,openness:0,art_focus:0,materials:{}};let a=0;Object.entries(e).forEach(e=>{let[t,i]=e;const r=Aa.find(e=>e.quadId===t);if(!r||!r.attributes||!i)return;const{favorites:o=[],least:s}=i;o.forEach((e,t)=>{const i=0===t?4:2.5;a+=Math.abs(i),Object.entries(r.attributes).forEach(t=>{let[a,r]=t;if(Array.isArray(r)&&void 0!==r[e])if("material_focus"===a){const t=r[e];n.materials[t]=(n.materials[t]||0)+i}else void 0!==n[a]&&(n[a]+=r[e]*i)})}),null!==s&&void 0!==s&&(a+=Math.abs(-2),Object.entries(r.attributes).forEach(e=>{let[t,a]=e;if(Array.isArray(a)&&void 0!==a[s])if("material_focus"===t){const e=a[s];n.materials[e]=(n.materials[e]||0)+-2}else void 0!==n[t]&&(n[t]+=-2*a[s])}))});const i={};["warmth","formality","drama","tradition","openness","art_focus"].forEach(e=>{i[e]=a>0?Math.min(10,Math.max(1,Math.round(10*(n[e]/a+5))/10)):5});const r=Object.entries(n.materials).filter(e=>{let[t,n]=e;return n>0}).sort((e,t)=>t[1]-e[1]).slice(0,5).map(e=>{let[t]=e;return t});return{scores:i,topMaterials:r,completedQuads:Object.keys(e).length,skippedQuads:t.length,totalQuads:Aa.length}},yi={living_spaces:u,dining_spaces:ci,kitchens:ci,primary_bedrooms:di,primary_bathrooms:ui,guest_bedrooms:di,family_areas:u,exterior_architecture:L,outdoor_living:hi},bi=e=>{let{quad:t,selections:n,onSelectionChange:i,onSkip:r,onConfirm:o}=e;const[l,c]=(0,a.useState)({}),{favorites:d=[],least:u=null}=n||{},h=2===d.length&&null!==u;return(0,E.jsxs)("div",{className:"taste-quad",children:[(0,E.jsxs)("div",{className:"taste-quad__instruction ".concat(h?"taste-quad__instruction--complete":""),children:[0===d.length?"Select your 2 favorite images":1===d.length?"Select 1 more favorite":null===u?"Now select your least favorite":"Ready to confirm",(0,E.jsx)("span",{className:"taste-quad__tap-hint",children:"Tap a selection to change it"})]}),(0,E.jsx)("div",{className:"taste-quad__grid",children:[0,1,2,3].map(e=>{const n=(e=>d.includes(e)?0===d.indexOf(e)?"favorite-1":"favorite-2":u===e?"least":null)(e);return(0,E.jsxs)("div",{className:"taste-quad__image-wrapper ".concat(n?"taste-quad__image-wrapper--".concat(n):""),onClick:()=>(e=>{d.includes(e)?i({favorites:d.filter(t=>t!==e),least:u}):u!==e?d.length<2?i({favorites:[...d,e],least:u}):null===u&&i({favorites:d,least:e}):i({favorites:d,least:null})})(e),children:[l[e]?(0,E.jsxs)("div",{className:"taste-quad__image-placeholder",children:[(0,E.jsx)(pi,{size:32}),(0,E.jsx)("span",{children:"Image unavailable"})]}):(0,E.jsx)("img",{src:t.images[e],alt:"Option ".concat(String.fromCharCode(65+e)),className:"taste-quad__image",onError:()=>(e=>{c(t=>s(s({},t),{},{[e]:!0}))})(e),loading:"lazy"}),(0,E.jsx)("div",{className:"taste-quad__image-label",children:String.fromCharCode(65+e)}),"favorite-1"===n&&(0,E.jsxs)("div",{className:"taste-quad__selection-badge taste-quad__selection-badge--fav1",children:[(0,E.jsx)(Z,{size:20})," 1st"]}),"favorite-2"===n&&(0,E.jsxs)("div",{className:"taste-quad__selection-badge taste-quad__selection-badge--fav2",children:[(0,E.jsx)(Z,{size:20})," 2nd"]}),"least"===n&&(0,E.jsx)("div",{className:"taste-quad__selection-badge taste-quad__selection-badge--least",children:(0,E.jsx)(fi,{size:20})})]},e)})}),(0,E.jsxs)("div",{className:"taste-quad__actions",children:[(0,E.jsxs)("button",{className:"taste-quad__skip-btn",onClick:r,title:"None of these resonate with me",children:[(0,E.jsx)(v,{size:16})," Skip - Not My Style"]}),(d.length>0||null!==u)&&(0,E.jsxs)("button",{className:"taste-quad__reset-btn",onClick:()=>i({favorites:[],least:null}),title:"Clear all selections",children:[(0,E.jsx)(mi,{size:16})," Reset"]}),(0,E.jsxs)("button",{className:"taste-quad__confirm-btn ".concat(h?"taste-quad__confirm-btn--ready":""),onClick:o,disabled:!h,children:[(0,E.jsx)(gi,{size:16})," Confirm & Continue"]})]})]})},xi=e=>{let{category:t,categoryIndex:n,totalCategories:a,quadCount:i,onContinue:r,isFirstCategory:o}=e;const s=Ca[t],l=yi[t]||L;return(0,E.jsxs)("div",{className:"taste-divider",children:[(0,E.jsxs)("div",{className:"taste-divider__progress",children:["Category ",n+1," of ",a]}),(0,E.jsx)("div",{className:"taste-divider__icon",style:{backgroundColor:s.color},children:(0,E.jsx)(l,{size:48})}),(0,E.jsx)("h2",{className:"taste-divider__title",children:s.name}),(0,E.jsx)("p",{className:"taste-divider__description",children:s.description}),(0,E.jsx)("div",{className:"taste-divider__info",children:(0,E.jsxs)("span",{children:[i," comparison",i>1?"s":""," in this category"]})}),o?(0,E.jsxs)("div",{className:"taste-divider__instructions",children:[(0,E.jsx)("h4",{children:"How It Works"}),(0,E.jsxs)("div",{className:"taste-divider__instruction-steps",children:[(0,E.jsxs)("div",{className:"taste-divider__step",children:[(0,E.jsx)("span",{className:"taste-divider__step-icon taste-divider__step-icon--fav",children:"\u2764\ufe0f"}),(0,E.jsxs)("span",{children:[(0,E.jsx)("strong",{children:"Step 1:"})," Tap your ",(0,E.jsx)("strong",{children:"2 favorite"})," images"]})]}),(0,E.jsxs)("div",{className:"taste-divider__step",children:[(0,E.jsx)("span",{className:"taste-divider__step-icon taste-divider__step-icon--least",children:"\ud83d\udc4e"}),(0,E.jsxs)("span",{children:[(0,E.jsx)("strong",{children:"Step 2:"})," Tap your ",(0,E.jsx)("strong",{children:"least favorite"})," image"]})]}),(0,E.jsxs)("div",{className:"taste-divider__step",children:[(0,E.jsx)("span",{className:"taste-divider__step-icon taste-divider__step-icon--confirm",children:"\u2713"}),(0,E.jsxs)("span",{children:[(0,E.jsx)("strong",{children:"Step 3:"})," Press ",(0,E.jsx)("strong",{children:"Confirm"})," to continue"]})]})]}),(0,E.jsx)("p",{className:"taste-divider__tip",children:"\ud83d\udca1 You can tap any selection to change it before confirming"})]}):(0,E.jsxs)("p",{className:"taste-divider__instruction",children:["Select your ",(0,E.jsx)("strong",{children:"2 favorites"}),", then your ",(0,E.jsx)("strong",{children:"least favorite"}),", and confirm."]}),(0,E.jsxs)("button",{className:"taste-divider__btn",onClick:r,children:["Begin ",s.name]})]})},Si=e=>{let{selections:t,skipped:n,onRestart:i}=e;const r=(0,a.useMemo)(()=>vi(t,n),[t,n]),o=e=>e>=8?"High":e>=6?"Moderate-High":e>=4?"Moderate":e>=2?"Moderate-Low":"Low";return(0,E.jsxs)("div",{className:"taste-results",children:[(0,E.jsxs)("div",{className:"taste-results__header",children:[(0,E.jsx)(gi,{size:48,className:"taste-results__icon"}),(0,E.jsx)("h2",{children:"Taste Exploration Complete"}),(0,E.jsx)("p",{children:"Your aesthetic preferences have been captured"})]}),(0,E.jsxs)("div",{className:"taste-results__stats",children:[(0,E.jsxs)("div",{className:"taste-results__stat",children:[(0,E.jsx)("span",{className:"taste-results__stat-value",children:r.completedQuads}),(0,E.jsx)("span",{className:"taste-results__stat-label",children:"Quads Ranked"})]}),(0,E.jsxs)("div",{className:"taste-results__stat",children:[(0,E.jsx)("span",{className:"taste-results__stat-value",children:r.skippedQuads}),(0,E.jsx)("span",{className:"taste-results__stat-label",children:"Skipped"})]})]}),(0,E.jsxs)("div",{className:"taste-results__profile",children:[(0,E.jsx)("h3",{children:"Your Design Profile"}),(0,E.jsx)("div",{className:"taste-results__axes",children:Object.entries(r.scores).map(e=>{let[t,n]=e;return(0,E.jsxs)("div",{className:"taste-results__axis",children:[(0,E.jsxs)("div",{className:"taste-results__axis-header",children:[(0,E.jsx)("span",{className:"taste-results__axis-name",children:t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,E.jsxs)("span",{className:"taste-results__axis-value",children:[n,"/10"]})]}),(0,E.jsx)("div",{className:"taste-results__axis-bar",children:(0,E.jsx)("div",{className:"taste-results__axis-fill",style:{width:"".concat(10*n,"%")}})}),(0,E.jsx)("span",{className:"taste-results__axis-label",children:o(n)})]},t)})}),r.topMaterials.length>0&&(0,E.jsxs)("div",{className:"taste-results__materials",children:[(0,E.jsx)("h4",{children:"Material Affinities"}),(0,E.jsx)("div",{className:"taste-results__material-tags",children:r.topMaterials.map(e=>(0,E.jsx)("span",{className:"taste-results__material-tag",children:e.replace(/_/g," ")},e))})]})]}),(0,E.jsxs)("button",{className:"taste-results__restart-btn",onClick:i,children:[(0,E.jsx)(mi,{size:16})," Start Over"]})]})},_i=e=>{let{clientName:t,respondentType:n,onComplete:i,onBack:r}=e;const o=(0,a.useMemo)(()=>{const e=[];let t=0;return ja.forEach((n,a)=>{const i=Aa.filter(e=>e.category===n);0!==i.length&&(e.push({type:"divider",category:n,categoryIndex:a,quadCount:i.length}),i.forEach(n=>{e.push({type:"quad",quad:n,globalIndex:t++})}))}),e},[]),l=ja.filter(e=>Aa.some(t=>t.category===e)).length,[c,d]=(0,a.useState)(0),[u,h]=(0,a.useState)({}),[p,f]=(0,a.useState)([]),[m,g]=(0,a.useState)(!1),v=o[c],y=Aa.length,b=Object.keys(u).length+p.length,x=Math.round(b/y*100),S=(0,a.useCallback)((e,t)=>{h(n=>s(s({},n),{},{[e]:t}))},[]),_=(0,a.useCallback)(()=>{if(c<o.length-1)d(e=>e+1);else if(g(!0),i){const e=vi(u,p);i({selections:u,skipped:p,profile:e,completedAt:(new Date).toISOString()})}},[c,o.length,u,p,i]),w=(0,a.useCallback)(()=>{c>0&&d(e=>e-1)},[c]),N=(0,a.useCallback)(e=>{f(t=>[...t,e]),h(t=>{const n=s({},t);return delete n[e],n}),_()},[_]),k=(0,a.useCallback)(e=>{var t;const n=u[e];n&&2===(null===(t=n.favorites)||void 0===t?void 0:t.length)&&null!==n.least&&_()},[u,_]),C=()=>{d(0),h({}),f([]),g(!1)};return m?(0,E.jsx)("div",{className:"taste-exploration",children:(0,E.jsx)(Si,{selections:u,skipped:p,onRestart:C})}):(0,E.jsxs)("div",{className:"taste-exploration",children:[(0,E.jsxs)("div",{className:"taste-exploration__header",children:[(0,E.jsxs)("div",{className:"taste-exploration__info",children:[(0,E.jsxs)("span",{className:"taste-exploration__client",children:[t||"Client"," \u2022 ","secondary"===n?"Secondary":"Principal"]}),(0,E.jsx)("div",{className:"taste-exploration__progress-bar",children:(0,E.jsx)("div",{className:"taste-exploration__progress-fill",style:{width:"".concat(x,"%")}})}),(0,E.jsxs)("span",{className:"taste-exploration__progress-text",children:[b," of ",y," complete (",x,"%)"]})]}),r&&(0,E.jsxs)("button",{className:"taste-exploration__back-btn",onClick:r,children:[(0,E.jsx)(ee,{size:20})," Exit"]})]}),(0,E.jsxs)("div",{className:"taste-exploration__content",children:["divider"===(null===v||void 0===v?void 0:v.type)&&(0,E.jsx)(xi,{category:v.category,categoryIndex:v.categoryIndex,totalCategories:l,quadCount:v.quadCount,onContinue:_,isFirstCategory:0===v.categoryIndex}),"quad"===(null===v||void 0===v?void 0:v.type)&&(0,E.jsx)(bi,{quad:v.quad,selections:u[v.quad.quadId]||{favorites:[],least:null},onSelectionChange:e=>S(v.quad.quadId,e),onSkip:()=>N(v.quad.quadId),onConfirm:()=>k(v.quad.quadId)})]}),"quad"===(null===v||void 0===v?void 0:v.type)&&(0,E.jsx)("div",{className:"taste-exploration__nav taste-exploration__nav--simple",children:(0,E.jsxs)("button",{className:"taste-exploration__nav-btn",onClick:w,disabled:0===c,children:[(0,E.jsx)(ee,{size:20})," Previous"]})})]})},wi="n4s_taste_profile_",Ni=[{id:"AS1",name:"Avant-Contemporary",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045989/AS1_tpnuxa.png",features:["Sculptural, experimental massing; asymmetry and bold cantilevers.","Parametric or faceted fa\xe7ade moves; deep reveals and dramatic shadow play.","High-contrast material palette (metal, glass, monolithic stone/concrete).",'"Statement" architecture: kinetic screens, expressive structure, theatrical lighting.'],appeal:"Attracts clients drawn to bold artistic expression, avant-garde culture, and design as spectacle."},{id:"AS2",name:"Architectural Modern",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045988/AS2_ty6rnh.png",features:["Clean, minimalist volumetric forms, often flat roofs and ribbon glazing.","Refined material joints\u2014flush details, frameless glass, concealed flashings.",'Emphasis on "honest" structure (exposed steel, board-formed concrete, natural wood).',"Landscape seamlessly merges with architecture via courtyards and indoor-outdoor flow."],appeal:"Speaks to clients who value intellectual rigor, craftsmanship transparency, and edited, gallery-like interiors."},{id:"AS3",name:"Curated Minimalism",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045989/AS3_vwoca5.png",features:["Simple rectilinear massing with low-profile roofs or subtle flat roof parapets.","White/off-white palette with textured plaster, lime wash, bleached wood, or matte stone.","Furniture and d\xe9cor as focal points; architecture recedes to a serene backdrop.","Light-wells, internal courtyards, and tranquil water features enhance calm ambience."],appeal:"Resonates with clients seeking sanctuary from visual noise\u2014wellness-minded, art collectors, or contemplative personalities."},{id:"AS4",name:"Nordic Contemporary",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045988/AS4_kdptrm.png",features:["Warm-wood cladding combined with dark metal or stone accents; pitched or shed roofs.","Large, carefully placed windows framing views; deep eaves and sheltered entries.",'Cozy, "hygge-inspired" interiors\u2014tactile textiles, fireplaces, natural light modulation.',"Integration with landscape: timber terraces, evergreen planting, stone pathways."],appeal:"Attracts those who want warmth without fuss\u2014nature lovers, families desiring comfort, and clients from colder climates."},{id:"AS5",name:"Mid-Century Refined",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045989/AS5_b5xgik.png",features:["Low-slung profiles, butterfly/gable roofs, and rhythmic post-and-beam structure.","Floor-to-ceiling glass walls blurring inside-out; open-plan living.","Mix of natural materials (teak, walnut, stone, leather) with period-correct detailing.","Restored or reimagined vintage furniture; curated art pieces from the 1950s\u201370s."],appeal:"Draws collectors and design-history enthusiasts who appreciate authenticity, vintage provenance, and understated glamour."},{id:"AS6",name:"Modern Classic",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045988/AS6_kdudr2.png",features:["Symmetrical fa\xe7ades with simplified classical proportions\u2014no heavy ornamentation.","Warm whites, limestones, and metal accents; standing-seam roofs or simple parapets.","Interiors balance traditional layouts with contemporary finishes.","Timeless elegance: paneled walls meet sleek cabinetry and curated antiques."],appeal:"Appeals to clients who want enduring elegance without flash\u2014often older wealth, diplomats, or those comfortable in traditional social settings."},{id:"AS7",name:"Classical Contemporary",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045987/AS7_csfm3r.png",features:["Classical motifs (columns, pediments, cornices) rendered in stone or stucco; updated scale.","Grand entry sequences with proportioned doors, sidelights, and fanlights.","Formal interiors\u2014high ceilings, crown moldings, wainscoting\u2014paired with current fabrics.","Gardens reference classical landscape traditions: symmetry, hedges, sculpture."],appeal:"Resonates with clients who value tradition, family heritage, and a visible sense of status rooted in historical continuity."},{id:"AS8",name:"Formal Classical",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045990/AS8_emtr7x.png",features:["Full classical vocabulary: Doric/Ionic columns, entablatures, balustrades, hipped slate roofs.","Limestone, brick, or rendered masonry; ornate ironwork and stately porte-coch\xe8res.","Enfilade room sequences; grand staircases, paneled libraries, and ballroom-scale spaces.","Formal gardens with parterre beds, fountains, and axial sight lines."],appeal:"Attracts those seeking overt prestige\u2014Old World aristocracy, philanthropists, or clients who host grand social and ceremonial events."},{id:"AS9",name:"Heritage Estate",image:"https://res.cloudinary.com/drhp5e0kl/image/upload/v1767045990/AS9_s3btos.png",features:["Estate scale and layered historic character (manor, chateau, country house cues).","Deep-set windows, steep roofs, chimneys; materials with patina (stone, slate, brick).","Picturesque composition: wings, garden walls, service elements, inherited complexity.","Landscape is integral\u2014drives, hedges, gardens\u2014projecting longevity and legacy."],appeal:"Appeals to clients who want generational gravitas\u2014an estate that feels established, storied, and permanently valuable."}],ki=e=>{if(!e)return null;try{const t=localStorage.getItem("".concat(wi).concat(e));return t?JSON.parse(t):null}catch(ph){return console.error("Error loading profile:",ph),null}},Ci=(e,t)=>{if(!e)return null;try{const n=s(s({},t),{},{clientId:e,savedAt:(new Date).toISOString()});return localStorage.setItem("".concat(wi).concat(e),JSON.stringify(n)),n}catch(ph){return console.error("Error saving profile:",ph),null}},ji=e=>{var t,n;if(!e)return"not_started";if(e.completedAt||null!==(t=e.session)&&void 0!==t&&t.completedAt)return"complete";if(null!==(n=e.session)&&void 0!==n&&n.progress){const t=Object.values(e.session.progress).some(e=>e.completedQuads>0);return t?"in_progress":"not_started"}return e.selections&&Object.keys(e.selections).length>0?"complete":"not_started"},Pi=()=>{const[e,t]=(0,a.useState)(0),n=Math.ceil(Ni.length/2),i=Ni[2*e],r=Ni[2*e+1],o=e=>{let{style:t}=e;if(!t)return null;const n=Math.ceil(t.features.length/2),a=t.features.slice(0,n),i=t.features.slice(n);return(0,E.jsxs)("div",{className:"style-card",children:[(0,E.jsx)("div",{className:"style-card__image-container",children:(0,E.jsx)("img",{src:t.image,alt:t.name,className:"style-card__image"})}),(0,E.jsx)("h4",{className:"style-card__title",children:t.name}),(0,E.jsxs)("div",{className:"style-card__features",children:[(0,E.jsx)("ul",{className:"style-card__feature-list",children:a.map((e,t)=>(0,E.jsx)("li",{children:e},t))}),(0,E.jsx)("ul",{className:"style-card__feature-list",children:i.map((e,t)=>(0,E.jsx)("li",{children:e},t))})]}),(0,E.jsx)("p",{className:"style-card__appeal",children:t.appeal})]})};return(0,E.jsxs)("div",{className:"arch-carousel",children:[(0,E.jsx)("button",{onClick:()=>t((e-1+n)%n),className:"arch-carousel__btn arch-carousel__btn--prev",children:"\u2039"}),(0,E.jsxs)("div",{className:"arch-carousel__cards",children:[(0,E.jsx)(o,{style:i}),(0,E.jsx)(o,{style:r})]}),(0,E.jsx)("button",{onClick:()=>t((e+1)%n),className:"arch-carousel__btn arch-carousel__btn--next",children:"\u203a"}),(0,E.jsx)("div",{className:"arch-carousel__dots",children:Ni.map((t,n)=>(0,E.jsx)("span",{className:"arch-carousel__dot ".concat(n>=2*e&&n<2*e+2?"active":"")},n))})]})},Ai=e=>{let{clientId:t,name:n,profile:a,status:i,onLaunch:r,isPrimary:o}=e;return(0,E.jsxs)("div",{className:"profile-card ".concat(o?"profile-card--primary":"profile-card--secondary"),children:[(0,E.jsxs)("div",{className:"profile-card__header",children:[(0,E.jsx)("span",{className:"profile-card__badge",children:o?"P":"S"}),(0,E.jsx)("span",{className:"profile-card__name",children:n||t})]}),(0,E.jsx)("div",{className:"profile-card__status",style:{color:{not_started:"#94a3b8",in_progress:"#f59e0b",complete:"#10b981"}[i]},children:{not_started:"Not Started",in_progress:"In Progress",complete:"Complete"}[i]}),"complete"!==i&&(0,E.jsxs)("button",{className:"profile-card__btn",onClick:()=>r(o?"principal":"secondary"),children:["in_progress"===i?"Continue":"Start"," Taste Exploration"]}),"complete"===i&&(null===a||void 0===a?void 0:a.session)&&(0,E.jsx)("div",{className:"profile-card__summary",children:(0,E.jsxs)("small",{children:["Completed ",new Date(a.session.completedAt).toLocaleDateString()]})})]})},Li=e=>{let{label:t,value:n,leftLabel:a,rightLabel:i,max:r=5}=e;const o=(n-1)/(r-1)*100;return(0,E.jsxs)("div",{className:"dna-slider",children:[(0,E.jsx)("div",{className:"dna-slider__label",children:t}),(0,E.jsx)("div",{className:"dna-slider__track",children:(0,E.jsx)("div",{className:"dna-slider__marker",style:{left:"".concat(o,"%")}})}),(0,E.jsxs)("div",{className:"dna-slider__labels",children:[(0,E.jsx)("span",{children:a}),(0,E.jsx)("span",{children:i})]})]})},Fi=e=>{let{label:t,valueP:n,valueS:a,leftLabel:i,rightLabel:r,principalName:o,secondaryName:s}=e;const l=(n||2.5)/5*100,c=(a||2.5)/5*100;return(0,E.jsxs)("div",{className:"comparison-slider",children:[(0,E.jsx)("div",{className:"comparison-slider__header",children:(0,E.jsx)("span",{className:"comparison-slider__label",children:t})}),(0,E.jsxs)("div",{className:"comparison-slider__track-container",children:[(0,E.jsxs)("div",{className:"comparison-slider__track",children:[(0,E.jsx)("div",{className:"comparison-slider__marker comparison-slider__marker--principal",style:{left:"".concat(l,"%")},title:"".concat(o||"Principal",": ").concat(null===n||void 0===n?void 0:n.toFixed(1))}),(0,E.jsx)("div",{className:"comparison-slider__marker comparison-slider__marker--secondary",style:{left:"".concat(c,"%")},title:"".concat(s||"Secondary",": ").concat(null===a||void 0===a?void 0:a.toFixed(1))})]}),(0,E.jsxs)("div",{className:"comparison-slider__labels",children:[(0,E.jsx)("span",{className:"comparison-slider__left-label",children:i}),(0,E.jsx)("span",{className:"comparison-slider__right-label",children:r})]})]})]})},Ii=e=>{let{profileP:t,profileS:n,clientType:i,principalName:r,secondaryName:o,location:s,kycData:l,kycComplete:c,onRetake:d,onRefresh:u,onLaunchSecondary:h}=e;const[p,f]=(0,a.useState)(!1),[m,g]=(0,a.useState)(""),[v,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)(""),S=e=>{if(!e)return{ct:3,ml:3,mp:3};const t=e=>(e-1)/8*4+1;let n=0,a=0,i=0,r=0;return ja.forEach(o=>{const s=(t=>{var n;const a=e.selections||(null===(n=e.session)||void 0===n?void 0:n.selections)||{},i=Aa.filter(e=>e.category===t);for(const e of i){const t=a[e.quadId];if(t&&t.favorites&&t.favorites.length>0){const n=Aa.find(t=>t.quadId===e.quadId);if(n&&n.images&&n.images[t.favorites[0]])return n.images[t.favorites[0]]}}return null})(o);if(s){const e=(e=>{if(!e)return null;const t=e.split("/").pop(),n=t.match(/AS(\d)/),a=t.match(/VD(\d)/),i=t.match(/MP(\d)/);return n&&a&&i?{as:parseInt(n[1]),vd:parseInt(a[1]),mp:parseInt(i[1])}:null})(s);e&&(n+=t(e.as),a+=t(e.vd),i+=t(e.mp),r++)}}),0===r?{ct:3,ml:3,mp:3}:{ct:n/r,ml:a/r,mp:i/r}},_=S(t),w=n?S(n):null,N=(()=>{if(!_||!w)return 0;const e=(Math.abs((_.ct||2.5)-(w.ct||2.5))+Math.abs((_.ml||2.5)-(w.ml||2.5))+Math.abs((_.mp||2.5)-(w.mp||2.5)))/3;return Math.max(0,Math.round(100-e/5*100))})(),k=()=>({location:s||null,kycData:l});return(0,E.jsxs)("div",{className:"completed-view",children:[(0,E.jsxs)("div",{className:"completed-view__header",children:[(0,E.jsx)("h3",{children:"\u2705 Taste Profile Complete"}),(0,E.jsxs)("p",{className:"completed-view__subtitle",children:[r||"Principal","'s design preferences have been captured"]}),s&&(0,E.jsxs)("p",{className:"completed-view__location",children:["\ud83d\udccd ",s]})]}),(0,E.jsxs)("div",{className:"completed-view__dna",children:[(0,E.jsx)("h4",{children:"Design DNA"}),(0,E.jsx)("div",{className:"dna-label",children:(0,E.jsx)("span",{className:"dna-label__style",children:(C=_.ct,C<2.5?"Contemporary":C>3.5?"Traditional":"Transitional")})}),(0,E.jsx)(Li,{label:"Style Era",value:_.ct,leftLabel:"Contemporary",rightLabel:"Traditional"}),(0,E.jsx)(Li,{label:"Material Complexity",value:_.ml,leftLabel:"Minimal",rightLabel:"Layered"}),(0,E.jsx)(Li,{label:"Mood Palette",value:_.mp,leftLabel:"Warm",rightLabel:"Cool"})]}),t&&n&&(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Partner Alignment"}),(0,E.jsxs)("p",{className:"kyc-section__group-description",children:["Comparison of ",r||"Principal"," and ",o||"Secondary"," preferences."]}),(0,E.jsxs)("div",{className:"partner-comparison",children:[(0,E.jsxs)("div",{className:"alignment-score",children:[(0,E.jsx)("span",{className:"alignment-score__label",children:"Overall Alignment"}),(0,E.jsxs)("span",{className:"alignment-score__value ".concat(N>=70?"alignment-score__value--good":N>=50?"alignment-score__value--moderate":"alignment-score__value--low"),children:[N,"%"]})]}),(0,E.jsxs)("div",{className:"comparison-legend",children:[(0,E.jsxs)("span",{className:"comparison-legend__item comparison-legend__item--p",children:["\u25cf ",r||"Principal"]}),(0,E.jsxs)("span",{className:"comparison-legend__item comparison-legend__item--s",children:["\u25cf ",o||"Secondary"]})]}),(0,E.jsxs)("div",{className:"comparison-sliders",children:[(0,E.jsx)(Fi,{label:"Style Era",valueP:null===_||void 0===_?void 0:_.ct,valueS:null===w||void 0===w?void 0:w.ct,leftLabel:"Contemporary",rightLabel:"Traditional",principalName:r,secondaryName:o}),(0,E.jsx)(Fi,{label:"Material Complexity",valueP:null===_||void 0===_?void 0:_.ml,valueS:null===w||void 0===w?void 0:w.ml,leftLabel:"Minimal",rightLabel:"Layered",principalName:r,secondaryName:o}),(0,E.jsx)(Fi,{label:"Mood Palette",valueP:null===_||void 0===_?void 0:_.mp,valueS:null===w||void 0===w?void 0:w.mp,leftLabel:"Warm",rightLabel:"Cool",principalName:r,secondaryName:o})]})]})]}),t&&!n&&(0,E.jsx)("div",{className:"kyc-section__group",children:(0,E.jsxs)("div",{className:"partner-pending-notice",children:[(0,E.jsx)("span",{className:"partner-pending-notice__icon",children:"\u25d0"}),(0,E.jsxs)("div",{children:[(0,E.jsx)("strong",{children:"Partner Profile Pending"}),(0,E.jsxs)("p",{children:["Once ",o||"Secondary"," completes their Taste Exploration, a Partner Alignment Analysis will be available."]}),(0,E.jsx)("button",{className:"refresh-btn refresh-btn--inline",onClick:u,children:"\u21bb Check for Updates"})]})]})}),(0,E.jsxs)("div",{className:"completed-view__reports",children:[(0,E.jsx)("h4",{children:"\ud83d\udcc4 Taste Profile Report"}),(0,E.jsxs)("div",{className:"report-buttons",children:[(0,E.jsxs)("button",{className:"report-btn report-btn--view ".concat(c?"report-btn--complete":"report-btn--incomplete"),onClick:async()=>{f(!0);try{await li(t,n,k())}catch(ph){console.error("Error generating report:",ph),alert("Error generating report. Please try again.")}f(!1)},disabled:p,children:[(0,E.jsx)("span",{className:"report-btn__icon",children:"\ud83d\udc41\ufe0f"}),(0,E.jsx)("span",{className:"report-btn__text",children:"View Report"})]}),(0,E.jsxs)("button",{className:"report-btn report-btn--download ".concat(c?"report-btn--complete":"report-btn--incomplete"),onClick:async()=>{f(!0);try{await si(t,n,k())}catch(ph){console.error("Error downloading report:",ph),alert("Error downloading report. Please try again.")}f(!1)},disabled:p,children:[(0,E.jsx)("span",{className:"report-btn__icon",children:"\ud83d\udce5"}),(0,E.jsx)("span",{className:"report-btn__text",children:"Download PDF"})]}),(0,E.jsxs)("button",{className:"report-btn report-btn--email ".concat(c?"report-btn--complete":"report-btn--incomplete"),onClick:async()=>{f(!0),g("Downloading reports...");try{var e,a;const i=(null===l||void 0===l||null===(e=l.principal)||void 0===e||null===(a=e.projectParameters)||void 0===a?void 0:a.projectName)||"Project",s=r||"Client",c=o||"Partner",d=n&&n.completedAt;await si(t,n,k()),d&&(await new Promise(e=>setTimeout(e,500)),await si(n,null,k()));const u=encodeURIComponent("".concat(i," - Design Preferences Report")),h=encodeURIComponent("Please find attached the Design Preferences Report for ".concat(i,".\n\n")+"The PDF report(s) have been downloaded to your computer. Please attach them to this email.\n\nReports included:\n"+"- ".concat(s,"'s Design Profile").concat(d?"\n- ".concat(c,"'s Design Profile"):"","\n\n")+"Best regards");setTimeout(()=>{window.location.href="mailto:?subject=".concat(u,"&body=").concat(h),g("".concat(d?"2 PDFs":"PDF"," downloaded - please attach to email"))},300)}catch(ph){console.error("Error preparing email:",ph),g("Error preparing email")}f(!1)},disabled:p,children:[(0,E.jsx)("span",{className:"report-btn__icon",children:"\u2709\ufe0f"}),(0,E.jsx)("span",{className:"report-btn__text",children:"Email Report"})]})]}),m&&(0,E.jsx)("p",{className:"report-status",children:m}),p&&(0,E.jsx)("p",{className:"report-status",children:"Generating report..."})]}),"couple"===i&&(0,E.jsxs)("div",{className:"completed-view__partner",children:[(0,E.jsx)("h4",{children:"Partner Profile"}),n?(0,E.jsxs)("div",{className:"partner-summary",children:[(0,E.jsxs)("p",{children:["\u2705 ",o||"Secondary"," has completed their Taste Exploration"]}),(0,E.jsx)(Li,{label:"Style Era",value:w.ct,leftLabel:"Contemporary",rightLabel:"Traditional"}),(0,E.jsx)(Li,{label:"Material Complexity",value:w.ml,leftLabel:"Minimal",rightLabel:"Layered"}),(0,E.jsx)(Li,{label:"Mood Palette",value:w.mp,leftLabel:"Warm",rightLabel:"Cool"}),(0,E.jsx)("p",{className:"comparison-note",children:"Full partner alignment analysis is included in the PDF report above."}),(0,E.jsxs)("div",{className:"partner-report-buttons",style:{marginTop:"16px",display:"flex",gap:"12px"},children:[(0,E.jsxs)("button",{className:"report-btn report-btn--view",onClick:async()=>{f(!0);try{await li(n,null,k())}catch(ph){console.error("Error generating report:",ph)}f(!1)},disabled:p,children:[(0,E.jsx)("span",{className:"report-btn__icon",children:"\ud83d\udc41\ufe0f"}),(0,E.jsxs)("span",{className:"report-btn__text",children:["View ",o||"Partner","'s Report"]})]}),(0,E.jsxs)("button",{className:"report-btn report-btn--download",onClick:async()=>{f(!0);try{await si(n,null,k(),o||"Partner")}catch(ph){console.error("Error downloading report:",ph)}f(!1)},disabled:p,children:[(0,E.jsx)("span",{className:"report-btn__icon",children:"\ud83d\udce5"}),(0,E.jsxs)("span",{className:"report-btn__text",children:["Download ",o||"Partner","'s PDF"]})]})]})]}):(0,E.jsxs)("div",{className:"partner-pending",children:[(0,E.jsxs)("p",{children:["\u23f3 Waiting for ",o||"Secondary"," to complete their Taste Exploration"]}),(0,E.jsxs)("button",{className:"btn-launch-secondary",onClick:h,children:["Start ",o||"Secondary","'s Exploration"]})]})]}),(0,E.jsxs)("div",{className:"completed-view__actions",children:[(0,E.jsx)("button",{className:"btn-refresh ".concat(v?"btn-refresh--loading":""),onClick:()=>{y(!0),x(""),u(),setTimeout(()=>{y(!1),x("Profiles refreshed!"),setTimeout(()=>x(""),2e3)},500)},disabled:v,children:v?"\u23f3 Refreshing...":"\ud83d\udd04 Refresh Profiles"}),b&&(0,E.jsx)("span",{className:"refresh-message",children:b}),(0,E.jsx)("button",{className:"btn-retake",onClick:d,children:"\u21a9\ufe0f Retake Exploration"})]})]});var C},Ri=e=>{let{clientType:t,setClientType:n,clientBaseName:a,setClientBaseName:i,principalName:r,setPrincipalName:o,secondaryName:s,setSecondaryName:l,clientIdP:c,clientIdS:d,statusP:u,statusS:h,onLaunch:p,onRefresh:f}=e;return(0,E.jsxs)("div",{className:"welcome-view",children:[(0,E.jsxs)("div",{className:"section-header",children:[(0,E.jsx)("div",{className:"section-header__icon",children:"\ud83c\udfa8"}),(0,E.jsxs)("div",{className:"section-header__text",children:[(0,E.jsx)("h2",{children:"P1.A.5 Design Preferences"}),(0,E.jsx)("p",{children:"Discover your client's architectural and interior design aesthetic through the Taste Exploration experience."})]})]}),(0,E.jsxs)("div",{className:"style-reference",children:[(0,E.jsx)("h3",{children:"Architectural Style Spectrum"}),(0,E.jsx)("p",{children:"The 9-point scale from Avant-Contemporary (AS1) to Heritage Estate (AS9):"}),(0,E.jsx)(Pi,{})]}),(0,E.jsxs)("div",{className:"client-config",children:[(0,E.jsx)("h3",{children:"Client Configuration"}),(0,E.jsxs)("div",{className:"client-type-toggle",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat("individual"===t?"active":""),onClick:()=>n("individual"),children:"\ud83d\udc64 Individual"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat("couple"===t?"active":""),onClick:()=>n("couple"),children:"\ud83d\udc65 Couple"})]}),(0,E.jsxs)("div",{className:"client-names",children:[(0,E.jsxs)("div",{className:"name-field",children:[(0,E.jsx)("label",{children:"Family Name"}),(0,E.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"e.g. Thornwood"}),a&&(0,E.jsxs)("small",{children:["IDs: ",c,"couple"===t&&", ".concat(d)]})]}),(0,E.jsxs)("div",{className:"name-field",children:[(0,E.jsx)("label",{children:"couple"===t?"Principal Name":"Client Name"}),(0,E.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value),placeholder:"e.g. Peter"})]}),"couple"===t&&(0,E.jsxs)("div",{className:"name-field",children:[(0,E.jsx)("label",{children:"Secondary Name"}),(0,E.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"e.g. Mary"})]})]})]}),a&&(0,E.jsxs)("div",{className:"launch-section",children:[(0,E.jsx)("h3",{children:"Taste Exploration"}),(0,E.jsx)("p",{children:"Launch the visual preference discovery experience for your client(s)."}),(0,E.jsxs)("div",{className:"profile-cards",children:[(0,E.jsx)(Ai,{clientId:c,name:r,profile:null,status:u,onLaunch:p,isPrimary:!0}),"couple"===t&&(0,E.jsx)(Ai,{clientId:d,name:s,profile:null,status:h,onLaunch:p,isPrimary:!1})]}),(0,E.jsx)("button",{className:"btn-refresh-small",onClick:f,children:"\ud83d\udd04 Refresh Status"})]})]})},Ei=e=>{var t;let{respondent:n,tier:i}=e;const{kycData:r,updateKYCData:o,calculateCompleteness:s,saveNow:l}=H(),c=(null===(t=r[n])||void 0===t?void 0:t.designIdentity)||{},d=100===s(n),[u,h]=(0,a.useState)(c.clientType||"couple"),[p,f]=(0,a.useState)(c.clientBaseName||""),[m,g]=(0,a.useState)(c.principalName||""),[v,y]=(0,a.useState)(c.secondaryName||""),[b,x]=(0,a.useState)(null),[S,_]=(0,a.useState)(null),[w,N]=(0,a.useState)(null),k=p?"".concat(p,"-P"):null,C="couple"===u&&p?"".concat(p,"-S"):null,j=(()=>{var e;const t=(null===(e=r[n])||void 0===e?void 0:e.lifestyleGeography)||{},a=t.primaryCity||t.city||"",i=t.primaryCountry||t.country||"";return a&&i?"".concat(a,", ").concat(i):a||(i||null)})();(0,a.useEffect)(()=>{const e=(()=>{try{const e=window.location.hash;if(e&&e.includes("tasteProfile=")){const t=e.split("tasteProfile=")[1];if(t){const e=JSON.parse(atob(decodeURIComponent(t)));return window.history.replaceState(null,"",window.location.pathname+window.location.search),e}}}catch(ph){console.error("Error extracting profile from URL:",ph)}return null})();e&&e.clientId&&(Ci(e.clientId,e),window.dispatchEvent(new Event("storage")))},[]);const P=(0,a.useCallback)(()=>{var e,t,n,a;let i=null;if(k&&(i=ki(k)),!i&&null!==r&&void 0!==r&&null!==(e=r.principal)&&void 0!==e&&null!==(t=e.designIdentity)&&void 0!==t&&t.principalTasteResults){const e=r.principal.designIdentity.principalTasteResults;e.completedAt&&(i={clientId:k,session:e,completedAt:e.completedAt},k&&Ci(k,i))}x(i);let o=null;if(C&&(o=ki(C)),!o&&null!==r&&void 0!==r&&null!==(n=r.secondary)&&void 0!==n&&null!==(a=n.designIdentity)&&void 0!==a&&a.secondaryTasteResults){const e=r.secondary.designIdentity.secondaryTasteResults;e.completedAt&&(o={clientId:C,session:e,completedAt:e.completedAt},C&&Ci(C,o))}_(o)},[k,C,r]);(0,a.useEffect)(()=>{P()},[P]),(0,a.useEffect)(()=>{const e=()=>{P()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[P]),(0,a.useEffect)(()=>{o(n,"designIdentity",{clientType:u,clientBaseName:p,principalName:m,secondaryName:v})},[u,p,m,v,o,n]);const A=ji(b),L=ji(S),F="complete"===("principal"===n?A:L),I=e=>{("principal"===e?k:C)?N(e):alert("Please enter a client name first")},R=async e=>{const t="principal"===w?k:C;if(e&&t){const n=(new Date).toISOString(),a={clientId:t,selections:e.selections,skipped:e.skipped||[],profile:e.profile,completedAt:n},i="principal"===w?"principalTasteResults":"secondaryTasteResults";console.log("[TASTE-SAVE] Saving ".concat(i," to kycData for backend sync")),o("principal","designIdentity",{[i]:a}),Ci(t,{clientId:t,session:e,completedAt:n}),setTimeout(async()=>{console.log("[TASTE-SAVE] Auto-saving to backend..."),await l(),console.log("[TASTE-SAVE] Backend sync complete")},100)}P(),N(null)},M=()=>{N(null)};if(w){const e="principal"===w?k:C,t="principal"===w?m:v;return(0,E.jsx)("div",{className:"kyc-section design-identity-section",children:(0,E.jsx)(_i,{clientId:e,clientName:t||e,respondentType:w,onComplete:R,onBack:M})})}return(0,E.jsx)("div",{className:"kyc-section design-identity-section",children:F?(0,E.jsx)(Ii,{profileP:b,profileS:S,clientType:u,principalName:m,secondaryName:v,location:j,kycData:r,kycComplete:d,onRetake:()=>{window.confirm("This will reset your Taste Exploration results. Are you sure?")&&(k&&localStorage.removeItem("".concat(wi).concat(k)),C&&localStorage.removeItem("".concat(wi).concat(C)),console.log("[TASTE-RESET] Clearing taste results from kycData"),o("principal","designIdentity",{principalTasteResults:null,secondaryTasteResults:null}),x(null),_(null))},onRefresh:P,onLaunchSecondary:()=>I(C)}):(0,E.jsx)(Ri,{clientType:u,setClientType:h,clientBaseName:p,setClientBaseName:f,principalName:m,setPrincipalName:g,secondaryName:v,setSecondaryName:y,clientIdP:k,clientIdS:C,statusP:A,statusS:L,onLaunch:I,onRefresh:P})})},Mi=e=>{let{label:t,value:n,onChange:a,min:i=1,max:r=10,step:o=1,leftLabel:s,rightLabel:l,showValue:c=!0,helpText:d,className:u=""}=e;const h="slider-".concat(t.toLowerCase().replace(/\s+/g,"-")),p=(n-i)/(r-i)*100;return(0,E.jsxs)("div",{className:"slider-field ".concat(u),children:[(0,E.jsxs)("div",{className:"slider-field__header",children:[(0,E.jsx)("label",{htmlFor:h,className:"slider-field__label",children:t}),c&&(0,E.jsx)("span",{className:"slider-field__value",children:n})]}),(0,E.jsxs)("div",{className:"slider-field__container",children:[s&&(0,E.jsx)("span",{className:"slider-field__endpoint slider-field__endpoint--left",children:s}),(0,E.jsxs)("div",{className:"slider-field__track-wrapper",children:[(0,E.jsx)("input",{type:"range",id:h,value:n,onChange:e=>{a(parseInt(e.target.value,10))},min:i,max:r,step:o,className:"slider-field__input",style:{background:"linear-gradient(to right, #1a365d 0%, #1a365d ".concat(p,"%, #e2e8f0 ").concat(p,"%, #e2e8f0 100%)")}}),(0,E.jsx)("div",{className:"slider-field__ticks",children:Array.from({length:r-i+1},(e,t)=>(0,E.jsx)("div",{className:"slider-field__tick ".concat(t+i===n?"slider-field__tick--active":"")},t))})]}),l&&(0,E.jsx)("span",{className:"slider-field__endpoint slider-field__endpoint--right",children:l})]}),d&&(0,E.jsx)("span",{className:"slider-field__help",children:d})]})},Ti=e=>{var t,n,a;let{respondent:i,tier:r}=e;const{kycData:o,updateKYCData:s}=H(),l=o[i].lifestyleLiving,c=((null===(t=o.principal)||void 0===t?void 0:t.lifestyleLiving)||{}).wfhPeopleCount||0,d=(null===(n=o.principal)||void 0===n||null===(a=n.portfolioContext)||void 0===a?void 0:a.principalFirstName)||"Principal",u="secondary"===i&&c>=2,h=(e,t)=>{s(i,"lifestyleLiving",{[e]:t})},p=(e,t)=>{const n=l[e]||[],a=n.includes(t)?n.filter(e=>e!==t):[...n,t];h(e,a)};return(0,E.jsxs)("div",{className:"kyc-section",children:[u&&(0,E.jsx)("div",{className:"kyc-section__group",children:(0,E.jsxs)("div",{className:"wfh-confirmation ".concat(!1===l.wfhConfirmation?"wfh-confirmation--discuss":""),children:[(0,E.jsxs)("div",{className:"wfh-confirmation__message",children:[(0,E.jsx)("strong",{children:d})," has indicated requirement for ",(0,E.jsxs)("strong",{children:[c," dedicated Home Offices"]}),"."]}),(0,E.jsx)("div",{className:"wfh-confirmation__actions",children:(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(!0===l.wfhConfirmation?"toggle-btn--active":""),onClick:()=>h("wfhConfirmation",!0),children:"\u2713 Confirm"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(!1===l.wfhConfirmation?"toggle-btn--active toggle-btn--warning":""),onClick:()=>h("wfhConfirmation",!1),children:"\u26a0 Discuss"})]})}),!1===l.wfhConfirmation&&(0,E.jsxs)("div",{className:"wfh-confirmation__flag",children:[(0,E.jsx)(te,{size:16}),(0,E.jsx)("span",{children:"Flagged for discussion - WFH requirements need alignment"})]})]})}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Work From Home"}),(0,E.jsx)(ae,{label:"Work From Home Frequency",value:l.workFromHome,onChange:e=>h("workFromHome",e),options:[{value:"never",label:"Never"},{value:"sometimes",label:"Sometimes (1-2 days/week)"},{value:"often",label:"Often (3-4 days/week)"},{value:"always",label:"Always (Full Remote)"}],placeholder:"How often do you work from home?"}),l.workFromHome&&"never"!==l.workFromHome&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ne,{label:"Number of People WFH",type:"number",value:l.wfhPeopleCount,onChange:e=>h("wfhPeopleCount",parseInt(e)||null),placeholder:"How many people need home office space?",min:1,helpText:"Include anyone who regularly works from home"}),l.wfhPeopleCount>=2&&(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Separate Offices Required?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Do you need separate, private office spaces for each person working from home?"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(!0===l.separateOfficesRequired?"toggle-btn--active":""),onClick:()=>h("separateOfficesRequired",!0),children:"Yes, separate offices"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(!1===l.separateOfficesRequired?"toggle-btn--active":""),onClick:()=>h("separateOfficesRequired",!1),children:"No, can share space"})]}),l.separateOfficesRequired&&(0,E.jsxs)("p",{className:"form-field__note",style:{marginTop:"8px",color:"var(--teal)"},children:["\u2713 Program will include ",l.wfhPeopleCount," separate home offices"]})]}),(0,E.jsx)(ne,{label:"Office Requirements",type:"textarea",value:l.officeRequirements,onChange:e=>h("officeRequirements",e),placeholder:"Any specific requirements? Video calls, client meetings, specialized equipment...",rows:2})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Hobbies & Activities"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Space-Requiring Hobbies"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"12px"},children:"Select hobbies that need dedicated space in your home"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"art",label:"Art/Painting"},{value:"music",label:"Music/Instruments"},{value:"fitness",label:"Fitness/Home Gym"},{value:"yoga",label:"Yoga/Meditation"},{value:"cooking",label:"Cooking/Culinary"},{value:"wine",label:"Wine Collection"},{value:"cars",label:"Car Collection"},{value:"gardening",label:"Gardening"},{value:"reading",label:"Reading/Library"},{value:"gaming",label:"Gaming/Media"},{value:"spa",label:"Spa/Wellness"},{value:"crafts",label:"Crafts/Making"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((l.hobbies||[]).includes(e.value)?"chip--selected":""),onClick:()=>p("hobbies",e.value),children:e.label},e.value))})]}),(0,E.jsx)(ne,{label:"Hobby Details",type:"textarea",value:l.hobbyDetails,onChange:e=>h("hobbyDetails",e),placeholder:"Specific equipment needs, space requirements, or details about your hobbies...",rows:2}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Late Night Media Use?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Do you watch movies or game late at night when others are sleeping? (Affects acoustic planning)"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(l.lateNightMediaUse?"toggle-btn--active":""),onClick:()=>h("lateNightMediaUse",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(l.lateNightMediaUse?"":"toggle-btn--active"),onClick:()=>h("lateNightMediaUse",!1),children:"No"})]})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Entertaining"}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ae,{label:"Entertaining Frequency",value:l.entertainingFrequency,onChange:e=>h("entertainingFrequency",e),options:[{value:"rarely",label:"Rarely (Few times/year)"},{value:"monthly",label:"Monthly"},{value:"weekly",label:"Weekly"},{value:"daily",label:"Daily/Constantly"}],placeholder:"How often do you entertain?"}),(0,E.jsx)(ae,{label:"Entertaining Style",value:l.entertainingStyle,onChange:e=>h("entertainingStyle",e),options:[{value:"formal",label:"Formal (Seated dinners)"},{value:"casual",label:"Casual (Relaxed gatherings)"},{value:"both",label:"Both Formal & Casual"}],placeholder:"What type of entertaining?"})]}),(0,E.jsx)(ne,{label:"Typical Guest Count",value:l.typicalGuestCount,onChange:e=>h("typicalGuestCount",e),placeholder:"e.g., 8-12 for dinners, 50-100 for parties"})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Wellness"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Wellness Priorities"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"gym",label:"Home Gym"},{value:"pool",label:"Pool"},{value:"spa",label:"Spa/Sauna"},{value:"yoga",label:"Yoga Studio"},{value:"massage",label:"Massage Room"},{value:"meditation",label:"Meditation Space"},{value:"cold-plunge",label:"Cold Plunge"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((l.wellnessPriorities||[]).includes(e.value)?"chip--selected":""),onClick:()=>p("wellnessPriorities",e.value),children:e.label},e.value))})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Privacy & Environment"}),(0,E.jsx)(Mi,{label:"Privacy Level Required",value:l.privacyLevelRequired||3,onChange:e=>h("privacyLevelRequired",e),min:1,max:5,leftLabel:"Open/Social",rightLabel:"Maximum Privacy"}),(0,E.jsx)(Mi,{label:"Noise Sensitivity",value:l.noiseSensitivity||3,onChange:e=>h("noiseSensitivity",e),min:1,max:5,leftLabel:"Tolerant",rightLabel:"Very Sensitive"}),(0,E.jsx)(Mi,{label:"Indoor-Outdoor Living",value:l.indoorOutdoorLiving||3,onChange:e=>h("indoorOutdoorLiving",e),min:1,max:5,leftLabel:"Indoor Focused",rightLabel:"Seamless Integration"})]}),(0,E.jsx)(ne,{label:"Daily Routines Summary",type:"textarea",value:l.dailyRoutinesSummary,onChange:e=>h("dailyRoutinesSummary",e),placeholder:"Describe a typical day - morning routines, how you use spaces, evening patterns...",rows:3})]})},Di=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=H(),r=a[t].spaceRequirements,o=(e,n)=>{i(t,"spaceRequirements",{[e]:n})},s=[{value:"primary-suite",label:"Primary Suite"},{value:"secondary-suites",label:"Guest Suites"},{value:"kids-bedrooms",label:"Children's Bedrooms"},{value:"great-room",label:"Great Room/Living"},{value:"formal-living",label:"Formal Living Room"},{value:"family-room",label:"Family Room"},{value:"formal-dining",label:"Formal Dining"},{value:"casual-dining",label:"Casual Dining/Breakfast"},{value:"chef-kitchen",label:"Chef's Kitchen"},{value:"catering-kitchen",label:"Catering Kitchen"},{value:"home-office",label:"Home Office"},{value:"library",label:"Library"},{value:"media-room",label:"Media Room/Theater"},{value:"game-room",label:"Game Room"},{value:"wine-cellar",label:"Wine Cellar"},{value:"gym",label:"Home Gym"},{value:"spa-wellness",label:"Spa/Wellness Suite"},{value:"pool-indoor",label:"Indoor Pool"},{value:"sauna",label:"Sauna"},{value:"steam-room",label:"Steam Room"},{value:"staff-quarters",label:"Staff Quarters"},{value:"mudroom",label:"Mudroom"},{value:"laundry",label:"Laundry Room"},{value:"art-gallery",label:"Art Gallery"},{value:"music-room",label:"Music Room"},{value:"safe-room",label:"Safe Room/Panic Room"}],l=[{value:"swimming-pool",label:"Swimming Pool"},{value:"pool-house",label:"Pool House/Cabana"},{value:"spa-hot-tub",label:"Spa/Hot Tub"},{value:"reflecting-pool",label:"Reflecting Pool"},{value:"water-feature",label:"Fountain/Water Feature"},{value:"koi-pond",label:"Koi Pond"}],c=[{value:"tennis-court",label:"Tennis Court"},{value:"pickleball-court",label:"Pickleball Court"},{value:"basketball-full",label:"Basketball Court (Full)"},{value:"basketball-half",label:"Basketball Court (Half)"},{value:"sport-court",label:"Multi-Sport Court"},{value:"putting-green",label:"Putting Green"},{value:"bocce-court",label:"Bocce Court"},{value:"playground",label:"Children's Play Area"}],d=[{value:"outdoor-kitchen",label:"Summer/Outdoor Kitchen"},{value:"covered-outdoor",label:"Covered Outdoor Living"},{value:"fire-pit",label:"Fire Pit"},{value:"outdoor-fireplace",label:"Outdoor Fireplace"},{value:"event-lawn",label:"Event Lawn (for tenting)"},{value:"pergola-pavilion",label:"Pergola/Pavilion"},{value:"outdoor-dining",label:"Outdoor Dining Terrace"},{value:"bar-lounge",label:"Outdoor Bar/Lounge"}],u=[{value:"formal-garden",label:"Formal Garden"},{value:"kitchen-garden",label:"Kitchen Garden/Orchard"},{value:"cutting-garden",label:"Cutting Garden"},{value:"greenhouse",label:"Greenhouse"},{value:"potting-shed",label:"Potting Shed"},{value:"mature-trees",label:"Mature Trees/Specimen Plantings"}],h=[{value:"guest-house",label:"Guest House (Separate)"},{value:"staff-cottage",label:"Staff Cottage"},{value:"gym-pavilion",label:"Gym/Wellness Pavilion"},{value:"art-studio",label:"Art Studio"},{value:"workshop",label:"Workshop"}],p=[{value:"gated-entry",label:"Private Gated Entry"},{value:"long-driveway",label:"Long Private Driveway (500ft+)"},{value:"motor-court",label:"Motor Court"},{value:"porte-cochere",label:"Porte-Coch\xe8re"},{value:"helipad",label:"Helicopter Landing Area"},{value:"boat-dock",label:"Boat Dock/Water Access"}],f=[{value:"essential",label:"Essential"},{value:"preferred",label:"Preferred"},{value:"flexible",label:"Flexible"}],m=(e,t)=>{const n=r[e]||[],a=n.includes(t)?n.filter(e=>e!==t):[...n,t];o(e,a)};return(0,E.jsxs)("div",{className:"kyc-section",children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Must-Have Interior Spaces"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Select spaces that are essential to your program - non-negotiables."}),(0,E.jsx)("div",{className:"chip-select chip-select--wrap",children:s.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.mustHaveSpaces||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("mustHaveSpaces",e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Nice-to-Have Interior Spaces"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Spaces you'd like if budget and program allow."}),(0,E.jsx)("div",{className:"chip-select chip-select--wrap",children:s.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.niceToHaveSpaces||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("niceToHaveSpaces",e.value),disabled:(r.mustHaveSpaces||[]).includes(e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Space Program Clarifications"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"These questions help fine-tune your area program and spatial relationships."}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Separate Family Room?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"In addition to the Great Room - a more casual TV/hangout space"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsSeparateFamilyRoom?"toggle-btn--active":""),onClick:()=>o("wantsSeparateFamilyRoom",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsSeparateFamilyRoom?"":"toggle-btn--active"),onClick:()=>o("wantsSeparateFamilyRoom",!1),children:"No"})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Second Formal Living / Salon?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"A second formal sitting room beyond the main living space"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsSecondFormalLiving?"toggle-btn--active":""),onClick:()=>o("wantsSecondFormalLiving",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsSecondFormalLiving?"":"toggle-btn--active"),onClick:()=>o("wantsSecondFormalLiving",!1),children:"No"})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Built-in Bar?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Dedicated bar area (not just kitchen island seating)"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBar?"toggle-btn--active":""),onClick:()=>o("wantsBar",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBar?"":"toggle-btn--active"),onClick:()=>o("wantsBar",!1),children:"No"})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Kids Bunk Room?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Extra sleeping for sleepovers (in addition to bedrooms)"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBunkRoom?"toggle-btn--active":""),onClick:()=>o("wantsBunkRoom",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBunkRoom?"":"toggle-btn--active"),onClick:()=>o("wantsBunkRoom",!1),children:"No"})]})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Breakfast Nook?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Casual eat-in area adjacent to kitchen"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBreakfastNook?"toggle-btn--active":""),onClick:()=>o("wantsBreakfastNook",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.wantsBreakfastNook?"":"toggle-btn--active"),onClick:()=>o("wantsBreakfastNook",!1),children:"No"})]})]})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Garage & Auto Collection"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"For significant car collections, the garage becomes a showroom."}),(0,E.jsx)(ae,{label:"Garage Size Requirement",value:r.garageSize,onChange:e=>o("garageSize",e),options:[{value:"2-car",label:"2-Car Garage"},{value:"4-car",label:"4-Car Garage"},{value:"6-car",label:"6-Car Garage"},{value:"8-car",label:"8-Car Garage"},{value:"10-car",label:"10-Car Garage"},{value:"12-plus",label:"12+ Car Gallery/Showroom"}],placeholder:"Select minimum garage capacity..."}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Garage Features"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"climate-controlled",label:"Climate Controlled"},{value:"car-lift",label:"Car Lift(s)"},{value:"display-lighting",label:"Display Lighting"},{value:"viewing-lounge",label:"Viewing Lounge"},{value:"car-wash-bay",label:"Car Wash Bay"},{value:"ev-charging",label:"EV Charging Stations"},{value:"turntable",label:"Turntable"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.garageFeatures||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("garageFeatures",e.value),children:e.label},e.value))})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Pools & Water Features"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,E.jsx)("div",{className:"chip-select",children:l.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.mustHavePoolWater||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("mustHavePoolWater",e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,E.jsx)("div",{className:"chip-select",children:l.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.wouldLikePoolWater||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("wouldLikePoolWater",e.value),disabled:(r.mustHavePoolWater||[]).includes(e.value),children:e.label},e.value))})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Sport & Recreation"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,E.jsx)("div",{className:"chip-select",children:c.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.mustHaveSport||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("mustHaveSport",e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,E.jsx)("div",{className:"chip-select",children:c.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.wouldLikeSport||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("wouldLikeSport",e.value),disabled:(r.mustHaveSport||[]).includes(e.value),children:e.label},e.value))})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Outdoor Living & Entertaining"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,E.jsx)("div",{className:"chip-select",children:d.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.mustHaveOutdoorLiving||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("mustHaveOutdoorLiving",e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,E.jsx)("div",{className:"chip-select",children:d.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.wouldLikeOutdoorLiving||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("wouldLikeOutdoorLiving",e.value),disabled:(r.mustHaveOutdoorLiving||[]).includes(e.value),children:e.label},e.value))})]})]}),"mvp"!==n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Gardens & Landscape"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,E.jsx)("div",{className:"chip-select",children:u.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.mustHaveGarden||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("mustHaveGarden",e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,E.jsx)("div",{className:"chip-select",children:u.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.wouldLikeGarden||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("wouldLikeGarden",e.value),disabled:(r.mustHaveGarden||[]).includes(e.value),children:e.label},e.value))})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Exterior: Ancillary Structures"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,E.jsx)("div",{className:"chip-select",children:h.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.mustHaveStructures||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("mustHaveStructures",e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,E.jsx)("div",{className:"chip-select",children:h.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.wouldLikeStructures||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("wouldLikeStructures",e.value),disabled:(r.mustHaveStructures||[]).includes(e.value),children:e.label},e.value))})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Arrival & Access"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Must Have"}),(0,E.jsx)("div",{className:"chip-select",children:p.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.mustHaveAccess||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("mustHaveAccess",e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Would Like"}),(0,E.jsx)("div",{className:"chip-select",children:p.map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.wouldLikeAccess||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("wouldLikeAccess",e.value),disabled:(r.mustHaveAccess||[]).includes(e.value),children:e.label},e.value))})]})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Privacy & Grounds Scale"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"These requirements directly impact site selection criteria."}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ae,{label:"No Visible Neighbors",value:r.privacyNoNeighbors,onChange:e=>o("privacyNoNeighbors",e),options:f,placeholder:"How important?"}),(0,E.jsx)(ae,{label:"Perimeter Fully Walled/Gated",value:r.privacyPerimeter,onChange:e=>o("privacyPerimeter",e),options:f,placeholder:"How important?"})]}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ne,{label:"Minimum Setback from Road",value:r.minimumSetback,onChange:e=>o("minimumSetback",e),placeholder:"e.g., 200 ft, 500 ft..."}),(0,E.jsx)(ne,{label:"Minimum Lot Size",value:r.minimumLotSize,onChange:e=>o("minimumLotSize",e),placeholder:"e.g., 2 acres, 5 acres..."})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"View Priorities"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Which rooms MUST have views?"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"primary-suite",label:"Primary Suite"},{value:"living",label:"Living Room"},{value:"dining",label:"Dining Room"},{value:"kitchen",label:"Kitchen"},{value:"office",label:"Home Office"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.viewPriorityRooms||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("viewPriorityRooms",e.value),children:e.label},e.value))})]})]}),"mvp"!==n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Adjacencies & Pain Points"}),(0,E.jsx)(ne,{label:"Adjacency Requirements",type:"textarea",value:r.adjacencyRequirements,onChange:e=>o("adjacencyRequirements",e),placeholder:"e.g., Kitchen must be near outdoor dining, Primary suite away from children's rooms...",rows:2}),(0,E.jsx)(ne,{label:"Current Space Pain Points",type:"textarea",value:r.currentSpacePainPoints,onChange:e=>o("currentSpacePainPoints",e),placeholder:"What's wrong with your current home that you want to fix?",rows:2})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Storage, Accessibility & Technology"}),(0,E.jsx)(ae,{label:"Storage Needs",value:r.storageNeeds,onChange:e=>o("storageNeeds",e),options:[{value:"standard",label:"Standard"},{value:"above-average",label:"Above Average"},{value:"extensive",label:"Extensive"}],placeholder:"How much storage do you need?"}),(0,E.jsx)(ne,{label:"Accessibility Requirements",value:r.accessibilityRequirements,onChange:e=>o("accessibilityRequirements",e),placeholder:"ADA compliance, aging in place, mobility accommodations..."}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Technology Requirements"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"smart-home",label:"Smart Home System"},{value:"av-integration",label:"AV Integration"},{value:"security",label:"Advanced Security"},{value:"lighting-control",label:"Lighting Control"},{value:"climate-zones",label:"Climate Zones"},{value:"ev-charging",label:"EV Charging"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.technologyRequirements||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("technologyRequirements",e.value),children:e.label},e.value))})]}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Sustainability Priorities"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"solar",label:"Solar Power"},{value:"geothermal",label:"Geothermal"},{value:"leed",label:"LEED Certification"},{value:"passive-house",label:"Passive House"},{value:"net-zero",label:"Net Zero"},{value:"water-reclaim",label:"Water Reclamation"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.sustainabilityPriorities||[]).includes(e.value)?"chip--selected":""),onClick:()=>m("sustainabilityPriorities",e.value),children:e.label},e.value))})]})]})]})]})},Oi=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=H(),r=a[t].culturalContext,o=(e,n)=>{i(t,"culturalContext",{[e]:n})},s=(e,t)=>{const n=r[e]||[],a=n.includes(t)?n.filter(e=>e!==t):[...n,t];o(e,a)};return(0,E.jsxs)("div",{className:"kyc-section",children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Cultural Background"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"Understanding your cultural context helps us match you with designers who appreciate your heritage and can integrate appropriate elements."}),(0,E.jsx)(ne,{label:"Cultural Heritage / Background",value:r.culturalBackground,onChange:e=>o("culturalBackground",e),placeholder:"e.g., Saudi Arabian, Indian-American, French-Moroccan..."}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Regional Sensibilities"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"12px"},children:"Select regional design influences that resonate with you"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"middle-east",label:"Middle Eastern"},{value:"south-asian",label:"South Asian"},{value:"east-asian",label:"East Asian"},{value:"european",label:"European"},{value:"latin",label:"Latin American"},{value:"american",label:"North American"},{value:"african",label:"African"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.regionalSensibilities||[]).includes(e.value)?"chip--selected":""),onClick:()=>s("regionalSensibilities",e.value),children:e.label},e.value))})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Religious & Cultural Observances"}),(0,E.jsx)(ne,{label:"Religious Observances",type:"textarea",value:r.religiousObservances,onChange:e=>o("religiousObservances",e),placeholder:"Any spatial requirements? e.g., Prayer room facing Mecca, kosher kitchen, separate entertaining spaces...",rows:2}),(0,E.jsx)(ne,{label:"Entertaining Cultural Norms",value:r.entertainingCulturalNorms,onChange:e=>o("entertainingCulturalNorms",e),placeholder:"e.g., Formal service with staff, family-style dining, gender-separated entertaining..."})]}),"fyi-extended"===n&&(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Cross-Cultural & Communication"}),(0,E.jsx)(ne,{label:"Cross-Cultural Requirements",type:"textarea",value:r.crossCulturalRequirements,onChange:e=>o("crossCulturalRequirements",e),placeholder:"If blending multiple cultural influences, describe how...",rows:2}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Preferred Languages for Design Team"}),(0,E.jsx)("div",{className:"chip-select",children:[{value:"english",label:"English"},{value:"arabic",label:"Arabic"},{value:"mandarin",label:"Mandarin"},{value:"spanish",label:"Spanish"},{value:"french",label:"French"},{value:"portuguese",label:"Portuguese"},{value:"german",label:"German"},{value:"italian",label:"Italian"},{value:"japanese",label:"Japanese"},{value:"hindi",label:"Hindi"}].map(e=>(0,E.jsx)("button",{className:"chip ".concat((r.languagesPreferred||[]).includes(e.value)?"chip--selected":""),onClick:()=>s("languagesPreferred",e.value),children:e.label},e.value))})]})]})]})},Bi=e=>{let{respondent:t,tier:n}=e;const{kycData:a,updateKYCData:i}=H(),r=a[t].workingPreferences,o=(e,n)=>{i(t,"workingPreferences",{[e]:n})};return(0,E.jsxs)("div",{className:"kyc-section",children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Communication & Collaboration Style"}),(0,E.jsx)("p",{className:"kyc-section__group-description",children:"How do you prefer to work with your design team? This helps us match you with compatible professionals."}),(0,E.jsx)(ae,{label:"Communication Style",value:r.communicationStyle,onChange:e=>o("communicationStyle",e),options:[{value:"direct",label:"Direct - Get to the point"},{value:"relational",label:"Relational - Build rapport first"},{value:"visual",label:"Visual - Show me, don't tell me"}],placeholder:"How do you prefer to communicate?",required:!0}),(0,E.jsxs)("div",{className:"form-grid form-grid--2col",children:[(0,E.jsx)(ae,{label:"Decision Cadence",value:r.decisionCadence,onChange:e=>o("decisionCadence",e),options:[{value:"weekly",label:"Weekly Check-ins"},{value:"milestone",label:"Milestone-Based"},{value:"hands-off",label:"Hands-Off (Trust the Team)"}],placeholder:"How often do you want updates?"}),(0,E.jsx)(ae,{label:"Collaboration Style",value:r.collaborationStyle,onChange:e=>o("collaborationStyle",e),options:[{value:"directive",label:"Directive - I know what I want"},{value:"consultative",label:"Consultative - Guide me through options"},{value:"delegative",label:"Delegative - Surprise me"}],placeholder:"How involved do you want to be?"})]})]}),"mvp"!==n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Principal Involvement & Format"}),(0,E.jsx)(ae,{label:"Principal Involvement Required",value:r.principalInvolvementRequired,onChange:e=>o("principalInvolvementRequired",e),options:[{value:"must-have",label:"Must Have - Principal involved in my project"},{value:"nice-to-have",label:"Nice to Have - Some principal access"},{value:"not-important",label:"Not Important - Trust the team"}],placeholder:"How important is the firm principal's involvement?",helpText:"Some clients want the 'name' designer personally involved"}),(0,E.jsx)(ae,{label:"Presentation Format",value:r.presentationFormat,onChange:e=>o("presentationFormat",e),options:[{value:"in-person",label:"In-Person Only"},{value:"virtual",label:"Virtual/Remote"},{value:"hybrid",label:"Hybrid (Both)"}],placeholder:"In-person or virtual meetings?"})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Previous Experience"}),(0,E.jsx)(ne,{label:"Previous Designer Experience",type:"textarea",value:r.previousDesignerExperience,onChange:e=>o("previousDesignerExperience",e),placeholder:"Have you worked with architects or interior designers before? What worked well? What didn't?",rows:3}),(0,E.jsx)(ne,{label:"Red Flags to Avoid",type:"textarea",value:r.redFlagsToAvoid,onChange:e=>o("redFlagsToAvoid",e),placeholder:"Past frustrations or behaviors you want to avoid in your design team...",rows:2}),(0,E.jsx)(ne,{label:"Existing Industry Connections",value:r.existingIndustryConnections,onChange:e=>o("existingIndustryConnections",e),placeholder:"Designers you know or have been referred to..."})]})]}),(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Designer Profile Preferences"}),(0,E.jsx)(Mi,{label:"Architect: Celebrity vs. Quiet Professional",value:r.architectCelebrityPreference||3,onChange:e=>o("architectCelebrityPreference",e),min:1,max:5,leftLabel:"Want the Starchitect",rightLabel:"Quiet Professional",helpText:"1 = Want the big name architect, 5 = Prefer discretion"}),(0,E.jsx)(Mi,{label:"Interior Designer: Celebrity vs. Quiet Professional",value:r.interiorDesignerCelebrityPreference||3,onChange:e=>o("interiorDesignerCelebrityPreference",e),min:1,max:5,leftLabel:"Want the Celebrity Designer",rightLabel:"Quiet Professional",helpText:"1 = Want the big name designer, 5 = Prefer discretion"})]}),"mvp"!==n&&(0,E.jsxs)("div",{className:"kyc-section__group",children:[(0,E.jsx)("h3",{className:"kyc-section__group-title",children:"Construction Administration"}),(0,E.jsx)(ae,{label:"CA Requirement",value:r.caRequirement,onChange:e=>o("caRequirement",e),options:[{value:"full",label:"Full CA - Architect on site regularly"},{value:"limited",label:"Limited CA - Key milestones only"},{value:"none",label:"None - Contractor handles"}],placeholder:"How much architect involvement during construction?"}),(0,E.jsx)(ae,{label:"Contractor Relationship Preference",value:r.contractorRelationshipPreference,onChange:e=>o("contractorRelationshipPreference",e),options:[{value:"design-bid-build",label:"Design-Bid-Build (Traditional)"},{value:"design-build",label:"Design-Build (Single Source)"},{value:"cm-at-risk",label:"CM at Risk"}],placeholder:"How should the contractor be engaged?"}),(0,E.jsxs)("div",{className:"form-field",children:[(0,E.jsx)("label",{className:"form-field__label",children:"Early Contractor Involvement (ECI)?"}),(0,E.jsx)("p",{className:"form-field__help",style:{marginBottom:"8px"},children:"Bring a qualified contractor in during concept/design phase for constructability input and early costing (separate from procurement method)"}),(0,E.jsxs)("div",{className:"toggle-group",children:[(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.earlyContractorInvolvement?"toggle-btn--active":""),onClick:()=>o("earlyContractorInvolvement",!0),children:"Yes"}),(0,E.jsx)("button",{type:"button",className:"toggle-btn ".concat(r.earlyContractorInvolvement?"":"toggle-btn--active"),onClick:()=>o("earlyContractorInvolvement",!1),children:"No"})]})]})]}),(0,E.jsxs)("div",{className:"kyc-section__footer",children:[(0,E.jsx)("div",{className:"kyc-section__footer-message",children:(0,E.jsx)("p",{children:"Your responses are automatically saved as you go."})}),(0,E.jsx)("button",{className:"btn btn--primary btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Save & Return to Dashboard"})]})]})},zi=()=>{var e,t;const{activeRespondent:n,setActiveRespondent:i,currentKYCSection:r,setCurrentKYCSection:o,disclosureTier:l,setDisclosureTier:c,calculateCompleteness:d,getSectionCompletionStatus:p,saveNow:f,isSaving:m,hasUnsavedChanges:g,lastSaved:v}=H(),[y,x]=(0,a.useState)(null),S=(0,a.useCallback)(async()=>{await f()?(x("Saved!"),setTimeout(()=>x(null),3e3)):(x("Save failed"),setTimeout(()=>x(null),5e3))},[f]),_=[{id:"portfolioContext",label:"Portfolio Context",icon:K,tier:"mvp",taskCode:"P1.A.1"},{id:"familyHousehold",label:"Family & Household",icon:h,tier:"mvp",taskCode:"P1.A.2"},{id:"projectParameters",label:"Project Parameters",icon:u,tier:"mvp",taskCode:"P1.A.3"},{id:"budgetFramework",label:"Budget Framework",icon:Y,tier:"mvp",taskCode:"P1.A.4"},{id:"designIdentity",label:"Design Preferences",icon:L,tier:"mvp",taskCode:"P1.A.5"},{id:"lifestyleLiving",label:"Lifestyle & Living",icon:Z,tier:"enhanced",taskCode:"P1.A.6"},{id:"spaceRequirements",label:"Space Requirements",icon:$,tier:"mvp",taskCode:"P1.A.7"},{id:"culturalContext",label:"Cultural Context",icon:Q,tier:"enhanced",taskCode:"P1.A.8"},{id:"workingPreferences",label:"Working Preferences",icon:K,tier:"enhanced",taskCode:"P1.A.9"}],w=["designIdentity","lifestyleLiving","spaceRequirements"],N=_.filter(e=>{return t=e,!("secondary"===n&&!w.includes(t.id))&&("enhanced"===l||"mvp"===t.tier);var t}),k=e=>{const t=14,n=1.25;switch(e){case"complete":return(0,E.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"var(--teal)",strokeWidth:n,strokeLinecap:"round",strokeLinejoin:"round",className:"status-icon",children:[(0,E.jsx)("circle",{cx:"8",cy:"8",r:"6.5"}),(0,E.jsx)("path",{d:"M5.2 8.3l1.6 1.6 3.4-3.6"})]});case"partial":return(0,E.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"var(--gold)",strokeWidth:n,className:"status-icon",children:(0,E.jsx)("circle",{cx:"8",cy:"8",r:"6.5"})});default:return(0,E.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"var(--gray-300)",strokeWidth:n,className:"status-icon",children:(0,E.jsx)("circle",{cx:"8",cy:"8",r:"6.5"})})}},[j,P]=(0,a.useState)(!1),A=N.filter(e=>"complete"!==p(n,e.id)),F=d(n);return(0,E.jsxs)("div",{className:"kyc-module",children:[(0,E.jsxs)("div",{className:"kyc-module__tier-selector",children:[(0,E.jsx)("span",{className:"kyc-module__tier-label",children:"Disclosure Level:"}),(0,E.jsx)("div",{className:"tier-tabs",children:[{id:"mvp",label:"Quick Capture",description:"15-20 min"},{id:"enhanced",label:"Full Discovery",description:"45-60 min"}].map(e=>(0,E.jsxs)("button",{className:"tier-tab ".concat(l===e.id?"tier-tab--active":""),onClick:()=>c(e.id),children:[(0,E.jsx)("span",{className:"tier-tab__label",children:e.label}),(0,E.jsx)("span",{className:"tier-tab__duration",children:e.description})]},e.id))}),(0,E.jsxs)("div",{className:"kyc-module__save-area",children:[(0,E.jsxs)("button",{className:"kyc-save-btn ".concat(g?"kyc-save-btn--unsaved":""," ").concat(m?"kyc-save-btn--saving":""),onClick:S,disabled:m,children:[(0,E.jsx)(J,{size:16}),m?"Saving...":"SAVE"]}),g&&!m&&(0,E.jsx)("span",{className:"kyc-save-indicator",children:"Unsaved"}),y&&(0,E.jsx)("span",{className:"kyc-save-message ".concat(y.includes("failed")?"kyc-save-message--error":"kyc-save-message--success"),children:y}),v&&!y&&!g&&(0,E.jsxs)("span",{className:"kyc-save-time",children:["Saved: ",v.toLocaleTimeString()]})]})]}),(0,E.jsx)("div",{className:"kyc-module__respondent-tabs",children:[{id:"principal",label:"Principal",color:"navy",description:"Primary decision-maker"},{id:"secondary",label:"Secondary",color:"teal",description:"Spouse / Co-decision-maker"}].map(e=>(0,E.jsxs)("button",{className:"respondent-tab respondent-tab--".concat(e.color," ").concat(n===e.id?"respondent-tab--active":""),onClick:()=>{var t;const n=null===(t=N[r])||void 0===t?void 0:t.id;i(e.id);const a=_.filter(t=>!("secondary"===e.id&&!w.includes(t.id))&&("enhanced"===l||"mvp"===t.tier)).findIndex(e=>e.id===n);o(a>=0?a:0)},children:[(0,E.jsx)(X,{size:18}),(0,E.jsxs)("div",{className:"respondent-tab__content",children:[(0,E.jsx)("span",{className:"respondent-tab__label",children:e.label}),(0,E.jsx)("span",{className:"respondent-tab__description",children:e.description})]}),(0,E.jsxs)("span",{className:"respondent-tab__progress",children:[d(e.id),"%"]})]},e.id))}),(0,E.jsxs)("div",{className:"kyc-module__layout",children:[(0,E.jsxs)("nav",{className:"kyc-module__nav",children:[(0,E.jsx)("h3",{className:"kyc-module__nav-title",children:"Module A: KYC"}),(0,E.jsx)("p",{className:"kyc-module__nav-subtitle",children:"Know Your Client"}),F<100&&A.length>0&&(0,E.jsxs)("div",{className:"remaining-dropdown-wrapper",children:[(0,E.jsxs)("button",{className:"remaining-trigger ".concat(j?"active":""),onClick:()=>P(!j),children:[(0,E.jsxs)("span",{children:[A.length," Remaining"]}),(0,E.jsx)(C,{size:14,className:j?"rotated":""})]}),j&&(0,E.jsxs)("div",{className:"remaining-dropdown",children:[(0,E.jsx)("div",{className:"remaining-dropdown__header",children:"Incomplete Sections"}),(0,E.jsx)("div",{className:"remaining-dropdown__list",children:A.map((e,t)=>{const a=p(n,e.id),i=e.icon,r=N.findIndex(t=>t.id===e.id);return(0,E.jsxs)("button",{className:"remaining-dropdown__item",onClick:()=>{o(r),P(!1)},children:[(0,E.jsx)(i,{size:14}),(0,E.jsx)("span",{className:"remaining-dropdown__code",children:e.taskCode}),(0,E.jsx)("span",{className:"remaining-dropdown__label",children:e.label}),"partial"===a&&(0,E.jsx)("span",{className:"remaining-dropdown__badge partial",children:"Partial"}),"empty"===a&&(0,E.jsx)("span",{className:"remaining-dropdown__badge empty",children:"Empty"})]},e.id)})})]})]}),(0,E.jsx)("ul",{className:"kyc-module__nav-list",children:N.map((e,t)=>{const a=e.icon,i=p(n,e.id),s=r===t;return(0,E.jsx)("li",{children:(0,E.jsxs)("button",{className:"kyc-nav-item ".concat(s?"kyc-nav-item--active":""),onClick:()=>o(t),children:[(0,E.jsx)("span",{className:"kyc-nav-item__code",children:e.taskCode}),(0,E.jsx)("div",{className:"kyc-nav-item__icon",children:(0,E.jsx)(a,{size:18})}),(0,E.jsx)("span",{className:"kyc-nav-item__label",children:e.label}),k(i)]})},e.id)})})]}),(0,E.jsxs)("div",{className:"kyc-module__content",children:[(0,E.jsxs)("div",{className:"kyc-module__section-header",children:[(0,E.jsxs)("div",{className:"kyc-module__section-title-group",children:[(0,E.jsx)("span",{className:"kyc-module__task-code",children:null===(e=N[r])||void 0===e?void 0:e.taskCode}),(0,E.jsx)("h2",{className:"kyc-module__section-title",children:null===(t=N[r])||void 0===t?void 0:t.label})]}),(0,E.jsxs)("span",{className:"kyc-module__section-counter",children:["Section ",r+1," of ",N.length]})]}),(0,E.jsx)("div",{className:"kyc-module__section-body",children:(()=>{const e=N[r];if(!e)return null;const t={respondent:n,tier:l};switch(e.id){case"portfolioContext":return(0,E.jsx)(ie,s({},t));case"familyHousehold":return(0,E.jsx)(re,s({},t));case"projectParameters":return(0,E.jsx)(oe,s({},t));case"budgetFramework":return(0,E.jsx)(se,s({},t));case"designIdentity":return(0,E.jsx)(Ei,s({},t));case"lifestyleLiving":return(0,E.jsx)(Ti,s({},t));case"spaceRequirements":return(0,E.jsx)(Di,s({},t));case"culturalContext":return(0,E.jsx)(Oi,s({},t));case"workingPreferences":return(0,E.jsx)(Bi,s({},t));default:return null}})()}),(0,E.jsxs)("div",{className:"kyc-module__section-nav",children:[(0,E.jsxs)("button",{className:"btn btn--secondary",onClick:()=>o(Math.max(0,r-1)),disabled:0===r,children:[(0,E.jsx)(ee,{size:18}),"Previous"]}),r<N.length-1&&(0,E.jsxs)("button",{className:"btn btn--primary",onClick:()=>o(r+1),children:["Next",(0,E.jsx)(b,{size:18})]})]})]})]})]})},qi=d("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Hi=d("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Gi=d("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),Ui=d("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Wi=d("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Vi=d("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ki=d("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var Yi,Zi;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter(e=>"number"!==typeof t[t[e]]),a={};for(const e of n)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map(e=>"string"===typeof e?"'".concat(e,"'"):e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t}(Yi||(Yi={})),function(e){e.mergeShapes=(e,t)=>s(s({},e),t)}(Zi||(Zi={}));const $i=Yi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Qi=e=>{switch(typeof e){case"undefined":return $i.undefined;case"string":return $i.string;case"number":return isNaN(e)?$i.nan:$i.number;case"boolean":return $i.boolean;case"function":return $i.function;case"bigint":return $i.bigint;case"symbol":return $i.symbol;case"object":return Array.isArray(e)?$i.array:null===e?$i.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?$i.promise:"undefined"!==typeof Map&&e instanceof Map?$i.map:"undefined"!==typeof Set&&e instanceof Set?$i.set:"undefined"!==typeof Date&&e instanceof Date?$i.date:$i.object;default:return $i.unknown}},Ji=Yi.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Xi extends Error{constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},a=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(a);else if("invalid_return_type"===i.code)a(i.returnTypeError);else if("invalid_arguments"===i.code)a(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,a=0;for(;a<i.path.length;){const n=i.path[a];a===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(this),n}static assert(e){if(!(e instanceof Xi))throw new Error("Not a ZodError: ".concat(e))}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yi.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Xi.create=e=>new Xi(e);const er=(e,t)=>{let n;switch(e.code){case Ji.invalid_type:n=e.received===$i.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case Ji.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,Yi.jsonStringifyReplacer));break;case Ji.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(Yi.joinValues(e.keys,", "));break;case Ji.invalid_union:n="Invalid input";break;case Ji.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(Yi.joinValues(e.options));break;case Ji.invalid_enum_value:n="Invalid enum value. Expected ".concat(Yi.joinValues(e.options),", received '").concat(e.received,"'");break;case Ji.invalid_arguments:n="Invalid function arguments";break;case Ji.invalid_return_type:n="Invalid function return type";break;case Ji.invalid_date:n="Invalid date";break;case Ji.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"===typeof e.validation.position&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):Yi.assertNever(e.validation):n="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case Ji.too_small:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case Ji.too_big:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case Ji.custom:n="Invalid input";break;case Ji.invalid_intersection_types:n="Intersection results could not be merged";break;case Ji.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case Ji.not_finite:n="Number must be finite";break;default:n=t.defaultError,Yi.assertNever(e)}return{message:n}};let tr=er;function nr(){return tr}const ar=e=>{const{data:t,path:n,errorMaps:a,issueData:i}=e,r=[...n,...i.path||[]],o=s(s({},i),{},{path:r});if(void 0!==i.message)return s(s({},i),{},{path:r,message:i.message});let l="";const c=a.filter(e=>!!e).slice().reverse();for(const s of c)l=s(o,{data:t,defaultError:l}).message;return s(s({},i),{},{path:r,message:l})};function ir(e,t){const n=nr(),a=ar({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===er?void 0:er].filter(e=>!!e)});e.common.issues.push(a)}class rr{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if("aborted"===a.status)return or;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const e=await a.key,t=await a.value;n.push({key:e,value:t})}return rr.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:t,value:i}=a;if("aborted"===t.status)return or;if("aborted"===i.status)return or;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof i.value&&!a.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const or=Object.freeze({status:"aborted"}),sr=e=>({status:"dirty",value:e}),lr=e=>({status:"valid",value:e}),cr=e=>"aborted"===e.status,dr=e=>"dirty"===e.status,ur=e=>"valid"===e.status,hr=e=>"undefined"!==typeof Promise&&e instanceof Promise;function pr(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)}function fr(e,t,n,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,n):i?i.value=n:t.set(e,n),n}var mr,gr,vr;"function"===typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message}(mr||(mr={}));class yr{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const br=(e,t)=>{if(ur(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Xi(e.common.issues);return this._error=t,this._error}}};function xr(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:a,description:i}=e;if(t&&(n||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var r,o;const{message:s}=e;return"invalid_enum_value"===t.code?{message:null!==s&&void 0!==s?s:i.defaultError}:"undefined"===typeof i.data?{message:null!==(r=null!==s&&void 0!==s?s:a)&&void 0!==r?r:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(o=null!==s&&void 0!==s?s:n)&&void 0!==o?o:i.defaultError}},description:i}}class Sr{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Qi(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Qi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rr,ctx:{common:e.parent.common,data:e.data,parsedType:Qi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(hr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:null!==(n=null===t||void 0===t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qi(e)},i=this._parseSync({data:e,path:a.path,parent:a});return br(a,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qi(e)},a=this._parse({data:e,path:n.path,parent:n}),i=await(hr(a)?a:Promise.resolve(a));return br(n,i)}refine(e,t){return this._refinement((n,a)=>{const i=e(n),r=()=>a.addIssue(s({code:Ji.custom},(e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t)(n)));return"undefined"!==typeof Promise&&i instanceof Promise?i.then(e=>!!e||(r(),!1)):!!i||(r(),!1)})}refinement(e,t){return this._refinement((n,a)=>!!e(n)||(a.addIssue("function"===typeof t?t(n,a):t),!1))}_refinement(e){return new yo({schema:this,typeName:Lo.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return bo.create(this,this._def)}nullable(){return xo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jr.create(this,this._def)}promise(){return vo.create(this,this._def)}or(e){return to.create([this,e],this._def)}and(e){return ro.create(this,e,this._def)}transform(e){return new yo(s(s({},xr(this._def)),{},{schema:this,typeName:Lo.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t="function"===typeof e?e:()=>e;return new So(s(s({},xr(this._def)),{},{innerType:this,defaultValue:t,typeName:Lo.ZodDefault}))}brand(){return new ko(s({typeName:Lo.ZodBranded,type:this},xr(this._def)))}catch(e){const t="function"===typeof e?e:()=>e;return new _o(s(s({},xr(this._def)),{},{innerType:this,catchValue:t,typeName:Lo.ZodCatch}))}describe(e){return new(0,this.constructor)(s(s({},this._def),{},{description:e}))}pipe(e){return Co.create(this,e)}readonly(){return jo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _r=/^c[^\s-]{8,}$/i,wr=/^[0-9a-z]+$/,Nr=/^[0-9A-HJKMNP-TV-Z]{26}$/,kr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Cr=/^[a-z0-9_-]{21}$/i,jr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Pr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ar;const Lr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Fr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Ir=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Rr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Er=new RegExp("^".concat(Rr,"$"));function Mr(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):null==e.precision&&(t="".concat(t,"(\\.\\d+)?")),t}function Tr(e){return new RegExp("^".concat(Mr(e),"$"))}function Dr(e){let t="".concat(Rr,"T").concat(Mr(e));const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(n.join("|"),")"),new RegExp("^".concat(t,"$"))}function Or(e,t){return!("v4"!==t&&t||!Lr.test(e))||!("v6"!==t&&t||!Fr.test(e))}class Br extends Sr{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==$i.string){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.string,received:t.parsedType}),or}const t=new rr;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const i=e.data.length>a.value,r=e.data.length<a.value;(i||r)&&(n=this._getOrReturnCtx(e,n),i?ir(n,{code:Ji.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):r&&ir(n,{code:Ji.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)Pr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"email",code:Ji.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)Ar||(Ar=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ar.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"emoji",code:Ji.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)kr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"uuid",code:Ji.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)Cr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"nanoid",code:Ji.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)_r.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"cuid",code:Ji.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)wr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"cuid2",code:Ji.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)Nr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"ulid",code:Ji.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(ge){n=this._getOrReturnCtx(e,n),ir(n,{validation:"url",code:Ji.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"regex",code:Ji.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){Dr(a).test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else if("date"===a.kind){Er.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.invalid_string,validation:"date",message:a.message}),t.dirty())}else if("time"===a.kind){Tr(a).test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.invalid_string,validation:"time",message:a.message}),t.dirty())}else"duration"===a.kind?jr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"duration",code:Ji.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?Or(e.data,a.version)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"ip",code:Ji.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?Ir.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"base64",code:Ji.invalid_string,message:a.message}),t.dirty()):Yi.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),s({validation:t,code:Ji.invalid_string},mr.errToObj(n)))}_addCheck(e){return new Br(s(s({},this._def),{},{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(s({kind:"email"},mr.errToObj(e)))}url(e){return this._addCheck(s({kind:"url"},mr.errToObj(e)))}emoji(e){return this._addCheck(s({kind:"emoji"},mr.errToObj(e)))}uuid(e){return this._addCheck(s({kind:"uuid"},mr.errToObj(e)))}nanoid(e){return this._addCheck(s({kind:"nanoid"},mr.errToObj(e)))}cuid(e){return this._addCheck(s({kind:"cuid"},mr.errToObj(e)))}cuid2(e){return this._addCheck(s({kind:"cuid2"},mr.errToObj(e)))}ulid(e){return this._addCheck(s({kind:"ulid"},mr.errToObj(e)))}base64(e){return this._addCheck(s({kind:"base64"},mr.errToObj(e)))}ip(e){return this._addCheck(s({kind:"ip"},mr.errToObj(e)))}datetime(e){var t,n;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(s({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null===e||void 0===e?void 0:e.local)&&void 0!==n&&n},mr.errToObj(null===e||void 0===e?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"===typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(s({kind:"time",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision},mr.errToObj(null===e||void 0===e?void 0:e.message)))}duration(e){return this._addCheck(s({kind:"duration"},mr.errToObj(e)))}regex(e,t){return this._addCheck(s({kind:"regex",regex:e},mr.errToObj(t)))}includes(e,t){return this._addCheck(s({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position},mr.errToObj(null===t||void 0===t?void 0:t.message)))}startsWith(e,t){return this._addCheck(s({kind:"startsWith",value:e},mr.errToObj(t)))}endsWith(e,t){return this._addCheck(s({kind:"endsWith",value:e},mr.errToObj(t)))}min(e,t){return this._addCheck(s({kind:"min",value:e},mr.errToObj(t)))}max(e,t){return this._addCheck(s({kind:"max",value:e},mr.errToObj(t)))}length(e,t){return this._addCheck(s({kind:"length",value:e},mr.errToObj(t)))}nonempty(e){return this.min(1,mr.errToObj(e))}trim(){return new Br(s(s({},this._def),{},{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new Br(s(s({},this._def),{},{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new Br(s(s({},this._def),{},{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function zr(e,t){const n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=n>a?n:a;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}Br.create=e=>{var t;return new Br(s({checks:[],typeName:Lo.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t},xr(e)))};class qr extends Sr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==$i.number){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.number,received:t.parsedType}),or}let t;const n=new rr;for(const a of this._def.checks)if("int"===a.kind)Yi.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ir(t,{code:Ji.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty());else if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Ji.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Ji.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else"multipleOf"===a.kind?0!==zr(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Ji.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ir(t,{code:Ji.not_finite,message:a.message}),n.dirty()):Yi.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,mr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,mr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,mr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,mr.toString(t))}setLimit(e,t,n,a){return new qr(s(s({},this._def),{},{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:mr.toString(a)}]}))}_addCheck(e){return new qr(s(s({},this._def),{},{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:mr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:mr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:mr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:mr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:mr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:mr.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:mr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:mr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:mr.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&Yi.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}qr.create=e=>new qr(s({checks:[],typeName:Lo.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1},xr(e)));class Hr extends Sr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==$i.bigint){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.bigint,received:t.parsedType}),or}let t;const n=new rr;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Ji.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Ji.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Ji.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):Yi.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,mr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,mr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,mr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,mr.toString(t))}setLimit(e,t,n,a){return new Hr(s(s({},this._def),{},{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:mr.toString(a)}]}))}_addCheck(e){return new Hr(s(s({},this._def),{},{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:mr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:mr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:mr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:mr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:mr.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Hr.create=e=>{var t;return new Hr(s({checks:[],typeName:Lo.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t},xr(e)))};class Gr extends Sr{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==$i.boolean){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.boolean,received:t.parsedType}),or}return lr(e.data)}}Gr.create=e=>new Gr(s({typeName:Lo.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1},xr(e)));class Ur extends Sr{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==$i.date){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.date,received:t.parsedType}),or}if(isNaN(e.data.getTime())){return ir(this._getOrReturnCtx(e),{code:Ji.invalid_date}),or}const t=new rr;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),ir(n,{code:Ji.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):Yi.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ur(s(s({},this._def),{},{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:mr.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:mr.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Ur.create=e=>new Ur(s({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:Lo.ZodDate},xr(e)));class Wr extends Sr{_parse(e){if(this._getType(e)!==$i.symbol){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.symbol,received:t.parsedType}),or}return lr(e.data)}}Wr.create=e=>new Wr(s({typeName:Lo.ZodSymbol},xr(e)));class Vr extends Sr{_parse(e){if(this._getType(e)!==$i.undefined){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.undefined,received:t.parsedType}),or}return lr(e.data)}}Vr.create=e=>new Vr(s({typeName:Lo.ZodUndefined},xr(e)));class Kr extends Sr{_parse(e){if(this._getType(e)!==$i.null){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.null,received:t.parsedType}),or}return lr(e.data)}}Kr.create=e=>new Kr(s({typeName:Lo.ZodNull},xr(e)));class Yr extends Sr{constructor(){super(...arguments),this._any=!0}_parse(e){return lr(e.data)}}Yr.create=e=>new Yr(s({typeName:Lo.ZodAny},xr(e)));class Zr extends Sr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return lr(e.data)}}Zr.create=e=>new Zr(s({typeName:Lo.ZodUnknown},xr(e)));class $r extends Sr{_parse(e){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.never,received:t.parsedType}),or}}$r.create=e=>new $r(s({typeName:Lo.ZodNever},xr(e)));class Qr extends Sr{_parse(e){if(this._getType(e)!==$i.undefined){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.void,received:t.parsedType}),or}return lr(e.data)}}Qr.create=e=>new Qr(s({typeName:Lo.ZodVoid},xr(e)));class Jr extends Sr{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==$i.array)return ir(t,{code:Ji.invalid_type,expected:$i.array,received:t.parsedType}),or;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,i=t.data.length<a.exactLength.value;(e||i)&&(ir(t,{code:e?Ji.too_big:Ji.too_small,minimum:i?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(ir(t,{code:Ji.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(ir(t,{code:Ji.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>a.type._parseAsync(new yr(t,e,t.path,n)))).then(e=>rr.mergeArray(n,e));const i=[...t.data].map((e,n)=>a.type._parseSync(new yr(t,e,t.path,n)));return rr.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Jr(s(s({},this._def),{},{minLength:{value:e,message:mr.toString(t)}}))}max(e,t){return new Jr(s(s({},this._def),{},{maxLength:{value:e,message:mr.toString(t)}}))}length(e,t){return new Jr(s(s({},this._def),{},{exactLength:{value:e,message:mr.toString(t)}}))}nonempty(e){return this.min(1,e)}}function Xr(e){if(e instanceof eo){const t={};for(const n in e.shape){const a=e.shape[n];t[n]=bo.create(Xr(a))}return new eo(s(s({},e._def),{},{shape:()=>t}))}return e instanceof Jr?new Jr(s(s({},e._def),{},{type:Xr(e.element)})):e instanceof bo?bo.create(Xr(e.unwrap())):e instanceof xo?xo.create(Xr(e.unwrap())):e instanceof oo?oo.create(e.items.map(e=>Xr(e))):e}Jr.create=(e,t)=>new Jr(s({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Lo.ZodArray},xr(t)));class eo extends Sr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Yi.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==$i.object){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.object,received:t.parsedType}),or}const{status:t,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof $r&&"strip"===this._def.unknownKeys))for(const s in n.data)i.includes(s)||r.push(s);const o=[];for(const s of i){const e=a[s],t=n.data[s];o.push({key:{status:"valid",value:s},value:e._parse(new yr(n,t,n.path,s)),alwaysSet:s in n.data})}if(this._def.catchall instanceof $r){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of r)o.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)r.length>0&&(ir(n,{code:Ji.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const a=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new yr(n,a,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of o){const n=await t.key,a=await t.value;e.push({key:n,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>rr.mergeObjectSync(t,e)):rr.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return mr.errToObj,new eo(s(s({},this._def),{},{unknownKeys:"strict"},void 0!==e?{errorMap:(t,n)=>{var a,i,r,o;const s=null!==(r=null===(i=(a=this._def).errorMap)||void 0===i?void 0:i.call(a,t,n).message)&&void 0!==r?r:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=mr.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}))}strip(){return new eo(s(s({},this._def),{},{unknownKeys:"strip"}))}passthrough(){return new eo(s(s({},this._def),{},{unknownKeys:"passthrough"}))}extend(e){return new eo(s(s({},this._def),{},{shape:()=>s(s({},this._def.shape()),e)}))}merge(e){return new eo({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>s(s({},this._def.shape()),e._def.shape()),typeName:Lo.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new eo(s(s({},this._def),{},{catchall:e}))}pick(e){const t={};return Yi.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new eo(s(s({},this._def),{},{shape:()=>t}))}omit(e){const t={};return Yi.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new eo(s(s({},this._def),{},{shape:()=>t}))}deepPartial(){return Xr(this)}partial(e){const t={};return Yi.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}),new eo(s(s({},this._def),{},{shape:()=>t}))}required(e){const t={};return Yi.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof bo;)e=e._def.innerType;t[n]=e}}),new eo(s(s({},this._def),{},{shape:()=>t}))}keyof(){return fo(Yi.objectKeys(this.shape))}}eo.create=(e,t)=>new eo(s({shape:()=>e,unknownKeys:"strip",catchall:$r.create(),typeName:Lo.ZodObject},xr(t))),eo.strictCreate=(e,t)=>new eo(s({shape:()=>e,unknownKeys:"strict",catchall:$r.create(),typeName:Lo.ZodObject},xr(t))),eo.lazycreate=(e,t)=>new eo(s({shape:e,unknownKeys:"strip",catchall:$r.create(),typeName:Lo.ZodObject},xr(t)));class to extends Sr{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n=s(s({},t),{},{common:s(s({},t.common),{},{issues:[]}),parent:null});return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;const n=e.map(e=>new Xi(e.ctx.common.issues));return ir(t,{code:Ji.invalid_union,unionErrors:n}),or});{let e;const a=[];for(const r of n){const n=s(s({},t),{},{common:s(s({},t.common),{},{issues:[]}),parent:null}),i=r._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&a.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=a.map(e=>new Xi(e));return ir(t,{code:Ji.invalid_union,unionErrors:i}),or}}get options(){return this._def.options}}to.create=(e,t)=>new to(s({options:e,typeName:Lo.ZodUnion},xr(t)));const no=e=>e instanceof ho?no(e.schema):e instanceof yo?no(e.innerType()):e instanceof po?[e.value]:e instanceof mo?e.options:e instanceof go?Yi.objectValues(e.enum):e instanceof So?no(e._def.innerType):e instanceof Vr?[void 0]:e instanceof Kr?[null]:e instanceof bo?[void 0,...no(e.unwrap())]:e instanceof xo?[null,...no(e.unwrap())]:e instanceof ko||e instanceof jo?no(e.unwrap()):e instanceof _o?no(e._def.innerType):[];class ao extends Sr{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==$i.object)return ir(t,{code:Ji.invalid_type,expected:$i.object,received:t.parsedType}),or;const n=this.discriminator,a=t.data[n],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(ir(t,{code:Ji.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),or)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const i of t){const t=no(i.shape[e]);if(!t.length)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(const n of t){if(a.has(n))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(n)));a.set(n,i)}}return new ao(s({typeName:Lo.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a},xr(n)))}}function io(e,t){const n=Qi(e),a=Qi(t);if(e===t)return{valid:!0,data:e};if(n===$i.object&&a===$i.object){const n=Yi.objectKeys(t),a=Yi.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i=s(s({},e),t);for(const r of a){const n=io(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(n===$i.array&&a===$i.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let a=0;a<e.length;a++){const i=io(e[a],t[a]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===$i.date&&a===$i.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class ro extends Sr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(e,a)=>{if(cr(e)||cr(a))return or;const i=io(e.value,a.value);return i.valid?((dr(e)||dr(a))&&t.dirty(),{status:t.value,value:i.data}):(ir(n,{code:Ji.invalid_intersection_types}),or)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(e=>{let[t,n]=e;return a(t,n)}):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ro.create=(e,t,n)=>new ro(s({left:e,right:t,typeName:Lo.ZodIntersection},xr(n)));class oo extends Sr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==$i.array)return ir(n,{code:Ji.invalid_type,expected:$i.array,received:n.parsedType}),or;if(n.data.length<this._def.items.length)return ir(n,{code:Ji.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),or;!this._def.rest&&n.data.length>this._def.items.length&&(ir(n,{code:Ji.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((e,t)=>{const a=this._def.items[t]||this._def.rest;return a?a._parse(new yr(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(a).then(e=>rr.mergeArray(t,e)):rr.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new oo(s(s({},this._def),{},{rest:e}))}}oo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new oo(s({items:e,typeName:Lo.ZodTuple,rest:null},xr(t)))};class so extends Sr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==$i.object)return ir(n,{code:Ji.invalid_type,expected:$i.object,received:n.parsedType}),or;const a=[],i=this._def.keyType,r=this._def.valueType;for(const o in n.data)a.push({key:i._parse(new yr(n,o,n.path,o)),value:r._parse(new yr(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?rr.mergeObjectAsync(t,a):rr.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return new so(t instanceof Sr?s({keyType:e,valueType:t,typeName:Lo.ZodRecord},xr(n)):s({keyType:Br.create(),valueType:e,typeName:Lo.ZodRecord},xr(t)))}}class lo extends Sr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==$i.map)return ir(n,{code:Ji.invalid_type,expected:$i.map,received:n.parsedType}),or;const a=this._def.keyType,i=this._def.valueType,r=[...n.data.entries()].map((e,t)=>{let[r,o]=e;return{key:a._parse(new yr(n,r,n.path,[t,"key"])),value:i._parse(new yr(n,o,n.path,[t,"value"]))}});if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of r){const a=await n.key,i=await n.value;if("aborted"===a.status||"aborted"===i.status)return or;"dirty"!==a.status&&"dirty"!==i.status||t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of r){const a=n.key,i=n.value;if("aborted"===a.status||"aborted"===i.status)return or;"dirty"!==a.status&&"dirty"!==i.status||t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}}}}lo.create=(e,t,n)=>new lo(s({valueType:t,keyType:e,typeName:Lo.ZodMap},xr(n)));class co extends Sr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==$i.set)return ir(n,{code:Ji.invalid_type,expected:$i.set,received:n.parsedType}),or;const a=this._def;null!==a.minSize&&n.data.size<a.minSize.value&&(ir(n,{code:Ji.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&n.data.size>a.maxSize.value&&(ir(n,{code:Ji.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function r(e){const n=new Set;for(const a of e){if("aborted"===a.status)return or;"dirty"===a.status&&t.dirty(),n.add(a.value)}return{status:t.value,value:n}}const o=[...n.data.values()].map((e,t)=>i._parse(new yr(n,e,n.path,t)));return n.common.async?Promise.all(o).then(e=>r(e)):r(o)}min(e,t){return new co(s(s({},this._def),{},{minSize:{value:e,message:mr.toString(t)}}))}max(e,t){return new co(s(s({},this._def),{},{maxSize:{value:e,message:mr.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}co.create=(e,t)=>new co(s({valueType:e,minSize:null,maxSize:null,typeName:Lo.ZodSet},xr(t)));class uo extends Sr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==$i.function)return ir(t,{code:Ji.invalid_type,expected:$i.function,received:t.parsedType}),or;function n(e,n){return ar({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nr(),er].filter(e=>!!e),issueData:{code:Ji.invalid_arguments,argumentsError:n}})}function a(e,n){return ar({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nr(),er].filter(e=>!!e),issueData:{code:Ji.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof vo){const e=this;return lr(async function(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];const l=new Xi([]),c=await e._def.args.parseAsync(o,i).catch(e=>{throw l.addIssue(n(o,e)),l}),d=await Reflect.apply(r,this,c);return await e._def.returns._def.type.parseAsync(d,i).catch(e=>{throw l.addIssue(a(d,e)),l})})}{const e=this;return lr(function(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];const l=e._def.args.safeParse(o,i);if(!l.success)throw new Xi([n(o,l.error)]);const c=Reflect.apply(r,this,l.data),d=e._def.returns.safeParse(c,i);if(!d.success)throw new Xi([a(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uo(s(s({},this._def),{},{args:oo.create(t).rest(Zr.create())}))}returns(e){return new uo(s(s({},this._def),{},{returns:e}))}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new uo(s({args:e||oo.create([]).rest(Zr.create()),returns:t||Zr.create(),typeName:Lo.ZodFunction},xr(n)))}}class ho extends Sr{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ho.create=(e,t)=>new ho(s({getter:e,typeName:Lo.ZodLazy},xr(t)));class po extends Sr{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ir(t,{received:t.data,code:Ji.invalid_literal,expected:this._def.value}),or}return{status:"valid",value:e.data}}get value(){return this._def.value}}function fo(e,t){return new mo(s({values:e,typeName:Lo.ZodEnum},xr(t)))}po.create=(e,t)=>new po(s({value:e,typeName:Lo.ZodLiteral},xr(t)));class mo extends Sr{constructor(){super(...arguments),gr.set(this,void 0)}_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ir(t,{expected:Yi.joinValues(n),received:t.parsedType,code:Ji.invalid_type}),or}if(pr(this,gr,"f")||fr(this,gr,new Set(this._def.values),"f"),!pr(this,gr,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ir(t,{received:t.data,code:Ji.invalid_enum_value,options:n}),or}return lr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return mo.create(e,s(s({},this._def),t))}exclude(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return mo.create(this.options.filter(t=>!e.includes(t)),s(s({},this._def),t))}}gr=new WeakMap,mo.create=fo;class go extends Sr{constructor(){super(...arguments),vr.set(this,void 0)}_parse(e){const t=Yi.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==$i.string&&n.parsedType!==$i.number){const e=Yi.objectValues(t);return ir(n,{expected:Yi.joinValues(e),received:n.parsedType,code:Ji.invalid_type}),or}if(pr(this,vr,"f")||fr(this,vr,new Set(Yi.getValidEnumValues(this._def.values)),"f"),!pr(this,vr,"f").has(e.data)){const e=Yi.objectValues(t);return ir(n,{received:n.data,code:Ji.invalid_enum_value,options:e}),or}return lr(e.data)}get enum(){return this._def.values}}vr=new WeakMap,go.create=(e,t)=>new go(s({values:e,typeName:Lo.ZodNativeEnum},xr(t)));class vo extends Sr{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==$i.promise&&!1===t.common.async)return ir(t,{code:Ji.invalid_type,expected:$i.promise,received:t.parsedType}),or;const n=t.parsedType===$i.promise?t.data:Promise.resolve(t.data);return lr(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}vo.create=(e,t)=>new vo(s({type:e,typeName:Lo.ZodPromise},xr(t)));class yo extends Sr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Lo.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{ir(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){const e=a.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return or;const a=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===a.status?or:"dirty"===a.status||"dirty"===t.value?sr(a.value):a});{if("aborted"===t.value)return or;const a=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===a.status?or:"dirty"===a.status||"dirty"===t.value?sr(a.value):a}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===a.status?or:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?or:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ur(e))return e;const r=a.transform(e.value,i);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>ur(e)?Promise.resolve(a.transform(e.value,i)).then(e=>({status:t.value,value:e})):e)}Yi.assertNever(a)}}yo.create=(e,t,n)=>new yo(s({schema:e,typeName:Lo.ZodEffects,effect:t},xr(n))),yo.createWithPreprocess=(e,t,n)=>new yo(s({schema:t,effect:{type:"preprocess",transform:e},typeName:Lo.ZodEffects},xr(n)));class bo extends Sr{_parse(e){return this._getType(e)===$i.undefined?lr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bo.create=(e,t)=>new bo(s({innerType:e,typeName:Lo.ZodOptional},xr(t)));class xo extends Sr{_parse(e){return this._getType(e)===$i.null?lr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xo.create=(e,t)=>new xo(s({innerType:e,typeName:Lo.ZodNullable},xr(t)));class So extends Sr{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===$i.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}So.create=(e,t)=>new So(s({innerType:e,typeName:Lo.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default},xr(t)));class _o extends Sr{_parse(e){const{ctx:t}=this._processInputParams(e),n=s(s({},t),{},{common:s(s({},t.common),{},{issues:[]})}),a=this._def.innerType._parse({data:n.data,path:n.path,parent:s({},n)});return hr(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Xi(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new Xi(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}_o.create=(e,t)=>new _o(s({innerType:e,typeName:Lo.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch},xr(t)));class wo extends Sr{_parse(e){if(this._getType(e)!==$i.nan){const t=this._getOrReturnCtx(e);return ir(t,{code:Ji.invalid_type,expected:$i.nan,received:t.parsedType}),or}return{status:"valid",value:e.data}}}wo.create=e=>new wo(s({typeName:Lo.ZodNaN},xr(e)));const No=Symbol("zod_brand");class ko extends Sr{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Co extends Sr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?or:"dirty"===e.status?(t.dirty(),sr(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?or:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Co({in:e,out:t,typeName:Lo.ZodPipeline})}}class jo extends Sr{_parse(e){const t=this._def.innerType._parse(e),n=e=>(ur(e)&&(e.value=Object.freeze(e.value)),e);return hr(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}function Po(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?Yr.create().superRefine((a,i)=>{var r,o;if(!e(a)){const e="function"===typeof t?t(a):"string"===typeof t?{message:t}:t,l=null===(o=null!==(r=e.fatal)&&void 0!==r?r:n)||void 0===o||o,c="string"===typeof e?{message:e}:e;i.addIssue(s(s({code:"custom"},c),{},{fatal:l}))}}):Yr.create()}jo.create=(e,t)=>new jo(s({innerType:e,typeName:Lo.ZodReadonly},xr(t)));const Ao={object:eo.lazycreate};var Lo;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Lo||(Lo={}));const Fo=Br.create,Io=qr.create,Ro=wo.create,Eo=Hr.create,Mo=Gr.create,To=Ur.create,Do=Wr.create,Oo=Vr.create,Bo=Kr.create,zo=Yr.create,qo=Zr.create,Ho=$r.create,Go=Qr.create,Uo=Jr.create,Wo=eo.create,Vo=eo.strictCreate,Ko=to.create,Yo=ao.create,Zo=ro.create,$o=oo.create,Qo=so.create,Jo=lo.create,Xo=co.create,es=uo.create,ts=ho.create,ns=po.create,as=mo.create,is=go.create,rs=vo.create,os=yo.create,ss=bo.create,ls=xo.create,cs=yo.createWithPreprocess,ds=Co.create,us={string:e=>Br.create(s(s({},e),{},{coerce:!0})),number:e=>qr.create(s(s({},e),{},{coerce:!0})),boolean:e=>Gr.create(s(s({},e),{},{coerce:!0})),bigint:e=>Hr.create(s(s({},e),{},{coerce:!0})),date:e=>Ur.create(s(s({},e),{},{coerce:!0}))},hs=or;var ps=Object.freeze({__proto__:null,defaultErrorMap:er,setErrorMap:function(e){tr=e},getErrorMap:nr,makeIssue:ar,EMPTY_PATH:[],addIssueToContext:ir,ParseStatus:rr,INVALID:or,DIRTY:sr,OK:lr,isAborted:cr,isDirty:dr,isValid:ur,isAsync:hr,get util(){return Yi},get objectUtil(){return Zi},ZodParsedType:$i,getParsedType:Qi,ZodType:Sr,datetimeRegex:Dr,ZodString:Br,ZodNumber:qr,ZodBigInt:Hr,ZodBoolean:Gr,ZodDate:Ur,ZodSymbol:Wr,ZodUndefined:Vr,ZodNull:Kr,ZodAny:Yr,ZodUnknown:Zr,ZodNever:$r,ZodVoid:Qr,ZodArray:Jr,ZodObject:eo,ZodUnion:to,ZodDiscriminatedUnion:ao,ZodIntersection:ro,ZodTuple:oo,ZodRecord:so,ZodMap:lo,ZodSet:co,ZodFunction:uo,ZodLazy:ho,ZodLiteral:po,ZodEnum:mo,ZodNativeEnum:go,ZodPromise:vo,ZodEffects:yo,ZodTransformer:yo,ZodOptional:bo,ZodNullable:xo,ZodDefault:So,ZodCatch:_o,ZodNaN:wo,BRAND:No,ZodBranded:ko,ZodPipeline:Co,ZodReadonly:jo,custom:Po,Schema:Sr,ZodSchema:Sr,late:Ao,get ZodFirstPartyTypeKind(){return Lo},coerce:us,any:zo,array:Uo,bigint:Eo,boolean:Mo,date:To,discriminatedUnion:Yo,effect:os,enum:as,function:es,instanceof:function(e){return Po(t=>t instanceof e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)})},intersection:Zo,lazy:ts,literal:ns,map:Jo,nan:Ro,nativeEnum:is,never:Ho,null:Bo,nullable:ls,number:Io,object:Wo,oboolean:()=>Mo().optional(),onumber:()=>Io().optional(),optional:ss,ostring:()=>Fo().optional(),pipeline:ds,preprocess:cs,promise:rs,record:Qo,set:Xo,strictObject:Vo,string:Fo,symbol:Do,transformer:os,tuple:$o,undefined:Oo,union:Ko,unknown:qo,void:Go,NEVER:hs,ZodIssueCode:Ji,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Xi});const fs=ps.enum(["single_family","multi_family","vacation","winter"]),ms=ps.enum(["rare","quarterly","monthly","weekly"]),gs=ps.enum(["none","part_time","full_time","live_in"]),vs=ps.enum(["open","balanced","formal","private"]),ys=ps.enum(["none","pool_only","pool_spa","full_wellness"]),bs=ps.enum(["pass","warning","fail","pending"]),xs=ps.enum(["kickoff","concept","schematic","development"]),Ss=ps.enum(["zone_0","zone_1","zone_2","zone_3"]),_s=ps.enum(["critical","warning"]),ws=ps.object({id:ps.string(),name:ps.string(),zone:ps.string(),acousticZone:Ss.optional(),tags:ps.array(ps.string()).default([]),moduleId:ps.string().optional()}),Ns=ps.object({id:ps.string(),fromRoomId:ps.string(),toRoomId:ps.string(),type:ps.enum(["door","opening","passage"]).default("door")}),ks=ps.object({id:ps.string(),name:ps.string(),type:ps.enum(["delivery_route","refuse_route","foh_to_terrace","guest_circulation","service_circulation"]),roomIds:ps.array(ps.string())}),Cs=ps.object({id:ps.string(),room1Id:ps.string(),room2Id:ps.string(),isFloor:ps.boolean().default(!1)}),js=ps.object({rooms:ps.array(ws).default([]),edges:ps.array(Ns).default([]),namedPaths:ps.array(ks).default([]),sharedWalls:ps.array(Cs).default([])}),Ps=ps.object({id:ps.string(),ruleId:ps.string(),severity:_s,description:ps.string(),affectedRooms:ps.array(ps.string()).default([]),correctiveAction:ps.string()}),As=ps.object({id:ps.string(),name:ps.string(),trigger:ps.string(),description:ps.string().optional(),isPresent:ps.boolean().default(!1)}),Ls=ps.object({moduleId:ps.string(),moduleName:ps.string(),score:ps.number().min(0).max(100),threshold:ps.number().default(80),checklistItems:ps.array(ps.object({id:ps.string(),name:ps.string(),completed:ps.boolean().default(!1)})).default([])}),Fs=ps.object({id:ps.string(),projectId:ps.string(),timestamp:ps.string(),gateStatus:bs,redFlags:ps.array(Ps).default([]),requiredBridges:ps.array(As).default([]),moduleScores:ps.array(Ls).default([]),overallScore:ps.number().min(0).max(100)}),Is=ps.object({typology:fs.default("single_family"),entertainingLoad:ms.default("monthly"),staffingLevel:gs.default("none"),privacyPosture:vs.default("balanced"),wetProgram:ys.default("none")}),Rs=ps.object({chefLedCooking:ps.boolean().default(!1),multiFamilyHosting:ps.boolean().default(!1),lateNightMedia:ps.boolean().default(!1),homeOffice:ps.boolean().default(!1),fitnessRecovery:ps.boolean().default(!1),poolEntertainment:ps.boolean().default(!1)}),Es=ps.enum(["10k","15k","20k","custom"]),Ms=(ps.object({id:ps.string(),name:ps.string().min(1,"Project name is required"),description:ps.string().optional(),phase:xs.default("kickoff"),activePreset:Es.optional(),operatingModel:Is.default({}),lifestylePriorities:Rs.default({}),scoreThreshold:ps.number().min(0).max(100).default(80),planGraph:js.optional(),latestValidation:Fs.optional(),createdAt:ps.string(),updatedAt:ps.string()}).omit({id:!0,createdAt:!0,updatedAt:!0,latestValidation:!0}),ws.omit({id:!0}),Ns.omit({id:!0}),ps.object({id:ps.string(),number:ps.number().min(1).max(8),name:ps.string(),shortName:ps.string(),description:ps.string(),primaryFocus:ps.string(),gateDeliverables:ps.array(ps.string()),checklistItems:ps.array(ps.object({id:ps.string(),name:ps.string(),description:ps.string().optional()}))}),ps.enum(["A","N","B","S"])),Ts=ps.object({id:ps.string(),code:ps.string(),name:ps.string(),targetSF:ps.number().min(0),zone:ps.string(),level:ps.number().min(1).default(1),bubbleId:ps.string().optional(),rationale:ps.string().optional()}),Ds=ps.object({fromSpaceCode:ps.string(),toSpaceCode:ps.string(),relationship:Ms}),Os=ps.object({id:ps.string(),name:ps.string(),description:ps.string().optional(),spaceCodes:ps.array(ps.string())}),Bs=ps.object({id:ps.string(),number:ps.number(),name:ps.string(),description:ps.string(),fromSpaceCode:ps.string(),toSpaceCode:ps.string(),purpose:ps.string().optional()}),zs=ps.object({butlerPantry:ps.boolean().default(!1),guestAutonomy:ps.boolean().default(!1),soundLock:ps.boolean().default(!1),wetFeetIntercept:ps.boolean().default(!1),opsCore:ps.boolean().default(!1)}),qs=ps.object({id:ps.string(),projectId:ps.string(),name:ps.string(),totalSF:ps.number().min(0),levels:ps.number().min(1).default(2),hasBasement:ps.boolean().default(!1),bedrooms:ps.number().min(0).default(5),executiveSummary:ps.string().optional(),spaces:ps.array(Ts).default([]),adjacencyMatrix:ps.array(Ds).default([]),nodes:ps.array(Os).default([]),crossLinks:ps.array(Bs).default([]),bridgeConfig:zs.optional(),mermaidCode:ps.string().optional(),createdAt:ps.string(),updatedAt:ps.string()}),Hs=(qs.omit({id:!0,createdAt:!0,updatedAt:!0}),ps.object({id:ps.string(),briefId:ps.string(),versionNumber:ps.number().min(1),name:ps.string(),description:ps.string().optional(),snapshot:qs,createdAt:ps.string()}).omit({id:!0,createdAt:!0}),ps.enum(["primary","secondary","vacation","winter","investment"])),Gs=ps.enum(["couple_no_children","couple_young_children","couple_teenagers","couple_adult_children","multi_generational","single_occupant","blended_family"]),Us=ps.enum(["rarely","occasionally","regularly","frequently"]),Ws=ps.enum(["intimate","moderate","large","grand"]),Vs=ps.enum(["self_sufficient","occasional","regular","full_service","estate"]),Ks=ps.enum(["welcoming","selective","formal","sanctuary"]),Ys=ps.enum(["minimal","casual","enthusiast","serious","professional"]),Zs=ps.enum(["none","basic","active","dedicated","resort"]),$s=ps.enum(["never","occasional","regular","primary","executive"]),Qs=(ps.enum(["casual","enthusiast","dedicated","professional"]),ps.object({residenceType:Hs,estimatedSF:ps.number().min(5e3).max(5e4),siteLotSize:ps.string().optional(),hasBasement:ps.boolean().default(!1),numberOfLevels:ps.number().min(1).max(5).default(2),climateZone:ps.string().optional(),existingStructure:ps.boolean().default(!1),targetCompletionDate:ps.string().optional()})),Js=ps.object({composition:Gs,primaryResidents:ps.number().min(1).max(10),childrenAges:ps.array(ps.number()).default([]),elderlyResidents:ps.boolean().default(!1),mobilityConsiderations:ps.boolean().default(!1),pets:ps.array(ps.object({type:ps.string(),size:ps.enum(["small","medium","large"]).optional(),count:ps.number().default(1),specialNeeds:ps.string().optional()})).default([])}),Xs=ps.object({frequency:Us,typicalScale:Ws,maxEventScale:Ws,formalDiningImportance:ps.number().min(1).max(5),outdoorEntertainingImportance:ps.number().min(1).max(5),cateringSupport:ps.boolean().default(!1),wineCollection:ps.boolean().default(!1),wineBottleCount:ps.number().optional(),barEntertainingImportance:ps.number().min(1).max(5)}),el=ps.object({preference:Vs,currentStaff:ps.array(ps.object({role:ps.string(),liveIn:ps.boolean().default(!1),fullTime:ps.boolean().default(!1)})).default([]),plannedStaff:ps.array(ps.string()).default([]),securityRequirements:ps.enum(["minimal","moderate","enhanced","comprehensive"]).default("minimal"),packageDeliveryVolume:ps.enum(["light","moderate","heavy"]).default("moderate")}),tl=ps.object({preference:Ks,guestStayFrequency:ps.enum(["rarely","occasionally","regularly","frequently"]),typicalGuestStayDuration:ps.enum(["overnight","weekend","week","extended"]),multiGenerationalHosting:ps.boolean().default(!1),separateGuestAccess:ps.boolean().default(!1),workFromHome:$s,clientMeetingsAtHome:ps.boolean().default(!1),mediaRoom:ps.boolean().default(!1),lateNightMediaUse:ps.boolean().default(!1)}),nl=ps.object({cookingStyle:Ys,primaryCook:ps.enum(["self","spouse","both","staff","mixed"]),breakfastStyle:ps.enum(["quick","casual","formal"]),dailyMealsAtHome:ps.number().min(0).max(3),showKitchenImportance:ps.number().min(1).max(5),professionalAppliances:ps.boolean().default(!1),multipleOvens:ps.boolean().default(!1),wineStorage:ps.boolean().default(!1),separateCateringKitchen:ps.boolean().default(!1)}),al=ps.object({interest:Zs,fitnessRoutine:ps.enum(["none","light","regular","intensive"]),poolDesired:ps.boolean().default(!1),poolType:ps.enum(["lap","recreational","infinity","indoor"]).optional(),spaFeatures:ps.array(ps.enum(["sauna","steam","hot_tub","cold_plunge","massage_room","meditation"])).default([]),outdoorActivities:ps.array(ps.string()).default([]),garageBays:ps.number().min(1).max(10).default(2),carCollection:ps.boolean().default(!1)}),il=ps.object({accessibility:ps.array(ps.string()).default([]),medicalEquipment:ps.boolean().default(!1),artCollection:ps.boolean().default(!1),artClimateControl:ps.boolean().default(!1),musicRoom:ps.boolean().default(!1),recordingStudio:ps.boolean().default(!1),workshop:ps.boolean().default(!1),wineRoom:ps.boolean().default(!1),safe_room:ps.boolean().default(!1),customSpaces:ps.array(ps.object({name:ps.string(),description:ps.string(),estimatedSF:ps.number().optional(),adjacencyNeeds:ps.string().optional()})).default([])}),rl=ps.object({constructionBudgetRange:ps.enum(["under_5m","5m_10m","10m_20m","20m_50m","over_50m"]).optional(),ffeBudgetRange:ps.enum(["under_500k","500k_1m","1m_2m","2m_5m","over_5m"]).optional(),prioritizeQuality:ps.boolean().default(!0),phaseConstruction:ps.boolean().default(!1)});ps.object({id:ps.string(),clientId:ps.string(),projectId:ps.string().optional(),completedAt:ps.string().optional(),propertyContext:Qs,householdProfile:Js,entertainingProfile:Xs,staffingProfile:el,privacyProfile:tl,kitchenProfile:nl,wellnessProfile:al,specialRequirements:il,budgetProfile:rl.optional(),additionalNotes:ps.string().optional(),createdAt:ps.string(),updatedAt:ps.string()});function ol(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}const sl="Kitchen Rules Engine",ll="Entertaining Spine",cl="Primary Suite Ecosystem",dl="Guest Wing Logic",ul="Media & Acoustic Control",hl="Service Spine",pl="Wellness Program",fl="Staff Layer",ml=new Set(["FOY","GR","DR","FR","LIB","OFF","Foyer","Gallery","Great Room","Dining","Dining Room","Family Room","Library","Office","Living Room","Salon","Drawing Room"]),gl=new Set(["PRI","PRIBATH","PRICL","PRILOUNGE","PRISIT","Primary Bedroom","Primary Bath","Primary Closet","Primary Lounge","Primary Sitting","Master Bedroom","Master Bath","Master Closet"]),vl=new Set(["KIT","CHEF","SCUL","Kitchen","Show Kitchen","Chef's Kitchen","Scullery","Prep Kitchen"]),yl=new Set(["KIT"]),bl=new Set(["Kitchen","Show Kitchen","Principal Kitchen","Main Kitchen"]),xl={zone_0:0,zone_1:1,zone_2:2,zone_3:3};function Sl(e){const{operatingModel:t,lifestylePriorities:n,planBrief:a,planGraph:i}=e,r=[],o=function(e,t){const n=[];t.lateNightMedia&&"private"===e.privacyPosture&&n.push({id:ol(),ruleId:"acoustic-001",severity:"warning",description:"Late-night media use may conflict with private posture - ensure sound isolation",affectedRooms:["Media Room","Primary Suite"],correctiveAction:"Add sound lock vestibule between media and sleeping zones"});"weekly"===e.entertainingLoad&&"none"===e.staffingLevel&&n.push({id:ol(),ruleId:"service-001",severity:"warning",description:"Weekly entertaining without staff may create service bottlenecks",affectedRooms:["Kitchen","Dining","Service Areas"],correctiveAction:"Consider part-time staffing or enhanced self-service design"});"full_wellness"===e.wetProgram&&"winter"===e.typology&&n.push({id:ol(),ruleId:"wellness-001",severity:"warning",description:"Full wellness program in winter residence requires enhanced humidity control",affectedRooms:["Spa","Steam Room","Pool Area"],correctiveAction:"Confirm MEP dehumidification strategy for cold climate operation"});t.multiFamilyHosting&&"private"===e.privacyPosture&&n.push({id:ol(),ruleId:"privacy-001",severity:"warning",description:"Multi-family hosting with private posture requires careful circulation design",affectedRooms:["Primary Suite","Guest Wing","Common Areas"],correctiveAction:"Verify guest circulation does not cross primary suite threshold"});t.chefLedCooking&&"live_in"===e.staffingLevel&&n.push({id:ol(),ruleId:"kitchen-001",severity:"warning",description:"Chef-led cooking with live-in staff requires clear kitchen territory boundaries",affectedRooms:["Show Kitchen","Scullery","Staff Kitchen"],correctiveAction:"Define primary cook zones and service support areas"});return n}(t,n);if(r.push(...o),i&&i.rooms.length>0){const e=_l(i);r.push(...e);const t=Al(i);r.push(...t);const n=Ll(i);n&&r.push(n)}if(a&&a.adjacencyMatrix&&a.adjacencyMatrix.length>0){const e=function(e){const t=[],n=new Map(e.spaces.map(e=>[e.code,e.name])),a=new Map;for(const o of e.adjacencyMatrix){a.has(o.fromSpaceCode)||a.set(o.fromSpaceCode,new Map),a.get(o.fromSpaceCode).set(o.toSpaceCode,o.relationship),a.has(o.toSpaceCode)||a.set(o.toSpaceCode,new Map);a.get(o.toSpaceCode).get(o.fromSpaceCode)||a.get(o.toSpaceCode).set(o.fromSpaceCode,o.relationship)}const i=new Set;for(const o of e.adjacencyMatrix){var r;const s=[o.fromSpaceCode,o.toSpaceCode].sort().join("-");if(i.has(s))continue;i.add(s);const l=o.relationship,c=null===(r=a.get(o.toSpaceCode))||void 0===r?void 0:r.get(o.fromSpaceCode);if(c&&l!==c&&("S"===l&&"A"===c||"A"===l&&"S"===c)){const e=n.get(o.fromSpaceCode)||o.fromSpaceCode,a=n.get(o.toSpaceCode)||o.toSpaceCode;t.push({id:ol(),ruleId:"adjacency-conflict-".concat(o.fromSpaceCode,"-").concat(o.toSpaceCode),severity:"critical",description:"Conflicting requirements: ".concat(e," and ").concat(a," have incompatible adjacency requirements (").concat(Fl[l]," vs ").concat(Fl[c],")"),affectedRooms:[e,a],correctiveAction:"Resolve the conflicting adjacency requirements in the program"})}if("S"===l){const a=e.nodes.find(e=>e.spaceCodes.includes(o.fromSpaceCode)),i=e.nodes.find(e=>e.spaceCodes.includes(o.toSpaceCode));if(a&&i&&a.id===i.id){const e=n.get(o.fromSpaceCode)||o.fromSpaceCode,i=n.get(o.toSpaceCode)||o.toSpaceCode;t.push({id:ol(),ruleId:"adjacency-".concat(o.fromSpaceCode,"-").concat(o.toSpaceCode),severity:"warning",description:"".concat(e," and ").concat(i," require separation but are grouped in the same circulation node (").concat(a.name,")"),affectedRooms:[e,i],correctiveAction:"Consider relocating one space to a different circulation node or ensure adequate acoustic/visual buffering"})}}}for(const o of e.adjacencyMatrix)if("A"===o.relationship){const e=n.has(o.fromSpaceCode),a=n.has(o.toSpaceCode);if(!e||!a){const a=e?o.toSpaceCode:o.fromSpaceCode,i=e?o.fromSpaceCode:o.toSpaceCode,r=n.get(i)||i;t.push({id:ol(),ruleId:"adjacency-missing-".concat(o.fromSpaceCode,"-").concat(o.toSpaceCode),severity:"warning",description:"".concat(r," requires adjacency to ").concat(a," but that space is not included in the program"),affectedRooms:[r],correctiveAction:"Consider adding ".concat(a," to the program or removing this adjacency requirement")})}}return t}(a);r.push(...e)}const l=function(e,t,n){const a=[],i=null===n||void 0===n?void 0:n.bridgeConfig,r=void 0!==i,o=("monthly"===e.entertainingLoad||"weekly"===e.entertainingLoad)&&("balanced"===e.privacyPosture||"formal"===e.privacyPosture);o&&a.push({id:ol(),name:"Butler Pantry Bridge",trigger:"".concat(zl(e.entertainingLoad)," entertaining + ").concat(zl(e.privacyPosture)," posture"),description:"Service corridor between kitchen and formal dining for seamless staff operation.",isPresent:!r||i.butlerPantry});const s=t.multiFamilyHosting||"vacation"===e.typology||"winter"===e.typology;s&&a.push({id:ol(),name:"Guest Autonomy Node",trigger:t.multiFamilyHosting?"Multi-family hosting enabled":"".concat(zl(e.typology)," typology"),description:"Self-contained guest zone with independent entry, kitchenette, and living area.",isPresent:!r||i.guestAutonomy});t.lateNightMedia&&a.push({id:ol(),name:"Sound Lock Vestibule",trigger:"Late-night media use enabled",description:"Acoustic buffer zone (double-door vestibule) between media room and bedroom wing.",isPresent:!r||i.soundLock});const l="none"!==e.wetProgram||t.poolEntertainment;l&&a.push({id:ol(),name:"Wet-Feet Intercept",trigger:"none"!==e.wetProgram?"".concat(ql(e.wetProgram)," program"):"Pool entertainment enabled",description:"Transition zone with drainage, towel storage, and outdoor shower between pool and main house.",isPresent:!r||i.wetFeetIntercept});"none"!==e.staffingLevel&&a.push({id:ol(),name:"Ops Core",trigger:"".concat(Hl(e.staffingLevel)," staffing"),description:"Dedicated operations hub for staff including secure package receipt and deliveries staging.",isPresent:!r||i.opsCore});return a}(t,n,a);let c=function(e,t){const n=75;return[{moduleId:"module-01",moduleName:sl,score:Il(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-02",moduleName:ll,score:Rl(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-03",moduleName:cl,score:El(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-04",moduleName:dl,score:Ml(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-05",moduleName:ul,score:Tl(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-06",moduleName:hl,score:Dl(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-07",moduleName:pl,score:Ol(n,e,t),threshold:80,checklistItems:[]},{moduleId:"module-08",moduleName:fl,score:Bl(n,e,t),threshold:80,checklistItems:[]}]}(t,n);a&&(c=function(e,t){const n={KIT:"module-01",SCUL:"module-01",BKFST:"module-01",CHEF:"module-01",FOY:"module-02",GR:"module-02",FDR:"module-02",TERR:"module-02",DR:"module-02",PRI:"module-03",PRIBATH:"module-03",PRICL:"module-03",PRILOUNGE:"module-03",GUEST1:"module-04",GUEST2:"module-04",GSL1:"module-04",SEC1:"module-04",MEDIA:"module-05",LIB:"module-05",MUD:"module-06",LAUN:"module-06",MEP:"module-06",GAR:"module-06",GYM:"module-07",SPA:"module-07",POOL:"module-07",STAFF:"module-08"},a={};for(const i of t){const e="critical"===i.severity?3:1;for(const t of i.affectedRooms){const i=t.toUpperCase().replace(/\s+/g,"");if(n[i]){const t=n[i];a[t]=(a[t]||0)+e;continue}for(const[t,r]of Object.entries(n))if(i.includes(t)||t.includes(i.slice(0,3))){a[r]=(a[r]||0)+e;break}}}return e.map(e=>{const t=a[e.moduleId]||0;if(t>0){const n=5*t;return s(s({},e),{},{score:Math.max(40,e.score-n)})}return e})}(c,r));const d=r.filter(e=>"critical"===e.severity).length,u=l.filter(e=>!e.isPresent).length,h=Math.round(c.reduce((e,t)=>e+t.score,0)/c.length);let p="pass";return d>0?p="fail":(u>0||h<80||r.length>0)&&(p="warning"),{id:ol(),projectId:e.projectId||"",timestamp:(new Date).toISOString(),gateStatus:p,redFlags:r,requiredBridges:l,moduleScores:c,overallScore:h}}function _l(e){const t=[],n=wl(e.rooms);for(const a of e.namedPaths){const e=Nl(a,n);for(const n of e.violations)t.push(Pl(a,n,e.roomsTraversed))}return t}function wl(e){const t=new Map;for(const n of e)t.set(n.id,n);return t}function Nl(e,t){const n=[],a=[];for(const i of e.roomIds){const r=t.get(i);if(r)switch(a.push(r.name),e.type){case"delivery_route":case"refuse_route":kl(r)&&n.push({type:"foh_crossing",room:r.name,description:"".concat("delivery_route"===e.type?"Delivery":"Refuse"," route passes through front-of-house room: ").concat(r.name)});break;case"guest_circulation":Cl(r)&&n.push({type:"primary_threshold",room:r.name,description:"Guest circulation crosses primary suite threshold at: ".concat(r.name)});break;case"foh_to_terrace":jl(r)&&n.push({type:"kitchen_aisle",room:r.name,description:"Guest route to terrace crosses kitchen work aisle at: ".concat(r.name)})}}return{pathName:e.name,pathType:e.type,roomsTraversed:a,violations:n}}function kl(e){if(e.tags.includes("foh")||e.tags.includes("front_of_house"))return!0;if("formal"===e.zone||"entertaining"===e.zone||"arrival"===e.zone)return!0;const t=e.name.toUpperCase();for(const n of ml)if(t.includes(n.toUpperCase()))return!0;return ml.has(e.name)}function Cl(e){if(e.tags.includes("primary_suite")||e.tags.includes("master_suite"))return!0;if("primary"===e.zone||"primary_suite"===e.zone||"master"===e.zone)return!0;const t=e.name.toUpperCase();for(const n of gl)if(t.includes(n.toUpperCase()))return!0;return gl.has(e.name)}function jl(e){if(e.tags.includes("kitchen_work")||e.tags.includes("work_aisle"))return!0;const t=e.name.toUpperCase();for(const n of vl)if(t.includes(n.toUpperCase()))return!0;return vl.has(e.name)}function Pl(e,t,n){return{id:ol(),ruleId:{foh_crossing:"critical-002",primary_threshold:"critical-001",kitchen_aisle:"critical-005",zone_conflict:"critical-003"}[t.type]||"path-violation",severity:"critical",description:t.description,affectedRooms:n,correctiveAction:{foh_crossing:"Reroute service circulation through back-of-house areas. Consider adding a dedicated service corridor.",primary_threshold:"Redesign guest circulation to approach guest wing without crossing primary suite threshold. Add a buffer zone or redirect via common areas.",kitchen_aisle:"Provide an alternate guest route to terrace that bypasses the kitchen work triangle. Consider a butler pantry pass-through or gallery bypass.",zone_conflict:"Add acoustic buffer (vestibule, corridor, or solid partition) between conflicting zones."}[t.type]||"Review circulation path and eliminate violation."}}function Al(e){const t=[],n=wl(e.rooms);for(const a of e.sharedWalls){const e=n.get(a.room1Id),i=n.get(a.room2Id);if(!e||!i)continue;if(!e.acousticZone||!i.acousticZone)continue;const r=xl[e.acousticZone],o=xl[i.acousticZone];if(3===r&&0===o||0===r&&3===o){const n=3===r?e:i,o=0===r?e:i,s=a.isFloor?"floor/ceiling":"wall";t.push({id:ol(),ruleId:"critical-003",severity:"critical",description:"Acoustic conflict: Zone 3 room (".concat(n.name,") shares ").concat(s," with Zone 0 bedroom (").concat(o.name,"). High-noise functions must not be adjacent to sleeping areas."),affectedRooms:[n.name,o.name],correctiveAction:"Relocate ".concat(n.name," away from ").concat(o.name,", or insert a buffer zone (corridor, closet, or storage) between them. If structural constraints prevent relocation, specify enhanced acoustic construction (STC 60+ wall assembly).")})}if(3===r&&1===o||1===r&&3===o){const n=3===r?e:i,a=1===r?e:i;t.push({id:ol(),ruleId:"acoustic-002",severity:"warning",description:"Acoustic concern: Zone 3 room (".concat(n.name,") is adjacent to Zone 1 living area (").concat(a.name,"). Consider acoustic treatment."),affectedRooms:[n.name,a.name],correctiveAction:"Add sound lock vestibule at ".concat(n.name," entry, or specify enhanced wall construction.")})}}return t}function Ll(e){return e.rooms.some(e=>{if(e.tags.includes("show_kitchen")||e.tags.includes("principal_kitchen"))return!0;if(yl.has(e.id.toUpperCase())||yl.has(e.name.toUpperCase().replace(/\s+/g,"")))return!0;for(const t of bl)if(e.name.toLowerCase().includes(t.toLowerCase()))return!0;return!1})?null:{id:ol(),ruleId:"critical-004",severity:"critical",description:"No principal-level show kitchen detected. Luxury residences require a presentation kitchen on the main living level, not hidden or basement-only.",affectedRooms:[],correctiveAction:"Add a show kitchen to Level 1 with island, tall glazing, and guest-appropriate finishes. The show kitchen should be adjacent to the family hub and have visual connection to entertaining areas."}}const Fl={A:"Adjacent (direct connection required)",N:"Near (close proximity needed)",B:"Buffered (buffer zone required)",S:"Separate (isolation required)"};function Il(e,t,n){let a=e;return n.chefLedCooking&&(a+=10),"weekly"===t.entertainingLoad&&(a+=5),"none"!==t.staffingLevel&&(a+=5),Math.min(100,a)}function Rl(e,t,n){let a=e;return"weekly"!==t.entertainingLoad&&"monthly"!==t.entertainingLoad||(a+=10),n.poolEntertainment&&(a+=5),"open"!==t.privacyPosture&&"balanced"!==t.privacyPosture||(a+=5),Math.min(100,a)}function El(e,t,n){let a=e;return"private"!==t.privacyPosture&&"formal"!==t.privacyPosture||(a+=10),"none"!==t.staffingLevel&&(a+=5),Math.min(100,a)}function Ml(e,t,n){let a=e;return n.multiFamilyHosting&&(a+=10),"vacation"!==t.typology&&"winter"!==t.typology||(a+=5),Math.min(100,a)}function Tl(e,t,n){let a=e;return n.lateNightMedia&&(a+=5),"private"===t.privacyPosture&&(a-=5),Math.min(100,Math.max(50,a))}function Dl(e,t,n){let a=e;return"full_time"!==t.staffingLevel&&"live_in"!==t.staffingLevel||(a+=10),"weekly"===t.entertainingLoad&&(a+=5),Math.min(100,a)}function Ol(e,t,n){let a=e;return"full_wellness"===t.wetProgram?a+=15:"pool_spa"===t.wetProgram?a+=10:"pool_only"===t.wetProgram&&(a+=5),n.fitnessRecovery&&(a+=5),Math.min(100,a)}function Bl(e,t,n){let a=e;return"live_in"===t.staffingLevel?a+=15:"full_time"===t.staffingLevel?a+=10:"part_time"===t.staffingLevel&&(a+=5),Math.min(100,a)}function zl(e){return e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}function ql(e){return{none:"None",pool_only:"Pool only",pool_spa:"Pool + Spa",full_wellness:"Full wellness"}[e]||e}function Hl(e){return{none:"No",part_time:"Part-time",full_time:"Full-time",live_in:"Live-in"}[e]||e}function Gl(e){const t=Ul(e),n=$l(e),a=function(e,t,n){return{butlerPantry:Xl(e,t),guestAutonomy:ec(e,n),soundLock:tc(e,n),wetFeetIntercept:nc(e,t),opsCore:ac(e,t)}}(e,t,n),i=ic(e),r=rc(e),o=function(e){let t=0,n=0;const a=[e.propertyContext,e.householdProfile,e.entertainingProfile,e.staffingProfile,e.privacyProfile,e.kitchenProfile,e.wellnessProfile,e.specialRequirements];for(const i of a){const e=Object.keys(i);n+=e.length;for(const n of e){const e=i[n];void 0===e||null===e||""===e||Array.isArray(e)&&0===e.length||t++}}return Math.round(t/n*100)}(e);return{operatingModel:t,lifestylePriorities:n,bridgeConfig:a,uniqueRequirements:i,recommendedPreset:r,confidenceScore:o,warnings:oc(e,t,n)}}function Ul(e){return{typology:Wl(e.propertyContext.residenceType),entertainingLoad:Vl(e.entertainingProfile.frequency),staffingLevel:Kl(e.staffingProfile.preference),privacyPosture:Yl(e.privacyProfile.preference),wetProgram:Zl(e.wellnessProfile)}}function Wl(e){return{primary:"single_family",secondary:"single_family",vacation:"vacation",winter:"winter",investment:"multi_family"}[e]||"single_family"}function Vl(e){return{rarely:"rare",occasionally:"quarterly",regularly:"monthly",frequently:"weekly"}[e]||"monthly"}function Kl(e){return{self_sufficient:"none",occasional:"none",regular:"part_time",full_service:"full_time",estate:"live_in"}[e]||"none"}function Yl(e){return{welcoming:"open",selective:"balanced",formal:"formal",sanctuary:"private"}[e]||"balanced"}function Zl(e){const{interest:t,poolDesired:n,spaFeatures:a}=e;return"resort"===t||"dedicated"===t?"full_wellness":n&&a.length>0?"pool_spa":n?"pool_only":"none"}function $l(e){return{chefLedCooking:(a=e.kitchenProfile,"serious"===a.cookingStyle||"professional"===a.cookingStyle||a.separateCateringKitchen||"staff"===a.primaryCook),multiFamilyHosting:Ql(e),lateNightMedia:e.privacyProfile.lateNightMediaUse,homeOffice:(n=e.privacyProfile.workFromHome,"primary"===n||"executive"===n),fitnessRecovery:(t=e.wellnessProfile,"regular"===t.fitnessRoutine||"intensive"===t.fitnessRoutine||t.spaFeatures.length>=2),poolEntertainment:Jl(e)};var t,n,a}function Ql(e){return e.privacyProfile.multiGenerationalHosting||"multi_generational"===e.householdProfile.composition||"blended_family"===e.householdProfile.composition||"frequently"===e.privacyProfile.guestStayFrequency&&"overnight"!==e.privacyProfile.typicalGuestStayDuration}function Jl(e){return e.wellnessProfile.poolDesired&&e.entertainingProfile.outdoorEntertainingImportance>=4}function Xl(e,t){return e.entertainingProfile.cateringSupport||e.entertainingProfile.formalDiningImportance>=4||e.kitchenProfile.separateCateringKitchen||"weekly"===t.entertainingLoad&&"open"!==t.privacyPosture}function ec(e,t){return t.multiFamilyHosting||e.privacyProfile.separateGuestAccess||"extended"===e.privacyProfile.typicalGuestStayDuration||"week"===e.privacyProfile.typicalGuestStayDuration}function tc(e,t){return t.lateNightMedia||e.privacyProfile.mediaRoom||e.specialRequirements.recordingStudio||e.specialRequirements.musicRoom}function nc(e,t){return"none"!==t.wetProgram||e.wellnessProfile.poolDesired||e.wellnessProfile.spaFeatures.includes("hot_tub")}function ac(e,t){return"none"!==t.staffingLevel||"heavy"===e.staffingProfile.packageDeliveryVolume||"minimal"!==e.staffingProfile.securityRequirements}function ic(e){const t=[];for(const n of e.householdProfile.pets)"dog"===n.type.toLowerCase()&&"small"!==n.size&&(t.push({id:"pet-".concat(n.type,"-wash"),type:"addition",category:"pets",description:"Dog wash station for ".concat(n.size||"medium/large"," ").concat(n.type),spaceCode:"DOGWASH",estimatedSF:40,adjacencyNeeds:["MUD","GAR"],priority:"preferred",sourceQuestion:"householdProfile.pets"}),t.push({id:"pet-".concat(n.type,"-run"),type:"addition",category:"pets",description:"Dog run access from mudroom",priority:"preferred",sourceQuestion:"householdProfile.pets"}));if(e.entertainingProfile.wineCollection&&e.entertainingProfile.wineBottleCount){const n=e.entertainingProfile.wineBottleCount;let a=110;n>500&&(a=200),n>1e3&&(a=350),n>2e3&&(a=500),t.push({id:"wine-expansion",type:"modification",category:"entertaining",description:"Expanded wine storage for ".concat(n," bottles"),spaceCode:"WINE",estimatedSF:a,adjacencyNeeds:["DR","SCUL"],priority:"required",sourceQuestion:"entertainingProfile.wineBottleCount"})}if(e.specialRequirements.artCollection&&(t.push({id:"art-gallery",type:"modification",category:"special",description:"Gallery-quality wall space and lighting for art collection",adjacencyNeeds:["FOY","GR"],priority:e.specialRequirements.artClimateControl?"required":"preferred",sourceQuestion:"specialRequirements.artCollection"}),e.specialRequirements.artClimateControl&&t.push({id:"art-climate",type:"addition",category:"special",description:"Climate-controlled art storage",spaceCode:"ARTSTORE",estimatedSF:150,priority:"required",sourceQuestion:"specialRequirements.artClimateControl"})),e.specialRequirements.musicRoom&&t.push({id:"music-room",type:"addition",category:"special",description:"Sound-isolated music room",spaceCode:"MUSIC",estimatedSF:250,adjacencyNeeds:["MEDIA"],priority:"required",sourceQuestion:"specialRequirements.musicRoom"}),e.specialRequirements.recordingStudio&&t.push({id:"recording-studio",type:"addition",category:"special",description:"Professional recording studio with control room",spaceCode:"STUDIO",estimatedSF:400,priority:"required",sourceQuestion:"specialRequirements.recordingStudio"}),e.specialRequirements.workshop&&t.push({id:"workshop",type:"addition",category:"special",description:"Workshop/maker space",spaceCode:"WORKSHOP",estimatedSF:300,adjacencyNeeds:["GAR"],priority:"preferred",sourceQuestion:"specialRequirements.workshop"}),e.wellnessProfile.carCollection){const n=e.wellnessProfile.garageBays;n>4&&t.push({id:"car-collection",type:"modification",category:"automotive",description:"Expanded garage for ".concat(n," vehicles with display area"),spaceCode:"GAR",estimatedSF:250*n,priority:"required",sourceQuestion:"wellnessProfile.garageBays"})}e.specialRequirements.safe_room&&t.push({id:"safe-room",type:"addition",category:"security",description:"Secure safe room / panic room",spaceCode:"SAFE",estimatedSF:100,adjacencyNeeds:["PRI"],priority:"required",sourceQuestion:"specialRequirements.safe_room"}),(e.householdProfile.mobilityConsiderations||e.householdProfile.elderlyResidents)&&(t.push({id:"accessibility",type:"modification",category:"accessibility",description:"Elevator and accessible design throughout",priority:"required",sourceQuestion:"householdProfile.mobilityConsiderations"}),t.push({id:"main-level-suite",type:"modification",category:"accessibility",description:"Full suite capability on main level",adjacencyNeeds:["GYM","WELLNESS"],priority:"required",sourceQuestion:"householdProfile.elderlyResidents"}));for(const n of e.specialRequirements.customSpaces)t.push({id:"custom-".concat(n.name.toLowerCase().replace(/\s+/g,"-")),type:"addition",category:"custom",description:n.description,estimatedSF:n.estimatedSF,adjacencyNeeds:n.adjacencyNeeds?[n.adjacencyNeeds]:void 0,priority:"preferred",sourceQuestion:"specialRequirements.customSpaces"});return e.privacyProfile.clientMeetingsAtHome&&t.push({id:"executive-office",type:"modification",category:"work",description:"Executive office with separate visitor access",spaceCode:"OFF",estimatedSF:300,adjacencyNeeds:["FOY"],priority:"required",sourceQuestion:"privacyProfile.clientMeetingsAtHome"}),t}function rc(e){const t=e.propertyContext.estimatedSF,n=function(e){let t=0;"multi_generational"===e.householdProfile.composition&&(t+=2);"blended_family"===e.householdProfile.composition&&(t+=1);e.householdProfile.elderlyResidents&&(t+=1);e.householdProfile.pets.length>1&&(t+=1);"frequently"===e.entertainingProfile.frequency&&(t+=2);"grand"===e.entertainingProfile.maxEventScale&&(t+=2);e.entertainingProfile.wineCollection&&(t+=1);"estate"===e.staffingProfile.preference&&(t+=2);"full_service"===e.staffingProfile.preference&&(t+=1);"resort"===e.wellnessProfile.interest&&(t+=2);e.wellnessProfile.spaFeatures.length>=3&&(t+=1);e.specialRequirements.artClimateControl&&(t+=1);e.specialRequirements.recordingStudio&&(t+=2);e.specialRequirements.safe_room&&(t+=1);return t+=e.specialRequirements.customSpaces.length,t}(e);return t<=12e3&&n<=3?"10k":t<=17e3&&n<=4?"15k":t<=22e3?"20k":"custom"}function oc(e,t,n){const a=[];return"private"===t.privacyPosture&&n.multiFamilyHosting&&a.push("Private posture conflicts with multi-family hosting. Consider redesigning guest circulation to maintain primary suite sanctuary."),"grand"===e.entertainingProfile.maxEventScale&&"none"===t.staffingLevel&&a.push("Grand-scale entertaining (50+ guests) without staff may create service bottlenecks. Consider at least part-time staff or enhanced self-service design."),n.lateNightMedia&&"private"===t.privacyPosture&&a.push("Late-night media use requires sound lock vestibule to protect bedroom acoustics. Ensure media room is not adjacent to primary suite."),"full_wellness"===t.wetProgram&&"winter"===t.typology&&a.push("Full wellness program in winter residence requires enhanced MEP for humidity control. Budget for dedicated dehumidification systems."),(e.householdProfile.elderlyResidents||e.householdProfile.mobilityConsiderations)&&e.propertyContext.numberOfLevels>1&&a.push("Multi-level home with accessibility needs requires elevator. Also ensure main-level suite capability."),e.wellnessProfile.carCollection&&e.wellnessProfile.garageBays<4&&a.push("Car collection indicated but garage bays seem insufficient. Recommend minimum 4+ bays with climate control."),e.specialRequirements.artCollection&&!e.specialRequirements.artClimateControl&&a.push("Significant art collection may require climate control for preservation. Consider adding climate-controlled storage."),e.privacyProfile.clientMeetingsAtHome&&!e.privacyProfile.separateGuestAccess&&a.push("Client meetings at home should have separate visitor routing. Office should connect to foyer without crossing family spaces."),a}const sc=[{id:"10k",name:"10,000 SF",targetSF:1e4,description:"2-level | 4 bedrooms | no basement | lap pool scenario",available:!0,spaces:[{id:"s1",code:"FOY",name:"Foyer / Gallery + coat + powder",targetSF:420,zone:"Arrival + Formal",level:1,rationale:"Sets luxury arrival and art wall; controls privacy"},{id:"s2",code:"OFF",name:"Private Office",targetSF:220,zone:"Arrival + Formal",level:1,rationale:"Quiet spur for meetings without entering family areas"},{id:"s3",code:"GR",name:"Great Room (formal)",targetSF:520,zone:"Arrival + Formal",level:1,rationale:"Primary showcase room; accommodates large seating group"},{id:"s4",code:"DR",name:"Formal Dining",targetSF:320,zone:"Arrival + Formal",level:1,rationale:"Seats 10-12 with proper circulation and service access"},{id:"s5",code:"WINE",name:"Wine Storage",targetSF:110,zone:"Arrival + Formal",level:1,rationale:"Adjacent to dining; temperature control and presentation"},{id:"s6",code:"FR",name:"Family Room (hub)",targetSF:520,zone:"Family Hub",level:1,rationale:"Daily distributor; adjacency to library and buffered media"},{id:"s7",code:"KIT",name:"Kitchen",targetSF:380,zone:"Family Hub",level:1,rationale:"High-function chef kitchen with island and tall glazing"},{id:"s8",code:"BKF",name:"Breakfast Nook",targetSF:150,zone:"Family Hub",level:1,rationale:"Morning light; daily meals without formal dining"},{id:"s9",code:"SCUL",name:"Scullery / Prep + pantry",targetSF:220,zone:"Family Hub",level:1,rationale:"Catering support, cleanup, overflow appliances"},{id:"s9b",code:"CHEF",name:"Chef's Kitchen (service)",targetSF:180,zone:"Service Core",level:1,rationale:"Discrete service kitchen for formal dining; buffered from dining room to control noise and smells"},{id:"s10",code:"LIB",name:"Library",targetSF:220,zone:"Family Hub",level:1,rationale:"Soft-use room; can close for quiet work/reading"},{id:"s11",code:"MEDIA",name:"Media / Theater (buffered)",targetSF:280,zone:"Family Hub",level:1,rationale:"High-use; close to family but acoustically controlled"},{id:"s12",code:"MUD",name:"Mudroom / Daily Entry",targetSF:180,zone:"Service Core",level:1,rationale:"Controls clutter; connects to scullery"},{id:"s13",code:"GYM",name:"Gym (daylight + views)",targetSF:260,zone:"Wellness",level:1,rationale:"Premium wellness requires daylight and outlook"},{id:"s14",code:"SPA",name:"Spa / Wellness",targetSF:220,zone:"Wellness",level:1,rationale:"Steam/sauna + massage nook; visual connection to pool"},{id:"s15",code:"POOLSUP",name:"Pool Support",targetSF:120,zone:"Wellness",level:1,rationale:"Keeps wet traffic out of main house"},{id:"s16",code:"GSL1",name:"Guest Suite (Level 1)",targetSF:460,zone:"Hospitality",level:1,rationale:"Ground-floor option for visitors/aging-in-place"},{id:"s17",code:"LAUN1",name:"Laundry (L1)",targetSF:140,zone:"Service Core",level:1,rationale:"Primary household laundry + utility sink"},{id:"s18",code:"MEP",name:"Mechanical / Storage / AV / IT",targetSF:320,zone:"Service Core",level:1,rationale:"No-basement requires robust above-grade support"},{id:"s19",code:"CIRC1",name:"Circulation + stair/lift allowance",targetSF:940,zone:"Circulation",level:1,rationale:"Comfortable galleries and non-linear connectors"},{id:"s20",code:"TERR",name:"Main Terrace / Outdoor Dining",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s21",code:"POOL",name:"Lap Pool + Deck",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s22",code:"PRI",name:"Primary Bedroom",targetSF:360,zone:"Primary Wing",level:2,rationale:"Luxury scale without excess; room for seating area"},{id:"s23",code:"PRIBATH",name:"Primary Bath",targetSF:260,zone:"Primary Wing",level:2,rationale:"Double vanity, wet room, daylight; correct fixture spacing"},{id:"s24",code:"PRICL",name:"Primary Closets (his/hers)",targetSF:260,zone:"Primary Wing",level:2,rationale:"Proper dressing corridors + island storage"},{id:"s25",code:"PRILNG",name:"Primary Lounge",targetSF:180,zone:"Primary Wing",level:2,rationale:"Private decompression away from family hub"},{id:"s26",code:"LAND",name:"Landing (daylit)",targetSF:520,zone:"Guest Wing Node",level:2,rationale:"Compact node; avoids long hall"},{id:"s27",code:"GUEST1",name:"Guest Suite (L2) #1",targetSF:340,zone:"Guest Wing Node",level:2,rationale:"True suite proportions; accommodates queen/king"},{id:"s28",code:"GUEST2",name:"Guest Suite (L2) #2",targetSF:340,zone:"Guest Wing Node",level:2,rationale:"Consistent comfort for long stays"},{id:"s29",code:"LAUN2",name:"Laundry + linen (L2)",targetSF:140,zone:"Support",level:2,rationale:"Reduces vertical laundry traffic; supports suites"},{id:"s30",code:"MEP2",name:"Storage / IT (L2)",targetSF:120,zone:"Support",level:2,rationale:"No-basement systems and seasonal storage"},{id:"s31",code:"CIRC2",name:"Corridors (generous)",targetSF:1040,zone:"Circulation",level:2,rationale:"Short connectors; no long corridors"},{id:"s32",code:"CORE2",name:"Stair / lift distribution",targetSF:440,zone:"Circulation",level:2,rationale:"Vertical core allowance within Level 2 target"}],adjacencyMatrix:[{fromSpaceCode:"FOY",toSpaceCode:"OFF",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GR",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"FOY",toSpaceCode:"WINE",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"CHEF",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SCUL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MUD",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"LIB",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"TERR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GYM",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SPA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"POOL",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"GR",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"DR",relationship:"S"},{fromSpaceCode:"GR",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"GR",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"FOY",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"WINE",relationship:"A"},{fromSpaceCode:"DR",toSpaceCode:"CHEF",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"DR",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"CHEF",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"CHEF",toSpaceCode:"FOY",relationship:"S"},{fromSpaceCode:"WINE",toSpaceCode:"DR",relationship:"A"},{fromSpaceCode:"WINE",toSpaceCode:"SCUL",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"LIB",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"MEDIA",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"KIT",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"BKF",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"CHEF",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"MUD",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SCUL",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"CHEF",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"WINE",relationship:"B"},{fromSpaceCode:"MUD",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"MUD",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"GYM",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"SPA",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"MEDIA",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST1",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST2",relationship:"S"}],nodes:[{id:"node-1",name:"Node 1: Front Gallery + Formal",description:"Arrival, formal entertaining, and office",spaceCodes:["FOY","OFF","GR","DR","WINE"]},{id:"node-2",name:"Node 2: Family Hub + Service + Wellness",description:"Daily living, dual-kitchen service, wellness, and outdoor",spaceCodes:["FR","KIT","BKF","CHEF","SCUL","MUD","LIB","MEDIA","TERR","GYM","SPA","POOL"]}],crossLinks:[{id:"cl-1",number:1,name:"Formal View Axis",description:"Great Room to Terrace",fromSpaceCode:"GR",toSpaceCode:"TERR",purpose:"Near connection for formal view"},{id:"cl-2",number:2,name:"Wine Service Link",description:"Wine to Scullery",fromSpaceCode:"WINE",toSpaceCode:"SCUL",purpose:"Buffered service connection"},{id:"cl-3",number:3,name:"Daily Connector",description:"Foyer to Family",fromSpaceCode:"FOY",toSpaceCode:"FR",purpose:"Buffered daily connector"}],bridgeConfig:{butlerPantry:!0,guestAutonomy:!0,soundLock:!0,wetFeetIntercept:!0,opsCore:!0},bubbleDiagramCode:'graph LR\n  EXT["Exterior Arrival / Entry"]\n  FOY["Foyer / Gallery"]\n  CORE["Main Stair / Lift Core"]\n\n  OFF["Private Office (visitor entry)"]\n  GR["Great Room (formal)"]\n  DR["Formal Dining"]\n  WINE["Wine Storage"]\n\n  FR["Family Room (hub)"]\n  KIT["Show Kitchen (family)"]\n  BKF["Breakfast Nook"]\n  CHEF["Chef\'s Kitchen (service)"]\n  SCUL["Scullery / Prep"]\n  MUD["Mudroom / Daily Entry"]\n  LIB["Library"]\n  MEDIA["Media / Theater (buffered)"]\n\n  TERR["Main Terrace / Outdoor Dining"]\n  GYM["Gym (daylight + views)"]\n  SPA["Spa / Wellness"]\n  POOL["Lap Pool + Deck"]\n\n  PRI["Primary Suite (L2)"]\n  LAND["Landing (daylit)"]\n  G1["Guest Suite (L2) #1"]\n  G2["Guest Suite (L2) #2"]\n\n  EXT --\x3e FOY --\x3e CORE\n\n  subgraph N1[Node 1: Front Gallery + Formal]\n    FOY\n    OFF\n    GR\n    DR\n    WINE\n  end\n\n  subgraph N2[Node 2: Family Hub + Service + Wellness]\n    FR\n    KIT\n    BKF\n    CHEF\n    SCUL\n    MUD\n    LIB\n    MEDIA\n    TERR\n    GYM\n    SPA\n    POOL\n  end\n\n  subgraph L2A[Level 2: Primary Wing]\n    PRI\n  end\n\n  subgraph L2B[Level 2: Guest Wing Node]\n    LAND\n    G1\n    G2\n  end\n\n  FOY --\x3e OFF\n  FOY --\x3e GR\n  FOY --\x3e DR --\x3e WINE\n  FOY --\x3e|B| KIT\n  FOY --\x3e|B| FR\n\n  FR --\x3e KIT --\x3e BKF\n  KIT --\x3e SCUL\n  KIT --\x3e|N| CHEF\n  CHEF --\x3e SCUL\n  DR --\x3e|B| CHEF\n  MUD --\x3e SCUL\n  FR --\x3e LIB\n  FR --\x3e MEDIA\n  FR --\x3e TERR\n  KIT --\x3e|N| TERR\n\n  FR --\x3e GYM --\x3e SPA --\x3e POOL\n  TERR --\x3e POOL\n\n  GR --\x3e|N| TERR\n  WINE --\x3e|Service| SCUL\n\n  CORE --\x3e PRI\n  CORE --\x3e LAND\n  LAND --\x3e G1\n  LAND --\x3e G2',twoNodeDescription:"Two-Node Circulation Strategy (10,000 SF)\n\nNode 1: Front Gallery + Formal\n- Primary arrival and formal presentation zone\n- Contains: Foyer/Gallery, Private Office, Great Room, Formal Dining, Wine Storage\n- Character: Formal, curated, impressive first impression\n- Private Office has exterior visitor door for meetings without entering family areas\n\nNode 2: Family Hub + Service + Wellness\n- Daily living, dual-kitchen service, and wellness zone\n- Contains: Family Room, Show Kitchen, Breakfast, Chef's Kitchen, Scullery, Mudroom, Library, Media, Gym, Spa, Pool, Terrace\n- Character: Casual, functional, activity-based\n- Media/Theater is buffered acoustically from family areas\n\nDual-Kitchen Strategy:\n- Show Kitchen (KIT): Family \"performer\" kitchen open to living spaces; island-centric, guest-friendly\n- Chef's Kitchen (CHEF): Discrete service kitchen for formal dining events; buffered from Dining Room to control noise/smells; adjacent to Scullery\n\nLevel 2 Organization:\n- Primary Wing: Separated for privacy with lounge for decompression\n- Guest Wing Node: Landing serves as compact node avoiding long corridors\n- Two guest suites with consistent comfort standards\n\nCross-Links (Controlled Connections):\n1. Great Room to Terrace: Near connection for formal view axis\n2. Wine to Scullery: Buffered service connection\n3. Foyer to Family: Buffered daily connector\n4. Dining to Chef's Kitchen: Buffered service connection\n\nKey Design Principles:\n- No basement: robust above-grade mechanical/storage\n- Wellness spaces require daylight and pool connection\n- Library and Media adjacent to Family but with acoustic control\n- Dual-kitchen system separates family daily use from formal service"},{id:"15k",name:"15,000 SF",targetSF:15e3,description:"2-level | 5 bedrooms | no basement | lap pool + acreage",available:!0,spaces:[{id:"s1",code:"FOY",name:"Foyer / Gallery + coat + powder",targetSF:520,zone:"Arrival + Formal",level:1,rationale:"Arrival sequence and art wall; controls privacy"},{id:"s2",code:"OFF",name:"Private Office",targetSF:260,zone:"Arrival + Formal",level:1,rationale:"Visitor-ready without entering family zones"},{id:"s3",code:"GR",name:"Great Room (formal)",targetSF:680,zone:"Arrival + Formal",level:1,rationale:"Showcase volume; formal entertaining anchor"},{id:"s4",code:"DR",name:"Formal Dining",targetSF:380,zone:"Arrival + Formal",level:1,rationale:"Seats 12 with proper service clearances"},{id:"s5",code:"WINE",name:"Wine Storage / Tasting",targetSF:180,zone:"Arrival + Formal",level:1,rationale:"Adjacent to DR; tasting table and display"},{id:"s6",code:"FR",name:"Family Room (hub)",targetSF:640,zone:"Family Hub",level:1,rationale:"Daily distributor adjacent to LIB and buffered MEDIA"},{id:"s7",code:"KIT",name:"Kitchen",targetSF:460,zone:"Family Hub",level:1,rationale:"Chef-grade kitchen; island and appliance wall"},{id:"s8",code:"BKF",name:"Breakfast Nook",targetSF:180,zone:"Family Hub",level:1,rationale:"Daily meals with light and terrace proximity"},{id:"s9",code:"SCUL",name:"Scullery / Prep + pantry",targetSF:300,zone:"Family Hub",level:1,rationale:"Catering support, cleanup, overflow appliances"},{id:"s9b",code:"CHEF",name:"Chef's Kitchen (service)",targetSF:220,zone:"Service Core",level:1,rationale:"Discrete service kitchen for formal dining; buffered from dining room to control noise and smells"},{id:"s10",code:"MUD",name:"Mudroom / Daily Entry",targetSF:220,zone:"Family Hub",level:1,rationale:"Daily entry; direct to SCUL"},{id:"s11",code:"LIB",name:"Library",targetSF:260,zone:"Family Hub",level:1,rationale:"High-use quiet room at the hub edge"},{id:"s12",code:"MEDIA",name:"Media / Theater (buffered)",targetSF:360,zone:"Family Hub",level:1,rationale:"Adjacent for usage but acoustically controlled"},{id:"s13",code:"WLINK",name:"Wellness Link (room)",targetSF:160,zone:"Wellness",level:1,rationale:"A room-like connector; avoids corridor feel and buffers noise"},{id:"s14",code:"GYM",name:"Gym (daylight + views)",targetSF:320,zone:"Wellness",level:1,rationale:"View-facing fitness space"},{id:"s15",code:"SPA",name:"Spa / Wellness (daylight + views)",targetSF:300,zone:"Wellness",level:1,rationale:"Steam/sauna + treatment; visual connection to pool"},{id:"s16",code:"POOLSUP",name:"Pool Support",targetSF:160,zone:"Wellness",level:1,rationale:"Wet support keeps interiors dry"},{id:"s17",code:"GSL1",name:"Guest Suite (Level 1)",targetSF:520,zone:"Hospitality",level:1,rationale:"Main-level guest accommodation / accessibility"},{id:"s18",code:"LAUN1",name:"Laundry (L1)",targetSF:160,zone:"Service Core",level:1,rationale:"Primary laundry and utility sink"},{id:"s19",code:"MEP",name:"Mechanical / Storage / AV / IT",targetSF:420,zone:"Service Core",level:1,rationale:"No-basement systems and storage"},{id:"s20",code:"CIRC1",name:"Circulation + stair/lift allowance",targetSF:2520,zone:"Circulation",level:1,rationale:"Generous galleries and node-based connectors"},{id:"s21",code:"TERR",name:"Main Terrace / Outdoor Living",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s22",code:"POOL",name:"Lap Pool + Deck",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s23",code:"PRI",name:"Primary Bedroom",targetSF:440,zone:"Primary Wing",level:2,rationale:"Sleeping + seating zone with outlook; quiet separation"},{id:"s24",code:"PRIBATH",name:"Primary Bath",targetSF:340,zone:"Primary Wing",level:2,rationale:"Wet room + tub; daylight"},{id:"s25",code:"PRICL",name:"Primary Closets (his/hers)",targetSF:420,zone:"Primary Wing",level:2,rationale:"Dressing experience with islands and storage"},{id:"s26",code:"PRILNG",name:"Primary Lounge",targetSF:240,zone:"Primary Wing",level:2,rationale:"Private decompression/reading"},{id:"s27",code:"LAND",name:"Landing (daylit)",targetSF:760,zone:"Guest Suites",level:2,rationale:"Compact node; avoids long corridors"},{id:"s28",code:"GUEST1",name:"Guest Suite (L2) #1",targetSF:420,zone:"Guest Suites",level:2,rationale:"True suite proportions; long-stay comfort"},{id:"s29",code:"GUEST2",name:"Guest Suite (L2) #2",targetSF:420,zone:"Guest Suites",level:2,rationale:"Consistent luxury standard"},{id:"s30",code:"GUEST3",name:"Guest Suite (L2) #3",targetSF:420,zone:"Guest Suites",level:2,rationale:"Consistent luxury standard"},{id:"s31",code:"LAUN2",name:"Laundry + linen (L2)",targetSF:200,zone:"Support",level:2,rationale:"Reduces vertical traffic; supports suites"},{id:"s32",code:"MEP2",name:"Storage / IT (L2)",targetSF:180,zone:"Support",level:2,rationale:"No-basement systems and seasonal storage"},{id:"s33",code:"CORE2",name:"Stair/lift distribution + corridors",targetSF:2160,zone:"Circulation",level:2,rationale:"Generous landing and short connectors"}],adjacencyMatrix:[{fromSpaceCode:"FOY",toSpaceCode:"OFF",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GR",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"FOY",toSpaceCode:"WINE",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"CHEF",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SCUL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MUD",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"LIB",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"WLINK",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GYM",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SPA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"TERR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"POOL",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"GR",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"DR",relationship:"S"},{fromSpaceCode:"GR",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"GR",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"FOY",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"WINE",relationship:"A"},{fromSpaceCode:"DR",toSpaceCode:"CHEF",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"DR",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"CHEF",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"CHEF",toSpaceCode:"FOY",relationship:"S"},{fromSpaceCode:"WINE",toSpaceCode:"DR",relationship:"A"},{fromSpaceCode:"WINE",toSpaceCode:"SCUL",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"LIB",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"MEDIA",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"WLINK",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"KIT",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"BKF",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"CHEF",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"MUD",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SCUL",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"CHEF",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"WINE",relationship:"B"},{fromSpaceCode:"MUD",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"MUD",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"WLINK",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"WLINK",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"WLINK",toSpaceCode:"SPA",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"WLINK",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"SPA",relationship:"N"},{fromSpaceCode:"SPA",toSpaceCode:"WLINK",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"GYM",relationship:"N"},{fromSpaceCode:"SPA",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"MEDIA",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST1",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST2",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST3",relationship:"S"}],nodes:[{id:"node-1",name:"Node 1: Front Gallery + Formal",description:"Arrival, formal entertaining, and office",spaceCodes:["FOY","OFF","GR","DR","WINE"]},{id:"node-2",name:"Node 2: Family Hub + Service + Wellness",description:"Daily living, dual-kitchen service, wellness, and outdoor",spaceCodes:["FR","KIT","BKF","CHEF","SCUL","MUD","LIB","MEDIA","WLINK","GYM","SPA","TERR","POOL"]}],crossLinks:[{id:"cl-1",number:1,name:"Formal View Axis",description:"Great Room to Terrace",fromSpaceCode:"GR",toSpaceCode:"TERR",purpose:"Near connection for formal view"},{id:"cl-2",number:2,name:"Wine Service Link",description:"Wine to Scullery",fromSpaceCode:"WINE",toSpaceCode:"SCUL",purpose:"Buffered service connection"},{id:"cl-3",number:3,name:"Daily Connector",description:"Foyer to Family",fromSpaceCode:"FOY",toSpaceCode:"FR",purpose:"Buffered daily connector"}],bridgeConfig:{butlerPantry:!0,guestAutonomy:!0,soundLock:!0,wetFeetIntercept:!0,opsCore:!0},bubbleDiagramCode:'graph LR\n  EXT["Exterior Arrival / Entry"]\n  FOY["Foyer / Gallery"]\n  CORE["Main Stair / Lift Core"]\n\n  OFF["Private Office (visitor entry)"]\n  GR["Great Room (formal)"]\n  DR["Formal Dining"]\n  WINE["Wine Storage / Tasting"]\n\n  FR["Family Room (hub)"]\n  KIT["Show Kitchen (family)"]\n  BKF["Breakfast Nook"]\n  CHEF["Chef\'s Kitchen (service)"]\n  SCUL["Scullery / Prep"]\n  MUD["Mudroom / Daily Entry"]\n  LIB["Library"]\n  MEDIA["Media / Theater (buffered)"]\n\n  WLINK["Wellness Link (room)"]\n  GYM["Gym (daylight + views)"]\n  SPA["Spa / Wellness (daylight + views)"]\n  TERR["Main Terrace / Outdoor Living"]\n  POOL["Lap Pool + Deck"]\n\n  PRI["Primary Suite (L2)"]\n  LAND["Landing (daylit)"]\n  G1["Guest Suite (L2) #1"]\n  G2["Guest Suite (L2) #2"]\n  G3["Guest Suite (L2) #3"]\n\n  EXT --\x3e FOY --\x3e CORE\n\n  subgraph N1[Node 1: Front Gallery + Formal]\n    FOY\n    OFF\n    GR\n    DR\n    WINE\n  end\n\n  subgraph N2[Node 2: Family Hub + Service + Wellness]\n    FR\n    KIT\n    BKF\n    CHEF\n    SCUL\n    MUD\n    LIB\n    MEDIA\n    WLINK\n    GYM\n    SPA\n    TERR\n    POOL\n  end\n\n  subgraph L2[Level 2: Sleeping Level]\n    PRI\n    LAND\n    G1\n    G2\n    G3\n  end\n\n  FOY --\x3e OFF\n  FOY --\x3e GR\n  FOY --\x3e DR --\x3e WINE\n  FOY --\x3e|B| KIT\n  FOY --\x3e|B| FR\n\n  FR --\x3e KIT --\x3e BKF\n  KIT --\x3e SCUL\n  KIT --\x3e|N| CHEF\n  CHEF --\x3e SCUL\n  DR --\x3e|B| CHEF\n  MUD --\x3e SCUL\n  FR --\x3e LIB\n  FR --\x3e MEDIA\n  FR --\x3e TERR\n  KIT --\x3e|N| TERR\n\n  FR --\x3e WLINK\n  WLINK --\x3e GYM\n  WLINK --\x3e SPA --\x3e POOL\n  TERR --\x3e POOL\n\n  GR --\x3e|N| TERR\n  WINE --\x3e|Service| SCUL\n\n  CORE --\x3e PRI\n  CORE --\x3e LAND\n  LAND --\x3e G1\n  LAND --\x3e G2\n  LAND --\x3e G3',twoNodeDescription:"Two-Node Circulation Strategy (15,000 SF)\n\nNode 1: Front Gallery + Formal\n- Primary arrival and formal presentation zone\n- Contains: Foyer/Gallery, Private Office, Great Room, Formal Dining, Wine Storage/Tasting\n- Character: Formal, curated, impressive first impression\n- Private Office has exterior visitor door\n\nNode 2: Family Hub + Service + Wellness\n- Daily living, dual-kitchen service, and wellness zone\n- Contains: Family Room, Show Kitchen, Breakfast, Chef's Kitchen, Scullery, Mudroom, Library, Media, Wellness Link, Gym, Spa, Pool, Terrace\n- Character: Casual, functional, activity-based\n- WLINK is a room (not corridor) that connects to Gym and Spa only\n\nDual-Kitchen Strategy:\n- Show Kitchen (KIT): Family \"performer\" kitchen open to living spaces; island-centric, guest-friendly\n- Chef's Kitchen (CHEF): Discrete service kitchen for formal dining events; buffered from Dining Room to control noise/smells; adjacent to Scullery\n\nLevel 2 Organization:\n- Primary Wing: Full suite with lounge for private decompression\n- Guest Suites: Three suites accessed from daylit landing node\n- Compact circulation avoids long corridors\n\nCross-Links (Controlled Connections):\n1. Great Room to Terrace: Near connection (N) for formal view axis\n2. Wine to Scullery: Buffered (B) service connection\n3. Foyer to Family: Buffered (B) daily connector\n4. Dining to Chef's Kitchen: Buffered (B) service connection\n\nKey Corrections Applied:\n- Terrace relationships: GR and KIT are Near (N) to TERR\n- WLINK connects only to SPA/GYM (not bedrooms)\n- All S (Separate) pairs are in different nodes\n- Dual-kitchen system separates family daily use from formal service"},{id:"20k",name:"20,000 SF",targetSF:2e4,description:"2-level | 8 bedrooms | expanded amenities | no basement",available:!0,spaces:[{id:"s1",code:"FOY",name:"Foyer / Gallery + coat + powder",targetSF:650,zone:"Arrival + Formal",level:1,rationale:"Grand but controlled arrival; art wall and sightlines"},{id:"s2",code:"OFF",name:"Private Office",targetSF:280,zone:"Arrival + Formal",level:1,rationale:"Meetings without entering family zones"},{id:"s3",code:"GR",name:"Great Room (formal)",targetSF:800,zone:"Arrival + Formal",level:1,rationale:"Showcase volume; supports larger entertaining"},{id:"s4",code:"SAL",name:"Formal Lounge / Salon",targetSF:520,zone:"Arrival + Formal",level:1,rationale:"Secondary formal sitting; spreads entertaining load"},{id:"s5",code:"DR",name:"Formal Dining",targetSF:420,zone:"Arrival + Formal",level:1,rationale:"Seats 12-14; correct service clearances"},{id:"s6",code:"WINE",name:"Wine Storage / Tasting",targetSF:220,zone:"Arrival + Formal",level:1,rationale:"Tasting table + display; adjacent to DR"},{id:"s7",code:"FR",name:"Family Room (hub)",targetSF:760,zone:"Family Hub",level:1,rationale:"High-use distributor adjacent to LIB/MEDIA/BAR"},{id:"s8",code:"KIT",name:"Kitchen",targetSF:520,zone:"Family Hub",level:1,rationale:"Chef-grade kitchen; larger island and appliance wall"},{id:"s9",code:"BKF",name:"Breakfast Nook",targetSF:190,zone:"Family Hub",level:1,rationale:"Daily meals; terrace proximity"},{id:"s10",code:"SCUL",name:"Scullery / Catering Prep",targetSF:360,zone:"Family Hub",level:1,rationale:"Secondary kitchen functions for events"},{id:"s10b",code:"CHEF",name:"Chef's Kitchen (service)",targetSF:280,zone:"Service Core",level:1,rationale:"Discrete service kitchen for formal dining; buffered from dining room to control noise and smells"},{id:"s11",code:"MUD",name:"Mudroom / Daily Entry",targetSF:260,zone:"Family Hub",level:1,rationale:"Direct adjacency to service spine (SCUL)"},{id:"s12",code:"LIB",name:"Library",targetSF:320,zone:"Family Hub",level:1,rationale:"Quiet edge to hub"},{id:"s13",code:"MEDIA",name:"Media / Theater (buffered)",targetSF:420,zone:"Family Hub",level:1,rationale:"High performance A/V; sound lock"},{id:"s14",code:"BAR",name:"Bar / Lounge",targetSF:280,zone:"Family Hub",level:1,rationale:"Social node; supports outdoor living"},{id:"s15",code:"GAME",name:"Game / Recreation",targetSF:420,zone:"Family Hub",level:1,rationale:"Dedicated activity room"},{id:"s16",code:"GYM",name:"Gym (daylight + views)",targetSF:380,zone:"Wellness",level:1,rationale:"Premium fitness space with glazing"},{id:"s17",code:"SPA",name:"Spa / Wellness (daylight + views)",targetSF:360,zone:"Wellness",level:1,rationale:"Steam/sauna + treatment; adjacency to pool"},{id:"s18",code:"POOLSUP",name:"Pool Support",targetSF:180,zone:"Wellness",level:1,rationale:"Wet support to keep interiors dry"},{id:"s19",code:"GSL1A",name:"Guest Suite 1 (L1)",targetSF:520,zone:"Hospitality",level:1,rationale:"Main-level guest accommodation"},{id:"s20",code:"GSL1B",name:"Guest Suite 2 (L1)",targetSF:520,zone:"Hospitality",level:1,rationale:"Second suite enables simultaneous hosting"},{id:"s21",code:"LAUN1",name:"Laundry (L1)",targetSF:180,zone:"Service Core",level:1,rationale:"Primary laundry; utility sink + folding"},{id:"s22",code:"MEP",name:"Mechanical / Storage / AV / IT",targetSF:520,zone:"Service Core",level:1,rationale:"No-basement requires robust above-grade support"},{id:"s23",code:"CIRC1",name:"Circulation + stair/lift allowance",targetSF:2920,zone:"Circulation",level:1,rationale:"Generous galleries; node-based plan"},{id:"s24",code:"TERR",name:"Main Terrace / Outdoor Living",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s25",code:"POOL",name:"Lap Pool + Deck",targetSF:0,zone:"Outdoor",level:1,rationale:"Exterior - not counted in SF"},{id:"s26",code:"PRI",name:"Primary Bedroom",targetSF:520,zone:"Primary Wing",level:2,rationale:"Outlook and privacy; separated from kids/guest circulation"},{id:"s27",code:"PRIBATH",name:"Primary Bath",targetSF:420,zone:"Primary Wing",level:2,rationale:"Wet room + tub; daylight"},{id:"s28",code:"PRICL",name:"Primary Closets (his/hers)",targetSF:520,zone:"Primary Wing",level:2,rationale:"Dressing experience"},{id:"s29",code:"PRILNG",name:"Primary Lounge",targetSF:280,zone:"Primary Wing",level:2,rationale:"Private decompression"},{id:"s30",code:"LAND",name:"Landing (daylit)",targetSF:980,zone:"Guest Suites",level:2,rationale:"Node distribution; avoids long corridors"},{id:"s31",code:"GUEST1",name:"Guest Suite (L2) #1",targetSF:360,zone:"Guest Suites",level:2,rationale:"Long-stay comfort"},{id:"s32",code:"GUEST2",name:"Guest Suite (L2) #2",targetSF:360,zone:"Guest Suites",level:2,rationale:"Long-stay comfort"},{id:"s33",code:"GUEST3",name:"Guest Suite (L2) #3",targetSF:360,zone:"Guest Suites",level:2,rationale:"Long-stay comfort"},{id:"s34",code:"GUEST4",name:"Guest Suite (L2) #4",targetSF:360,zone:"Guest Suites",level:2,rationale:"Long-stay comfort"},{id:"s35",code:"PLAY",name:"Kids Playroom (L2)",targetSF:320,zone:"Kids Zone",level:2,rationale:"Buffer between landing and kids sleeping"},{id:"s36",code:"KIDS",name:"Kids Room / Bunk Room (L2)",targetSF:300,zone:"Kids Zone",level:2,rationale:"Bunks + lounge; close to playroom for supervision"},{id:"s37",code:"HW",name:"Homework / Loft Perch (L2)",targetSF:220,zone:"Kids Zone",level:2,rationale:"After-school use; reduces clutter"},{id:"s38",code:"LAUN2",name:"Laundry + linen (L2)",targetSF:220,zone:"Support",level:2,rationale:"Supports guest suites; reduces vertical traffic"},{id:"s39",code:"MEP2",name:"Storage / IT (L2)",targetSF:200,zone:"Support",level:2,rationale:"No-basement systems"},{id:"s40",code:"CORE2",name:"Stair/lift distribution + corridors",targetSF:2580,zone:"Circulation",level:2,rationale:"Generous landing and short connectors"}],adjacencyMatrix:[{fromSpaceCode:"FOY",toSpaceCode:"OFF",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GR",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"SAL",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"DR",relationship:"N"},{fromSpaceCode:"FOY",toSpaceCode:"WINE",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"FR",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"KIT",relationship:"B"},{fromSpaceCode:"FOY",toSpaceCode:"CHEF",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SCUL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MUD",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"LIB",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"MEDIA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"BAR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GAME",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"TERR",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GYM",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"SPA",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"POOL",relationship:"S"},{fromSpaceCode:"FOY",toSpaceCode:"GSL1A",relationship:"A"},{fromSpaceCode:"FOY",toSpaceCode:"GSL1B",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"OFF",toSpaceCode:"GR",relationship:"S"},{fromSpaceCode:"OFF",toSpaceCode:"SAL",relationship:"S"},{fromSpaceCode:"GR",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"GR",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SAL",toSpaceCode:"FOY",relationship:"A"},{fromSpaceCode:"DR",toSpaceCode:"FOY",relationship:"N"},{fromSpaceCode:"DR",toSpaceCode:"WINE",relationship:"A"},{fromSpaceCode:"DR",toSpaceCode:"CHEF",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"DR",relationship:"B"},{fromSpaceCode:"CHEF",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"CHEF",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"CHEF",toSpaceCode:"FOY",relationship:"S"},{fromSpaceCode:"WINE",toSpaceCode:"DR",relationship:"A"},{fromSpaceCode:"WINE",toSpaceCode:"SCUL",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"LIB",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"MEDIA",relationship:"B"},{fromSpaceCode:"FR",toSpaceCode:"BAR",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"FR",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"FOY",relationship:"B"},{fromSpaceCode:"KIT",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"BKF",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"KIT",toSpaceCode:"CHEF",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"MUD",relationship:"N"},{fromSpaceCode:"KIT",toSpaceCode:"TERR",relationship:"N"},{fromSpaceCode:"SCUL",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"CHEF",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"SCUL",toSpaceCode:"WINE",relationship:"B"},{fromSpaceCode:"MUD",toSpaceCode:"SCUL",relationship:"A"},{fromSpaceCode:"MUD",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"BAR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"BAR",toSpaceCode:"GAME",relationship:"A"},{fromSpaceCode:"BAR",toSpaceCode:"TERR",relationship:"A"},{fromSpaceCode:"GAME",toSpaceCode:"BAR",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"GYM",toSpaceCode:"SPA",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"GYM",relationship:"A"},{fromSpaceCode:"SPA",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"FR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"BAR",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"TERR",toSpaceCode:"GR",relationship:"N"},{fromSpaceCode:"TERR",toSpaceCode:"KIT",relationship:"N"},{fromSpaceCode:"MEDIA",toSpaceCode:"PRI",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST1",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST2",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST3",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"GUEST4",relationship:"S"},{fromSpaceCode:"MEDIA",toSpaceCode:"KIDS",relationship:"S"}],nodes:[{id:"node-1",name:"Node 1: Front Gallery + Formal",description:"Arrival, formal entertaining, office, and main-level guest suites",spaceCodes:["FOY","OFF","GR","SAL","DR","WINE","GSL1A","GSL1B"]},{id:"node-2",name:"Node 2: Family Hub + Entertainment + Service",description:"Daily living, dual-kitchen service, bar, game room, wellness, and outdoor",spaceCodes:["FR","KIT","BKF","CHEF","SCUL","MUD","LIB","MEDIA","BAR","GAME","TERR","GYM","SPA","POOL"]}],crossLinks:[{id:"cl-1",number:1,name:"Formal View Axis",description:"Great Room to Terrace",fromSpaceCode:"GR",toSpaceCode:"TERR",purpose:"Near connection for formal view"},{id:"cl-2",number:2,name:"Wine Service Link",description:"Wine to Scullery",fromSpaceCode:"WINE",toSpaceCode:"SCUL",purpose:"Buffered service connection"},{id:"cl-3",number:3,name:"Daily Connector",description:"Foyer to Family",fromSpaceCode:"FOY",toSpaceCode:"FR",purpose:"Buffered daily connector"},{id:"cl-4",number:4,name:"Entertainment Link",description:"Bar to Terrace",fromSpaceCode:"BAR",toSpaceCode:"TERR",purpose:"Adjacent outdoor entertaining"}],bridgeConfig:{butlerPantry:!0,guestAutonomy:!0,soundLock:!0,wetFeetIntercept:!0,opsCore:!0},bubbleDiagramCode:'graph LR\n  EXT["Exterior Arrival / Entry"]\n  FOY["Foyer / Gallery"]\n  CORE["Main Stair / Lift Core"]\n\n  OFF["Private Office (visitor entry)"]\n  GR["Great Room (formal)"]\n  SAL["Formal Lounge / Salon"]\n  DR["Formal Dining"]\n  WINE["Wine Storage / Tasting"]\n  GS1["Guest Suite (L1) #1"]\n  GS2["Guest Suite (L1) #2"]\n\n  FR["Family Room (hub)"]\n  KIT["Show Kitchen (family)"]\n  BKF["Breakfast Nook"]\n  CHEF["Chef\'s Kitchen (service)"]\n  SCUL["Scullery / Catering Prep"]\n  MUD["Mudroom / Daily Entry"]\n  LIB["Library"]\n  MEDIA["Media / Theater (buffered)"]\n  BAR["Bar / Lounge"]\n  GAME["Game / Recreation"]\n\n  TERR["Main Terrace / Outdoor Living"]\n  GYM["Gym (daylight + views)"]\n  SPA["Spa / Wellness (daylight + views)"]\n  POOL["Lap Pool + Deck"]\n\n  PRI["Primary Suite (L2)"]\n  LAND["Landing (daylit)"]\n  G1["Guest Suite (L2) #1"]\n  G2["Guest Suite (L2) #2"]\n  G3["Guest Suite (L2) #3"]\n  G4["Guest Suite (L2) #4"]\n  PLAY["Kids Playroom (L2)"]\n  KIDS["Kids Room / Bunk (L2)"]\n  HW["Homework / Loft (L2)"]\n\n  EXT --\x3e FOY --\x3e CORE\n\n  subgraph N1[Node 1: Front Gallery + Formal]\n    FOY\n    OFF\n    GR\n    SAL\n    DR\n    WINE\n    GS1\n    GS2\n  end\n\n  subgraph N2[Node 2: Family Hub + Entertainment + Service]\n    FR\n    KIT\n    BKF\n    CHEF\n    SCUL\n    MUD\n    LIB\n    MEDIA\n    BAR\n    GAME\n    TERR\n    GYM\n    SPA\n    POOL\n  end\n\n  subgraph L2[Level 2: Sleeping + Kids]\n    PRI\n    LAND\n    G1\n    G2\n    G3\n    G4\n    PLAY\n    KIDS\n    HW\n  end\n\n  FOY --\x3e OFF\n  FOY --\x3e GR\n  FOY --\x3e SAL\n  FOY --\x3e DR --\x3e WINE\n  FOY --\x3e GS1\n  FOY --\x3e GS2\n  FOY --\x3e|B| KIT\n  FOY --\x3e|B| FR\n\n  FR --\x3e KIT --\x3e BKF\n  KIT --\x3e SCUL\n  KIT --\x3e|N| CHEF\n  CHEF --\x3e SCUL\n  DR --\x3e|B| CHEF\n  MUD --\x3e SCUL\n  FR --\x3e LIB\n  FR --\x3e MEDIA\n  FR --\x3e BAR --\x3e GAME\n  FR --\x3e TERR\n  KIT --\x3e|N| TERR\n  BAR --\x3e TERR\n\n  FR --\x3e GYM --\x3e SPA --\x3e POOL\n  TERR --\x3e POOL\n\n  GR --\x3e|N| TERR\n  WINE --\x3e|Service| SCUL\n\n  CORE --\x3e PRI\n  CORE --\x3e LAND\n  LAND --\x3e G1\n  LAND --\x3e G2\n  LAND --\x3e G3\n  LAND --\x3e G4\n  LAND --\x3e PLAY --\x3e KIDS\n  LAND --\x3e HW',twoNodeDescription:"Two-Node Circulation Strategy (20,000 SF)\n\nNode 1: Front Gallery + Formal\n- Primary arrival and formal presentation zone\n- Contains: Foyer/Gallery, Private Office, Great Room, Salon, Formal Dining, Wine Storage, 2 Main-Level Guest Suites\n- Character: Grand, formal, visitor-ready\n- Salon provides secondary formal sitting to spread entertaining load\n- Two L1 guest suites enable simultaneous hosting\n\nNode 2: Family Hub + Entertainment + Service\n- Daily living, dual-kitchen service, entertainment, and wellness zone\n- Contains: Family Room, Show Kitchen, Breakfast, Chef's Kitchen, Scullery, Mudroom, Library, Media, Bar, Game Room, Terrace, Gym, Spa, Pool\n- Character: Casual, activity-based, family-oriented\n- Bar/Game Room form entertainment wing with terrace access\n- Mudroom is Adjacent to Scullery (service spine requirement)\n\nDual-Kitchen Strategy:\n- Show Kitchen (KIT): Family \"performer\" kitchen open to living spaces; island-centric, guest-friendly\n- Chef's Kitchen (CHEF): Discrete service kitchen for formal dining events; buffered from Dining Room to control noise/smells; adjacent to Scullery\n\nLevel 2 Organization:\n- Primary Wing: Isolated from kids/guest circulation with full lounge\n- Guest Suites: Four suites accessed from daylit landing node\n- Kids Zone: Playroom, Bunk Room, and Homework loft with supervision proximity\n\nCross-Links (Controlled Connections):\n1. Great Room to Terrace: Near connection (N) for formal view axis\n2. Wine to Scullery: Buffered (B) service connection\n3. Foyer to Family: Buffered (B) daily connector\n4. Bar to Terrace: Adjacent (A) for outdoor entertaining\n5. Dining to Chef's Kitchen: Buffered (B) service connection\n\nKey Corrections Applied:\n- FOY to KIT is Buffered (B)\n- MUD is Adjacent (A) to SCUL (service spine)\n- GR and KIT are Near (N) to TERR\n- Primary suite isolated from entertainment wing\n- Dual-kitchen system separates family daily use from formal service"},{id:"custom",name:"Custom",targetSF:0,description:"Define your own program with basement options",available:!0,spaces:[],adjacencyMatrix:[],nodes:[],crossLinks:[],bridgeConfig:{butlerPantry:!1,guestAutonomy:!1,soundLock:!1,wetFeetIntercept:!1,opsCore:!1},bubbleDiagramCode:"",twoNodeDescription:"Custom program allows full flexibility including basement allocation"}];function lc(e){return sc.find(t=>t.id===e)}const cc={rooms:[{id:"foy",name:"Foyer",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"gr",name:"Great Room",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"dr",name:"Dining Room",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"terr",name:"Terrace",zone:"outdoor",acousticZone:"zone_2",tags:["outdoor"],moduleId:"module-02"},{id:"kit",name:"Kitchen",zone:"family",acousticZone:"zone_2",tags:["show_kitchen"],moduleId:"module-01"},{id:"scul",name:"Scullery",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-01"},{id:"butler",name:"Butler Pantry",zone:"service",acousticZone:"zone_2",tags:["bridge"],moduleId:"module-01"},{id:"fr",name:"Family Room",zone:"family",acousticZone:"zone_1",tags:[],moduleId:"module-02"},{id:"pri",name:"Primary Bedroom",zone:"primary",acousticZone:"zone_0",tags:["primary_suite"],moduleId:"module-03"},{id:"pribath",name:"Primary Bath",zone:"primary",acousticZone:"zone_0",tags:["primary_suite"],moduleId:"module-03"},{id:"guest1",name:"Guest Suite 1",zone:"guest",acousticZone:"zone_0",tags:["guest"],moduleId:"module-04"},{id:"guestliv",name:"Guest Living",zone:"guest",acousticZone:"zone_1",tags:["guest"],moduleId:"module-04"},{id:"media",name:"Media Room",zone:"entertainment",acousticZone:"zone_3",tags:[],moduleId:"module-05"},{id:"soundlock",name:"Sound Lock",zone:"buffer",acousticZone:"zone_2",tags:["bridge"],moduleId:"module-05"},{id:"mud",name:"Mudroom",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"},{id:"gar",name:"Garage",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"},{id:"serv",name:"Service Corridor",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"}],edges:[{id:"e1",fromRoomId:"foy",toRoomId:"gr",type:"opening"},{id:"e2",fromRoomId:"gr",toRoomId:"dr",type:"opening"},{id:"e3",fromRoomId:"gr",toRoomId:"terr",type:"door"},{id:"e4",fromRoomId:"dr",toRoomId:"butler",type:"door"},{id:"e5",fromRoomId:"butler",toRoomId:"kit",type:"door"},{id:"e6",fromRoomId:"kit",toRoomId:"scul",type:"opening"},{id:"e7",fromRoomId:"scul",toRoomId:"mud",type:"door"},{id:"e8",fromRoomId:"mud",toRoomId:"gar",type:"door"}],namedPaths:[{id:"delivery",name:"Delivery Route",type:"delivery_route",roomIds:["gar","mud","serv","scul"]},{id:"guest-circ",name:"Guest Circulation",type:"guest_circulation",roomIds:["foy","guestliv","guest1"]},{id:"terrace-route",name:"Guest to Terrace",type:"foh_to_terrace",roomIds:["foy","gr","terr"]}],sharedWalls:[{id:"sw1",room1Id:"media",room2Id:"soundlock",isFloor:!1},{id:"sw2",room1Id:"soundlock",room2Id:"fr",isFloor:!1}]},dc={rooms:[{id:"foy",name:"Foyer",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"gr",name:"Great Room",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"dr",name:"Dining Room",zone:"formal",acousticZone:"zone_1",tags:["foh"],moduleId:"module-02"},{id:"terr",name:"Terrace",zone:"outdoor",acousticZone:"zone_2",tags:[],moduleId:"module-02"},{id:"scul",name:"Basement Kitchen",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-01"},{id:"pri",name:"Primary Bedroom",zone:"primary",acousticZone:"zone_0",tags:["primary_suite"],moduleId:"module-03"},{id:"guest1",name:"Guest Suite 1",zone:"guest",acousticZone:"zone_0",tags:["guest"],moduleId:"module-04"},{id:"media",name:"Media Room",zone:"entertainment",acousticZone:"zone_3",tags:[],moduleId:"module-05"},{id:"mud",name:"Mudroom",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"},{id:"gar",name:"Garage",zone:"service",acousticZone:"zone_2",tags:["boh"],moduleId:"module-06"}],edges:[],namedPaths:[{id:"delivery-bad",name:"Delivery Route",type:"delivery_route",roomIds:["gar","gr","scul"]},{id:"guest-circ-bad",name:"Guest Circulation",type:"guest_circulation",roomIds:["foy","pri","guest1"]},{id:"terrace-bad",name:"Guest to Terrace",type:"foh_to_terrace",roomIds:["foy","gr","scul","terr"]}],sharedWalls:[{id:"sw-bad",room1Id:"media",room2Id:"pri",isFloor:!1}]};!function(){console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("N4S VALIDATION ENGINE - PATH TRACING TESTS"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");const e={typology:"single_family",entertainingLoad:"monthly",staffingLevel:"part_time",privacyPosture:"balanced",wetProgram:"pool_spa"},t={chefLedCooking:!0,multiFamilyHosting:!1,lateNightMedia:!0,homeOffice:!0,fitnessRecovery:!0,poolEntertainment:!0};console.log("TEST 1: PASSING PLAN (Correct Circulation)"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const n=Sl({projectId:"test-passing",operatingModel:e,lifestylePriorities:t,planGraph:cc});console.log("Gate Status: ".concat(n.gateStatus.toUpperCase())),console.log("Overall Score: ".concat(n.overallScore)),console.log("Critical Flags: ".concat(n.redFlags.filter(e=>"critical"===e.severity).length)),console.log("Warning Flags: ".concat(n.redFlags.filter(e=>"warning"===e.severity).length)),n.redFlags.length>0?(console.log("\nFlags:"),n.redFlags.forEach(e=>{console.log("  [".concat(e.severity.toUpperCase(),"] ").concat(e.description))})):console.log("\n\u2713 No path tracing violations detected"),console.log("\n\nTEST 2: FAILING PLAN (Multiple Violations)"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const a=Sl({projectId:"test-failing",operatingModel:e,lifestylePriorities:t,planGraph:dc});console.log("Gate Status: ".concat(a.gateStatus.toUpperCase())),console.log("Overall Score: ".concat(a.overallScore)),console.log("Critical Flags: ".concat(a.redFlags.filter(e=>"critical"===e.severity).length)),console.log("Warning Flags: ".concat(a.redFlags.filter(e=>"warning"===e.severity).length)),console.log("\nCritical Violations:"),a.redFlags.filter(e=>"critical"===e.severity).forEach((e,t)=>{console.log("\n  ".concat(t+1,". [").concat(e.ruleId,"] ").concat(e.description)),console.log("     Affected: ".concat(e.affectedRooms.join(", "))),console.log("     Action: ".concat(e.correctiveAction))}),console.log("\n\nTEST 3: ISOLATED PATH TRACING"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const i=_l(dc);console.log("Path violations detected: ".concat(i.length)),i.forEach(e=>{console.log("  - ".concat(e.description))}),console.log("\n\nTEST 4: ACOUSTIC ZONE VIOLATIONS"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const r=Al(dc);console.log("Acoustic violations detected: ".concat(r.length)),r.forEach(e=>{console.log("  - ".concat(e.description))}),console.log("\n\nTEST 5: SHOW KITCHEN CHECK"),console.log("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");const o=Ll(cc),s=Ll(dc);console.log("Passing plan has show kitchen: ".concat(null===o?"\u2713 YES":"\u2717 NO")),console.log("Failing plan has show kitchen: ".concat(null===s?"\u2713 YES":"\u2717 NO")),s&&console.log("  Violation: ".concat(s.description)),console.log("\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("TEST SUMMARY"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");const l=[{name:"Passing Plan Gate Status",pass:"fail"!==n.gateStatus},{name:"Failing Plan Gate Status",pass:"fail"===a.gateStatus},{name:"Path Tracing Detects FOH Crossing",pass:i.some(e=>"critical-002"===e.ruleId)},{name:"Path Tracing Detects Primary Threshold",pass:i.some(e=>"critical-001"===e.ruleId)},{name:"Path Tracing Detects Kitchen Aisle",pass:i.some(e=>"critical-005"===e.ruleId)},{name:"Acoustic Check Detects Zone Conflict",pass:r.length>0},{name:"Kitchen Check Passes Good Plan",pass:null===o},{name:"Kitchen Check Fails Bad Plan",pass:null!==s}];let c=0;l.forEach(e=>{const t=e.pass?"\u2713":"\u2717";console.log("  ".concat(t," ").concat(e.name)),e.pass&&c++}),console.log("\n  PASSED: ".concat(c,"/").concat(l.length)),console.log("\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n")}();const uc={id:"kyc-001",clientId:"client-thornwood",projectId:"thornwood-estate",createdAt:"2026-01-03T00:00:00Z",updatedAt:"2026-01-03T00:00:00Z",propertyContext:{residenceType:"primary",estimatedSF:12e3,siteLotSize:"3 acres",hasBasement:!1,numberOfLevels:2,climateZone:"temperate",existingStructure:!1},householdProfile:{composition:"couple_adult_children",primaryResidents:2,childrenAges:[28,25],elderlyResidents:!1,mobilityConsiderations:!1,pets:[{type:"dog",size:"large",count:2,specialNeeds:"Needs outdoor access and wash station"}]},entertainingProfile:{frequency:"regularly",typicalScale:"moderate",maxEventScale:"large",formalDiningImportance:4,outdoorEntertainingImportance:5,cateringSupport:!0,wineCollection:!0,wineBottleCount:800,barEntertainingImportance:3},staffingProfile:{preference:"regular",currentStaff:[{role:"housekeeper",liveIn:!1,fullTime:!1}],plannedStaff:["part-time chef"],securityRequirements:"moderate",packageDeliveryVolume:"moderate"},privacyProfile:{preference:"selective",guestStayFrequency:"regularly",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!1,separateGuestAccess:!1,workFromHome:"occasional",clientMeetingsAtHome:!1,mediaRoom:!0,lateNightMediaUse:!0},kitchenProfile:{cookingStyle:"enthusiast",primaryCook:"both",breakfastStyle:"casual",dailyMealsAtHome:2,showKitchenImportance:5,professionalAppliances:!0,multipleOvens:!0,wineStorage:!0,separateCateringKitchen:!1},wellnessProfile:{interest:"active",fitnessRoutine:"regular",poolDesired:!0,poolType:"lap",spaFeatures:["hot_tub","sauna"],outdoorActivities:["gardening"],garageBays:3,carCollection:!1},specialRequirements:{accessibility:[],medicalEquipment:!1,artCollection:!1,artClimateControl:!1,musicRoom:!1,recordingStudio:!1,workshop:!1,wineRoom:!0,safe_room:!1,customSpaces:[]}},hc={id:"kyc-002",clientId:"client-multigen",projectId:"multi-gen-compound",createdAt:"2026-01-03T00:00:00Z",updatedAt:"2026-01-03T00:00:00Z",propertyContext:{residenceType:"primary",estimatedSF:18e3,siteLotSize:"5 acres",hasBasement:!1,numberOfLevels:2,climateZone:"temperate",existingStructure:!1},householdProfile:{composition:"multi_generational",primaryResidents:6,childrenAges:[12,8],elderlyResidents:!0,mobilityConsiderations:!0,pets:[]},entertainingProfile:{frequency:"occasionally",typicalScale:"intimate",maxEventScale:"moderate",formalDiningImportance:3,outdoorEntertainingImportance:3,cateringSupport:!1,wineCollection:!1,barEntertainingImportance:2},staffingProfile:{preference:"full_service",currentStaff:[{role:"housekeeper",liveIn:!0,fullTime:!0},{role:"caregiver",liveIn:!1,fullTime:!0}],plannedStaff:[],securityRequirements:"enhanced",packageDeliveryVolume:"heavy"},privacyProfile:{preference:"sanctuary",guestStayFrequency:"rarely",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!0,separateGuestAccess:!0,workFromHome:"primary",clientMeetingsAtHome:!0,mediaRoom:!0,lateNightMediaUse:!1},kitchenProfile:{cookingStyle:"casual",primaryCook:"staff",breakfastStyle:"casual",dailyMealsAtHome:3,showKitchenImportance:3,professionalAppliances:!0,multipleOvens:!1,wineStorage:!1,separateCateringKitchen:!0},wellnessProfile:{interest:"dedicated",fitnessRoutine:"light",poolDesired:!0,poolType:"recreational",spaFeatures:["hot_tub","steam","massage_room"],outdoorActivities:[],garageBays:4,carCollection:!1},specialRequirements:{accessibility:["elevator","wide_doorways","grab_bars"],medicalEquipment:!0,artCollection:!0,artClimateControl:!0,musicRoom:!1,recordingStudio:!1,workshop:!1,wineRoom:!1,safe_room:!0,customSpaces:[{name:"Meditation Garden",description:"Enclosed courtyard garden for quiet reflection",estimatedSF:200,adjacencyNeeds:"SPA"}]}},pc={id:"kyc-003",clientId:"client-exec",projectId:"executive-retreat",createdAt:"2026-01-03T00:00:00Z",updatedAt:"2026-01-03T00:00:00Z",propertyContext:{residenceType:"secondary",estimatedSF:15e3,siteLotSize:"10 acres",hasBasement:!1,numberOfLevels:2,climateZone:"temperate",existingStructure:!1},householdProfile:{composition:"couple_no_children",primaryResidents:2,childrenAges:[],elderlyResidents:!1,mobilityConsiderations:!1,pets:[{type:"dog",size:"medium",count:1}]},entertainingProfile:{frequency:"rarely",typicalScale:"intimate",maxEventScale:"moderate",formalDiningImportance:4,outdoorEntertainingImportance:3,cateringSupport:!0,wineCollection:!0,wineBottleCount:2500,barEntertainingImportance:4},staffingProfile:{preference:"estate",currentStaff:[],plannedStaff:["estate manager","chef","housekeeper"],securityRequirements:"comprehensive",packageDeliveryVolume:"heavy"},privacyProfile:{preference:"sanctuary",guestStayFrequency:"occasionally",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!1,separateGuestAccess:!0,workFromHome:"executive",clientMeetingsAtHome:!0,mediaRoom:!0,lateNightMediaUse:!0},kitchenProfile:{cookingStyle:"serious",primaryCook:"mixed",breakfastStyle:"formal",dailyMealsAtHome:2,showKitchenImportance:5,professionalAppliances:!0,multipleOvens:!0,wineStorage:!0,separateCateringKitchen:!0},wellnessProfile:{interest:"resort",fitnessRoutine:"intensive",poolDesired:!0,poolType:"infinity",spaFeatures:["sauna","steam","cold_plunge","massage_room"],outdoorActivities:["tennis"],garageBays:8,carCollection:!0},specialRequirements:{accessibility:[],medicalEquipment:!1,artCollection:!0,artClimateControl:!0,musicRoom:!0,recordingStudio:!1,workshop:!1,wineRoom:!0,safe_room:!0,customSpaces:[{name:"Trophy Room",description:"Display room for awards and memorabilia",estimatedSF:200}]}};var fc;!function(){console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("N4S KYC INTEGRATION TESTS"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");const e=[{name:"Thornwood Estate",kyc:uc},{name:"Multi-Gen Compound",kyc:hc},{name:"Executive Retreat",kyc:pc}];for(const a of e){console.log("\n".concat("\u2500".repeat(65))),console.log("PROFILE: ".concat(a.name)),console.log("".concat("\u2500".repeat(65),"\n"));const e=Gl(a.kyc);if(console.log("OPERATING MODEL:"),console.log("  Typology:        ".concat(e.operatingModel.typology)),console.log("  Entertaining:    ".concat(e.operatingModel.entertainingLoad)),console.log("  Staffing:        ".concat(e.operatingModel.staffingLevel)),console.log("  Privacy:         ".concat(e.operatingModel.privacyPosture)),console.log("  Wet Program:     ".concat(e.operatingModel.wetProgram)),console.log("\nLIFESTYLE PRIORITIES:"),console.log("  Chef-Led Cooking:      ".concat(e.lifestylePriorities.chefLedCooking)),console.log("  Multi-Family Hosting:  ".concat(e.lifestylePriorities.multiFamilyHosting)),console.log("  Late-Night Media:      ".concat(e.lifestylePriorities.lateNightMedia)),console.log("  Home Office:           ".concat(e.lifestylePriorities.homeOffice)),console.log("  Fitness/Recovery:      ".concat(e.lifestylePriorities.fitnessRecovery)),console.log("  Pool Entertainment:    ".concat(e.lifestylePriorities.poolEntertainment)),console.log("\nBRIDGE REQUIREMENTS:"),console.log("  Butler Pantry:     ".concat(e.bridgeConfig.butlerPantry?"\u2713":"\u2013")),console.log("  Guest Autonomy:    ".concat(e.bridgeConfig.guestAutonomy?"\u2713":"\u2013")),console.log("  Sound Lock:        ".concat(e.bridgeConfig.soundLock?"\u2713":"\u2013")),console.log("  Wet-Feet Intercept:".concat(e.bridgeConfig.wetFeetIntercept?"\u2713":"\u2013")),console.log("  Ops Core:          ".concat(e.bridgeConfig.opsCore?"\u2713":"\u2013")),e.uniqueRequirements.length>0){console.log("\nUNIQUE REQUIREMENTS:");for(const t of e.uniqueRequirements)console.log("  \u2022 [".concat(t.priority.toUpperCase(),"] ").concat(t.description)),t.spaceCode&&console.log("    Space: ".concat(t.spaceCode," (").concat(t.estimatedSF||"?"," SF)")),t.adjacencyNeeds&&console.log("    Adjacent to: ".concat(t.adjacencyNeeds.join(", ")))}if(console.log("\nRECOMMENDATIONS:"),console.log("  Preset:           ".concat(e.recommendedPreset.toUpperCase())),console.log("  Confidence:       ".concat(e.confidenceScore,"%")),e.warnings.length>0){console.log("\nWARNINGS:");for(const t of e.warnings)console.log("  \u26a0 ".concat(t))}console.log("\n--- VALIDATION RESULT ---");const t=Sl({projectId:a.kyc.projectId,operatingModel:e.operatingModel,lifestylePriorities:e.lifestylePriorities});console.log("  Gate Status:      ".concat(t.gateStatus.toUpperCase())),console.log("  Overall Score:    ".concat(t.overallScore)),console.log("  Red Flags:        ".concat(t.redFlags.length)),console.log("  Missing Bridges:  ".concat(t.requiredBridges.filter(e=>!e.isPresent).length))}console.log("\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("KYC INTEGRATION TEST SUMMARY"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");const t=[{name:"Thornwood \u2192 monthly entertaining",pass:"monthly"===Gl(uc).operatingModel.entertainingLoad},{name:"Thornwood \u2192 pool_spa wet program",pass:"pool_spa"===Gl(uc).operatingModel.wetProgram},{name:"Thornwood \u2192 dog wash extracted",pass:ic(uc).some(e=>e.id.includes("dog"))},{name:"Thornwood \u2192 wine expansion extracted",pass:ic(uc).some(e=>"wine-expansion"===e.id)},{name:"MultiGen \u2192 private posture",pass:"private"===Gl(hc).operatingModel.privacyPosture},{name:"MultiGen \u2192 multi-family hosting flag",pass:!0===Gl(hc).lifestylePriorities.multiFamilyHosting},{name:"MultiGen \u2192 accessibility extracted",pass:ic(hc).some(e=>"accessibility"===e.id)},{name:"MultiGen \u2192 safe room extracted",pass:ic(hc).some(e=>"safe-room"===e.id)},{name:"MultiGen \u2192 20k preset recommended",pass:"20k"===rc(hc)},{name:"Executive \u2192 live-in staffing",pass:"live_in"===Gl(pc).operatingModel.staffingLevel},{name:"Executive \u2192 full_wellness",pass:"full_wellness"===Gl(pc).operatingModel.wetProgram},{name:"Executive \u2192 car collection garage",pass:ic(pc).some(e=>"car-collection"===e.id)},{name:"Executive \u2192 executive office",pass:ic(pc).some(e=>"executive-office"===e.id)},{name:"Executive \u2192 late-night media warning",pass:oc(pc,Ul(pc),$l(pc)).some(e=>e.includes("media"))}];let n=0;for(const a of t){const e=a.pass?"\u2713":"\u2717";console.log("  ".concat(e," ").concat(a.name)),a.pass&&n++}console.log("\n  PASSED: ".concat(n,"/").concat(t.length)),console.log("\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n")}();var mc=new Uint8Array(16);function gc(){if(!fc&&!(fc="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fc(mc)}const vc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const yc=function(e){return"string"===typeof e&&vc.test(e)};for(var bc=[],xc=0;xc<256;++xc)bc.push((xc+256).toString(16).substr(1));const Sc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(bc[e[t+0]]+bc[e[t+1]]+bc[e[t+2]]+bc[e[t+3]]+"-"+bc[e[t+4]]+bc[e[t+5]]+"-"+bc[e[t+6]]+bc[e[t+7]]+"-"+bc[e[t+8]]+bc[e[t+9]]+"-"+bc[e[t+10]]+bc[e[t+11]]+bc[e[t+12]]+bc[e[t+13]]+bc[e[t+14]]+bc[e[t+15]]).toLowerCase();if(!yc(n))throw TypeError("Stringified UUID is invalid");return n};const _c=function(e,t,n){var a=(e=e||{}).random||(e.rng||gc)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=a[i];return t}return Sc(a)};function wc(e,t,n){return{projectId:t,projectName:n,basePreset:e.id,spaces:[...e.spaces],adjacencyMatrix:[...e.adjacencyMatrix],nodes:[...e.nodes],crossLinks:[...e.crossLinks],bridgeConfig:s({},e.bridgeConfig),appliedChanges:[],totalSF:e.targetSF,levels:2,bedrooms:Nc(e.spaces),hasBasement:!1,isDirty:!1}}function Nc(e){const t=["PRI","SEC1","SEC2","SEC3","SEC4","GSL1","GSL2","GUEST1","GUEST2"];return e.filter(e=>t.some(t=>e.code.startsWith(t.slice(0,3)))).length}function kc(e,t){if(t.spaceCode&&e.spaces.some(e=>e.code===t.spaceCode))return e;const n={id:_c(),code:t.spaceCode||Fc(t.category),name:t.description.split(" ").slice(0,3).join(" "),targetSF:t.estimatedSF||100,zone:Ic(t.category),level:1,rationale:"Added from KYC: ".concat(t.sourceQuestion)},a=[...e.spaces,n];let i=[...e.adjacencyMatrix];if(t.adjacencyNeeds)for(const o of t.adjacencyNeeds)e.spaces.some(e=>e.code===o)&&i.push({fromSpaceCode:n.code,toSpaceCode:o,relationship:"N"});const r={type:"added",spaceCode:n.code,description:t.description,source:t.sourceQuestion};return s(s({},e),{},{spaces:a,adjacencyMatrix:i,appliedChanges:[...e.appliedChanges,r]})}function Cc(e,t){if(!t.spaceCode)return e;const n=e.spaces.findIndex(e=>e.code===t.spaceCode);if(-1===n)return kc(e,s(s({},t),{},{type:"addition"}));const a=s(s({},e.spaces[n]),{},{targetSF:t.estimatedSF||e.spaces[n].targetSF,rationale:"Modified from KYC: ".concat(t.description)}),i=[...e.spaces];i[n]=a;const r={type:"modified",spaceCode:t.spaceCode,description:t.description,source:t.sourceQuestion};return s(s({},e),{},{spaces:i,appliedChanges:[...e.appliedChanges,r]})}function jc(e,t){if(!t.spaceCode)return e;const n=e.spaces.filter(e=>e.code!==t.spaceCode),a=e.adjacencyMatrix.filter(e=>e.fromSpaceCode!==t.spaceCode&&e.toSpaceCode!==t.spaceCode),i=e.nodes.map(e=>s(s({},e),{},{spaceCodes:e.spaceCodes.filter(e=>e!==t.spaceCode)})),r={type:"removed",spaceCode:t.spaceCode,description:t.description,source:t.sourceQuestion};return s(s({},e),{},{spaces:n,adjacencyMatrix:a,nodes:i,appliedChanges:[...e.appliedChanges,r]})}function Pc(e,t){return e}function Ac(e,t){const n=[];let a=[...e.spaces],i=[...e.adjacencyMatrix];if(t.butlerPantry&&!e.spaces.some(e=>"BUTLER"===e.code)){const e={id:_c(),code:"BUTLER",name:"Butler Pantry",targetSF:120,zone:"Service Core",level:1,rationale:"Required bridge: Butler Pantry for entertaining support"};a.push(e),i.push({fromSpaceCode:"BUTLER",toSpaceCode:"DR",relationship:"A"},{fromSpaceCode:"BUTLER",toSpaceCode:"KIT",relationship:"A"},{fromSpaceCode:"BUTLER",toSpaceCode:"CHEF",relationship:"N"}),n.push({type:"added",spaceCode:"BUTLER",description:"Butler Pantry bridge for entertaining",source:"bridgeConfig.butlerPantry"})}if(t.soundLock&&!e.spaces.some(e=>"SNDLCK"===e.code)){const e={id:_c(),code:"SNDLCK",name:"Sound Lock",targetSF:60,zone:"Entertainment",level:1,rationale:"Required bridge: Acoustic buffer for late-night media"};a.push(e),i.push({fromSpaceCode:"SNDLCK",toSpaceCode:"MEDIA",relationship:"A"},{fromSpaceCode:"SNDLCK",toSpaceCode:"FR",relationship:"N"}),n.push({type:"added",spaceCode:"SNDLCK",description:"Sound Lock vestibule for media room",source:"bridgeConfig.soundLock"})}if(t.wetFeetIntercept&&!e.spaces.some(e=>"WETFT"===e.code)){const e={id:_c(),code:"WETFT",name:"Pool Vestibule",targetSF:80,zone:"Wellness",level:1,rationale:"Required bridge: Pool-to-house transition zone"};a.push(e),i.push({fromSpaceCode:"WETFT",toSpaceCode:"POOL",relationship:"A"},{fromSpaceCode:"WETFT",toSpaceCode:"FR",relationship:"N"}),n.push({type:"added",spaceCode:"WETFT",description:"Wet-feet intercept for pool access",source:"bridgeConfig.wetFeetIntercept"})}if(t.opsCore&&!e.spaces.some(e=>"OPSCORE"===e.code)){const e={id:_c(),code:"OPSCORE",name:"Operations Core",targetSF:150,zone:"Service Core",level:1,rationale:"Required bridge: Staff operations and delivery hub"};a.push(e),i.push({fromSpaceCode:"OPSCORE",toSpaceCode:"MUD",relationship:"A"},{fromSpaceCode:"OPSCORE",toSpaceCode:"GAR",relationship:"N"},{fromSpaceCode:"OPSCORE",toSpaceCode:"SCUL",relationship:"N"}),n.push({type:"added",spaceCode:"OPSCORE",description:"Operations Core for staff",source:"bridgeConfig.opsCore"})}if(t.guestAutonomy){const e=a.findIndex(e=>"GSL1"===e.code||"GUEST1"===e.code);-1!==e&&(a[e]=s(s({},a[e]),{},{targetSF:Math.max(a[e].targetSF,600),rationale:"Expanded for guest autonomy: kitchenette + separate entry"}),n.push({type:"modified",spaceCode:a[e].code,description:"Guest suite expanded for autonomy",source:"bridgeConfig.guestAutonomy"}))}return s(s({},e),{},{spaces:a,adjacencyMatrix:i,bridgeConfig:s({},t),appliedChanges:[...e.appliedChanges,...n],totalSF:a.reduce((e,t)=>e+t.targetSF,0),isDirty:!0})}function Lc(e){const t=[];e.bridgeConfig.butlerPantry&&t.push("Butler Pantry"),e.bridgeConfig.guestAutonomy&&t.push("Guest Autonomy"),e.bridgeConfig.soundLock&&t.push("Sound Lock"),e.bridgeConfig.wetFeetIntercept&&t.push("Wet-Feet Intercept"),e.bridgeConfig.opsCore&&t.push("Ops Core");const n=e.appliedChanges.length,a=e.appliedChanges.filter(e=>"added"===e.type).length,i=e.appliedChanges.filter(e=>"modified"===e.type).length;let r="".concat(e.totalSF.toLocaleString()," SF program based on ").concat(e.basePreset.toUpperCase()," baseline. ");return r+="".concat(e.spaces.length," spaces across ").concat(e.levels," level(s). "),r+="".concat(e.bedrooms," bedroom configuration. "),t.length>0&&(r+="Operational bridges: ".concat(t.join(", "),". ")),n>0&&(r+="".concat(n," client-specific modification(s) applied "),r+="(".concat(a," added, ").concat(i," modified).")),r}function Fc(e){const t=e.substring(0,3).toUpperCase(),n=Math.random().toString(36).substring(2,5).toUpperCase();return"".concat(t).concat(n)}function Ic(e){return{pets:"Service Core",entertaining:"Entertainment",special:"Special Purpose",wellness:"Wellness",work:"Private",automotive:"Service Core",security:"Service Core",accessibility:"Circulation",custom:"Special Purpose"}[e]||"Special Purpose"}function Rc(e,t,n,a){let i=wc(e,n,a);return i=Ac(i,t.bridgeConfig),i=function(e,t){let n=s({},e);for(const a of t)switch(a.type){case"addition":n=kc(n,a);break;case"modification":n=Cc(n,a);break;case"deletion":n=jc(n,a);break;case"adjacency":n=Pc(n)}return n.totalSF=n.spaces.reduce((e,t)=>e+t.targetSF,0),n.isDirty=!0,n}(i,t.uniqueRequirements),i.isDirty=!1,i}function Ec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{initialPreset:t="15k",kycContext:n,onStateChange:i}=e,[r,o]=(0,a.useState)(()=>{const e=lc(t);return n&&e?Rc(e,n,"project-001","New Project"):e?wc(e,"project-001","New Project"):{projectId:"project-001",projectName:"New Project",basePreset:t,spaces:[],adjacencyMatrix:[],nodes:[],crossLinks:[],bridgeConfig:{butlerPantry:!1,guestAutonomy:!1,soundLock:!1,wetFeetIntercept:!1,opsCore:!1},appliedChanges:[],totalSF:0,levels:2,bedrooms:0,hasBasement:!1,isDirty:!1}}),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[f,m]=(0,a.useState)([]),[g,v]=(0,a.useState)(-1);(0,a.useEffect)(()=>{null===i||void 0===i||i(r)},[r,i]);const y=(0,a.useCallback)(e=>{m(t=>{const n=t.slice(0,g+1);return n.push(e),n.length>50&&n.shift(),n}),v(e=>Math.min(e+1,49))},[g]),b=(0,a.useCallback)(e=>{y(r),o(e)},[r,y]),x=(0,a.useCallback)((e,t)=>{const n=r.spaces.find(t=>t.code===e);if(null!==n&&void 0!==n&&n.id){const e=function(e,t,n){const a=e.spaces.map(e=>e.id===t?s(s({},e),n):e);return s(s({},e),{},{spaces:a,totalSF:a.reduce((e,t)=>e+t.targetSF,0),isDirty:!0})}(r,n.id,t);b(e)}},[r,b]),S=(0,a.useCallback)(e=>{const t=function(e,t){const n=s(s({},t),{},{id:_c()});return s(s({},e),{},{spaces:[...e.spaces,n],totalSF:e.totalSF+n.targetSF,isDirty:!0})}(r,e);b(t)},[r,b]),_=(0,a.useCallback)(e=>{const t=r.spaces.find(t=>t.code===e);if(null!==t&&void 0!==t&&t.id){const e=function(e,t){const n=e.spaces.find(e=>e.id===t);if(!n)return e;const a=e.spaces.filter(e=>e.id!==t),i=e.adjacencyMatrix.filter(e=>e.fromSpaceCode!==n.code&&e.toSpaceCode!==n.code),r=e.nodes.map(e=>s(s({},e),{},{spaceCodes:e.spaceCodes.filter(e=>e!==n.code)}));return s(s({},e),{},{spaces:a,adjacencyMatrix:i,nodes:r,totalSF:a.reduce((e,t)=>e+t.targetSF,0),isDirty:!0})}(r,t.id);b(e)}},[r,b]),w=(0,a.useCallback)((e,t,n)=>{const a=function(e,t,n,a){let i=e.adjacencyMatrix.filter(e=>!(e.fromSpaceCode===t&&e.toSpaceCode===n));return null!==a&&i.push({fromSpaceCode:t,toSpaceCode:n,relationship:a}),s(s({},e),{},{adjacencyMatrix:i,isDirty:!0})}(r,e,t,n);b(a)},[r,b]),N=(0,a.useCallback)(e=>{const t=s(s({},r.bridgeConfig),{},{[e]:!r.bridgeConfig[e]}),n=Ac(r,t);b(n)},[r,b]),k=(0,a.useCallback)(e=>{c(!0);try{const t=lc(e);if(t){const e=wc(t,r.projectId,r.projectName);b(e)}p(null)}finally{c(!1)}},[r.projectId,r.projectName,b]),C=(0,a.useCallback)(async()=>{u(!0);try{await new Promise(e=>setTimeout(e,500));const e=[];let t=0,n=0;const a=r.spaces.some(e=>"KIT"===e.code||"SHOWKIT"===e.code);a||(e.push("[CRITICAL] No kitchen space defined"),t++);const i=r.spaces.some(e=>{var t;return"PRI"===e.code||(null===(t=e.code)||void 0===t?void 0:t.startsWith("PRI"))});i||(e.push("[CRITICAL] No primary suite defined"),t++);const o=r.spaces.reduce((e,t)=>e+(t.targetSF||0),0);Math.abs(o-r.totalSF)>100&&e.push("[WARNING] SF mismatch: allocated ".concat(o.toLocaleString()," vs target ").concat(r.totalSF.toLocaleString()));const s=[{key:"butlerPantry",name:"Butler Pantry"},{key:"guestAutonomy",name:"Guest Autonomy"},{key:"soundLock",name:"Sound Lock"},{key:"wetFeetIntercept",name:"Wet-Feet Intercept"},{key:"opsCore",name:"Operations Core"}];for(const d of s)r.bridgeConfig[d.key]||(e.push("[MISSING] ".concat(d.name," bridge not configured")),n++);let l=100;l-=20*t,l-=5*n,l=Math.max(0,Math.min(100,l));let c="pass";t>0?c="fail":(n>2||l<80)&&(c="warning"),p({gateStatus:c,overallScore:l,redFlagCount:t,missingBridgeCount:n,messages:e})}finally{u(!1)}},[r]),j=(0,a.useCallback)(()=>function(e){const t=(new Date).toISOString();return{id:_c(),projectId:e.projectId,name:"".concat(e.projectName," - ").concat(e.basePreset.toUpperCase()," Baseline"),totalSF:e.totalSF,levels:e.levels,hasBasement:e.hasBasement,bedrooms:e.bedrooms,executiveSummary:Lc(e),spaces:e.spaces,adjacencyMatrix:e.adjacencyMatrix,nodes:e.nodes,crossLinks:e.crossLinks,bridgeConfig:e.bridgeConfig,createdAt:t,updatedAt:t}}(r),[r]),P=g>=0,A=g<f.length-1,L=(0,a.useCallback)(()=>{if(P){const e=f[g];v(e=>e-1),o(e)}},[P,f,g]),F=(0,a.useCallback)(()=>{if(A){const e=f[g+1];v(e=>e+1),o(e)}},[A,f,g]),I=(0,a.useCallback)(()=>{const e=lc(t);let a;if(n&&e)a=Rc(e,n,"project-001","New Project");else{if(!e)return;a=wc(e,"project-001","New Project")}m([]),v(-1),o(a),p(null)},[t,n]);return{state:r,isLoading:l,isValidating:d,validationPreview:h,handleUpdateSpace:x,handleAddSpace:S,handleRemoveSpace:_,handleUpdateAdjacency:w,handleToggleBridge:N,handleLoadPreset:k,runValidationPreview:C,handleExport:j,canUndo:P,canRedo:A,handleUndo:L,handleRedo:F,handleReset:I}}const Mc=function(e){let{space:t,onUpdate:n,onDelete:i}=e;const[r,o]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),c=["FOY","GR","DR","KIT","FR","PRI","PRIBATH"].includes(t.code);return(0,E.jsxs)("div",{className:"space-editor",style:{backgroundColor:(e=>{const t={"Front gallery + showcase":"#e3f2fd","Family hub + service":"#f3e5f5","Private level 2":"#e8f5e9","Service Core":"#fff3e0",Wellness:"#e0f7fa",Entertainment:"#fce4ec","Special Purpose":"#f5f5f5"};for(const[n,a]of Object.entries(t))if(e.toLowerCase().includes(n.toLowerCase().split(" ")[0]))return a;return"#f5f5f5"})(t.zone)},children:[(0,E.jsxs)("div",{className:"space-header",onClick:()=>o(!r),children:[(0,E.jsx)("div",{className:"space-code",children:t.code}),(0,E.jsx)("div",{className:"space-name",children:t.name}),(0,E.jsxs)("div",{className:"space-sf",children:[(0,E.jsx)("input",{type:"number",value:t.targetSF,onChange:e=>n({targetSF:Number(e.target.value)}),onClick:e=>e.stopPropagation(),min:10,max:5e3,step:10}),(0,E.jsx)("span",{className:"sf-label",children:"SF"})]}),(0,E.jsx)("button",{className:"expand-btn",onClick:e=>{e.stopPropagation(),o(!r)},children:r?"\u25bc":"\u25b6"})]}),r&&(0,E.jsxs)("div",{className:"space-details",children:[(0,E.jsx)("div",{className:"detail-row",children:(0,E.jsxs)("label",{children:["Name:",(0,E.jsx)("input",{type:"text",value:t.name,onChange:e=>n({name:e.target.value})})]})}),(0,E.jsx)("div",{className:"detail-row",children:(0,E.jsxs)("label",{children:["Zone:",(0,E.jsx)("input",{type:"text",value:t.zone,onChange:e=>n({zone:e.target.value})})]})}),(0,E.jsx)("div",{className:"detail-row",children:(0,E.jsxs)("label",{children:["Level:",(0,E.jsx)("select",{value:t.level,onChange:e=>n({level:Number(e.target.value)}),children:[1,2,3,4].map(e=>(0,E.jsxs)("option",{value:e,children:["Level ",e]},e))})]})}),t.rationale&&(0,E.jsx)("div",{className:"detail-row rationale",children:(0,E.jsx)("em",{children:t.rationale})}),(0,E.jsxs)("div",{className:"detail-actions",children:[!c&&!s&&(0,E.jsx)("button",{className:"delete-btn",onClick:()=>l(!0),children:"Delete"}),s&&(0,E.jsxs)("div",{className:"confirm-delete",children:[(0,E.jsxs)("span",{children:["Delete ",t.name,"?"]}),(0,E.jsx)("button",{className:"confirm-yes",onClick:i,children:"Yes"}),(0,E.jsx)("button",{className:"confirm-no",onClick:()=>l(!1),children:"No"})]}),c&&(0,E.jsx)("span",{className:"core-badge",children:"Core Space"})]})]})]})},Tc={A:{label:"A",color:"#4caf50",description:"Adjacent - Direct connection required"},N:{label:"N",color:"#2196f3",description:"Near - Close proximity needed"},B:{label:"B",color:"#ff9800",description:"Buffered - Buffer zone required"},S:{label:"S",color:"#f44336",description:"Separate - Isolation required"}};const Dc=function(e){let{spaces:t,adjacencyMatrix:n,onUpdate:i}=e;const r=(e,t)=>{const a=n.find(n=>n.fromSpaceCode===e&&n.toSpaceCode===t);return(null===a||void 0===a?void 0:a.relationship)||null},[o,s]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),h=(0,a.useMemo)(()=>[...new Set(t.map(e=>e.zone))].sort(),[t]),p=(0,a.useMemo)(()=>[...new Set(t.map(e=>e.level))].sort(),[t]),f=(0,a.useMemo)(()=>t.filter(e=>(!o||e.zone===o)&&(null===l||e.level===l)),[t,o,l]),m=(e,t)=>{if(e===t)return(0,E.jsx)("td",{className:"cell diagonal",children:"\u2013"},"".concat(e,"-").concat(t));const n=r(e,t),a=(null===d||void 0===d?void 0:d.from)===e&&(null===d||void 0===d?void 0:d.to)===t,o=n?Tc[n]:null;return(0,E.jsx)("td",{className:"cell ".concat(n||"empty"," ").concat(a?"hovered":""),style:o?{backgroundColor:o.color,color:"white"}:void 0,onClick:()=>((e,t)=>{if(e===t)return;const n=r(e,t),a=[null,"A","N","B","S"],o=(a.indexOf(n)+1)%a.length;i(e,t,a[o])})(e,t),onMouseEnter:()=>u({from:e,to:t}),onMouseLeave:()=>u(null),title:null===o||void 0===o?void 0:o.description,children:n||"\xb7"},"".concat(e,"-").concat(t))};return(0,E.jsxs)("div",{className:"adjacency-matrix",children:[(0,E.jsxs)("div",{className:"matrix-legend",children:[(0,E.jsx)("h3",{children:"Adjacency Legend"}),(0,E.jsx)("div",{className:"legend-items",children:Object.entries(Tc).map(e=>{let[t,{label:n,color:a,description:i}]=e;return(0,E.jsxs)("div",{className:"legend-item",children:[(0,E.jsx)("span",{className:"legend-badge",style:{backgroundColor:a},children:n}),(0,E.jsx)("span",{className:"legend-text",children:i})]},t)})}),(0,E.jsx)("p",{className:"legend-hint",children:"Click cells to cycle through relationships"})]}),(0,E.jsxs)("div",{className:"matrix-filters",children:[(0,E.jsxs)("label",{children:["Filter by Zone:",(0,E.jsxs)("select",{value:o||"",onChange:e=>s(e.target.value||null),children:[(0,E.jsx)("option",{value:"",children:"All Zones"}),h.map(e=>(0,E.jsx)("option",{value:e,children:e},e))]})]}),(0,E.jsxs)("label",{children:["Filter by Level:",(0,E.jsxs)("select",{value:null!==l&&void 0!==l?l:"",onChange:e=>c(e.target.value?Number(e.target.value):null),children:[(0,E.jsx)("option",{value:"",children:"All Levels"}),p.map(e=>(0,E.jsxs)("option",{value:e,children:["Level ",e]},e))]})]}),(0,E.jsxs)("span",{className:"space-count",children:["Showing ",f.length," of ",t.length," spaces"]})]}),(0,E.jsx)("div",{className:"matrix-scroll",children:(0,E.jsxs)("table",{className:"matrix-table",children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{className:"corner"}),f.map(e=>(0,E.jsx)("th",{className:"col-header",title:e.name,children:e.code},e.code))]})}),(0,E.jsx)("tbody",{children:f.map(e=>(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{className:"row-header",title:e.name,children:e.code}),f.map(t=>m(e.code,t.code))]},e.code))})]})}),(0,E.jsxs)("div",{className:"matrix-stats",children:[(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("strong",{children:n.filter(e=>"A"===e.relationship).length}),(0,E.jsx)("span",{children:"Adjacent (A)"})]}),(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("strong",{children:n.filter(e=>"N"===e.relationship).length}),(0,E.jsx)("span",{children:"Near (N)"})]}),(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("strong",{children:n.filter(e=>"B"===e.relationship).length}),(0,E.jsx)("span",{children:"Buffered (B)"})]}),(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("strong",{children:n.filter(e=>"S"===e.relationship).length}),(0,E.jsx)("span",{children:"Separate (S)"})]})]})]})},Oc=[{key:"butlerPantry",name:"Butler Pantry",description:"Service corridor between kitchen and formal dining that allows staff to plate, garnish, and serve without crossing guest sightlines.",trigger:"Monthly+ entertaining OR Formal privacy posture OR Catering support",spaceAdded:"BUTLER (Butler Pantry)",sfImpact:120},{key:"guestAutonomy",name:"Guest Autonomy Node",description:"Self-contained guest zone with independent entry, kitchenette, and living area for extended stays.",trigger:"Multi-family hosting OR Vacation/Winter typology OR Extended guest stays",spaceAdded:"GSL1 expansion with kitchenette",sfImpact:150},{key:"soundLock",name:"Sound Lock Vestibule",description:"Double-door acoustic buffer between media room and bedroom wing for late-night use.",trigger:"Late-night media use enabled OR Recording studio OR Music room",spaceAdded:"SNDLCK (Sound Lock)",sfImpact:60},{key:"wetFeetIntercept",name:"Wet-Feet Intercept",description:"Transition zone with drainage, towel storage, and outdoor shower between pool area and main house.",trigger:"Any pool/spa program OR Pool entertainment enabled",spaceAdded:"WETFT (Pool Vestibule)",sfImpact:80},{key:"opsCore",name:"Operations Core",description:"Dedicated hub for staff operations including secure package receipt, deliveries staging, and housekeeping coordination.",trigger:"Any staffing level above none OR Heavy package volume OR Enhanced security",spaceAdded:"OPSCORE (Operations Core)",sfImpact:150}];const Bc=function(e){let{bridgeConfig:t,onToggle:n,kycContext:a}=e;const i=Oc.reduce((e,n)=>t[n.key]?e+n.sfImpact:e,0),r=Object.values(t).filter(Boolean).length;return(0,E.jsxs)("div",{className:"bridge-panel",children:[(0,E.jsxs)("header",{className:"panel-header",children:[(0,E.jsx)("h2",{children:"Operational Bridges"}),(0,E.jsx)("p",{className:"panel-description",children:"Bridges are specialized spaces that connect different zones while maintaining separation and functionality. They are triggered by specific lifestyle requirements."})]}),(0,E.jsxs)("div",{className:"bridge-summary",children:[(0,E.jsxs)("div",{className:"summary-stat",children:[(0,E.jsx)("span",{className:"stat-value",children:r}),(0,E.jsx)("span",{className:"stat-label",children:"Active Bridges"})]}),(0,E.jsxs)("div",{className:"summary-stat",children:[(0,E.jsx)("span",{className:"stat-value",children:i.toLocaleString()}),(0,E.jsx)("span",{className:"stat-label",children:"Bridge SF"})]})]}),(0,E.jsx)("div",{className:"bridge-cards",children:Oc.map(e=>{var i;const r=t[e.key],o=null===a||void 0===a||null===(i=a.bridgeConfig)||void 0===i?void 0:i[e.key];return(0,E.jsxs)("div",{className:"bridge-card ".concat(r?"active":"inactive"),children:[(0,E.jsxs)("div",{className:"bridge-header",children:[(0,E.jsx)("h3",{children:e.name}),(0,E.jsxs)("label",{className:"toggle-switch",children:[(0,E.jsx)("input",{type:"checkbox",checked:r,onChange:()=>n(e.key)}),(0,E.jsx)("span",{className:"slider"})]})]}),(0,E.jsx)("p",{className:"bridge-description",children:e.description}),(0,E.jsxs)("div",{className:"bridge-meta",children:[(0,E.jsxs)("div",{className:"meta-item",children:[(0,E.jsx)("strong",{children:"Trigger:"}),(0,E.jsx)("span",{children:e.trigger})]}),(0,E.jsxs)("div",{className:"meta-item",children:[(0,E.jsx)("strong",{children:"Adds:"}),(0,E.jsx)("span",{children:e.spaceAdded})]}),(0,E.jsxs)("div",{className:"meta-item",children:[(0,E.jsx)("strong",{children:"SF Impact:"}),(0,E.jsxs)("span",{children:["+",e.sfImpact," SF"]})]})]}),o&&(0,E.jsx)("div",{className:"kyc-triggered",children:"\u2713 Triggered by client requirements"}),r&&!o&&(0,E.jsx)("div",{className:"manually-enabled",children:"\u270e Manually enabled"})]},e.key)})}),(null===a||void 0===a?void 0:a.warnings)&&a.warnings.length>0&&(0,E.jsxs)("div",{className:"bridge-warnings",children:[(0,E.jsx)("h4",{children:"\u26a0 Configuration Warnings"}),(0,E.jsx)("ul",{children:a.warnings.map((e,t)=>(0,E.jsx)("li",{children:e},t))})]})]})};const zc=function(e){let{preview:t,isLoading:n,onRunValidation:a,state:i}=e;return(0,E.jsxs)("div",{className:"validation-panel",children:[(0,E.jsxs)("header",{className:"panel-header",children:[(0,E.jsx)("h2",{children:"Validation Preview"}),(0,E.jsx)("p",{className:"panel-description",children:"Run the validation engine against your current briefing to check for red flags, missing bridges, and module scores before exporting."})]}),(0,E.jsxs)("div",{className:"brief-stats",children:[(0,E.jsx)("h3",{children:"Current Brief"}),(0,E.jsxs)("div",{className:"stats-grid",children:[(0,E.jsxs)("div",{className:"stat-item",children:[(0,E.jsx)("span",{className:"stat-value",children:i.spaces.length}),(0,E.jsx)("span",{className:"stat-label",children:"Spaces"})]}),(0,E.jsxs)("div",{className:"stat-item",children:[(0,E.jsx)("span",{className:"stat-value",children:i.totalSF.toLocaleString()}),(0,E.jsx)("span",{className:"stat-label",children:"Total SF"})]}),(0,E.jsxs)("div",{className:"stat-item",children:[(0,E.jsx)("span",{className:"stat-value",children:i.adjacencyMatrix.length}),(0,E.jsx)("span",{className:"stat-label",children:"Adjacencies"})]}),(0,E.jsxs)("div",{className:"stat-item",children:[(0,E.jsx)("span",{className:"stat-value",children:i.appliedChanges.length}),(0,E.jsx)("span",{className:"stat-label",children:"Modifications"})]})]})]}),(0,E.jsxs)("div",{className:"validation-action",children:[(0,E.jsx)("button",{className:"run-validation-btn",onClick:a,disabled:n,children:n?"Running...":"Run Validation Preview"}),i.isDirty&&(0,E.jsx)("span",{className:"dirty-note",children:"Brief has unsaved changes"})]}),t&&(0,E.jsxs)("div",{className:"validation-results",children:[(0,E.jsxs)("div",{className:"gate-status",style:{backgroundColor:(e=>{switch(e){case"pass":return"#4caf50";case"warning":return"#ff9800";case"fail":return"#f44336";default:return"#9e9e9e"}})(t.gateStatus)},children:[(0,E.jsx)("span",{className:"status-emoji",children:(e=>{switch(e){case"pass":return"\u2713";case"warning":return"\u26a0";case"fail":return"\u2717";default:return"?"}})(t.gateStatus)}),(0,E.jsx)("span",{className:"status-text",children:t.gateStatus.toUpperCase()})]}),(0,E.jsxs)("div",{className:"score-display",children:[(0,E.jsxs)("div",{className:"score-circle",style:{borderColor:t.overallScore>=80?"#4caf50":t.overallScore>=60?"#ff9800":"#f44336"},children:[(0,E.jsx)("span",{className:"score-value",children:t.overallScore}),(0,E.jsx)("span",{className:"score-label",children:"/ 100"})]}),(0,E.jsx)("span",{className:"score-threshold",children:"Threshold: 80"})]}),(0,E.jsxs)("div",{className:"result-stats",children:[(0,E.jsxs)("div",{className:"result-stat ".concat(t.redFlagCount>0?"has-issues":"clear"),children:[(0,E.jsx)("span",{className:"stat-value",children:t.redFlagCount}),(0,E.jsx)("span",{className:"stat-label",children:"Red Flags"})]}),(0,E.jsxs)("div",{className:"result-stat ".concat(t.missingBridgeCount>0?"has-issues":"clear"),children:[(0,E.jsx)("span",{className:"stat-value",children:t.missingBridgeCount}),(0,E.jsx)("span",{className:"stat-label",children:"Missing Bridges"})]})]}),t.messages.length>0&&(0,E.jsxs)("div",{className:"validation-messages",children:[(0,E.jsx)("h4",{children:"Issues & Warnings"}),(0,E.jsx)("ul",{className:"message-list",children:t.messages.map((e,t)=>{const n=e.startsWith("[CRITICAL]"),a=e.startsWith("[WARNING]"),i=e.startsWith("[MISSING]"),r=e.startsWith("[SCORE]");let o="message-item";return n?o+=" critical":a?o+=" warning":i?o+=" missing":r&&(o+=" score"),(0,E.jsx)("li",{className:o,children:e},t)})})]}),0===t.messages.length&&"pass"===t.gateStatus&&(0,E.jsxs)("div",{className:"validation-success",children:[(0,E.jsx)("span",{className:"success-emoji",children:"\ud83c\udf89"}),(0,E.jsx)("p",{children:"All checks passed! Your brief is ready for export."})]})]}),!t&&!n&&(0,E.jsxs)("div",{className:"no-preview",children:[(0,E.jsx)("p",{children:'Click "Run Validation Preview" to check your brief against the N4S validation rules.'}),(0,E.jsxs)("div",{className:"preview-checks",children:[(0,E.jsx)("h4",{children:"Validation will check:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"5 Critical Red Flags (circulation, acoustics, kitchen)"}),(0,E.jsx)("li",{children:"5 Operational Bridges (butler pantry, guest autonomy, etc.)"}),(0,E.jsx)("li",{children:"8 Module Scores (kitchen, entertaining, primary suite, etc.)"}),(0,E.jsx)("li",{children:"Adjacency conflicts in your matrix"})]})]})]})]})};const qc=function(e){let{changes:t}=e;const n=t.filter(e=>"added"===e.type),a=t.filter(e=>"modified"===e.type),i=t.filter(e=>"removed"===e.type),r=[...new Set(t.map(e=>e.source))],o=r.filter(e=>e.includes(".")||e.includes("bridgeConfig")),s=r.filter(e=>"manual"===e||"Added manually"===e),l=e=>{switch(e){case"added":return"+";case"modified":return"\u270e";case"removed":return"\u2212";default:return"\u2022"}},c=e=>{switch(e){case"added":return"#4caf50";case"modified":return"#2196f3";case"removed":return"#f44336";default:return"#9e9e9e"}},d=e=>{if(e.startsWith("bridgeConfig."))return"Bridge: ".concat(e.replace("bridgeConfig.",""));if(e.includes(".")){const[t,n]=e.split(".");return"KYC: ".concat(t," \u2192 ").concat(n)}return e};return(0,E.jsxs)("div",{className:"changes-log",children:[(0,E.jsxs)("header",{className:"panel-header",children:[(0,E.jsx)("h2",{children:"Applied Changes"}),(0,E.jsx)("p",{className:"panel-description",children:"This log shows all modifications made to the baseline preset, including automatic changes from KYC requirements and manual edits."})]}),(0,E.jsxs)("div",{className:"changes-summary",children:[(0,E.jsxs)("div",{className:"summary-stat added",children:[(0,E.jsx)("span",{className:"stat-value",children:n.length}),(0,E.jsx)("span",{className:"stat-label",children:"Added"})]}),(0,E.jsxs)("div",{className:"summary-stat modified",children:[(0,E.jsx)("span",{className:"stat-value",children:a.length}),(0,E.jsx)("span",{className:"stat-label",children:"Modified"})]}),(0,E.jsxs)("div",{className:"summary-stat removed",children:[(0,E.jsx)("span",{className:"stat-value",children:i.length}),(0,E.jsx)("span",{className:"stat-label",children:"Removed"})]})]}),(0,E.jsxs)("div",{className:"source-breakdown",children:[(0,E.jsxs)("span",{className:"source-item kyc",children:[(0,E.jsx)("strong",{children:o.length})," from KYC"]}),(0,E.jsxs)("span",{className:"source-item manual",children:[(0,E.jsx)("strong",{children:s.length})," manual"]})]}),t.length>0?(0,E.jsx)("div",{className:"changes-list",children:t.map((e,t)=>(0,E.jsxs)("div",{className:"change-item ".concat(e.type),children:[(0,E.jsx)("div",{className:"change-icon",style:{backgroundColor:c(e.type)},children:l(e.type)}),(0,E.jsxs)("div",{className:"change-content",children:[(0,E.jsxs)("div",{className:"change-header",children:[(0,E.jsx)("span",{className:"space-code",children:e.spaceCode}),(0,E.jsx)("span",{className:"change-type",children:e.type})]}),(0,E.jsx)("div",{className:"change-description",children:e.description}),(0,E.jsx)("div",{className:"change-source",children:d(e.source)})]})]},t))}):(0,E.jsxs)("div",{className:"no-changes",children:[(0,E.jsx)("p",{children:"No changes have been applied to the baseline preset yet."}),(0,E.jsx)("p",{className:"hint",children:"Changes will appear here when you modify spaces, adjust SF allocations, or apply requirements from KYC."})]}),t.length>0&&(0,E.jsxs)("div",{className:"export-info",children:[(0,E.jsx)("h4",{children:"Export Note"}),(0,E.jsxs)("p",{children:["When you export this brief, these ",t.length," change(s) will be documented in the Executive Summary for architect reference."]})]})]})};function Hc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{showLabels:a=!0,filterZone:i,filterLevel:r}=n;let o=[...e];i&&(o=o.filter(e=>e.zone===i)),void 0!==r&&(o=o.filter(e=>e.level===r));const s=new Set(o.map(e=>e.code)),l=t.filter(e=>s.has(e.fromSpaceCode||"")&&s.has(e.toSpaceCode||""));let c="flowchart TB\n";const d=[...new Set(o.map(e=>e.zone))];for(const u of d){const e=o.filter(e=>e.zone===u),t=u.replace(/[^a-zA-Z0-9]/g,"_");c+="  subgraph ".concat(t,'["').concat(u,'"]\n');for(const n of e){const e=a?"".concat(n.code,": ").concat(n.name):n.code;c+="    ".concat(n.code,'["').concat(e,'"]\n')}c+="  end\n"}for(const u of l){if(!u.fromSpaceCode||!u.toSpaceCode||!u.relationship)continue;const e=Vc(u.relationship);c+="  ".concat(u.fromSpaceCode," ").concat(e," ").concat(u.toSpaceCode,"\n")}return c}function Gc(e,t){return Hc(e,t,{diagramType:"bubble",showLabels:!0})}function Uc(e,t){return Hc(e,t.filter(e=>"A"===e.relationship||"N"===e.relationship),{diagramType:"circulation",showLabels:!0})}function Wc(e,t){return Hc(e,t.filter(e=>"S"===e.relationship||"B"===e.relationship),{diagramType:"separation",showLabels:!0})}function Vc(e){switch(e){case"A":return"===";case"N":default:return"---";case"B":return"-.-";case"S":return"x--x"}}const Kc=function(e){let{spaces:t,adjacencyMatrix:n}=e;const[i,r]=(0,a.useState)("full"),[o,s]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(!0),[h,p]=(0,a.useState)(!1),[f,m]=(0,a.useState)(""),[g,v]=(0,a.useState)(null),y=(0,a.useRef)(null),b=(0,a.useMemo)(()=>[...new Set(t.map(e=>e.zone))].filter(Boolean).sort(),[t]),x=(0,a.useMemo)(()=>[...new Set(t.map(e=>e.level))].sort(),[t]),S=(0,a.useMemo)(()=>{const e={showLabels:d,filterZone:o||void 0,filterLevel:l?parseInt(l):void 0};switch(i){case"bubble":return Gc(t,n);case"circulation":return Uc(t,n);case"separation":return Wc(t,n);default:return Hc(t,n,e)}},[t,n,i,o,l,d]);return(0,a.useEffect)(()=>{(async()=>{if(window.mermaid)try{v(null);const e="mermaid-".concat(Date.now()),{svg:t}=await window.mermaid.render(e,S);m(t)}catch(Oe){console.error("Mermaid render error:",Oe),v("Failed to render diagram")}else v("Mermaid library not loaded")})()},[S]),(0,E.jsxs)("div",{className:"diagram-view",children:[(0,E.jsxs)("div",{className:"diagram-controls",children:[(0,E.jsxs)("div",{className:"control-group",children:[(0,E.jsx)("label",{children:"Diagram Type:"}),(0,E.jsxs)("select",{value:i,onChange:e=>r(e.target.value),children:[(0,E.jsx)("option",{value:"full",children:"Full Adjacency"}),(0,E.jsx)("option",{value:"bubble",children:"Bubble (Zones)"}),(0,E.jsx)("option",{value:"circulation",children:"Circulation (A/N)"}),(0,E.jsx)("option",{value:"separation",children:"Separation (S/B)"})]})]}),(0,E.jsxs)("div",{className:"control-group",children:[(0,E.jsx)("label",{children:"Filter Zone:"}),(0,E.jsxs)("select",{value:o,onChange:e=>s(e.target.value),children:[(0,E.jsx)("option",{value:"",children:"All Zones"}),b.map(e=>(0,E.jsx)("option",{value:e,children:e},e))]})]}),(0,E.jsxs)("div",{className:"control-group",children:[(0,E.jsx)("label",{children:"Filter Level:"}),(0,E.jsxs)("select",{value:l,onChange:e=>c(e.target.value),children:[(0,E.jsx)("option",{value:"",children:"All Levels"}),x.map(e=>(0,E.jsxs)("option",{value:e,children:["Level ",e]},e))]})]}),(0,E.jsx)("div",{className:"control-group checkbox",children:(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"checkbox",checked:d,onChange:e=>u(e.target.checked)}),"Show Labels"]})})]}),(0,E.jsxs)("div",{className:"diagram-legend",children:[(0,E.jsxs)("div",{className:"legend-item",children:[(0,E.jsx)("div",{className:"legend-line adjacent"}),(0,E.jsx)("span",{children:"Adjacent (A)"})]}),(0,E.jsxs)("div",{className:"legend-item",children:[(0,E.jsx)("div",{className:"legend-line near"}),(0,E.jsx)("span",{children:"Near (N)"})]}),(0,E.jsxs)("div",{className:"legend-item",children:[(0,E.jsx)("div",{className:"legend-line buffered"}),(0,E.jsx)("span",{children:"Buffered (B)"})]}),(0,E.jsxs)("div",{className:"legend-item",children:[(0,E.jsx)("div",{className:"legend-line separate"}),(0,E.jsx)("span",{children:"Separate (S)"})]})]}),(0,E.jsx)("div",{className:"diagram-container",ref:y,children:g?(0,E.jsxs)("div",{className:"mermaid-placeholder",children:[(0,E.jsx)("p",{children:g}),(0,E.jsx)("p",{className:"hint",children:"Check that Mermaid.js is loaded correctly."})]}):f?(0,E.jsx)("div",{className:"mermaid",dangerouslySetInnerHTML:{__html:f}}):(0,E.jsx)("div",{className:"mermaid-placeholder",children:(0,E.jsx)("p",{children:"Loading diagram..."})})}),(0,E.jsxs)("div",{className:"diagram-actions",children:[(0,E.jsx)("button",{className:"btn-secondary",onClick:()=>{if(!f)return;const e=new Blob([f],{type:"image/svg+xml"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="adjacency-diagram.svg",n.click(),URL.revokeObjectURL(t)},children:"Export SVG"}),(0,E.jsx)("button",{className:"btn-secondary",onClick:()=>{navigator.clipboard.writeText(S)},children:"Copy Mermaid Code"}),(0,E.jsx)("button",{className:"btn-secondary",onClick:()=>p(!h),children:h?"Hide Code":"Show Code"})]}),h&&(0,E.jsxs)("details",{className:"code-preview",open:!0,children:[(0,E.jsx)("summary",{children:"Mermaid Code"}),(0,E.jsx)("pre",{children:S})]})]})},Yc=[{id:"10k",name:"10K Signature",targetSF:1e4},{id:"15k",name:"15K Grand",targetSF:15e3},{id:"20k",name:"20K Estate",targetSF:2e4}];function Zc(e){let{projectId:t,projectName:n,kycContext:i,initialPreset:r,onSave:o,onCancel:s}=e;const[l,c]=(0,a.useState)("spaces"),[d,u]=(0,a.useState)(!1),h=Ec({initialPreset:r,kycContext:i}),{state:p,isLoading:f,isValidating:m,validationPreview:g,handleUpdateSpace:v,handleAddSpace:y,handleRemoveSpace:b,handleUpdateAdjacency:x,handleToggleBridge:S,handleLoadPreset:_,runValidationPreview:w,handleExport:N,canUndo:k,handleUndo:C,handleReset:j}=h,P=(0,a.useMemo)(()=>{const e=[...new Set(p.spaces.map(e=>e.level))].sort();return e.map(e=>({level:e,spaces:p.spaces.filter(t=>t.level===e),totalSF:p.spaces.filter(t=>t.level===e).reduce((e,t)=>e+(t.targetSF||0),0)}))},[p.spaces]),A=[{id:"spaces",label:"Spaces",count:p.spaces.length},{id:"adjacency",label:"Adjacency",count:p.adjacencyMatrix.length},{id:"diagram",label:"Diagram"},{id:"bridges",label:"Bridges"},{id:"validation",label:"Validation"},{id:"changes",label:"Changes",count:p.appliedChanges.length}];return(0,E.jsxs)("div",{className:"briefing-builder",children:[(0,E.jsxs)("header",{className:"builder-header",children:[(0,E.jsxs)("div",{className:"header-left",children:[(0,E.jsx)("h1",{children:n||"Briefing Builder"}),(0,E.jsx)("span",{className:"project-id",children:t})]}),(0,E.jsxs)("div",{className:"header-right",children:[k&&(0,E.jsx)("button",{className:"undo-btn",onClick:C,children:"\u21b6 Undo"}),(0,E.jsx)("button",{className:"reset-btn",onClick:j,children:"Reset"}),s&&(0,E.jsx)("button",{className:"cancel-btn",onClick:s,children:"Cancel"}),(0,E.jsx)("button",{className:"save-btn",onClick:()=>{const e=N();null===o||void 0===o||o(e)},children:"Save Brief"})]})]}),(0,E.jsx)("nav",{className:"builder-tabs",children:A.map(e=>(0,E.jsxs)("button",{className:"tab-btn ".concat(l===e.id?"active":""),onClick:()=>c(e.id),children:[e.label,void 0!==e.count&&(0,E.jsx)("span",{className:"tab-count",children:e.count})]},e.id))}),(0,E.jsxs)("main",{className:"builder-content",children:[f&&(0,E.jsx)("div",{className:"loading-overlay",children:"Loading..."}),"spaces"===l&&(0,E.jsxs)("div",{className:"spaces-tab",children:[(0,E.jsxs)("div",{className:"preset-selector",children:[(0,E.jsx)("label",{children:"Baseline Preset:"}),(0,E.jsx)("div",{className:"preset-buttons",children:Yc.map(e=>(0,E.jsxs)("button",{className:"preset-btn ".concat(p.basePreset===e.id?"active":""),onClick:()=>_(e.id),children:[e.name,(0,E.jsxs)("span",{className:"preset-sf",children:[e.targetSF.toLocaleString()," SF"]})]},e.id))})]}),(0,E.jsxs)("div",{className:"summary-stats",children:[(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("span",{className:"stat-value",children:p.spaces.length}),(0,E.jsx)("span",{className:"stat-label",children:"Spaces"})]}),(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("span",{className:"stat-value",children:p.totalSF.toLocaleString()}),(0,E.jsx)("span",{className:"stat-label",children:"Total SF"})]}),(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("span",{className:"stat-value",children:p.appliedChanges.length}),(0,E.jsx)("span",{className:"stat-label",children:"Changes"})]})]}),(0,E.jsx)("div",{className:"spaces-by-level",children:P.map(e=>{let{level:t,spaces:n,totalSF:a}=e;return(0,E.jsxs)("div",{className:"level-group",children:[(0,E.jsxs)("div",{className:"level-header",children:[(0,E.jsxs)("h3",{children:["Level ",t]}),(0,E.jsxs)("span",{className:"level-sf",children:[a.toLocaleString()," SF"]})]}),(0,E.jsx)("div",{className:"spaces-grid",children:n.map(e=>(0,E.jsx)(Mc,{space:e,onUpdate:t=>v(e.code,t),onDelete:()=>b(e.code)},e.code))})]},t)})}),(0,E.jsx)("button",{className:"add-space-btn",onClick:()=>u(!0),children:"+ Add Custom Space"}),d&&(0,E.jsx)($c,{onAdd:e=>{y(e),u(!1)},onClose:()=>u(!1),existingCodes:p.spaces.map(e=>e.code)})]}),"adjacency"===l&&(0,E.jsx)(Dc,{spaces:p.spaces,adjacencyMatrix:p.adjacencyMatrix,onUpdate:x}),"diagram"===l&&(0,E.jsx)(Kc,{spaces:p.spaces,adjacencyMatrix:p.adjacencyMatrix}),"bridges"===l&&(0,E.jsx)(Bc,{bridgeConfig:p.bridgeConfig,onToggle:S,kycContext:i}),"validation"===l&&(0,E.jsx)(zc,{preview:g,isLoading:m,onRunValidation:w,state:p}),"changes"===l&&(0,E.jsx)(qc,{changes:p.appliedChanges})]}),p.isDirty&&(0,E.jsx)("div",{className:"dirty-indicator",children:"Unsaved changes"})]})}function $c(e){let{onAdd:t,onClose:n,existingCodes:i}=e;const[r,o]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[c,d]=(0,a.useState)("living"),[u,h]=(0,a.useState)(1),[p,f]=(0,a.useState)(200),m=r.length>=2&&s.length>=2&&!i.includes(r.toUpperCase());return(0,E.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,E.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,E.jsx)("h2",{children:"Add Custom Space"}),(0,E.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m&&t({code:r.toUpperCase(),name:s,zone:c,level:u,sf:p})},children:[(0,E.jsxs)("div",{className:"form-row",children:[(0,E.jsxs)("label",{children:["Code:",(0,E.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value.toUpperCase()),placeholder:"e.g., YOGA",maxLength:8})]}),(0,E.jsxs)("label",{children:["Name:",(0,E.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"e.g., Yoga Studio"})]})]}),(0,E.jsxs)("div",{className:"form-row",children:[(0,E.jsxs)("label",{children:["Zone:",(0,E.jsxs)("select",{value:c,onChange:e=>d(e.target.value),children:[(0,E.jsx)("option",{value:"living",children:"Living"}),(0,E.jsx)("option",{value:"sleeping",children:"Sleeping"}),(0,E.jsx)("option",{value:"service",children:"Service"}),(0,E.jsx)("option",{value:"wellness",children:"Wellness"}),(0,E.jsx)("option",{value:"outdoor",children:"Outdoor"})]})]}),(0,E.jsxs)("label",{children:["Level:",(0,E.jsx)("input",{type:"number",value:u,onChange:e=>h(parseInt(e.target.value)||1),min:0,max:3})]}),(0,E.jsxs)("label",{children:["SF:",(0,E.jsx)("input",{type:"number",value:p,onChange:e=>f(parseInt(e.target.value)||0),min:50,max:2e3,step:50})]})]}),(0,E.jsxs)("div",{className:"form-actions",children:[(0,E.jsx)("button",{type:"button",onClick:n,children:"Cancel"}),(0,E.jsx)("button",{type:"submit",disabled:!m,children:"Add Space"})]})]})]})})}var Qc=n(9367),Jc=n(8907);n(8237);const Xc=d("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),ed=d("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),td=d("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]),nd=d("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),ad=d("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]),id={Briefcase:K,ChefHat:ed,Tv:td,Users:h,BedDouble:nd,Wine:ad,Dumbbell:Gi,Home:u};function rd(e){let{option:t,isSelected:n,isRecommended:a,onSelect:i}=e;return(0,E.jsxs)("div",{className:"option-item ".concat(n?"selected":""," ").concat(a?"recommended":""),onClick:i,children:[(0,E.jsx)("div",{className:"option-radio",children:(0,E.jsx)("div",{className:"radio-circle ".concat(n?"checked":""),children:n&&(0,E.jsx)("div",{className:"radio-dot"})})}),(0,E.jsxs)("div",{className:"option-content",children:[(0,E.jsxs)("div",{className:"option-header",children:[(0,E.jsx)("span",{className:"option-label",children:t.label}),a&&(0,E.jsx)("span",{className:"recommended-tag",children:"Recommended"}),t.sfImpact&&t.sfImpact>0&&(0,E.jsxs)("span",{className:"sf-impact",children:["+",t.sfImpact," SF"]})]}),(0,E.jsx)("p",{className:"option-description",children:t.description}),t.warnings.length>0&&!n&&(0,E.jsxs)("span",{className:"option-warning-hint",children:[(0,E.jsx)(te,{className:"hint-icon"}),t.warnings.length," consideration",1!==t.warnings.length?"s":""]})]})]})}const od=function(e){let{decision:t,selectedOptionId:n,recommendedOptionId:a,confidence:i,reasoning:r,onSelect:o,onExpand:s,compact:l=!1}=e;const c=t.options.find(e=>e.id===n),d=n===a,u=(null===c||void 0===c?void 0:c.warnings)&&c.warnings.length>0,h=id[t.icon]||K;return l?(0,E.jsxs)("div",{className:"decision-card compact ".concat(u?"has-warnings":""),onClick:s,children:[(0,E.jsx)("div",{className:"card-icon",children:(0,E.jsx)(h,{className:"icon"})}),(0,E.jsxs)("div",{className:"card-content",children:[(0,E.jsx)("h3",{className:"card-title",children:t.title}),(0,E.jsx)("p",{className:"card-selection",children:(null===c||void 0===c?void 0:c.label)||"Not selected"})]}),(0,E.jsxs)("div",{className:"card-status",children:[d?(0,E.jsxs)("span",{className:"status-badge recommended",children:[(0,E.jsx)(Xc,{className:"badge-icon"}),"Recommended"]}):u?(0,E.jsxs)("span",{className:"status-badge warning",children:[(0,E.jsx)(te,{className:"badge-icon"}),null===c||void 0===c?void 0:c.warnings.length," warning",1!==(null===c||void 0===c?void 0:c.warnings.length)?"s":""]}):(0,E.jsx)("span",{className:"status-badge custom",children:"Custom"}),(0,E.jsx)(b,{className:"chevron"})]})]}):(0,E.jsxs)("div",{className:"decision-card expanded ".concat(u?"has-warnings":""),children:[(0,E.jsxs)("div",{className:"card-header",children:[(0,E.jsx)("div",{className:"header-icon",children:(0,E.jsx)(h,{className:"icon"})}),(0,E.jsxs)("div",{className:"header-content",children:[(0,E.jsx)("h3",{className:"card-title",children:t.title}),(0,E.jsx)("p",{className:"card-question",children:t.question})]}),i&&(0,E.jsxs)("div",{className:"confidence-badge ".concat(i),children:[i," confidence"]})]}),(0,E.jsx)("p",{className:"card-context",children:t.context}),r&&(0,E.jsxs)("div",{className:"recommendation-reasoning",children:[(0,E.jsx)("strong",{children:"Why we recommend:"})," ",r]}),(0,E.jsx)("div",{className:"options-list",children:t.options.map(e=>(0,E.jsx)(rd,{option:e,isSelected:e.id===n,isRecommended:e.id===a,onSelect:()=>o(e.id)},e.id))}),u&&c&&(0,E.jsxs)("div",{className:"warnings-panel",children:[(0,E.jsxs)("h4",{children:[(0,E.jsx)(te,{className:"warning-icon"}),"Considerations"]}),(0,E.jsx)("ul",{children:c.warnings.map((e,t)=>(0,E.jsx)("li",{children:e},t))})]})]})};const sd=function(e){let{recommendations:t,selections:n,presetName:a,totalSF:i,onSelectionChange:r,onExpandDecision:o,onAcceptAll:s,onReviewAll:l}=e;const c=t.length,d=t.filter(e=>n[e.decision.id]!==e.recommendedOption.id).length,u=t.reduce((e,t)=>{var a;const i=n[t.decision.id],r=t.decision.options.find(e=>e.id===i);return e+((null===r||void 0===r||null===(a=r.warnings)||void 0===a?void 0:a.length)||0)},0),h=t.reduce((e,t)=>{const a=n[t.decision.id],i=t.decision.options.find(e=>e.id===a);return e+((null===i||void 0===i?void 0:i.sfImpact)||0)},0),p=t.filter(e=>"high"===e.confidence),f=t.filter(e=>"medium"===e.confidence),g=t.filter(e=>"low"===e.confidence);return(0,E.jsxs)("div",{className:"recommendations-summary",children:[(0,E.jsxs)("header",{className:"summary-header",children:[(0,E.jsx)("div",{className:"header-icon",children:(0,E.jsx)(Wi,{className:"icon"})}),(0,E.jsxs)("div",{className:"header-content",children:[(0,E.jsx)("h2",{children:"Your Personalized Layout"}),(0,E.jsxs)("p",{children:["Based on your lifestyle, we recommend these key relationships for your ",a," home."]})]})]}),(0,E.jsxs)("div",{className:"summary-stats",children:[(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("span",{className:"stat-value",children:c}),(0,E.jsx)("span",{className:"stat-label",children:"Decisions"})]}),(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("span",{className:"stat-value",children:c-d}),(0,E.jsx)("span",{className:"stat-label",children:"Recommended"})]}),(0,E.jsxs)("div",{className:"stat ".concat(u>0?"has-warnings":""),children:[(0,E.jsx)("span",{className:"stat-value",children:u}),(0,E.jsx)("span",{className:"stat-label",children:"Warnings"})]}),(0,E.jsxs)("div",{className:"stat",children:[(0,E.jsx)("span",{className:"stat-value",children:h>0?"+".concat(h.toLocaleString()):"0"}),(0,E.jsx)("span",{className:"stat-label",children:"SF Impact"})]})]}),p.length>0&&(0,E.jsxs)("section",{className:"confidence-section high",children:[(0,E.jsxs)("h3",{className:"section-title",children:[(0,E.jsx)(Xc,{className:"section-icon"}),"Strong Recommendations"]}),(0,E.jsx)("p",{className:"section-description",children:"Based on clear signals from your lifestyle profile"}),(0,E.jsx)("div",{className:"decisions-list",children:p.map(e=>(0,E.jsx)(od,{decision:e.decision,selectedOptionId:n[e.decision.id],recommendedOptionId:e.recommendedOption.id,confidence:e.confidence,reasoning:e.reasoning,onSelect:t=>r(e.decision.id,t),onExpand:()=>o(e.decision.id),compact:!0},e.decision.id))})]}),f.length>0&&(0,E.jsxs)("section",{className:"confidence-section medium",children:[(0,E.jsxs)("h3",{className:"section-title",children:[(0,E.jsx)(m,{className:"section-icon"}),"Suggested Defaults"]}),(0,E.jsx)("p",{className:"section-description",children:"Reasonable defaults you may want to customize"}),(0,E.jsx)("div",{className:"decisions-list",children:f.map(e=>(0,E.jsx)(od,{decision:e.decision,selectedOptionId:n[e.decision.id],recommendedOptionId:e.recommendedOption.id,confidence:e.confidence,reasoning:e.reasoning,onSelect:t=>r(e.decision.id,t),onExpand:()=>o(e.decision.id),compact:!0},e.decision.id))})]}),g.length>0&&(0,E.jsxs)("section",{className:"confidence-section low",children:[(0,E.jsxs)("h3",{className:"section-title",children:[(0,E.jsx)(te,{className:"section-icon"}),"Needs Your Input"]}),(0,E.jsx)("p",{className:"section-description",children:"We need more information to recommend these"}),(0,E.jsx)("div",{className:"decisions-list",children:g.map(e=>(0,E.jsx)(od,{decision:e.decision,selectedOptionId:n[e.decision.id],recommendedOptionId:e.recommendedOption.id,confidence:e.confidence,reasoning:e.reasoning,onSelect:t=>r(e.decision.id,t),onExpand:()=>o(e.decision.id),compact:!0},e.decision.id))})]}),(0,E.jsxs)("div",{className:"summary-actions",children:[(0,E.jsxs)("button",{className:"btn-secondary",onClick:l,children:["Review Each Decision",(0,E.jsx)(b,{className:"btn-icon"})]}),(0,E.jsxs)("button",{className:"btn-primary",onClick:s,children:[(0,E.jsx)(Xc,{className:"btn-icon"}),"Accept All & Continue"]})]}),d>0&&(0,E.jsxs)("div",{className:"custom-notice",children:[(0,E.jsx)(te,{className:"notice-icon"}),(0,E.jsxs)("span",{children:["You've customized ",d," decision",1!==d?"s":"","from recommendations."]})]})]})},ld=d("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),cd={Briefcase:K,ChefHat:ed,Tv:td,Users:h,BedDouble:nd,Wine:ad,Dumbbell:Gi,Home:u};function dd(e){let{option:t,isSelected:n,isRecommended:a,onSelect:i}=e;return(0,E.jsxs)("div",{className:"detail-option-card ".concat(n?"selected":""," ").concat(a?"recommended":""),onClick:i,children:[(0,E.jsxs)("div",{className:"option-header",children:[(0,E.jsx)("div",{className:"option-radio",children:(0,E.jsx)("div",{className:"radio-circle ".concat(n?"checked":""),children:n&&(0,E.jsx)("div",{className:"radio-dot"})})}),(0,E.jsx)("h4",{className:"option-title",children:t.label}),a&&(0,E.jsxs)("span",{className:"recommended-tag",children:[(0,E.jsx)(Xc,{className:"tag-icon"}),"Recommended"]})]}),(0,E.jsx)("p",{className:"option-description",children:t.description}),(0,E.jsxs)("div",{className:"option-meta",children:[t.sfImpact&&t.sfImpact>0&&(0,E.jsxs)("span",{className:"meta-item sf",children:["+",t.sfImpact," SF"]}),t.bridgeRequired&&(0,E.jsxs)("span",{className:"meta-item bridge",children:["Adds ",t.bridgeRequired.replace(/([A-Z])/g," $1").trim()]}),t.warnings.length>0&&(0,E.jsxs)("span",{className:"meta-item warnings",children:[(0,E.jsx)(te,{className:"meta-icon"}),t.warnings.length," consideration",1!==t.warnings.length?"s":""]})]}),(0,E.jsxs)("div",{className:"option-relationship",children:[(0,E.jsx)("span",{className:"relationship-label",children:"Creates:"}),(0,E.jsxs)("span",{className:"relationship-value",children:["A"===t.relationship&&"Adjacent connection","N"===t.relationship&&"Near placement","B"===t.relationship&&"Buffered separation","S"===t.relationship&&"Full separation"]})]})]})}const ud=function(e){let{decision:t,selectedOptionId:n,recommendedOptionId:a,reasoning:i,currentIndex:r,totalCount:o,onSelect:s,onPrevious:l,onNext:c,onBack:d}=e;const u=t.options.find(e=>e.id===n),h=cd[t.icon]||K;return(0,E.jsxs)("div",{className:"decision-detail",children:[(0,E.jsxs)("header",{className:"detail-header",children:[(0,E.jsxs)("button",{className:"back-btn",onClick:d,children:[(0,E.jsx)(Ki,{className:"btn-icon"}),"All Decisions"]}),(0,E.jsxs)("div",{className:"progress-indicator",children:[r+1," of ",o]})]}),(0,E.jsxs)("div",{className:"detail-content",children:[(0,E.jsxs)("div",{className:"decision-header",children:[(0,E.jsx)("div",{className:"header-icon large",children:(0,E.jsx)(h,{className:"icon"})}),(0,E.jsxs)("div",{className:"header-text",children:[(0,E.jsx)("h2",{children:t.title}),(0,E.jsx)("p",{className:"question",children:t.question})]})]}),(0,E.jsxs)("div",{className:"context-panel",children:[(0,E.jsx)(ld,{className:"context-icon"}),(0,E.jsx)("p",{children:t.context})]}),i&&(0,E.jsxs)("div",{className:"recommendation-panel",children:[(0,E.jsxs)("div",{className:"panel-header",children:[(0,E.jsx)(Xc,{className:"panel-icon"}),(0,E.jsx)("strong",{children:"Our Recommendation"})]}),(0,E.jsx)("p",{children:i})]}),(0,E.jsxs)("div",{className:"options-section",children:[(0,E.jsx)("h3",{children:"Choose Your Preference"}),(0,E.jsx)("div",{className:"options-grid",children:t.options.map(e=>(0,E.jsx)(dd,{option:e,isSelected:e.id===n,isRecommended:e.id===a,onSelect:()=>s(e.id)},e.id))})]}),u&&u.warnings.length>0&&(0,E.jsxs)("div",{className:"warnings-section",children:[(0,E.jsxs)("h3",{children:[(0,E.jsx)(te,{className:"section-icon warning"}),"Things to Consider"]}),(0,E.jsx)("ul",{className:"warnings-list",children:u.warnings.map((e,t)=>(0,E.jsxs)("li",{className:"warning-item",children:[(0,E.jsx)(te,{className:"warning-icon"}),(0,E.jsx)("span",{children:e})]},t))}),(0,E.jsx)("p",{className:"warning-note",children:"These aren't dealbreakers \u2014 just factors to keep in mind as you plan your home. You can proceed with this choice if it fits your priorities."})]}),(null===u||void 0===u?void 0:u.bridgeRequired)&&(0,E.jsxs)("div",{className:"bridge-notice",children:[(0,E.jsx)(ld,{className:"notice-icon"}),(0,E.jsxs)("div",{className:"notice-content",children:[(0,E.jsx)("strong",{children:"This choice adds a bridge space"}),(0,E.jsxs)("p",{children:["A ",u.bridgeRequired.replace(/([A-Z])/g," $1").trim(),"will be added to support this layout choice.",u.sfImpact&&" (+".concat(u.sfImpact," SF)")]})]})]})]}),(0,E.jsxs)("footer",{className:"detail-footer",children:[(0,E.jsxs)("button",{className:"nav-btn prev",onClick:l,disabled:0===r,children:[(0,E.jsx)(Ki,{className:"btn-icon"}),"Previous"]}),(0,E.jsxs)("div",{className:"selection-summary",children:[(0,E.jsx)("span",{className:"summary-label",children:"Selected:"}),(0,E.jsx)("span",{className:"summary-value",children:null===u||void 0===u?void 0:u.label}),(null===u||void 0===u?void 0:u.id)===a&&(0,E.jsxs)("span",{className:"recommended-badge",children:[(0,E.jsx)(Xc,{className:"badge-icon"}),"Recommended"]})]}),(0,E.jsxs)("button",{className:"nav-btn next",onClick:c,disabled:r===o-1,children:["Next",(0,E.jsx)(A,{className:"btn-icon"})]})]})]})},hd=d("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),pd=d("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),fd=d("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),md=d("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),gd={Briefcase:K,ChefHat:ed,Tv:td,Users:h,BedDouble:nd,Wine:ad,Dumbbell:Gi,Home:u};function vd(e){return{butlerPantry:"Service corridor between kitchen and dining for discreet service",soundLock:"Acoustic vestibule to isolate media room from sleeping areas",guestAutonomy:"Independent guest suite with kitchenette and separate entry option",wetFeetIntercept:"Pool-to-house transition zone with drainage and towel storage",opsCore:"Staff operations hub for deliveries, packages, and housekeeping"}[e]||"Supporting space for your layout"}const yd=function(e){let{result:t,decisions:i,presetName:r,baseSF:o,onBack:s,onViewDiagram:l,onExport:c,onContinueToBuilder:d}=e;const u=o+t.totalSfImpact,h=t.warningCount>0,p=t.redFlagCount>0?"warning":h?"advisory":"pass",[f,m]=(0,a.useState)(!0),[g,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),x=(0,a.useRef)(null),S=t.choices.filter(e=>e.isDefault),_=t.choices.filter(e=>!e.isDefault),w=t.choices.filter(e=>e.warnings.length>0),N=a.useMemo(()=>{try{const e=["flowchart LR"],n=new Set;return t.choices.forEach(t=>{const a=i.find(e=>e.id===t.decisionId),r=null===a||void 0===a?void 0:a.options.find(e=>e.id===t.selectedOptionId);if(!a||!r)return;const o=a.primarySpace,s=r.targetSpace;n.has(o)||(e.push("  ".concat(o,"[").concat(o,"]")),n.add(o)),n.has(s)||(e.push("  ".concat(s,"[").concat(s,"]")),n.add(s));const l=r.relationship;"A"===l?e.push("  ".concat(o," === ").concat(s)):"B"===l?e.push("  ".concat(o," --- ").concat(s)):"S"===l&&e.push("  ".concat(o," -.- ").concat(s))}),e.join("\n")}catch(ph){return console.error("Failed to generate diagram:",ph),null}},[t.choices,i]);(0,a.useEffect)(()=>{if(!N||!x.current||!f)return;(async()=>{try{const e=window.mermaid;if(!e)return void console.warn("Mermaid not loaded");x.current.innerHTML="";const t=document.createElement("div");t.className="mermaid",t.textContent=N,x.current.appendChild(t),await e.init(void 0,t),b(!0)}catch(ph){console.error("Mermaid render error:",ph)}})()},[N,f]);const k=()=>{const e={exportDate:(new Date).toISOString(),preset:r,baseSF:o,totalSF:u,sfImpact:t.totalSfImpact,decisions:t.choices.map(e=>{const t=i.find(t=>t.id===e.decisionId),n=null===t||void 0===t?void 0:t.options.find(t=>t.id===e.selectedOptionId);return{decision:null===t||void 0===t?void 0:t.title,selection:null===n||void 0===n?void 0:n.label,relationship:null===n||void 0===n?void 0:n.relationship,targetSpace:null===n||void 0===n?void 0:n.targetSpace,isRecommended:e.isDefault,warnings:e.warnings,sfImpact:(null===n||void 0===n?void 0:n.sfImpact)||0}}),bridges:t.requiredBridges,totalWarnings:t.warningCount,status:p},n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download="adjacency-personalization-".concat(r.replace(/[^a-z0-9]/gi,""),".json"),s.click(),URL.revokeObjectURL(a)};return(0,E.jsxs)("div",{className:"personalization-result",children:[(0,E.jsx)("header",{className:"result-header",children:(0,E.jsxs)("button",{className:"back-btn",onClick:s,children:[(0,E.jsx)(Ki,{className:"btn-icon"}),"Back to Decisions"]})}),(0,E.jsxs)("div",{className:"result-content",children:[(0,E.jsxs)("div",{className:"status-banner ".concat(p),children:["pass"===p&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Xc,{className:"status-icon"}),(0,E.jsxs)("div",{className:"status-text",children:[(0,E.jsx)("h2",{children:"Your Layout is Optimized"}),(0,E.jsx)("p",{children:"All recommendations accepted with no concerns"})]})]}),"advisory"===p&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(te,{className:"status-icon"}),(0,E.jsxs)("div",{className:"status-text",children:[(0,E.jsx)("h2",{children:"Ready with Advisories"}),(0,E.jsxs)("p",{children:[t.warningCount," consideration",1!==t.warningCount?"s":""," to review"]})]})]}),"warning"===p&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(te,{className:"status-icon"}),(0,E.jsxs)("div",{className:"status-text",children:[(0,E.jsx)("h2",{children:"Review Recommended"}),(0,E.jsxs)("p",{children:[t.redFlagCount," potential issue",1!==t.redFlagCount?"s":""," detected"]})]})]})]}),(0,E.jsxs)("div",{className:"summary-cards",children:[(0,E.jsxs)("div",{className:"summary-card",children:[(0,E.jsx)("span",{className:"card-label",children:"Total Program"}),(0,E.jsxs)("span",{className:"card-value",children:[u.toLocaleString()," SF"]}),(0,E.jsxs)("span",{className:"card-detail",children:[r," baseline",t.totalSfImpact>0&&" + ".concat(t.totalSfImpact," SF")]})]}),(0,E.jsxs)("div",{className:"summary-card",children:[(0,E.jsx)("span",{className:"card-label",children:"Decisions Made"}),(0,E.jsx)("span",{className:"card-value",children:t.choices.length}),(0,E.jsxs)("span",{className:"card-detail",children:[S.length," recommended, ",_.length," custom"]})]}),(0,E.jsxs)("div",{className:"summary-card ".concat(h?"has-warnings":""),children:[(0,E.jsx)("span",{className:"card-label",children:"Considerations"}),(0,E.jsx)("span",{className:"card-value",children:t.warningCount}),(0,E.jsx)("span",{className:"card-detail",children:0===t.warningCount?"None":"Review below"})]}),(0,E.jsxs)("div",{className:"summary-card",children:[(0,E.jsx)("span",{className:"card-label",children:"Bridges Added"}),(0,E.jsx)("span",{className:"card-value",children:t.requiredBridges.length}),(0,E.jsx)("span",{className:"card-detail",children:0===t.requiredBridges.length?"None required":t.requiredBridges.map(e=>e.replace(/([A-Z])/g," $1").trim()).join(", ")})]})]}),N&&(0,E.jsxs)("section",{className:"diagram-section",children:[(0,E.jsxs)("div",{className:"section-header",children:[(0,E.jsxs)("h3",{children:[(0,E.jsx)(pi,{className:"section-icon"}),"Relationship Diagram"]}),(0,E.jsxs)("div",{className:"diagram-controls",children:[(0,E.jsxs)("button",{className:"control-btn",onClick:()=>m(!f),children:[f?(0,E.jsx)(hd,{className:"btn-icon"}):(0,E.jsx)(pi,{className:"btn-icon"}),f?"Hide":"Show"]}),f&&(0,E.jsxs)("button",{className:"control-btn",onClick:()=>v(!g),children:[g?(0,E.jsx)(pd,{className:"btn-icon"}):(0,E.jsx)(fd,{className:"btn-icon"}),g?"Collapse":"Expand"]})]})]}),f&&(0,E.jsxs)("div",{className:"diagram-container ".concat(g?"expanded":""),children:[(0,E.jsx)("div",{ref:x,className:"mermaid-diagram"}),!y&&(0,E.jsx)("div",{className:"diagram-loading",children:"Loading diagram..."})]})]}),(0,E.jsxs)("section",{className:"choices-section",children:[(0,E.jsx)("h3",{children:"Your Selections"}),(0,E.jsx)("div",{className:"choices-list",children:t.choices.map(e=>{const t=i.find(t=>t.id===e.decisionId);if(!t)return null;const n=t.options.find(t=>t.id===e.selectedOptionId);if(!n)return null;const a=gd[t.icon]||K;return(0,E.jsxs)("div",{className:"choice-item ".concat(e.warnings.length>0?"has-warnings":""),children:[(0,E.jsx)("div",{className:"choice-icon",children:(0,E.jsx)(a,{className:"icon"})}),(0,E.jsxs)("div",{className:"choice-content",children:[(0,E.jsxs)("div",{className:"choice-header",children:[(0,E.jsx)("span",{className:"choice-title",children:t.title}),e.isDefault?(0,E.jsxs)("span",{className:"choice-badge recommended",children:[(0,E.jsx)(Xc,{className:"badge-icon"}),"Recommended"]}):(0,E.jsx)("span",{className:"choice-badge custom",children:"Custom"})]}),(0,E.jsx)("span",{className:"choice-selection",children:n.label}),(0,E.jsxs)("span",{className:"choice-relationship",children:[t.primarySpace," \u2192 ",n.targetSpace," (",n.relationship,")"]}),e.warnings.length>0&&(0,E.jsx)("div",{className:"choice-warnings",children:e.warnings.map((e,t)=>(0,E.jsxs)("span",{className:"warning-tag",children:[(0,E.jsx)(te,{className:"warning-icon"}),e]},t))})]})]},e.decisionId)})})]}),t.requiredBridges.length>0&&(0,E.jsxs)("section",{className:"bridges-section",children:[(0,E.jsx)("h3",{children:"Required Bridge Spaces"}),(0,E.jsx)("p",{className:"section-description",children:"These spaces will be added to support your layout choices:"}),(0,E.jsx)("div",{className:"bridges-list",children:t.requiredBridges.map(e=>(0,E.jsxs)("div",{className:"bridge-item",children:[(0,E.jsx)(Xc,{className:"bridge-icon"}),(0,E.jsxs)("div",{className:"bridge-content",children:[(0,E.jsx)("span",{className:"bridge-name",children:e.replace(/([A-Z])/g," $1").trim()}),(0,E.jsx)("span",{className:"bridge-description",children:vd(e)})]})]},e))})]}),w.length>0&&(0,E.jsxs)("section",{className:"warnings-section",children:[(0,E.jsxs)("h3",{children:[(0,E.jsx)(te,{className:"section-icon"}),"Considerations Summary"]}),(0,E.jsx)("p",{className:"section-description",children:"These aren't problems \u2014 just factors to keep in mind when discussing your home with your architect."}),(0,E.jsx)("ul",{className:"warnings-detail-list",children:w.flatMap(e=>{const t=i.find(t=>t.id===e.decisionId);return e.warnings.map((n,a)=>(0,E.jsxs)("li",{className:"warning-detail-item",children:[(0,E.jsxs)("span",{className:"warning-context",children:[null===t||void 0===t?void 0:t.title,":"]}),(0,E.jsx)("span",{className:"warning-text",children:n})]},"".concat(e.decisionId,"-").concat(a)))})})]})]}),(0,E.jsxs)("footer",{className:"result-footer",children:[(0,E.jsxs)("button",{className:"btn-secondary",onClick:l,children:[(0,E.jsx)(pi,{className:"btn-icon"}),"Full Diagram View"]}),(0,E.jsxs)("button",{className:"btn-secondary",onClick:async()=>{try{const{generatePersonalizationPDF:e}=await n.e(596).then(n.bind(n,2596));await e({result:t,decisions:i,presetName:r,baseSF:o,totalSF:u,mermaidCode:N})}catch(ph){console.error("PDF export failed:",ph),k()}},children:[(0,E.jsx)(md,{className:"btn-icon"}),"Export PDF"]}),(0,E.jsxs)("button",{className:"btn-primary",onClick:d,children:[(0,E.jsx)(Vi,{className:"btn-icon"}),"Continue to Full Brief"]})]})]})};function bd(e){let{kyc:t,preset:n,baseSF:i,baseMatrix:r,onComplete:o,onCancel:l,onViewDiagram:c}=e;const[d,u]=(0,a.useState)("summary"),[h,p]=(0,a.useState)(null),f=(0,a.useMemo)(()=>(0,Jc.n5)(t,n),[t,n]),[m,g]=(0,a.useState)(()=>{const e={};for(const t of f)e[t.decision.id]=t.recommendedOption.id;return e}),v=(0,a.useMemo)(()=>f.map(e=>({decisionId:e.decision.id,selectedOptionId:m[e.decision.id],isDefault:m[e.decision.id]===e.recommendedOption.id,warnings:[]})),[f,m]),y=(0,a.useMemo)(()=>(0,Jc.q5)([...v]),[v]),b=(0,a.useMemo)(()=>({"10k":"10,000 SF","15k":"15,000 SF","20k":"20,000 SF"}[n]||n),[n]),x=(0,a.useCallback)((e,t)=>{g(n=>s(s({},n),{},{[e]:t}))},[]),S=(0,a.useCallback)(e=>{p(e),u("detail")},[]),_=(0,a.useCallback)(()=>{u("result")},[]),w=(0,a.useCallback)(()=>{f.length>0&&(p(f[0].decision.id),u("detail"))},[f]),N=(0,a.useCallback)(()=>{u("summary"),p(null)},[]),k=(0,a.useCallback)(()=>{const e=f.findIndex(e=>e.decision.id===h);e>0&&p(f[e-1].decision.id)},[f,h]),C=(0,a.useCallback)(()=>{const e=f.findIndex(e=>e.decision.id===h);e<f.length-1?p(f[e+1].decision.id):u("result")},[f,h]),j=(0,a.useCallback)(()=>{const e={preset:n,baseSF:i,totalSF:i+y.totalSfImpact,decisions:y.choices.map(e=>{const t=Qc.FK.find(t=>t.id===e.decisionId),n=null===t||void 0===t?void 0:t.options.find(t=>t.id===e.selectedOptionId);return{decision:null===t||void 0===t?void 0:t.title,selection:null===n||void 0===n?void 0:n.label,isRecommended:e.isDefault,warnings:e.warnings}}),bridges:y.requiredBridges,warnings:y.warningCount},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="adjacency-personalization-".concat(n,".json"),r.click(),URL.revokeObjectURL(a)},[n,i,y]),P=(0,a.useCallback)(()=>{const e=(0,Jc.Qy)(r,y.choices),t=(0,Jc.Rh)(y.choices);o({choices:y.choices,updatedMatrix:e,bridgeConfig:t,totalSfImpact:y.totalSfImpact,warningCount:y.warningCount})},[r,y,o]);return(0,E.jsxs)("div",{className:"adjacency-personalization",children:[(0,E.jsxs)("header",{className:"personalization-header",children:[(0,E.jsxs)("button",{className:"cancel-btn",onClick:l,children:[(0,E.jsx)(Ki,{className:"btn-icon"}),"Back"]}),(0,E.jsxs)("div",{className:"header-title",children:[(0,E.jsx)("h1",{children:"Personalize Your Layout"}),(0,E.jsx)("span",{className:"preset-badge",children:b})]}),(0,E.jsx)("div",{className:"header-spacer"})]}),(0,E.jsx)("main",{className:"personalization-content",children:(()=>{switch(d){case"summary":return(0,E.jsx)(sd,{recommendations:f,selections:m,presetName:b,totalSF:i,onSelectionChange:x,onExpandDecision:S,onAcceptAll:_,onReviewAll:w});case"detail":const e=f.find(e=>e.decision.id===h),t=f.findIndex(e=>e.decision.id===h);return e?(0,E.jsx)(ud,{decision:e.decision,selectedOptionId:m[e.decision.id],recommendedOptionId:e.recommendedOption.id,reasoning:e.reasoning,currentIndex:t,totalCount:f.length,onSelect:t=>x(e.decision.id,t),onPrevious:k,onNext:C,onBack:N}):(u("summary"),null);case"result":return(0,E.jsx)(yd,{result:y,decisions:Qc.FK,presetName:b,baseSF:i,onBack:N,onViewDiagram:c||(()=>{}),onExport:j,onContinueToBuilder:P});default:return null}})()})]})}function xd(e){return null!==e&&void 0!==e&&e.multiGen?"multi_generational":(null===e||void 0===e?void 0:e.children)>0?"family_with_children":"couple"}function Sd(e){const t=[];return null!==e&&void 0!==e&&e.dogs&&t.push({type:"dog",count:e.dogs,size:e.dogSize||"medium"}),null!==e&&void 0!==e&&e.cats&&t.push({type:"cat",count:e.cats}),t}function _d(e){return{rarely:"rarely",occasionally:"occasionally",monthly:"regularly",weekly:"frequently",frequently:"frequently"}[e]||"occasionally"}function wd(e){return{none:"self_sufficient",occasional:"occasional","part-time":"regular","full-time":"full_service",estate:"estate"}[e]||"self_sufficient"}function Nd(e){return{open:"welcoming",balanced:"selective",formal:"formal",private:"sanctuary"}[e]||"selective"}function kd(e){return{no:"no",occasional:"occasional",regular:"regular",primary:"primary",executive:"executive"}[e]||"occasional"}function Cd(e){return{minimal:"minimal",basic:"casual",enthusiast:"enthusiast",serious:"serious",professional:"professional"}[e]||"enthusiast"}function jd(e){return null!==e&&void 0!==e&&e.spa&&null!==e&&void 0!==e&&e.gym&&null!==e&&void 0!==e&&e.pool?"resort":null!==e&&void 0!==e&&e.spa||null!==e&&void 0!==e&&e.gym?"dedicated":null!==e&&void 0!==e&&e.pool?"casual":"basic"}function Pd(e){const t=[];return null!==e&&void 0!==e&&e.sauna&&t.push("sauna"),null!==e&&void 0!==e&&e.steam&&t.push("steam"),null!==e&&void 0!==e&&e.hotTub&&t.push("hot_tub"),null!==e&&void 0!==e&&e.coldPlunge&&t.push("cold_plunge"),null!==e&&void 0!==e&&e.massage&&t.push("massage_room"),t}function Ad(e){let{kycData:t,mvpData:n,tasteProfile:i,projectId:r,projectName:o,onBack:s,onSave:l}=e;const c=(0,a.useMemo)(()=>function(e,t){return{propertyContext:{residenceType:(null===t||void 0===t?void 0:t.residenceType)||"primary",estimatedSF:(null===t||void 0===t?void 0:t.sfCap)||15e3,numberOfLevels:(null===t||void 0===t?void 0:t.levels)||2,hasBasement:(null===t||void 0===t?void 0:t.basement)||!1,lotSize:null,climate:null,viewOrientation:null},householdProfile:{composition:xd(t),primaryResidents:(null===t||void 0===t?void 0:t.primaryResidents)||2,childrenCount:(null===t||void 0===t?void 0:t.children)||0,childrenAges:[],pets:Sd(t),elderlyResidents:(null===t||void 0===t?void 0:t.elderlyResidents)||!1,mobilityConsiderations:(null===t||void 0===t?void 0:t.mobilityNeeds)||!1,frequentOvernightGuests:(null===t||void 0===t?void 0:t.frequentGuests)||!1},entertainingProfile:{frequency:_d(null===t||void 0===t?void 0:t.entertaining),typicalScale:(null===t||void 0===t?void 0:t.typicalEventScale)||"moderate",maxEventScale:(null===t||void 0===t?void 0:t.maxEventScale)||"large",formalDiningImportance:(null===t||void 0===t?void 0:t.formalDining)||3,outdoorEntertainingImportance:(null===t||void 0===t?void 0:t.outdoorEntertaining)||3,cateringSupport:(null===t||void 0===t?void 0:t.cateringSupport)||!1,wineCollection:(null===t||void 0===t?void 0:t.wineCollection)||!1,wineBottleCount:(null===t||void 0===t?void 0:t.wineBottles)||0},staffingProfile:{preference:wd(null===t||void 0===t?void 0:t.staffing),currentStaff:[],plannedStaff:[],staffQuarters:(null===t||void 0===t?void 0:t.staffQuarters)||!1,securityRequirements:(null===t||void 0===t?void 0:t.security)||"minimal"},privacyProfile:{preference:Nd(null===t||void 0===t?void 0:t.privacy),separateGuestAccess:(null===t||void 0===t?void 0:t.separateGuestAccess)||!1,guestStayFrequency:(null===t||void 0===t?void 0:t.guestFrequency)||"occasionally",typicalGuestStayDuration:(null===t||void 0===t?void 0:t.guestDuration)||"weekend",multiGenerationalHosting:(null===t||void 0===t?void 0:t.multiGen)||!1,workFromHome:kd(null===t||void 0===t?void 0:t.workFromHome),clientMeetingsAtHome:(null===t||void 0===t?void 0:t.clientMeetings)||!1,lateNightMediaUse:(null===t||void 0===t?void 0:t.lateNightMedia)||!1},kitchenProfile:{cookingStyle:Cd(null===t||void 0===t?void 0:t.cooking),primaryCook:(null===t||void 0===t?void 0:t.primaryCook)||"family",showKitchenImportance:(null===t||void 0===t?void 0:t.showKitchen)||4,separateCateringKitchen:(null===t||void 0===t?void 0:t.cateringKitchen)||!1,professionalAppliances:(null===t||void 0===t?void 0:t.proAppliances)||!1,multipleRefrigeration:(null===t||void 0===t?void 0:t.multipleRefrig)||!1},wellnessProfile:{interest:jd(t),poolDesired:(null===t||void 0===t?void 0:t.pool)||!1,poolType:(null===t||void 0===t?void 0:t.poolType)||"lap",spaFeatures:Pd(t),fitnessRoutine:(null===t||void 0===t?void 0:t.fitness)||"occasional",garageBays:(null===t||void 0===t?void 0:t.garageBays)||3,evCharging:(null===t||void 0===t?void 0:t.evCharging)||!1},specialRequirements:{artCollection:(null===t||void 0===t?void 0:t.artCollection)||!1,artClimateControl:(null===t||void 0===t?void 0:t.artClimate)||!1,safe_room:(null===t||void 0===t?void 0:t.safeRoom)||!1,elevator:(null===t||void 0===t?void 0:t.elevator)||!1,musicRoom:(null===t||void 0===t?void 0:t.musicRoom)||!1,recordingStudio:(null===t||void 0===t?void 0:t.recordingStudio)||!1,workshop:(null===t||void 0===t?void 0:t.workshop)||!1,customSpaces:(null===t||void 0===t?void 0:t.customSpaces)||[]},budgetProfile:{constructionBudgetRange:(null===t||void 0===t?void 0:t.budget)||"premium",ffeBudgetRange:(null===t||void 0===t?void 0:t.ffeBudget)||null}}}(0,n),[t,n,i]),d=(0,a.useMemo)(()=>{try{return Gl(c)}catch(e){return console.error("Error mapping KYC to validation:",e),null}},[c]);return d?(0,E.jsx)("div",{className:"briefing-builder-view",children:(0,E.jsx)(Zc,{projectId:r||"project-001",projectName:o||"New Project",kycContext:d,onSave:e=>{console.log("Saving PlanBrief:",e),l&&l(e)},onCancel:s})}):(0,E.jsxs)("div",{className:"p-6",children:[(0,E.jsxs)("button",{onClick:s,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[(0,E.jsx)(Ki,{className:"w-4 h-4"}),"Back to Overview"]}),(0,E.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,E.jsx)("h3",{className:"text-red-800 font-medium",children:"Unable to load Briefing Builder"}),(0,E.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"Please ensure KYC data is complete before proceeding."})]})]})}function Ld(){var e,t;const n=(0,a.useContext)(G),{kycData:i,mvpConfig:r,projectId:o,projectName:s}=n||{},l=function(){var e;const t=(0,a.useContext)(G),{kycData:n,mvpConfig:i}=t||{},r=null===n||void 0===n||null===(e=n.principal)||void 0===e?void 0:e.designIdentity,o=(0,a.useMemo)(()=>({familyHousehold:Fd(n),lifestyleLiving:Id(n),workingPreferences:Rd(n),projectParameters:Ed(i),spaceRequirements:Md(i),designIdentity:Td(r),budgetFramework:Dd(n),culturalContext:!0,portfolioContext:!0}),[n,i,r]),s=Object.values(o).filter(Boolean).length,l=Object.keys(o).length,c=Math.round(s/l*100),d=["familyHousehold","projectParameters","lifestyleLiving"],u=d.every(e=>o[e]);return{sections:o,completedCount:s,totalCount:l,percentage:c,hasMinimumData:u,missingRequired:d.filter(e=>!o[e])}}(),c=(0,a.useMemo)(()=>{var e,t;const n=null===i||void 0===i||null===(e=i.principal)||void 0===e||null===(t=e.designIdentity)||void 0===t?void 0:t.principalTasteResults;return n&&n.selections?n:null},[null===i||void 0===i||null===(e=i.principal)||void 0===e||null===(t=e.designIdentity)||void 0===t?void 0:t.principalTasteResults]);return{kycResponse:(0,a.useMemo)(()=>function(e,t,n){const a=e||{},i=t||{},r=n||{};return{propertyContext:{residenceType:i.residenceType||"primary",estimatedSF:i.sfCap||15e3,numberOfLevels:i.levels||2,hasBasement:i.basement||!1,lotSize:i.lotSize||null,climate:i.climate||null,viewOrientation:i.viewOrientation||null},householdProfile:{composition:Od(a,i),primaryResidents:i.primaryResidents||a.primaryResidents||2,childrenCount:i.children||a.childrenCount||0,childrenAges:a.childrenAges||[],pets:Bd(a,i),elderlyResidents:a.elderlyResidents||i.elderlyResidents||!1,mobilityConsiderations:a.mobilityNeeds||i.mobilityNeeds||!1,frequentOvernightGuests:a.frequentGuests||i.frequentGuests||!1},entertainingProfile:{frequency:Hd(a.entertainingFrequency||i.entertaining),typicalScale:a.typicalEventScale||i.typicalEventScale||"moderate",maxEventScale:a.maxEventScale||i.maxEventScale||"large",formalDiningImportance:a.formalDining||i.formalDining||3,outdoorEntertainingImportance:a.outdoorEntertaining||3,cateringSupport:a.cateringSupport||i.cateringSupport||!1,wineCollection:a.wineCollection||i.wineCollection||!1,wineBottleCount:a.wineBottles||i.wineBottles||0},staffingProfile:{preference:Gd(a.staffing||i.staffing),currentStaff:a.currentStaff||[],plannedStaff:a.plannedStaff||[],staffQuarters:a.staffQuarters||i.staffQuarters||!1,securityRequirements:a.security||i.security||"minimal"},privacyProfile:{preference:Ud(a.privacy||i.privacy),separateGuestAccess:a.separateGuestAccess||i.separateGuestAccess||!1,guestStayFrequency:a.guestFrequency||i.guestFrequency||"occasionally",typicalGuestStayDuration:a.guestDuration||i.guestDuration||"weekend",multiGenerationalHosting:a.multiGen||i.multiGen||!1,workFromHome:Wd(a.workFromHome||i.workFromHome),clientMeetingsAtHome:a.clientMeetings||i.clientMeetings||!1,lateNightMediaUse:a.lateNightMedia||i.lateNightMedia||!1},kitchenProfile:{cookingStyle:Vd(a.cooking||i.cooking),primaryCook:a.primaryCook||i.primaryCook||"family",showKitchenImportance:a.showKitchen||i.showKitchen||4,separateCateringKitchen:a.cateringKitchen||i.cateringKitchen||!1,professionalAppliances:a.proAppliances||i.proAppliances||!1,multipleRefrigeration:a.multipleRefrig||i.multipleRefrig||!1},wellnessProfile:{interest:zd(a,i),poolDesired:a.pool||i.pool||!1,poolType:a.poolType||i.poolType||"lap",spaFeatures:qd(a,i),fitnessRoutine:a.fitness||i.fitness||"occasional",garageBays:a.garageBays||i.garageBays||3,evCharging:a.evCharging||i.evCharging||!1},specialRequirements:{artCollection:a.artCollection||i.artCollection||!1,artClimateControl:a.artClimate||i.artClimate||!1,safe_room:a.safeRoom||i.safeRoom||!1,elevator:a.elevator||i.elevator||!1,musicRoom:a.musicRoom||i.musicRoom||!1,recordingStudio:a.recordingStudio||i.recordingStudio||!1,workshop:a.workshop||i.workshop||!1,customSpaces:a.customSpaces||i.customSpaces||[]},budgetProfile:{constructionBudgetRange:a.budget||i.budget||"premium",ffeBudgetRange:a.ffeBudget||null},tasteProfile:r}}(i,r,c),[i,r,c]),preset:(0,a.useMemo)(()=>{const e=(null===r||void 0===r?void 0:r.sfCap)||15e3;return e<=12e3?"10k":e<=17e3?"15k":"20k"},[null===r||void 0===r?void 0:r.sfCap]),baseSF:(null===r||void 0===r?void 0:r.sfCap)||15e3,projectId:o,projectName:s,completeness:l,rawData:{kycData:i,mvpConfig:r,tasteProfile:c}}}function Fd(e){return!!e&&!(!e.primaryResidents&&void 0===e.childrenCount)}function Id(e){return!!e&&!(!e.entertainingFrequency&&!e.privacy)}function Rd(e){return!!e&&!!e.workFromHome}function Ed(e){return!!e&&!(!e.sfCap||!e.levels)}function Md(e){return!!e&&!(!e.bedrooms&&!e.garageBays)}function Td(e){if(!e)return!1;const t=e.principalTasteResults;return!(!t||!t.completedAt)||!!(e.styleEra||e.formality||e.warmth)}function Dd(e){return!!e&&!!e.budget}function Od(e,t){if(e.multiGen||t.multiGen)return"multi_generational";if(e.blendedFamily)return"blended_family";if((t.children||e.childrenCount||0)>0)return"family_with_children";return 1===(t.primaryResidents||e.primaryResidents||2)?"single":"couple"}function Bd(e,t){const n=[],a=t.dogs||e.dogs||0,i=t.cats||e.cats||0;return a>0&&n.push({type:"dog",count:a,size:t.dogSize||e.dogSize||"medium"}),i>0&&n.push({type:"cat",count:i}),e.otherPets&&n.push(...e.otherPets),n}function zd(e,t){const n=e.pool||t.pool,a=e.spa||t.spa,i=e.gym||t.gym;return a&&i&&n?"resort":a||i?"dedicated":n?"casual":"basic"}function qd(e,t){const n=[];return(e.sauna||t.sauna)&&n.push("sauna"),(e.steam||t.steam)&&n.push("steam"),(e.hotTub||t.hotTub)&&n.push("hot_tub"),(e.coldPlunge||t.coldPlunge)&&n.push("cold_plunge"),(e.massage||t.massage)&&n.push("massage_room"),n}function Hd(e){return{never:"rarely",rarely:"rarely",occasionally:"occasionally",monthly:"regularly",weekly:"frequently",frequently:"frequently"}[e]||"occasionally"}function Gd(e){return{none:"self_sufficient",occasional:"occasional","part-time":"regular",regular:"regular","full-time":"full_service",full_service:"full_service",estate:"estate"}[e]||"self_sufficient"}function Ud(e){return{open:"welcoming",welcoming:"welcoming",balanced:"selective",selective:"selective",formal:"formal",private:"sanctuary",sanctuary:"sanctuary"}[e]||"selective"}function Wd(e){return{no:"no",none:"no",occasional:"occasional",regular:"regular",primary:"primary",executive:"executive","full-time":"primary"}[e]||"occasional"}function Vd(e){return{none:"minimal",minimal:"minimal",basic:"casual",casual:"casual",enthusiast:"enthusiast",serious:"serious",professional:"professional"}[e]||"enthusiast"}function Kd(e){let{completeness:t}=e;const{sections:n,percentage:a}=t;return(0,E.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,E.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Profile Completeness"}),(0,E.jsxs)("span",{className:"text-sm text-gray-500",children:[a,"%"]})]}),(0,E.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:(0,E.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(a,"%")}})}),(0,E.jsx)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:Object.entries(n).map(e=>{let[t,n]=e;return(0,E.jsxs)("div",{className:"flex items-center gap-1 ".concat(n?"text-green-600":"text-gray-400"),children:[n?(0,E.jsx)(Xc,{className:"w-3 h-3"}):(0,E.jsx)("div",{className:"w-3 h-3 rounded-full border border-current"}),(0,E.jsx)("span",{children:Yd(t)})]},t)})})]})}function Yd(e){return{familyHousehold:"Family & Household",lifestyleLiving:"Lifestyle",workingPreferences:"Work Preferences",projectParameters:"Property Config",spaceRequirements:"Space Requirements",designIdentity:"Design Identity",budgetFramework:"Budget",culturalContext:"Cultural Context",portfolioContext:"Portfolio"}[e]||e}function Zd(e){let{onBack:t,onComplete:n,onViewDiagram:i,onGoToKYC:r,showProgress:o=!0}=e;const{kycResponse:s,preset:l,baseSF:c,completeness:d}=Ld(),u=(0,a.useMemo)(()=>{try{return lc(l)}catch(ph){return console.error("Failed to get preset:",ph),null}},[l]),h=(null===u||void 0===u?void 0:u.adjacencyMatrix)||[];return u?d.hasMinimumData?(0,E.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[o&&d.percentage<100&&(0,E.jsx)("div",{className:"bg-white border-b px-6 py-3",children:(0,E.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,E.jsxs)("span",{className:"text-gray-600",children:["Profile ",d.percentage,"% complete"]}),(0,E.jsx)("button",{onClick:r,className:"text-blue-600 hover:text-blue-800",children:"Improve recommendations \u2192"})]}),(0,E.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-2",children:(0,E.jsx)("div",{className:"bg-blue-600 h-1 rounded-full",style:{width:"".concat(d.percentage,"%")}})})]})}),(0,E.jsx)(bd,{kyc:s,preset:l,baseSF:c,baseMatrix:h,onComplete:e=>{console.log("Personalization complete:",e),n&&n(e)},onCancel:t,onViewDiagram:i})]}):(0,E.jsxs)("div",{className:"p-6 max-w-2xl mx-auto",children:[(0,E.jsxs)("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[(0,E.jsx)(Ki,{className:"w-4 h-4"}),"Back to Overview"]}),(0,E.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,E.jsxs)("div",{className:"text-center mb-6",children:[(0,E.jsx)("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,E.jsx)(ld,{className:"w-8 h-8 text-amber-600"})}),(0,E.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Complete Your Profile First"}),(0,E.jsx)("p",{className:"text-gray-600 mt-2",children:"We need some basic information about your household and lifestyle to provide personalized layout recommendations."})]}),(0,E.jsx)(Kd,{completeness:d}),(0,E.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[(0,E.jsx)("h4",{className:"font-medium text-amber-800 mb-2",children:"Required sections:"}),(0,E.jsx)("ul",{className:"space-y-2",children:d.missingRequired.map(e=>(0,E.jsxs)("li",{className:"flex items-center gap-2 text-amber-700",children:[(0,E.jsx)(qi,{className:"w-4 h-4"}),Yd(e)]},e))})]}),(0,E.jsxs)("div",{className:"flex gap-4",children:[(0,E.jsx)("button",{onClick:r,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Go to KYC Profile"}),(0,E.jsx)("button",{onClick:t,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]}):(0,E.jsxs)("div",{className:"p-6",children:[(0,E.jsxs)("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[(0,E.jsx)(Ki,{className:"w-4 h-4"}),"Back to Overview"]}),(0,E.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,E.jsx)("h3",{className:"text-red-800 font-medium",children:"Unable to load Personalization"}),(0,E.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"Please ensure property configuration is complete."})]})]})}function $d(e){return!(!e||0===e.length)&&e.some(e=>{const t=parseInt(e.age);if(!isNaN(t)&&t>=5&&t<=18)return!0;const n=e.role||"";return["child","teenager"].includes(n)})}function Qd(e){return e&&Array.isArray(e)?e.filter(e=>{const t=parseInt(e.age);if(!isNaN(t)&&t<18)return!0;const n=e.role||"";return["child","young-child","teenager"].includes(n)}).length:0}function Jd(e){return e.staffingLevel?e.staffingLevel:e.liveInStaff&&e.liveInStaff>0||e.staffAccommodationRequired?"live_in":"none"}function Xd(e){if(!e||0===e.length)return"none";const t=["pool","spa","cold-plunge"].filter(t=>e.includes(t)),n=e.length;return t.length>=2&&n>=4?"resort_level":t.length>=1&&n>=3?"comprehensive":n>=1?"basic":"none"}function eu(e){const t=e.mustHaveOutdoorLiving||[],n=e.wouldLikeOutdoorLiving||[];return["outdoor-kitchen","outdoor-dining","bar-lounge","event-lawn","covered-outdoor","pergola-pavilion"].some(e=>t.includes(e)||n.includes(e))}function tu(e){const t=e.wfhPeopleCount||0,n=e.workFromHome||"";return"never"===n||""===n?0:t>=2?2:1===t||"never"!==n?1:0}function nu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"principal";const n=e[t];if(!n)return console.warn("No KYC data found for respondent: ".concat(t)),null;const{projectParameters:a,familyHousehold:i,lifestyleLiving:r,spaceRequirements:o}=n;return{sfCapConstraint:a.sfCapConstraint||null,hasBasement:a.hasBasement||!1,levelsAboveGrade:a.floors||2,totalBedroomCount:a.bedroomCount||0,guestBedroomCount:(c=a.bedroomCount,!c||c<1?3:Math.max(0,c-1)),hasChildren:(l=i.familyMembers,!(!l||0===l.length)&&l.some(e=>{const t=parseInt(e.age);if(!isNaN(t)&&t<18)return!0;const n=e.role||"";return["child","young-child","teenager"].includes(n)})),childrenCount:Qd(i.familyMembers),hasSchoolAgeChildren:$d(i.familyMembers),hasPets:!(!i.pets||!i.pets.trim()),petsDescription:i.pets||"",staffingLevel:Jd(i),entertainingLoad:(s=r.entertainingFrequency,{rarely:"rare",monthly:"monthly",weekly:"weekly",daily:"weekly"}[s]||"rare"),formalEntertainingRequired:"formal"===r.entertainingStyle||"both"===r.entertainingStyle,professionalChefAccess:(o.mustHaveSpaces||[]).includes("catering-kitchen")||(o.mustHaveSpaces||[]).includes("chef-kitchen"),workFromHomeRequired:"never"!==r.workFromHome&&""!==r.workFromHome,homeOfficeCount:tu(r),wantsSecondOffice:tu(r)>=2,wantsPetGroomingRoom:i.petGroomingRoom||!1,wantsDogRun:i.petDogRun||!1,wellnessProgram:Xd(r.wellnessPriorities),wantsGym:(r.wellnessPriorities||[]).includes("gym")||(r.wellnessPriorities||[]).includes("fitness")||(o.mustHaveSpaces||[]).includes("gym"),wantsSpa:(r.wellnessPriorities||[]).includes("spa")||(r.wellnessPriorities||[]).includes("sauna")||(o.mustHaveSpaces||[]).includes("spa-wellness")||(o.mustHaveSpaces||[]).includes("sauna")||(o.mustHaveSpaces||[]).includes("steam-room"),wantsPool:(r.wellnessPriorities||[]).includes("pool")||(o.mustHaveSpaces||[]).includes("pool-indoor")||(o.mustHavePoolWater||[]).includes("swimming-pool"),wantsWineRoom:(o.mustHaveSpaces||[]).includes("wine-cellar")||(r.hobbies||[]).includes("wine"),wantsMediaRoom:(o.mustHaveSpaces||[]).includes("media-room"),lateNightMediaUse:r.lateNightMediaUse||!1,wantsLibrary:(o.mustHaveSpaces||[]).includes("library")||(r.hobbies||[]).includes("reading"),wantsSeparateFamilyRoom:o.wantsSeparateFamilyRoom||!1,wantsSecondFormalLiving:o.wantsSecondFormalLiving||!1,wantsGameRoom:(o.mustHaveSpaces||[]).includes("game-room"),wantsBar:o.wantsBar||!1,wantsBunkRoom:o.wantsBunkRoom||!1,wantsBreakfastNook:o.wantsBreakfastNook||!1,wantsOutdoorEntertaining:eu(o)};var s,l,c}function au(e){if(!e)return null;return{propertyConfig:{sfCap:e.sfCapConstraint?"".concat(e.sfCapConstraint.toLocaleString()," SF"):"Discovery Mode",basement:e.hasBasement?"Yes":"No",levels:e.levelsAboveGrade},household:{totalBedrooms:e.totalBedroomCount,guestBedrooms:e.guestBedroomCount,hasChildren:e.hasChildren,childrenCount:e.childrenCount,hasSchoolAge:e.hasSchoolAgeChildren,hasPets:e.hasPets,petsDescription:e.petsDescription,staffing:e.staffingLevel},lifestyle:{entertaining:e.entertainingLoad,formalEntertaining:e.formalEntertainingRequired,workFromHome:e.workFromHomeRequired,homeOfficeCount:e.homeOfficeCount,wantsSecondOffice:e.wantsSecondOffice,lateNightMedia:e.lateNightMediaUse},wellness:{program:e.wellnessProgram,gym:e.wantsGym,spa:e.wantsSpa,pool:e.wantsPool},amenities:{wine:e.wantsWineRoom,media:e.wantsMediaRoom,library:e.wantsLibrary,familyRoom:e.wantsSeparateFamilyRoom,salon:e.wantsSecondFormalLiving,gameRoom:e.wantsGameRoom,bar:e.wantsBar,bunkRoom:e.wantsBunkRoom,breakfastNook:e.wantsBreakfastNook,outdoorEntertaining:e.wantsOutdoorEntertaining,petGroomingRoom:e.wantsPetGroomingRoom,dogRun:e.wantsDogRun}}}function iu(e){if(!e)return 0;return[e.wantsWineRoom,e.wantsMediaRoom,e.wantsLibrary,e.wantsSeparateFamilyRoom,e.wantsSecondFormalLiving,e.wantsGameRoom,e.wantsBar,e.wantsBunkRoom,e.wantsBreakfastNook,e.wantsGym,e.wantsSpa,e.wantsPool,e.wantsOutdoorEntertaining,e.professionalChefAccess,e.formalEntertainingRequired].filter(Boolean).length}function ru(e){if(!e)return null;let t=0,n=0;return ja.forEach(a=>{const i=function(e,t){var n;const a=e.selections||(null===(n=e.session)||void 0===n?void 0:n.selections)||{},i=Aa.filter(e=>e.category===t);for(const r of i){const e=a[r.quadId];if(e&&e.favorites&&e.favorites.length>0){const t=Aa.find(e=>e.quadId===r.quadId);if(t&&t.images&&t.images[e.favorites[0]])return t.images[e.favorites[0]]}}return null}(e,a);if(i){const e=function(e){if(!e)return null;const t=e.split("/").pop().match(/AS(\d)/);return t?{as:parseInt(t[1])}:null}(i);e&&(t+=(e.as-1)/8*4+1,n++)}}),n>0?t/n:null}function ou(e){return e?e<2.5?"Contemporary":e<=3.5?"Transitional":"Traditional":"Not assessed"}const su=e=>{let{label:t,value:n,leftLabel:a,rightLabel:i}=e;const r=n?(n-1)/9*100:50;return(0,E.jsxs)("div",{className:"mvp-dna-slider",children:[(0,E.jsxs)("div",{className:"mvp-dna-slider__header",children:[(0,E.jsx)("span",{className:"mvp-dna-slider__label",children:t}),(0,E.jsx)("span",{className:"mvp-dna-slider__value",children:n?n.toFixed(1):"\u2014"})]}),(0,E.jsxs)("div",{className:"mvp-dna-slider__track-row",children:[(0,E.jsx)("span",{className:"mvp-dna-slider__endpoint",children:a}),(0,E.jsxs)("div",{className:"mvp-dna-slider__track",children:[(0,E.jsx)("div",{className:"mvp-dna-slider__fill",style:{width:"".concat(r,"%")}}),(0,E.jsx)("div",{className:"mvp-dna-slider__thumb",style:{left:"".concat(r,"%")}})]}),(0,E.jsx)("span",{className:"mvp-dna-slider__endpoint",children:i})]})]})},lu=()=>{var e,t,n,i,r,o;const{kycData:s,activeRespondent:l}=H(),[c,d]=(0,a.useState)(!1),[p,m]=(0,a.useState)("overview"),g=(null===(e=s[l])||void 0===e?void 0:e.designIdentity)||{},v=g.clientBaseName||"",y=g.clientType||"individual",b=g.principalName||"",x=g.secondaryName||"",S=v?"".concat(v,"-P"):null,_="couple"===y&&v?"".concat(v,"-S"):null,N=(null===s||void 0===s||null===(t=s.principal)||void 0===t?void 0:t.designIdentity)||{},k=(0,a.useMemo)(()=>{const e=N.principalTasteResults;return e&&e.selections?{clientId:e.clientId||S,session:e,selections:e.selections,profile:e.profile,completedAt:e.completedAt}:null},[N.principalTasteResults,S]),C=(0,a.useMemo)(()=>{const e=N.secondaryTasteResults;return e&&e.selections?{clientId:e.clientId||_,session:e,selections:e.selections,profile:e.profile,completedAt:e.completedAt}:null},[N.secondaryTasteResults,_]),j=(null===k||void 0===k||null===(n=k.profile)||void 0===n?void 0:n.scores)||{},P=(null===k||void 0===k||null===(i=k.profile)||void 0===i?void 0:i.topMaterials)||[],F=(0,a.useMemo)(()=>j||null,[JSON.stringify(j)]),I=(0,a.useMemo)(()=>ru(k),[k]),R=(0,a.useMemo)(()=>ru(C),[C]),M=(0,a.useMemo)(()=>nu(s,l),[s,l]),T=(0,a.useMemo)(()=>au(M),[M]),D=(0,a.useMemo)(()=>iu(M),[M]),O=(0,a.useMemo)(()=>D>=12?{tier:"20K+",label:"Estate (20,000+ SF)",color:"gold"}:D>=8?{tier:"15K",label:"Grand (15,000 SF)",color:"teal"}:D>=4?{tier:"10K",label:"Signature (10,000 SF)",color:"blue"}:{tier:"Custom",label:"Custom Compact",color:"gray"},[D]),B=!!k,z="couple"===y?!!k&&!!C:!!k,q=v||"project-001",G=(null===(r=s[l])||void 0===r||null===(o=r.projectParameters)||void 0===o?void 0:o.projectName)||"New Project";if("personalization"===p)return(0,E.jsx)(Zd,{kycData:s,mvpData:M,tasteProfile:k,projectId:q,projectName:G,onBack:()=>m("overview"),onComplete:e=>{console.log("Personalization result:",e),m("overview")},onViewDiagram:()=>{m("builder")}});if("builder"===p)return(0,E.jsx)(Ad,{kycData:s,mvpData:M,tasteProfile:k,projectId:q,projectName:G,onBack:()=>m("overview"),onSave:e=>{console.log("Brief saved:",e),m("overview")}});if(!M)return(0,E.jsx)("div",{className:"mvp-module",children:(0,E.jsxs)("div",{className:"mvp-module__empty",children:[(0,E.jsx)(f,{size:48,className:"mvp-module__empty-icon"}),(0,E.jsx)("h2",{children:"No KYC Data Available"}),(0,E.jsx)("p",{children:"Complete the KYC module first to generate your MVP brief."})]})});const U=e=>{let{active:t,label:n}=e;return(0,E.jsxs)("span",{className:"status-badge ".concat(t?"status-badge--active":"status-badge--inactive"),children:[t?(0,E.jsx)(w,{size:14}):(0,E.jsx)(qi,{size:14}),n]})},W=e=>{let{title:t,icon:n,children:a,status:i,fullWidth:r}=e;return(0,E.jsxs)("div",{className:"mvp-card ".concat(r?"mvp-card--full":""),children:[(0,E.jsxs)("div",{className:"mvp-card__header",children:[(0,E.jsx)(n,{size:20,className:"mvp-card__icon"}),(0,E.jsx)("h3",{className:"mvp-card__title",children:t}),i&&(0,E.jsx)("span",{className:"mvp-card__status mvp-card__status--".concat(i),children:i})]}),(0,E.jsx)("div",{className:"mvp-card__content",children:a})]})};return(0,E.jsxs)("div",{className:"mvp-module",children:[(0,E.jsxs)("div",{className:"mvp-module__header",children:[(0,E.jsxs)("div",{className:"mvp-module__title-group",children:[(0,E.jsxs)("h1",{className:"mvp-module__title",children:[(0,E.jsx)(f,{size:28}),"Mansion Validation Program"]}),(0,E.jsxs)("p",{className:"mvp-module__subtitle",children:["Area program derived from KYC inputs \u2022 ",l.charAt(0).toUpperCase()+l.slice(1)," respondent"]})]}),(0,E.jsxs)("div",{className:"mvp-tier-badge mvp-tier-badge--".concat(O.color),children:[(0,E.jsx)("span",{className:"mvp-tier-badge__tier",children:O.tier}),(0,E.jsx)("span",{className:"mvp-tier-badge__label",children:O.label})]})]}),(0,E.jsxs)("div",{className:"mvp-stats-row",children:[(0,E.jsxs)("div",{className:"mvp-stat",children:[(0,E.jsx)("span",{className:"mvp-stat__value",children:(null===T||void 0===T?void 0:T.household.totalBedrooms)||0}),(0,E.jsx)("span",{className:"mvp-stat__label",children:"Total Bedrooms"})]}),(0,E.jsxs)("div",{className:"mvp-stat",children:[(0,E.jsx)("span",{className:"mvp-stat__value",children:(null===T||void 0===T?void 0:T.household.guestBedrooms)||0}),(0,E.jsx)("span",{className:"mvp-stat__label",children:"Guest Suites"})]}),(0,E.jsxs)("div",{className:"mvp-stat",children:[(0,E.jsx)("span",{className:"mvp-stat__value",children:D}),(0,E.jsx)("span",{className:"mvp-stat__label",children:"Amenities"})]}),(0,E.jsxs)("div",{className:"mvp-stat",children:[(0,E.jsx)("span",{className:"mvp-stat__value",children:(null===T||void 0===T?void 0:T.propertyConfig.levels)||2}),(0,E.jsx)("span",{className:"mvp-stat__label",children:"Levels"})]}),(0,E.jsxs)("div",{className:"mvp-stat",children:[(0,E.jsx)("span",{className:"mvp-stat__value",children:"Yes"===(null===T||void 0===T?void 0:T.propertyConfig.basement)?"+B":"\u2014"}),(0,E.jsx)("span",{className:"mvp-stat__label",children:"Basement"})]})]}),(0,E.jsxs)("div",{className:"mvp-card mvp-card--full mvp-card--design",children:[(0,E.jsxs)("div",{className:"mvp-card__header",children:[(0,E.jsx)(L,{size:20,className:"mvp-card__icon"}),(0,E.jsx)("h3",{className:"mvp-card__title",children:"Design Preferences"}),(0,E.jsx)("span",{className:"mvp-card__status mvp-card__status--".concat(B?"complete":"pending"),children:B?z?"Complete":"Principal Only":"Not Started"})]}),(0,E.jsx)("div",{className:"mvp-card__content",children:B?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"mvp-design-summary",children:[(0,E.jsxs)("div",{className:"mvp-design-summary__item",children:[(0,E.jsx)("span",{className:"mvp-design-summary__label",children:"Style Direction"}),(0,E.jsx)("span",{className:"mvp-design-summary__value mvp-design-summary__value--highlight",children:ou(I)})]}),(0,E.jsxs)("div",{className:"mvp-design-summary__item",children:[(0,E.jsx)("span",{className:"mvp-design-summary__label",children:"Formality"}),(0,E.jsx)("span",{className:"mvp-design-summary__value",children:(K=null===F||void 0===F?void 0:F.formality,K?K<=3?"Casual / Relaxed":K<=5?"Relaxed Elegance":K<=7?"Refined":"Formal":"Not assessed")})]}),(0,E.jsxs)("div",{className:"mvp-design-summary__item",children:[(0,E.jsx)("span",{className:"mvp-design-summary__label",children:"Mood"}),(0,E.jsx)("span",{className:"mvp-design-summary__value",children:(V=null===F||void 0===F?void 0:F.warmth,V?V<=3?"Cool / Crisp":V<=5?"Balanced":V<=7?"Warm":"Very Warm":"Not assessed")})]})]}),(0,E.jsxs)("div",{className:"mvp-design-dna",children:[(0,E.jsxs)("h4",{className:"mvp-design-dna__title",children:["Design DNA ","couple"===y&&z?"(Combined)":""]}),(0,E.jsxs)("div",{className:"mvp-design-dna__sliders",children:[(0,E.jsx)(su,{label:"Tradition",value:I?2.25*(I-1)+1:null,leftLabel:"Contemporary",rightLabel:"Traditional"}),(0,E.jsx)(su,{label:"Formality",value:null===F||void 0===F?void 0:F.formality,leftLabel:"Casual",rightLabel:"Formal"}),(0,E.jsx)(su,{label:"Warmth",value:null===F||void 0===F?void 0:F.warmth,leftLabel:"Cool",rightLabel:"Warm"}),(0,E.jsx)(su,{label:"Drama",value:null===F||void 0===F?void 0:F.drama,leftLabel:"Subtle",rightLabel:"Bold"}),(0,E.jsx)(su,{label:"Openness",value:null===F||void 0===F?void 0:F.openness,leftLabel:"Enclosed",rightLabel:"Open"}),(0,E.jsx)(su,{label:"Art Focus",value:null===F||void 0===F?void 0:F.art_focus,leftLabel:"Understated",rightLabel:"Gallery-like"})]})]}),P.length>0&&(0,E.jsxs)("div",{className:"mvp-design-materials",children:[(0,E.jsx)("h4",{className:"mvp-design-materials__title",children:"Material Affinities"}),(0,E.jsx)("div",{className:"mvp-design-materials__chips",children:P.map((e,t)=>(0,E.jsx)("span",{className:"mvp-material-chip",children:e.replace(/_/g," ")},t))})]}),"couple"===y&&z&&(0,E.jsxs)("div",{className:"mvp-design-comparison",children:[(0,E.jsx)("h4",{className:"mvp-design-comparison__title",children:"Partner Alignment"}),(0,E.jsxs)("div",{className:"mvp-design-comparison__grid",children:[(0,E.jsxs)("div",{className:"mvp-design-comparison__col",children:[(0,E.jsx)("span",{className:"mvp-design-comparison__name",children:b||"Principal"}),(0,E.jsx)("span",{className:"mvp-design-comparison__style",children:ou(I)})]}),(0,E.jsxs)("div",{className:"mvp-design-comparison__col",children:[(0,E.jsx)("span",{className:"mvp-design-comparison__name",children:x||"Secondary"}),(0,E.jsx)("span",{className:"mvp-design-comparison__style",children:ou(R)})]})]})]}),"couple"===y&&!z&&(0,E.jsxs)("div",{className:"mvp-design-pending",children:[(0,E.jsx)(te,{size:16}),(0,E.jsxs)("span",{children:[x||"Secondary"," has not completed Taste Exploration. Combined scores will update when both partners complete."]})]})]}):(0,E.jsxs)("div",{className:"mvp-design-empty",children:[(0,E.jsx)(L,{size:32,className:"mvp-design-empty__icon"}),(0,E.jsx)("p",{children:"Design preferences will appear here after completing Taste Exploration in the KYC module."}),(0,E.jsx)("p",{className:"mvp-design-empty__hint",children:"Navigate to KYC \u2192 Design Preferences to begin."})]})})]}),(0,E.jsxs)("div",{className:"mvp-grid",children:[(0,E.jsx)(W,{title:"Property Configuration",icon:Hi,children:(0,E.jsxs)("div",{className:"mvp-field-list",children:[(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"SF Constraint"}),(0,E.jsx)("span",{className:"mvp-field__value",children:null===T||void 0===T?void 0:T.propertyConfig.sfCap})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Basement"}),(0,E.jsx)("span",{className:"mvp-field__value",children:null===T||void 0===T?void 0:T.propertyConfig.basement})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Levels"}),(0,E.jsx)("span",{className:"mvp-field__value",children:null===T||void 0===T?void 0:T.propertyConfig.levels})]})]})}),(0,E.jsx)(W,{title:"Household Composition",icon:h,children:(0,E.jsxs)("div",{className:"mvp-field-list",children:[(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Bedrooms"}),(0,E.jsxs)("span",{className:"mvp-field__value",children:[null===T||void 0===T?void 0:T.household.totalBedrooms," total (",null===T||void 0===T?void 0:T.household.guestBedrooms," guest)"]})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Children"}),(0,E.jsx)("span",{className:"mvp-field__value",children:(null===T||void 0===T?void 0:T.household.childrenCount)>0?T.household.childrenCount:"None"})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"School-Age"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.household.hasSchoolAge,label:null!==T&&void 0!==T&&T.household.hasSchoolAge?"Yes":"No"})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Pets"}),null!==T&&void 0!==T&&T.household.hasPets?(0,E.jsx)("span",{className:"mvp-field__value mvp-field__value--small",children:null===T||void 0===T?void 0:T.household.petsDescription}):(0,E.jsx)(U,{active:!1,label:"None"})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Staffing"}),(0,E.jsx)("span",{className:"mvp-field__value mvp-field__value--small",children:((null===T||void 0===T?void 0:T.household.staffing)||"none").replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())})]})]})}),(0,E.jsx)(W,{title:"Lifestyle",icon:u,children:(0,E.jsxs)("div",{className:"mvp-field-list",children:[(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Entertaining"}),(0,E.jsx)("span",{className:"mvp-field__value",children:(null===T||void 0===T?void 0:T.lifestyle.entertaining)||"Rare"})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Formal Dining"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.lifestyle.formalEntertaining,label:null!==T&&void 0!==T&&T.lifestyle.formalEntertaining?"Required":"Optional"})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Work From Home"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.lifestyle.workFromHome,label:null!==T&&void 0!==T&&T.lifestyle.workFromHome?"Yes":"No"})]}),(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Late Night Media"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.lifestyle.lateNightMedia,label:null!==T&&void 0!==T&&T.lifestyle.lateNightMedia?"Yes":"No"})]})]})}),(0,E.jsxs)(W,{title:"Wellness Program",icon:Gi,children:[(0,E.jsx)("div",{className:"mvp-field-list",children:(0,E.jsxs)("div",{className:"mvp-field",children:[(0,E.jsx)("span",{className:"mvp-field__label",children:"Program Tier"}),(0,E.jsx)("span",{className:"mvp-field__value mvp-field__value--highlight",children:(null===T||void 0===T?void 0:T.wellness.program)||"None"})]})}),(0,E.jsxs)("div",{className:"mvp-badge-row",children:[(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.wellness.gym,label:"Gym"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.wellness.spa,label:"Spa"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.wellness.pool,label:"Pool"})]})]}),(0,E.jsxs)("div",{className:"mvp-card mvp-card--full",children:[(0,E.jsxs)("div",{className:"mvp-card__header",children:[(0,E.jsx)(Ui,{size:20,className:"mvp-card__icon"}),(0,E.jsx)("h3",{className:"mvp-card__title",children:"Selected Amenities"}),(0,E.jsxs)("span",{className:"mvp-card__count",children:[D," selected"]})]}),(0,E.jsx)("div",{className:"mvp-card__content",children:(0,E.jsxs)("div",{className:"mvp-amenity-grid",children:[(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.wine,label:"Wine Room"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.media,label:"Media Room"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.library,label:"Library"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.familyRoom,label:"Family Room"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.salon,label:"Salon"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.gameRoom,label:"Game Room"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.bar,label:"Bar"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.bunkRoom,label:"Bunk Room"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.breakfastNook,label:"Breakfast Nook"}),(0,E.jsx)(U,{active:null===T||void 0===T?void 0:T.amenities.outdoorEntertaining,label:"Outdoor Entertaining"})]})})]})]}),(0,E.jsxs)("div",{className:"mvp-debug",children:[(0,E.jsxs)("button",{className:"btn btn--ghost btn--sm",onClick:()=>d(!c),children:[c?"Hide":"Show"," Raw Data"]}),c&&(0,E.jsx)("pre",{className:"mvp-debug__code",children:JSON.stringify({briefInputs:M,tasteProfileP:k?{clientId:k.clientId,completedAt:k.completedAt,profile:k.profile}:null,tasteProfileS:C?{clientId:C.clientId,completedAt:C.completedAt,profile:C.profile}:null},null,2)})]}),(0,E.jsxs)("div",{className:"mvp-next-steps",children:[(0,E.jsxs)("h3",{children:[(0,E.jsx)(A,{size:20}),"Next: Briefing Builder"]}),(0,E.jsx)("p",{children:"Open the Briefing Builder to configure spaces, adjacencies, and operational bridges. Run validation preview and export your completed PlanBrief."}),(0,E.jsxs)("button",{onClick:()=>m("personalization"),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[(0,E.jsx)(Wi,{className:"w-4 h-4"}),"Personalize Your Layout"]}),(0,E.jsxs)("button",{onClick:()=>m("builder"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,E.jsx)(Vi,{className:"w-4 h-4"}),"Open Briefing Builder"]})]})]});var V,K},cu=[{code:"Z1_APB",name:"Arrival + Public",order:10,description:"Entry, formal entertaining, office, and public-facing spaces"},{code:"Z2_FAM",name:"Family + Kitchen",order:20,description:"Daily living hub, kitchen, breakfast, and casual family spaces"},{code:"Z3_ENT",name:"Entertainment",order:30,description:"Game room, theater, bar, billiards, and recreational spaces"},{code:"Z4_WEL",name:"Wellness",order:40,description:"Gym, spa, pool support, and health-focused spaces"},{code:"Z5_PRI",name:"Primary Suite",order:50,description:"Primary bedroom, bath, closets, and private retreat"},{code:"Z6_GST",name:"Guest + Secondary",order:60,description:"Jr. Primary, guest suites, kids rooms, staff quarters"},{code:"Z7_SVC",name:"Service + BOH",order:70,description:"Laundry, mudroom, mechanical, storage, and back-of-house"},{code:"Z8_OUT",name:"Outdoor Spaces",order:80,description:"Terrace, pool, outdoor kitchen, and exterior living (not conditioned)"},{code:"Z9_GH",name:"Guest House",order:90,description:"Separate guest house structure with suites, living, kitchen",structure:"guestHouse"},{code:"Z10_PH",name:"Pool House",order:100,description:"Separate pool house / wellness pavilion structure",structure:"poolHouse"}],du=[{code:"FOY",name:"Foyer / Gallery",abbrev:"Foyer",zone:"Z1_APB",defaultLevel:1,baseSF:{"10k":350,"15k":420,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Includes coat closet allowance"},{code:"PWD",name:"Powder Room",abbrev:"Powder",zone:"Z1_APB",defaultLevel:1,baseSF:{"10k":60,"15k":80,"20k":100},basementEligible:!1,outdoorSpace:!1,tier:"core"},{code:"OFF",name:"Private Office",abbrev:"Office",zone:"Z1_APB",defaultLevel:1,baseSF:{"10k":200,"15k":280,"20k":350},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Home office / study"},{code:"GR",name:"Great Room",abbrev:"Great Room",zone:"Z1_APB",defaultLevel:1,baseSF:{"10k":500,"15k":600,"20k":750},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Formal living / showcase room"},{code:"DR",name:"Formal Dining",abbrev:"Dining",zone:"Z1_APB",defaultLevel:1,baseSF:{"10k":300,"15k":400,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Seats 10-14"},{code:"WINE",name:"Wine Room",abbrev:"Wine",zone:"Z1_APB",defaultLevel:1,baseSF:{"10k":100,"15k":150,"20k":200},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"Climate controlled; can move to basement"},{code:"LIB",name:"Library",abbrev:"Library",zone:"Z1_APB",defaultLevel:1,baseSF:{"10k":200,"15k":280,"20k":350},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Can double as quiet office"},{code:"FR",name:"Family Room",abbrev:"Family",zone:"Z2_FAM",defaultLevel:1,baseSF:{"10k":500,"15k":650,"20k":800},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Daily living hub"},{code:"KIT",name:"Kitchen (Show)",abbrev:"Kitchen",zone:"Z2_FAM",defaultLevel:1,baseSF:{"10k":350,"15k":450,"20k":550},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Island-centric, open to family"},{code:"BKF",name:"Breakfast Nook",abbrev:"Breakfast",zone:"Z2_FAM",defaultLevel:1,baseSF:{"10k":120,"15k":180,"20k":220},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Casual daily meals"},{code:"SCUL",name:"Scullery / Pantry",abbrev:"Scullery",zone:"Z2_FAM",defaultLevel:1,baseSF:{"10k":180,"15k":250,"20k":320},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Prep, cleanup, storage"},{code:"CHEF",name:"Chef's Kitchen",abbrev:"Chef's",zone:"Z2_FAM",defaultLevel:1,baseSF:{"10k":150,"15k":200,"20k":280},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Service kitchen for formal dining"},{code:"MEDIA",name:"Media Room",abbrev:"Media",zone:"Z2_FAM",defaultLevel:1,baseSF:{"10k":250,"15k":350,"20k":450},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"Casual TV / movies; can move to basement"},{code:"PWD2",name:"Powder Room 2",abbrev:"Powder 2",zone:"Z2_FAM",defaultLevel:1,baseSF:{"10k":60,"15k":60,"20k":60},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Family zone powder room"},{code:"BAR",name:"Bar",abbrev:"Bar",zone:"Z3_ENT",defaultLevel:1,baseSF:{"10k":null,"15k":150,"20k":200},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Built-in bar"},{code:"GAME",name:"Game Room",abbrev:"Game",zone:"Z3_ENT",defaultLevel:1,baseSF:{"10k":null,"15k":400,"20k":550},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Cards, games, lounge"},{code:"THR",name:"Theater",abbrev:"Theater",zone:"Z3_ENT",defaultLevel:1,baseSF:{"10k":null,"15k":400,"20k":550},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Dedicated cinema; basement ideal for sound"},{code:"MUS",name:"Music Room",abbrev:"Music",zone:"Z3_ENT",defaultLevel:1,baseSF:{"10k":null,"15k":250,"20k":300},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Piano, instruments"},{code:"ART",name:"Art Studio",abbrev:"Art",zone:"Z3_ENT",defaultLevel:1,baseSF:{"10k":null,"15k":null,"20k":300},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Creative workspace; needs natural light"},{code:"PWD3",name:"Powder Room 3",abbrev:"Powder 3",zone:"Z3_ENT",defaultLevel:1,baseSF:{"10k":null,"15k":60,"20k":60},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Entertainment zone powder room"},{code:"GYM",name:"Fitness / Gym",abbrev:"Gym",zone:"Z4_WEL",defaultLevel:1,baseSF:{"10k":250,"15k":350,"20k":450},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"Requires daylight preferred"},{code:"SPA",name:"Spa Suite",abbrev:"Spa",zone:"Z4_WEL",defaultLevel:1,baseSF:{"10k":180,"15k":250,"20k":350},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"Sauna, steam, shower"},{code:"MAS",name:"Massage Room",abbrev:"Massage",zone:"Z4_WEL",defaultLevel:1,baseSF:{"10k":null,"15k":150,"20k":180},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Treatment room"},{code:"PLH",name:"Pool House",abbrev:"Pool House",zone:"Z4_WEL",defaultLevel:1,baseSF:{"10k":null,"15k":null,"20k":400},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Separate structure"},{code:"POOLSUP",name:"Pool Support",abbrev:"Pool Sup",zone:"Z4_WEL",defaultLevel:1,baseSF:{"10k":100,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Equipment, changing, bath"},{code:"PWD4",name:"Powder Room 4",abbrev:"Powder 4",zone:"Z4_WEL",defaultLevel:1,baseSF:{"10k":60,"15k":60,"20k":60},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Wellness zone powder room"},{code:"PRI",name:"Primary Bedroom",abbrev:"Primary Bed",zone:"Z5_PRI",defaultLevel:2,baseSF:{"10k":350,"15k":500,"20k":650},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Master bedroom"},{code:"PRIBATH",name:"Primary Bath",abbrev:"Primary Bath",zone:"Z5_PRI",defaultLevel:2,baseSF:{"10k":250,"15k":350,"20k":450},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Double vanity, wet room"},{code:"PRICL_HIS",name:"His Walk-in Closet",abbrev:"His Closet",zone:"Z5_PRI",defaultLevel:2,baseSF:{"10k":100,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Primary suite his dressing room",linkedTo:"PRICL_HER"},{code:"PRICL_HER",name:"Her Walk-in Closet",abbrev:"Her Closet",zone:"Z5_PRI",defaultLevel:2,baseSF:{"10k":100,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Primary suite her dressing room",linkedTo:"PRICL_HIS"},{code:"PRILNG",name:"Primary Lounge",abbrev:"Primary Lounge",zone:"Z5_PRI",defaultLevel:2,baseSF:{"10k":null,"15k":200,"20k":280},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Sitting room"},{code:"POF",name:"Primary Office",abbrev:"Primary Office",zone:"Z5_PRI",defaultLevel:2,baseSF:{"10k":null,"15k":null,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Private study within suite"},{code:"GST1",name:"Guest Suite 1",abbrev:"Guest 1",zone:"Z6_GST",defaultLevel:1,baseSF:{"10k":400,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Ground floor for accessibility"},{code:"GST2",name:"Guest Suite 2",abbrev:"Guest 2",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":400,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core"},{code:"GST3",name:"Guest Suite 3",abbrev:"Guest 3",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"15k+"},{code:"GST4",name:"Guest Suite 4",abbrev:"Guest 4",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":null,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"20k+"},{code:"JRPRI",name:"Jr. Primary Bedroom",abbrev:"Jr. Primary",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":400,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"First/best guest suite - VIP or adult children"},{code:"JRPRIBATH",name:"Jr. Primary Bath",abbrev:"Jr. Primary Bath",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"En-suite for Jr. Primary"},{code:"JRPRICL",name:"Jr. Primary Walk-in",abbrev:"Jr. Primary Closet",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":80,"20k":100},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Single large walk-in for Jr. Primary"},{code:"BNK",name:"Bunk Room",abbrev:"Bunk",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":350,"20k":400},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Sleeps 4-6"},{code:"PLY",name:"Playroom",abbrev:"Playroom",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":300,"20k":400},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Kids activity room"},{code:"HWK",name:"Homework Loft",abbrev:"Homework",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":null,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Study area"},{code:"NNY",name:"Nanny Suite",abbrev:"Nanny",zone:"Z6_GST",defaultLevel:2,baseSF:{"10k":null,"15k":350,"20k":400},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Childcare staff"},{code:"STF",name:"Staff Suite",abbrev:"Staff",zone:"Z6_GST",defaultLevel:1,baseSF:{"10k":null,"15k":350,"20k":400},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Live-in staff"},{code:"MUD",name:"Mudroom",abbrev:"Mudroom",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":150,"15k":200,"20k":280},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Daily entry, dog wash"},{code:"LND",name:"Laundry",abbrev:"Laundry",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":140,"15k":180,"20k":250},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Primary laundry"},{code:"LN2",name:"Laundry 2",abbrev:"Laundry 2",zone:"Z7_SVC",defaultLevel:2,baseSF:{"10k":null,"15k":80,"20k":120},basementEligible:!1,outdoorSpace:!1,tier:"15k+",notes:"Upper floor laundry"},{code:"MEP",name:"Mechanical / IT",abbrev:"Mechanical",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":300,"15k":400,"20k":550},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"HVAC, electrical, IT closet"},{code:"STR",name:"Storage",abbrev:"Storage",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":200,"15k":300,"20k":400},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"General storage"},{code:"GAR",name:"Garage",abbrev:"Garage",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":600,"15k":900,"20k":1200},basementEligible:!0,outdoorSpace:!1,tier:"core",notes:"3/4/6 car"},{code:"WRK",name:"Workshop",abbrev:"Workshop",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":null,"15k":150,"20k":250},basementEligible:!0,outdoorSpace:!1,tier:"15k+",notes:"Hobby/tools"},{code:"SKT",name:"Staff Kitchen",abbrev:"Staff Kitchen",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":null,"15k":null,"20k":180},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Staff break area"},{code:"SLG",name:"Staff Lounge",abbrev:"Staff Lounge",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":null,"15k":null,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"20k+",notes:"Staff rest area"},{code:"COR",name:"Stair / Elevator Core",abbrev:"Core",zone:"Z7_SVC",defaultLevel:1,baseSF:{"10k":300,"15k":400,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"core",notes:"Vertical circulation; spans all levels"},{code:"TERR",name:"Main Terrace",abbrev:"Terrace",zone:"Z8_OUT",defaultLevel:1,baseSF:{"10k":800,"15k":1200,"20k":1800},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Outdoor living; not in conditioned total"},{code:"POOL",name:"Pool + Deck",abbrev:"Pool",zone:"Z8_OUT",defaultLevel:1,baseSF:{"10k":1500,"15k":2e3,"20k":2800},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Lap pool + surround; not in conditioned total"},{code:"OKT",name:"Outdoor Kitchen",abbrev:"Out Kitchen",zone:"Z8_OUT",defaultLevel:1,baseSF:{"10k":150,"15k":250,"20k":350},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Summer kitchen; not in conditioned total"},{code:"FPT",name:"Fire Pit Area",abbrev:"Fire Pit",zone:"Z8_OUT",defaultLevel:1,baseSF:{"10k":200,"15k":300,"20k":400},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Gathering area; not in conditioned total"},{code:"ODN",name:"Outdoor Dining",abbrev:"Out Dining",zone:"Z8_OUT",defaultLevel:1,baseSF:{"10k":250,"15k":350,"20k":500},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Al fresco dining; not in conditioned total"},{code:"CTY",name:"Courtyard",abbrev:"Courtyard",zone:"Z8_OUT",defaultLevel:1,baseSF:{"10k":null,"15k":400,"20k":600},basementEligible:!1,outdoorSpace:!0,tier:"15k+",notes:"Interior court; not in conditioned total"},{code:"POOL_BATH",name:"Pool Bathroom",abbrev:"Pool Bath",zone:"Z8_OUT",defaultLevel:1,baseSF:{"10k":80,"15k":80,"20k":100},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Outdoor pool bathroom - separate from main house"},{code:"DRV",name:"Motor Court",abbrev:"Motor Court",zone:"Z8_OUT",defaultLevel:1,baseSF:{"10k":1e3,"15k":1500,"20k":2e3},basementEligible:!1,outdoorSpace:!0,tier:"core",notes:"Arrival drive; not in conditioned total"},{code:"GH_GST1",name:"Guest House Suite 1",abbrev:"GH Suite 1",zone:"Z9_GH",defaultLevel:1,baseSF:{"10k":null,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Guest house bedroom with en-suite"},{code:"GH_GST2",name:"Guest House Suite 2",abbrev:"GH Suite 2",zone:"Z9_GH",defaultLevel:1,baseSF:{"10k":null,"15k":450,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Guest house bedroom with en-suite"},{code:"GH_GST3",name:"Guest House Suite 3",abbrev:"GH Suite 3",zone:"Z9_GH",defaultLevel:1,baseSF:{"10k":null,"15k":null,"20k":500},basementEligible:!1,outdoorSpace:!1,tier:"20k+",structure:"guestHouse",notes:"Guest house bedroom with en-suite"},{code:"GH_PWD",name:"Guest House Powder Room",abbrev:"GH Powder",zone:"Z9_GH",defaultLevel:1,baseSF:{"10k":null,"15k":50,"20k":60},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Half bath for guest house common areas"},{code:"GH_LIV",name:"Guest House Living",abbrev:"GH Living",zone:"Z9_GH",defaultLevel:1,baseSF:{"10k":null,"15k":300,"20k":400},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Family/living area in guest house"},{code:"GH_KIT",name:"Guest House Kitchen",abbrev:"GH Kitchen",zone:"Z9_GH",defaultLevel:1,baseSF:{"10k":null,"15k":150,"20k":200},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Full kitchen in guest house"},{code:"GH_DIN",name:"Guest House Dining",abbrev:"GH Dining",zone:"Z9_GH",defaultLevel:1,baseSF:{"10k":null,"15k":120,"20k":150},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"guestHouse",notes:"Dining area in guest house"},{code:"PH_SHW",name:"Pool House Showers",abbrev:"PH Showers",zone:"Z10_PH",defaultLevel:1,baseSF:{"10k":null,"15k":80,"20k":120},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Outdoor shower facilities"},{code:"PH_CHG",name:"Pool House Changing",abbrev:"PH Changing",zone:"Z10_PH",defaultLevel:1,baseSF:{"10k":null,"15k":100,"20k":150},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"His/hers changing rooms"},{code:"PH_BATH",name:"Pool House Bathroom",abbrev:"PH Bath",zone:"Z10_PH",defaultLevel:1,baseSF:{"10k":null,"15k":60,"20k":80},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Full bathroom at pool"},{code:"PH_ENT",name:"Pool House Entertainment",abbrev:"PH Entertainment",zone:"Z10_PH",defaultLevel:1,baseSF:{"10k":null,"15k":250,"20k":350},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Entertainment/gaming area at pool"},{code:"PH_KIT",name:"Pool House Kitchen",abbrev:"PH Kitchen",zone:"Z10_PH",defaultLevel:1,baseSF:{"10k":null,"15k":120,"20k":180},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Kitchen/bar at pool house"},{code:"PH_DIN",name:"Pool House Dining",abbrev:"PH Dining",zone:"Z10_PH",defaultLevel:1,baseSF:{"10k":null,"15k":100,"20k":150},basementEligible:!1,outdoorSpace:!1,tier:"15k+",structure:"poolHouse",notes:"Covered dining at pool"}];function uu(e){return du.find(t=>t.code===e)}function hu(e){return du.filter(t=>"core"===t.tier||("15k+"===t.tier&&("15k"===e||"20k"===e)||"20k+"===t.tier&&"20k"===e))}function pu(e){return"main"===e?cu.filter(e=>!e.structure).sort((e,t)=>e.order-t.order):cu.filter(t=>t.structure===e).sort((e,t)=>e.order-t.order)}const fu="https://res.cloudinary.com/drhp5e0kl/image/upload",mu={FOY_M:"FOY_M_xatei3",PWD_M:"PWD_M_z1syjl",OFF_M:"OFF_M_uvx9ci",GR_M:"GR_M_u47amm",DR_M:"DR_M_aojuh0",WINE_M:"WINE_M_btnxlc",LIB_M:"LIB_M_jmwsay",FR_M:"FR_M_jk6ujp",KIT_M:"KIT_M_bskgph",BKF_M:"BKF_M_w9udgb",SCUL_M:"SCUL_M_qpdfeb",CHEF_M:"CHEF_M_moztip",MEDIA_M:"MEDIA_M_zhc5vf",PWD2_M:"PWD_M_z1syjl",BAR_M:"BAR_M_iuexss",GAME_M:"GAME_M_vzu5lf",THR_M:"THR_M_bmf1vs",MUS_M:"MUS_M_a3ih8o",ART_M:"ART_M_bkopxz",PWD3_M:"PWD_M_z1syjl",GYM_M:"GYM_M_gvxtck",SPA_M:"SPA_M_xvpdst",MAS_M:"MAS_M_wehgk5",PLH_M:"PLH_M_wyyayn",POOLSUP_M:"POOLSUP_M_ihrxiz",PWD4_M:"PWD_M_z1syjl",PRI_M:"PRI_M_ka98yn",PRIBATH_M:"PRIBATH_M_hmsaqt",PRICL_HIS_M:"PRICL_M_s0wfmq",PRICL_HER_M:"PRICL_M_s0wfmq",PRILNG_M:"PRILNG_M_gfskim",POF_M:"POF_M_bgmist",JRPRI_M:"VIP_M_nr242n",JRPRIBATH_M:"PRIBATH_M_hmsaqt",JRPRICL_M:"PRICL_M_s0wfmq",GST1_M:"GST1_M_g7lhny",GST2_M:"GST2_M_wmagho",GST3_M:"GST3_M_yvbnl3",GST4_M:"GST4_M_s2zpd2",BNK_M:"BNK_M_tjjg7k",PLY_M:"PLY_M_bmf9kz",HWK_M:"HWK_M_guyo5i",NNY_M:"NNY_M_o7vr9y",STF_M:"STF_M_cjcliy",MUD_M:"MUD_M_ftf7l3",LND_M:"LND_M_xjlniy",LN2_M:"LN2_M_xn7rb9",MEP_M:"MEP_M_mutb57",STR_M:"STR_M_i22tsu",GAR_M:"GAR_M_piyvgz",WRK_M:"WRK_M_xmcshf",SKT_M:"SKT_M_gien1l",SLG_M:"SLG_M_znjt0g",COR_M:"COR_M_tugeyb",TERR_M:"TERR_M_gtjpaj",POOL_M:"POOL_M_jda5qd",OKT_M:"OKT_M_mitdyw",FPT_M:"FPT_M_ilx6g1",ODN_M:"ODN_M_juflbh",CTY_M:"CTY_M_pg9ila",POOL_BATH_M:"PWD_M_z1syjl",DRV_M:"DRV_M_yzmztf"};const gu={"10k":{min:.12,max:.15,default:.13},"15k":{min:.13,max:.16,default:.14},"20k":{min:.14,max:.18,default:.15}};function vu(e,t,n,a,i){if(n){const n=t-e,a=Math.round(e*gu[i].min),r=Math.round(e*gu[i].max);return Math.max(a,Math.min(r,n))}return Math.round(e*a)}const yu={targetSF:15e3,deltaPct:10,circulationPct:.14,lockToTarget:!0,programTier:"15k",hasBasement:!1},bu=function(e){const t=hu(e),n={};return t.forEach(t=>{null!==t.baseSF[e]&&(n[t.code]={included:!0,size:"M",level:t.defaultLevel,customSF:null,imageUrl:null,notes:""})}),n};const xu=function(e,t,n,i){const r=(null===e||void 0===e?void 0:e.settings)||yu,o=(0,a.useMemo)(()=>(null===e||void 0===e?void 0:e.selections)||{},[null===e||void 0===e?void 0:e.selections]),[l,c]=(0,a.useState)("Z1_APB"),d=Object.keys(o).length>0,u=(0,a.useCallback)((e,n)=>{t&&t(e,n)},[t]),h=(0,a.useCallback)(e=>{const n=o[e];t&&t(e,{included:!(null!==n&&void 0!==n&&n.included)})},[o,t]),p=(0,a.useCallback)((e,n)=>{t&&t(e,{size:n})},[t]),f=(0,a.useCallback)((e,n)=>{t&&t(e,{level:n})},[t]),m=(0,a.useCallback)(e=>{n&&n(e)},[n]),g=(0,a.useCallback)(()=>{if(n&&n(yu),i){const e=bu(yu.programTier,yu.hasBasement);i(e)}c("Z1_APB")},[n,i]),v=(0,a.useCallback)(e=>{var t,a;const r=(null===e||void 0===e||null===(t=e.projectParameters)||void 0===t?void 0:t.targetGSF)||15e3,o=(null===e||void 0===e||null===(a=e.projectParameters)||void 0===a?void 0:a.hasBasement)||!1;let s="15k";if(r<=12e3?s="10k":r>=18e3&&(s="20k"),n&&n({targetSF:r,hasBasement:o,programTier:s}),i){const e=bu(s,o);i(e)}},[n,i]),y=(0,a.useCallback)(e=>o[e]||{included:!1,size:"M",level:1},[o]),b=(0,a.useCallback)(e=>{const t=uu(e),n=o[e];return t&&n&&n.included?n.customSF?n.customSF:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const i=e.baseSF[t];if(null===i)return 0;const r=a/100;switch(n){case"S":return Math.round(i*(1-r));case"L":return Math.round(i*(1+r));default:return i}}(t,r.programTier,n.size,r.deltaPct):0},[o,r.programTier,r.deltaPct]),x=(0,a.useCallback)(e=>du.filter(t=>t.zone===e&&null!==t.baseSF[r.programTier]),[r.programTier]),S=(0,a.useMemo)(()=>{const e=du.filter(e=>!e.outdoorSpace);let t=0;const n={},a={};e.forEach(e=>{const i=o[e.code];if(null!==i&&void 0!==i&&i.included){const r=b(e.code);t+=r,n[e.zone]||(n[e.zone]=0),n[e.zone]+=r;const o=i.level||e.defaultLevel;a[o]=(a[o]||0)+r}});const i=vu(t,r.targetSF,r.lockToTarget,r.circulationPct,r.programTier),s=t>0?i/t*100:0,l=t+i,c=l-r.targetSF;let d=0;return du.filter(e=>e.outdoorSpace).forEach(e=>{const t=o[e.code];null!==t&&void 0!==t&&t.included&&(d+=b(e.code))}),{net:t,circulation:i,circulationPct:s.toFixed(1),total:l,deltaFromTarget:c,byZone:n,byLevel:a,outdoorTotal:d,targetSF:r.targetSF}},[o,r,b]),_=(0,a.useMemo)(()=>{const e={main:{enabled:!0,net:0,circulation:0,total:0,byLevel:{},spaceCount:0},guestHouse:{enabled:!1,net:0,total:0,spaceCount:0},poolHouse:{enabled:!1,net:0,total:0,spaceCount:0}};du.forEach(t=>{const n=o[t.code];if(null===n||void 0===n||!n.included)return;if(t.outdoorSpace)return;const a=b(t.code),i=t.structure||"main";if("main"===i){e.main.net+=a,e.main.spaceCount++;const i=n.level||t.defaultLevel;e.main.byLevel[i]=(e.main.byLevel[i]||0)+a}else"guestHouse"===i?(e.guestHouse.enabled=!0,e.guestHouse.net+=a,e.guestHouse.total+=a,e.guestHouse.spaceCount++):"poolHouse"===i&&(e.poolHouse.enabled=!0,e.poolHouse.net+=a,e.poolHouse.total+=a,e.poolHouse.spaceCount++)});const t=vu(e.main.net,r.targetSF,r.lockToTarget,r.circulationPct,r.programTier);return e.main.circulation=t,e.main.total=e.main.net+t,e},[o,r,b]),w=(0,a.useMemo)(()=>[...cu].sort((e,t)=>e.order-t.order).map(e=>{const t=x(e.code),n=t.filter(e=>{var t;return null===(t=o[e.code])||void 0===t?void 0:t.included}).length,a=t.reduce((e,t)=>{var n;return null!==(n=o[t.code])&&void 0!==n&&n.included?e+b(t.code):e},0);return s(s({},e),{},{spaceCount:t.length,includedCount:n,totalSF:a})}),[x,o,b]),N=(0,a.useCallback)(()=>{const e=[];return Object.entries(o).forEach(t=>{let[n,a]=t;if(a.included){const t=uu(n);t&&e.push({code:n,name:t.name,zone:t.zone,targetSF:b(n),level:a.level||t.defaultLevel,size:a.size,notes:a.notes})}}),{settings:{targetSF:r.targetSF,programTier:r.programTier,hasBasement:r.hasBasement,circulationPct:parseFloat(S.circulationPct)/100},spaces:e,totals:{net:S.net,circulation:S.circulation,total:S.total}}},[o,r,S,b]);return{settings:r,selections:o,activeZone:l,setActiveZone:c,isLoaded:!0,hasSelections:d,totals:S,zonesWithCounts:w,structureTotals:_,updateSettings:m,updateSpaceSelection:u,toggleSpaceIncluded:h,setSpaceSize:p,setSpaceLevel:f,resetToDefaults:g,applyKYCDefaults:v,getSpaceSelection:y,getSpacesForZone:x,calculateArea:b,generateMVPBrief:N}};function Su(e){const{settings:t,spaces:n,totals:a}=e,i=n.map((e,t)=>{const n=uu(e.code),a=cu.find(t=>t.code===e.zone);return{id:"s".concat(t+1),code:e.code,name:e.name,targetSF:e.targetSF,zone:(null===a||void 0===a?void 0:a.name)||e.zone,level:e.level,rationale:e.notes||(null===n||void 0===n?void 0:n.notes)||""}}),r={};return i.forEach(e=>{r[e.zone]||(r[e.zone]=[]),r[e.zone].push(e)}),{programTier:t.programTier,targetSF:t.targetSF,hasBasement:t.hasBasement,spaces:i,spacesByZone:r,totals:{net:a.net,circulation:a.circulation,total:a.total},presetHint:_u(t.targetSF)}}function _u(e){return e<=1e4?"10k":e<=15e3?"15k":e<=2e4?"20k":"custom"}function wu(e,t){var n,a;const i=[],r=[];let o=0;Object.entries(e).forEach(e=>{let[n,a]=e;if(a.included){const e=uu(n);if(e&&!e.outdoorSpace&&e.baseSF[t.programTier]){const n=e.baseSF[t.programTier],i=t.deltaPct/100;let r=n;"S"===a.size&&(r=Math.round(n*(1-i))),"L"===a.size&&(r=Math.round(n*(1+i))),a.customSF&&(r=a.customSF),o+=r}}});const s=t.targetSF,l=o*(1+t.circulationPct),c=(l-s)/s*100;c>20&&r.push({type:"over_target",message:"Program is ".concat(c.toFixed(0),"% over target SF. Consider reducing sizes or removing spaces."),value:l}),c<-20&&r.push({type:"under_target",message:"Program is ".concat(Math.abs(c).toFixed(0),"% under target SF. Consider adding spaces or increasing sizes."),value:l});return["FOY","KIT","FR","PRI","PRIBATH"].forEach(t=>{var n,a;null!==(n=e[t])&&void 0!==n&&n.included||i.push({type:"missing_required",code:t,message:"".concat((null===(a=uu(t))||void 0===a?void 0:a.name)||t," is required for any residential program")})}),null!==(n=e.PRICL_HIS)&&void 0!==n&&n.included||null!==(a=e.PRICL_HER)&&void 0!==a&&a.included||i.push({type:"missing_required",code:"PRICL",message:"Primary Closet is required for any residential program"}),t.hasBasement||Object.entries(e).forEach(e=>{let[t,n]=e;var a;n.included&&n.level<0&&i.push({type:"invalid_level",code:t,message:"".concat((null===(a=uu(t))||void 0===a?void 0:a.name)||t," is placed in basement but project has no basement")})}),{valid:0===i.length,errors:i,warnings:r,estimatedTotal:Math.round(l)}}const Nu=e=>{let{zones:t,activeZone:n,onZoneChange:a,totals:i}=e;return(0,E.jsxs)("div",{className:"fyi-zone-stepper",children:[(0,E.jsx)("h3",{className:"fyi-zone-stepper__title",children:"Program Zones"}),(0,E.jsx)("div",{className:"fyi-zone-stepper__list",children:t.map(e=>{const t=e.code===n,i="Z8_OUT"===e.code;return(0,E.jsxs)("button",{className:"fyi-zone-stepper__item ".concat(t?"fyi-zone-stepper__item--active":""),onClick:()=>a(e.code),children:[(0,E.jsxs)("div",{className:"fyi-zone-stepper__item-header",children:[(0,E.jsx)("span",{className:"fyi-zone-stepper__item-name",children:e.name}),(0,E.jsxs)("span",{className:"fyi-zone-stepper__item-count",children:[e.includedCount,"/",e.spaceCount]})]}),(0,E.jsx)("div",{className:"fyi-zone-stepper__item-sf",children:e.totalSF>0?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("span",{className:"fyi-zone-stepper__sf-value",children:e.totalSF.toLocaleString()}),(0,E.jsx)("span",{className:"fyi-zone-stepper__sf-label",children:i?"SF (exterior)":"SF"})]}):(0,E.jsx)("span",{className:"fyi-zone-stepper__sf-empty",children:"\u2014"})}),t&&(0,E.jsx)("div",{className:"fyi-zone-stepper__item-indicator"})]},e.code)})}),(0,E.jsxs)("div",{className:"fyi-zone-stepper__summary",children:[(0,E.jsxs)("div",{className:"fyi-zone-stepper__summary-row",children:[(0,E.jsx)("span",{children:"Net Conditioned"}),(0,E.jsxs)("strong",{children:[i.net.toLocaleString()," SF"]})]}),(0,E.jsxs)("div",{className:"fyi-zone-stepper__summary-row",children:[(0,E.jsxs)("span",{children:["Circulation (",i.circulationPct,"%)"]}),(0,E.jsxs)("span",{children:[i.circulation.toLocaleString()," SF"]})]}),(0,E.jsxs)("div",{className:"fyi-zone-stepper__summary-row fyi-zone-stepper__summary-row--total",children:[(0,E.jsx)("span",{children:"Total"}),(0,E.jsxs)("strong",{children:[i.total.toLocaleString()," SF"]})]}),(0,E.jsxs)("div",{className:"fyi-zone-stepper__summary-row fyi-zone-stepper__summary-row--delta ".concat(i.deltaFromTarget>0?"fyi-zone-stepper__summary-row--over":i.deltaFromTarget<0?"fyi-zone-stepper__summary-row--under":""),children:[(0,E.jsx)("span",{children:"vs Target"}),(0,E.jsxs)("span",{children:[i.deltaFromTarget>0?"+":"",i.deltaFromTarget.toLocaleString()," SF"]})]})]})]})},ku=e=>{let{space:t,selection:n,calculatedArea:i,settings:r,availableLevels:o,onSizeChange:s,onToggleIncluded:l,onLevelChange:c,onNotesChange:d}=e;const[u,h]=(0,a.useState)(!1),{included:p,size:f,level:m,notes:g,kycSource:v}=n,y=t.outdoorSpace,b="guestHouse"===t.structure||"poolHouse"===t.structure,x=r.deltaPct/100,S=t.baseSF[r.programTier]||0,_={S:Math.round(S*(1-x)),M:S,L:Math.round(S*(1+x))},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"M";const n="".concat(e,"_").concat(t),a=mu[n];if(a)return"".concat(fu,"/").concat(a,".png");if("M"!==t){const t=mu["".concat(e,"_M")];if(t)return"".concat(fu,"/").concat(t,".png")}return null}(t.code,f),N=b?[{value:1,label:"L1"}]:o||[{value:2,label:"L2"},{value:1,label:"L1 (Arrival)"}];return(0,E.jsxs)("div",{className:"fyi-space-card ".concat(p?"":"fyi-space-card--excluded"," ").concat(y?"fyi-space-card--outdoor":""),children:[(0,E.jsxs)("div",{className:"fyi-space-card__image-container",children:[w?(0,E.jsx)("img",{src:w,alt:t.name,className:"fyi-space-card__image",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,E.jsxs)("div",{className:"fyi-space-card__image-placeholder",style:{display:w?"none":"flex"},children:[(0,E.jsxs)("svg",{className:"fyi-space-card__placeholder-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,E.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,E.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,E.jsx)("polyline",{points:"21 15 16 10 5 21"})]}),(0,E.jsx)("span",{children:"Add Image"})]}),(()=>{if(!v)return null;const e={mustHave:{label:"Must Have",className:"fyi-space-card__badge--must"},niceToHave:{label:"Nice to Have",className:"fyi-space-card__badge--nice"},petGroomingRoom:{label:"Pet",className:"fyi-space-card__badge--kyc"},lateNightMediaUse:{label:"Sound",className:"fyi-space-card__badge--kyc"},wantsBar:{label:"KYC",className:"fyi-space-card__badge--kyc"},wantsBunkRoom:{label:"KYC",className:"fyi-space-card__badge--kyc"},wantsBreakfastNook:{label:"KYC",className:"fyi-space-card__badge--kyc"},staffingLevel:{label:"Staff",className:"fyi-space-card__badge--kyc"},staffingWithKids:{label:"Nanny",className:"fyi-space-card__badge--kyc"},secondary:{label:"Partner",className:"fyi-space-card__badge--secondary"}}[v];return e?(0,E.jsx)("span",{className:"fyi-space-card__badge ".concat(e.className),children:e.label}):null})()]}),(0,E.jsxs)("div",{className:"fyi-space-card__header",children:[(0,E.jsx)("h4",{className:"fyi-space-card__name",children:t.abbrev}),(0,E.jsxs)("label",{className:"fyi-space-card__toggle",children:[(0,E.jsx)("input",{type:"checkbox",checked:p,onChange:()=>l()}),(0,E.jsx)("span",{className:"fyi-space-card__toggle-slider"})]})]}),t.abbrev!==t.name&&(0,E.jsx)("p",{className:"fyi-space-card__fullname",children:t.name}),p&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"fyi-space-card__size-selector",children:["S","M","L"].map(e=>(0,E.jsxs)("button",{className:"fyi-space-card__size-btn ".concat(f===e?"fyi-space-card__size-btn--active":""),onClick:()=>s(e),children:[(0,E.jsx)("span",{className:"fyi-space-card__size-letter",children:e}),(0,E.jsx)("span",{className:"fyi-space-card__size-sf",children:_[e].toLocaleString()})]},e))}),(0,E.jsxs)("div",{className:"fyi-space-card__area",children:[(0,E.jsx)("span",{className:"fyi-space-card__area-value",children:i.toLocaleString()}),(0,E.jsx)("span",{className:"fyi-space-card__area-unit",children:y?"SF (exterior)":"SF"})]}),!y&&!b&&N.length>1&&(0,E.jsxs)("div",{className:"fyi-space-card__level-selector",children:[(0,E.jsx)("label",{children:"Level"}),(0,E.jsx)("select",{value:m,onChange:e=>c(parseInt(e.target.value)),className:"fyi-space-card__level-select",children:N.map(e=>(0,E.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,E.jsxs)("button",{className:"fyi-space-card__details-toggle",onClick:()=>h(!u),children:[u?"Hide Details":"More Options",(0,E.jsx)("svg",{className:"fyi-space-card__chevron ".concat(u?"fyi-space-card__chevron--open":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,E.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),u&&(0,E.jsxs)("div",{className:"fyi-space-card__details",children:[(0,E.jsxs)("div",{className:"fyi-space-card__detail-row",children:[(0,E.jsx)("label",{children:"Notes"}),(0,E.jsx)("textarea",{value:g||"",onChange:e=>d(e.target.value),className:"fyi-space-card__notes",placeholder:"Add notes...",rows:2})]}),t.notes&&(0,E.jsx)("p",{className:"fyi-space-card__space-notes",children:(0,E.jsx)("em",{children:t.notes})})]})]}),!p&&(0,E.jsxs)("div",{className:"fyi-space-card__excluded-overlay",children:[(0,E.jsx)("span",{children:"Not Included"}),(0,E.jsx)("button",{className:"fyi-space-card__include-btn",onClick:()=>l(),children:"Add to Program"})]})]})},Cu=e=>{var t,n,i,r,o,l,c,d;let{settings:u,totals:h,selections:p,structureTotals:f,availableLevels:m,onSettingsChange:g,onExportPDF:v,onProceedToMVP:y,isExporting:b}=e;const[x,S]=(0,a.useState)(!1),[_,w]=(0,a.useState)({main:!0}),N=wu(p,u),k=Object.values(f||{}).filter(e=>null===e||void 0===e?void 0:e.enabled).reduce((e,t)=>e+(t.total||0),0),C=Math.min(120,Math.max(0,k/u.targetSF*100)),j=k>u.targetSF,P=k<.9*u.targetSF,A=e=>{w(t=>s(s({},t),{},{[e]:!t[e]}))};return(0,E.jsxs)("div",{className:"fyi-totals-panel",children:[(0,E.jsx)("h3",{className:"fyi-totals-panel__title",children:"Program Summary"}),(0,E.jsxs)("div",{className:"fyi-totals-panel__section",children:[(0,E.jsx)("label",{className:"fyi-totals-panel__label",children:"Program Size"}),(0,E.jsx)("div",{className:"fyi-totals-panel__tier-selector",children:["10k","15k","20k"].map(e=>(0,E.jsxs)("button",{className:"fyi-totals-panel__tier-btn ".concat(u.programTier===e?"fyi-totals-panel__tier-btn--active":""),onClick:()=>(e=>{g({programTier:e,targetSF:{"10k":1e4,"15k":15e3,"20k":2e4}[e]})})(e),children:["10k"===e&&"10K","15k"===e&&"15K","20k"===e&&"20K"]},e))})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__section",children:[(0,E.jsx)("label",{className:"fyi-totals-panel__label",children:"Target SF (All Structures)"}),(0,E.jsxs)("div",{className:"fyi-totals-panel__input-group",children:[(0,E.jsx)("input",{type:"number",value:u.targetSF,onChange:e=>g({targetSF:parseInt(e.target.value)||0}),className:"fyi-totals-panel__input",min:5e3,max:5e4,step:500}),(0,E.jsx)("span",{className:"fyi-totals-panel__input-suffix",children:"SF"})]})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__section",children:[(0,E.jsxs)("div",{className:"fyi-totals-panel__progress-header",children:[(0,E.jsx)("span",{children:"Progress to Target"}),(0,E.jsxs)("span",{className:"fyi-totals-panel__progress-pct ".concat(j?"fyi-totals-panel__progress-pct--over":P?"fyi-totals-panel__progress-pct--under":""),children:[C.toFixed(0),"%"]})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__progress-bar",children:[(0,E.jsx)("div",{className:"fyi-totals-panel__progress-fill ".concat(j?"fyi-totals-panel__progress-fill--over":""),style:{width:"".concat(Math.min(100,C),"%")}}),(0,E.jsx)("div",{className:"fyi-totals-panel__progress-target"})]})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__structures",children:[(null===f||void 0===f||null===(t=f.main)||void 0===t?void 0:t.enabled)&&(0,E.jsxs)("div",{className:"fyi-totals-panel__structure",children:[(0,E.jsxs)("button",{className:"fyi-totals-panel__structure-header",onClick:()=>A("main"),children:[(0,E.jsx)("span",{children:"Main Residence"}),(0,E.jsxs)("span",{children:[(null===(n=f.main.total)||void 0===n?void 0:n.toLocaleString())||0," SF"]}),(0,E.jsx)("svg",{className:"fyi-totals-panel__chevron ".concat(_.main?"fyi-totals-panel__chevron--open":""),viewBox:"0 0 24 24",children:(0,E.jsx)("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor"})})]}),_.main&&(0,E.jsxs)("div",{className:"fyi-totals-panel__structure-details",children:[(0,E.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,E.jsx)("span",{children:"Net Program"}),(0,E.jsxs)("span",{children:[(null===(i=f.main.net)||void 0===i?void 0:i.toLocaleString())||0," SF"]})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__row fyi-totals-panel__row--sub",children:[(0,E.jsxs)("span",{children:["Circulation (",f.main.circulationPct||0,"%)"]}),(0,E.jsxs)("span",{children:[(null===(r=f.main.circulation)||void 0===r?void 0:r.toLocaleString())||0," SF"]})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__levels",children:[(0,E.jsx)("label",{className:"fyi-totals-panel__label fyi-totals-panel__label--small",children:"By Level"}),(L=f.main.byLevel,L&&m?m.map(e=>{const t=1===e.value?1:e.value,n=L[t]||0;return 0===n?null:(0,E.jsxs)("div",{className:"fyi-totals-panel__level-row",children:[(0,E.jsx)("span",{children:(a=e.value,1===a?"L1 (Arrival)":"L".concat(a))}),(0,E.jsxs)("span",{children:[n.toLocaleString()," SF"]})]},e.value);var a}):null)]})]})]}),(null===f||void 0===f||null===(o=f.guestHouse)||void 0===o?void 0:o.enabled)&&(0,E.jsxs)("div",{className:"fyi-totals-panel__structure",children:[(0,E.jsxs)("button",{className:"fyi-totals-panel__structure-header",onClick:()=>A("guestHouse"),children:[(0,E.jsx)("span",{children:"Guest House"}),(0,E.jsxs)("span",{children:[(null===(l=f.guestHouse.total)||void 0===l?void 0:l.toLocaleString())||0," SF"]}),(0,E.jsx)("svg",{className:"fyi-totals-panel__chevron ".concat(_.guestHouse?"fyi-totals-panel__chevron--open":""),viewBox:"0 0 24 24",children:(0,E.jsx)("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor"})})]}),_.guestHouse&&(0,E.jsx)("div",{className:"fyi-totals-panel__structure-details",children:(0,E.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,E.jsx)("span",{children:"Spaces"}),(0,E.jsx)("span",{children:f.guestHouse.spaceCount||0})]})})]}),(null===f||void 0===f||null===(c=f.poolHouse)||void 0===c?void 0:c.enabled)&&(0,E.jsxs)("div",{className:"fyi-totals-panel__structure",children:[(0,E.jsxs)("button",{className:"fyi-totals-panel__structure-header",onClick:()=>A("poolHouse"),children:[(0,E.jsx)("span",{children:"Pool House"}),(0,E.jsxs)("span",{children:[(null===(d=f.poolHouse.total)||void 0===d?void 0:d.toLocaleString())||0," SF"]}),(0,E.jsx)("svg",{className:"fyi-totals-panel__chevron ".concat(_.poolHouse?"fyi-totals-panel__chevron--open":""),viewBox:"0 0 24 24",children:(0,E.jsx)("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor"})})]}),_.poolHouse&&(0,E.jsx)("div",{className:"fyi-totals-panel__structure-details",children:(0,E.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,E.jsx)("span",{children:"Spaces"}),(0,E.jsx)("span",{children:f.poolHouse.spaceCount||0})]})})]})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__section fyi-totals-panel__grand-total",children:[(0,E.jsxs)("div",{className:"fyi-totals-panel__row fyi-totals-panel__row--total",children:[(0,E.jsx)("span",{children:"Grand Total"}),(0,E.jsxs)("strong",{children:[k.toLocaleString()," SF"]})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__row fyi-totals-panel__row--delta ".concat(k>u.targetSF?"fyi-totals-panel__row--over":k<u.targetSF?"fyi-totals-panel__row--under":""),children:[(0,E.jsx)("span",{children:"Delta from Target"}),(0,E.jsxs)("span",{children:[k>u.targetSF?"+":"",(k-u.targetSF).toLocaleString()," SF"]})]}),h.outdoorTotal>0&&(0,E.jsxs)("div",{className:"fyi-totals-panel__row fyi-totals-panel__row--outdoor",children:[(0,E.jsx)("span",{children:"Outdoor (not conditioned)"}),(0,E.jsxs)("span",{children:[h.outdoorTotal.toLocaleString()," SF"]})]})]}),(0,E.jsxs)("button",{className:"fyi-totals-panel__advanced-toggle",onClick:()=>S(!x),children:["Settings",(0,E.jsx)("svg",{className:"fyi-totals-panel__chevron ".concat(x?"fyi-totals-panel__chevron--open":""),viewBox:"0 0 24 24",children:(0,E.jsx)("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor"})})]}),x&&(0,E.jsxs)("div",{className:"fyi-totals-panel__advanced",children:[(0,E.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,E.jsx)("label",{children:"Size Delta (S/L)"}),(0,E.jsxs)("div",{className:"fyi-totals-panel__input-group fyi-totals-panel__input-group--small",children:[(0,E.jsx)("input",{type:"number",value:u.deltaPct,onChange:e=>g({deltaPct:parseInt(e.target.value)||10}),className:"fyi-totals-panel__input",min:5,max:25}),(0,E.jsx)("span",{className:"fyi-totals-panel__input-suffix",children:"%"})]})]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,E.jsx)("label",{children:"Circulation"}),(0,E.jsxs)("select",{value:u.lockToTarget?"balance":"fixed",onChange:e=>g({lockToTarget:"balance"===e.target.value}),className:"fyi-totals-panel__select",children:[(0,E.jsx)("option",{value:"balance",children:"Balance to Target"}),(0,E.jsx)("option",{value:"fixed",children:"Fixed %"})]})]}),!u.lockToTarget&&(0,E.jsxs)("div",{className:"fyi-totals-panel__row",children:[(0,E.jsx)("label",{children:"Circulation %"}),(0,E.jsxs)("div",{className:"fyi-totals-panel__input-group fyi-totals-panel__input-group--small",children:[(0,E.jsx)("input",{type:"number",value:Math.round(100*u.circulationPct),onChange:e=>g({circulationPct:(parseInt(e.target.value)||13)/100}),className:"fyi-totals-panel__input",min:10,max:20}),(0,E.jsx)("span",{className:"fyi-totals-panel__input-suffix",children:"%"})]})]})]}),(N.warnings.length>0||N.errors.length>0)&&(0,E.jsxs)("div",{className:"fyi-totals-panel__validation",children:[N.errors.map((e,t)=>(0,E.jsxs)("div",{className:"fyi-totals-panel__validation-error",children:[(0,E.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:(0,E.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),e.message]},"error-".concat(t))),N.warnings.map((e,t)=>(0,E.jsxs)("div",{className:"fyi-totals-panel__validation-warning",children:[(0,E.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:(0,E.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),e.message]},"warning-".concat(t)))]}),(0,E.jsxs)("div",{className:"fyi-totals-panel__actions",children:[(0,E.jsxs)("div",{className:"fyi-totals-panel__export-group",children:[(0,E.jsx)("span",{className:"fyi-totals-panel__export-label",children:"Export PDF:"}),(0,E.jsxs)("div",{className:"fyi-totals-panel__export-buttons",children:[(0,E.jsx)("button",{className:"fyi-totals-panel__btn fyi-totals-panel__btn--secondary fyi-totals-panel__btn--small",onClick:()=>v("zone"),disabled:b,title:"Group spaces by zone (APB, FAM, ENT, etc.)",children:b?"...":"By Zone"}),(0,E.jsx)("button",{className:"fyi-totals-panel__btn fyi-totals-panel__btn--secondary fyi-totals-panel__btn--small",onClick:()=>v("level"),disabled:b,title:"Group spaces by level (L2, L1, Basement)",children:b?"...":"By Level"})]})]}),(0,E.jsx)("button",{className:"fyi-totals-panel__btn fyi-totals-panel__btn--primary",onClick:y,disabled:!N.valid,children:"Proceed to MVP \u2192"})]}),!N.valid&&(0,E.jsx)("p",{className:"fyi-totals-panel__hint",children:"Resolve errors above to proceed"})]});var L},ju=e=>{var t;let{levels:n,sfByLevel:a,totalSF:i,targetSF:r,selectedLevel:o,onLevelSelect:s,structure:l}=e;const c=Math.max(...Object.values(a),1),d=e=>{const t=1===e?"L1":"L".concat(e);return a[t]||0};return(0,E.jsxs)("div",{className:"level-diagram",children:[(0,E.jsxs)("div",{className:"level-diagram__header",children:[(0,E.jsx)(g,{size:18}),(0,E.jsx)("span",{children:"main"===l?"Main Residence":"guestHouse"===l?"Guest House":"Pool House"})]}),(0,E.jsx)("div",{className:"level-diagram__stack",children:n.map((e,t)=>{const n=1===e.value,r=o===e.value,l=d(e.value),u=(e=>{const t=1===e?"L1":"L".concat(e);return(a[t]||0)/c*100})(e.value),h=(p=e.value,0===i?0:Math.round(d(p)/i*100));var p;return(0,E.jsxs)("div",{className:"level-diagram__level ".concat(n?"level-diagram__level--arrival":""," ").concat(r?"level-diagram__level--selected":""),onClick:()=>s(r?null:e.value),children:[n&&(0,E.jsx)("div",{className:"level-diagram__arrival-indicator",children:(0,E.jsx)(A,{size:14})}),(0,E.jsx)("div",{className:"level-diagram__label",children:(e.value,"L".concat(e.value))}),(0,E.jsx)("div",{className:"level-diagram__bar-container",children:(0,E.jsx)("div",{className:"level-diagram__bar",style:{width:"".concat(u,"%")}})}),(0,E.jsx)("div",{className:"level-diagram__sf",children:l>0?l.toLocaleString():"\u2014"}),l>0&&(0,E.jsxs)("div",{className:"level-diagram__percent",children:[h,"%"]})]},e.value)})}),(0,E.jsxs)("div",{className:"level-diagram__totals",children:[(0,E.jsxs)("div",{className:"level-diagram__total-row",children:[(0,E.jsx)("span",{children:"Net Program"}),(0,E.jsxs)("span",{children:[i.toLocaleString()," SF"]})]}),(0,E.jsxs)("div",{className:"level-diagram__total-row level-diagram__total-row--target",children:[(0,E.jsx)("span",{children:"Target"}),(0,E.jsxs)("span",{children:[r.toLocaleString()," SF"]})]}),(0,E.jsxs)("div",{className:"level-diagram__total-row level-diagram__total-row--delta ".concat(i>r?"level-diagram__total-row--over":i<r?"level-diagram__total-row--under":""),children:[(0,E.jsx)("span",{children:"Delta"}),(0,E.jsxs)("span",{children:[i>r?"+":"",(i-r).toLocaleString()," SF"]})]})]}),o&&(0,E.jsxs)("div",{className:"level-diagram__filter-hint",children:["Showing ",null===(t=n.find(e=>e.value===o))||void 0===t?void 0:t.label," only",(0,E.jsx)("button",{onClick:()=>s(null),children:"Show all"})]})]})},Pu=d("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]),Au=e=>{let{activeStructure:t,onStructureChange:n,structures:a}=e;const i=[{id:"main",label:"Main Residence",icon:u,description:"Primary living spaces"},{id:"guestHouse",label:"Guest House",icon:Hi,description:"Separate guest structure"},{id:"poolHouse",label:"Pool House",icon:Pu,description:"Wellness pavilion"}];return(0,E.jsxs)("div",{className:"structure-selector",children:[(0,E.jsx)("div",{className:"structure-selector__header",children:(0,E.jsx)("span",{children:"Structures"})}),(0,E.jsx)("div",{className:"structure-selector__options",children:i.map(e=>{const i=a[e.id],r=null===i||void 0===i?void 0:i.enabled,o=t===e.id,s=e.icon;return r?(0,E.jsxs)("button",{className:"structure-selector__option ".concat(o?"structure-selector__option--active":""),onClick:()=>n(e.id),children:[(0,E.jsx)("div",{className:"structure-selector__option-icon",children:(0,E.jsx)(s,{size:20})}),(0,E.jsxs)("div",{className:"structure-selector__option-content",children:[(0,E.jsx)("div",{className:"structure-selector__option-label",children:e.label}),(null===i||void 0===i?void 0:i.totalSF)>0&&(0,E.jsxs)("div",{className:"structure-selector__option-stats",children:[i.totalSF.toLocaleString()," SF",i.spaceCount&&(0,E.jsxs)("span",{className:"structure-selector__option-count",children:[i.spaceCount," spaces"]})]})]}),o&&(0,E.jsx)("div",{className:"structure-selector__option-indicator"})]},e.id):null})}),(0,E.jsxs)("div",{className:"structure-selector__grand-total",children:[(0,E.jsx)("span",{children:"All Structures"}),(0,E.jsxs)("span",{children:[Object.values(a).filter(e=>e.enabled).reduce((e,t)=>e+(t.totalSF||0),0).toLocaleString()," SF"]})]})]})},Lu=30,Fu=58,Iu=95,Ru=201,Eu=162,Mu=39,Tu=250,Du=250,Ou=248,Bu=100,zu=116,qu=139,Hu=45,Gu=55,Uu=72,Wu=255,Vu=255,Ku=255,Yu=46,Zu=125,$u=50,Qu=211,Ju=47,Xu=47,eh=229,th=229,nh=224;function ah(e){return e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function ih(e){return e.toLocaleString()}class rh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zone";this.data=e,this.mode=t,this.doc=null,this.pageWidth=612,this.pageHeight=792,this.margin=40,this.contentWidth=this.pageWidth-2*this.margin,this.currentPage=1,this.totalPages=1,this.y=0}async generate(){return this.doc=new Na("p","pt","letter"),this.addHeader(),this.addClientInfo(),this.addSummaryBox(),"level"===this.mode?this.addSpacesByLevel():this.addSpacesByZone(),this.totalPages=this.currentPage,this.addAllFooters(),this.doc}calculateTotalPages(){return 1}addHeader(){this.y=0,this.doc.setFillColor(Lu,Fu,Iu),this.doc.rect(0,0,this.pageWidth,50,"F"),this.doc.setFontSize(14),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Wu,Vu,Ku),this.doc.text("N4S Space Program",this.margin,32),this.doc.setTextColor(Ru,Eu,Mu),this.doc.setFont("helvetica","bold"),this.doc.text("FYI Report",this.pageWidth-this.margin,32,{align:"right"}),this.y=65}addClientInfo(){this.doc.setFontSize(10),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Hu,Gu,Uu);let e="";this.data.projectName&&(e+="Project: ".concat(this.data.projectName)),this.data.clientName&&(e&&(e+="     "),e+="Client: ".concat(this.data.clientName)),e&&(this.doc.text(e,this.margin,this.y),this.y+=12),this.doc.setFontSize(9),this.doc.setTextColor(Bu,zu,qu),this.doc.text("Generated: ".concat(this.data.generatedAt),this.margin,this.y),this.y+=25}addSummaryBox(){const e=110,t=this.y;this.doc.setFillColor(Tu,Du,Ou),this.doc.roundedRect(this.margin,t,this.contentWidth,e,4,4,"F"),this.doc.setFillColor(Ru,Eu,Mu),this.doc.rect(this.margin,t,4,e,"F"),this.doc.setDrawColor(eh,th,nh),this.doc.setLineWidth(.5),this.doc.roundedRect(this.margin,t,this.contentWidth,e,4,4,"S");const n=this.margin+20,a=this.margin+this.contentWidth/2+10;let i=t+20;this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Lu,Fu,Iu),this.doc.text("PROGRAM SETTINGS",n,i),i+=15,this.doc.setFont("helvetica","normal"),this.doc.setFontSize(10),this.doc.setTextColor(Hu,Gu,Uu);const r=this.data.settings;this.addSummaryRow(n,i,"Target SF",ih(r.targetSF)),i+=14,this.addSummaryRow(n,i,"Program Tier",r.programTier.toUpperCase()),i+=14,this.addSummaryRow(n,i,"Size Delta","\xb1".concat(r.deltaPct,"%")),i+=14,this.addSummaryRow(n,i,"Basement",r.hasBasement?"Yes":"No"),i=t+20,this.doc.setFontSize(9),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Lu,Fu,Iu),this.doc.text("TOTALS",a,i),i+=15,this.doc.setFont("helvetica","normal"),this.doc.setFontSize(10),this.doc.setTextColor(Hu,Gu,Uu);const o=this.data.totals;this.addSummaryRow(a,i,"Net Conditioned","".concat(ih(o.net)," SF")),i+=14,this.addSummaryRow(a,i,"Circulation (".concat(o.circulationPct,"%)"),"".concat(ih(o.circulation)," SF")),i+=14,this.doc.setFont("helvetica","bold"),this.addSummaryRow(a,i,"Total","".concat(ih(o.total)," SF")),i+=14;const s=o.deltaFromTarget,l="".concat(s>=0?"+":"").concat(ih(s)," SF");s>0?this.doc.setTextColor(Qu,Ju,Xu):s<0&&this.doc.setTextColor(Yu,Zu,$u),this.doc.setFont("helvetica","normal"),this.addSummaryRow(a,i,"Delta from Target",l),o.outdoorTotal>0&&(i+=14,this.doc.setTextColor(Bu,zu,qu),this.addSummaryRow(a,i,"Outdoor (exterior)","".concat(ih(o.outdoorTotal)," SF"))),this.y=t+e+20}addSummaryRow(e,t,n,a){this.doc.text(n,e,t),this.doc.text(a,e+180,t,{align:"right"})}addSpacesByZone(){this.addSectionHeader("Spaces by Zone"),this.data.zonesData.forEach(e=>{0!==e.spaces.length&&(this.checkPageBreak(80),this.addZoneSection(e))})}addZoneSection(e){this.doc.setFillColor(Lu,Fu,Iu),this.doc.roundedRect(this.margin,this.y,this.contentWidth,24,3,3,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Wu,Vu,Ku),this.doc.text(e.name,this.margin+10,this.y+16),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ru,Eu,Mu),this.doc.text("".concat(ih(e.totalSF)," SF"),this.pageWidth-this.margin-10,this.y+16,{align:"right"}),this.y+=32,this.addTableHeader(),e.spaces.forEach(e=>{this.checkPageBreak(20),this.addSpaceRow(e)}),this.y+=15}addSpacesByLevel(){this.addSectionHeader("Spaces by Level");const e=this.groupSpacesByLevel(),t=[2,1,-1,0],n=Object.keys(e).map(Number).sort((e,n)=>t.indexOf(e)-t.indexOf(n));n.forEach(t=>{const n=e[t];n&&0!==n.length&&(this.checkPageBreak(80),this.addLevelSection(t,n))})}groupSpacesByLevel(){const e={};return this.data.zonesData.forEach(t=>{t.spaces.forEach(n=>{const a=n.level||1;e[a]||(e[a]=[]),e[a].push(s(s({},n),{},{zoneName:t.name,zoneCode:t.code}))})}),e}addLevelSection(e,t){const n=-1===e?"Basement":0===e?"Lower Level":"Level ".concat(e),a=1===e?"(Arrival Level)":"",i=t.reduce((e,t)=>e+t.area,0);this.doc.setFillColor(Lu,Fu,Iu),this.doc.roundedRect(this.margin,this.y,this.contentWidth,24,3,3,"F"),this.doc.setFontSize(11),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Wu,Vu,Ku),this.doc.text("".concat(n," ").concat(a),this.margin+10,this.y+16),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Ru,Eu,Mu),this.doc.text("".concat(ih(i)," SF"),this.pageWidth-this.margin-10,this.y+16,{align:"right"}),this.y+=32,this.addTableHeaderForLevel(),t.forEach(e=>{this.checkPageBreak(20),this.addSpaceRowForLevel(e)}),this.y+=15}addSectionHeader(e){this.doc.setFontSize(14),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Lu,Fu,Iu),this.doc.text(e,this.margin,this.y),this.y+=20}addTableHeader(){const e=this.y;this.doc.setFillColor(Tu,Du,Ou),this.doc.rect(this.margin,e-4,this.contentWidth,16,"F"),this.doc.setFontSize(8),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Bu,zu,qu),this.doc.text("SPACE",this.margin+5,e+6),this.doc.text("SIZE",this.margin+200,e+6),this.doc.text("AREA",this.margin+250,e+6),this.doc.text("LEVEL",this.margin+310,e+6),this.doc.text("NOTES",this.margin+360,e+6),this.doc.setDrawColor(eh,th,nh),this.doc.setLineWidth(.5),this.doc.line(this.margin,e+12,this.margin+this.contentWidth,e+12),this.y+=18}addTableHeaderForLevel(){const e=this.y;this.doc.setFillColor(Tu,Du,Ou),this.doc.rect(this.margin,e-4,this.contentWidth,16,"F"),this.doc.setFontSize(8),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Bu,zu,qu),this.doc.text("SPACE",this.margin+5,e+6),this.doc.text("ZONE",this.margin+180,e+6),this.doc.text("SIZE",this.margin+280,e+6),this.doc.text("AREA",this.margin+330,e+6),this.doc.text("NOTES",this.margin+400,e+6),this.doc.setDrawColor(eh,th,nh),this.doc.setLineWidth(.5),this.doc.line(this.margin,e+12,this.margin+this.contentWidth,e+12),this.y+=18}addSpaceRow(e){const t=this.y;this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Hu,Gu,Uu);const n=e.name.length>28?e.name.substring(0,26)+"...":e.name;this.doc.text(n,this.margin+5,t),this.doc.text(e.size,this.margin+200,t),this.doc.text("".concat(ih(e.area)," SF"),this.margin+250,t);const a=-1===e.level?"B":"L".concat(e.level);if(this.doc.text(a,this.margin+310,t),e.notes){this.doc.setFontSize(8),this.doc.setTextColor(Bu,zu,qu);const n=e.notes.length>25?e.notes.substring(0,23)+"...":e.notes;this.doc.text(n,this.margin+360,t)}this.doc.setDrawColor(240,240,240),this.doc.setLineWidth(.3),this.doc.line(this.margin,t+6,this.margin+this.contentWidth,t+6),this.y+=14}addSpaceRowForLevel(e){const t=this.y;this.doc.setFontSize(9),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Hu,Gu,Uu);const n=e.name.length>24?e.name.substring(0,22)+"...":e.name;this.doc.text(n,this.margin+5,t),this.doc.setFontSize(8),this.doc.setTextColor(Bu,zu,qu);const a=e.zoneName.length>15?e.zoneName.substring(0,13)+"...":e.zoneName;if(this.doc.text(a,this.margin+180,t),this.doc.setFontSize(9),this.doc.setTextColor(Hu,Gu,Uu),this.doc.text(e.size,this.margin+280,t),this.doc.text("".concat(ih(e.area)," SF"),this.margin+330,t),e.notes){this.doc.setFontSize(8),this.doc.setTextColor(Bu,zu,qu);const n=e.notes.length>20?e.notes.substring(0,18)+"...":e.notes;this.doc.text(n,this.margin+400,t)}this.doc.setDrawColor(240,240,240),this.doc.setLineWidth(.3),this.doc.line(this.margin,t+6,this.margin+this.contentWidth,t+6),this.y+=14}checkPageBreak(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;this.y>this.pageHeight-this.margin-e&&(this.doc.addPage(),this.currentPage++,this.y=this.margin,this.addPageHeader())}addPageHeader(){this.doc.setFillColor(Lu,Fu,Iu),this.doc.rect(0,0,this.pageWidth,30,"F"),this.doc.setFontSize(10),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Wu,Vu,Ku),this.doc.text("N4S Space Program",this.margin,20),this.doc.setTextColor(Ru,Eu,Mu),this.doc.text("FYI Report (continued)",this.pageWidth-this.margin,20,{align:"right"}),this.y=45}addAllFooters(){for(let e=1;e<=this.totalPages;e++)this.doc.setPage(e),this.addFooterToPage(e)}addFooterToPage(e){const t=this.pageHeight-25;this.doc.setDrawColor(eh,th,nh),this.doc.setLineWidth(.5),this.doc.line(this.margin,t-10,this.pageWidth-this.margin,t-10),this.doc.setFontSize(8),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Bu,zu,qu),this.doc.text(ah(new Date),this.margin,t),this.doc.text("N4S - Not For Sale | Luxury Residential Advisory",this.pageWidth/2,t,{align:"center"}),this.doc.text("Page ".concat(e," of ").concat(this.totalPages),this.pageWidth-this.margin,t,{align:"right"})}save(){const e="level"===this.mode?"ByLevel":"ByZone",t=this.data.projectName?"FYI-Space-Program-".concat(e,"-").concat(this.data.projectName.replace(/\s+/g,"-"),".pdf"):"FYI-Space-Program-".concat(e,".pdf");this.doc.save(t)}}async function oh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zone";try{const n=new rh(e,t);await n.generate(),n.save()}catch(n){console.error("PDF generation failed:",n),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zone";const n='\n<!DOCTYPE html>\n<html>\n<head>\n  <title>N4S FYI Space Program</title>\n  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@500&display=swap" rel="stylesheet">\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body {\n      font-family: \'Inter\', -apple-system, BlinkMacSystemFont, sans-serif;\n      font-size: 11px;\n      line-height: 1.4;\n      color: #1a1a1a;\n      background: white;\n    }\n    .header-bar {\n      background: #1e3a5f;\n      padding: 15px 40px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n    .header-bar .left { color: white; font-size: 14px; }\n    .header-bar .right { color: #c9a227; font-weight: 600; font-size: 14px; }\n    .content { padding: 20px 40px; }\n    .client-info { margin-bottom: 10px; color: #2d3748; font-size: 10px; }\n    .generated { color: #64748b; font-size: 9px; margin-bottom: 20px; }\n    .summary-box {\n      background: #fafaf8;\n      border: 1px solid #e5e5e0;\n      border-left: 4px solid #c9a227;\n      border-radius: 4px;\n      padding: 15px 20px;\n      margin-bottom: 25px;\n      display: flex;\n      gap: 60px;\n    }\n    .summary-section h3 {\n      font-size: 9px;\n      font-weight: 600;\n      color: #1e3a5f;\n      text-transform: uppercase;\n      letter-spacing: 0.05em;\n      margin-bottom: 10px;\n    }\n    .summary-row {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 5px;\n      font-size: 10px;\n    }\n    .summary-row.total { font-weight: 600; }\n    .summary-row.over { color: #d32f2f; }\n    .summary-row.under { color: #2e7d32; }\n    .section-title {\n      font-family: \'Playfair Display\', Georgia, serif;\n      font-size: 16px;\n      color: #1e3a5f;\n      margin-bottom: 15px;\n    }\n    .zone-header {\n      background: #1e3a5f;\n      color: white;\n      padding: 8px 12px;\n      border-radius: 4px;\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 8px;\n    }\n    .zone-header h2 { font-size: 12px; font-weight: 600; }\n    .zone-header .sf { color: #c9a227; font-size: 11px; }\n    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n    th {\n      text-align: left;\n      padding: 6px 8px;\n      background: #fafaf8;\n      font-size: 8px;\n      font-weight: 600;\n      text-transform: uppercase;\n      color: #64748b;\n      border-bottom: 1px solid #e5e5e0;\n    }\n    td {\n      padding: 6px 8px;\n      font-size: 9px;\n      border-bottom: 1px solid #f0f0f0;\n    }\n    td.notes { color: #64748b; font-style: italic; }\n    .footer {\n      margin-top: 30px;\n      padding-top: 15px;\n      border-top: 1px solid #e5e5e0;\n      font-size: 8px;\n      color: #64748b;\n      display: flex;\n      justify-content: space-between;\n    }\n    @media print {\n      .zone { page-break-inside: avoid; }\n    }\n  </style>\n</head>\n<body>\n  <div class="header-bar">\n    <span class="left">N4S Space Program</span>\n    <span class="right">FYI Report</span>\n  </div>\n  <div class="content">\n    <div class="client-info">\n      '.concat(e.projectName?"Project: ".concat(e.projectName):"","\n      ").concat(e.projectName&&e.clientName?"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;":"","\n      ").concat(e.clientName?"Client: ".concat(e.clientName):"",'\n    </div>\n    <div class="generated">Generated: ').concat(e.generatedAt,'</div>\n\n    <div class="summary-box">\n      <div class="summary-section">\n        <h3>Program Settings</h3>\n        <div class="summary-row"><span>Target SF</span><strong>').concat(e.settings.targetSF.toLocaleString(),'</strong></div>\n        <div class="summary-row"><span>Program Tier</span><span>').concat(e.settings.programTier.toUpperCase(),'</span></div>\n        <div class="summary-row"><span>Size Delta</span><span>\xb1').concat(e.settings.deltaPct,'%</span></div>\n        <div class="summary-row"><span>Basement</span><span>').concat(e.settings.hasBasement?"Yes":"No",'</span></div>\n      </div>\n      <div class="summary-section">\n        <h3>Totals</h3>\n        <div class="summary-row"><span>Net Conditioned</span><span>').concat(e.totals.net.toLocaleString(),' SF</span></div>\n        <div class="summary-row"><span>Circulation (').concat(e.totals.circulationPct,"%)</span><span>").concat(e.totals.circulation.toLocaleString(),' SF</span></div>\n        <div class="summary-row total"><span>Total</span><strong>').concat(e.totals.total.toLocaleString(),' SF</strong></div>\n        <div class="summary-row ').concat(e.totals.deltaFromTarget>0?"over":e.totals.deltaFromTarget<0?"under":"",'">\n          <span>Delta from Target</span>\n          <span>').concat(e.totals.deltaFromTarget>0?"+":"").concat(e.totals.deltaFromTarget.toLocaleString()," SF</span>\n        </div>\n        ").concat(e.totals.outdoorTotal>0?'<div class="summary-row"><span>Outdoor (exterior)</span><span>'.concat(e.totals.outdoorTotal.toLocaleString()," SF</span></div>"):"",'\n      </div>\n    </div>\n\n    <h1 class="section-title">Spaces by ').concat("level"===t?"Level":"Zone","</h1>\n\n    ").concat(e.zonesData.filter(e=>e.spaces.length>0).map(e=>'\n    <div class="zone">\n      <div class="zone-header">\n        <h2>'.concat(e.name,'</h2>\n        <span class="sf">').concat(e.totalSF.toLocaleString(),' SF</span>\n      </div>\n      <table>\n        <thead>\n          <tr>\n            <th style="width:35%">Space</th>\n            <th style="width:10%">Size</th>\n            <th style="width:15%">Area</th>\n            <th style="width:10%">Level</th>\n            <th style="width:30%">Notes</th>\n          </tr>\n        </thead>\n        <tbody>\n          ').concat(e.spaces.map(e=>"\n          <tr>\n            <td>".concat(e.name,"</td>\n            <td>").concat(e.size,"</td>\n            <td>").concat(e.area.toLocaleString()," SF</td>\n            <td>").concat(-1===e.level?"B":"L"+e.level,'</td>\n            <td class="notes">').concat(e.notes||"\u2014","</td>\n          </tr>\n          ")).join(""),"\n        </tbody>\n      </table>\n    </div>\n    ")).join(""),'\n\n    <div class="footer">\n      <span>').concat(ah(new Date),"</span>\n      <span>N4S - Not For Sale | Luxury Residential Advisory</span>\n      <span>Page 1 of 1</span>\n    </div>\n  </div>\n  <script>window.onload = function() { window.print(); };<\/script>\n</body>\n</html>\n  ").trim(),a=window.open("","_blank");a&&(a.document.write(n),a.document.close())}(e,t)}}function sh(e,t,n,a,i,r,o,s,l){const c=cu.filter(e=>"Z9_GH"!==e.code&&"Z10_PH"!==e.code),d=c.map(e=>{const n=r(e.code).filter(e=>{var n;return null===(n=t[e.code])||void 0===n?void 0:n.included}).map(e=>({code:e.code,name:e.name,size:t[e.code].size,area:o(e.code),level:t[e.code].level||e.defaultLevel,notes:t[e.code].notes}));return{code:e.code,name:e.name,spaces:n,totalSF:n.reduce((e,t)=>e+t.area,0)}}),u=(null===a||void 0===a?void 0:a.main)||n,h={net:u.net,circulation:u.circulation,circulationPct:u.net>0?(u.circulation/u.net*100).toFixed(1):"0.0",total:u.total,deltaFromTarget:u.total-e.targetSF,byLevel:u.byLevel||{},outdoorTotal:n.outdoorTotal||0,targetSF:e.targetSF};return{settings:e,selections:t,totals:h,structureTotals:a,availableLevels:i,zonesData:d,projectName:s,clientName:l,generatedAt:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}}const lh=()=>{var e,t;const{kycData:n,clientData:i,fyiData:r,updateFYISelection:o,updateFYISettings:l,updateFYIData:c,initializeFYISelections:d,saveNow:u,isSaving:h,hasUnsavedChanges:p,lastSaved:f,isLoading:m}=H(),[g,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)("main"),[x,S]=(0,a.useState)(null),[_,w]=(0,a.useState)(null),[N,k]=(0,a.useState)(!1),C=(0,a.useMemo)(()=>{var e,t,a,i;const r=(null===n||void 0===n?void 0:n.principal)||{},o=(null===n||void 0===n?void 0:n.secondary)||{};return s(s({},r),{},{spaceRequirements:s(s({},r.spaceRequirements),{},{mustHaveSpaces:[...(null===(e=r.spaceRequirements)||void 0===e?void 0:e.mustHaveSpaces)||[],...(null===(t=o.spaceRequirements)||void 0===t?void 0:t.mustHaveSpaces)||[]],niceToHaveSpaces:[...(null===(a=r.spaceRequirements)||void 0===a?void 0:a.niceToHaveSpaces)||[],...(null===(i=o.spaceRequirements)||void 0===i?void 0:i.niceToHaveSpaces)||[]]})})},[n]),j=(0,a.useMemo)(()=>{var e,t;const n=(null===C||void 0===C?void 0:C.projectParameters)||{};return function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const t=[];for(let n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)+1;n>=2;n--)t.push({value:n,label:"L".concat(n)});t.push({value:1,label:"L1 (Arrival)"});for(let n=-1;n>=-e;n--)t.push({value:n,label:"L".concat(n)});return t}(null!==(e=n.levelsAboveArrival)&&void 0!==e?e:1,null!==(t=n.levelsBelowArrival)&&void 0!==t?t:0)},[C]),P=(0,a.useMemo)(()=>{const e=(null===C||void 0===C?void 0:C.projectParameters)||{};return{main:{enabled:!0},guestHouse:{enabled:e.hasGuestHouse||!1},poolHouse:{enabled:e.hasPoolHouse||!1}}},[C]),{settings:A,selections:L,activeZone:F,setActiveZone:I,hasSelections:R,totals:M,zonesWithCounts:T,structureTotals:D,updateSettings:O,updateSpaceSelection:B,toggleSpaceIncluded:z,setSpaceSize:q,setSpaceLevel:G,resetToDefaults:U,getSpaceSelection:W,getSpacesForZone:V,calculateArea:K,generateMVPBrief:Y}=xu(r,o,l,d);(0,a.useEffect)(()=>{if(!m&&!N){if(!R){var e,t;console.log("[FYI] No selections found, initializing defaults");const n=(null===C||void 0===C||null===(e=C.projectParameters)||void 0===e?void 0:e.targetGSF)||15e3;let a="15k";n<=12e3?a="10k":n>=18e3&&(a="20k"),l({targetSF:n,programTier:a,hasBasement:(null===C||void 0===C||null===(t=C.projectParameters)||void 0===t?void 0:t.hasBasement)||!1});const i=bu(a,!1);d(i)}k(!0)}},[m,N,R,C,l,d]);const Z=(0,a.useCallback)(async()=>{await u()?(w("Saved successfully!"),setTimeout(()=>w(null),3e3)):(w("Save failed - please try again"),setTimeout(()=>w(null),5e3))},[u]),$=(0,a.useMemo)(()=>pu(y),[y]),Q=(0,a.useMemo)(()=>{const e=$.map(e=>e.code);return T.filter(t=>e.includes(t.code))},[T,$]),J=(0,a.useMemo)(()=>{let e=V(F);return null!==x&&(e=e.filter(e=>W(e.code).level===x)),e},[F,x,V,W]),X=Q.find(e=>e.code===F),ee=(0,a.useCallback)(e=>{b(e),S(null);const t=pu(e);t.length>0&&I(t[0].code)},[I]),te=(0,a.useCallback)(e=>{S(e)},[]),ne=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zone";v(!0);try{var t;const n=(null===i||void 0===i?void 0:i.projectName)||(null===C||void 0===C||null===(t=C.projectParameters)||void 0===t?void 0:t.projectName)||"",a=null!==C&&void 0!==C&&C.portfolioContext?"".concat(C.portfolioContext.principalFirstName||""," ").concat(C.portfolioContext.principalLastName||"").trim():"",r=sh(A,L,M,D,j,V,K,n,a);await oh(r,e)}catch(n){console.error("Export failed:",n)}finally{v(!1)}},[A,L,M,D,j,V,K,i,C]),ae=(0,a.useCallback)(async()=>{const e=Su(Y());c({brief:e,completedAt:(new Date).toISOString()}),await Z(),console.log("MVP Brief generated:",e),alert("Brief saved! Navigate to MVP module to validate adjacencies.")},[Y,c,j,Z]),ie=(0,a.useMemo)(()=>{var e,t,n,a,i,r,o,s,l;return{main:{enabled:!0,total:(null===D||void 0===D||null===(e=D.main)||void 0===e?void 0:e.total)||M.total,net:(null===D||void 0===D||null===(t=D.main)||void 0===t?void 0:t.net)||M.net,circulation:(null===D||void 0===D||null===(n=D.main)||void 0===n?void 0:n.circulation)||M.circulation,circulationPct:M.circulationPct,byLevel:(null===D||void 0===D||null===(a=D.main)||void 0===a?void 0:a.byLevel)||M.byLevel,spaceCount:(null===D||void 0===D||null===(i=D.main)||void 0===i?void 0:i.spaceCount)||0},guestHouse:{enabled:P.guestHouse.enabled,total:(null===D||void 0===D||null===(r=D.guestHouse)||void 0===r?void 0:r.total)||0,spaceCount:(null===D||void 0===D||null===(o=D.guestHouse)||void 0===o?void 0:o.spaceCount)||0},poolHouse:{enabled:P.poolHouse.enabled,total:(null===D||void 0===D||null===(s=D.poolHouse)||void 0===s?void 0:s.total)||0,spaceCount:(null===D||void 0===D||null===(l=D.poolHouse)||void 0===l?void 0:l.spaceCount)||0}}},[D,M,P]),re=(0,a.useMemo)(()=>{const e={};return j.forEach(t=>{var n;const a=1===t.value?"L1":"L".concat(t.value);e[a]=(null===(n=M.byLevel)||void 0===n?void 0:n[t.value])||0}),e},[j,M.byLevel]);return m?(0,E.jsx)("div",{className:"fyi-module fyi-module--loading",children:(0,E.jsx)("div",{className:"fyi-module__loader",children:"Loading from server..."})}):(0,E.jsxs)("div",{className:"fyi-module",children:[(0,E.jsxs)("header",{className:"fyi-module__header",children:[(0,E.jsxs)("div",{className:"fyi-module__header-content",children:[(0,E.jsxs)("div",{className:"fyi-module__title-group",children:[(0,E.jsx)("h1",{className:"fyi-module__title",children:"FYI \u2013 Find Your Inspiration"}),(0,E.jsx)("p",{className:"fyi-module__subtitle",children:"Lifestyle Requirements Refinement"})]}),(0,E.jsxs)("div",{className:"fyi-module__save-area",children:[(0,E.jsx)("button",{className:"fyi-module__save-btn ".concat(p?"fyi-module__save-btn--unsaved":""," ").concat(h?"fyi-module__save-btn--saving":""),onClick:Z,disabled:h,children:h?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("svg",{className:"fyi-module__save-spinner",viewBox:"0 0 24 24",children:(0,E.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeDasharray:"31.4",strokeDashoffset:"10",children:(0,E.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 12 12",to:"360 12 12",dur:"1s",repeatCount:"indefinite"})})}),"Saving..."]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,E.jsx)("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),(0,E.jsx)("polyline",{points:"17 21 17 13 7 13 7 21"}),(0,E.jsx)("polyline",{points:"7 3 7 8 15 8"})]}),"SAVE"]})}),p&&!h&&(0,E.jsx)("span",{className:"fyi-module__unsaved-indicator",children:"Unsaved changes"}),_&&(0,E.jsx)("span",{className:"fyi-module__save-message ".concat(_.includes("failed")?"fyi-module__save-message--error":"fyi-module__save-message--success"),children:_}),f&&!_&&!p&&(0,E.jsxs)("span",{className:"fyi-module__last-saved",children:["Saved: ",f.toLocaleTimeString()]})]}),(0,E.jsxs)("button",{className:"fyi-module__reset-btn",onClick:()=>{window.confirm("Reset all selections to defaults? This cannot be undone.")&&(U(),k(!1))},children:[(0,E.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,E.jsx)("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),(0,E.jsx)("path",{d:"M3 3v5h5"})]}),"Reset"]})]}),(null===C||void 0===C||null===(e=C.projectParameters)||void 0===e?void 0:e.targetGSF)&&(0,E.jsxs)("div",{className:"fyi-module__kyc-banner",children:[(0,E.jsx)("span",{className:"fyi-module__kyc-label",children:"From KYC:"}),(0,E.jsxs)("span",{className:"fyi-module__kyc-value",children:[C.projectParameters.targetGSF.toLocaleString()," SF target"]}),C.projectParameters.bedroomCount&&(0,E.jsxs)("span",{className:"fyi-module__kyc-value",children:[C.projectParameters.bedroomCount," bedrooms"]})]})]}),(0,E.jsxs)("div",{className:"fyi-module__content",children:[(0,E.jsxs)("aside",{className:"fyi-module__sidebar fyi-module__sidebar--left",children:[(0,E.jsx)(ju,{levels:j,sfByLevel:re,totalSF:M.net,targetSF:A.targetSF,selectedLevel:x,onLevelSelect:te,structure:y}),(P.guestHouse.enabled||P.poolHouse.enabled)&&(0,E.jsx)(Au,{activeStructure:y,onStructureChange:ee,structures:ie}),(0,E.jsx)(Nu,{zones:Q,activeZone:F,onZoneChange:I,totals:M})]}),(0,E.jsxs)("main",{className:"fyi-module__main",children:[(0,E.jsxs)("div",{className:"fyi-module__zone-header",children:[(0,E.jsx)("h2",{className:"fyi-module__zone-title",children:null===X||void 0===X?void 0:X.name}),(0,E.jsxs)("p",{className:"fyi-module__zone-stats",children:[null===X||void 0===X?void 0:X.includedCount," of ",null===X||void 0===X?void 0:X.spaceCount," spaces \u2022",null===X||void 0===X||null===(t=X.totalSF)||void 0===t?void 0:t.toLocaleString()," SF",null!==x&&(0,E.jsxs)("span",{className:"fyi-module__level-filter",children:[" ","\u2022 Filtered to L",x,(0,E.jsx)("button",{onClick:()=>S(null),children:"Clear"})]})]})]}),(0,E.jsx)("div",{className:"fyi-module__cards-grid",children:J.map(e=>{const t=W(e.code),n=K(e.code);return(0,E.jsx)(ku,{space:e,selection:t,calculatedArea:n,settings:A,availableLevels:j,onSizeChange:t=>q(e.code,t),onToggleIncluded:()=>z(e.code),onLevelChange:t=>G(e.code,t),onNotesChange:t=>B(e.code,{notes:t})},e.code)})}),0===J.length&&(0,E.jsx)("div",{className:"fyi-module__empty",children:null!==x?(0,E.jsxs)("p",{children:["No spaces on this level. ",(0,E.jsx)("button",{onClick:()=>S(null),children:"Show all"})]}):(0,E.jsx)("p",{children:"No spaces available for this zone."})})]}),(0,E.jsx)("aside",{className:"fyi-module__sidebar fyi-module__sidebar--right",children:(0,E.jsx)(Cu,{settings:A,totals:M,selections:L,structureTotals:ie,availableLevels:j,onSettingsChange:O,onExportPDF:ne,onProceedToMVP:ae,isExporting:g})})]})]})},ch={dashboard:{bg:"transparent",text:"inherit"},kyc:{bg:"rgba(26, 54, 93, 0.1)",text:"#1a365d",accent:"#1a365d"},fyi:{bg:"rgba(49, 151, 149, 0.15)",text:"#285e61",accent:"#319795"},mvp:{bg:"rgba(72, 187, 120, 0.15)",text:"#276749",accent:"#48bb78"},kym:{bg:"rgba(128, 90, 213, 0.1)",text:"#553c9a",accent:"#805ad5"},vmx:{bg:"rgba(201, 169, 98, 0.15)",text:"#8b7355",accent:"#c9a962"},settings:{bg:"transparent",text:"inherit"}},dh=()=>(0,E.jsxs)("div",{className:"settings-panel",children:[(0,E.jsxs)("div",{className:"settings-panel__header",children:[(0,E.jsx)("h2",{children:"Settings"}),(0,E.jsx)("p",{children:"Application settings and configuration"})]}),(0,E.jsxs)("div",{className:"settings-panel__content",children:[(0,E.jsxs)("div",{className:"settings-section",children:[(0,E.jsx)("h3",{children:"Project Settings"}),(0,E.jsx)("p",{className:"settings-section__description",children:"Configure project defaults and preferences."}),(0,E.jsx)("div",{className:"settings-placeholder",children:"Settings options coming soon..."})]}),(0,E.jsxs)("div",{className:"settings-section",children:[(0,E.jsx)("h3",{children:"Export & Data"}),(0,E.jsx)("p",{className:"settings-section__description",children:"Export project data or manage backups."}),(0,E.jsx)("div",{className:"settings-placeholder",children:"Export options coming soon..."})]})]})]}),uh=()=>{var e,t,n,i;const[r,o]=(0,a.useState)(()=>{try{return localStorage.getItem("n4s_active_module")||"dashboard"}catch(e){return"dashboard"}}),[s,l]=(0,a.useState)(!0),{clientData:c,kycData:d}=H();a.useEffect(()=>{try{localStorage.setItem("n4s_active_module",r)}catch(ph){console.warn("Failed to save active module:",ph)}},[r]);const x=[{id:"dashboard",label:"Dashboard",icon:u,description:"Overview & Progress"},{id:"kyc",label:"KYC",icon:h,description:"Know Your Client"},{id:"fyi",label:"FYI",icon:p,description:"Find Your Inspiration"},{id:"mvp",label:"MVP",icon:f,description:"Mansion Validation"},{id:"settings",label:"Settings",icon:m,description:"App Configuration"}];return(0,E.jsxs)("div",{className:"app-container",children:[(0,E.jsxs)("aside",{className:"sidebar ".concat(s?"sidebar--open":"sidebar--closed"),children:[(0,E.jsxs)("div",{className:"sidebar__header",children:[(0,E.jsxs)("div",{className:"sidebar__logo",children:[(0,E.jsx)(g,{className:"sidebar__logo-icon"}),s&&(0,E.jsx)("span",{className:"sidebar__logo-text",children:"N4S"})]}),(0,E.jsx)("button",{className:"sidebar__toggle",onClick:()=>l(!s),"aria-label":s?"Collapse sidebar":"Expand sidebar",children:s?(0,E.jsx)(v,{size:20}):(0,E.jsx)(y,{size:20})})]}),(0,E.jsx)("nav",{className:"sidebar__nav",children:x.map(e=>{const t=e.icon,n=r===e.id;return(0,E.jsxs)("button",{className:"sidebar__nav-item ".concat(n?"sidebar__nav-item--active":""),onClick:()=>o(e.id),title:s?void 0:e.label,children:[(0,E.jsx)(t,{className:"sidebar__nav-icon"}),s&&(0,E.jsxs)("div",{className:"sidebar__nav-content",children:[(0,E.jsx)("span",{className:"sidebar__nav-label",children:e.label}),(0,E.jsx)("span",{className:"sidebar__nav-description",children:e.description})]}),n&&s&&(0,E.jsx)(b,{className:"sidebar__nav-arrow"})]},e.id)})}),s&&(0,E.jsx)("div",{className:"sidebar__footer",children:(0,E.jsx)("div",{className:"sidebar__client-info",children:((e,t,n,a,i,r)=>{const o=(null===d||void 0===d||null===(e=d.principal)||void 0===e||null===(t=e.portfolioContext)||void 0===t?void 0:t.principalFirstName)||"",s=(null===d||void 0===d||null===(n=d.principal)||void 0===n||null===(a=n.portfolioContext)||void 0===a?void 0:a.principalLastName)||"",l="".concat(o," ").concat(s).trim(),u=(null===d||void 0===d||null===(i=d.principal)||void 0===i||null===(r=i.projectParameters)||void 0===r?void 0:r.projectName)||(null===c||void 0===c?void 0:c.projectName)||"";return l||u?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("span",{className:"sidebar__client-name",children:l||"Client"}),(0,E.jsx)("span",{className:"sidebar__client-project",children:u||"New Project"})]}):(0,E.jsx)("span",{className:"sidebar__client-placeholder",children:"No client loaded"})})()})})]}),(0,E.jsxs)("main",{className:"main-content",children:[(0,E.jsxs)("header",{className:"main-header",style:{background:(null===(e=ch[r])||void 0===e?void 0:e.bg)||"transparent",borderBottom:null!==(t=ch[r])&&void 0!==t&&t.accent?"2px solid ".concat(ch[r].accent):"1px solid var(--gray-200)"},children:[(0,E.jsx)("div",{className:"main-header__breadcrumb",children:(0,E.jsx)("span",{className:"main-header__module",style:{color:(null===(n=ch[r])||void 0===n?void 0:n.text)||"inherit"},children:(null===(i=x.find(e=>e.id===r))||void 0===i?void 0:i.label)||"Dashboard"})}),(0,E.jsx)("div",{className:"main-header__actions",children:(0,E.jsx)("button",{className:"btn btn--ghost",title:"Settings",onClick:()=>o("settings"),children:(0,E.jsx)(m,{size:20})})})]}),(0,E.jsx)("div",{className:"main-body",children:(()=>{switch(r){case"kyc":return(0,E.jsx)(zi,{});case"mvp":return(0,E.jsx)(lu,{});case"fyi":return(0,E.jsx)(lh,{});case"settings":return(0,E.jsx)(dh,{});default:return(0,E.jsx)(V,{onNavigate:o})}})()})]})]})},hh=()=>(0,E.jsx)(q,{children:(0,E.jsx)(uh,{})});i.createRoot(document.getElementById("root")).render((0,E.jsx)(a.StrictMode,{children:(0,E.jsx)(hh,{})}))},1153(e,t,n){var a=n(5043),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,r={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,a)&&!l.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:i,type:e,key:c,ref:d,props:r,_owner:s.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},2284(e,t,n){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}n.d(t,{A:()=>a})},2730(e,t,n){var a=n(5043),i=n(8853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,a,i,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,a){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,a)&&(n=null),a||null===i?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,a=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),j=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var E=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=E&&e[E]||e["@@iterator"])?e:null}var T,D=Object.assign;function O(e){if(void 0===T)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||""}return"\n"+T+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),r=a.stack.split("\n"),o=i.length-1,s=r.length-1;1<=o&&0<=s&&i[o]!==r[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==r[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==r[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function q(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case _:return"Portal";case k:return"Profiler";case N:return"StrictMode";case A:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=W(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=U(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(a&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function re(e,t){var n=U(t.value),a=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),i=me(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,we=null,Ne=null;function ke(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(r(280));var t=e.stateNode;t&&(t=Si(t),_e(e.stateNode,e.type,t))}}function Ce(e){we?Ne?Ne.push(e):Ne=[e]:we=e}function je(){if(we){var e=we,t=Ne;if(Ne=we=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Pe(e,t){return e(t)}function Ae(){}var Le=!1;function Fe(e,t,n){if(Le)return e(t,n);Le=!0;try{return Pe(e,t,n)}finally{Le=!1,(null!==we||null!==Ne)&&(Ae(),je())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var a=Si(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Re=!1;if(d)try{var Ee={};Object.defineProperty(Ee,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ee,Ee),window.removeEventListener("test",Ee,Ee)}catch(de){Re=!1}function Me(e,t,n,a,i,r,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Te=!1,De=null,Oe=!1,Be=null,ze={onError:function(e){Te=!0,De=e}};function qe(e,t,n,a,i,r,o,s,l){Te=!1,De=null,Me.apply(ze,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(He(e)!==e)throw Error(r(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(a=i.return)){n=a;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ue(i),e;if(o===a)return Ue(i),t;o=o.sibling}throw Error(r(188))}if(n.return!==a.return)n=i,a=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,a=o;break}if(l===a){s=!0,a=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,a=i;break}if(l===a){s=!0,a=o,n=i;break}l=l.sibling}if(!s)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,$e=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,at=i.unstable_IdlePriority,it=null,rt=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,i=e.suspendedLanes,r=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?a=ut(s):0!==(r&=o)&&(a=ut(r))}else 0!==(o=n&~i)?a=ut(o):0!==r&&(a=ut(r));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(r=t&-t)||16===i&&0!==(4194240&r)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)i=1<<(n=31-ot(t)),a|=e[n],t&=~i;return a}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-ot(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,_t,wt,Nt,kt,Ct=!1,jt=[],Pt=null,At=null,Lt=null,Ft=new Map,It=new Map,Rt=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Tt(e,t,n,a,i,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Dt(e){var t=yi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void kt(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);xe=a,n.target.dispatchEvent(a),xe=null,t.shift()}return!0}function Bt(e,t,n){Ot(e)&&n.delete(t)}function zt(){Ct=!1,null!==Pt&&Ot(Pt)&&(Pt=null),null!==At&&Ot(At)&&(At=null),null!==Lt&&Ot(Lt)&&(Lt=null),Ft.forEach(Bt),It.forEach(Bt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Ht(e){function t(t){return qt(t,e)}if(0<jt.length){qt(jt[0],e);for(var n=1;n<jt.length;n++){var a=jt[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Pt&&qt(Pt,e),null!==At&&qt(At,e),null!==Lt&&qt(Lt,e),Ft.forEach(t),It.forEach(t),n=0;n<Rt.length;n++)(a=Rt[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Rt.shift()}var Gt=x.ReactCurrentBatchConfig,Ut=!0;function Wt(e,t,n,a){var i=bt,r=Gt.transition;Gt.transition=null;try{bt=1,Kt(e,t,n,a)}finally{bt=i,Gt.transition=r}}function Vt(e,t,n,a){var i=bt,r=Gt.transition;Gt.transition=null;try{bt=4,Kt(e,t,n,a)}finally{bt=i,Gt.transition=r}}function Kt(e,t,n,a){if(Ut){var i=Zt(e,t,n,a);if(null===i)Ua(e,t,a,Yt,n),Mt(e,a);else if(function(e,t,n,a,i){switch(t){case"focusin":return Pt=Tt(Pt,e,t,n,a,i),!0;case"dragenter":return At=Tt(At,e,t,n,a,i),!0;case"mouseover":return Lt=Tt(Lt,e,t,n,a,i),!0;case"pointerover":var r=i.pointerId;return Ft.set(r,Tt(Ft.get(r)||null,e,t,n,a,i)),!0;case"gotpointercapture":return r=i.pointerId,It.set(r,Tt(It.get(r)||null,e,t,n,a,i)),!0}return!1}(i,e,t,n,a))a.stopPropagation();else if(Mt(e,a),4&t&&-1<Et.indexOf(e)){for(;null!==i;){var r=bi(i);if(null!==r&&St(r),null===(r=Zt(e,t,n,a))&&Ua(e,t,a,Yt,n),r===i)break;i=r}null!==i&&a.stopPropagation()}else Ua(e,t,a,null,n)}}var Yt=null;function Zt(e,t,n,a){if(Yt=null,null!==(e=yi(e=Se(a))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Jt,a=n.length,i="value"in Qt?Qt.value:Qt.textContent,r=i.length;for(e=0;e<a&&n[e]===i[e];e++);var o=a-e;for(t=1;t<=o&&n[a-t]===i[r-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,i,r){for(var o in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:an,this.isPropagationStopped=an,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=D({},cn,{view:0,detail:0}),hn=rn(un),pn=D({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=rn(pn),mn=rn(D({},pn,{dataTransfer:0})),gn=rn(D({},un,{relatedTarget:0})),vn=rn(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(yn),xn=rn(D({},cn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function kn(){return Nn}var Cn=D({},un,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=rn(Cn),Pn=rn(D({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=rn(D({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Ln=rn(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Fn=D({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=rn(Fn),Rn=[9,13,27,32],En=d&&"CompositionEvent"in window,Mn=null;d&&"documentMode"in document&&(Mn=document.documentMode);var Tn=d&&"TextEvent"in window&&!Mn,Dn=d&&(!En||Mn&&8<Mn&&11>=Mn),On=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,a){Ce(a),0<(t=Va(t,"onChange")).length&&(n=new dn("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Vn=null,Kn=null;function Yn(e){Oa(e,0)}function Zn(e){if(K(xi(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(d){var Jn;if(d){var Xn="oninput"in document;if(!Xn){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Xn="function"===typeof ea.oninput}Jn=Xn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function ta(){Vn&&(Vn.detachEvent("onpropertychange",na),Kn=Vn=null)}function na(e){if("value"===e.propertyName&&Zn(Kn)){var t=[];Wn(t,Kn,e,Se(e)),Fe(Yn,t)}}function aa(e,t,n){"focusin"===e?(ta(),Kn=n,(Vn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ia(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Kn)}function ra(e,t){if("click"===e)return Zn(t)}function oa(e,t){if("input"===e||"change"===e)return Zn(t)}var sa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(sa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!u.call(t,i)||!sa(e[i],t[i]))return!1}return!0}function ca(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function da(e,t){var n,a=ca(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ca(a)}}function ua(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ua(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ha(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fa(e){var t=ha(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ua(n.ownerDocument.documentElement,n)){if(null!==a&&pa(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,r=Math.min(a.start,i);a=void 0===a.end?r:Math.min(a.end,i),!e.extend&&r>a&&(i=a,a=r,r=i),i=da(n,r);var o=da(n,a);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ma=d&&"documentMode"in document&&11>=document.documentMode,ga=null,va=null,ya=null,ba=!1;function xa(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ba||null==ga||ga!==Y(a)||("selectionStart"in(a=ga)&&pa(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ya&&la(ya,a)||(ya=a,0<(a=Va(va,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function Sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _a={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},wa={},Na={};function ka(e){if(wa[e])return wa[e];if(!_a[e])return e;var t,n=_a[e];for(t in n)if(n.hasOwnProperty(t)&&t in Na)return wa[e]=n[t];return e}d&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);var Ca=ka("animationend"),ja=ka("animationiteration"),Pa=ka("animationstart"),Aa=ka("transitionend"),La=new Map,Fa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ia(e,t){La.set(e,t),l(t,[e])}for(var Ra=0;Ra<Fa.length;Ra++){var Ea=Fa[Ra];Ia(Ea.toLowerCase(),"on"+(Ea[0].toUpperCase()+Ea.slice(1)))}Ia(Ca,"onAnimationEnd"),Ia(ja,"onAnimationIteration"),Ia(Pa,"onAnimationStart"),Ia("dblclick","onDoubleClick"),Ia("focusin","onFocus"),Ia("focusout","onBlur"),Ia(Aa,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ta=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function Da(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,i,o,s,l,c){if(qe.apply(this,arguments),Te){if(!Te)throw Error(r(198));var d=De;Te=!1,De=null,Oe||(Oe=!0,Be=d)}}(a,t,void 0,e),e.currentTarget=null}function Oa(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var o=a.length-1;0<=o;o--){var s=a[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==r&&i.isPropagationStopped())break e;Da(i,s,c),r=l}else for(o=0;o<a.length;o++){if(l=(s=a[o]).instance,c=s.currentTarget,s=s.listener,l!==r&&i.isPropagationStopped())break e;Da(i,s,c),r=l}}}if(Oe)throw e=Be,Oe=!1,Be=null,e}function Ba(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var a=e+"__bubble";n.has(a)||(Ga(t,e,2,!1),n.add(a))}function za(e,t,n){var a=0;t&&(a|=4),Ga(n,e,a,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Ha(e){if(!e[qa]){e[qa]=!0,o.forEach(function(t){"selectionchange"!==t&&(Ta.has(t)||za(t,!1,e),za(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qa]||(t[qa]=!0,za("selectionchange",!1,t))}}function Ga(e,t,n,a){switch($t(t)){case 1:var i=Wt;break;case 4:i=Vt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),a?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ua(e,t,n,a,i){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var o=a.tag;if(3===o||4===o){var s=a.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=a.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){a=r=o;continue e}s=s.parentNode}}a=a.return}Fe(function(){var a=r,i=Se(n),o=[];e:{var s=La.get(e);if(void 0!==s){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=jn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ca:case ja:case Pa:l=vn;break;case Aa:l=Ln;break;case"scroll":l=hn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==s?s+"Capture":null:s;d=[];for(var p,f=a;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ie(f,h))&&d.push(Wa(f,m,p)))),u)break;f=f.return}0<d.length&&(s=new l(s,c,null,n,i),o.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(d=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=Pn,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?s:xi(l),p=null==c?s:xi(c),(s=new d(m,f+"leave",l,n,i)).target=u,s.relatedTarget=p,m=null,yi(i)===a&&((d=new d(h,f+"enter",c,n,i)).target=p,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,f=0,p=d=l;p;p=Ka(p))f++;for(p=0,m=h;m;m=Ka(m))p++;for(;0<f-p;)d=Ka(d),f--;for(;0<p-f;)h=Ka(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ka(d),h=Ka(h)}d=null}else d=null;null!==l&&Ya(o,s,l,d,!1),null!==c&&null!==u&&Ya(o,u,c,d,!0)}if("select"===(l=(s=a?xi(a):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=$n;else if(Un(s))if(Qn)g=oa;else{g=ia;var v=aa}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ra);switch(g&&(g=g(e,a))?Wn(o,g,n,i):(v&&v(e,s,a),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=a?xi(a):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(ga=v,va=a,ya=null);break;case"focusout":ya=va=ga=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,xa(o,n,i);break;case"selectionchange":if(ma)break;case"keydown":case"keyup":xa(o,n,i)}var y;if(En)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Hn=!0)),0<(v=Va(a,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=qn(n))&&(b.data=y))),(y=Tn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Bn=!0,On);case"textInput":return(e=t.data)===On&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!En&&zn(e,t)?(e=en(),Xt=Jt=Qt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=Va(a,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:a}),i.data=y))}Oa(o,t)})}function Wa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Va(e,t){for(var n=t+"Capture",a=[];null!==e;){var i=e,r=i.stateNode;5===i.tag&&null!==r&&(i=r,null!=(r=Ie(e,n))&&a.unshift(Wa(e,r,i)),null!=(r=Ie(e,t))&&a.push(Wa(e,r,i))),e=e.return}return a}function Ka(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ya(e,t,n,a,i){for(var r=t._reactName,o=[];null!==n&&n!==a;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===a)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Ie(n,r))&&o.unshift(Wa(n,l,s)):i||null!=(l=Ie(n,r))&&o.push(Wa(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Za=/\r\n?/g,$a=/\u0000|\uFFFD/g;function Qa(e){return("string"===typeof e?e:""+e).replace(Za,"\n").replace($a,"")}function Ja(e,t,n){if(t=Qa(t),Qa(e)!==t&&n)throw Error(r(425))}function Xa(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ai="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ri="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ri?function(e){return ri.resolve(null).then(e).catch(si)}:ai;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===a)return e.removeChild(i),void Ht(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,pi="__reactProps$"+ui,fi="__reactContainer$"+ui,mi="__reactEvents$"+ui,gi="__reactListeners$"+ui,vi="__reactHandles$"+ui;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function Si(e){return e[pi]||null}var _i=[],wi=-1;function Ni(e){return{current:e}}function ki(e){0>wi||(e.current=_i[wi],_i[wi]=null,wi--)}function Ci(e,t){wi++,_i[wi]=e.current,e.current=t}var ji={},Pi=Ni(ji),Ai=Ni(!1),Li=ji;function Fi(e,t){var n=e.type.contextTypes;if(!n)return ji;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i,r={};for(i in n)r[i]=t[i];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ii(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){ki(Ai),ki(Pi)}function Ei(e,t,n){if(Pi.current!==ji)throw Error(r(168));Ci(Pi,t),Ci(Ai,n)}function Mi(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var i in a=a.getChildContext())if(!(i in t))throw Error(r(108,G(e)||"Unknown",i));return D({},n,a)}function Ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,Li=Pi.current,Ci(Pi,e),Ci(Ai,Ai.current),!0}function Di(e,t,n){var a=e.stateNode;if(!a)throw Error(r(169));n?(e=Mi(e,t,Li),a.__reactInternalMemoizedMergedChildContext=e,ki(Ai),ki(Pi),Ci(Pi,e)):ki(Ai),Ci(Ai,n)}var Oi=null,Bi=!1,zi=!1;function qi(e){null===Oi?Oi=[e]:Oi.push(e)}function Hi(){if(!zi&&null!==Oi){zi=!0;var e=0,t=bt;try{var n=Oi;for(bt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}Oi=null,Bi=!1}catch(i){throw null!==Oi&&(Oi=Oi.slice(e+1)),Ke(Xe,Hi),i}finally{bt=t,zi=!1}}return null}var Gi=[],Ui=0,Wi=null,Vi=0,Ki=[],Yi=0,Zi=null,$i=1,Qi="";function Ji(e,t){Gi[Ui++]=Vi,Gi[Ui++]=Wi,Wi=e,Vi=t}function Xi(e,t,n){Ki[Yi++]=$i,Ki[Yi++]=Qi,Ki[Yi++]=Zi,Zi=e;var a=$i;e=Qi;var i=32-ot(a)-1;a&=~(1<<i),n+=1;var r=32-ot(t)+i;if(30<r){var o=i-i%5;r=(a&(1<<o)-1).toString(32),a>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|a,Qi=r+e}else $i=1<<r|n<<i|a,Qi=e}function er(e){null!==e.return&&(Ji(e,1),Xi(e,1,0))}function tr(e){for(;e===Wi;)Wi=Gi[--Ui],Gi[Ui]=null,Vi=Gi[--Ui],Gi[Ui]=null;for(;e===Zi;)Zi=Ki[--Yi],Ki[Yi]=null,Qi=Ki[--Yi],Ki[Yi]=null,$i=Ki[--Yi],Ki[Yi]=null}var nr=null,ar=null,ir=!1,rr=null;function or(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sr(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,ar=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,ar=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:$i,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,ar=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(ir){var t=ar;if(t){var n=t;if(!sr(e,t)){if(lr(e))throw Error(r(418));t=ci(n.nextSibling);var a=nr;t&&sr(e,t)?or(a,n):(e.flags=-4097&e.flags|2,ir=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,ir=!1,nr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function ur(e){if(e!==nr)return!1;if(!ir)return dr(e),ir=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ar)){if(lr(e))throw hr(),Error(r(418));for(;t;)or(e,t),t=ci(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ar=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ar=null}}else ar=nr?ci(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=ar;e;)e=ci(e.nextSibling)}function pr(){ar=nr=null,ir=!1}function fr(e){null===rr?rr=[e]:rr.push(e)}var mr=x.ReactCurrentBatchConfig;function gr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var a=n.stateNode}if(!a)throw Error(r(147,e));var i=a,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yr(e){return(0,e._init)(e._payload)}function br(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function o(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Tc(n,e.mode,a)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,a){var r=n.type;return r===w?u(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===I&&yr(r)===t.type)?((a=i(t,n.props)).ref=gr(e,t,n),a.return=e,a):((a=Rc(n.type,n.key,n.props,null,e.mode,a)).ref=gr(e,t,n),a.return=e,a)}function d(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,a)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,a,r){return null===t||7!==t.tag?((t=Ec(n,e.mode,a,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Tc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gr(e,null,t),n.return=e,n;case _:return(t=Dc(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Ec(t,e.mode,n,null)).return=e,t;vr(e,t)}return null}function p(e,t,n,a){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?c(e,t,n,a):null;case _:return n.key===i?d(e,t,n,a):null;case I:return p(e,t,(i=n._init)(n._payload),a)}if(te(n)||M(n))return null!==i?null:u(e,t,n,a,null);vr(e,n)}return null}function f(e,t,n,a,i){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(n)||null,""+a,i);if("object"===typeof a&&null!==a){switch(a.$$typeof){case S:return c(t,e=e.get(null===a.key?n:a.key)||null,a,i);case _:return d(t,e=e.get(null===a.key?n:a.key)||null,a,i);case I:return f(e,t,n,(0,a._init)(a._payload),i)}if(te(a)||M(a))return u(t,e=e.get(n)||null,a,i,null);vr(t,a)}return null}function m(i,r,s,l){for(var c=null,d=null,u=r,m=r=0,g=null;null!==u&&m<s.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var v=p(i,u,s[m],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(i,u),r=o(v,r,m),null===d?c=v:d.sibling=v,d=v,u=g}if(m===s.length)return n(i,u),ir&&Ji(i,m),c;if(null===u){for(;m<s.length;m++)null!==(u=h(i,s[m],l))&&(r=o(u,r,m),null===d?c=u:d.sibling=u,d=u);return ir&&Ji(i,m),c}for(u=a(i,u);m<s.length;m++)null!==(g=f(u,i,m,s[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),r=o(g,r,m),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(i,e)}),ir&&Ji(i,m),c}function g(i,s,l,c){var d=M(l);if("function"!==typeof d)throw Error(r(150));if(null==(l=d.call(l)))throw Error(r(151));for(var u=d=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===u?d=b:u.sibling=b,u=b,m=v}if(y.done)return n(i,m),ir&&Ji(i,g),d;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,g),null===u?d=y:u.sibling=y,u=y);return ir&&Ji(i,g),d}for(m=a(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===u?d=y:u.sibling=y,u=y);return e&&m.forEach(function(e){return t(i,e)}),ir&&Ji(i,g),d}return function e(a,r,o,l){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var c=o.key,d=r;null!==d;){if(d.key===c){if((c=o.type)===w){if(7===d.tag){n(a,d.sibling),(r=i(d,o.props.children)).return=a,a=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&yr(c)===d.type){n(a,d.sibling),(r=i(d,o.props)).ref=gr(a,d,o),r.return=a,a=r;break e}n(a,d);break}t(a,d),d=d.sibling}o.type===w?((r=Ec(o.props.children,a.mode,l,o.key)).return=a,a=r):((l=Rc(o.type,o.key,o.props,null,a.mode,l)).ref=gr(a,r,o),l.return=a,a=l)}return s(a);case _:e:{for(d=o.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(a,r.sibling),(r=i(r,o.children||[])).return=a,a=r;break e}n(a,r);break}t(a,r),r=r.sibling}(r=Dc(o,a.mode,l)).return=a,a=r}return s(a);case I:return e(a,r,(d=o._init)(o._payload),l)}if(te(o))return m(a,r,o,l);if(M(o))return g(a,r,o,l);vr(a,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==r&&6===r.tag?(n(a,r.sibling),(r=i(r,o)).return=a,a=r):(n(a,r),(r=Tc(o,a.mode,l)).return=a,a=r),s(a)):n(a,r)}}var xr=br(!0),Sr=br(!1),_r=Ni(null),wr=null,Nr=null,kr=null;function Cr(){kr=Nr=wr=null}function jr(e){var t=_r.current;ki(_r),e._currentValue=t}function Pr(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ar(e,t){wr=e,kr=Nr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Lr(e){var t=e._currentValue;if(kr!==e)if(e={context:e,memoizedValue:t,next:null},null===Nr){if(null===wr)throw Error(r(308));Nr=e,wr.dependencies={lanes:0,firstContext:e}}else Nr=Nr.next=e;return t}var Fr=null;function Ir(e){null===Fr?Fr=[e]:Fr.push(e)}function Rr(e,t,n,a){var i=t.interleaved;return null===i?(n.next=n,Ir(t)):(n.next=i.next,i.next=n),t.interleaved=n,Er(e,a)}function Er(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mr=!1;function Tr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Br(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&jl)){var i=a.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),a.pending=t,Er(e,n)}return null===(i=a.interleaved)?(t.next=t,Ir(a)):(t.next=i.next,i.next=t),a.interleaved=t,Er(e,n)}function zr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}function qr(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var i=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?i=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?i=r=t:r=r.next=t}else i=r=t;return n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hr(e,t,n,a){var i=e.updateQueue;Mr=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?r=c:o.next=c,o=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=i.baseState;for(o=0,d=c=l=null,s=r;;){var h=s.lane,p=s.eventTime;if((a&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=D({},u,h);break e;case 2:Mr=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===r&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=u}}function Gr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],i=a.callback;if(null!==i){if(a.callback=null,a=n,"function"!==typeof i)throw Error(r(191,i));i.call(a)}}}var Ur={},Wr=Ni(Ur),Vr=Ni(Ur),Kr=Ni(Ur);function Yr(e){if(e===Ur)throw Error(r(174));return e}function Zr(e,t){switch(Ci(Kr,t),Ci(Vr,e),Ci(Wr,Ur),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Wr),Ci(Wr,t)}function $r(){ki(Wr),ki(Vr),ki(Kr)}function Qr(e){Yr(Kr.current);var t=Yr(Wr.current),n=le(t,e.type);t!==n&&(Ci(Vr,e),Ci(Wr,n))}function Jr(e){Vr.current===e&&(ki(Wr),ki(Vr))}var Xr=Ni(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ao=x.ReactCurrentDispatcher,io=x.ReactCurrentBatchConfig,ro=0,oo=null,so=null,lo=null,co=!1,uo=!1,ho=0,po=0;function fo(){throw Error(r(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sa(e[n],t[n]))return!1;return!0}function go(e,t,n,a,i,o){if(ro=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?Xo:es,e=n(a,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(r(301));o+=1,lo=so=null,t.updateQueue=null,ao.current=ts,e=n(a,i)}while(uo)}if(ao.current=Jo,t=null!==so&&null!==so.next,ro=0,lo=so=oo=null,co=!1,t)throw Error(r(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(r(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function xo(e,t){return"function"===typeof t?t(e):t}function So(e){var t=bo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=so,i=a.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}a.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,a=a.baseState;var l=s=null,c=null,d=o;do{var u=d.lane;if((ro&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,s=a):c=c.next=h,oo.lanes|=u,Ml|=u}d=d.next}while(null!==d&&d!==o);null===c?s=a:c.next=l,sa(a,t.memoizedState)||(bs=!0),t.memoizedState=a,t.baseState=s,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sa(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function wo(){}function No(e,t){var n=oo,a=bo(),i=t(),o=!sa(a.memoizedState,i);if(o&&(a.memoizedState=i,bs=!0),a=a.queue,To(jo.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Fo(9,Co.bind(null,n,a,i,t),void 0,null),null===Pl)throw Error(r(349));0!==(30&ro)||ko(n,t,i)}return i}function ko(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,a){t.value=n,t.getSnapshot=a,Po(t)&&Ao(e)}function jo(e,t,n){return n(function(){Po(t)&&Ao(e)})}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sa(e,n)}catch(a){return!0}}function Ao(e){var t=Er(e,1);null!==t&&tc(t,e,1,-1)}function Lo(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Fo(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Io(){return bo().memoizedState}function Ro(e,t,n,a){var i=yo();oo.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===a?null:a)}function Eo(e,t,n,a){var i=bo();a=void 0===a?null:a;var r=void 0;if(null!==so){var o=so.memoizedState;if(r=o.destroy,null!==a&&mo(a,o.deps))return void(i.memoizedState=Fo(t,n,r,a))}oo.flags|=e,i.memoizedState=Fo(1|t,n,r,a)}function Mo(e,t){return Ro(8390656,8,e,t)}function To(e,t){return Eo(2048,8,e,t)}function Do(e,t){return Eo(4,2,e,t)}function Oo(e,t){return Eo(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Eo(4,4,Bo.bind(null,t,e),n)}function qo(){}function Ho(e,t){var n=bo();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&mo(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=bo();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&mo(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Uo(e,t,n){return 0===(21&ro)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sa(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Wo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var a=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=a}}function Vo(){return bo().memoizedState}function Ko(e,t,n){var a=ec(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e))$o(t,n);else if(null!==(n=Rr(e,t,n,a))){tc(n,e,a,Xl()),Qo(n,t,a)}}function Yo(e,t,n){var a=ec(e),i={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))$o(t,i);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=r(o,n);if(i.hasEagerState=!0,i.eagerState=s,sa(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ir(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rr(e,t,i,a))&&(tc(n,e,a,i=Xl()),Qo(n,t,a))}}function Zo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function $o(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qo(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Lr,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Xo={readContext:Lr,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Lr,useEffect:Mo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=yo();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Lo,useDebugValue:qo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Lo(!1),t=e[0];return e=Wo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=oo,i=yo();if(ir){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Pl)throw Error(r(349));0!==(30&ro)||ko(a,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Mo(jo.bind(null,a,o,e),[e]),a.flags|=2048,Fo(9,Co.bind(null,a,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Pl.identifierPrefix;if(ir){var n=Qi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Lr,useCallback:Ho,useContext:Lr,useEffect:To,useImperativeHandle:zo,useInsertionEffect:Do,useLayoutEffect:Oo,useMemo:Go,useReducer:So,useRef:Io,useState:function(){return So(xo)},useDebugValue:qo,useDeferredValue:function(e){return Uo(bo(),so.memoizedState,e)},useTransition:function(){return[So(xo)[0],bo().memoizedState]},useMutableSource:wo,useSyncExternalStore:No,useId:Vo,unstable_isNewReconciler:!1},ts={readContext:Lr,useCallback:Ho,useContext:Lr,useEffect:To,useImperativeHandle:zo,useInsertionEffect:Do,useLayoutEffect:Oo,useMemo:Go,useReducer:_o,useRef:Io,useState:function(){return _o(xo)},useDebugValue:qo,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:Uo(t,so.memoizedState,e)},useTransition:function(){return[_o(xo)[0],bo().memoizedState]},useMutableSource:wo,useSyncExternalStore:No,useId:Vo,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function as(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Xl(),i=ec(e),r=Or(a,i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Br(e,r,i))&&(tc(t,e,i,a),zr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Xl(),i=ec(e),r=Or(a,i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Br(e,r,i))&&(tc(t,e,i,a),zr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xl(),a=ec(e),i=Or(n,a);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Br(e,i,a))&&(tc(t,e,a,n),zr(t,e,a))}};function rs(e,t,n,a,i,r,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!la(n,a)||!la(i,r))}function os(e,t,n){var a=!1,i=ji,r=t.contextType;return"object"===typeof r&&null!==r?r=Lr(r):(i=Ii(t)?Li:Pi.current,r=(a=null!==(a=t.contextTypes)&&void 0!==a)?Fi(e,i):ji),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),t}function ss(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,a){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Tr(e);var r=t.contextType;"object"===typeof r&&null!==r?i.context=Lr(r):(r=Ii(t)?Li:Pi.current,i.context=Fi(e,r)),i.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(as(e,t,r,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Hr(e,n,i,a),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",a=t;do{n+=q(a),a=a.return}while(a);var i=n}catch(r){i="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function us(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Or(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Gl||(Gl=!0,Ul=a),us(0,t)},n}function fs(e,t,n){(n=Or(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var i=t.value;n.payload=function(){return a(i)},n.callback=function(){us(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){us(0,t),"function"!==typeof a&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new hs;var i=new Set;a.set(t,i)}else void 0===(i=a.get(t))&&(i=new Set,a.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,a,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Or(-1,1)).tag=2,Br(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,a){t.child=null===e?Sr(t,null,n,a):xr(t,e.child,n,a)}function Ss(e,t,n,a,i){n=n.render;var r=t.ref;return Ar(t,i),a=go(e,t,n,a,r,i),n=vo(),null===e||bs?(ir&&n&&er(t),t.flags|=1,xs(e,t,a,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function _s(e,t,n,a,i){if(null===e){var r=n.type;return"function"!==typeof r||Fc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,a,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,ws(e,t,r,a,i))}if(r=e.child,0===(e.lanes&i)){var o=r.memoizedProps;if((n=null!==(n=n.compare)?n:la)(o,a)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Ic(r,a)).ref=t.ref,e.return=t,t.child=e}function ws(e,t,n,a,i){if(null!==e){var r=e.memoizedProps;if(la(r,a)&&e.ref===t.ref){if(bs=!1,t.pendingProps=a=r,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Cs(e,t,n,a,i)}function Ns(e,t,n){var a=t.pendingProps,i=a.children,r=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Il,Fl),Fl|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Il,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==r?r.baseLanes:n,Ci(Il,Fl),Fl|=a}else null!==r?(a=r.baseLanes|n,t.memoizedState=null):a=n,Ci(Il,Fl),Fl|=a;return xs(e,t,i,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,a,i){var r=Ii(n)?Li:Pi.current;return r=Fi(t,r),Ar(t,i),n=go(e,t,n,a,r,i),a=vo(),null===e||bs?(ir&&a&&er(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function js(e,t,n,a,i){if(Ii(n)){var r=!0;Ti(t)}else r=!1;if(Ar(t,i),null===t.stateNode)Hs(e,t),os(t,n,a),ls(t,n,a,i),a=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Lr(c):c=Fi(t,c=Ii(n)?Li:Pi.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==a||l!==c)&&ss(t,o,a,c),Mr=!1;var h=t.memoizedState;o.state=h,Hr(t,a,o,i),l=t.memoizedState,s!==a||h!==l||Ai.current||Mr?("function"===typeof d&&(as(t,n,d,a),l=t.memoizedState),(s=Mr||rs(t,n,s,a,h,l,c))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),o.props=a,o.state=l,o.context=c,a=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,Dr(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),o.props=c,u=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Lr(l):l=Fi(t,l=Ii(n)?Li:Pi.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==u||h!==l)&&ss(t,o,a,l),Mr=!1,h=t.memoizedState,o.state=h,Hr(t,a,o,i);var f=t.memoizedState;s!==u||h!==f||Ai.current||Mr?("function"===typeof p&&(as(t,n,p,a),f=t.memoizedState),(c=Mr||rs(t,n,c,a,h,f,l)||!1)?(d||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(a,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(a,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=f),o.props=a,o.state=f,o.context=l,a=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return Ps(e,t,n,a,r,i)}function Ps(e,t,n,a,i,r){ks(e,t);var o=0!==(128&t.flags);if(!a&&!o)return i&&Di(t,n,!1),Gs(e,t,r);a=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&o?(t.child=xr(t,e.child,null,r),t.child=xr(t,null,s,r)):xs(e,t,s,r),t.memoizedState=a.state,i&&Di(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Ei(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ei(0,t.context,!1),Zr(e,t.containerInfo)}function Ls(e,t,n,a,i){return pr(),fr(i),t.flags|=256,xs(e,t,n,a),t.child}var Fs,Is,Rs,Es={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ts(e,t,n){var a,i=t.pendingProps,o=Xr.current,s=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&o)),a?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(Xr,1&o),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Mc(l,i,0,null),e=Ec(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Es,e):Ds(t,l));if(null!==(o=e.memoizedState)&&null!==(a=o.dehydrated))return function(e,t,n,a,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Os(e,t,s,a=ds(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=a.fallback,i=t.mode,a=Mc({mode:"visible",children:a.children},i,0,null),(o=Ec(o,i,s,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,0!==(1&t.mode)&&xr(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Es,o);if(0===(1&t.mode))return Os(e,t,s,null);if("$!"===i.data){if(a=i.nextSibling&&i.nextSibling.dataset)var l=a.dgst;return a=l,Os(e,t,s,a=ds(o=Error(r(419)),a,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(a=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(a.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Er(e,i),tc(a,e,i,-1))}return fc(),Os(e,t,s,a=ds(Error(r(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ar=ci(i.nextSibling),nr=t,ir=!0,rr=null,null!==e&&(Ki[Yi++]=$i,Ki[Yi++]=Qi,Ki[Yi++]=Zi,$i=e.id,Qi=e.overflow,Zi=t),t=Ds(t,a.children),t.flags|=4096,t)}(e,t,l,i,a,o,n);if(s){s=i.fallback,l=t.mode,a=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Ic(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==a?s=Ic(a,s):(s=Ec(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Es,i}return e=(s=e.child).sibling,i=Ic(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ds(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Os(e,t,n,a){return null!==a&&fr(a),xr(t,e.child,null,n),(e=Ds(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Pr(e.return,t,n)}function zs(e,t,n,a,i){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=i)}function qs(e,t,n){var a=t.pendingProps,i=a.revealOrder,r=a.tail;if(xs(e,t,a.children,n),0!==(2&(a=Xr.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ci(Xr,a),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,r);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,r);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Us(e,t){if(!ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,a|=14680064&i.subtreeFlags,a|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Vs(e,t,n){var a=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Ii(t.type)&&Ri(),Ws(t),null;case 3:return a=t.stateNode,$r(),ki(Ai),ki(Pi),no(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(rc(rr),rr=null))),Ws(t),null;case 5:Jr(t);var i=Yr(Kr.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(r(166));return Ws(t),null}if(e=Yr(Wr.current),ur(t)){a=t.stateNode,n=t.type;var o=t.memoizedProps;switch(a[hi]=t,a[pi]=o,e=0!==(1&t.mode),n){case"dialog":Ba("cancel",a),Ba("close",a);break;case"iframe":case"object":case"embed":Ba("load",a);break;case"video":case"audio":for(i=0;i<Ma.length;i++)Ba(Ma[i],a);break;case"source":Ba("error",a);break;case"img":case"image":case"link":Ba("error",a),Ba("load",a);break;case"details":Ba("toggle",a);break;case"input":$(a,o),Ba("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},Ba("invalid",a);break;case"textarea":ie(a,o),Ba("invalid",a)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ja(a.textContent,c,e),i=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ja(a.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ba("scroll",a)}switch(n){case"input":V(a),X(a,o,!0);break;case"textarea":V(a),oe(a);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(a.onclick=Xa)}a=i,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(n,{is:a.is}):(e=l.createElement(n),"select"===n&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=a,Fs(e,t),t.stateNode=e;e:{switch(l=be(n,a),n){case"dialog":Ba("cancel",e),Ba("close",e),i=a;break;case"iframe":case"object":case"embed":Ba("load",e),i=a;break;case"video":case"audio":for(i=0;i<Ma.length;i++)Ba(Ma[i],e);i=a;break;case"source":Ba("error",e),i=a;break;case"img":case"image":case"link":Ba("error",e),Ba("load",e),i=a;break;case"details":Ba("toggle",e),i=a;break;case"input":$(e,a),i=Z(e,a),Ba("invalid",e);break;case"option":default:i=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},i=D({},a,{value:void 0}),Ba("invalid",e);break;case"textarea":ie(e,a),i=ae(e,a),Ba("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?ge(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===o?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Ba("scroll",e):null!=d&&b(e,o,d,l))}switch(n){case"input":V(e),X(e,a,!1);break;case"textarea":V(e),oe(e);break;case"option":null!=a.value&&e.setAttribute("value",""+U(a.value));break;case"select":e.multiple=!!a.multiple,null!=(o=a.value)?ne(e,!!a.multiple,o,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xa)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Rs(0,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(r(166));if(n=Yr(Kr.current),Yr(Wr.current),ur(t)){if(a=t.stateNode,n=t.memoizedProps,a[hi]=t,(o=a.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Ja(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ja(a.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[hi]=t,t.stateNode=a}return Ws(t),null;case 13:if(ki(Xr),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ir&&null!==ar&&0!==(1&t.mode)&&0===(128&t.flags))hr(),pr(),t.flags|=98560,o=!1;else if(o=ur(t),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[hi]=t}else pr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),o=!1}else null!==rr&&(rc(rr),rr=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xr.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return $r(),null===e&&Ha(t.stateNode.containerInfo),Ws(t),null;case 10:return jr(t.type._context),Ws(t),null;case 19:if(ki(Xr),null===(o=t.memoizedState))return Ws(t),null;if(a=0!==(128&t.flags),null===(l=o.rendering))if(a)Us(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Us(o,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Xr,1&Xr.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>ql&&(t.flags|=128,a=!0,Us(o,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=eo(l))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Us(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ir)return Ws(t),null}else 2*Qe()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,a=!0,Us(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=Xr.current,Ci(Xr,a?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return dc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Fl)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Ks(e,t){switch(tr(t),t.tag){case 1:return Ii(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $r(),ki(Ai),ki(Pi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jr(t),null;case 13:if(ki(Xr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));pr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(Xr),null;case 4:return $r(),null;case 10:return jr(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Fs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(e,t,n,a){var i=e.memoizedProps;if(i!==a){e=t.stateNode,Yr(Wr.current);var r,o=null;switch(n){case"input":i=Z(e,i),a=Z(e,a),o=[];break;case"select":i=D({},i,{value:void 0}),a=D({},a,{value:void 0}),o=[];break;case"textarea":i=ae(e,i),a=ae(e,a),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof a.onClick&&(e.onclick=Xa)}for(d in ye(n,a),n=null,i)if(!a.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(s.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in a){var c=a[d];if(l=null!=i?i[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(o||(o=[]),o.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(s.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ba("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},Rs=function(e,t,n,a){n!==a&&(t.flags|=4)};var Ys=!1,Zs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){wc(e,t,a)}else n.current=null}function Xs(e,t,n){try{n()}catch(a){wc(e,t,a)}}var el=!1;function tl(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var i=a=a.next;do{if((i.tag&e)===e){var r=i.destroy;i.destroy=void 0,void 0!==r&&Xs(t,n,r)}i=i.next}while(i!==a)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function sl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xa));else if(4!==a&&null!==(e=e.child))for(sl(e,t,n),e=e.sibling;null!==e;)sl(e,t,n),e=e.sibling}function ll(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,dl=!1;function ul(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Zs||Js(n,t);case 6:var a=cl,i=dl;cl=null,ul(e,t,n),dl=i,null!==(cl=a)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(cl,n.stateNode));break;case 4:a=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,ul(e,t,n),cl=a,dl=i;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){i=a=a.next;do{var r=i,o=r.destroy;r=r.tag,void 0!==o&&(0!==(2&r)||0!==(4&r))&&Xs(n,t,o),i=i.next}while(i!==a)}ul(e,t,n);break;case 1:if(!Zs&&(Js(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(s){wc(n,t,s)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Zs=(a=Zs)||null!==n.memoizedState,ul(e,t,n),Zs=a):ul(e,t,n);break;default:ul(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach(function(t){var a=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var i=n[a];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(r(160));hl(o,s,i),cl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){wc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&a){try{tl(3,e,e.return),nl(3,e)}catch(g){wc(e,e.return,g)}try{tl(5,e,e.return)}catch(g){wc(e,e.return,g)}}break;case 1:fl(t,e),gl(e),512&a&&null!==n&&Js(n,n.return);break;case 5:if(fl(t,e),gl(e),512&a&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){wc(e,e.return,g)}}if(4&a&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(i,o),be(l,s);var d=be(l,o);for(s=0;s<c.length;s+=2){var u=c[s],h=c[s+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):b(i,u,h,d)}switch(l){case"input":J(i,o);break;case"textarea":re(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){wc(e,e.return,g)}}break;case 6:if(fl(t,e),gl(e),4&a){if(null===e.stateNode)throw Error(r(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){wc(e,e.return,g)}}break;case 3:if(fl(t,e),gl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){wc(e,e.return,g)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Qe())),4&a&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(d=Zs)||u,fl(t,e),Zs=d):fl(t,e),gl(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qs=e,u=e.child;null!==u;){for(h=Qs=u;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:tl(4,p,p.return);break;case 1:Js(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){a=p,n=p.return;try{t=a,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){wc(a,n,g)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Qs=f):xl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){wc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){wc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&a&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var a=n;break e}n=n.return}throw Error(r(160))}switch(a.tag){case 5:var i=a.stateNode;32&a.flags&&(he(i,""),a.flags&=-33),ll(e,ol(e),i);break;case 3:case 4:var o=a.stateNode.containerInfo;sl(e,ol(e),o);break;default:throw Error(r(161))}}catch(s){wc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qs=e,yl(e,t,n)}function yl(e,t,n){for(var a=0!==(1&e.mode);null!==Qs;){var i=Qs,r=i.child;if(22===i.tag&&a){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=Ys;var c=Zs;if(Ys=o,(Zs=l)&&!c)for(Qs=i;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Qs=l):Sl(i);for(;null!==r;)Qs=r,yl(r,t,n),r=r.sibling;Qs=i,Ys=s,Zs=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==r?(r.return=i,Qs=r):bl(e)}}function bl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||nl(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Zs)if(null===n)a.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);a.componentDidUpdate(i,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Gr(t,o,a);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Gr(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(r(163))}Zs||512&t.flags&&al(t)}catch(p){wc(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function xl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function Sl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){wc(t,n,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var i=t.return;try{a.componentDidMount()}catch(l){wc(t,i,l)}}var r=t.return;try{al(t)}catch(l){wc(t,r,l)}break;case 5:var o=t.return;try{al(t)}catch(l){wc(t,o,l)}}}catch(l){wc(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var _l,wl=Math.ceil,Nl=x.ReactCurrentDispatcher,kl=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,jl=0,Pl=null,Al=null,Ll=0,Fl=0,Il=Ni(0),Rl=0,El=null,Ml=0,Tl=0,Dl=0,Ol=null,Bl=null,zl=0,ql=1/0,Hl=null,Gl=!1,Ul=null,Wl=null,Vl=!1,Kl=null,Yl=0,Zl=0,$l=null,Ql=-1,Jl=0;function Xl(){return 0!==(6&jl)?Qe():-1!==Ql?Ql:Ql=Qe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Ll?Ll&-Ll:null!==mr.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function tc(e,t,n,a){if(50<Zl)throw Zl=0,$l=null,Error(r(185));vt(e,n,a),0!==(2&jl)&&e===Pl||(e===Pl&&(0===(2&jl)&&(Tl|=n),4===Rl&&oc(e,Ll)),nc(e,a),1===n&&0===jl&&0===(1&t.mode)&&(ql=Qe()+500,Bi&&Hi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-ot(r),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&a)||(i[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),r&=~s}}(e,t);var a=ht(e,e===Pl?Ll:0);if(0===a)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bi=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi(function(){0===(6&jl)&&Hi()}),n=null;else{switch(xt(a)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Ql=-1,Jl=0,0!==(6&jl))throw Error(r(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var a=ht(e,e===Pl?Ll:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=mc(e,a);else{t=a;var i=jl;jl|=2;var o=pc();for(Pl===e&&Ll===t||(Hl=null,ql=Qe()+500,uc(e,t));;)try{vc();break}catch(l){hc(e,l)}Cr(),Nl.current=o,jl=i,null!==Al?t=0:(Pl=null,Ll=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(a=i,t=ic(e,i))),1===t)throw n=El,uc(e,0),oc(e,a),nc(e,Qe()),n;if(6===t)oc(e,a);else{if(i=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var i=n[a],r=i.getSnapshot;i=i.value;try{if(!sa(r(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,a))&&(0!==(o=ft(e))&&(a=o,t=ic(e,o))),1===t))throw n=El,uc(e,0),oc(e,a),nc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:case 5:xc(e,Bl,Hl);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=zl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&a)!==a){Xl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ai(xc.bind(null,e,Bl,Hl),t);break}xc(e,Bl,Hl);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,i=-1;0<a;){var s=31-ot(a);o=1<<s,(s=t[s])>i&&(i=s),a&=~o}if(a=i,10<(a=(120>(a=Qe()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*wl(a/1960))-a)){e.timeoutHandle=ai(xc.bind(null,e,Bl,Hl),a);break}xc(e,Bl,Hl);break;default:throw Error(r(329))}}}return nc(e,Qe()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=Ol;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bl,Bl=n,null!==t&&rc(t)),e}function rc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Dl,t&=~Tl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),a=1<<n;e[n]=-1,t&=~a}}function sc(e){if(0!==(6&jl))throw Error(r(327));Sc();var t=ht(e,0);if(0===(1&t))return nc(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var a=ft(e);0!==a&&(t=a,n=ic(e,a))}if(1===n)throw n=El,uc(e,0),oc(e,t),nc(e,Qe()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,Hl),nc(e,Qe()),null}function lc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(ql=Qe()+500,Bi&&Hi())}}function cc(e){null!==Kl&&0===Kl.tag&&0===(6&jl)&&Sc();var t=jl;jl|=1;var n=Cl.transition,a=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=a,Cl.transition=n,0===(6&(jl=t))&&Hi()}}function dc(){Fl=Il.current,ki(Il)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var a=n;switch(tr(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Ri();break;case 3:$r(),ki(Ai),ki(Pi),no();break;case 5:Jr(a);break;case 4:$r();break;case 13:case 19:ki(Xr);break;case 10:jr(a.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Al=e=Ic(e.current,null),Ll=Fl=t,Rl=0,El=null,Dl=Tl=Ml=0,Bl=Ol=null,null!==Fr){for(t=0;t<Fr.length;t++)if(null!==(a=(n=Fr[t]).interleaved)){n.interleaved=null;var i=a.next,r=n.pending;if(null!==r){var o=r.next;r.next=i,a.next=o}n.pending=a}Fr=null}return e}function hc(e,t){for(;;){var n=Al;try{if(Cr(),ao.current=Jo,co){for(var a=oo.memoizedState;null!==a;){var i=a.queue;null!==i&&(i.pending=null),a=a.next}co=!1}if(ro=0,lo=so=oo=null,uo=!1,ho=0,kl.current=null,null===n||null===n.return){Rl=1,El=t,Al=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(o,d,t),c=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(o,d,t),fc();break e}c=Error(r(426))}else if(ir&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),fr(cs(c,l));break e}}o=c=cs(c,l),4!==Rl&&(Rl=2),null===Ol?Ol=[o]:Ol.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,qr(o,ps(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,qr(o,fs(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(x){t=x,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=Nl.current;return Nl.current=Jo,null===e?Jo:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||0===(268435455&Ml)&&0===(268435455&Tl)||oc(Pl,Ll)}function mc(e,t){var n=jl;jl|=2;var a=pc();for(Pl===e&&Ll===t||(Hl=null,uc(e,t));;)try{gc();break}catch(i){hc(e,i)}if(Cr(),jl=n,Nl.current=a,null!==Al)throw Error(r(261));return Pl=null,Ll=0,Rl}function gc(){for(;null!==Al;)yc(Al)}function vc(){for(;null!==Al&&!Ze();)yc(Al)}function yc(e){var t=_l(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,kl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Vs(n,t,Fl)))return void(Al=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Rl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var a=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,a){do{Sc()}while(null!==Kl);if(0!==(6&jl))throw Error(r(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),r=1<<i;t[i]=0,a[i]=-1,e[i]=-1,n&=~r}}(e,o),e===Pl&&(Al=Pl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Vl||(Vl=!0,Pc(tt,function(){return Sc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var s=bt;bt=1;var l=jl;jl|=4,kl.current=null,function(e,t){if(ei=Ut,pa(e=ha())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var i=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var s=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==a&&3!==h.nodeType||(c=s+a),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===i&&(l=s),p===o&&++u===a&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ut=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(r(163))}}catch(S){wc(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=el,el=!1}(e,n),ml(n,e),fa(ti),Ut=!!ei,ti=ei=null,e.current=n,vl(n,e,i),$e(),jl=l,bt=s,Cl.transition=o}else e.current=n;if(Vl&&(Vl=!1,Kl=e,Yl=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Qe()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],a(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Ul,Ul=null,e;0!==(1&Yl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===$l?Zl++:(Zl=0,$l=e):Zl=0,Hi()}(e,t,n,a)}finally{Cl.transition=i,bt=a}return null}function Sc(){if(null!==Kl){var e=xt(Yl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Kl)var a=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&jl))throw Error(r(331));var i=jl;for(jl|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qs=d;null!==Qs;){var u=Qs;switch(u.tag){case 0:case 11:case 15:tl(8,u,o)}var h=u.child;if(null!==h)h.return=u,Qs=h;else for(;null!==Qs;){var p=(u=Qs).sibling,f=u.return;if(il(u),u===d){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:tl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break e}Qs=o.return}}var b=e.current;for(Qs=b;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=b;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(_){wc(l,l.return,_)}if(l===s){Qs=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Qs=S;break e}Qs=l.return}}if(jl=i,Hi(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(it,e)}catch(_){}a=!0}return a}finally{bt=n,Cl.transition=t}}return!1}function _c(e,t,n){e=Br(e,t=ps(0,t=cs(n,t),1),1),t=Xl(),null!==e&&(vt(e,1,t),nc(e,t))}function wc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Wl||!Wl.has(a))){t=Br(t,e=fs(t,e=cs(n,e),1),1),e=Xl(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Nc(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=Xl(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ll&n)===n&&(4===Rl||3===Rl&&(130023424&Ll)===Ll&&500>Qe()-zl?uc(e,0):Dl|=n),nc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=Xl();null!==(e=Er(e,t))&&(vt(e,t,n),nc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(t),kc(e,n)}function Pc(e,t){return Ke(e,t)}function Ac(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,a){return new Ac(e,t,n,a)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,a,i,o){var s=2;if(a=e,"function"===typeof e)Fc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Ec(n.children,i,o,t);case N:s=8,i|=8;break;case k:return(e=Lc(12,n,t,2|i)).elementType=k,e.lanes=o,e;case A:return(e=Lc(13,n,t,i)).elementType=A,e.lanes=o,e;case L:return(e=Lc(19,n,t,i)).elementType=L,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case j:s=9;break e;case P:s=11;break e;case F:s=14;break e;case I:s=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Lc(s,n,t,i)).elementType=e,t.type=a,t.lanes=o,t}function Ec(e,t,n,a){return(e=Lc(7,e,a,t)).lanes=n,e}function Mc(e,t,n,a){return(e=Lc(22,e,a,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Tc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,n,a,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,a,i,r,o,s,l){return e=new Oc(e,t,n,s,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Lc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tr(r),e}function zc(e){if(!e)return ji;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ii(n))return Mi(e,n,t)}return t}function qc(e,t,n,a,i,r,o,s,l){return(e=Bc(n,a,!0,e,0,r,0,s,l)).context=zc(null),n=e.current,(r=Or(a=Xl(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Br(n,r,i),e.current.lanes=i,vt(e,i,a),nc(e,a),e}function Hc(e,t,n,a){var i=t.current,r=Xl(),o=ec(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Or(r,o)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Br(i,t,o))&&(tc(e,i,o,r),zr(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Uc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Uc(e,t),(e=e.alternate)&&Uc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),pr();break;case 5:Qr(t);break;case 1:Ii(t.type)&&Ti(t);break;case 4:Zr(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Ci(_r,a._currentValue),a._currentValue=i;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Ci(Xr,1&Xr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ts(e,t,n):(Ci(Xr,1&Xr.current),null!==(e=Gs(e,t,n))?e.sibling:null);Ci(Xr,1&Xr.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Xr,Xr.current),a)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n)}return Gs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ir&&0!==(1048576&t.flags)&&Xi(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Hs(e,t),e=t.pendingProps;var i=Fi(t,Pi.current);Ar(t,n),i=go(null,t,a,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(a)?(o=!0,Ti(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Tr(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,a,e,n),t=Ps(null,t,a,!0,o,n)):(t.tag=0,ir&&o&&er(t),xs(null,t,i,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===F)return 14}return 2}(a),e=ns(a,e),i){case 0:t=Cs(null,t,a,e,n);break e;case 1:t=js(null,t,a,e,n);break e;case 11:t=Ss(null,t,a,e,n);break e;case 14:t=_s(null,t,a,ns(a.type,e),n);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,Cs(e,t,a,i=t.elementType===a?i:ns(a,i),n);case 1:return a=t.type,i=t.pendingProps,js(e,t,a,i=t.elementType===a?i:ns(a,i),n);case 3:e:{if(As(t),null===e)throw Error(r(387));a=t.pendingProps,i=(o=t.memoizedState).element,Dr(e,t),Hr(t,a,null,n);var s=t.memoizedState;if(a=s.element,o.isDehydrated){if(o={element:a,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ls(e,t,a,n,i=cs(Error(r(423)),t));break e}if(a!==i){t=Ls(e,t,a,n,i=cs(Error(r(424)),t));break e}for(ar=ci(t.stateNode.containerInfo.firstChild),nr=t,ir=!0,rr=null,n=Sr(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),a===i){t=Gs(e,t,n);break e}xs(e,t,a,n)}t=t.child}return t;case 5:return Qr(t),null===e&&cr(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(a,i)?s=null:null!==o&&ni(a,o)&&(t.flags|=32),ks(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&cr(t),null;case 13:return Ts(e,t,n);case 4:return Zr(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=xr(t,null,a,n):xs(e,t,a,n),t.child;case 11:return a=t.type,i=t.pendingProps,Ss(e,t,a,i=t.elementType===a?i:ns(a,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(_r,a._currentValue),a._currentValue=s,null!==o)if(sa(o.value,s)){if(o.children===i.children&&!Ai.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===o.tag){(c=Or(-1,n&-n)).tag=2;var d=o.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Pr(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(r(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Pr(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,Ar(t,n),a=a(i=Lr(i)),t.flags|=1,xs(e,t,a,n),t.child;case 14:return i=ns(a=t.type,t.pendingProps),_s(e,t,a,i=ns(a.type,i),n);case 15:return ws(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:ns(a,i),Hs(e,t),t.tag=1,Ii(a)?(e=!0,Ti(t)):e=!1,Ar(t,n),os(t,a,i),ls(t,a,i,n),Ps(null,t,a,!0,e,n);case 19:return qs(e,t,n);case 22:return Ns(e,t,n)}throw Error(r(156,t.tag))};var Vc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,a,i){var r=n._reactRootContainer;if(r){var o=r;if("function"===typeof i){var s=i;i=function(){var e=Gc(o);s.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,a,i){if(i){if("function"===typeof a){var r=a;a=function(){var e=Gc(o);r.call(e)}}var o=qc(t,a,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[fi]=o.current,Ha(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof a){var s=a;a=function(){var e=Gc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fi]=l.current,Ha(8===e.nodeType?e.parentNode:e),cc(function(){Hc(t,l,n,a)}),l}(n,t,e,i,a);return Gc(o)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Hc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Hc(null,e,null,null)}),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Dt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Qe()),0===(6&jl)&&(ql=Qe()+500,Hi()))}break;case 13:cc(function(){var t=Er(e,1);if(null!==t){var n=Xl();tc(t,e,1,n)}}),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Er(e,134217728);if(null!==t)tc(t,e,134217728,Xl());Wc(e,134217728)}},wt=function(e){if(13===e.tag){var t=ec(e),n=Er(e,t);if(null!==n)tc(n,e,t,Xl());Wc(e,t)}},Nt=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=Si(a);if(!i)throw Error(r(90));K(a),J(a,i)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=lc,Ae=cc;var Xc={usingClientEntryPoint:!1,Events:[bi,xi,Si,Ce,je,lc]},ed={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},td={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{it=nd.inject(td),rt=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(r(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(r(299));var n=!1,a="",i=Vc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,a,i),e[fi]=t.current,Ha(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(r(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(r(405));var a=null!=n&&n.hydratedSources||null,i=!1,o="",s=Vc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[fi]=t.current,Ha(e),a)for(e=0;e<a.length;e++)i=(i=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(r(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(r(40));return!!e._reactRootContainer&&(cc(function(){Jc(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!$c(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Jc(e,t,n,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},4202(e,t){var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,a){var i,r={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!N.hasOwnProperty(i)&&(r[i]=t[i]);var l=arguments.length-2;if(1===l)r.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:r,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case a:l=!0}}if(l)return o=o(l=e),e=""===r?"."+P(l,0):r,S(o)?(i="",null!=e&&(i=e.replace(j,"$&/")+"/"),A(o,t,i,"",function(e){return e})):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(j,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",S(e))for(var c=0;c<e.length;c++){var d=r+P(s=e[c],c);l+=A(s,t,i,d,o)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(s=e.next()).done;)l+=A(s=s.value,t,i,d=r+P(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var a=[],i=0;return A(e,a,"","",function(e){return t.call(n,e,i++)}),a}function F(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},E={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,n){L(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E,t.act=M,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),r=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!N.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:r,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},4391(e,t,n){var a=n(7950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},4980(e,t,n){n.d(t,{A:()=>r});var a=n(2284);function i(e){var t=function(e,t){if("object"!=(0,a.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,a.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,a.A)(t)?t:t+""}function r(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5043(e,t,n){e.exports=n(4202)},7234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,i=e[a];if(!(0<r(i,t)))break e;e[a]=t,e[n]=i,n=a}}function a(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,i=e.length,o=i>>>1;a<o;){var s=2*(a+1)-1,l=e[s],c=s+1,d=e[c];if(0>r(l,n))c<i&&0>r(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[s]=n,a=s);else{if(!(c<i&&0>r(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=a(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=a(d)}}function S(e){if(g=!1,x(e),!m)if(null!==a(c))m=!0,R(_);else{var t=a(d);null!==t&&E(S,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(C),C=-1),f=!0;var r=p;try{for(x(n),h=a(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===a(c)&&i(c),x(n)}else i(c);h=a(c)}if(null!==h)var l=!0;else{var u=a(d);null!==u&&E(S,u.startTime-n),l=!1}return l}finally{h=null,p=r,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,N=!1,k=null,C=-1,j=5,P=-1;function A(){return!(t.unstable_now()-P<j)}function L(){if(null!==k){var e=t.unstable_now();P=e;var n=!0;try{n=k(!0,e)}finally{n?w():(N=!1,k=null)}}else N=!1}if("function"===typeof b)w=function(){b(L)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,I=F.port2;F.port1.onmessage=L,w=function(){I.postMessage(null)}}else w=function(){v(L,0)};function R(e){k=e,N||(N=!0,w())}function E(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,r){var o=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:r,expirationTime:s=r+s,sortIndex:-1},r>o?(e.sortIndex=r,n(d,e),null===a(c)&&e===a(d)&&(g?(y(C),C=-1):g=!0,E(S,r-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,R(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8237(e,t,n){var a=n(8907),i=n(9367);e=n.hmd(e);const r={propertyContext:{residenceType:"primary",estimatedSF:15e3,numberOfLevels:2,hasBasement:!1},householdProfile:{composition:"couple_young_children",primaryResidents:4,childrenAges:[8,12],pets:[{type:"dog",count:1,size:"large"}],elderlyResidents:!1,mobilityConsiderations:!1},entertainingProfile:{frequency:"frequently",typicalScale:"large",maxEventScale:"grand",formalDiningImportance:4,outdoorEntertainingImportance:3,barEntertainingImportance:3,wineCollection:!0,wineBottleCount:300},staffingProfile:{preference:"regular",securityRequirements:"moderate"},privacyProfile:{preference:"selective",workFromHome:"executive",clientMeetingsAtHome:!0,lateNightMediaUse:!0,guestStayFrequency:"occasionally",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!1},kitchenProfile:{cookingStyle:"enthusiast",primaryCook:"both",breakfastStyle:"casual",dailyMealsAtHome:2,showKitchenImportance:4},wellnessProfile:{interest:"dedicated",poolDesired:!0,poolType:"lap",spaFeatures:["sauna","steam"],fitnessRoutine:"regular"}},o={propertyContext:{residenceType:"primary",estimatedSF:12e3,numberOfLevels:2,hasBasement:!0},householdProfile:{composition:"couple_adult_children",primaryResidents:2,childrenAges:[],pets:[],elderlyResidents:!1,mobilityConsiderations:!1},entertainingProfile:{frequency:"frequently",typicalScale:"moderate",maxEventScale:"large",formalDiningImportance:5,outdoorEntertainingImportance:3,barEntertainingImportance:4,wineCollection:!0,wineBottleCount:500},staffingProfile:{preference:"full_service",securityRequirements:"moderate"},privacyProfile:{preference:"formal",workFromHome:"occasional",clientMeetingsAtHome:!1,lateNightMediaUse:!1,guestStayFrequency:"frequently",typicalGuestStayDuration:"extended",multiGenerationalHosting:!0},kitchenProfile:{cookingStyle:"casual",primaryCook:"staff",breakfastStyle:"casual",dailyMealsAtHome:2,showKitchenImportance:3},wellnessProfile:{interest:"basic",poolDesired:!1,fitnessRoutine:"light"}},s={propertyContext:{residenceType:"primary",estimatedSF:18e3,numberOfLevels:1,hasBasement:!1},householdProfile:{composition:"multi_generational",primaryResidents:4,childrenAges:[10],pets:[{type:"cat",count:2}],elderlyResidents:!0,mobilityConsiderations:!0},entertainingProfile:{frequency:"occasionally",typicalScale:"intimate",maxEventScale:"moderate",formalDiningImportance:3,outdoorEntertainingImportance:2,barEntertainingImportance:2},staffingProfile:{preference:"regular",securityRequirements:"enhanced"},privacyProfile:{preference:"selective",workFromHome:"primary",clientMeetingsAtHome:!1,lateNightMediaUse:!1,guestStayFrequency:"rarely",typicalGuestStayDuration:"weekend",multiGenerationalHosting:!1},kitchenProfile:{cookingStyle:"enthusiast",primaryCook:"both",breakfastStyle:"casual",dailyMealsAtHome:3,showKitchenImportance:4},wellnessProfile:{interest:"basic",poolDesired:!1,fitnessRoutine:"light"}};n.c[n.s]===e&&function(){console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("ADJACENCY RECOMMENDER TESTS"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n");let e=0,t=0;console.log("TEST 1: Decision library loaded");const n=i.FK;n.length>=10?(console.log("  \u2713 ".concat(n.length," decisions defined")),e++):(console.log("  \u2717 Expected 10+ decisions, got ".concat(n.length)),t++),console.log("\nTEST 2: Decision structure validation");let l=!0;for(const a of n){var c;a.id&&a.title&&null!==(c=a.options)&&void 0!==c&&c.length||(console.log("  \u2717 Invalid decision: ".concat(a.id)),l=!1);for(const e of a.options)e.id&&e.targetSpace&&e.relationship||(console.log("  \u2717 Invalid option in ".concat(a.id,": ").concat(e.id)),l=!1)}l?(console.log("  \u2713 All decisions have valid structure"),e++):t++,console.log("\nTEST 3: Preset filtering");const d=(0,i.w8)("10k"),u=(0,i.w8)("15k"),h=(0,i.w8)("20k");console.log("  10K preset: ".concat(d.length," decisions")),console.log("  15K preset: ".concat(u.length," decisions")),console.log("  20K preset: ".concat(h.length," decisions")),u.length>=d.length?(console.log("  \u2713 Larger presets have equal or more decisions"),e++):(console.log("  \u2717 Preset filtering incorrect"),t++),console.log("\nTEST 4: Executive Family recommendations");const p=(0,a.n5)(r,"15k");console.log("  Generated ".concat(p.length," recommendations"));const f=p.find(e=>"office-location"===e.decision.id);"off-entry"===(null===f||void 0===f?void 0:f.recommendedOption.id)?(console.log("  \u2713 Office recommended near entry (client meetings)"),e++):(console.log("  \u2717 Office recommendation: ".concat(null===f||void 0===f?void 0:f.recommendedOption.id,", expected off-entry")),t++);const m=p.find(e=>"media-acoustics"===e.decision.id);"media-isolated"===(null===m||void 0===m?void 0:m.recommendedOption.id)?(console.log("  \u2713 Media room recommended isolated (late-night use)"),e++):(console.log("  \u2717 Media recommendation: ".concat(null===m||void 0===m?void 0:m.recommendedOption.id,", expected media-isolated")),t++),console.log("\nTEST 5: Empty Nesters recommendations");const g=(0,a.n5)(o,"10k"),v=g.find(e=>"guest-independence"===e.decision.id);"guest-independent"===(null===v||void 0===v?void 0:v.recommendedOption.id)?(console.log("  \u2713 Guest suite recommended independent (extended stays)"),e++):(console.log("  \u2717 Guest recommendation: ".concat(null===v||void 0===v?void 0:v.recommendedOption.id,", expected guest-independent")),t++);const y=g.find(e=>"dining-formality"===e.decision.id);"dr-formal"===(null===y||void 0===y?void 0:y.recommendedOption.id)?(console.log("  \u2713 Dining recommended formal (high importance)"),e++):(console.log("  \u2717 Dining recommendation: ".concat(null===y||void 0===y?void 0:y.recommendedOption.id,", expected dr-formal")),t++),console.log("\nTEST 6: Multi-Gen recommendations");const b=(0,a.n5)(s,"20k").find(e=>"primary-privacy"===e.decision.id);"pri-wing"===(null===b||void 0===b?void 0:b.recommendedOption.id)?(console.log("  \u2713 Primary suite recommended as wing (single-level/mobility)"),e++):(console.log("  \u2717 Primary recommendation: ".concat(null===b||void 0===b?void 0:b.recommendedOption.id,", expected pri-wing")),t++),console.log("\nTEST 7: Evaluation with warnings");const x=i.FK.find(e=>"office-location"===e.id),S=(0,a.aW)(x,"off-family");S.warnings.length>0?(console.log("  \u2713 Office near family generates ".concat(S.warnings.length," warning(s)")),console.log("    - ".concat(S.warnings[0])),e++):(console.log("  \u2717 Expected warnings for office near family"),t++),console.log("\nTEST 8: Bridge requirement detection");const _=i.FK.find(e=>"media-acoustics"===e.id);(0,a.aW)(_,"media-isolated").bridgesRequired.includes("soundLock")?(console.log("  \u2713 Isolated media requires soundLock bridge"),e++):(console.log("  \u2717 Expected soundLock bridge requirement"),t++),console.log("\nTEST 9: SF impact calculation");const w=[{decisionId:"media-acoustics",selectedOptionId:"media-isolated",isDefault:!1,warnings:[]},{decisionId:"guest-independence",selectedOptionId:"guest-independent",isDefault:!1,warnings:[]}],N=(0,a.q5)(w);210===N.totalSfImpact?(console.log("  \u2713 Total SF impact: ".concat(N.totalSfImpact," SF")),e++):(console.log("  \u2717 SF impact: ".concat(N.totalSfImpact,", expected ").concat(210)),t++),console.log("\nTEST 10: Bridge config derivation");const k=(0,a.Rh)(w);k.soundLock&&k.guestAutonomy?(console.log("  \u2713 Bridge config includes soundLock and guestAutonomy"),e++):(console.log("  \u2717 Bridge config missing expected bridges"),t++),console.log("\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("RESULTS: ".concat(e," passed, ").concat(t," failed")),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n")}()},8853(e,t,n){e.exports=n(7234)},8907(e,t,n){n.d(t,{Qy:()=>d,Rh:()=>u,aW:()=>l,n5:()=>i,q5:()=>c});var a=n(9367);function i(e,t){const n=(0,a.w8)(t),i=[];for(const a of n){const t=r(a,e);i.push(t)}return i}function r(e,t){const n=[];for(const s of e.options){const{score:e,reasons:a}=o(s,t);n.push({option:s,score:e,reasons:a})}n.sort((e,t)=>t.score-e.score);const a=n[0],i=n.slice(1).filter(e=>e.score>0).map(e=>e.option.id);let r="medium";return a.score>=3?r="high":(a.score<=1||n[1]&&n[1].score>=a.score-1)&&(r="low"),{decision:e,recommendedOption:a.option,confidence:r,reasoning:a.reasons.join(". ")||"Default recommendation based on baseline preset.",alternativeOptionIds:i}}function o(e,t){let n=e.isDefault?1:0;const a=[];for(const i of e.triggerConditions){const{matches:e,reason:r}=s(i,t);e&&(n+=2,r&&a.push(r))}return e.warnings.length>0&&n<3&&(n-=1),{score:n,reasons:a}}function s(e,t){try{var n,a,i,r,o,s,l,c,d,u,h,p,f,m,g,v,y,b,x,S,_,w,N,k,C,j,P,A,L,F,I,R,E,M,T,D,O,B,z,q,H,G,U,W,V,K,Y,Z,$,Q,J;if('workFromHome === "executive"'===e)if("executive"===(null===(n=t.privacyProfile)||void 0===n?void 0:n.workFromHome))return{matches:!0,reason:"You have an executive home office"};if('workFromHome === "primary"'===e)if("primary"===(null===(a=t.privacyProfile)||void 0===a?void 0:a.workFromHome))return{matches:!0,reason:"You work from home primarily"};if('workFromHome === "occasional"'===e)if("occasional"===(null===(i=t.privacyProfile)||void 0===i?void 0:i.workFromHome))return{matches:!0,reason:"You work from home occasionally"};if("clientMeetingsAtHome === true"===e)if(null!==(r=t.privacyProfile)&&void 0!==r&&r.clientMeetingsAtHome)return{matches:!0,reason:"You host client meetings at home"};if("clientMeetingsAtHome === false"===e)if(null===(o=t.privacyProfile)||void 0===o||!o.clientMeetingsAtHome)return{matches:!0,reason:"No client meetings at home"};if("childrenCount > 0"===e)if(((null===(s=t.householdProfile)||void 0===s||null===(l=s.childrenAges)||void 0===l?void 0:l.length)||0)>0)return{matches:!0,reason:"You have children"};if("childrenCount >= 2"===e)if(((null===(c=t.householdProfile)||void 0===c||null===(d=c.childrenAges)||void 0===d?void 0:d.length)||0)>=2)return{matches:!0,reason:"You have multiple children"};if('privacyPreference === "sanctuary"'===e)if("sanctuary"===(null===(u=t.privacyProfile)||void 0===u?void 0:u.preference))return{matches:!0,reason:"You prefer maximum privacy"};if('privacyPreference === "selective"'===e)if("selective"===(null===(h=t.privacyProfile)||void 0===h?void 0:h.preference))return{matches:!0,reason:"You prefer selective privacy"};if('privacyPreference === "formal"'===e)if("formal"===(null===(p=t.privacyProfile)||void 0===p?void 0:p.preference))return{matches:!0,reason:"You prefer formal separation"};if('cookingStyle === "enthusiast"'===e)if("enthusiast"===(null===(f=t.kitchenProfile)||void 0===f?void 0:f.cookingStyle))return{matches:!0,reason:"You're an enthusiast cook"};if('cookingStyle === "casual"'===e)if("casual"===(null===(m=t.kitchenProfile)||void 0===m?void 0:m.cookingStyle))return{matches:!0,reason:"You have a casual cooking style"};if('cookingStyle === "professional"'===e)if("professional"===(null===(g=t.kitchenProfile)||void 0===g?void 0:g.cookingStyle))return{matches:!0,reason:"You cook at a professional level"};if('cookingStyle === "serious"'===e)if("serious"===(null===(v=t.kitchenProfile)||void 0===v?void 0:v.cookingStyle))return{matches:!0,reason:"You're a serious home cook"};if('primaryCook === "family"'===e){var X;const e=null===(X=t.kitchenProfile)||void 0===X?void 0:X.primaryCook;if("self"===e||"spouse"===e||"both"===e)return{matches:!0,reason:"Family members do the cooking"}}if('primaryCook === "staff"'===e)if("staff"===(null===(y=t.kitchenProfile)||void 0===y?void 0:y.primaryCook))return{matches:!0,reason:"Staff handles cooking"};if('staffingPreference === "full_service"'===e)if("full_service"===(null===(b=t.staffingProfile)||void 0===b?void 0:b.preference))return{matches:!0,reason:"You have full-service staffing"};if('staffingPreference === "estate"'===e)if("estate"===(null===(x=t.staffingProfile)||void 0===x?void 0:x.preference))return{matches:!0,reason:"You have estate-level staffing"};if('staffingPreference === "self_sufficient"'===e)if("self_sufficient"===(null===(S=t.staffingProfile)||void 0===S?void 0:S.preference))return{matches:!0,reason:"You prefer self-sufficient living"};if("lateNightMediaUse === true"===e)if(null!==(_=t.privacyProfile)&&void 0!==_&&_.lateNightMediaUse)return{matches:!0,reason:"You use media late at night"};if("lateNightMediaUse === false"===e)if(null===(w=t.privacyProfile)||void 0===w||!w.lateNightMediaUse)return{matches:!0,reason:"No late-night media use"};if('guestStayFrequency === "frequently"'===e)if("frequently"===(null===(N=t.privacyProfile)||void 0===N?void 0:N.guestStayFrequency))return{matches:!0,reason:"You host guests frequently"};if('guestStayFrequency === "occasionally"'===e)if("occasionally"===(null===(k=t.privacyProfile)||void 0===k?void 0:k.guestStayFrequency))return{matches:!0,reason:"You host guests occasionally"};if('guestStayFrequency === "rarely"'===e)if("rarely"===(null===(C=t.privacyProfile)||void 0===C?void 0:C.guestStayFrequency))return{matches:!0,reason:"You rarely host overnight guests"};if('typicalGuestStayDuration === "extended"'===e)if("extended"===(null===(j=t.privacyProfile)||void 0===j?void 0:j.typicalGuestStayDuration))return{matches:!0,reason:"Guests stay for extended periods"};if('typicalGuestStayDuration === "week"'===e)if("week"===(null===(P=t.privacyProfile)||void 0===P?void 0:P.typicalGuestStayDuration))return{matches:!0,reason:"Guests typically stay a week"};if("multiGenerationalHosting === true"===e)if(null!==(A=t.privacyProfile)&&void 0!==A&&A.multiGenerationalHosting)return{matches:!0,reason:"You host multi-generational gatherings"};if("multiGenerationalHosting === false"===e)if(null===(L=t.privacyProfile)||void 0===L||!L.multiGenerationalHosting)return{matches:!0,reason:"Single-generation household"};if("elderlyResidents === true"===e)if(null!==(F=t.householdProfile)&&void 0!==F&&F.elderlyResidents)return{matches:!0,reason:"You have elderly residents"};if("mobilityConsiderations === true"===e)if(null!==(I=t.householdProfile)&&void 0!==I&&I.mobilityConsiderations)return{matches:!0,reason:"Mobility considerations apply"};if("formalDiningImportance >= 4"===e)if(((null===(R=t.entertainingProfile)||void 0===R?void 0:R.formalDiningImportance)||0)>=4)return{matches:!0,reason:"Formal dining is important to you"};if("formalDiningImportance <= 3"===e)if(((null===(E=t.entertainingProfile)||void 0===E?void 0:E.formalDiningImportance)||3)<=3)return{matches:!0,reason:"Casual dining preference"};if('entertainingFrequency === "frequently"'===e)if("frequently"===(null===(M=t.entertainingProfile)||void 0===M?void 0:M.frequency))return{matches:!0,reason:"You entertain frequently"};if('entertainingFrequency === "occasionally"'===e)if("occasionally"===(null===(T=t.entertainingProfile)||void 0===T?void 0:T.frequency))return{matches:!0,reason:"You entertain occasionally"};if('typicalScale === "grand"'===e)if("grand"===(null===(D=t.entertainingProfile)||void 0===D?void 0:D.typicalScale))return{matches:!0,reason:"You host grand-scale events"};if('fitnessRoutine === "intensive"'===e)if("intensive"===(null===(O=t.wellnessProfile)||void 0===O?void 0:O.fitnessRoutine))return{matches:!0,reason:"You have an intensive fitness routine"};if('fitnessRoutine === "regular"'===e)if("regular"===(null===(B=t.wellnessProfile)||void 0===B?void 0:B.fitnessRoutine))return{matches:!0,reason:"You exercise regularly"};if('wellnessInterest === "resort"'===e)if("resort"===(null===(z=t.wellnessProfile)||void 0===z?void 0:z.interest))return{matches:!0,reason:"You want resort-level wellness"};if('wellnessInterest === "dedicated"'===e)if("dedicated"===(null===(q=t.wellnessProfile)||void 0===q?void 0:q.interest))return{matches:!0,reason:"You want dedicated wellness facilities"};if('wellnessInterest === "casual"'===e)if("basic"===(null===(H=t.wellnessProfile)||void 0===H?void 0:H.interest))return{matches:!0,reason:"You have basic wellness interest"};if("poolDesired === true"===e)if(null!==(G=t.wellnessProfile)&&void 0!==G&&G.poolDesired)return{matches:!0,reason:"You want a pool"};if("wineBottleCount >= 200"===e)if(((null===(U=t.entertainingProfile)||void 0===U?void 0:U.wineBottleCount)||0)>=200)return{matches:!0,reason:"You have a significant wine collection"};if("pets.length > 0"===e)if(((null===(W=t.householdProfile)||void 0===W||null===(V=W.pets)||void 0===V?void 0:V.length)||0)>0)return{matches:!0,reason:"You have pets"};if("numberOfLevels >= 2"===e)if(((null===(K=t.propertyContext)||void 0===K?void 0:K.numberOfLevels)||2)>=2)return{matches:!0,reason:"Multi-level home"};if("numberOfLevels === 1"===e)if(1===(null===(Y=t.propertyContext)||void 0===Y?void 0:Y.numberOfLevels))return{matches:!0,reason:"Single-level home"};if("hasBasement === true"===e)if(null!==(Z=t.propertyContext)&&void 0!==Z&&Z.hasBasement)return{matches:!0,reason:"Home has basement"};if('composition === "family_with_children"'===e){var ee;const e=null===(ee=t.householdProfile)||void 0===ee?void 0:ee.composition;if("couple_young_children"===e||"couple_teenagers"===e||"blended_family"===e)return{matches:!0,reason:"Family with children"}}if('composition === "multi_generational"'===e)if("multi_generational"===(null===($=t.householdProfile)||void 0===$?void 0:$.composition))return{matches:!0,reason:"Multi-generational household"};if('composition === "blended_family"'===e)if("blended_family"===(null===(Q=t.householdProfile)||void 0===Q?void 0:Q.composition))return{matches:!0,reason:"Blended family"};if('packageDeliveryVolume === "heavy"'===e)if("enhanced"===(null===(J=t.staffingProfile)||void 0===J?void 0:J.securityRequirements))return{matches:!0,reason:"Heavy package delivery volume"}}catch(te){console.error("Error evaluating condition:",e,te)}return{matches:!1,reason:""}}function l(e,t){const n=(0,a.O$)(e,t);if(!n)return{isValid:!1,warnings:["Invalid option selected"],redFlags:[],sfImpact:0,bridgesRequired:[]};const i=[...n.warnings],r=[],o=[];return n.warnings.some(e=>e.toLowerCase().includes("acoustic conflict"))&&r.push("Potential acoustic issues"),n.warnings.some(e=>e.toLowerCase().includes("circulation conflict"))&&r.push("Circulation path concerns"),n.bridgeRequired&&o.push(n.bridgeRequired),{isValid:!0,warnings:i,redFlags:r,sfImpact:n.sfImpact||0,bridgesRequired:o}}function c(e){let t=0;const n=[];let i=0,r=0;for(const o of e){const e=a.FK.find(e=>e.id===o.decisionId);if(!e)continue;const s=l(e,o.selectedOptionId);t+=s.sfImpact,n.push(...s.bridgesRequired),i+=s.warnings.length,r+=s.redFlags.length,o.warnings=s.warnings}return{choices:e,totalSfImpact:t,requiredBridges:[...new Set(n)],warningCount:i,redFlagCount:r}}function d(e,t){const n=[...e];for(const i of t){const e=a.FK.find(e=>e.id===i.decisionId);if(!e)continue;const t=(0,a.O$)(e,i.selectedOptionId);if(!t)continue;const r=n.findIndex(n=>n.fromSpaceCode===e.primarySpace&&n.toSpaceCode===t.targetSpace),o={fromSpaceCode:e.primarySpace,toSpaceCode:t.targetSpace,relationship:t.relationship};r>=0?n[r]=o:n.push(o);const s=n.findIndex(n=>n.fromSpaceCode===t.targetSpace&&n.toSpaceCode===e.primarySpace),l={fromSpaceCode:t.targetSpace,toSpaceCode:e.primarySpace,relationship:t.relationship};s>=0?n[s]=l:n.push(l)}return n}function u(e){const t={};for(const n of e){const e=a.FK.find(e=>e.id===n.decisionId);if(!e)continue;const i=(0,a.O$)(e,n.selectedOptionId);if(null!==i&&void 0!==i&&i.bridgeRequired)switch(i.bridgeRequired){case"butlerPantry":t.butlerPantry=!0;break;case"soundLock":t.soundLock=!0;break;case"guestAutonomy":t.guestAutonomy=!0;break;case"wetFeetIntercept":t.wetFeetIntercept=!0;break;case"opsCore":t.opsCore=!0}}return t}},9367(e,t,n){n.d(t,{FK:()=>a,O$:()=>r,w8:()=>i});const a=[{id:"office-location",title:"Home Office Location",question:"Where should your home office connect?",context:"Office placement affects both your productivity and your household's daily flow. Consider who visits and when you work.",primarySpace:"OFF",icon:"Briefcase",applicablePresets:["10k","15k","20k"],kycFields:["workFromHome","clientMeetingsAtHome","childrenCount"],priority:1,options:[{id:"off-entry",label:"Near Entry (Front of House)",description:"Professional separation. Clients enter without seeing private areas. Best for executive home offices.",targetSpace:"FOY",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["clientMeetingsAtHome === true",'workFromHome === "executive"','workFromHome === "primary"']},{id:"off-family",label:"Near Family Room",description:"Stay connected to household activities. Supervise children while working. Casual work style.",targetSpace:"FR",relationship:"N",isDefault:!1,warnings:["Acoustic conflict: Family room noise may disrupt video calls","Privacy concern: Work visible to household members"],triggerConditions:["childrenCount > 0",'workFromHome === "occasional"']},{id:"off-primary",label:"Near Primary Suite",description:"Maximum privacy and quiet. Early morning or late night work without disturbing household.",targetSpace:"PRIHALL",relationship:"N",isDefault:!1,warnings:["Circulation conflict: Clients would need to enter private zone","Separation concern: May feel isolated from family"],triggerConditions:["clientMeetingsAtHome === false",'privacyPreference === "sanctuary"']}]},{id:"kitchen-family",title:"Kitchen & Family Room Connection",question:"How should your kitchen relate to family living spaces?",context:"This defines the heart of your home. Open plans maximize togetherness; separation allows focused cooking and reduces noise.",primarySpace:"KIT",icon:"ChefHat",applicablePresets:["10k","15k","20k"],kycFields:["cookingStyle","primaryCook","staffingPreference","entertainingFrequency"],priority:2,options:[{id:"kit-open",label:"Open to Family Room",description:"Modern open plan. Cook while engaging with family. Clear sightlines throughout.",targetSpace:"FR",relationship:"A",isDefault:!0,warnings:[],triggerConditions:['cookingStyle === "enthusiast"','cookingStyle === "casual"','primaryCook === "family"']},{id:"kit-semi",label:"Connected but Defined",description:"Visual connection with partial separation. Island or half-wall defines spaces while maintaining openness.",targetSpace:"FR",relationship:"N",isDefault:!1,warnings:[],triggerConditions:['privacyPreference === "selective"','entertainingFrequency === "frequently"']},{id:"kit-separate",label:"Separate Kitchen",description:"Traditional separation. Staff can work unseen. Formal entertaining without kitchen visibility.",targetSpace:"FR",relationship:"B",isDefault:!1,warnings:["Lifestyle impact: May feel disconnected from family activities","Supervision concern: Cannot see children from kitchen"],bridgeRequired:"butlerPantry",triggerConditions:['staffingPreference === "full_service"','staffingPreference === "estate"','primaryCook === "staff"']}]},{id:"media-acoustics",title:"Media Room Placement",question:"How should your media room relate to sleeping areas?",context:"Late-night movie watching requires acoustic separation from bedrooms. Consider who uses the media room and when.",primarySpace:"MEDIA",icon:"Tv",applicablePresets:["10k","15k","20k"],kycFields:["lateNightMediaUse","childrenCount","entertainingFrequency"],priority:3,options:[{id:"media-family-zone",label:"Part of Family Zone",description:"Easy access from family room. Shared use by all household members. No late-night use expected.",targetSpace:"FR",relationship:"N",isDefault:!0,warnings:[],triggerConditions:["lateNightMediaUse === false","childrenCount > 0"]},{id:"media-isolated",label:"Acoustically Isolated",description:"Sound lock vestibule between media and sleeping areas. Full theater experience without disturbing others.",targetSpace:"PRI",relationship:"S",isDefault:!1,warnings:[],sfImpact:60,bridgeRequired:"soundLock",triggerConditions:["lateNightMediaUse === true"]},{id:"media-basement",label:"Basement Location",description:"Natural sound isolation. Dedicated entertainment level. Premium theater experience.",targetSpace:"STAIR",relationship:"N",isDefault:!1,warnings:["Accessibility: Requires stairs for every use","Integration: Separated from main living flow"],triggerConditions:["hasBasement === true"]}]},{id:"guest-independence",title:"Guest Suite Relationship",question:"How independent should your guest suite be?",context:"Extended family visits benefit from independence. Occasional guests may prefer connection to family life.",primarySpace:"GSL1",icon:"Users",applicablePresets:["10k","15k","20k"],kycFields:["guestStayFrequency","typicalGuestStayDuration","multiGenerationalHosting","elderlyResidents"],priority:4,options:[{id:"guest-independent",label:"Fully Independent",description:"Separate entry option. Own kitchenette. Complete autonomy for extended stays.",targetSpace:"FOY",relationship:"S",isDefault:!1,warnings:[],sfImpact:150,bridgeRequired:"guestAutonomy",triggerConditions:['guestStayFrequency === "frequently"','typicalGuestStayDuration === "extended"','typicalGuestStayDuration === "week"',"multiGenerationalHosting === true"]},{id:"guest-connected",label:"Connected to Family Areas",description:"Part of main house flow. Shared amenities. Guests feel included in family life.",targetSpace:"FR",relationship:"N",isDefault:!0,warnings:[],triggerConditions:['guestStayFrequency === "occasionally"','guestStayFrequency === "rarely"']},{id:"guest-near-primary",label:"Near Primary Suite",description:"Close proximity for elderly parents or young guests needing attention.",targetSpace:"PRIHALL",relationship:"N",isDefault:!1,warnings:["Privacy impact: Guest activity within private zone","Noise concern: Less separation from your sleeping area"],triggerConditions:["elderlyResidents === true"]}]},{id:"primary-privacy",title:"Primary Suite Privacy",question:"How separated should your primary suite be from household activity?",context:"Your private retreat. Balance accessibility with sanctuary.",primarySpace:"PRI",icon:"BedDouble",applicablePresets:["10k","15k","20k"],kycFields:["privacyPreference","childrenCount","numberOfLevels"],priority:5,options:[{id:"pri-separate-level",label:"Separate Level",description:"Primary suite on its own floor. Maximum privacy and acoustic separation.",targetSpace:"STAIR",relationship:"N",isDefault:!0,warnings:[],triggerConditions:["numberOfLevels >= 2",'privacyPreference === "sanctuary"','privacyPreference === "formal"']},{id:"pri-wing",label:"Dedicated Wing",description:"Same level but separate wing. Good privacy with single-floor living option.",targetSpace:"FR",relationship:"B",isDefault:!1,warnings:[],triggerConditions:["numberOfLevels === 1","mobilityConsiderations === true"]},{id:"pri-connected",label:"Connected to Family",description:"Close to children's rooms. Easy nighttime access for young families.",targetSpace:"FR",relationship:"N",isDefault:!1,warnings:["Privacy reduced: More household traffic near suite","Acoustic impact: Less buffer from family activities"],triggerConditions:["childrenCount > 0","childrenAges includes young children"]}]},{id:"dining-formality",title:"Dining Room Relationship",question:"How formal should your dining experience be?",context:"Formal entertaining benefits from separation. Casual families prefer open connection.",primarySpace:"DR",icon:"Wine",applicablePresets:["10k","15k","20k"],kycFields:["formalDiningImportance","entertainingFrequency","typicalScale","staffingPreference"],priority:6,options:[{id:"dr-formal",label:"Formal Separation",description:"Dedicated dining room near entry. Impressive arrival sequence for guests. Butler pantry service.",targetSpace:"FOY",relationship:"N",isDefault:!1,warnings:[],bridgeRequired:"butlerPantry",triggerConditions:["formalDiningImportance >= 4",'entertainingFrequency === "frequently"','typicalScale === "grand"']},{id:"dr-great-room",label:"Part of Great Room",description:"Open to living areas. Flexible space for various occasions. Modern casual elegance.",targetSpace:"GR",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["formalDiningImportance <= 3",'entertainingFrequency === "occasionally"']},{id:"dr-kitchen",label:"Kitchen Adjacent",description:"Direct kitchen connection. Easy serving. Chef's table experience.",targetSpace:"KIT",relationship:"A",isDefault:!1,warnings:["Formality reduced: Kitchen activities visible during meals","Noise: Cooking sounds during dinner"],triggerConditions:['cookingStyle === "professional"','cookingStyle === "serious"']}]},{id:"wellness-placement",title:"Wellness Zone Placement",question:"Where should your gym and spa facilities connect?",context:"Morning workout routines benefit from primary suite proximity. Pool entertainment benefits from family room connection.",primarySpace:"GYM",icon:"Dumbbell",applicablePresets:["15k","20k"],kycFields:["fitnessRoutine","wellnessInterest","poolDesired","spaFeatures"],priority:7,options:[{id:"wellness-primary",label:"Near Primary Suite",description:"Morning workout without traversing house. Direct access from suite.",targetSpace:"PRIHALL",relationship:"N",isDefault:!1,warnings:["Separation: Wellness traffic in private zone"],triggerConditions:['fitnessRoutine === "intensive"','fitnessRoutine === "regular"']},{id:"wellness-pool",label:"Pool-Integrated Zone",description:"Gym, spa, and pool as unified wellness destination. Resort-style experience.",targetSpace:"POOL",relationship:"A",isDefault:!0,warnings:[],bridgeRequired:"wetFeetIntercept",triggerConditions:["poolDesired === true",'wellnessInterest === "resort"','wellnessInterest === "dedicated"']},{id:"wellness-family",label:"Family Zone Adjacent",description:"Easy access for all family members. Supervision of children during workouts.",targetSpace:"FR",relationship:"N",isDefault:!1,warnings:[],triggerConditions:["childrenCount > 0",'wellnessInterest === "casual"']}]},{id:"mudroom-flow",title:"Mudroom & Service Entry",question:"How should your service entry connect to the house?",context:"The mudroom handles daily chaos: groceries, packages, pets, kids. Good flow prevents bottlenecks.",primarySpace:"MUD",icon:"Home",applicablePresets:["10k","15k","20k"],kycFields:["pets","childrenCount","staffingPreference","packageDeliveryVolume"],priority:8,options:[{id:"mud-kitchen",label:"Direct to Kitchen",description:"Groceries straight to kitchen. Efficient daily flow. May track through food prep area.",targetSpace:"KIT",relationship:"A",isDefault:!1,warnings:["Cleanliness: Outdoor elements enter near food prep"],triggerConditions:['staffingPreference === "self_sufficient"']},{id:"mud-scullery",label:"Through Scullery",description:"Buffer zone between garage and kitchen. Drop packages, clean up, then enter kitchen clean.",targetSpace:"SCUL",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["pets.length > 0","childrenCount > 0"]},{id:"mud-ops",label:"Operations Core Hub",description:"Dedicated service zone for staff. Package staging. Deliveries processed before entering house.",targetSpace:"OPSCORE",relationship:"A",isDefault:!1,warnings:[],sfImpact:150,bridgeRequired:"opsCore",triggerConditions:['staffingPreference === "full_service"','staffingPreference === "estate"','packageDeliveryVolume === "heavy"']}]},{id:"wine-access",title:"Wine Storage Access",question:"How should your wine storage be accessed?",context:"Wine service style: formal butler presentation, casual kitchen grab, or dedicated tasting experience.",primarySpace:"WINE",icon:"Wine",applicablePresets:["10k","15k","20k"],kycFields:["wineCollection","wineBottleCount","formalDiningImportance","entertainingFrequency"],priority:9,options:[{id:"wine-dining",label:"Near Dining Room",description:"Formal wine service. Display cellar visible from dining. Impressive presentation.",targetSpace:"DR",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["formalDiningImportance >= 4","wineBottleCount >= 200"]},{id:"wine-kitchen",label:"Kitchen Adjacent",description:"Casual access while cooking. Wine as cooking ingredient. Everyday convenience.",targetSpace:"KIT",relationship:"N",isDefault:!1,warnings:["Temperature: Kitchen heat may affect wine storage"],triggerConditions:['cookingStyle === "serious"','cookingStyle === "professional"']},{id:"wine-scullery",label:"Service Access",description:"Staff retrieves wine unseen. Back-of-house staging. Professional service model.",targetSpace:"SCUL",relationship:"A",isDefault:!1,warnings:[],triggerConditions:['staffingPreference === "full_service"','staffingPreference === "estate"']}]},{id:"secondary-clustering",title:"Secondary Bedroom Arrangement",question:"How should secondary bedrooms be organized?",context:"Children benefit from clustering. Adult children or guests may prefer separation for privacy.",primarySpace:"SEC1",icon:"BedDouble",applicablePresets:["10k","15k","20k"],kycFields:["childrenCount","childrenAges","composition","guestStayFrequency"],priority:10,options:[{id:"sec-clustered",label:"Clustered Together",description:"All secondary bedrooms in one wing. Shared bathroom options. Easy supervision.",targetSpace:"SEC2",relationship:"A",isDefault:!0,warnings:[],triggerConditions:["childrenCount >= 2",'composition === "family_with_children"']},{id:"sec-distributed",label:"Distributed for Privacy",description:"Bedrooms separated. Each feels like private suite. Adult children or frequent guests.",targetSpace:"SEC2",relationship:"B",isDefault:!1,warnings:["Supervision: Harder to monitor young children","Circulation: More hallway required"],triggerConditions:['composition === "multi_generational"','composition === "blended_family"']},{id:"sec-split-level",label:"Split by Level",description:"Some secondary rooms on different floor. Separation by generation or use.",targetSpace:"STAIR",relationship:"N",isDefault:!1,warnings:[],triggerConditions:["numberOfLevels >= 2",'guestStayFrequency === "frequently"']}]}];function i(e){return a.filter(t=>t.applicablePresets.includes(e)).sort((e,t)=>e.priority-t.priority)}function r(e,t){return e.options.find(e=>e.id===t)}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.c=t,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,i){if(1&i&&(a=this(a)),8&i)return a;if("object"===typeof a&&a){if(4&i&&a.__esModule)return a;if(16&i&&"function"===typeof a.then)return a}var r=Object.create(null);n.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&a;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>a[e]);return o.default=()=>a,n.d(r,o),r}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,a)=>(n.f[a](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{213:"1a19098d",239:"83ce54bd",455:"3621a55d",596:"e2b52e5d"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="n4s-workflow-v2:";n.l=(a,i,r,o)=>{if(e[a])e[a].push(i);else{var s,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+r){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+r),s.src=a),e[a]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,a)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise((n,a)=>i=e[t]=[n,a]);a.push(i[2]=r);var o=n.p+n.u(t),s=new Error;n.l(o,a=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}},"chunk-"+t,t)}};var t=(t,a)=>{var i,r,[o,s,l]=a,c=0;if(o.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(a);c<o.length;c++)r=o[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},a=self.webpackChunkn4s_workflow_v2=self.webpackChunkn4s_workflow_v2||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();n(n.s=818)})();
//# sourceMappingURL=main.d4dfe0b2.js.map
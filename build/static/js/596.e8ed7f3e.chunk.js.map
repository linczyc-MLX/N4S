{"version":3,"file":"static/js/596.e8ed7f3e.chunk.js","mappings":"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","sources":["mansion-program/client/utils/pdf-export.ts"],"sourcesContent":["/**\n * PDF Export Utility\n * \n * Generates downloadable PDF summary of personalization choices.\n * Uses html2canvas + jsPDF approach for rich formatting.\n * \n * Place in: src/mansion-program/client/utils/pdf-export.ts\n */\n\nimport type { PersonalizationResult, AdjacencyDecision } from '../../shared/adjacency-decisions';\n\nexport interface PDFExportData {\n  result: PersonalizationResult;\n  decisions: AdjacencyDecision[];\n  presetName: string;\n  baseSF: number;\n  totalSF: number;\n  mermaidCode?: string | null;\n}\n\n/**\n * Generate PDF from personalization results\n * \n * Attempts to use jsPDF if available, falls back to printable HTML\n */\nexport async function generatePersonalizationPDF(data: PDFExportData): Promise<void> {\n  const { result, decisions, presetName, baseSF, totalSF, mermaidCode } = data;\n  \n  // Try to use jsPDF if available\n  try {\n    const jsPDF = (window as any).jspdf?.jsPDF;\n    if (jsPDF) {\n      await generateWithJsPDF(data, jsPDF);\n      return;\n    }\n  } catch (e) {\n    console.warn('jsPDF not available, using printable HTML');\n  }\n  \n  // Fallback: Generate printable HTML and trigger print dialog\n  generatePrintableHTML(data);\n}\n\n/**\n * Generate PDF using jsPDF library\n */\nasync function generateWithJsPDF(data: PDFExportData, jsPDF: any): Promise<void> {\n  const { result, decisions, presetName, baseSF, totalSF } = data;\n  \n  const doc = new jsPDF();\n  let y = 20;\n  const margin = 20;\n  const pageWidth = doc.internal.pageSize.width;\n  \n  // Title\n  doc.setFontSize(20);\n  doc.setTextColor(51, 51, 51);\n  doc.text('Adjacency Personalization Summary', margin, y);\n  y += 12;\n  \n  // Subtitle\n  doc.setFontSize(12);\n  doc.setTextColor(102, 102, 102);\n  doc.text(`${presetName} • Generated ${new Date().toLocaleDateString()}`, margin, y);\n  y += 15;\n  \n  // Summary box\n  doc.setFillColor(248, 249, 250);\n  doc.rect(margin, y, pageWidth - 2 * margin, 30, 'F');\n  y += 8;\n  \n  doc.setFontSize(10);\n  doc.setTextColor(51, 51, 51);\n  doc.text(`Total Program: ${totalSF.toLocaleString()} SF`, margin + 5, y);\n  doc.text(`Decisions: ${result.choices.length}`, margin + 70, y);\n  doc.text(`Warnings: ${result.warningCount}`, margin + 110, y);\n  doc.text(`Bridges: ${result.requiredBridges.length}`, margin + 150, y);\n  y += 30;\n  \n  // Decisions\n  doc.setFontSize(14);\n  doc.setTextColor(51, 51, 51);\n  doc.text('Your Selections', margin, y);\n  y += 8;\n  \n  doc.setFontSize(10);\n  for (const choice of result.choices) {\n    const decision = decisions.find(d => d.id === choice.decisionId);\n    const option = decision?.options.find(o => o.id === choice.selectedOptionId);\n    \n    if (!decision || !option) continue;\n    \n    // Check for page break\n    if (y > 270) {\n      doc.addPage();\n      y = 20;\n    }\n    \n    // Decision title\n    doc.setTextColor(51, 51, 51);\n    const status = choice.isDefault ? '✓' : '○';\n    doc.text(`${status} ${decision.title}`, margin, y);\n    y += 5;\n    \n    // Selection\n    doc.setTextColor(102, 102, 102);\n    doc.text(`   ${option.label}`, margin, y);\n    y += 5;\n    \n    // Relationship\n    doc.setTextColor(153, 153, 153);\n    doc.text(`   ${decision.primarySpace} → ${option.targetSpace} (${option.relationship})`, margin, y);\n    y += 8;\n    \n    // Warnings\n    if (choice.warnings.length > 0) {\n      doc.setTextColor(230, 81, 0);\n      for (const warning of choice.warnings) {\n        doc.text(`   ⚠ ${warning}`, margin, y);\n        y += 5;\n      }\n      y += 3;\n    }\n  }\n  \n  // Bridges section\n  if (result.requiredBridges.length > 0) {\n    if (y > 250) {\n      doc.addPage();\n      y = 20;\n    }\n    \n    y += 5;\n    doc.setFontSize(14);\n    doc.setTextColor(51, 51, 51);\n    doc.text('Required Bridge Spaces', margin, y);\n    y += 8;\n    \n    doc.setFontSize(10);\n    for (const bridge of result.requiredBridges) {\n      const name = bridge.replace(/([A-Z])/g, ' $1').trim();\n      doc.text(`• ${name}`, margin, y);\n      y += 6;\n    }\n  }\n  \n  // Footer\n  const pageCount = doc.internal.getNumberOfPages();\n  for (let i = 1; i <= pageCount; i++) {\n    doc.setPage(i);\n    doc.setFontSize(8);\n    doc.setTextColor(153, 153, 153);\n    doc.text(\n      `N4S Mansion Validation Program • Page ${i} of ${pageCount}`,\n      pageWidth / 2,\n      290,\n      { align: 'center' }\n    );\n  }\n  \n  // Save\n  doc.save(`N4S-Adjacency-${presetName.replace(/[^a-z0-9]/gi, '')}-${Date.now()}.pdf`);\n}\n\n/**\n * Generate printable HTML and open print dialog\n */\nfunction generatePrintableHTML(data: PDFExportData): void {\n  const { result, decisions, presetName, baseSF, totalSF, mermaidCode } = data;\n  \n  const status = result.redFlagCount > 0 ? 'warning' : result.warningCount > 0 ? 'advisory' : 'pass';\n  const statusText = {\n    pass: 'Optimized Layout',\n    advisory: 'Ready with Advisories',\n    warning: 'Review Recommended'\n  }[status];\n  \n  const html = `\n<!DOCTYPE html>\n<html>\n<head>\n  <title>N4S Adjacency Personalization - ${presetName}</title>\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body { \n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      color: #333;\n      padding: 40px;\n      max-width: 800px;\n      margin: 0 auto;\n    }\n    h1 { font-size: 24px; margin-bottom: 8px; }\n    h2 { font-size: 18px; margin: 24px 0 12px; color: #333; border-bottom: 2px solid #e0e0e0; padding-bottom: 8px; }\n    .subtitle { color: #666; margin-bottom: 24px; }\n    .status { \n      padding: 16px; \n      border-radius: 8px; \n      margin-bottom: 24px;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n    .status.pass { background: #e8f5e9; color: #2e7d32; }\n    .status.advisory { background: #fff3e0; color: #e65100; }\n    .status.warning { background: #ffebee; color: #c62828; }\n    .status-icon { font-size: 24px; }\n    .summary-grid {\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      gap: 16px;\n      margin-bottom: 24px;\n    }\n    .summary-item {\n      background: #f5f5f5;\n      padding: 16px;\n      border-radius: 8px;\n      text-align: center;\n    }\n    .summary-value { font-size: 24px; font-weight: bold; display: block; }\n    .summary-label { font-size: 12px; color: #666; text-transform: uppercase; }\n    .decision-item {\n      padding: 16px 0;\n      border-bottom: 1px solid #eee;\n    }\n    .decision-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 4px;\n    }\n    .decision-title { font-weight: 600; }\n    .badge {\n      padding: 2px 8px;\n      border-radius: 4px;\n      font-size: 12px;\n    }\n    .badge.recommended { background: #e8f5e9; color: #2e7d32; }\n    .badge.custom { background: #e3f2fd; color: #1565c0; }\n    .decision-selection { color: #666; }\n    .decision-relationship { color: #999; font-size: 12px; }\n    .warning-tag {\n      display: inline-block;\n      background: #fff3e0;\n      color: #e65100;\n      padding: 4px 8px;\n      border-radius: 4px;\n      font-size: 12px;\n      margin-top: 8px;\n      margin-right: 8px;\n    }\n    .bridge-item {\n      padding: 12px;\n      background: #e8f5e9;\n      border-radius: 8px;\n      margin-bottom: 8px;\n    }\n    .bridge-name { font-weight: 600; text-transform: capitalize; }\n    .bridge-desc { font-size: 14px; color: #666; }\n    .footer {\n      margin-top: 40px;\n      padding-top: 16px;\n      border-top: 1px solid #eee;\n      text-align: center;\n      color: #999;\n      font-size: 12px;\n    }\n    @media print {\n      body { padding: 20px; }\n      .no-print { display: none; }\n    }\n  </style>\n</head>\n<body>\n  <h1>Adjacency Personalization Summary</h1>\n  <p class=\"subtitle\">${presetName} • Generated ${new Date().toLocaleDateString()}</p>\n  \n  <div class=\"status ${status}\">\n    <span class=\"status-icon\">${status === 'pass' ? '✓' : '⚠'}</span>\n    <div>\n      <strong>${statusText}</strong>\n      <div>${result.warningCount} consideration${result.warningCount !== 1 ? 's' : ''}</div>\n    </div>\n  </div>\n  \n  <div class=\"summary-grid\">\n    <div class=\"summary-item\">\n      <span class=\"summary-value\">${totalSF.toLocaleString()}</span>\n      <span class=\"summary-label\">Total SF</span>\n    </div>\n    <div class=\"summary-item\">\n      <span class=\"summary-value\">${result.choices.length}</span>\n      <span class=\"summary-label\">Decisions</span>\n    </div>\n    <div class=\"summary-item\">\n      <span class=\"summary-value\">${result.warningCount}</span>\n      <span class=\"summary-label\">Warnings</span>\n    </div>\n    <div class=\"summary-item\">\n      <span class=\"summary-value\">${result.requiredBridges.length}</span>\n      <span class=\"summary-label\">Bridges</span>\n    </div>\n  </div>\n  \n  <h2>Your Selections</h2>\n  ${result.choices.map(choice => {\n    const decision = decisions.find(d => d.id === choice.decisionId);\n    const option = decision?.options.find(o => o.id === choice.selectedOptionId);\n    if (!decision || !option) return '';\n    \n    return `\n      <div class=\"decision-item\">\n        <div class=\"decision-header\">\n          <span class=\"decision-title\">${decision.title}</span>\n          <span class=\"badge ${choice.isDefault ? 'recommended' : 'custom'}\">\n            ${choice.isDefault ? '✓ Recommended' : 'Custom'}\n          </span>\n        </div>\n        <div class=\"decision-selection\">${option.label}</div>\n        <div class=\"decision-relationship\">${decision.primarySpace} → ${option.targetSpace} (${option.relationship})</div>\n        ${choice.warnings.map(w => `<span class=\"warning-tag\">⚠ ${w}</span>`).join('')}\n      </div>\n    `;\n  }).join('')}\n  \n  ${result.requiredBridges.length > 0 ? `\n    <h2>Required Bridge Spaces</h2>\n    ${result.requiredBridges.map(bridge => {\n      const name = bridge.replace(/([A-Z])/g, ' $1').trim();\n      const descriptions: Record<string, string> = {\n        'butlerPantry': 'Service corridor between kitchen and dining',\n        'soundLock': 'Acoustic vestibule for media room isolation',\n        'guestAutonomy': 'Independent guest suite facilities',\n        'wetFeetIntercept': 'Pool-to-house transition zone',\n        'opsCore': 'Staff operations hub'\n      };\n      return `\n        <div class=\"bridge-item\">\n          <div class=\"bridge-name\">${name}</div>\n          <div class=\"bridge-desc\">${descriptions[bridge] || 'Supporting space'}</div>\n        </div>\n      `;\n    }).join('')}\n  ` : ''}\n  \n  <div class=\"footer\">\n    N4S Mansion Validation Program • ${new Date().toLocaleString()}\n  </div>\n  \n  <script>\n    // Auto-print when loaded\n    window.onload = function() {\n      window.print();\n    };\n  </script>\n</body>\n</html>\n  `;\n  \n  // Open in new window and trigger print\n  const printWindow = window.open('', '_blank');\n  if (printWindow) {\n    printWindow.document.write(html);\n    printWindow.document.close();\n  }\n}\n\nexport default generatePersonalizationPDF;\n"],"names":["async","generatePersonalizationPDF","data","result","decisions","presetName","baseSF","totalSF","mermaidCode","_jspdf","jsPDF","window","jspdf","doc","y","margin","pageWidth","internal","pageSize","width","setFontSize","setTextColor","text","concat","Date","toLocaleDateString","setFillColor","rect","toLocaleString","choices","length","warningCount","requiredBridges","choice","decision","find","d","id","decisionId","option","options","o","selectedOptionId","addPage","status","isDefault","title","label","primarySpace","targetSpace","relationship","warnings","warning","bridge","name","replace","trim","pageCount","getNumberOfPages","i","setPage","align","save","now","generateWithJsPDF","e","console","warn","redFlagCount","statusText","pass","advisory","html","map","w","join","descriptions","printWindow","open","document","write","close","generatePrintableHTML"],"ignoreList":[],"sourceRoot":""}